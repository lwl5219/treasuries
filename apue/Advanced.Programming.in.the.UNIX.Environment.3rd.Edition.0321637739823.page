<div id="pf337" class="pf w4 h1f" data-page-no="337"><div class="pc pc337 w4 h1f"><img class="bi x0 y0 w3 h4" alt="" src="bg337.png"/><div class="t m0 x31 h2 y8e ff1 fs0 fc0 sc0 ls0 ws0"><span class="fc1 sc0">ptg10805159</span></div><div class="t m0 x32 h47 y25f ff1e fsb fc0 sc0 ls0 ws0">21</div><div class="t m0 x32 h20 y8f ff15 fs2 fc0 sc0 ls0 ws0">Comm<span class="_ _1"></span>unica <span class="_ _52"></span>ting<span class="_ _9b"> </span>with <span class="_"> </span>a</div><div class="t m0 x32 h20 y579 ff15 fs2 fc0 sc0 ls0 ws0">Netw<span class="_ _6"></span>or <span class="_ _7"></span>k<span class="_ _41"> </span>Pr <span class="_ _26"></span>inter</div><div class="t m0 x35 h48 y1e4 ff16 fs1 fc0 sc0 ls0 ws0">21.1 <span class="_ _93"> </span>Introduction</div><div class="t m0 x32 h28 y1e6 ff19 fs5 fc0 sc0 ls72 ws0">We <span class="_ _4b"> </span>n<span class="_ _9"></span><span class="ls0">ow <span class="_"> </span>develop <span class="_ _66"> </span>a <span class="_ _66"> </span>program <span class="_"> </span>that <span class="_ _66"> </span>can <span class="_"> </span>communicate <span class="_ _66"> </span>with <span class="_ _66"> </span>a <span class="_ _66"> </span>network <span class="_ _66"> </span>printer<span class="_ _1"></span><span class="ls170e">.T<span class="_ _49"></span><span class="ls0">hese</span></span></span></div><div class="t m0 x32 h28 y1e7 ff19 fs5 fc0 sc0 ls0 ws0">printers <span class="_ _2"></span>ar<span class="ls170f">ec<span class="_ _8"></span><span class="ls0">onnected <span class="_ _3"></span>to <span class="_ _3"></span>multiple <span class="_ _2"></span>computers <span class="_ _3"></span>via <span class="_ _3"></span>Ethernet <span class="_ _2"></span>and <span class="_ _3"></span>often <span class="_ _3"></span>support <span class="_ _3"></span>PostScript</span></span></div><div class="t m0 x32 h28 y1e8 ff19 fs5 fc0 sc0 ls0 ws0">ﬁles <span class="_ _2"></span>as <span class="_ _2"></span>well <span class="_ _3"></span>as <span class="_ _2"></span>plain <span class="_ _3"></span>text <span class="_ _2"></span>ﬁles.<span class="_ _61"> </span>Applications <span class="_ _3"></span>generally <span class="_ _2"></span>use <span class="_ _3"></span>the <span class="_ _2"></span>Internet <span class="_ _2"></span>Printing <span class="_ _3"></span>Protocol</div><div class="t m0 x32 h28 y5942 ff19 fs5 fc0 sc0 ls0 ws0">(</div><div class="t m0 x62 h28 y1e9 ff19 fs5 fc0 sc0 ls0 ws0">IPP</div><div class="t m0 xf7 h28 y5942 ff19 fs5 fc0 sc0 ls0 ws0">)</div><div class="t m0 x182 h28 y1e9 ff19 fs5 fc0 sc0 ls0 ws0">to <span class="_ _16"> </span>communicate <span class="_ _16"> </span>with <span class="_ _16"> </span>these <span class="_ _5a"> </span>printers, <span class="_ _16"> </span>although <span class="_ _16"> </span>some <span class="_ _16"> </span>support <span class="_ _5a"> </span>alternative</div><div class="t m0 x32 h28 y1ea ff19 fs5 fc0 sc0 ls0 ws0">communication protocols.</div><div class="t m0 x3f h28 y1eb ff19 fs5 fc0 sc0 ls72 ws0">We <span class="_ _e"> </span>a<span class="_ _9"></span><span class="ls16">re <span class="_ _9"></span>a<span class="ls0">bout <span class="_ _2"></span>to <span class="_ _2"></span>describe <span class="_ _2"></span>two <span class="_ _3"></span>programs: a <span class="_ _2"></span>print <span class="_ _2"></span>spooler <span class="_ _2"></span>daemon <span class="_ _2"></span>that <span class="_ _2"></span>sends <span class="_ _3"></span>jobs <span class="_ _2"></span>to <span class="_ _2"></span>a</span></span></div><div class="t m0 x32 h28 y1ec ff19 fs5 fc0 sc0 ls0 ws0">printer <span class="_ _42"> </span>and <span class="_ _53"> </span>a <span class="_ _42"> </span>command <span class="_ _53"> </span>to <span class="_ _42"> </span>submit <span class="_ _53"> </span>print <span class="_ _42"> </span>jobs <span class="_ _53"> </span>to <span class="_ _42"> </span>the <span class="_ _53"> </span>spooler <span class="_ _42"> </span>daemon.<span class="_ _54"> </span>Since <span class="_ _53"> </span>the <span class="_ _42"> </span>print</div><div class="t m0 x32 h28 y1ed ff19 fs5 fc0 sc0 ls0 ws0">spooler <span class="_ _66"> </span>has <span class="_ _47"> </span>to <span class="_ _66"> </span>do <span class="_ _47"> </span>multiple <span class="_ _66"> </span>things <span class="_ _47"> </span>(e.g., <span class="_ _66"> </span>communicate <span class="_ _47"> </span>with <span class="_"> </span>clients <span class="_ _47"> </span>submitting <span class="_ _66"> </span>jobs,</div><div class="t m0 x32 h28 y1ee ff19 fs5 fc0 sc0 ls0 ws0">communicate <span class="_ _3"></span>with <span class="_ _3"></span>the <span class="_ _3"></span>printer<span class="_ _6"></span><span class="ls1710">,r<span class="_ _8"></span><span class="ls0">ead <span class="_ _3"></span>ﬁles, <span class="_ _3"></span>scan <span class="_ _3"></span>directories), <span class="_ _3"></span>this <span class="_ _3"></span>gives <span class="_ _3"></span>us <span class="_ _3"></span>a <span class="_ _3"></span>chance <span class="_ _3"></span>to <span class="_ _3"></span>use</span></span></div><div class="t m0 x32 h28 y98 ff19 fs5 fc0 sc0 ls0 ws0">many <span class="_ _3"></span>of <span class="_ _3"></span>the <span class="_ _3"></span>functions <span class="_ _3"></span>from <span class="_ _2"></span>earlier <span class="_ _3"></span>chapters.<span class="_ _16"> </span>For <span class="_ _3"></span>example, <span class="_ _3"></span>we <span class="_ _3"></span>use <span class="_ _3"></span>threads <span class="_ _3"></span>(Chapters <span class="_ _3"></span>1<span class="_ _1"></span>1</div><div class="t m0 x32 h28 y1ef ff19 fs5 fc0 sc0 ls0 ws0">and <span class="_ _45"> </span>12) <span class="_ _45"> </span>to <span class="_ _45"> </span>simplify <span class="_ _45"> </span>the <span class="_ _45"> </span>design <span class="_ _35"> </span>of <span class="_ _45"> </span>the <span class="_ _45"> </span>print <span class="_ _45"> </span>spooler <span class="_ _45"> </span>and <span class="_ _45"> </span>sockets <span class="_ _45"> </span>(Chapter <span class="_ _45"> </span>16) <span class="_ _35"> </span>to</div><div class="t m0 x32 h28 y1823 ff19 fs5 fc0 sc0 ls0 ws0">communicate <span class="_ _9"></span>between <span class="_ _9"></span>the <span class="_ _23"></span>pr<span class="_ _0"></span>ogram <span class="_ _9"></span>used <span class="_ _9"></span>to <span class="_ _23"></span>schedule <span class="_ _9"></span>a <span class="_ _9"></span>ﬁle <span class="_ _9"></span>to <span class="_ _23"></span>be <span class="_ _9"></span>printed <span class="_ _9"></span>and <span class="_ _9"></span>the <span class="_ _23"></span>print</div><div class="t m0 x32 h28 y1f0 ff19 fs5 fc0 sc0 ls0 ws0">spooler<span class="_ _6"></span><span class="ls46">,a<span class="_ _5"></span><span class="ls0">nd also between the print spooler and the network printer<span class="_ _6"></span>.</span></span></div><div class="t m0 x35 h48 y1f2 ff16 fs1 fc0 sc0 ls0 ws0">21.2 <span class="_ _93"> </span>The<span class="_ _54"> </span>Internet <span class="_"> </span>Printing <span class="_"> </span>Protocol</div><div class="t m0 x32 h28 y1f4 ff19 fs5 fc0 sc0 ls0 ws0">IPP speciﬁes <span class="_ _2"></span>the <span class="_ _2"></span>communication <span class="_ _2"></span>rules <span class="_ _2"></span>for <span class="_ _2"></span>building <span class="_ _2"></span>network-based <span class="_ _2"></span>printing systems.<span class="_ _61"> </span>By</div><div class="t m0 x32 h28 y1f5 ff19 fs5 fc0 sc0 ls0 ws0">embedding <span class="_ _2"></span>an <span class="_ _3"></span>IPP <span class="_ _3"></span>server <span class="_ _3"></span>inside <span class="_ _3"></span>a <span class="_ _3"></span>printer <span class="_ _3"></span>with <span class="_ _3"></span>an <span class="_ _3"></span>Ethernet <span class="_ _3"></span>card, <span class="_ _2"></span>the <span class="_ _3"></span>printer <span class="_ _3"></span>can <span class="_ _3"></span>service</div><div class="t m0 x32 h28 y1f6 ff19 fs5 fc0 sc0 ls16 ws0">re<span class="ls0">quests from many computer systems.<span class="_ _46"> </span>These computer systems <span class="_ _2"></span>need not be located on</span></div><div class="t m0 x32 h28 y1f7 ff19 fs5 fc0 sc0 ls0 ws0">the <span class="_ _2"></span>same <span class="_ _3"></span>physical <span class="_ _2"></span>network, <span class="_ _3"></span>however<span class="_ _6"></span><span class="ls1711">.I<span class="_ _5b"></span><span class="ls0">PP <span class="_ _2"></span>is <span class="_ _3"></span>built <span class="_ _2"></span>on <span class="_ _3"></span>top <span class="_ _3"></span>of <span class="_ _2"></span>standar<span class="ls1712">dI<span class="_ _8"></span><span class="ls0">nternet <span class="_ _3"></span>protocols,</span></span></span></span></div><div class="t m0 x32 h28 y1f8 ff19 fs5 fc0 sc0 ls0 ws0">so <span class="_ _3"></span>any <span class="_ _9"></span>computer <span class="_ _9"></span>that <span class="_ _3"></span>can <span class="_ _9"></span>create <span class="_ _3"></span>a <span class="_ _3"></span>TCP/IP <span class="_ _9"></span>connection <span class="_ _9"></span>to <span class="_ _3"></span>the <span class="_ _9"></span>printer <span class="_ _9"></span>can <span class="_ _3"></span>submit <span class="_ _9"></span>a <span class="_ _3"></span>print</div><div class="t m0 x32 h28 y1f9 ff19 fs5 fc0 sc0 ls0 ws0">job.</div><div class="t m0 x1c0 h23 y1fa ff18 fs0 fc0 sc0 ls0 ws0">789</div><a class="l" href="#pf13" data-dest-detail='[19,"XYZ",50,757,1]'><div class="d m1" style="border-style:none;position:absolute;left:157.497886px;bottom:891.235805px;width:279.685013px;height:174.998017px;background-color:rgba(255,255,255,0.000001);"></div></a><a class="l" href="#pf13" data-dest-detail='[19,"XYZ",50,757,1]'><div class="d m1" style="border-style:none;position:absolute;left:80.891576px;bottom:718.426788px;width:105.755196px;height:19.680023px;background-color:rgba(255,255,255,0.000001);"></div></a><a class="l" href="#pf13" data-dest-detail='[19,"XYZ",50,757,1]'><div class="d m1" style="border-style:none;position:absolute;left:80.891785px;bottom:290.026820px;width:215.123093px;height:19.679993px;background-color:rgba(255,255,255,0.000001);"></div></a></div><div class="pi" data-data='{"ctm":[2.100000,0.000000,0.000000,2.100000,-115.668004,-156.491993]}'></div></div>
