<div id="pf275" class="pf w4 h1f" data-page-no="275"><div class="pc pc275 w4 h1f"><img class="bi x0 y0 w3 h4" alt="" src="apue/bg275.png"/><div class="t m0 x31 h2 y8e ff1 fs0 fc0 sc0 ls0 ws0"><span class="fc1 sc0">ptg10805159</span></div><div class="t m0 x35 h24 ya4 ff19 fs0 fc0 sc0 ls0 ws0">Section <span class="_"> </span>16.3<span class="_ _2c7"> </span>Addressing<span class="_ _1fb"> </span><span class="ff18">595</span></div><div class="t m0 x32 h53 y12f ff16 fs2b fc0 sc0 ls0 ws0">16.3.2 <span class="_ _54"> </span>Address <span class="_"> </span>Formats</div><div class="t m0 x32 h2a y4de ff19 fsf fc0 sc0 ls0 ws0">An <span class="_ _42"> </span>address <span class="_ _42"> </span>identiﬁes <span class="_ _53"> </span>a <span class="_ _42"> </span>socket <span class="_ _53"> </span>endpoint <span class="_ _42"> </span>in <span class="_ _53"> </span>a <span class="_ _42"> </span>particular <span class="_ _53"> </span>communication <span class="_ _53"> </span>domain.<span class="_ _54"> </span>The</div><div class="t m0 x32 h2a y6d0 ff19 fsf fc0 sc0 ls0 ws0">address <span class="_ _42"> </span>format <span class="_ _53"> </span>is <span class="_ _42"> </span>speciﬁc <span class="_ _53"> </span>to <span class="_ _53"> </span>the <span class="_ _53"> </span>particular <span class="_ _53"> </span>domain.<span class="_ _54"> </span>So <span class="_ _53"> </span>that <span class="_ _53"> </span>addresses <span class="_ _42"> </span>with <span class="_ _53"> </span>differ<span class="_ _0"></span>ent</div><div class="t m0 x32 h2a y6d1 ff19 fsf fc0 sc0 ls0 ws0">formats <span class="_"> </span>can <span class="_ _66"> </span>be <span class="_ _66"> </span>passed <span class="_ _66"> </span>to <span class="_ _66"> </span>the <span class="_ _66"> </span>socket <span class="_ _66"> </span>functions, <span class="_ _66"> </span>the <span class="_ _66"> </span>addresses <span class="_"> </span>ar<span class="ls1320">ec<span class="_ _5b"></span><span class="ls0">ast <span class="_ _66"> </span>to <span class="_ _66"> </span>a <span class="_ _66"> </span>generic</span></span></div><div class="t m0 x32 h26 y6d2 ff1a fsf fc0 sc0 ls0 ws0">sockaddr<span class="_ _80"> </span><span class="ff19">address structur<span class="_ _0"></span>e:</span></div><div class="t m0 x3f h57 y33ed ff1a fs2d fc0 sc0 ls0 ws0">struct sockaddr {</div><div class="t m0 xf4 h57 y475e ff1a fs2d fc0 sc0 ls0 ws0">sa_family_t <span class="_ _5e"> </span>sa_family;<span class="_ _3a"> </span>/* address family */</div><div class="t m0 xf4 h57 y475f ff1a fs2d fc0 sc0 ls0 ws0">char <span class="_ _173"> </span>sa_data[];<span class="_ _3a"> </span>/* variable-length address */</div><div class="t m0 xf4 h57 y4760 ff1a fs2d fc0 sc0 ls0 ws0">.</div><div class="t m0 xf4 h57 y4761 ff1a fs2d fc0 sc0 ls0 ws0">.</div><div class="t m0 xf4 h57 y4762 ff1a fs2d fc0 sc0 ls0 ws0">.</div><div class="t m0 x3f h57 y4763 ff1a fs2d fc0 sc0 ls0 ws0">};</div><div class="t m0 x32 h26 y4764 ff19 fsf fc0 sc0 ls0 ws0">Implementations <span class="_ _e"> </span>ar<span class="ls1321">ef<span class="_ _4a"></span><span class="ls45">re<span class="_ _2"></span><span class="ls0">e<span class="_ _59"> </span>to<span class="_ _4b"> </span>add <span class="_ _e"> </span>mor<span class="ls1321">em<span class="_ _55"></span><span class="ls0">embers <span class="_ _e"> </span>and <span class="_ _e"> </span>deﬁne <span class="_ _e"> </span>a <span class="_ _e"> </span>size <span class="_ _e"> </span>for <span class="_ _e"> </span>the<span class="_ _59"> </span><span class="ff1a">sa_data</span></span></span></span></span></span></div><div class="t m0 x32 h2a y4765 ff19 fsf fc0 sc0 ls0 ws0">member<span class="_ _6"></span><span class="ls86">.F<span class="_ _4a"></span><span class="ls0">or example, on Linux, the structure<span class="_"> </span>is<span class="_"> </span>deﬁned as</span></span></div><div class="t m0 x3f h57 y4766 ff1a fs2d fc0 sc0 ls0 ws0">struct sockaddr {</div><div class="t m0 xf4 h57 y4767 ff1a fs2d fc0 sc0 ls0 ws0">sa_family_t <span class="_"> </span>sa_family;<span class="_ _15"> </span>/* address family */</div><div class="t m0 xf4 h57 y4768 ff1a fs2d fc0 sc0 ls0 ws0">char <span class="_ _186"> </span>sa_data[14];<span class="_ _d9"> </span>/* variable-length address */</div><div class="t m0 x3f h57 y4769 ff1a fs2d fc0 sc0 ls0 ws0">};</div><div class="t m0 x32 h2a y476a ff19 fsf fc0 sc0 ls0 ws0">But on FreeBSD, the str<span class="_ _0"></span>ucture<span class="_"> </span>is<span class="_"> </span>deﬁned as</div><div class="t m0 x3f h57 y476b ff1a fs2d fc0 sc0 ls0 ws0">struct sockaddr {</div><div class="t m0 xf4 h57 y476c ff1a fs2d fc0 sc0 ls0 ws0">unsigned char<span class="_ _d9"> </span>sa_len; <span class="_ _88"> </span>/*<span class="_"> </span>total length */</div><div class="t m0 xf4 h57 y476d ff1a fs2d fc0 sc0 ls0 ws0">sa_family_t <span class="_ _68"> </span>sa_family; <span class="_ _87"> </span>/*<span class="_"> </span>address family */</div><div class="t m0 xf4 h57 y476e ff1a fs2d fc0 sc0 ls0 ws0">char <span class="_ _74"> </span>sa_data[14];<span class="_ _3a"> </span>/* variable-length address */</div><div class="t m0 x3f h57 y476f ff1a fs2d fc0 sc0 ls0 ws0">};</div><div class="t m0 x3f h26 y4770 ff19 fsf fc0 sc0 ls0 ws0">Internet <span class="_ _23"></span>addresses <span class="_ _9"></span>ar<span class="ls1322">ed<span class="_ _43"></span><span class="ls0">eﬁned <span class="_ _23"> </span>in<span class="_ _35"> </span><span class="ff1a">&lt;netinet/in.h&gt;</span><span class="ls1323">.I<span class="_ _7"></span><span class="ls1322">nt<span class="_ _b"></span><span class="ls0">he <span class="_ _23"></span>IPv4 <span class="_ _9"></span>Internet <span class="_ _23"> </span>domain</span></span></span></span></span></div><div class="t m0 x32 h26 y4771 ff19 fsf fc0 sc0 ls0 ws0">(<span class="ff1a">AF_INET</span>), a socket address is r<span class="_ _0"></span>epr<span class="_ _0"></span>esented by a<span class="_"> </span><span class="ff1a">sockaddr_in<span class="_ _80"> </span></span>structure:</div><div class="t m0 x3f h57 y4772 ff1a fs2d fc0 sc0 ls0 ws0">struct in_addr {</div><div class="t m0 xf4 h57 y4773 ff1a fs2d fc0 sc0 ls0 ws0">in_addr_t <span class="_ _189"> </span>s_addr;<span class="_ _186"> </span>/* IPv4 address */</div><div class="t m0 x3f h57 y4774 ff1a fs2d fc0 sc0 ls0 ws0">};</div><div class="t m0 x3f h57 y4775 ff1a fs2d fc0 sc0 ls0 ws0">struct sockaddr_in {</div><div class="t m0 xf4 h57 y4776 ff1a fs2d fc0 sc0 ls0 ws0">sa_family_t <span class="_ _68"> </span>sin_family; <span class="_ _87"> </span>/*<span class="_"> </span>address family */</div><div class="t m0 xf4 h57 y4777 ff1a fs2d fc0 sc0 ls0 ws0">in_port_t <span class="_ _8a"> </span>sin_port; <span class="_ _8a"> </span>/*<span class="_"> </span>port number */</div><div class="t m0 xf4 h57 y4778 ff1a fs2d fc0 sc0 ls0 ws0">struct in_addr sin_addr;<span class="_ _189"> </span>/* IPv4 address */</div><div class="t m0 x3f h57 y4779 ff1a fs2d fc0 sc0 ls0 ws0">};</div><div class="t m0 x32 h26 y477a ff19 fsf fc0 sc0 ls0 ws0">The<span class="_ _45"> </span><span class="ff1a">in_port_t<span class="_ _47"> </span></span>data <span class="_ _9"></span>type <span class="_ _3"></span>is <span class="_ _9"></span>deﬁned <span class="_ _9"></span>to <span class="_ _9"></span>be <span class="_ _3"></span>a<span class="_ _45"> </span><span class="ff1a">uint16_t</span><span class="ls997">.T<span class="_ _62"></span><span class="ls0">he<span class="_ _45"> </span><span class="ff1a">in_addr_t<span class="_ _47"> </span></span>data <span class="_ _9"></span>type <span class="_ _9"></span>is</span></span></div><div class="t m0 x32 h26 y477b ff19 fsf fc0 sc0 ls0 ws0">deﬁned <span class="_ _9"></span>to <span class="_ _9"></span>be <span class="_ _23"></span>a<span class="_ _45"> </span><span class="ff1a">uint32_t</span><span class="ls2ad">.T<span class="_ _26"></span><span class="ls0">hese <span class="_ _23"></span>integer <span class="_ _9"></span>data <span class="_ _9"></span>types <span class="_ _23"></span>specify <span class="_ _9"></span>the <span class="_ _9"></span>number <span class="_ _23"></span>of <span class="_ _9"></span>bits <span class="_ _9"></span>in <span class="_ _9"></span>the</span></span></div><div class="t m0 x32 h26 y477c ff19 fsf fc0 sc0 ls0 ws0">data type and ar<span class="ls44">ed<span class="_ _4f"></span><span class="ls0">eﬁned in<span class="_"> </span><span class="ff1a">&lt;stdint.h&gt;</span>.</span></span></div><div class="t m0 x3f h26 y477d ff19 fsf fc0 sc0 ls0 ws0">In <span class="_ _23"></span>contrast <span class="_ _23"></span>to <span class="_ _23"></span>the<span class="_ _35"> </span><span class="ff1a">AF_INET<span class="_ _45"> </span></span>domain, <span class="_ _23"> </span>the <span class="_ _23"> </span>IPv6 <span class="_ _23"> </span>Internet <span class="_ _23"> </span>domain <span class="_ _23"> </span>(<span class="ff1a">AF_INET6</span><span class="ls745">)s<span class="_ _b"></span><span class="ls0">ocket</span></span></div><div class="t m0 x32 h26 y477e ff19 fsf fc0 sc0 ls0 ws0">address is r<span class="_ _0"></span>epr<span class="_ _0"></span>esented by a<span class="_"> </span><span class="ff1a">sockaddr_in6<span class="_ _80"> </span></span>structure:</div><div class="t m0 x3f h57 y477f ff1a fs2d fc0 sc0 ls0 ws0">struct in6_addr {</div><div class="t m0 xf4 h57 y4780 ff1a fs2d fc0 sc0 ls0 ws0">uint8_t <span class="_ _b7"> </span>s6_addr[16];<span class="_ _15"> </span>/* IPv6 address */</div><div class="t m0 x3f h57 y4781 ff1a fs2d fc0 sc0 ls0 ws0">};</div><a class="l" href="#pf12" data-dest-detail='[18,"XYZ",50,757,1]'><div class="d m1" style="border-style:none;position:absolute;left:156.492009px;bottom:1236.288916px;width:145.272003px;height:19.679993px;background-color:rgba(255,255,255,0.000001);"></div></a></div><div class="pi" data-data='{"ctm":[2.100000,0.000000,0.000000,2.100000,-115.668004,-156.491993]}'></div></div>
