<div id="pf51" class="pf w4 h1f" data-page-no="51"><div class="pc pc51 w4 h1f"><img class="bi x0 y0 w3 h4" alt="" src="bg51.png"/><div class="t m0 x31 h2 y8e ff1 fs0 fc0 sc0 ls0 ws0"><span class="fc1 sc0">ptg10805159</span></div><div class="t m0 x35 h24 ya4 ff19 fs0 fc0 sc0 ls0 ws0">Section <span class="_"> </span>2.5<span class="_ _c2"> </span>Limits<span class="_ _1b"> </span><span class="ff18">47</span></div><div class="t m0 x32 h57 y362 ff1a fs2d fc0 sc0 ls0 ws0">#include &quot;apue.h&quot;</div><div class="t m0 x32 h57 y3c0 ff1a fs2d fc0 sc0 ls0 ws0">#include &lt;errno.h&gt;</div><div class="t m0 x32 h57 y845 ff1a fs2d fc0 sc0 ls0 ws0">#include &lt;limits.h&gt;</div><div class="t m0 x32 h57 y846 ff1a fs2d fc0 sc0 ls0 ws0">static void pr_sysconf(char *, int);</div><div class="t m0 x32 h57 y847 ff1a fs2d fc0 sc0 ls0 ws0">static void pr_pathconf(char *, char *, int);</div><div class="t m0 x32 h57 y367 ff1a fs2d fc0 sc0 ls0 ws0">int</div><div class="t m0 x32 h57 y368 ff1a fs2d fc0 sc0 ls0 ws0">main(int argc, char *argv[])</div><div class="t m0 x32 h57 y848 ff1a fs2d fc0 sc0 ls0 ws0">{</div><div class="t m0 x8a h57 y849 ff1a fs2d fc0 sc0 ls0 ws0">if (argc != 2)</div><div class="t m0 x9d h57 y84a ff1a fs2d fc0 sc0 ls0 ws0">err_quit(&quot;usage: a.out &lt;dirname&gt;&quot;);</div><div class="t m0 x32 h57 y84b ff1a fs2d fc0 sc0 ls0 ws0">#ifdef ARG_MAX</div><div class="t m0 x8a h57 y84c ff1a fs2d fc0 sc0 ls0 ws0">printf(&quot;ARG_MAX defined to be %ld\n&quot;, (long)ARG_MAX+0);</div><div class="t m0 x32 h57 y84d ff1a fs2d fc0 sc0 ls0 ws0">#else</div><div class="t m0 x8a h57 y84e ff1a fs2d fc0 sc0 ls0 ws0">printf(&quot;no symbol for ARG_MAX\n&quot;);</div><div class="t m0 x32 h57 y84f ff1a fs2d fc0 sc0 ls0 ws0">#endif</div><div class="t m0 x32 h57 y850 ff1a fs2d fc0 sc0 ls0 ws0">#ifdef _SC_ARG_MAX</div><div class="t m0 x8a h57 y851 ff1a fs2d fc0 sc0 ls0 ws0">pr_sysconf(&quot;ARG_MAX =&quot;, _SC_ARG_MAX);</div><div class="t m0 x32 h57 y852 ff1a fs2d fc0 sc0 ls0 ws0">#else</div><div class="t m0 x8a h57 y853 ff1a fs2d fc0 sc0 ls0 ws0">printf(&quot;no symbol for _SC_ARG_MAX\n&quot;);</div><div class="t m0 x32 h57 y854 ff1a fs2d fc0 sc0 ls0 ws0">#endif</div><div class="t m0 x32 h57 y855 ff1a fs2d fc0 sc0 ls0 ws0">/* similar processing for all the rest of the sysconf symbols... */</div><div class="t m0 x32 h57 y856 ff1a fs2d fc0 sc0 ls0 ws0">#ifdef MAX_CANON</div><div class="t m0 x8a h57 y857 ff1a fs2d fc0 sc0 ls0 ws0">printf(&quot;MAX_CANON defined to be %ld\n&quot;, (long)MAX_CANON+0);</div><div class="t m0 x32 h57 y858 ff1a fs2d fc0 sc0 ls0 ws0">#else</div><div class="t m0 x8a h57 y859 ff1a fs2d fc0 sc0 ls0 ws0">printf(&quot;no symbol for MAX_CANON\n&quot;);</div><div class="t m0 x32 h57 y85a ff1a fs2d fc0 sc0 ls0 ws0">#endif</div><div class="t m0 x32 h57 y85b ff1a fs2d fc0 sc0 ls0 ws0">#ifdef _PC_MAX_CANON</div><div class="t m0 x8a h57 y85c ff1a fs2d fc0 sc0 ls0 ws0">pr_pathconf(&quot;MAX_CANON =&quot;, argv[1], _PC_MAX_CANON);</div><div class="t m0 x32 h57 y85d ff1a fs2d fc0 sc0 ls0 ws0">#else</div><div class="t m0 x8a h57 y85e ff1a fs2d fc0 sc0 ls0 ws0">printf(&quot;no symbol for _PC_MAX_CANON\n&quot;);</div><div class="t m0 x32 h57 y85f ff1a fs2d fc0 sc0 ls0 ws0">#endif</div><div class="t m0 x32 h57 y860 ff1a fs2d fc0 sc0 ls0 ws0">/* similar processing for all the rest of the pathconf symbols... */</div><div class="t m0 x8a h57 y861 ff1a fs2d fc0 sc0 ls0 ws0">exit(0);</div><div class="t m0 x32 h57 y862 ff1a fs2d fc0 sc0 ls0 ws0">}</div><div class="t m0 x32 h57 y863 ff1a fs2d fc0 sc0 ls0 ws0">static void</div><div class="t m0 x32 h57 y864 ff1a fs2d fc0 sc0 ls0 ws0">pr_sysconf(char *mesg, int name)</div><div class="t m0 x32 h57 y865 ff1a fs2d fc0 sc0 ls0 ws0">{</div><div class="t m0 x8a h57 y866 ff1a fs2d fc0 sc0 ls0 ws0">long <span class="_ _68"> </span>val;</div><div class="t m0 x8a h57 y867 ff1a fs2d fc0 sc0 ls0 ws0">fputs(mesg, stdout);</div><div class="t m0 x8a h57 y868 ff1a fs2d fc0 sc0 ls0 ws0">errno = 0;</div><div class="t m0 x8a h57 y869 ff1a fs2d fc0 sc0 ls0 ws0">if ((val = sysconf(name)) &lt; 0) {</div><div class="t m0 x9d h57 y86a ff1a fs2d fc0 sc0 ls0 ws0">if (errno != 0) {</div><div class="t m0 x1f h57 y86b ff1a fs2d fc0 sc0 ls0 ws0">if (errno == EINVAL)</div><div class="t m0 x126 h57 y86c ff1a fs2d fc0 sc0 ls0 ws0">fputs(&quot; (not supported)\n&quot;, stdout);</div><div class="t m0 x1f h57 y86d ff1a fs2d fc0 sc0 ls0 ws0">else</div></div><div class="pi" data-data='{"ctm":[2.100000,0.000000,0.000000,2.100000,-115.668004,-156.491993]}'></div></div>
