<div id="pfe2" class="pf w4 h1f" data-page-no="e2"><div class="pc pce2 w4 h1f"><img class="bi x0 y0 w3 h4" alt="" src="bge2.png"/><div class="t m0 x31 h2 y8e ff1 fs0 fc0 sc0 ls0 ws0"><span class="fc1 sc0">ptg10805159</span></div><div class="t m0 x35 h24 ya4 ff18 fs0 fc0 sc0 ls0 ws0">192<span class="_ _1b"> </span><span class="ff19">System <span class="_"> </span>Data <span class="_"> </span>Files <span class="_"> </span>and <span class="_"> </span>Information<span class="_ _114"> </span>Chapter <span class="_"> </span>6</span></div><div class="t m0 x3f h57 y1295 ff1a fs2d fc0 sc0 ls0 ws0">#include &lt;time.h&gt;</div><div class="t m0 x3f h57 y19f8 ff1a fs2d fc0 sc0 ls0 ws0">struct tm *gmtime(const time_t *<span class="ff1b">calptr</span>);</div><div class="t m0 x3f h57 y19f9 ff1a fs2d fc0 sc0 ls0 ws0">struct tm *localtime(const time_t *<span class="ff1b">calptr</span>);</div><div class="t m0 xff h57 y19fa ff19 fs2d fc0 sc0 ls0 ws0">Both return: pointer to br<span class="_ _0"></span>oken-down time,<span class="_"> </span><span class="ff1a">NULL<span class="_ _e"> </span></span>on error</div><div class="t m0 x32 h4d y19fb ff19 fs26 fc0 sc0 ls0 ws0">The <span class="_ _9"></span>differ<span class="_ _1"></span>ence <span class="_ _9"></span>between<span class="_ _45"> </span><span class="ff1a">localtime<span class="_ _45"> </span></span>and<span class="_ _45"> </span><span class="ff1a">gmtime<span class="_ _45"> </span></span>is <span class="_ _3"></span>that <span class="_ _9"></span>the <span class="_ _9"></span>ﬁrst <span class="_ _9"></span>converts <span class="_ _9"></span>the <span class="_ _9"></span>calendar</div><div class="t m0 x32 h49 y19fc ff19 fs26 fc0 sc0 ls0 ws0">time <span class="_ _3"></span>to <span class="_ _3"></span>the <span class="_ _3"></span>local <span class="_ _3"></span>time, <span class="_ _3"></span>taking <span class="_ _9"></span>into <span class="_ _2"></span>account <span class="_ _9"></span>the <span class="_ _3"></span>local <span class="_ _3"></span>time <span class="_ _3"></span>zone <span class="_ _3"></span>and <span class="_ _3"></span>daylight <span class="_ _3"></span>saving <span class="_ _9"></span>time</div><div class="t m0 x32 h49 y19fd ff19 fs26 fc0 sc0 ls0 ws0">ﬂag, <span class="_ _9"></span>whereas <span class="_ _9"></span>the <span class="_ _9"></span>latter <span class="_ _23"></span>converts <span class="_ _9"></span>the <span class="_ _23"></span>calendar <span class="_ _9"></span>time <span class="_ _9"></span>into <span class="_ _23"></span>a <span class="_ _9"></span>broken-down <span class="_ _9"></span>time <span class="_ _9"></span>expressed</div><div class="t m0 x32 h49 y19fe ff19 fs26 fc0 sc0 ls0 ws0">as UTC.</div><div class="t m0 x3f h4d y19ff ff19 fs26 fc0 sc0 ls0 ws0">The <span class="_ _53"> </span>function<span class="_ _4b"> </span><span class="ff1a">mktime<span class="_ _59"> </span></span>takes <span class="_ _53"> </span>a <span class="_ _e"> </span>broken-down <span class="_ _53"> </span>time, <span class="_ _e"> </span>expressed <span class="_ _53"> </span>as <span class="_ _e"> </span>a <span class="_ _53"> </span>local <span class="_ _e"> </span>time, <span class="_ _e"> </span>and</div><div class="t m0 x32 h4d y1a00 ff19 fs26 fc0 sc0 ls0 ws0">converts it into a<span class="_"> </span><span class="ff1a">time_t<span class="_ _80"> </span></span>value.</div><div class="t m0 x3f h4e y1a01 ff1a fs28 fc0 sc0 ls0 ws0">#include &lt;time.h&gt;</div><div class="t m0 x3f h4e y1a02 ff1a fs28 fc0 sc0 ls0 ws0">time_t mktime(struct tm *<span class="ff1b">tmptr</span>);</div><div class="t m0 x78 h7c y1a03 ff19 fs28 fc0 sc0 ls0 ws0">Returns: calendar time if OK,<span class="_"> </span><span class="ff20">−</span>1<span class="_"> </span>on<span class="_"> </span>error</div><div class="t m0 x3f h54 y1a04 ff19 fs2c fc0 sc0 ls0 ws0">The<span class="_"> </span><span class="ff1a">strftime<span class="_ _66"> </span></span>function is <span class="_ _2"></span>a<span class="_"> </span><span class="ff1a">printf</span>-like <span class="_ _2"></span>function for time <span class="_ _2"></span>values.<span class="_ _46"> </span>It is <span class="_ _2"></span>complicated</div><div class="t m0 x32 h55 y1a05 ff19 fs2c fc0 sc0 ls0 ws0">by the multitude of arguments available to customize the string it pr<span class="_ _0"></span>oduces.</div><div class="t m0 x3f h5d y1a06 ff1a fs2f fc0 sc0 ls0 ws0">#include &lt;time.h&gt;</div><div class="t m0 x3f h5d y1a07 ff1a fs2f fc0 sc0 ls0 ws0">size_t strftime(char *restrict<span class="_"> </span><span class="ff1b">buf</span><span class="ls395">,s<span class="_ _1d"></span><span class="ls0">ize_t<span class="_"> </span><span class="ff1b">maxsize</span>,</span></span></div><div class="t m0 x1dd h5d y1a08 ff1a fs2f fc0 sc0 ls0 ws0">const char *restrict<span class="_"> </span><span class="ff1b">format</span>,</div><div class="t m0 x1dd h5d y1a09 ff1a fs2f fc0 sc0 ls0 ws0">const struct tm *restrict<span class="_"> </span><span class="ff1b">tmptr</span>);</div><div class="t m0 x3f h5d y1a0a ff1a fs2f fc0 sc0 ls0 ws0">size_t strftime_l(char *restrict<span class="_"> </span><span class="ff1b">buf</span><span class="ls395">,s<span class="_ _1d"></span><span class="ls0">ize_t<span class="_"> </span><span class="ff1b">maxsize</span>,</span></span></div><div class="t m0 x1dd h5d y1a0b ff1a fs2f fc0 sc0 ls0 ws0">const char *restrict<span class="_"> </span><span class="ff1b">format</span>,</div><div class="t m0 x1dd h5d y1a0c ff1a fs2f fc0 sc0 ls0 ws0">const struct tm *restrict<span class="_"> </span><span class="ff1b">tmptr</span><span class="ls395">,l<span class="_ _1d"></span><span class="ls0">ocale_t<span class="_"> </span><span class="ff1b">locale</span>);</span></span></div><div class="t m0 x1ce hc2 y1a0d ff19 fs2f fc0 sc0 ls0 ws0">Both return: number of characters stor<span class="_ _0"></span>ed in array if room, 0 otherwise</div><div class="t m0 x76 h6d y1a0e ff19 fs12 fc0 sc0 ls425 ws0">Tw<span class="_ _3"></span><span class="ls803">oo<span class="_ _d"></span><span class="ls0">lder <span class="_ _9"></span>functions,<span class="_ _66"> </span><span class="ff1a">asctime<span class="_ _66"> </span></span>and<span class="_ _66"> </span><span class="ff1a">ctime</span><span class="ls803">,c<span class="_ _d"></span><span class="ls0">an <span class="_ _3"></span>be <span class="_ _9"></span>used <span class="_ _3"></span>to <span class="_ _9"></span>produce <span class="_ _3"></span>a <span class="_ _3"></span>26</span></span></span></span></div><div class="t m0 x169 h2f y1a0f ff19 fs12 fc0 sc0 ls0 ws0">-</div><div class="t m0 x16b h2f y1a0e ff19 fs12 fc0 sc0 ls0 ws0">byte <span class="_ _3"></span>printable <span class="_ _9"></span>string</div><div class="t m0 x76 h6d y1a10 ff19 fs12 fc0 sc0 ls0 ws0">similar <span class="_ _42"> </span>to <span class="_ _42"> </span>the <span class="_ _23"> </span>default <span class="_ _42"> </span>output <span class="_ _42"> </span>of <span class="_ _42"> </span>the<span class="_ _45"> </span><span class="ff1a">date</span></div><div class="t m0 x1de h2f y1a11 ff19 fs12 fc0 sc0 ls0 ws0">(</div><div class="t m0 x78 h2f y1a10 ff19 fs12 fc0 sc0 ls0 ws0">1</div><div class="t m0 xcd h2f y1a11 ff19 fs12 fc0 sc0 ls0 ws0">)</div><div class="t m0 xdc h2f y1a10 ff19 fs12 fc0 sc0 ls0 ws0">command. <span class="_ _45"> </span>However<span class="_ _1"></span><span class="ls804">,t<span class="_ _b"></span><span class="ls0">hese <span class="_ _42"> </span>functions <span class="_ _42"> </span>ar<span class="ls804">en<span class="_ _43"></span><span class="ls0">ow</span></span></span></span></div><div class="t m0 x76 h2f y1a12 ff19 fs12 fc0 sc0 ls0 ws0">marked obsolescent, because they ar<span class="ls38a">es<span class="_ _5"></span><span class="ls0">usceptible to buffer overﬂow problems.</span></span></div><div class="t m0 x32 h5c y1a13 ff19 fs29 fc0 sc0 ls0 ws0">The<span class="_ _47"> </span><span class="ff1a">strftime<span class="_ _45"> </span></span>and<span class="_ _47"> </span><span class="ff1a">strftime_l<span class="_ _47"> </span></span>functions <span class="_ _9"></span>ar<span class="ls805">et<span class="_ _b"></span><span class="ls0">he <span class="_ _3"></span>same, <span class="_ _9"></span>except <span class="_ _3"></span>that <span class="_ _3"></span>the<span class="_ _45"> </span><span class="ff1a">strftime_l</span></span></span></div><div class="t m0 x32 h5c y1a14 ff19 fs29 fc0 sc0 ls0 ws0">function <span class="_ _2"></span>allows <span class="_ _2"></span>the <span class="_ _2"></span>caller <span class="_ _3"></span>to <span class="_ _2"></span>specify <span class="_ _2"></span>the <span class="_ _3"></span>locale <span class="_ _2"></span>as <span class="_ _2"></span>an <span class="_ _2"></span>argument. <span class="_ _66"> </span>The<span class="_ _47"> </span><span class="ff1a">strftime<span class="_ _47"> </span></span>function</div><div class="t m0 x32 h5c y1a15 ff19 fs29 fc0 sc0 ls0 ws0">uses the locale speciﬁed by the<span class="_"> </span><span class="ff1a">TZ<span class="_ _80"> </span></span>environment variable.</div><div class="t m0 x3f h5b y1a16 ff19 fs29 fc0 sc0 ls0 ws0">The<span class="_ _47"> </span><span class="ff1b">tmptr<span class="_ _45"> </span></span>ar<span class="_ _0"></span>gument <span class="_ _3"></span>is <span class="_ _3"></span>the <span class="_ _9"></span>time <span class="_ _3"></span>value <span class="_ _3"></span>to <span class="_ _9"></span>format, <span class="_ _3"></span>speciﬁed <span class="_ _3"></span>by <span class="_ _9"></span>a <span class="_ _3"></span>pointer <span class="_ _3"></span>to <span class="_ _9"></span>a <span class="_ _3"></span>broken-</div><div class="t m0 x32 h5b y1a17 ff19 fs29 fc0 sc0 ls0 ws0">down <span class="_ _9"></span>time <span class="_ _9"></span>value.<span class="_ _5a"> </span>The <span class="_ _9"></span>formatted <span class="_ _9"></span>result <span class="_ _9"></span>is <span class="_ _9"></span>stored <span class="_ _3"></span>in <span class="_ _9"></span>the <span class="_ _9"></span>array<span class="_ _45"> </span><span class="ff1b">buf<span class="_ _45"> </span></span>whose <span class="_ _9"></span>size <span class="_ _23"></span>is<span class="_ _45"> </span><span class="ff1b">maxsize</span></div><div class="t m0 x32 h50 y1a18 ff19 fs29 fc0 sc0 ls0 ws0">characters. <span class="_ _44"> </span>If<span class="_ _44"> </span>the <span class="_ _53"> </span>size <span class="_ _42"> </span>of <span class="_ _53"> </span>the <span class="_ _53"> </span>result, <span class="_ _42"> </span>including <span class="_ _42"> </span>the <span class="_ _53"> </span>terminating <span class="_ _53"> </span>null, <span class="_ _42"> </span>ﬁts <span class="_ _53"> </span>in <span class="_ _53"> </span>the <span class="_ _42"> </span>buffer<span class="_ _1"></span>,</div><div class="t m0 x32 h5b y1a19 ff19 fs29 fc0 sc0 ls0 ws0">these <span class="_ _2"></span>functions <span class="_ _2"></span>return <span class="_ _2"></span>the <span class="_ _2"></span>number <span class="_ _2"></span>of <span class="_ _3"></span>characters <span class="_ _2"></span>stored in<span class="_ _47"> </span><span class="ff1b">buf</span><span class="ls806">,e<span class="_ _4f"></span><span class="ls0">xcluding <span class="_ _2"></span>the <span class="_ _3"></span>terminating</span></span></div><div class="t m0 x32 h50 y1a1a ff19 fs29 fc0 sc0 ls0 ws0">null. <span class="_"> </span>Otherwise,<span class="_"> </span>these functions return 0.</div><div class="t m0 x3f h5c y1a1b ff19 fs29 fc0 sc0 ls0 ws0">The<span class="_ _35"> </span><span class="ff1b">format<span class="_ _44"> </span></span>argument <span class="_ _23"> </span>controls <span class="_ _23"> </span>the <span class="_ _42"> </span>formatting <span class="_ _42"> </span>of <span class="_ _42"> </span>the <span class="_ _42"> </span>time <span class="_ _42"> </span>value.<span class="_ _51"> </span>Like <span class="_ _42"> </span>the<span class="_ _44"> </span><span class="ff1a">printf</span></div><div class="t m0 x32 h50 y1a1c ff19 fs29 fc0 sc0 ls0 ws0">functions, <span class="_ _47"> </span>conversion <span class="_ _47"> </span>speciﬁers <span class="_ _47"> </span>ar<span class="ls807">eg<span class="_ _1d"></span><span class="ls0">iven <span class="_ _47"> </span>as <span class="_ _47"> </span>a <span class="_ _47"> </span>percent <span class="_ _47"> </span>sign <span class="_ _47"> </span>followed <span class="_ _47"> </span>by <span class="_ _47"> </span>a <span class="_ _45"> </span>special</span></span></div><div class="t m0 x32 h5b y1a1d ff19 fs29 fc0 sc0 ls0 ws0">character<span class="_ _6"></span><span class="ls808">.A<span class="_ _4a"></span><span class="ls0">ll other characters in the<span class="_ _66"> </span><span class="ff1b">format<span class="_"> </span></span>string ar<span class="ls809">ec<span class="_ _d"></span><span class="ls0">opied to the output.<span class="_ _46"> </span><span class="ls2d4">Tw<span class="_ _9"></span><span class="ls809">op<span class="_ _5"></span><span class="ls0">ercent</span></span></span></span></span></span></span></div><div class="t m0 x32 h5c y1a1e ff19 fs29 fc0 sc0 ls0 ws0">signs <span class="_ _47"> </span>in <span class="_ _47"> </span>a <span class="_ _47"> </span>row <span class="_ _47"> </span>generate <span class="_ _47"> </span>a <span class="_ _45"> </span>single <span class="_ _47"> </span>percent <span class="_ _66"> </span>sign <span class="_ _45"> </span>in <span class="_ _47"> </span>the <span class="_ _47"> </span>output.<span class="_ _5f"> </span>Unlike <span class="_ _47"> </span>the<span class="_ _16"> </span><span class="ff1a">printf</span></div></div><div class="pi" data-data='{"ctm":[2.100000,0.000000,0.000000,2.100000,-115.668004,-156.491993]}'></div></div>
