<div id="pfb1" class="pf w4 h1f" data-page-no="b1"><div class="pc pcb1 w4 h1f"><img class="bi x0 y0 w3 h4" alt="" src="bgb1.png"/><div class="t m0 x31 h2 y8e ff1 fs0 fc0 sc0 ls0 ws0"><span class="fc1 sc0">ptg10805159</span></div><div class="t m0 x32 h47 y25f ff1e fsb fc0 sc0 ls0 ws0">5</div><div class="t m0 x32 h20 y8f ff15 fs2 fc0 sc0 ls0 ws0">Standar<span class="ls623">dI<span class="_ _9e"></span><span class="ls0">/O <span class="_"> </span>Librar<span class="_ _9"></span>y</span></span></div><div class="t m0 x35 h48 y145f ff16 fs1 fc0 sc0 ls0 ws0">5.1 <span class="_ _68"> </span>Introduction</div><div class="t m0 x32 h28 y1460 ff19 fs5 fc0 sc0 ls0 ws0">In this chapter<span class="_ _1"></span>,<span class="_"> </span>we<span class="_"> </span>describe <span class="_ _2"></span>the standar<span class="ls624">dI<span class="_ _4f"></span><span class="ls0">/O <span class="_ _2"></span>library<span class="_ _4"></span><span class="ls625">.T<span class="_ _4a"></span><span class="ls0">his library is <span class="_ _2"></span>speciﬁed by the <span class="_ _2"></span>ISO</span></span></span></span></div><div class="t m0 x32 h28 y1461 ff19 fs5 fc0 sc0 ls626 ws0">Cs<span class="_ _4f"></span><span class="ls0">tandar<span class="ls626">db<span class="_ _4f"></span><span class="ls0">ecause <span class="_ _2"></span>it <span class="_ _2"></span>has <span class="_ _2"></span>been <span class="_ _2"></span>implemented <span class="_ _2"></span>on <span class="_ _2"></span>many <span class="_ _2"></span>operating <span class="_ _2"></span>systems <span class="_ _2"></span>other <span class="_ _2"></span>than <span class="_ _2"></span>the</span></span></span></div><div class="t m0 x32 h28 y1462 ff19 fs5 fc0 sc0 ls0 ws0">UNIX <span class="_ _2"></span>System.<span class="_ _61"> </span>Additional <span class="_ _2"></span>interfaces <span class="_ _2"></span>ar<span class="ls627">ed<span class="_ _4f"></span><span class="ls0">eﬁned <span class="_ _2"></span>as <span class="_ _2"></span>extensions <span class="_ _2"></span>to <span class="_ _3"></span>the <span class="_ _2"></span>ISO <span class="_ _2"></span>C <span class="_ _2"></span>standar<span class="ls627">db<span class="_ _4f"></span><span class="ls0">y</span></span></span></span></div><div class="t m0 x32 h28 y1463 ff19 fs5 fc0 sc0 ls0 ws0">the Single UNIX Speciﬁcation.</div><div class="t m0 x3f h28 y13d ff19 fs5 fc0 sc0 ls0 ws0">The <span class="_ _9"></span>standar<span class="ls628">dI<span class="_ _b"></span><span class="ls0">/O <span class="_ _9"></span>library <span class="_ _9"></span>handles <span class="_ _9"></span>such <span class="_ _23"></span>details <span class="_ _9"></span>as <span class="_ _9"></span>buffer <span class="_ _9"></span>allocation <span class="_ _9"></span>and <span class="_ _9"></span>performing</span></span></div><div class="t m0 x32 h28 y13e ff19 fs5 fc0 sc0 ls0 ws0">I/O <span class="_ _2"></span>in <span class="_ _2"></span>optimal-sized <span class="_ _2"></span>chunks, <span class="_ _2"></span>obviating <span class="_ _2"></span>our <span class="_ _2"></span>need <span class="_ _2"></span>to <span class="_ _2"></span>worry <span class="_ _2"></span>about <span class="_ _2"></span>using <span class="_ _2"></span>the <span class="_ _2"></span>correct block</div><div class="t m0 x32 h28 y13f ff19 fs5 fc0 sc0 ls0 ws0">size <span class="_"> </span>(as <span class="_ _66"> </span>in <span class="_ _66"> </span>Section <span class="_ _66"> </span>3.9).<span class="_ _50"> </span>This <span class="_"> </span>makes <span class="_ _66"> </span>the <span class="_ _66"> </span>library <span class="_ _66"> </span>easy <span class="_ _66"> </span>to <span class="_"> </span>use, <span class="_ _66"> </span>but <span class="_ _66"> </span>at <span class="_ _66"> </span>the <span class="_ _66"> </span>same <span class="_ _66"> </span>time</div><div class="t m0 x32 h28 y140 ff19 fs5 fc0 sc0 ls0 ws0">introduces another set of pr<span class="_ _0"></span>oblems if we’r<span class="_ _0"></span><span class="ls46">en<span class="_ _d"></span><span class="ls0">ot cognizant of what’s going on.</span></span></div><div class="t m0 x76 hc9 y1464 ff19 fs6d fc0 sc0 ls0 ws0">The <span class="_ _2"></span>standar<span class="ls629">dI<span class="_ _d"></span><span class="ls0">/O <span class="_ _3"></span>library <span class="_ _3"></span>was <span class="_ _3"></span>written <span class="_ _2"></span>by <span class="_ _3"></span>Dennis <span class="_ _3"></span>Ritchie <span class="_ _3"></span>around <span class="_ _2"></span>1975.<span class="_ _4b"> </span>It <span class="_ _3"></span>was <span class="_ _2"></span>a <span class="_ _3"></span>major <span class="_ _3"></span>revision</span></span></div><div class="t m0 x76 hc9 y11f ff19 fs6d fc0 sc0 ls0 ws0">of <span class="_"> </span>the <span class="_"> </span>Portable <span class="_"> </span>I/O <span class="_ _e"> </span>library <span class="_ _e"> </span>written <span class="_ _e"> </span>by <span class="_ _e"> </span>Mike <span class="_ _e"> </span>Lesk.<span class="_ _51"> </span>Surprisingly <span class="_"> </span>little <span class="_"> </span>has <span class="_"> </span>changed <span class="_ _e"> </span>in <span class="_ _80"> </span>the</div><div class="t m0 x76 hc9 y1465 ff19 fs6d fc0 sc0 ls0 ws0">standar<span class="ls62a">dI<span class="_ _5"></span><span class="ls0">/O library after mor<span class="ls62a">et<span class="_ _84"></span><span class="ls0">han 35 years.</span></span></span></span></div><div class="t m0 x35 h94 y146 ff16 fs1 fc0 sc0 ls0 ws0">5.2 <span class="_ _68"> </span>Streams<span class="_ _54"> </span>and<span class="_ _54"> </span><span class="ff1f">FILE<span class="_ _54"> </span></span>Objects</div><div class="t m0 x32 h28 y1466 ff19 fs5 fc0 sc0 ls0 ws0">In <span class="_ _3"></span>Chapter <span class="_ _3"></span>3, <span class="_ _3"></span>all <span class="_ _3"></span>the <span class="_ _3"></span>I/O <span class="_ _9"></span>routines <span class="_ _2"></span>centered <span class="_ _2"></span>on <span class="_ _3"></span>ﬁle <span class="_ _9"></span>descriptors.<span class="_ _61"> </span>When <span class="_ _9"></span>a <span class="_ _3"></span>ﬁle <span class="_ _3"></span>is <span class="_ _3"></span>opened, <span class="_ _3"></span>a</div><div class="t m0 x32 h28 y1467 ff19 fs5 fc0 sc0 ls0 ws0">ﬁle <span class="_"> </span>descriptor <span class="_"> </span>is <span class="_"> </span>r<span class="_ _0"></span>eturned, <span class="_"> </span>and <span class="_"> </span>that <span class="_"> </span>descriptor <span class="_"> </span>is <span class="_ _e"> </span>then <span class="_"> </span>used <span class="_"> </span>for <span class="_"> </span>all <span class="_"> </span>subsequent <span class="_"> </span>I/O</div><div class="t m0 x32 h29 y1468 ff19 fs5 fc0 sc0 ls0 ws0">operations. <span class="_ _35"> </span>W<span class="_ _1"></span>ith <span class="_ _23"> </span>the <span class="_ _23"> </span>standar<span class="ls62b">dI<span class="_ _43"></span><span class="ls0">/O <span class="_ _23"> </span>library<span class="_ _6"></span><span class="ls62b">,t<span class="_ _43"></span><span class="ls0">he <span class="_ _23"> </span>discussion <span class="_ _42"> </span>centers <span class="_ _23"></span>on<span class="_ _35"> </span><span class="ff1b">streams</span><span class="ls62c">.(<span class="_ _52"></span><span class="ls0">Do <span class="_ _42"> </span>not</span></span></span></span></span></span></div><div class="t m0 x32 h29 y1469 ff19 fs5 fc0 sc0 ls0 ws0">confuse <span class="_ _42"> </span>the <span class="_ _42"> </span>standar<span class="ls62d">dI<span class="_ _c"></span><span class="ls0">/O <span class="_ _42"> </span>term<span class="_ _44"> </span><span class="ff1b">stream<span class="_ _35"> </span></span>with <span class="_ _42"> </span>the <span class="_ _53"> </span>STREAMS <span class="_ _42"> </span>I/O <span class="_ _42"> </span>system <span class="_ _42"> </span>that <span class="_ _42"> </span>is <span class="_ _42"> </span>part <span class="_ _42"> </span>of</span></span></div><div class="t m0 x32 h28 y146a ff19 fs5 fc0 sc0 ls0 ws0">System <span class="_ _66"> </span>V <span class="_ _47"> </span>and <span class="_"> </span>was <span class="_ _47"> </span>standardized <span class="_"> </span>in <span class="_ _47"> </span>the <span class="_"> </span>XSI <span class="_ _47"> </span>STREAMS <span class="_ _66"> </span>option <span class="_ _47"> </span>in <span class="_ _66"> </span>the <span class="_ _47"> </span>Single <span class="_"> </span>UNIX</div><div class="t m0 x32 h28 y146b ff19 fs5 fc0 sc0 ls0 ws0">Speciﬁcation, <span class="_ _3"></span>but <span class="_ _3"></span>is <span class="_ _3"></span>now <span class="_ _3"></span>marked <span class="_ _3"></span>obsolescent <span class="_ _3"></span>in <span class="_ _3"></span>SUSv4.)<span class="_ _16"> </span>When <span class="_ _3"></span>we <span class="_ _3"></span>open <span class="_ _3"></span>or <span class="_ _3"></span>create <span class="_ _2"></span>a <span class="_ _3"></span>ﬁle</div><div class="t m0 x32 h28 y146c ff19 fs5 fc0 sc0 ls0 ws0">with the standar<span class="ls46">dI<span class="_ _4f"></span><span class="ls0">/O library<span class="_ _6"></span>,<span class="_"> </span>we<span class="_"> </span>say that we have associated a stream with the ﬁle.</span></span></div><div class="t m0 x3f h28 y146d ff19 fs5 fc0 sc0 ls62e ws0">Wi<span class="_ _3"></span><span class="ls0">th the ASCII character set, a single character is represented by a single byte.<span class="_ _59"> </span></span>Wi<span class="_ _3"></span><span class="ls0">th</span></div><div class="t m0 x32 h28 y146e ff19 fs5 fc0 sc0 ls0 ws0">international <span class="_"> </span>character <span class="_ _e"> </span>sets, <span class="_"> </span>a <span class="_"> </span>character <span class="_"> </span>can <span class="_ _e"> </span>be <span class="_"> </span>repr<span class="_ _0"></span>esented <span class="_"> </span>by <span class="_ _e"> </span>mor<span class="ls62f">et<span class="_ _4a"></span><span class="ls0">han <span class="_"> </span>one <span class="_"> </span>byte.</span></span></div><div class="t m0 x1c0 h23 y12e ff18 fs0 fc0 sc0 ls0 ws0">143</div><a class="l" href="#pfd" data-dest-detail='[13,"XYZ",50,757,1]'><div class="d m1" style="border-style:none;position:absolute;left:157.497886px;bottom:975.452099px;width:251.039016px;height:134.895020px;background-color:rgba(255,255,255,0.000001);"></div></a><a class="l" href="#pfd" data-dest-detail='[13,"XYZ",50,757,1]'><div class="d m1" style="border-style:none;position:absolute;left:80.891785px;bottom:756.226788px;width:105.756104px;height:19.680023px;background-color:rgba(255,255,255,0.000001);"></div></a><a class="l" href="#pfd" data-dest-detail='[13,"XYZ",50,757,1]'><div class="d m1" style="border-style:none;position:absolute;left:80.892201px;bottom:369.826820px;width:197.518890px;height:19.680008px;background-color:rgba(255,255,255,0.000001);"></div></a></div><div class="pi" data-data='{"ctm":[2.100000,0.000000,0.000000,2.100000,-115.668004,-156.491993]}'></div></div>
