<div id="pf8c" class="pf w4 h1f" data-page-no="8c"><div class="pc pc8c w4 h1f"><img class="bi x0 y0 w3 h4" alt="" src="bg8c.png"/><div class="t m0 x31 h2 y8e ff1 fs0 fc0 sc0 ls0 ws0"><span class="fc1 sc0">ptg10805159</span></div><div class="t m0 x35 h24 ya4 ff18 fs0 fc0 sc0 ls0 ws0">106<span class="_ _1b"> </span><span class="ff19">Files <span class="_"> </span>and <span class="_"> </span>Directories <span class="_ _18d"> </span>Chapter<span class="_ _4b"> </span>4</span></div><div class="t m0 x3f h57 yf5f ff1a fs2d fc0 sc0 ls0 ws0">$<span class="_"> </span><span class="ff1f">umask<span class="_ _194"> </span><span class="ff1b">ﬁrst print the current ﬁle mode cr<span class="_ _0"></span>eation mask</span></span></div><div class="t m0 x3f h57 yf60 ff1a fs2d fc0 sc0 ls0 ws0">002</div><div class="t m0 x3f h57 yf61 ff1a fs2d fc0 sc0 ls0 ws0">$<span class="_"> </span><span class="ff1f">umask -S<span class="_ _17f"> </span><span class="ff1b">print the symbolic form</span></span></div><div class="t m0 x3f h57 yf62 ff1a fs2d fc0 sc0 ls0 ws0">u=rwx,g=rwx,o=rx</div><div class="t m0 x3f h57 yf63 ff1a fs2d fc0 sc0 ls0 ws0">$<span class="_"> </span><span class="ff1f">umask 027<span class="_ _195"> </span><span class="ff1b">change the ﬁle mode creation mask</span></span></div><div class="t m0 x3f h57 yf64 ff1a fs2d fc0 sc0 ls0 ws0">$<span class="_"> </span><span class="ff1f">umask -S<span class="_ _17f"> </span><span class="ff1b">print the symbolic form</span></span></div><div class="t m0 x3f h57 yf65 ff1a fs2d fc0 sc0 ls0 ws0">u=rwx,g=rx,o=</div><div class="t m0 x35 h75 yf66 ff16 fs2b fc0 sc0 ls0 ws0">4.9<span class="_ _72"> </span><span class="ff1f">chmod</span>,<span class="_ _54"> </span><span class="ff1f">fchmod</span><span class="ls1c3">,a<span class="_ _52"></span><span class="ls0">nd<span class="_ _54"> </span><span class="ff1f">fchmodat<span class="_ _65"> </span></span>Functions</span></span></div><div class="t m0 x32 h26 yf67 ff19 fsf fc0 sc0 ls0 ws0">The<span class="_ _61"> </span><span class="ff1a">chmod</span>,<span class="_ _16"> </span><span class="ff1a">fchmod</span><span class="ls4cf">,a<span class="_ _1d"></span><span class="ls0">nd<span class="_ _16"> </span><span class="ff1a">fchmodat<span class="_ _16"> </span></span>functions <span class="_ _47"> </span>allow <span class="_ _47"> </span>us <span class="_ _47"> </span>to <span class="_ _45"> </span>change <span class="_ _66"> </span>the <span class="_ _47"> </span>ﬁle <span class="_ _45"> </span>access</span></span></div><div class="t m0 x32 h2a yf68 ff19 fsf fc0 sc0 ls0 ws0">permissions for an existing ﬁle.</div><div class="t m0 x3f h57 yf69 ff1a fs2d fc0 sc0 ls0 ws0">#include &lt;sys/stat.h&gt;</div><div class="t m0 x3f h57 yf6a ff1a fs2d fc0 sc0 ls0 ws0">int chmod(const char *<span class="ff1b">pathname</span><span class="ls15c">,m<span class="_ _1d"></span><span class="ls0">ode_t<span class="_"> </span><span class="ff1b">mode</span>);</span></span></div><div class="t m0 x3f h57 yf6b ff1a fs2d fc0 sc0 ls0 ws0">int fchmod(int<span class="_"> </span><span class="ff1b">fd</span><span class="ls15c">,m<span class="_ _1d"></span><span class="ls0">ode_t<span class="_"> </span><span class="ff1b">mode</span>);</span></span></div><div class="t m0 x3f h57 yf6c ff1a fs2d fc0 sc0 ls0 ws0">int fchmodat(int<span class="_"> </span><span class="ff1b">fd</span><span class="ls15c">,c<span class="_ _1d"></span><span class="ls0">onst char *<span class="ff1b">pathname</span><span class="ls15c">,m<span class="_ _5b"></span><span class="ls0">ode_t<span class="_"> </span><span class="ff1b">mode</span><span class="ls15c">,i<span class="_ _1d"></span><span class="ls0">nt<span class="_"> </span><span class="ff1b">ﬂag</span>);</span></span></span></span></span></span></div><div class="t m0 x187 h5f yf6d ff19 fs2d fc0 sc0 ls0 ws0">All three r<span class="_ _0"></span>eturn: 0 if OK,<span class="_"> </span><span class="ff20">−</span>1<span class="_"> </span>on<span class="_"> </span>error</div><div class="t m0 x32 h4d yf6e ff19 fs26 fc0 sc0 ls0 ws0">The<span class="_ _5a"> </span><span class="ff1a">chmod<span class="_"> </span></span>function <span class="_ _47"> </span>operates <span class="_ _45"> </span>on <span class="_ _45"> </span>the <span class="_ _45"> </span>speciﬁed <span class="_ _45"> </span>ﬁle, <span class="_ _45"> </span>wher<span class="_ _0"></span>eas <span class="_ _45"> </span>the<span class="_ _16"> </span><span class="ff1a">fchmod<span class="_"> </span></span>function</div><div class="t m0 x32 h4d yf6f ff19 fs26 fc0 sc0 ls0 ws0">operates <span class="_ _9"></span>on <span class="_ _9"></span>a <span class="_ _9"></span>ﬁle <span class="_ _23"></span>that <span class="_ _9"></span>has <span class="_ _9"></span>already <span class="_ _3"></span>been <span class="_ _23"></span>opened.<span class="_ _5a"> </span>The<span class="_ _45"> </span><span class="ff1a">fchmodat<span class="_ _45"> </span></span>function <span class="_ _9"></span>behaves <span class="_ _9"></span>like</div><div class="t m0 x32 h4d yf70 ff1a fs26 fc0 sc0 ls0 ws0">chmod<span class="_ _47"> </span><span class="ff19">when <span class="_ _3"></span>the<span class="_ _47"> </span><span class="ff1b">pathname<span class="_ _47"> </span></span>argument <span class="_ _2"></span>is <span class="_ _3"></span>absolute <span class="_ _3"></span>or <span class="_ _3"></span>when <span class="_ _3"></span>the<span class="_ _47"> </span><span class="ff1b">fd<span class="_ _47"> </span></span>argument <span class="_ _3"></span>has <span class="_ _3"></span>the <span class="_ _3"></span>value</span></div><div class="t m0 x32 h4d yf71 ff1a fs26 fc0 sc0 ls0 ws0">AT_FDCWD<span class="_ _47"> </span><span class="ff19">and <span class="_ _9"></span>the<span class="_ _47"> </span><span class="ff1b">pathname<span class="_ _45"> </span></span>ar<span class="_ _0"></span>gument <span class="_ _3"></span>is <span class="_ _3"></span>relative. <span class="_ _47"> </span>Otherwise,<span class="_ _45"> </span><span class="ff1a">fchmodat<span class="_ _47"> </span></span>evaluates <span class="_ _3"></span>the</span></div><div class="t m0 x32 h4a yf72 ff1b fs26 fc0 sc0 ls0 ws0">pathname<span class="_ _51"> </span><span class="ff19 lscc">re<span class="ls0">lative <span class="_ _35"> </span>to <span class="_ _45"> </span>the <span class="_ _35"> </span>open <span class="_ _45"> </span>directory <span class="_ _35"> </span>r<span class="_ _0"></span>eferenced <span class="_ _45"> </span>by <span class="_ _35"> </span>the<span class="_ _5a"> </span><span class="ff1b">fd<span class="_ _51"> </span></span>argument. <span class="_ _5a"> </span>The<span class="_ _51"> </span><span class="ff1b">ﬂag</span></span></span></div><div class="t m0 x32 h4d yf73 ff19 fs26 fc0 sc0 ls0 ws0">argument <span class="_ _48"> </span>can <span class="_ _60"> </span>be <span class="_ _60"> </span>used <span class="_ _60"> </span>to <span class="_ _60"> </span>change <span class="_ _60"> </span>the <span class="_ _60"> </span>behavior <span class="_ _60"> </span>of<span class="_ _5e"> </span><span class="ff1a">fchmodat<span class="_ _9"></span></span><span class="ls161">—w<span class="_ _6"></span><span class="ls0">hen <span class="_ _60"> </span>the</span></span></div><div class="t m0 x32 h4d yf74 ff1a fs26 fc0 sc0 ls0 ws0">AT_SYMLINK_NOFOLLOW<span class="_ _80"> </span><span class="ff19">ﬂag is set,<span class="_"> </span></span>fchmodat<span class="_ _66"> </span><span class="ff19">doesn’t follow symbolic links.</span></div><div class="t m0 x3f h49 yf75 ff19 fs26 fc0 sc0 ls164 ws0">To <span class="_ _80"> </span>c<span class="_ _23"></span><span class="ls0">hange <span class="_ _3"></span>the <span class="_ _9"></span>permission <span class="_ _3"></span>bits <span class="_ _9"></span>of <span class="_ _9"></span>a <span class="_ _3"></span>ﬁle, <span class="_ _9"></span>the <span class="_ _3"></span>effective <span class="_ _3"></span>user <span class="_ _9"></span>ID <span class="_ _9"></span>of <span class="_ _3"></span>the <span class="_ _9"></span>process <span class="_ _3"></span>must <span class="_ _9"></span>be</span></div><div class="t m0 x32 h49 yf76 ff19 fs26 fc0 sc0 ls0 ws0">equal to the owner ID of the ﬁle, or the process must have super<span class="_ _0"></span>user permissions.</div><div class="t m0 x3f h4a yf77 ff19 fs26 fc0 sc0 ls0 ws0">The<span class="_"> </span><span class="ff1b">mode<span class="_"> </span></span>is speciﬁed as the bitwise OR of the constants shown in Figur<span class="lsd3">e4<span class="_ _4f"></span><span class="ls0">.1<span class="_ _0"></span>1.</span></span></div><div class="t m0 x36 h56 yf78 ff1b fs11 fc0 sc0 ls0 ws0">mode<span class="_ _196"> </span><span class="ff19">Description</span></div><div class="t m0 x25 h6d yf79 ff1a fs12 fc0 sc0 ls0 ws0">S_ISUID<span class="_ _6c"> </span><span class="ff19">set-user-ID on execution</span></div><div class="t m0 x25 h6d yf7a ff1a fs12 fc0 sc0 ls0 ws0">S_ISGID<span class="_ _6c"> </span><span class="ff19">set-group-ID on execution</span></div><div class="t m0 x25 h6d yf7b ff1a fs12 fc0 sc0 ls0 ws0">S_ISVTX<span class="_ _6c"> </span><span class="ff19">saved-text (sticky bit)</span></div><div class="t m0 x25 h63 yf7c ff1a fs13 fc0 sc0 ls0 ws0">S_IRWXU<span class="_ _6c"> </span><span class="ff19 ls4d0">re<span class="ls0">ad, write, and execute by user (owner)</span></span></div><div class="t m0 x3d h63 yf7d ff1a fs13 fc0 sc0 ls0 ws0">S_IRUSR<span class="_ _6e"> </span><span class="ff19 ls4d0">re<span class="ls0">ad by user (owner)</span></span></div><div class="t m0 x3d h63 yf7e ff1a fs13 fc0 sc0 ls0 ws0">S_IWUSR<span class="_ _6e"> </span><span class="ff19">write by user (owner)</span></div><div class="t m0 x3d h63 yf7f ff1a fs13 fc0 sc0 ls0 ws0">S_IXUSR<span class="_ _6e"> </span><span class="ff19">execute by user (owner)</span></div><div class="t m0 x25 h6f yf80 ff1a fs14 fc0 sc0 ls0 ws0">S_IRWXG<span class="_ _6c"> </span><span class="ff19 ls4d1">re<span class="ls0">ad, write, and execute by group</span></span></div><div class="t m0 x3d h6f yf81 ff1a fs14 fc0 sc0 ls0 ws0">S_IRGRP<span class="_ _6e"> </span><span class="ff19 ls4d1">re<span class="ls0">ad by group</span></span></div><div class="t m0 x3d h6f yf82 ff1a fs14 fc0 sc0 ls0 ws0">S_IWGRP<span class="_ _6e"> </span><span class="ff19">write by group</span></div><div class="t m0 x3d h6f yf83 ff1a fs14 fc0 sc0 ls0 ws0">S_IXGRP<span class="_ _6e"> </span><span class="ff19">execute by group</span></div><div class="t m0 x25 h66 yf84 ff1a fs15 fc0 sc0 ls0 ws0">S_IRWXO<span class="_ _6c"> </span><span class="ff19 ls4d2">re<span class="ls0">ad, write, and execute by other (world)</span></span></div><div class="t m0 x3d h66 yf85 ff1a fs15 fc0 sc0 ls0 ws0">S_IROTH<span class="_ _6e"> </span><span class="ff19 ls4d2">re<span class="ls0">ad by other (world)</span></span></div><div class="t m0 x3d h66 yf86 ff1a fs15 fc0 sc0 ls0 ws0">S_IWOTH<span class="_ _6e"> </span><span class="ff19">write by other (world)</span></div><div class="t m0 x3d h66 yf87 ff1a fs15 fc0 sc0 ls0 ws0">S_IXOTH<span class="_ _6e"> </span><span class="ff19">execute by other (world)</span></div><div class="t m0 x16e h70 yf88 ff18 fs16 fc0 sc0 ls0 ws0">Figure 4.1<span class="_ _0"></span>1<span class="_ _5a"> </span><span class="ff19">The<span class="_"> </span><span class="ff1b">mode<span class="_"> </span></span>constants for<span class="_"> </span><span class="ff1a">chmod<span class="_ _e"> </span></span>functions, from<span class="_"> </span><span class="ff1a">&lt;sys/stat.h&gt;</span></span></div><a class="l" href="#pfd" data-dest-detail='[13,"XYZ",50,757,1]'><div class="d m1" style="border-style:none;position:absolute;left:80.892409px;bottom:1033.638916px;width:284.831810px;height:19.679993px;background-color:rgba(255,255,255,0.000001);"></div></a></div><div class="pi" data-data='{"ctm":[2.100000,0.000000,0.000000,2.100000,-115.668004,-156.491993]}'></div></div>
