<div id="pf174" class="pf w4 h1f" data-page-no="174"><div class="pc pc174 w4 h1f"><img class="bi x0 y0 w3 h4" alt="" src="bg174.png"/><div class="t m0 x31 h2 y8e ff1 fs0 fc0 sc0 ls0 ws0"><span class="fc1 sc0">ptg10805159</span></div><div class="t m0 x35 h24 ya4 ff18 fs0 fc0 sc0 ls0 ws0">338<span class="_ _1b"> </span><span class="ff19">Signals <span class="_ _24b"> </span>Chapter<span class="_ _21"> </span>10</span></div><div class="t m0 x3f h2a y12f ff19 fsf fc0 sc0 ls0 ws0">Also <span class="_ _9"></span>understand <span class="_ _23"></span>that <span class="_ _9"></span>the <span class="_ _9"></span>test <span class="_ _23"></span>for <span class="_ _9"></span>process <span class="_ _9"></span>existence <span class="_ _9"></span>is <span class="_ _23"></span>not <span class="_ _9"></span>atomic.<span class="_ _5a"> </span>By <span class="_ _23"></span>the <span class="_ _9"></span>time <span class="_ _9"></span>that</div><div class="t m0 x32 h26 y130 ff1a fsf fc0 sc0 ls0 ws0">kill<span class="_ _47"> </span><span class="ff19 ls45">re<span class="ls0">turns <span class="_ _3"></span>the <span class="_ _3"></span>answer <span class="_ _3"></span>to <span class="_ _3"></span>the <span class="_ _3"></span>caller<span class="_ _1"></span><span class="ls26e">,t<span class="_ _8"></span><span class="ls0">he <span class="_ _3"></span>process <span class="_ _3"></span>in <span class="_ _3"></span>question <span class="_ _3"></span>might <span class="_ _3"></span>have <span class="_ _3"></span>exited, <span class="_ _3"></span>so <span class="_ _3"></span>the</span></span></span></span></div><div class="t m0 x32 h2a y131 ff19 fsf fc0 sc0 ls0 ws0">answer is of limited value.</div><div class="t m0 x3f h26 y132 ff19 fsf fc0 sc0 ls0 ws0">If the <span class="_ _2"></span>call to<span class="_ _66"> </span><span class="ff1a">kill<span class="_ _66"> </span></span>causes <span class="_ _2"></span>the <span class="_ _2"></span>signal to <span class="_ _2"></span>be generated <span class="_ _2"></span>for the <span class="_ _2"></span>calling process <span class="_ _2"></span>and if <span class="_ _2"></span>the</div><div class="t m0 x32 h2b y133 ff19 fsf fc0 sc0 ls0 ws0">signal <span class="_ _3"></span>is <span class="_ _3"></span>not <span class="_ _3"></span>blocked, <span class="_ _3"></span>either<span class="_ _47"> </span><span class="ff1b">signo<span class="_ _45"> </span></span>or <span class="_ _2"></span>some <span class="_ _3"></span>other <span class="_ _3"></span>pending, <span class="_ _3"></span>unblocked <span class="_ _9"></span>signal <span class="_ _3"></span>is <span class="_ _3"></span>delivered</div><div class="t m0 x32 h26 y134 ff19 fsf fc0 sc0 ls0 ws0">to <span class="_"> </span>the <span class="_"> </span>pr<span class="_ _1"></span>ocess <span class="_"> </span>before<span class="_ _59"> </span><span class="ff1a">kill<span class="_ _59"> </span></span><span class="ls45">re<span class="_ _2"></span></span>turns. <span class="_ _59"> </span>(Additional<span class="_ _46"> </span>conditions <span class="_"> </span>occur <span class="_"> </span>with <span class="_"> </span>thr<span class="_ _0"></span>eads; <span class="_"> </span>see</div><div class="t m0 x32 h2a y135 ff19 fsf fc0 sc0 ls0 ws0">Section 12.8 for mor<span class="ls44">ei<span class="_ _4f"></span><span class="ls0">nformation.)</span></span></div><div class="t m0 x35 h75 y2b49 ff16 fs2b fc0 sc0 ls0 ws0">10.10<span class="_ _5a"> </span><span class="ff1f">alarm<span class="_ _54"> </span></span>and<span class="_ _54"> </span><span class="ff1f">pause<span class="_ _65"> </span></span>Functions</div><div class="t m0 x32 h26 y2b4a ff19 fsf fc0 sc0 ls0 ws0">The<span class="_ _45"> </span><span class="ff1a">alarm<span class="_ _35"> </span></span>function <span class="_ _9"></span>allows <span class="_ _23"></span>us <span class="_ _9"></span>to <span class="_ _23"> </span>set <span class="_ _23"></span>a <span class="_ _9"></span>timer <span class="_ _23"></span>that <span class="_ _23"></span>will <span class="_ _9"></span>expire<span class="_ _45"> </span>at<span class="_ _45"> </span>a<span class="_ _35"> </span>speciﬁed <span class="_ _9"></span>time <span class="_ _23"> </span>in <span class="_ _23"></span>the</div><div class="t m0 x32 h26 y2b4b ff19 fsf fc0 sc0 ls0 ws0">future. <span class="_"> </span>When<span class="_ _47"> </span>the <span class="_ _2"></span>timer <span class="_ _2"></span>expires, <span class="_ _2"></span>the<span class="_ _47"> </span><span class="ff1a">SIGALRM<span class="_ _66"> </span></span>signal <span class="_ _3"></span>is <span class="_ _2"></span>generated.<span class="_ _61"> </span>If <span class="_ _3"></span>we <span class="_ _2"></span>ignore<span class="_ _66"> </span>or<span class="_ _47"> </span>don’t</div><div class="t m0 x32 h2a y2b4c ff19 fsf fc0 sc0 ls0 ws0">catch this signal, its default action is to terminate the process.</div><div class="t m0 x3f h57 y2b4d ff1a fs2d fc0 sc0 ls0 ws0">#include &lt;unistd.h&gt;</div><div class="t m0 x3f h57 y2b4e ff1a fs2d fc0 sc0 ls0 ws0">unsigned int alarm(unsigned int<span class="_"> </span><span class="ff1b">seconds</span>);</div><div class="t m0 x17f h5f y2b4f ff19 fs2d fc0 sc0 ls0 ws0">Returns: 0 or number of seconds until previously set alarm</div><div class="t m0 x32 h4a y2448 ff19 fs26 fc0 sc0 ls0 ws0">The<span class="_ _45"> </span><span class="ff1b">seconds<span class="_ _45"> </span></span>value <span class="_ _3"></span>is <span class="_ _9"></span>the <span class="_ _9"></span>number <span class="_ _9"></span>of <span class="_ _9"></span>clock <span class="_ _9"></span>seconds <span class="_ _9"></span>in <span class="_ _9"></span>the <span class="_ _9"></span>futur<span class="lsc66">ew<span class="_ _b"></span><span class="ls0">hen <span class="_ _9"></span>the <span class="_ _9"></span>signal <span class="_ _9"></span>should</span></span></div><div class="t m0 x32 h49 y2449 ff19 fs26 fc0 sc0 ls0 ws0">be <span class="_ _23"> </span>generated.<span class="_ _51"> </span>When <span class="_ _23"> </span>that <span class="_ _42"> </span>time <span class="_ _23"> </span>occurs, <span class="_ _23"> </span>the <span class="_ _42"> </span>signal <span class="_ _23"></span>is <span class="_ _23"> </span>generated <span class="_ _23"> </span>by <span class="_ _42"> </span>the <span class="_ _23"></span>kernel, <span class="_ _23"> </span>although</div><div class="t m0 x32 h49 y244a ff19 fs26 fc0 sc0 ls0 ws0">additional <span class="_ _47"> </span>time <span class="_ _47"> </span>could <span class="_ _47"> </span>elapse <span class="_ _47"> </span>befor<span class="lsc67">et<span class="_ _1d"></span><span class="ls0">he <span class="_ _47"> </span>process <span class="_ _47"> </span>gets <span class="_ _47"> </span>control <span class="_ _47"> </span>to <span class="_ _47"> </span>handle <span class="_ _47"> </span>the <span class="_ _47"> </span>signal,</span></span></div><div class="t m0 x32 h49 y244b ff19 fs26 fc0 sc0 ls0 ws0">because of processor scheduling delays.</div><div class="t m0 x76 h2d y2b50 ff19 fs10 fc0 sc0 ls0 ws0">Earlier UNIX System implementations warned that the <span class="_ _2"></span>signal could also be sent up <span class="_ _2"></span>to 1 second</div><div class="t m0 x76 h2d y2b51 ff19 fs10 fc0 sc0 ls0 ws0">early<span class="_ _6"></span><span class="lsc68">.P<span class="_ _43"></span><span class="ls0">OSIX.1 does not allow this behavior<span class="_ _1"></span>.</span></span></div><div class="t m0 x3f h4d y2b52 ff19 fs26 fc0 sc0 ls0 ws0">There<span class="_ _44"> </span>is<span class="_ _4b"> </span>only <span class="_ _53"> </span>one <span class="_ _e"> </span>of <span class="_ _e"> </span>these <span class="_ _53"> </span>alarm <span class="_ _e"> </span>clocks <span class="_ _53"> </span>per <span class="_ _e"> </span>process. <span class="_ _44"> </span>If,<span class="_ _4b"> </span>when <span class="_ _e"> </span>we <span class="_ _53"> </span>call<span class="_ _4b"> </span><span class="ff1a">alarm</span><span class="lsc69">,a</span></div><div class="t m0 x32 h49 y2b53 ff19 fs26 fc0 sc0 ls0 ws0">previously <span class="_ _42"> </span>r<span class="_ _0"></span>egistered <span class="_ _42"> </span>alarm <span class="_ _42"> </span>clock <span class="_ _42"> </span>for <span class="_ _42"> </span>the <span class="_ _53"> </span>process <span class="_ _42"> </span>has <span class="_ _42"> </span>not <span class="_ _42"> </span>yet <span class="_ _42"> </span>expired, <span class="_ _42"> </span>the <span class="_ _53"> </span>number <span class="_ _42"> </span>of</div><div class="t m0 x32 h49 y2b54 ff19 fs26 fc0 sc0 ls0 ws0">seconds <span class="_ _45"> </span>left <span class="_ _45"> </span>for <span class="_ _47"> </span>that <span class="_ _45"> </span>alarm <span class="_ _45"> </span>clock <span class="_ _45"> </span>is <span class="_ _45"> </span>r<span class="_ _0"></span>eturned <span class="_ _45"> </span>as <span class="_ _45"> </span>the <span class="_ _47"> </span>value <span class="_ _45"> </span>of <span class="_ _45"> </span>this <span class="_ _45"> </span>function.<span class="_ _5f"> </span>That</div><div class="t m0 x32 h49 y2b55 ff19 fs26 fc0 sc0 ls0 ws0">previously r<span class="_ _0"></span>egister<span class="_ _0"></span>ed alarm clock is replaced by the new value.</div><div class="t m0 x3f h49 y2b56 ff19 fs26 fc0 sc0 ls0 ws0">If <span class="_ _3"></span>a <span class="_ _3"></span>previously <span class="_ _3"></span>registered <span class="_ _2"></span>alarm <span class="_ _9"></span>clock <span class="_ _3"></span>for <span class="_ _3"></span>the <span class="_ _9"></span>process <span class="_ _2"></span>has <span class="_ _9"></span>not <span class="_ _3"></span>yet <span class="_ _3"></span>expired <span class="_ _3"></span>and <span class="_ _9"></span>if <span class="_ _3"></span>the</div><div class="t m0 x32 h4a y2b57 ff1b fs26 fc0 sc0 ls0 ws0">seconds<span class="_ _47"> </span><span class="ff19">value <span class="_ _3"></span>is <span class="_ _3"></span>0, <span class="_ _3"></span>the <span class="_ _3"></span>previous <span class="_ _3"></span>alarm <span class="_ _3"></span>clock <span class="_ _3"></span>is <span class="_ _3"></span>canceled.<span class="_ _16"> </span>The <span class="_ _3"></span>number <span class="_ _3"></span>of <span class="_ _9"></span>seconds <span class="_ _3"></span>left <span class="_ _3"></span>for</span></div><div class="t m0 x32 h49 y2b58 ff19 fs26 fc0 sc0 ls0 ws0">that previous alarm clock is still r<span class="_ _0"></span>eturned as the value of the function.</div><div class="t m0 x3f h4d y2b59 ff19 fs26 fc0 sc0 ls0 ws0">Although the default action <span class="_ _2"></span>for<span class="_"> </span><span class="ff1a">SIGALRM<span class="_ _66"> </span></span>is to terminate the <span class="_ _2"></span>process, most processes</div><div class="t m0 x32 h49 y2b5a ff19 fs26 fc0 sc0 ls0 ws0">that <span class="_ _9"></span>use <span class="_ _3"></span>an <span class="_ _9"></span>alarm <span class="_ _9"></span>clock <span class="_ _9"></span>catch <span class="_ _9"></span>this <span class="_ _3"></span>signal.<span class="_ _5a"> </span>If <span class="_ _9"></span>the <span class="_ _9"></span>process <span class="_ _3"></span>then <span class="_ _9"></span>wants <span class="_ _9"></span>to <span class="_ _3"></span>terminate, <span class="_ _9"></span>it <span class="_ _9"></span>can</div><div class="t m0 x32 h49 y2b5b ff19 fs26 fc0 sc0 ls0 ws0">perform <span class="_ _45"> </span>whatever <span class="_ _35"> </span>cleanup <span class="_ _45"> </span>is <span class="_ _35"> </span>requir<span class="_ _0"></span>ed <span class="_ _45"> </span>befor<span class="lsc6a">et<span class="_ _26"></span><span class="ls0">erminating. <span class="_ _5a"> </span>If<span class="_ _51"> </span>we <span class="_ _35"> </span>intend <span class="_ _45"> </span>to <span class="_ _35"> </span>catch</span></span></div><div class="t m0 x32 h4d y2b5c ff1a fs26 fc0 sc0 ls0 ws0">SIGALRM<span class="ff19">,<span class="_ _66"> </span>we<span class="_ _47"> </span>need <span class="_ _2"></span>to <span class="_ _2"></span>be <span class="_ _2"></span>careful <span class="_ _2"></span>to <span class="_ _2"></span>install <span class="_ _2"></span>its <span class="_ _3"></span>signal <span class="_ _2"></span>handler <span class="_ _2"></span>befor<span class="lsc6b">ec<span class="_ _4f"></span><span class="ls0">alling<span class="_ _66"> </span><span class="ff1a">alarm</span><span class="lsc6c">.I<span class="_ _5b"></span><span class="lsc6b">fw<span class="_ _4f"></span><span class="ls0">e</span></span></span></span></span></span></div><div class="t m0 x32 h4d y2b5d ff19 fs26 fc0 sc0 ls0 ws0">call<span class="_ _44"> </span><span class="ff1a">alarm<span class="_ _4b"> </span></span>ﬁrst <span class="_ _e"> </span>and <span class="_ _53"> </span>ar<span class="lsc6d">es<span class="_ _55"></span><span class="ls0">ent<span class="_ _4b"> </span><span class="ff1a">SIGALRM<span class="_ _4b"> </span></span>befor<span class="lsc6d">ew<span class="_ _55"></span><span class="lsc6e">ec<span class="_ _c"></span><span class="ls0">an <span class="_ _53"> </span>install <span class="_ _53"> </span>the <span class="_ _e"> </span>signal <span class="_ _53"> </span>handler<span class="_ _1"></span><span class="lsc6e">,o<span class="_ _c"></span><span class="ls0">ur</span></span></span></span></span></span></span></div><div class="t m0 x32 h49 y2b5e ff19 fs26 fc0 sc0 ls0 ws0">process will terminate.</div><div class="t m0 x3f h4d y2b5f ff19 fs26 fc0 sc0 ls0 ws0">The<span class="_"> </span><span class="ff1a">pause<span class="_ _80"> </span></span>function suspends the calling process until a signal is caught.</div><div class="t m0 x3f h4e y2b60 ff1a fs28 fc0 sc0 ls0 ws0">#include &lt;unistd.h&gt;</div><div class="t m0 x3f h4e y2b61 ff1a fs28 fc0 sc0 ls0 ws0">int pause(void);</div><div class="t m0 x19c h4e y2b62 ff19 fs28 fc0 sc0 ls0 ws0">Returns:<span class="_"> </span><span class="ff20">−</span><span class="ls396">1w<span class="_ _5"></span><span class="ls0">ith<span class="_"> </span><span class="ff1a">errno<span class="_ _e"> </span></span>set to<span class="_"> </span><span class="ff1a">EINTR</span></span></span></div><a class="l" href="#pf10" data-dest-detail='[16,"XYZ",50,757,1]'><div class="d m1" style="border-style:none;position:absolute;left:80.893675px;bottom:1014.528966px;width:206.687194px;height:19.679993px;background-color:rgba(255,255,255,0.000001);"></div></a></div><div class="pi" data-data='{"ctm":[2.100000,0.000000,0.000000,2.100000,-115.668004,-156.491993]}'></div></div>
