<div id="pfd5" class="pf w4 h1f" data-page-no="d5"><div class="pc pcd5 w4 h1f"><img class="bi x0 y0 w3 h4" alt="" src="apue/bgd5.png"/><div class="t m0 x31 h2 y8e ff1 fs0 fc0 sc0 ls0 ws0"><span class="fc1 sc0">ptg10805159</span></div><div class="t m0 x35 h24 ya4 ff19 fs0 fc0 sc0 ls0 ws0">Section <span class="_"> </span>6.2<span class="_ _e1"> </span>Passwor<span class="ls30a">dF<span class="_ _55"></span><span class="ls0">ile<span class="_ _1b"> </span><span class="ff18">179</span></span></span></div><div class="t m0 x3f h26 y12f ff19 fsf fc0 sc0 ls49 ws0">•T<span class="_ _4d"></span><span class="ls0">her<span class="ls63">ea<span class="_ _b"></span><span class="ls45">re <span class="_ _9"></span>s<span class="_ _2"></span><span class="ls0">everal <span class="_ _9"></span>alternatives <span class="_ _23"></span>to <span class="_ _9"></span>using<span class="_ _45"> </span><span class="ff1a">/dev/null<span class="_ _45"> </span></span>to <span class="_ _23"></span>pr<span class="_ _0"></span>event <span class="_ _9"></span>a <span class="_ _9"></span>particular <span class="_ _23"></span>user</span></span></span></span></div><div class="t m0 x15 h26 y130 ff19 fsf fc0 sc0 ls0 ws0">from <span class="_ _42"> </span>logging <span class="_ _42"> </span>in <span class="_ _53"> </span>to <span class="_ _42"> </span>a <span class="_ _53"> </span>system.<span class="_ _54"> </span>For <span class="_ _53"> </span>example,<span class="_ _44"> </span><span class="ff1a">/bin/false<span class="_ _44"> </span></span>is <span class="_ _42"> </span>often <span class="_ _53"> </span>used <span class="_ _53"> </span>as <span class="_ _42"> </span>the</div><div class="t m0 x15 h2a y131 ff19 fsf fc0 sc0 ls0 ws0">login <span class="_"> </span>shell.<span class="_ _50"> </span>It <span class="_ _47"> </span>simply <span class="_"> </span>exits <span class="_ _47"> </span>with <span class="_"> </span>an <span class="_ _47"> </span>unsuccessful <span class="_ _66"> </span>(nonzero) <span class="_"> </span>status; <span class="_ _47"> </span>the <span class="_"> </span>shell</div><div class="t m0 x15 h26 y132 ff19 fsf fc0 sc0 ls0 ws0">evaluates <span class="_ _9"></span>the <span class="_ _9"></span>exit <span class="_ _23"></span>status <span class="_ _9"></span>as <span class="_ _9"></span>false.<span class="_ _51"> </span>It <span class="_ _9"></span>is <span class="_ _9"></span>also <span class="_ _9"></span>common <span class="_ _23"></span>to <span class="_ _9"></span>see<span class="_ _45"> </span><span class="ff1a">/bin/true<span class="_ _45"> </span></span>used <span class="_ _23"></span>to</div><div class="t m0 x15 h2a y133 ff19 fsf fc0 sc0 ls0 ws0">disable <span class="_ _2"></span>an <span class="_ _3"></span>account; <span class="_ _2"></span>it <span class="_ _2"></span>simply <span class="_ _3"></span>exits <span class="_ _2"></span>with <span class="_ _3"></span>a <span class="_ _2"></span>successful <span class="_ _3"></span>(zero) <span class="_ _2"></span>status.<span class="_ _61"> </span>Some <span class="_ _2"></span>systems</div><div class="t m0 x15 h26 y134 ff19 fsf fc0 sc0 ls0 ws0">provide the<span class="_"> </span><span class="ff1a">nologin<span class="_ _66"> </span></span>command, which <span class="_ _2"></span>prints a <span class="_ _2"></span>customizable error message <span class="_ _2"></span>and</div><div class="t m0 x15 h2a y135 ff19 fsf fc0 sc0 ls0 ws0">exits with a nonzer<span class="ls44">oe<span class="_ _4f"></span><span class="ls0">xit status.</span></span></div><div class="t m0 x3f h26 y1b0 ff19 fsf fc0 sc0 ls49 ws0">•T<span class="_ _4d"></span><span class="ls0">he<span class="_ _45"> </span><span class="ff1a">nobody<span class="_ _35"> </span></span>user <span class="_ _9"></span>name <span class="_ _23"> </span>can <span class="_ _23"></span>be <span class="_ _23"></span>used <span class="_ _9"></span>to <span class="_ _23"></span>allow <span class="_ _23"></span>people <span class="_ _9"></span>to <span class="_ _23"> </span>log <span class="_ _23"></span>in <span class="_ _9"></span>to <span class="_ _23"> </span>a <span class="_ _23"></span>system, <span class="_ _23"></span>but</span></div><div class="t m0 x15 h2a y153 ff19 fsf fc0 sc0 ls0 ws0">with <span class="_ _42"> </span>a <span class="_ _53"> </span>user <span class="_ _42"> </span>ID</div><div class="t m0 x91 h2a y1845 ff19 fsf fc0 sc0 ls0 ws0">(</div><div class="t m0 x1d0 h2a y153 ff19 fsf fc0 sc0 ls0 ws0">65534</div><div class="t m0 x64 h2a y1845 ff19 fsf fc0 sc0 ls0 ws0">)</div><div class="t m0 x4a h2a y153 ff19 fsf fc0 sc0 ls0 ws0">and <span class="_ _42"> </span>group <span class="_ _42"> </span>ID</div><div class="t m0 x8e h2a y1845 ff19 fsf fc0 sc0 ls0 ws0">(</div><div class="t m0 x17a h2a y153 ff19 fsf fc0 sc0 ls0 ws0">65534</div><div class="t m0 x81 h2a y1845 ff19 fsf fc0 sc0 ls0 ws0">)</div><div class="t m0 xa1 h2a y153 ff19 fsf fc0 sc0 ls0 ws0">that <span class="_ _42"> </span>provide <span class="_ _42"> </span>no <span class="_ _53"> </span>privileges.<span class="_ _54"> </span>The</div><div class="t m0 x15 h2a y155 ff19 fsf fc0 sc0 ls0 ws0">only ﬁles <span class="_ _2"></span>that <span class="_ _2"></span>this user <span class="_ _2"></span>ID <span class="_ _2"></span>and <span class="_ _2"></span>group ID can <span class="_ _2"></span>access <span class="_ _2"></span>ar<span class="ls77e">et<span class="_ _4f"></span><span class="ls0">hose <span class="_ _2"></span>that ar<span class="ls77f">er<span class="_ _4f"></span><span class="ls0">eadable or</span></span></span></span></div><div class="t m0 x15 h2a y10aa ff19 fsf fc0 sc0 ls0 ws0">writable by the world.<span class="_ _46"> </span>(This approach assumes that ther<span class="ls780">ea<span class="_ _d"></span><span class="ls45">re <span class="_ _2"></span>n<span class="_ _2"></span><span class="ls780">oﬁ<span class="_ _d"></span><span class="ls0">les speciﬁcally</span></span></span></span></div><div class="t m0 x15 h2a y1846 ff19 fsf fc0 sc0 ls0 ws0">owned by user ID 65534 or group ID 65534, which should be the case.)</div><div class="t m0 x3f h26 y15b ff19 fsf fc0 sc0 ls49 ws0">•S<span class="_ _4d"></span><span class="ls0">ome <span class="_ _59"> </span>systems <span class="_ _59"> </span>that <span class="_ _46"> </span>provide <span class="_ _59"> </span>the<span class="_ _48"> </span><span class="ff1a">finger</span></span></div><div class="t m0 x117 h2a y1847 ff19 fsf fc0 sc0 ls0 ws0">(</div><div class="t m0 x6d h2a y15b ff19 fsf fc0 sc0 ls0 ws0">1</div><div class="t m0 x172 h2a y1847 ff19 fsf fc0 sc0 ls0 ws0">)</div><div class="t m0 x100 h2a y15b ff19 fsf fc0 sc0 ls0 ws0">command <span class="_ _59"> </span>support <span class="_ _59"> </span>additional</div><div class="t m0 x15 h2a y15c ff19 fsf fc0 sc0 ls0 ws0">information <span class="_ _2"></span>in <span class="_ _2"></span>the <span class="_ _2"></span>comment <span class="_ _3"></span>ﬁeld.<span class="_ _61"> </span>Each <span class="_ _2"></span>of <span class="_ _2"></span>these <span class="_ _2"></span>ﬁelds <span class="_ _3"></span>is <span class="_ _2"></span>separated <span class="_ _2"></span>by <span class="_ _2"></span>a <span class="_ _3"></span>comma:</div><div class="t m0 x15 h2a y15d ff19 fsf fc0 sc0 ls0 ws0">the <span class="_ _2"></span>user<span class="_ _9"></span>’s <span class="_ _3"></span>name, <span class="_ _3"></span>ofﬁce <span class="_ _2"></span>location, <span class="_ _3"></span>ofﬁce <span class="_ _2"></span>phone <span class="_ _3"></span>number<span class="_ _1"></span><span class="ls3eb">,a<span class="_ _8"></span><span class="ls0">nd <span class="_ _3"></span>home <span class="_ _3"></span>phone <span class="_ _3"></span>number<span class="_ _6"></span>.</span></span></div><div class="t m0 x15 h2a y15e ff19 fsf fc0 sc0 ls0 ws0">Additionally<span class="_ _4"></span>,<span class="_ _59"> </span>an<span class="_ _59"> </span>ampersand <span class="_"> </span>in <span class="_"> </span>the <span class="_ _53"> </span>comment <span class="_"> </span>ﬁeld <span class="_"> </span>is <span class="_ _e"> </span>replaced <span class="_ _e"> </span>with <span class="_"> </span>the <span class="_ _e"> </span>login</div><div class="t m0 x15 h2a y15f ff19 fsf fc0 sc0 ls0 ws0">name (capitalized) by some utilities.<span class="_ _59"> </span>For example, we could have</div><div class="t m0 x2d h52 y1848 ff1a fs2a fc0 sc0 ls0 ws0">sar:x:205:105:Steve Rago, SF 5-121, 555-1111, 555-2222:/home/sar:/bin/sh</div><div class="t m0 x15 h26 y1849 ff19 fsf fc0 sc0 ls0 ws0">Then we could use<span class="_"> </span><span class="ff1a">finger<span class="_ _80"> </span></span>to print information about Steve Rago.</div><div class="t m0 x1aa h57 y184a ff1a fs2d fc0 sc0 ls0 ws0">$<span class="_"> </span><span class="ff1f">finger -p sar</span></div><div class="t m0 x1aa h57 y184b ff1a fs2d fc0 sc0 ls0 ws0">Login: sar<span class="_ _1e5"> </span>Name: Steve Rago</div><div class="t m0 x1aa h57 y184c ff1a fs2d fc0 sc0 ls0 ws0">Directory: /home/sar<span class="_ _82"> </span>Shell: /bin/sh</div><div class="t m0 x1aa h57 y184d ff1a fs2d fc0 sc0 ls0 ws0">Office: <span class="_"> </span>SF<span class="_"> </span>5-121, <span class="_"> </span>555-1111<span class="_ _15"> </span>Home Phone:<span class="_ _d9"> </span>555-2222</div><div class="t m0 x1aa h57 y184e ff1a fs2d fc0 sc0 ls0 ws0">On since Mon Jan 19 03:57 (EST) on ttyv0 (messages off)</div><div class="t m0 x1aa h57 y184f ff1a fs2d fc0 sc0 ls0 ws0">No Mail.</div><div class="t m0 x15 h26 y1850 ff19 fsf fc0 sc0 ls0 ws0">Even <span class="_ _2"></span>if <span class="_ _2"></span>your <span class="_ _2"></span>system <span class="_ _2"></span>doesn’t <span class="_ _3"></span>support <span class="_ _2"></span>the<span class="_ _66"> </span><span class="ff1a">finger<span class="_ _47"> </span></span>command, <span class="_ _2"></span>these <span class="_ _2"></span>ﬁelds <span class="_ _2"></span>can <span class="_ _3"></span>still</div><div class="t m0 x15 h2a y1851 ff19 fsf fc0 sc0 ls0 ws0">go <span class="_ _45"> </span>into <span class="_ _45"> </span>the <span class="_ _45"> </span>comment <span class="_ _47"> </span>ﬁeld, <span class="_ _45"> </span>since <span class="_ _45"> </span>that <span class="_ _45"> </span>ﬁeld <span class="_ _45"> </span>is <span class="_ _45"> </span>simply <span class="_ _45"> </span>a <span class="_ _45"> </span>comment <span class="_ _47"> </span>and <span class="_ _45"> </span>not</div><div class="t m0 x15 h2a y1852 ff19 fsf fc0 sc0 ls0 ws0">interpreted by system utilities.</div><div class="t m0 x3f h26 y1853 ff19 fsf fc0 sc0 ls0 ws0">Some <span class="_"> </span>systems <span class="_ _47"> </span>provide <span class="_"> </span>the<span class="_ _46"> </span><span class="ff1a">vipw<span class="_ _61"> </span></span>command <span class="_ _66"> </span>to <span class="_ _47"> </span>allow <span class="_"> </span>administrators <span class="_ _66"> </span>to <span class="_ _47"> </span>edit <span class="_"> </span>the</div><div class="t m0 x32 h26 y1854 ff19 fsf fc0 sc0 ls0 ws0">passwor<span class="ls781">dﬁ<span class="_ _b"></span><span class="ls0">le. <span class="_ _47"> </span>The<span class="_ _35"> </span><span class="ff1a">vipw<span class="_ _45"> </span></span>command <span class="_ _9"></span>serializes <span class="_ _9"></span>changes <span class="_ _23"></span>to <span class="_ _9"></span>the <span class="_ _9"></span>passwor<span class="ls781">dﬁ<span class="_ _b"></span><span class="ls0">le <span class="_ _9"></span>and <span class="_ _9"></span>makes</span></span></span></span></div><div class="t m0 x32 h2a y1855 ff19 fsf fc0 sc0 ls0 ws0">sur<span class="ls28c">et<span class="_ _b"></span><span class="ls0">hat <span class="_ _3"></span>any <span class="_ _9"></span>additional <span class="_ _9"></span>ﬁles <span class="_ _9"></span>ar<span class="ls28c">ec<span class="_ _b"></span><span class="ls0">onsistent <span class="_ _9"></span>with <span class="_ _9"></span>the <span class="_ _9"></span>changes <span class="_ _3"></span>made.<span class="_ _5a"> </span>It <span class="_ _9"></span>is <span class="_ _9"></span>also <span class="_ _9"></span>common</span></span></span></span></div><div class="t m0 x32 h2a y1856 ff19 fsf fc0 sc0 ls0 ws0">for systems to provide similar functionality thr<span class="_ _0"></span>ough graphical user interfaces.</div><div class="t m0 x3f h2a y1857 ff19 fsf fc0 sc0 ls0 ws0">POSIX.1 <span class="_ _47"> </span>deﬁnes <span class="_ _45"> </span>two <span class="_ _47"> </span>functions <span class="_ _47"> </span>to <span class="_ _45"> </span>fetch <span class="_ _47"> </span>entries <span class="_ _47"> </span>from <span class="_ _47"> </span>the <span class="_ _45"> </span>passwor<span class="ls782">dﬁ<span class="_ _62"></span><span class="ls0">le. <span class="_ _16"> </span>These</span></span></div><div class="t m0 x32 h2a y1858 ff19 fsf fc0 sc0 ls0 ws0">functions allow us to look up an entry given a user<span class="_ _3"></span>’s login name or numerical user ID.</div><div class="t m0 x3f h57 y1859 ff1a fs2d fc0 sc0 ls0 ws0">#include &lt;pwd.h&gt;</div><div class="t m0 x3f h57 y185a ff1a fs2d fc0 sc0 ls0 ws0">struct passwd *getpwuid(uid_t<span class="_"> </span><span class="ff1b">uid</span>);</div><div class="t m0 x3f h57 y185b ff1a fs2d fc0 sc0 ls0 ws0">struct passwd *getpwnam(const char *<span class="ff1b">name</span>);</div><div class="t m0 x8e h57 y185c ff19 fs2d fc0 sc0 ls0 ws0">Both return: pointer if OK,<span class="_"> </span><span class="ff1a">NULL<span class="_ _e"> </span></span>on error</div><div class="t m0 x32 h4d y185d ff19 fs26 fc0 sc0 ls0 ws0">The<span class="_ _35"> </span><span class="ff1a">getpwuid<span class="_ _44"> </span></span>function <span class="_ _23"> </span>is <span class="_ _42"> </span>used <span class="_ _42"> </span>by <span class="_ _42"> </span>the<span class="_ _35"> </span><span class="ff1a">ls</span></div><div class="t m0 xcb h49 y185e ff19 fs26 fc0 sc0 ls0 ws0">(</div><div class="t m0 x7e h49 y185d ff19 fs26 fc0 sc0 ls0 ws0">1</div><div class="t m0 xec h49 y185e ff19 fs26 fc0 sc0 ls0 ws0">)</div><div class="t m0 x78 h49 y185d ff19 fs26 fc0 sc0 ls0 ws0">program <span class="_ _23"> </span>to <span class="_ _42"> </span>map <span class="_ _42"> </span>the <span class="_ _23"> </span>numerical <span class="_ _42"> </span>user <span class="_ _42"> </span>ID</div><div class="t m0 x32 h4d y185f ff19 fs26 fc0 sc0 ls0 ws0">contained <span class="_ _2"></span>in <span class="_ _2"></span>an <span class="_ _2"></span>i-node <span class="_ _2"></span>into <span class="_ _2"></span>a <span class="_ _2"></span>user<span class="_ _9"></span>’s <span class="_ _2"></span>login <span class="_ _2"></span>name.<span class="_ _61"> </span>The<span class="_ _47"> </span><span class="ff1a">getpwnam<span class="_ _66"> </span></span>function <span class="_ _2"></span>is <span class="_ _2"></span>used <span class="_ _3"></span>by <span class="_ _2"></span>the</div><div class="t m0 x32 h4d y1860 ff1a fs26 fc0 sc0 ls0 ws0">login</div><div class="t m0 x182 h49 y1861 ff19 fs26 fc0 sc0 ls0 ws0">(</div><div class="t m0 x183 h49 y1860 ff19 fs26 fc0 sc0 ls0 ws0">1</div><div class="t m0 x14 h49 y1861 ff19 fs26 fc0 sc0 ls0 ws0">)</div><div class="t m0 x1a7 h49 y1860 ff19 fs26 fc0 sc0 ls0 ws0">program when we enter our login name.</div></div><div class="pi" data-data='{"ctm":[2.100000,0.000000,0.000000,2.100000,-115.668004,-156.491993]}'></div></div>
