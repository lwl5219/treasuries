<div id="pf68" class="pf w4 h1f" data-page-no="68"><div class="pc pc68 w4 h1f"><img class="bi x0 y0 w3 h4" alt="" src="bg68.png"/><div class="t m0 x31 h2 y8e ff1 fs0 fc0 sc0 ls0 ws0"><span class="fc1 sc0">ptg10805159</span></div><div class="t m0 x35 h24 ya4 ff18 fs0 fc0 sc0 ls0 ws0">70<span class="_ _1b"> </span><span class="ff19">File <span class="_"> </span>I/O<span class="_ _169"> </span>Chapter <span class="_"> </span>3</span></div><div class="t m0 xd8 h76 y597 ff19 fs2a fc0 sc0 ls0 ws0">Name of option<span class="_ _13c"> </span>Description<span class="_ _13d"> </span><span class="ff1b">name<span class="_"> </span></span>argument</div><div class="t m0 x156 h5e y7b6 ff1a fs10 fc0 sc0 ls0 ws0">_POSIX_V7_ILP32_OFF32 <span class="_ _16c"> </span>_SC_V7_ILP32_OFF32<span class="_ _15f"></span>int<span class="ff19">,<span class="_"> </span></span>long<span class="ff19 ls136">,p<span class="_ _84"></span><span class="ls0">ointer<span class="_ _1"></span><span class="ls136">,a<span class="_ _84"></span><span class="ls0">nd<span class="_"> </span><span class="ff1a">off_t<span class="_ _e"> </span></span>types</span></span></span></span></div><div class="t m0 x157 h2d y7b7 ff19 fs10 fc0 sc0 ls0 ws0">are<span class="_"> </span>32<span class="_"> </span>bits.</div><div class="t m0 x156 h5e y7b8 ff1a fs10 fc0 sc0 ls0 ws0">_POSIX_V7_ILP32_OFFBIG <span class="_ _159"> </span>_SC_V7_ILP32_OFFBIG<span class="_ _148"></span>int<span class="ff19">,<span class="_"> </span></span>long<span class="ff19 ls136">,a<span class="_ _84"></span><span class="ls0">nd pointer types are</span></span></div><div class="t m0 x157 h5e y7b9 ff19 fs10 fc0 sc0 ls0 ws0">32 bits;<span class="_"> </span><span class="ff1a">off_t<span class="_ _53"> </span></span>types are<span class="_"> </span>at<span class="_"> </span>least</div><div class="t m0 x157 h2d y7ba ff19 fs10 fc0 sc0 ls0 ws0">64 bits.</div><div class="t m0 x156 h5e y7bb ff1a fs10 fc0 sc0 ls0 ws0">_POSIX_V7_LP64_OFF64 <span class="_ _150"> </span>_SC_V7_LP64_OFF64<span class="_ _162"></span>int<span class="_ _53"> </span><span class="ff19">types are<span class="_"> </span>32<span class="_"> </span>bits;<span class="_"> </span></span>long<span class="ff19 ls136">,p<span class="_ _84"></span><span class="ls0">ointer<span class="_ _1"></span>,</span></span></div><div class="t m0 x157 h5e y7bc ff19 fs10 fc0 sc0 ls0 ws0">and<span class="_"> </span><span class="ff1a">off_t<span class="_ _53"> </span></span>types are<span class="_"> </span>64<span class="_"> </span>bits.</div><div class="t m0 x156 h5e y7bd ff1a fs10 fc0 sc0 ls0 ws0">_POSIX_V7_LP64_OFFBIG <span class="_ _16c"> </span>_SC_V7_LP64_OFFBIG<span class="_ _15f"></span>int<span class="_ _53"> </span><span class="ff19">types are<span class="_"> </span>at<span class="_"> </span>least 32 bits;<span class="_"> </span></span>long<span class="ff19">,</span></div><div class="t m0 x157 h5e y7be ff19 fs10 fc0 sc0 ls0 ws0">pointer<span class="_ _1"></span><span class="ls136">,a<span class="_ _84"></span><span class="ls0">nd<span class="_"> </span><span class="ff1a">off_t<span class="_ _53"> </span></span>types ar<span class="ls136">ea<span class="_ _84"></span><span class="ls0">t</span></span></span></span></div><div class="t m0 x157 h2d y7bf ff19 fs10 fc0 sc0 ls0 ws0">least 64 bits.</div><div class="t m0 xe7 h4f yb0f ff18 fs11 fc0 sc0 ls0 ws0">Figure 3.3<span class="_ _5a"> </span><span class="ff19">Data size options and<span class="_"> </span><span class="ff1b">name<span class="_"> </span></span>arguments to<span class="_"> </span><span class="ff1a">sysconf</span></span></div><div class="t m0 x3f h54 yb10 ff19 fs2c fc0 sc0 ls0 ws0">The<span class="_ _46"> </span><span class="ff1a">c99<span class="_ _46"> </span></span>compiler <span class="_ _47"> </span>r<span class="_ _0"></span>equires <span class="_"> </span>that <span class="_"> </span>we <span class="_ _66"> </span>use <span class="_ _66"> </span>the<span class="_ _61"> </span><span class="ff1a">getconf</span></div><div class="t m0 x97 h55 yb11 ff19 fs2c fc0 sc0 ls0 ws0">(</div><div class="t m0 x98 h55 yb10 ff19 fs2c fc0 sc0 ls0 ws0">1</div><div class="t m0 x158 h55 yb11 ff19 fs2c fc0 sc0 ls0 ws0">)</div><div class="t m0 x43 h55 yb10 ff19 fs2c fc0 sc0 ls0 ws0">command <span class="_"> </span>to <span class="_ _66"> </span>map <span class="_ _66"> </span>the</div><div class="t m0 x32 h55 yb12 ff19 fs2c fc0 sc0 ls0 ws0">desired <span class="_"> </span>data <span class="_"> </span>size <span class="_ _47"> </span>model <span class="_"> </span>to <span class="_ _66"> </span>the <span class="_ _66"> </span>ﬂags <span class="_ _47"> </span>necessary <span class="_"> </span>to <span class="_ _66"> </span>compile <span class="_ _66"> </span>and <span class="_ _47"> </span>link <span class="_"> </span>our <span class="_ _66"> </span>programs.</div><div class="t m0 x32 h55 yb13 ff19 fs2c fc0 sc0 ls0 ws0">Differ<span class="_ _0"></span>ent <span class="_ _4b"> </span>ﬂags <span class="_ _4b"> </span>and <span class="_ _4b"> </span>libraries <span class="_ _59"> </span>might <span class="_ _4b"> </span>be <span class="_ _4b"> </span>needed, <span class="_ _59"> </span>depending <span class="_ _4b"> </span>on <span class="_ _4b"> </span>the <span class="_ _4b"> </span>environments</div><div class="t m0 x32 h55 yb14 ff19 fs2c fc0 sc0 ls0 ws0">supported by each platform.</div><div class="t m0 x76 h2e yb15 ff19 fs11 fc0 sc0 ls0 ws0">Unfortunately<span class="_ _6"></span><span class="ls39d">,t<span class="_ _d"></span><span class="ls0">his <span class="_ _3"></span>is <span class="_ _3"></span>one <span class="_ _9"></span>area <span class="_ _2"></span>in <span class="_ _9"></span>which <span class="_ _3"></span>implementations <span class="_ _3"></span>haven’t <span class="_ _9"></span>caught <span class="_ _3"></span>up <span class="_ _3"></span>to <span class="_ _9"></span>the <span class="_ _3"></span>standards.</span></span></div><div class="t m0 x76 h2e yb16 ff19 fs11 fc0 sc0 ls0 ws0">If your <span class="_ _2"></span>system <span class="_ _2"></span>does <span class="_ _2"></span>not <span class="_ _2"></span>match the <span class="_ _2"></span>latest <span class="_ _2"></span>version <span class="_ _2"></span>of <span class="_ _2"></span>the <span class="_ _2"></span>standard, the <span class="_ _2"></span>system might <span class="_ _2"></span>support <span class="_ _2"></span>the</div><div class="t m0 x76 h2e yb17 ff19 fs11 fc0 sc0 ls0 ws0">option <span class="_ _60"> </span>names <span class="_ _50"> </span>from <span class="_ _60"> </span>the <span class="_ _60"> </span>previous <span class="_ _60"> </span>version <span class="_ _50"> </span>of <span class="_ _60"> </span>the <span class="_ _50"> </span>Single <span class="_ _60"> </span>UNIX <span class="_ _50"> </span>Speciﬁcation:</div><div class="t m0 x76 h4f yb18 ff1a fs11 fc0 sc0 ls0 ws0">_POSIX_V6_ILP32_OFF32<span class="ff19">,<span class="_ _4b"> </span></span>_POSIX_V6_ILP32_OFFBIG<span class="ff19">,<span class="_ _59"> </span></span>_POSIX_V6_LP64_OFF64<span class="ff19 ls39e">,a<span class="_ _55"></span><span class="ls0">nd</span></span></div><div class="t m0 x76 h4f yb19 ff1a fs11 fc0 sc0 ls0 ws0">_POSIX_V6_LP64_OFFBIG<span class="ff19">.</span></div><div class="t m0 x76 h4f yb1a ff19 fs11 fc0 sc0 ls39f ws0">To <span class="_ _66"> </span>g<span class="_ _9"></span><span class="ls0">et <span class="_ _23"> </span>around <span class="_ _23"> </span>this, <span class="_ _23"> </span>applications <span class="_ _42"> </span>can <span class="_ _23"> </span>set <span class="_ _23"> </span>the<span class="_ _45"> </span><span class="ff1a">_FILE_OFFSET_BITS<span class="_ _45"> </span></span>constant <span class="_ _23"> </span>to <span class="_ _42"> </span>64 <span class="_ _23"> </span>to <span class="_ _23"> </span>enable</span></div><div class="t m0 x76 h2e yb1b ff19 fs11 fc0 sc0 ls0 ws0">64</div><div class="t m0 x159 h2e yb1c ff19 fs11 fc0 sc0 ls0 ws0">-</div><div class="t m0 x1f h4f yb1b ff19 fs11 fc0 sc0 ls0 ws0">bit <span class="_ _3"></span>offsets. <span class="_ _80"> </span>Doing<span class="_ _66"> </span>so <span class="_ _3"></span>changes <span class="_ _3"></span>the <span class="_ _3"></span>deﬁnition <span class="_ _3"></span>of<span class="_ _66"> </span><span class="ff1a">off_t<span class="_ _66"> </span></span>to <span class="_ _3"></span>be <span class="_ _3"></span>a <span class="_ _3"></span>64</div><div class="t m0 x15a h2e yb1c ff19 fs11 fc0 sc0 ls0 ws0">-</div><div class="t m0 x11 h2e yb1b ff19 fs11 fc0 sc0 ls0 ws0">bit <span class="_ _3"></span>signed <span class="_ _3"></span>integer<span class="_ _1"></span><span class="ls3a0">.S<span class="_ _55"></span><span class="ls0">etting</span></span></div><div class="t m0 x76 h4f yb1d ff1a fs11 fc0 sc0 ls0 ws0">_FILE_OFFSET_BITS<span class="_ _47"> </span><span class="ff19">to <span class="_ _9"></span>32 <span class="_ _23"> </span>enables <span class="_ _9"></span>32</span></div><div class="t m0 x95 h2e yb1e ff19 fs11 fc0 sc0 ls0 ws0">-</div><div class="t m0 xeb h2e yb1d ff19 fs11 fc0 sc0 ls0 ws0">bit <span class="_ _9"></span>ﬁle <span class="_ _23"> </span>offsets. <span class="_ _66"> </span>Be<span class="_ _47"> </span>aware, <span class="_ _9"> </span>however<span class="_ _0"></span><span class="ls3a1">,t<span class="_ _8"></span><span class="ls0">hat <span class="_ _9"> </span>although <span class="_ _23"> </span>all</span></span></div><div class="t m0 x76 h2e yb1f ff19 fs11 fc0 sc0 ls0 ws0">four <span class="_ _66"> </span>platforms <span class="_ _66"> </span>discussed <span class="_ _47"> </span>in <span class="_ _66"> </span>this <span class="_ _66"> </span>text <span class="_ _66"> </span>support <span class="_ _47"> </span>both <span class="_ _66"> </span>32</div><div class="t m0 x15b h2e yb20 ff19 fs11 fc0 sc0 ls0 ws0">-</div><div class="t m0 xc8 h2e yb1f ff19 fs11 fc0 sc0 ls0 ws0">bit <span class="_ _66"> </span>and <span class="_ _66"> </span>64</div><div class="t m0 xd4 h2e yb20 ff19 fs11 fc0 sc0 ls0 ws0">-</div><div class="t m0 xbc h2e yb1f ff19 fs11 fc0 sc0 ls0 ws0">bit <span class="_ _66"> </span>ﬁle <span class="_ _66"> </span>offsets, <span class="_ _66"> </span>setting</div><div class="t m0 x76 h4f yb21 ff1a fs11 fc0 sc0 ls0 ws0">_FILE_OFFSET_BITS<span class="_ _53"> </span><span class="ff19">is not guaranteed to be portable and might not have the desired effect.</span></div><div class="t m0 x76 h4f yb22 ff19 fs11 fc0 sc0 ls0 ws0">Figur<span class="ls3a2">e3<span class="_ _8"></span><span class="ls0">.4 <span class="_ _9"></span>summarizes <span class="_ _9"></span>the <span class="_ _9"> </span>size <span class="_ _9"> </span>in <span class="_ _9"> </span>bytes <span class="_ _9"> </span>of <span class="_ _23"> </span>the<span class="_ _66"> </span><span class="ff1a">off_t<span class="_ _47"> </span></span>data <span class="_ _9"></span>type <span class="_ _9"></span>for <span class="_ _9"></span>the <span class="_ _9"></span>platforms <span class="_ _9"></span>covered <span class="_ _9"></span>in</span></span></div><div class="t m0 x76 h4f yb23 ff19 fs11 fc0 sc0 ls0 ws0">this <span class="_ _2"></span>book <span class="_ _3"></span>when <span class="_ _2"></span>an <span class="_ _2"></span>application <span class="_ _3"></span>doesn’t <span class="_ _2"></span>deﬁne<span class="_ _66"> </span><span class="ff1a">_FILE_OFFSET_BITS</span>,<span class="_ _80"> </span>as<span class="_ _80"> </span>well <span class="_ _2"></span>as <span class="_ _3"></span>the <span class="_ _2"></span>size <span class="_ _3"></span>when</div><div class="t m0 x76 h4f yb24 ff19 fs11 fc0 sc0 ls0 ws0">an application deﬁnes<span class="_"> </span><span class="ff1a">_FILE_OFFSET_BITS<span class="_ _53"> </span></span>to have a value of either 32 or 64.</div><div class="t m0 x6b h6d yb25 ff19 fs12 fc0 sc0 ls0 ws0">Operating <span class="_ _9f"> </span>CPU<span class="_ _8a"> </span><span class="ff1a">_FILE_OFFSET_BITS<span class="_ _e"> </span></span>value</div><div class="t m0 x7 h30 yb26 ff19 fs13 fc0 sc0 ls0 ws0">system <span class="_ _db"> </span>architectur<span class="_ _0"></span><span class="ls3a3">eU<span class="_ _164"></span><span class="ls0">ndeﬁned <span class="_ _28"> </span>32 <span class="_ _28"> </span>64</span></span></div><div class="t m0 x26 h31 yb27 ff19 fs14 fc0 sc0 ls0 ws0">FreeBSD 8.0<span class="_ _20"> </span>x86 32</div><div class="t m0 x74 h31 yb28 ff19 fs14 fc0 sc0 ls0 ws0">-</div><div class="t m0 xaf h31 yb27 ff19 fs14 fc0 sc0 ls0 ws0">bit <span class="_ _b7"> </span>8<span class="_ _1c"> </span><span class="ls3a4">88</span></div><div class="t m0 x26 h31 yb29 ff19 fs14 fc0 sc0 ls0 ws0">Linux 3.2.0<span class="_ _2f"> </span>x86 64</div><div class="t m0 x74 h31 yb2a ff19 fs14 fc0 sc0 ls0 ws0">-</div><div class="t m0 xaf h31 yb29 ff19 fs14 fc0 sc0 ls0 ws0">bit <span class="_ _b7"> </span>8<span class="_ _1c"> </span><span class="ls3a4">88</span></div><div class="t m0 x26 h31 yb2b ff19 fs14 fc0 sc0 ls0 ws0">Mac OS X 10.6.8<span class="_ _28"> </span>x86 64</div><div class="t m0 x74 h31 yb2c ff19 fs14 fc0 sc0 ls0 ws0">-</div><div class="t m0 xaf h31 yb2b ff19 fs14 fc0 sc0 ls0 ws0">bit <span class="_ _b7"> </span>8<span class="_ _1c"> </span><span class="ls3a4">88</span></div><div class="t m0 x26 h31 yb2d ff19 fs14 fc0 sc0 ls0 ws0">Solaris 10<span class="_ _16d"> </span>SP<span class="_ _6"></span>ARC 64</div><div class="t m0 x15c h31 yb2e ff19 fs14 fc0 sc0 ls0 ws0">-</div><div class="t m0 x15d h31 yb2d ff19 fs14 fc0 sc0 ls0 ws0">bit <span class="_ _10b"> </span>8<span class="_ _16e"> </span><span class="ls3a4">48</span></div><div class="t m0 xa5 h66 yb2f ff18 fs15 fc0 sc0 ls0 ws0">Figure 3.4<span class="_ _5a"> </span><span class="ff19">Size in bytes of<span class="_"> </span><span class="ff1a">off_t<span class="_ _e"> </span></span>for different platforms</span></div><div class="t m0 x3f h67 yb30 ff19 fs33 fc0 sc0 ls0 ws0">Note <span class="_ _9"></span>that <span class="_ _23"></span>even <span class="_ _9"></span>though <span class="_ _23"></span>you <span class="_ _9"></span>might <span class="_ _23"></span>enable <span class="_ _9"></span>64</div><div class="t m0 xdb h67 yb31 ff19 fs33 fc0 sc0 ls0 ws0">-</div><div class="t m0 xdc h67 yb30 ff19 fs33 fc0 sc0 ls0 ws0">bit <span class="_ _9"></span>ﬁle <span class="_ _23"></span>offsets, <span class="_ _9"></span>your <span class="_ _9"></span>ability <span class="_ _23"></span>to <span class="_ _9"></span>create <span class="_ _9"></span>a</div><div class="t m0 x32 h67 yb32 ff19 fs33 fc0 sc0 ls0 ws0">ﬁle larger than 2 GB</div><div class="t m0 xe9 h67 yb33 ff19 fs33 fc0 sc0 ls0 ws0">(</div><div class="t m0 xea h67 yb32 ff19 fs33 fc0 sc0 ls0 ws0">2</div><div class="t m0 x12b h7f yb34 ff19 fs3d fc0 sc0 ls0 ws0">31</div><div class="t m0 x26 h67 yb35 ff20 fs33 fc0 sc0 ls0 ws0">−<span class="ff19 ls1d7">1b<span class="_ _d"></span><span class="ls0">ytes</span></span></div><div class="t m0 x15e h67 yb36 ff19 fs33 fc0 sc0 ls0 ws0">)</div><div class="t m0 x15f h67 yb35 ff19 fs33 fc0 sc0 ls0 ws0">depends on the underlying ﬁle system type.</div></div><div class="pi" data-data='{"ctm":[2.100000,0.000000,0.000000,2.100000,-115.668004,-156.491993]}'></div></div>
