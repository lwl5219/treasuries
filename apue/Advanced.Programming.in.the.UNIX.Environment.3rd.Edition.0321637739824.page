<div id="pf338" class="pf w4 h1f" data-page-no="338"><div class="pc pc338 w4 h1f"><img class="bi x0 y0 w3 h4" alt="" src="apue/bg338.png"/><div class="t m0 x31 h2 y8e ff1 fs0 fc0 sc0 ls0 ws0"><span class="fc1 sc0">ptg10805159</span></div><div class="t m0 x35 h24 ya4 ff18 fs0 fc0 sc0 ls0 ws0">790<span class="_ _1b"> </span><span class="ff19">Communicating <span class="_"> </span>with <span class="_"> </span>a <span class="_"> </span>Network <span class="_"> </span>Printer<span class="_ _23b"> </span>Chapter <span class="_"> </span>21</span></div><div class="t m0 x3f h2a y12f ff19 fsf fc0 sc0 ls0 ws0">IPP <span class="_ _47"> </span>is <span class="_ _45"> </span>speciﬁed <span class="_ _47"> </span>in <span class="_ _45"> </span>a <span class="_ _45"> </span>series <span class="_ _47"> </span>of <span class="_ _45"> </span>documents <span class="_ _47"> </span>(Requests <span class="_ _45"> </span>For <span class="_ _47"> </span>Comments, <span class="_ _45"> </span>or <span class="_ _47"> </span>RFCs)</div><div class="t m0 x32 h26 y130 ff19 fsf fc0 sc0 ls0 ws0">available <span class="_ _16"> </span>at<span class="_ _5f"> </span><span class="ff1a">http://www.ietf.org/rfc.html</span><span class="ls1713">.P<span class="_ _18c"></span><span class="ls45">ro<span class="ls0">posed <span class="_ _16"> </span>draft <span class="_ _16"> </span>standards <span class="_ _61"> </span>are</span></span></span></div><div class="t m0 x32 h2a y131 ff19 fsf fc0 sc0 ls0 ws0">developed <span class="_ _42"> </span>by <span class="_ _53"> </span>the <span class="_ _53"> </span>Printer <span class="_ _53"> </span>W<span class="_ _6"></span>orking <span class="_ _53"> </span>Group, <span class="_ _42"> </span>which <span class="_ _53"> </span>is <span class="_ _53"> </span>associated <span class="_ _53"> </span>with <span class="_ _53"> </span>the <span class="_ _53"> </span>IEEE.<span class="_ _54"> </span>These</div><div class="t m0 x32 h26 y132 ff19 fsf fc0 sc0 ls0 ws0">drafts <span class="_ _3"></span>ar<span class="ls460">ea<span class="_ _b"></span><span class="ls0">vailable <span class="_ _3"></span>at<span class="_ _45"> </span><span class="ff1a">http://www.pwg.org/ipp</span><span class="lsf6d">.T<span class="_ _62"></span><span class="ls0">he <span class="_ _3"></span>main <span class="_ _9"></span>documents <span class="_ _3"></span>ar<span class="ls460">el<span class="_ _b"></span><span class="ls0">isted <span class="_ _3"></span>in</span></span></span></span></span></span></div><div class="t m0 x32 h2a y133 ff19 fsf fc0 sc0 ls0 ws0">Figur<span class="ls1714">e2<span class="_ _56"></span><span class="ls0">1.1, <span class="_ _61"> </span>although <span class="_ _16"> </span>many <span class="_ _16"> </span>other <span class="_ _61"> </span>documents <span class="_ _16"> </span>ar<span class="ls1714">ea<span class="_ _56"></span><span class="ls0">vailable <span class="_ _16"> </span>to <span class="_ _16"> </span>further <span class="_ _61"> </span>specify</span></span></span></span></div><div class="t m0 x32 h2a y134 ff19 fsf fc0 sc0 ls0 ws0">administrative procedur<span class="_ _0"></span>es, job attributes, and the like.</div><div class="t m0 x194 h2d y5943 ff19 fs10 fc0 sc0 ls0 ws0">Document <span class="_ _33"> </span>T<span class="_ _1"></span>itle</div><div class="t m0 x14a h2e y5944 ff19 fs11 fc0 sc0 ls0 ws0">RFC 2567<span class="_ _a0"> </span>Design Goals for an Internet Printing Protocol</div><div class="t m0 x14a h2e y5945 ff19 fs11 fc0 sc0 ls0 ws0">RFC 2568<span class="_ _a0"> </span>Rationale for the Structure<span class="_"> </span>of<span class="_"> </span>the Model and Protocol for the Internet Printing</div><div class="t m0 x18 h2e y5946 ff19 fs11 fc0 sc0 ls0 ws0">Protocol</div><div class="t m0 x14a h2e y5947 ff19 fs11 fc0 sc0 ls0 ws0">RFC 291<span class="_ _1"></span><span class="ls1715">1I<span class="_ _31a"></span><span class="ls0">nternet Printing Protocol/1.1: Model and Semantics</span></span></div><div class="t m0 x14a h2e y5948 ff19 fs11 fc0 sc0 ls0 ws0">RFC 2910<span class="_ _a0"> </span>Internet Printing Protocol/1.1: Encoding and T<span class="_ _6"></span>ransport</div><div class="t m0 x14a h2e y5949 ff19 fs11 fc0 sc0 ls0 ws0">RFC 3196<span class="_ _a0"> </span>Internet Printing Protocol/1.1: Implementor<span class="_ _3"></span>’s Guide</div><div class="t m0 x12b h2f y594a ff19 fs12 fc0 sc0 ls0 ws0">Internet Printing Protocol V<span class="_ _4"></span>ersion 2.0, Second Edition<span class="_ _101"></span>Candidate Standard</div><div class="t m0 x33 h2f y594b ff19 fs12 fc0 sc0 ls0 ws0">5100.12</div><div class="t m0 x1aa h2f y594c ff19 fs12 fc0 sc0 ls0 ws0">-</div><div class="t m0 x76 h2f y594b ff19 fs12 fc0 sc0 ls0 ws0">201<span class="_ _1"></span>1</div><div class="t m0 x127 h30 y594d ff18 fs13 fc0 sc0 ls0 ws0">Figure 21.1<span class="_ _35"> </span><span class="ff19">Primary IPP documents</span></div><div class="t m0 x3f h6e y594e ff19 fs31 fc0 sc0 ls0 ws0">Candidate <span class="_ _42"> </span>Standar<span class="ls1716">d5<span class="_ _c"></span><span class="ls0">100.12</span></span></div><div class="t m0 x4b h6e y594f ff19 fs31 fc0 sc0 ls0 ws0">-</div><div class="t m0 x1e2 h6e y594e ff19 fs31 fc0 sc0 ls0 ws0">201<span class="_ _1"></span><span class="ls1717">1s<span class="_ _43"></span><span class="ls0">peciﬁes <span class="_ _42"> </span>all <span class="_ _42"> </span>featur<span class="_ _0"></span>es <span class="_ _42"> </span>that <span class="_ _42"> </span>implementations <span class="_ _42"> </span>must</span></span></div><div class="t m0 x32 h6e y5950 ff19 fs31 fc0 sc0 ls0 ws0">support <span class="_ _2"></span>to <span class="_ _2"></span>conform <span class="_ _2"></span>to <span class="_ _3"></span>differ<span class="_ _0"></span>ent <span class="_ _2"></span>versions <span class="_ _2"></span>of <span class="_ _2"></span>the <span class="_ _3"></span>IPP <span class="_ _2"></span>standard. <span class="_ _66"> </span>Ther<span class="ls1718">ea<span class="_ _8"></span><span class="ls225">re <span class="_ _9"></span>m<span class="_ _2"></span><span class="ls0">any <span class="_ _2"></span>proposed</span></span></span></div><div class="t m0 x32 h6e y5951 ff19 fs31 fc0 sc0 ls0 ws0">extensions <span class="_ _35"> </span>to <span class="_ _35"> </span>the <span class="_ _45"> </span>IPP <span class="_ _35"> </span>protocol <span class="_ _35"> </span>(speciﬁc <span class="_ _35"> </span>featur<span class="_ _0"></span>es <span class="_ _35"> </span>ar<span class="_ _0"></span><span class="ls1719">ed<span class="_ _7"></span><span class="ls0">eﬁned <span class="_ _35"> </span>in <span class="_ _35"> </span>other <span class="_ _35"> </span>IPP-related</span></span></div><div class="t m0 x32 h6e y5952 ff19 fs31 fc0 sc0 ls0 ws0">documents). <span class="_ _4b"> </span>These<span class="_ _4b"> </span>features <span class="_ _53"> </span>ar<span class="ls171a">ed<span class="_ _55"></span><span class="ls0">ivided <span class="_ _53"> </span>into <span class="_ _e"> </span>groups <span class="_ _53"> </span>to <span class="_ _e"> </span>create <span class="_ _53"> </span>different <span class="_ _53"> </span>conformance</span></span></div><div class="t m0 x32 h6e y5953 ff19 fs31 fc0 sc0 ls0 ws0">levels; <span class="_ _3"></span>each <span class="_ _9"></span>level <span class="_ _9"></span>is <span class="_ _9"></span>a <span class="_ _3"></span>different <span class="_ _3"></span>protocol <span class="_ _3"></span>version.<span class="_ _5a"> </span>For <span class="_ _9"></span>compatibility<span class="_ _4"></span><span class="ls171b">,e<span class="_ _8"></span><span class="ls0">ach <span class="_ _3"></span>higher <span class="_ _9"></span>level <span class="_ _9"></span>of</span></span></div><div class="t m0 x32 h6e y5954 ff19 fs31 fc0 sc0 ls0 ws0">conformance <span class="_ _9"></span>requires <span class="_ _9"></span>that <span class="_ _9"></span>implementations <span class="_ _23"></span>meet <span class="_ _9"></span>most <span class="_ _23"></span>of <span class="_ _9"></span>the <span class="_ _23"></span>requir<span class="_ _1"></span>ements <span class="_ _23"></span>deﬁned <span class="_ _9"></span>by</div><div class="t m0 x32 h6e y5955 ff19 fs31 fc0 sc0 ls0 ws0">lower versions of the standard. <span class="_"> </span>In<span class="_"> </span>this chapter<span class="_ _6"></span>,<span class="_"> </span>we<span class="_"> </span>will use IPP version 1.1 in our simple</div><div class="t m0 x32 h6e y5956 ff19 fs31 fc0 sc0 ls0 ws0">example.</div><div class="t m0 x3f h6e y5957 ff19 fs31 fc0 sc0 ls0 ws0">IPP is built <span class="_ _2"></span>on top of <span class="_ _2"></span>HTTP<span class="_ _4"></span><span class="ls171c">,t<span class="_ _d"></span><span class="ls0">he Hypertext <span class="_ _2"></span>T<span class="_ _6"></span>ransfer Protocol (Section 21.3).<span class="_ _46"> </span>HTTP<span class="_ _4"></span><span class="ls171c">,i<span class="_ _d"></span><span class="ls0">n</span></span></span></span></div><div class="t m0 x32 h6e y3a6d ff19 fs31 fc0 sc0 ls0 ws0">turn, is built on top of TCP/IP<span class="_ _4"></span><span class="ls171d">.F<span class="_ _4a"></span><span class="ls0">igur<span class="ls229">e2<span class="_ _4f"></span><span class="ls0">1.2 shows the structure<span class="_"> </span>of<span class="_"> </span>an<span class="_"> </span>IPP message.</span></span></span></span></div><div class="t m0 x240 h31 y5958 ff19 fs14 fc0 sc0 ls0 ws0">Ethernet</div><div class="t m0 xc4 h31 y5959 ff19 fs14 fc0 sc0 ls0 ws0">header</div><div class="t m0 x217 h32 y595a ff19 fs15 fc0 sc0 ls0 ws0">IP</div><div class="t m0 x134 h32 y595b ff19 fs15 fc0 sc0 ls0 ws0">header</div><div class="t m0 x231 h33 y595c ff19 fs16 fc0 sc0 ls0 ws0">TCP</div><div class="t m0 xc1 h33 y595d ff19 fs16 fc0 sc0 ls0 ws0">header</div><div class="t m0 x176 h83 y595e ff19 fs36 fc0 sc0 ls0 ws0">HTTP</div><div class="t m0 x78 h83 y595f ff19 fs36 fc0 sc0 ls0 ws0">header</div><div class="t m0 x1e9 h34 y5960 ff19 fs17 fc0 sc0 ls0 ws0">IPP</div><div class="t m0 x1c7 h34 y5961 ff19 fs17 fc0 sc0 ls0 ws0">header</div><div class="t m0 x1a5 h35 y5962 ff19 fs18 fc0 sc0 ls0 ws0">data to be</div><div class="t m0 x16b h35 y5963 ff19 fs18 fc0 sc0 ls0 ws0">printed</div><div class="t m0 x7 h35 y5964 ff18 fs18 fc0 sc0 ls0 ws0">Figure 21.2<span class="_ _5a"> </span><span class="ff19">Structure<span class="_"> </span>of<span class="_"> </span>an<span class="_"> </span>IPP message</span></div><div class="t m0 x3f h69 y5965 ff19 fs34 fc0 sc0 ls0 ws0">IPP <span class="_ _23"> </span>is <span class="_ _42"> </span>a <span class="_ _42"> </span>request–r<span class="_ _0"></span>esponse <span class="_ _23"> </span>protocol. <span class="_ _35"> </span>A<span class="_ _44"> </span>client <span class="_ _23"> </span>sends <span class="_ _42"> </span>a <span class="_ _42"> </span>r<span class="_ _0"></span>equest <span class="_ _42"> </span>message <span class="_ _23"> </span>to <span class="_ _42"> </span>a <span class="_ _42"> </span>server<span class="_ _6"></span>,</div><div class="t m0 x32 h69 y5966 ff19 fs34 fc0 sc0 ls0 ws0">and <span class="_ _9"></span>the <span class="_ _9"></span>server <span class="_ _9"></span>answers <span class="_ _9"></span>with <span class="_ _9"></span>a <span class="_ _9"></span>response <span class="_ _3"></span>message.<span class="_ _5a"> </span>The <span class="_ _9"></span>IPP <span class="_ _9"></span>header <span class="_ _9"></span>contains <span class="_ _9"></span>a <span class="_ _9"></span>ﬁeld <span class="_ _9"></span>that</div><div class="t m0 x32 h69 y5967 ff19 fs34 fc0 sc0 ls0 ws0">indicates <span class="_ _23"></span>the <span class="_ _23"></span>r<span class="_ _0"></span>equested <span class="_ _23"></span>operation.<span class="_ _5a"> </span>Operations <span class="_ _23"> </span>ar<span class="ls171e">ed<span class="_ _43"></span><span class="ls0">eﬁned <span class="_ _23"> </span>to <span class="_ _23"> </span>submit <span class="_ _23"> </span>print <span class="_ _23"></span>jobs, <span class="_ _23"></span>cancel</span></span></div><div class="t m0 x32 h69 y5968 ff19 fs34 fc0 sc0 ls0 ws0">print <span class="_ _2"></span>jobs, <span class="_ _3"></span>get <span class="_ _3"></span>job <span class="_ _3"></span>attributes, <span class="_ _2"></span>get <span class="_ _3"></span>printer <span class="_ _3"></span>attributes, <span class="_ _3"></span>pause <span class="_ _3"></span>and <span class="_ _2"></span>restart <span class="_ _2"></span>the <span class="_ _3"></span>printer<span class="_ _1"></span><span class="ls171f">,p<span class="_ _8"></span><span class="ls0">lace <span class="_ _3"></span>a</span></span></div><div class="t m0 x32 h69 y5969 ff19 fs34 fc0 sc0 ls0 ws0">job on hold, and release a held job.</div><div class="t m0 x3f h69 y596a ff19 fs34 fc0 sc0 ls0 ws0">Figur<span class="ls1720">e2<span class="_ _b"></span><span class="ls0">1.3 <span class="_ _3"></span>shows <span class="_ _9"></span>the <span class="_ _3"></span>structure<span class="_ _47"> </span>of<span class="_ _47"> </span>an<span class="_ _47"> </span>IPP <span class="_ _9"></span>message <span class="_ _3"></span>header<span class="_ _1"></span><span class="ls1721">.T<span class="_ _62"></span><span class="ls0">he <span class="_ _9"></span>ﬁrst <span class="_ _3"></span>2 <span class="_ _3"></span>bytes <span class="_ _9"></span>ar<span class="ls1722">et<span class="_ _b"></span><span class="ls0">he</span></span></span></span></span></span></div><div class="t m0 x32 h69 y596b ff19 fs34 fc0 sc0 ls0 ws0">IPP version <span class="_ _2"></span>number<span class="_ _1"></span><span class="ls1723">.F<span class="_ _5b"></span><span class="ls0">or <span class="_ _2"></span>protocol version <span class="_ _2"></span>1.1, <span class="_ _2"></span>each <span class="_ _2"></span>byte <span class="_ _2"></span>has <span class="_ _2"></span>a <span class="_ _2"></span>value <span class="_ _2"></span>of <span class="_ _2"></span>1.<span class="_ _46"> </span>For <span class="_ _2"></span>a <span class="_ _2"></span>protocol</span></span></div><div class="t m0 x32 h69 y596c ff19 fs34 fc0 sc0 ls1df ws0">re<span class="ls0">quest, <span class="_ _42"> </span>the <span class="_ _42"> </span>next <span class="_ _42"> </span>2 <span class="_ _42"> </span>bytes <span class="_ _42"> </span>contain <span class="_ _23"> </span>a <span class="_ _42"> </span>value <span class="_ _42"> </span>identifying <span class="_ _42"> </span>the <span class="_ _42"> </span>type <span class="_ _42"> </span>of <span class="_ _42"> </span>operation <span class="_ _23"> </span>requested.</span></div><div class="t m0 x32 h69 y596d ff19 fs34 fc0 sc0 ls0 ws0">For a protocol r<span class="_ _0"></span>esponse, these 2 bytes contain a status code instead.</div><a class="l" href="http://www.ietf.org/rfc.html"><div class="d m1" style="border-style:none;position:absolute;left:288.040205px;bottom:1217.048743px;width:170.269989px;height:10.135009px;background-color:rgba(255,255,255,0.000001);"></div></a><a class="l" href="http://www.pwg.org/ipp"><div class="d m1" style="border-style:none;position:absolute;left:365.922886px;bottom:1164.221130px;width:134.500015px;height:14.979980px;background-color:rgba(255,255,255,0.000001);"></div></a></div><div class="pi" data-data='{"ctm":[2.100000,0.000000,0.000000,2.100000,-115.668004,-156.491993]}'></div></div>
