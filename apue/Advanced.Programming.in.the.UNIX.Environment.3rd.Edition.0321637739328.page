<div id="pf148" class="pf w4 h1f" data-page-no="148"><div class="pc pc148 w4 h1f"><img class="bi x0 y0 w3 h4" alt="" src="apue/bg148.png"/><div class="t m0 x31 h2 y8e ff1 fs0 fc0 sc0 ls0 ws0"><span class="fc1 sc0">ptg10805159</span></div><div class="t m0 x35 h24 ya4 ff18 fs0 fc0 sc0 ls0 ws0">294<span class="_ _1b"> </span><span class="ff19">Process <span class="_"> </span>Relationships<span class="_ _18d"> </span>Chapter <span class="_"> </span>9</span></div><div class="t m0 x3f h57 y1295 ff1a fs2d fc0 sc0 ls0 ws0">#include &lt;unistd.h&gt;</div><div class="t m0 x3f h57 y19f8 ff1a fs2d fc0 sc0 ls0 ws0">pid_t getpgid(pid_t<span class="_"> </span><span class="ff1b">pid</span>);</div><div class="t m0 x115 h5f y19f9 ff19 fs2d fc0 sc0 ls0 ws0">Returns: process gr<span class="_ _0"></span>oup ID if OK,<span class="_"> </span><span class="ff20">−</span>1<span class="_"> </span>on<span class="_"> </span>error</div><div class="t m0 x32 h4a y25e5 ff19 fs26 fc0 sc0 ls0 ws0">If<span class="_"> </span><span class="ff1b">pid<span class="_"> </span></span>is 0, the process gr<span class="_ _0"></span>oup ID of the calling pr<span class="_ _0"></span>ocess is returned. <span class="_"> </span>Thus</div><div class="t m0 x9d h4e y25e6 ff1a fs28 fc0 sc0 ls0 ws0">getpgid(0);</div><div class="t m0 x32 h49 y25e7 ff19 fs26 fc0 sc0 ls0 ws0">is equivalent to</div><div class="t m0 x9d h4e y25e8 ff1a fs28 fc0 sc0 ls0 ws0">getpgrp();</div><div class="t m0 x3f h49 y25e9 ff19 fs26 fc0 sc0 ls0 ws0">Each <span class="_ _2"></span>process <span class="_ _3"></span>group <span class="_ _2"></span>can <span class="_ _3"></span>have <span class="_ _3"></span>a <span class="_ _3"></span>process <span class="_ _2"></span>group <span class="_ _2"></span>leader<span class="_ _1"></span><span class="lsb0e">.T<span class="_ _1d"></span><span class="ls0">he <span class="_ _3"></span>leader <span class="_ _3"></span>is <span class="_ _3"></span>identiﬁed <span class="_ _2"></span>by <span class="_ _3"></span>its</span></span></div><div class="t m0 x32 h49 y25ea ff19 fs26 fc0 sc0 ls0 ws0">process gr<span class="_ _0"></span>oup ID being equal to its pr<span class="_ _0"></span>ocess ID.</div><div class="t m0 x3f h49 y25eb ff19 fs26 fc0 sc0 ls0 ws0">It is possible for a process group leader to create a process gr<span class="_ _0"></span>oup, create pr<span class="_ _0"></span>ocesses in</div><div class="t m0 x32 h49 y25ec ff19 fs26 fc0 sc0 ls0 ws0">the <span class="_ _42"> </span>group, <span class="_ _23"> </span>and <span class="_ _42"> </span>then <span class="_ _42"> </span>terminate.<span class="_ _51"> </span>The <span class="_ _42"> </span>process <span class="_ _42"> </span>group <span class="_ _23"> </span>still <span class="_ _42"> </span>exists, <span class="_ _42"> </span>as <span class="_ _42"> </span>long <span class="_ _42"> </span>as <span class="_ _23"> </span>at <span class="_ _42"> </span>least <span class="_ _42"> </span>one</div><div class="t m0 x32 h49 y25ed ff19 fs26 fc0 sc0 ls0 ws0">process <span class="_ _53"> </span>is <span class="_"> </span>in <span class="_ _e"> </span>the <span class="_ _e"> </span>group, <span class="_ _e"> </span>regar<span class="_ _0"></span>dless <span class="_ _e"> </span>of <span class="_"> </span>whether <span class="_ _53"> </span>the <span class="_"> </span>gr<span class="_ _0"></span>oup <span class="_ _e"> </span>leader <span class="_"> </span>terminates.<span class="_ _65"> </span>This <span class="_"> </span>is</div><div class="t m0 x32 h49 y25ee ff19 fs26 fc0 sc0 ls0 ws0">called <span class="_ _42"> </span>the <span class="_ _53"> </span>process <span class="_ _42"> </span>group <span class="_ _42"> </span>lifetime<span class="_ _3"></span><span class="ls161">—t<span class="_ _1"></span><span class="ls0">he <span class="_ _42"> </span>period <span class="_ _53"> </span>of <span class="_ _42"> </span>time <span class="_ _53"> </span>that <span class="_ _42"> </span>begins <span class="_ _53"> </span>when <span class="_ _42"> </span>the <span class="_ _53"> </span>group <span class="_ _42"> </span>is</span></span></div><div class="t m0 x32 h49 y25ef ff19 fs26 fc0 sc0 ls0 ws0">created and <span class="_ _2"></span>ends <span class="_ _3"></span>when <span class="_ _2"></span>the <span class="_ _2"></span>last <span class="_ _3"></span>remaining process <span class="_ _2"></span>leaves <span class="_ _2"></span>the <span class="_ _2"></span>group. <span class="_ _66"> </span>The<span class="_ _47"> </span>last <span class="_ _2"></span>remaining</div><div class="t m0 x32 h49 y25f0 ff19 fs26 fc0 sc0 ls0 ws0">process in the pr<span class="_ _0"></span>ocess gr<span class="_ _0"></span>oup can either terminate or enter some other process gr<span class="_ _0"></span>oup.</div><div class="t m0 x3f h49 y25f1 ff19 fs26 fc0 sc0 lsb0f ws0">Ap<span class="_ _8"></span><span class="lscc">ro<span class="_ _2"></span><span class="ls0">cess <span class="_ _3"></span>joins <span class="_ _2"></span>an <span class="_ _3"></span>existing <span class="_ _3"></span>process <span class="_ _2"></span>group <span class="_ _2"></span>or <span class="_ _2"></span>creates <span class="_ _2"></span>a <span class="_ _3"></span>new <span class="_ _3"></span>process <span class="_ _2"></span>group <span class="_ _2"></span>by <span class="_ _2"></span>calling</span></span></div><div class="t m0 x32 h4d y25f2 ff1a fs26 fc0 sc0 ls0 ws0">setpgid<span class="ff19 lsb10">.(<span class="_ _5b"></span><span class="ls0">In <span class="_ _2"></span>the next <span class="_ _2"></span>section, <span class="_ _2"></span>we’ll <span class="_ _2"></span>see that<span class="_ _47"> </span><span class="ff1a">setsid<span class="_ _66"> </span></span>also creates a <span class="_ _2"></span>new <span class="_ _2"></span>process group.)</span></span></div><div class="t m0 x3f h4e y25f3 ff1a fs28 fc0 sc0 ls0 ws0">#include &lt;unistd.h&gt;</div><div class="t m0 x3f h4e y25f4 ff1a fs28 fc0 sc0 ls0 ws0">int setpgid(pid_t<span class="_"> </span><span class="ff1b">pid</span><span class="ls1b6">,p<span class="_ _1d"></span><span class="ls0">id_t<span class="_"> </span><span class="ff1b">pgid</span>);</span></span></div><div class="t m0 x153 h7c y25f5 ff19 fs28 fc0 sc0 ls0 ws0">Returns: 0 if OK,<span class="_"> </span><span class="ff20">−</span>1<span class="_"> </span>on<span class="_"> </span>error</div><div class="t m0 x32 h60 y25f6 ff19 fs2c fc0 sc0 ls0 ws0">This <span class="_ _9"></span>function <span class="_ _3"></span>sets <span class="_ _9"></span>the <span class="_ _9"></span>process <span class="_ _3"></span>group <span class="_ _3"></span>ID <span class="_ _9"></span>to<span class="_ _45"> </span><span class="ff1b">pgid<span class="_ _45"> </span></span>in <span class="_ _3"></span>the <span class="_ _9"></span>process <span class="_ _3"></span>whose <span class="_ _9"></span>process <span class="_ _3"></span>ID <span class="_ _9"></span>equals</div><div class="t m0 x32 h60 y25f7 ff1b fs2c fc0 sc0 ls0 ws0">pid<span class="ff19 lsb11">.I<span class="_ _52"></span><span class="lsb12">ft<span class="_ _55"></span><span class="ls0">he <span class="_ _53"> </span>two <span class="_ _53"> </span>arguments <span class="_ _53"> </span>ar<span class="lsb12">ee<span class="_ _55"></span><span class="ls0">qual, <span class="_ _53"> </span>the <span class="_ _e"> </span>process <span class="_ _42"> </span>speciﬁed <span class="_ _53"> </span>by<span class="_ _4b"> </span><span class="ff1b">pid<span class="_ _4b"> </span></span>becomes <span class="_ _53"> </span>a <span class="_ _53"> </span>process</span></span></span></span></span></div><div class="t m0 x32 h60 y25f8 ff19 fs2c fc0 sc0 ls0 ws0">group leader<span class="_ _6"></span><span class="lsb13">.I<span class="_ _4a"></span><span class="ls0">f<span class="_"> </span><span class="ff1b">pid<span class="_"> </span></span>is 0, the process ID of the caller <span class="_ _2"></span>is used.<span class="_ _46"> </span>Also, if<span class="_"> </span><span class="ff1b">pgid<span class="_"> </span></span>is 0, <span class="_ _2"></span>the process</span></span></div><div class="t m0 x32 h60 y25f9 ff19 fs2c fc0 sc0 ls0 ws0">ID speciﬁed by<span class="_"> </span><span class="ff1b">pid<span class="_"> </span></span>is used as the process gr<span class="_ _0"></span>oup ID.</div><div class="t m0 x3f h55 y25fa ff19 fs2c fc0 sc0 lsb14 ws0">Ap<span class="_ _62"></span><span class="ls150">ro<span class="_ _2"></span><span class="ls0">cess <span class="_ _47"> </span>can <span class="_ _45"> </span>set <span class="_ _47"> </span>the <span class="_ _45"> </span>process <span class="_ _47"> </span>group <span class="_ _47"> </span>ID <span class="_ _47"> </span>of <span class="_ _45"> </span>only <span class="_ _47"> </span>itself <span class="_ _47"> </span>or <span class="_ _45"> </span>any <span class="_ _47"> </span>of <span class="_ _45"> </span>its <span class="_ _47"> </span>children.</span></span></div><div class="t m0 x32 h55 y25fb ff19 fs2c fc0 sc0 ls0 ws0">Furthermore, <span class="_ _2"></span>it <span class="_ _9"></span>can’t <span class="_ _3"></span>change <span class="_ _3"></span>the <span class="_ _9"></span>process <span class="_ _2"></span>group <span class="_ _3"></span>ID <span class="_ _9"></span>of <span class="_ _3"></span>one <span class="_ _3"></span>of <span class="_ _9"></span>its <span class="_ _3"></span>children <span class="_ _3"></span>after <span class="_ _3"></span>that <span class="_ _9"></span>child</div><div class="t m0 x32 h54 y25fc ff19 fs2c fc0 sc0 ls0 ws0">has called one of the<span class="_"> </span><span class="ff1a">exec<span class="_ _80"> </span></span>functions.</div><div class="t m0 x3f h54 y25fd ff19 fs2c fc0 sc0 ls0 ws0">In <span class="_ _2"></span>most <span class="_ _3"></span>job-control <span class="_ _3"></span>shells, <span class="_ _3"></span>this <span class="_ _3"></span>function <span class="_ _2"></span>is <span class="_ _3"></span>called <span class="_ _3"></span>after <span class="_ _3"></span>a<span class="_ _47"> </span><span class="ff1a">fork<span class="_ _47"> </span></span>to <span class="_ _3"></span>have <span class="_ _3"></span>the <span class="_ _3"></span>parent <span class="_ _2"></span>set</div><div class="t m0 x32 h55 y25fe ff19 fs2c fc0 sc0 ls0 ws0">the <span class="_ _9"></span>process <span class="_ _9"></span>group <span class="_ _9"></span>ID <span class="_ _9"></span>of <span class="_ _23"></span>the <span class="_ _9"></span>child, <span class="_ _23"></span>and <span class="_ _9"></span>to <span class="_ _9"></span>have <span class="_ _23"></span>the <span class="_ _9"></span>child <span class="_ _23"></span>set <span class="_ _9"></span>its <span class="_ _9"></span>own <span class="_ _23"></span>process <span class="_ _9"></span>group <span class="_ _3"></span>ID.</div><div class="t m0 x32 h55 y25ff ff19 fs2c fc0 sc0 ls0 ws0">One <span class="_ _3"></span>of <span class="_ _9"></span>these <span class="_ _9"></span>calls <span class="_ _9"></span>is <span class="_ _3"></span>redundant, <span class="_ _9"></span>but <span class="_ _3"></span>by <span class="_ _9"></span>doing <span class="_ _9"></span>both, <span class="_ _9"></span>we <span class="_ _3"></span>ar<span class="lsb15">eg<span class="_ _b"></span><span class="ls0">uaranteed <span class="_ _9"></span>that <span class="_ _9"></span>the <span class="_ _3"></span>child <span class="_ _9"></span>is</span></span></div><div class="t m0 x32 h55 y2600 ff19 fs2c fc0 sc0 ls0 ws0">placed into <span class="_ _2"></span>its own <span class="_ _2"></span>process group befor<span class="lsb16">ee<span class="_ _4f"></span><span class="ls0">ither process assumes <span class="_ _2"></span>that this <span class="_ _2"></span>has happened.</span></span></div><div class="t m0 x32 h55 y2601 ff19 fs2c fc0 sc0 ls0 ws0">If <span class="_ _23"> </span>we <span class="_ _23"> </span>didn’t <span class="_ _23"> </span>do <span class="_ _42"> </span>this, <span class="_ _23"> </span>we <span class="_ _23"> </span>would <span class="_ _23"> </span>have <span class="_ _42"> </span>a <span class="_ _23"></span>race <span class="_ _23"> </span>condition, <span class="_ _23"> </span>since <span class="_ _42"> </span>the <span class="_ _23"></span>child’s <span class="_ _23"> </span>process <span class="_ _23"></span>group</div><div class="t m0 x32 h55 y2602 ff19 fs2c fc0 sc0 ls0 ws0">membership would depend on which process executes ﬁrst.</div><div class="t m0 x3f h55 y2603 ff19 fs2c fc0 sc0 ls0 ws0">When <span class="_ _53"> </span>we <span class="_ _53"> </span>discuss <span class="_ _53"> </span>signals, <span class="_ _e"> </span>we’ll <span class="_ _53"> </span>see <span class="_ _53"> </span>how <span class="_ _53"> </span>we <span class="_ _e"> </span>can <span class="_ _53"> </span>send <span class="_ _53"> </span>a <span class="_ _53"> </span>signal <span class="_ _e"> </span>to <span class="_ _53"> </span>either <span class="_ _53"> </span>a <span class="_ _53"> </span>single</div><div class="t m0 x32 h55 y2604 ff19 fs2c fc0 sc0 ls0 ws0">process (identiﬁed <span class="_ _3"></span>by <span class="_ _2"></span>its <span class="_ _3"></span>process <span class="_ _2"></span>ID) <span class="_ _2"></span>or <span class="_ _3"></span>a <span class="_ _2"></span>process <span class="_ _2"></span>group <span class="_ _2"></span>(identiﬁed <span class="_ _2"></span>by <span class="_ _3"></span>its <span class="_ _2"></span>process <span class="_ _2"></span>group</div><div class="t m0 x32 h54 y2605 ff19 fs2c fc0 sc0 ls0 ws0">ID). <span class="_ _35"> </span>Similarly<span class="_ _6"></span><span class="lsb17">,t<span class="_ _43"></span><span class="ls0">he<span class="_ _35"> </span><span class="ff1a">waitpid<span class="_ _44"> </span></span>function <span class="_ _23"> </span>from <span class="_ _42"> </span>Section <span class="_ _23"> </span>8.6 <span class="_ _42"> </span>lets <span class="_ _42"> </span>us <span class="_ _42"> </span>wait <span class="_ _42"> </span>for <span class="_ _42"> </span>either <span class="_ _23"> </span>a <span class="_ _42"> </span>single</span></span></div><div class="t m0 x32 h55 y2606 ff19 fs2c fc0 sc0 ls0 ws0">process or one pr<span class="_ _0"></span>ocess fr<span class="_ _0"></span>om a speciﬁed process gr<span class="_ _0"></span>oup.</div></div><div class="pi" data-data='{"ctm":[2.100000,0.000000,0.000000,2.100000,-115.668004,-156.491993]}'></div></div>
