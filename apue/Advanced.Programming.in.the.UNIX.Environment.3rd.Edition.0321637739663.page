<div id="pf297" class="pf w4 h1f" data-page-no="297"><div class="pc pc297 w4 h1f"><img class="bi x0 y0 w3 h4" alt="" src="apue/bg297.png"/><div class="t m0 x31 h2 y8e ff1 fs0 fc0 sc0 ls0 ws0"><span class="fc1 sc0">ptg10805159</span></div><div class="t m0 x32 h47 y25f ff1e fsb fc0 sc0 ls0 ws0">17</div><div class="t m0 x32 h20 y8f ff15 fs2 fc0 sc0 ls0 ws0">Adv<span class="_ _6"></span>anced <span class="_"> </span>IPC</div><div class="t m0 x35 h48 y1461 ff16 fs1 fc0 sc0 ls0 ws0">17.1 <span class="_ _93"> </span>Introduction</div><div class="t m0 x32 h28 y1463 ff19 fs5 fc0 sc0 ls0 ws0">In <span class="_ _9"></span>the <span class="_ _9"></span>previous <span class="_ _9"></span>two <span class="_ _9"></span>chapters, <span class="_ _9"></span>we <span class="_ _23"></span>discussed <span class="_ _9"></span>various <span class="_ _9"></span>forms <span class="_ _9"></span>of <span class="_ _23"></span>IPC, <span class="_ _9"></span>including <span class="_ _9"></span>pipes <span class="_ _9"></span>and</div><div class="t m0 x32 h28 y13d ff19 fs5 fc0 sc0 ls0 ws0">sockets. <span class="_"> </span>In<span class="_ _66"> </span>this <span class="_ _2"></span>chapter<span class="_ _1"></span>,<span class="_"> </span>we<span class="_ _47"> </span>look at <span class="_ _2"></span>an advanced <span class="_ _2"></span>form <span class="_ _2"></span>of <span class="_ _2"></span>IPC<span class="_ _9"></span><span class="ls37">—t<span class="_ _6"></span><span class="ls0">he <span class="_ _2"></span>UNIX domain <span class="_ _2"></span>socket</span></span></div><div class="t m0 x32 h28 y13e ff19 fs5 fc0 sc0 ls0 ws0">mechanism <span class="_ _a"></span>— <span class="_ _a"></span>and<span class="_ _47"> </span>see <span class="_ _2"></span>what <span class="_ _3"></span>we <span class="_ _2"></span>can <span class="_ _3"></span>do <span class="_ _2"></span>with <span class="_ _3"></span>it.<span class="_ _61"> </span><span class="ls62e">Wi<span class="_ _3"></span></span>th <span class="_ _2"></span>this <span class="_ _3"></span>form <span class="_ _2"></span>of <span class="_ _3"></span>IPC, <span class="_ _2"></span>we <span class="_ _2"></span>can <span class="_ _3"></span>pass <span class="_ _2"></span>open</div><div class="t m0 x32 h28 y13f ff19 fs5 fc0 sc0 ls0 ws0">ﬁle <span class="_ _45"> </span>descriptors <span class="_ _45"> </span>between <span class="_ _35"> </span>processes <span class="_ _45"> </span>running <span class="_ _45"> </span>on <span class="_ _45"> </span>the <span class="_ _45"> </span>same <span class="_ _35"> </span>computer <span class="_ _45"> </span>system, <span class="_ _45"> </span>server</div><div class="t m0 x32 h28 y140 ff19 fs5 fc0 sc0 ls0 ws0">processes <span class="_ _9"></span>can <span class="_ _23"></span>associate <span class="_ _9"></span>names <span class="_ _23"></span>with <span class="_ _9"></span>their <span class="_ _23"> </span>ﬁle <span class="_ _23"></span>descriptors, <span class="_ _9"></span>and <span class="_ _23"></span>client <span class="_ _9"></span>processes <span class="_ _23"></span>running</div><div class="t m0 x32 h28 y141 ff19 fs5 fc0 sc0 ls0 ws0">on <span class="_ _2"></span>the <span class="_ _3"></span>same <span class="_ _3"></span>system <span class="_ _2"></span>can <span class="_ _3"></span>use <span class="_ _3"></span>these <span class="_ _2"></span>names <span class="_ _3"></span>to <span class="_ _3"></span>rendezvous with <span class="_ _3"></span>the <span class="_ _3"></span>servers.<span class="_ _61"> </span><span class="ls72">We<span class="_ _23"></span></span>’ll <span class="_ _2"></span>also <span class="_ _3"></span>see</div><div class="t m0 x32 h28 y142 ff19 fs5 fc0 sc0 ls0 ws0">how the operating system provides a unique IPC channel per client.</div><div class="t m0 x35 h48 y122 ff16 fs1 fc0 sc0 ls0 ws0">17.2 <span class="_ _93"> </span>UNIX<span class="_ _54"> </span>Domain <span class="_"> </span>Sockets</div><div class="t m0 x32 h28 y124 ff19 fs5 fc0 sc0 ls0 ws0">UNIX <span class="_ _42"> </span>domain <span class="_ _42"> </span>sockets <span class="_ _42"> </span>ar<span class="lsfb7">eu<span class="_ _c"></span><span class="ls0">sed <span class="_ _42"> </span>to <span class="_ _42"> </span>communicate <span class="_ _42"> </span>with <span class="_ _42"> </span>processes <span class="_ _23"> </span>running <span class="_ _42"> </span>on <span class="_ _42"> </span>the <span class="_ _42"> </span>same</span></span></div><div class="t m0 x32 h28 y125 ff19 fs5 fc0 sc0 ls0 ws0">machine. <span class="_ _45"> </span>Although<span class="_ _45"> </span>Internet <span class="_ _3"></span>domain <span class="_ _9"></span>sockets <span class="_ _9"></span>can <span class="_ _9"></span>be <span class="_ _9"></span>used <span class="_ _9"></span>for <span class="_ _9"></span>this <span class="_ _9"></span>same <span class="_ _9"></span>purpose, <span class="_ _9"></span>UNIX</div><div class="t m0 x32 h28 y126 ff19 fs5 fc0 sc0 ls0 ws0">domain <span class="_ _3"></span>sockets <span class="_ _3"></span>ar<span class="ls139b">em<span class="_ _b"></span><span class="ls0">or<span class="ls139b">ee<span class="_ _8"></span><span class="ls16">fﬁ<span class="_ _2"></span><span class="ls0">cient. <span class="_ _47"> </span>UNIX<span class="_ _47"> </span>domain <span class="_ _3"></span>sockets <span class="_ _9"></span>only <span class="_ _3"></span>copy <span class="_ _3"></span>data; <span class="_ _3"></span>they <span class="_ _3"></span>have <span class="_ _3"></span>no</span></span></span></span></span></div><div class="t m0 x32 h28 y127 ff19 fs5 fc0 sc0 ls0 ws0">protocol processing to <span class="_ _2"></span>perform, <span class="_ _2"></span>no <span class="_ _2"></span>network <span class="_ _2"></span>headers <span class="_ _2"></span>to <span class="_ _2"></span>add <span class="_ _2"></span>or <span class="_ _2"></span>remove, no <span class="_ _2"></span>checksums <span class="_ _2"></span>to</div><div class="t m0 x32 h28 y128 ff19 fs5 fc0 sc0 ls0 ws0">calculate, no sequence numbers to generate, and no acknowledgements to send.</div><div class="t m0 x3f h28 y129 ff19 fs5 fc0 sc0 ls0 ws0">UNIX <span class="_ _53"> </span>domain <span class="_ _e"> </span>sockets <span class="_ _e"> </span>provide <span class="_ _53"> </span>both <span class="_ _e"> </span>stream <span class="_ _53"> </span>and <span class="_ _e"> </span>datagram <span class="_ _53"> </span>interfaces.<span class="_ _48"> </span>The <span class="_ _e"> </span>UNIX</div><div class="t m0 x32 h28 y12a ff19 fs5 fc0 sc0 ls0 ws0">domain <span class="_ _9"></span>datagram <span class="_ _9"></span>service <span class="_ _9"></span>is <span class="_ _9"></span>reliable, <span class="_ _3"></span>however<span class="_ _1"></span><span class="ls139c">.M<span class="_ _62"></span><span class="ls0">essages <span class="_ _9"></span>ar<span class="ls139d">en<span class="_ _b"></span><span class="ls0">either <span class="_ _9"></span>lost <span class="_ _9"></span>nor <span class="_ _9"></span>delivered</span></span></span></span></div><div class="t m0 x32 h28 y12b ff19 fs5 fc0 sc0 ls0 ws0">out of <span class="_ _2"></span>order<span class="_ _6"></span><span class="ls139e">.U<span class="_ _4a"></span><span class="ls0">NIX domain <span class="_ _2"></span>sockets <span class="_ _2"></span>ar<span class="ls139f">el<span class="_ _4f"></span><span class="ls0">ike <span class="_ _2"></span>a <span class="_ _2"></span>cross between <span class="_ _2"></span>sockets <span class="_ _2"></span>and <span class="_ _2"></span>pipes.<span class="_ _61"> </span><span class="ls72">Yo<span class="_ _9"></span><span class="ls139f">uc<span class="_ _4f"></span><span class="ls0">an</span></span></span></span></span></span></span></div><div class="t m0 x32 h2c y12c ff19 fs5 fc0 sc0 ls0 ws0">use <span class="_ _3"></span>the <span class="_ _3"></span>network-oriented <span class="_ _3"></span>socket <span class="_ _3"></span>interfaces <span class="_ _9"></span>with <span class="_ _3"></span>them, <span class="_ _3"></span>or <span class="_ _3"></span>you <span class="_ _3"></span>can <span class="_ _3"></span>use <span class="_ _9"></span>the<span class="_ _47"> </span><span class="ff1a">socketpair</span></div><div class="t m0 x32 h28 y12d ff19 fs5 fc0 sc0 ls0 ws0">function to create a pair of unnamed, connected, UNIX domain sockets.</div><div class="t m0 x1c0 h23 y12e ff18 fs0 fc0 sc0 ls0 ws0">629</div><a class="l" href="#pf12" data-dest-detail='[18,"XYZ",50,757,1]'><div class="d m1" style="border-style:none;position:absolute;left:157.497886px;bottom:975.452099px;width:178.124008px;height:134.895020px;background-color:rgba(255,255,255,0.000001);"></div></a><a class="l" href="#pf12" data-dest-detail='[18,"XYZ",50,757,1]'><div class="d m1" style="border-style:none;position:absolute;left:80.891993px;bottom:680.626788px;width:105.756005px;height:19.680023px;background-color:rgba(255,255,255,0.000001);"></div></a><a class="l" href="#pf12" data-dest-detail='[18,"XYZ",50,757,1]'><div class="d m1" style="border-style:none;position:absolute;left:80.892201px;bottom:390.826788px;width:167.795898px;height:19.680023px;background-color:rgba(255,255,255,0.000001);"></div></a></div><div class="pi" data-data='{"ctm":[2.100000,0.000000,0.000000,2.100000,-115.668004,-156.491993]}'></div></div>
