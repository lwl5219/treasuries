<div id="pf15b" class="pf w4 h1f" data-page-no="15b"><div class="pc pc15b w4 h1f"><img class="bi x0 y0 w3 h4" alt="" src="apue/bg15b.png"/><div class="t m0 x31 h2 y8e ff1 fs0 fc0 sc0 ls0 ws0"><span class="fc1 sc0">ptg10805159</span></div><div class="t m0 x32 h47 y25f ff1e fsb fc0 sc0 ls0 ws0">10</div><div class="t m0 x32 h20 y8f ff15 fs2 fc0 sc0 ls0 ws0">Signals</div><div class="t m0 x35 h48 y2871 ff16 fs1 fc0 sc0 ls0 ws0">10.1 <span class="_ _93"> </span>Introduction</div><div class="t m0 x32 h28 y2872 ff19 fs5 fc0 sc0 ls0 ws0">Signals ar<span class="lsb72">es<span class="_ _4f"></span><span class="ls0">oftwar<span class="lsb73">ei<span class="_ _4f"></span><span class="ls0">nterrupts. <span class="_ _66"> </span>Most<span class="_ _66"> </span>nontrivial <span class="_ _2"></span>application programs need <span class="_ _2"></span>to <span class="_ _2"></span>deal with</span></span></span></span></div><div class="t m0 x32 h28 y2873 ff19 fs5 fc0 sc0 ls0 ws0">signals. <span class="_ _45"> </span>Signals<span class="_ _45"> </span>pr<span class="_ _0"></span>ovide <span class="_ _9"></span>a <span class="_ _9"></span>way <span class="_ _9"></span>of <span class="_ _9"></span>handling <span class="_ _9"></span>asynchronous <span class="_ _3"></span>events<span class="_ _9"></span><span class="ls37">—f<span class="_ _6"></span><span class="ls0">or <span class="_ _9"></span>example, <span class="_ _9"></span>a <span class="_ _9"></span>user</span></span></div><div class="t m0 x32 h28 y2874 ff19 fs5 fc0 sc0 ls0 ws0">at <span class="_ _e"> </span>a <span class="_"> </span>terminal <span class="_ _53"> </span>typing <span class="_"> </span>the <span class="_ _53"> </span>interrupt <span class="_ _e"> </span>key <span class="_"> </span>to <span class="_ _53"> </span>stop <span class="_"> </span>a <span class="_ _53"> </span>program <span class="_ _e"> </span>or <span class="_"> </span>the <span class="_ _53"> </span>next <span class="_"> </span>pr<span class="_ _1"></span>ogram <span class="_"> </span>in <span class="_ _e"> </span>a</div><div class="t m0 x32 h28 y2875 ff19 fs5 fc0 sc0 ls0 ws0">pipeline terminating prematur<span class="_ _0"></span>ely<span class="_ _4"></span>.</div><div class="t m0 x3f h28 y2876 ff19 fs5 fc0 sc0 ls0 ws0">Signals <span class="_ _23"> </span>have <span class="_ _42"> </span>been <span class="_ _23"> </span>provided <span class="_ _23"> </span>since <span class="_ _23"> </span>the <span class="_ _42"> </span>early <span class="_ _23"> </span>versions <span class="_ _42"> </span>of <span class="_ _23"> </span>the <span class="_ _42"> </span>UNIX <span class="_ _23"> </span>System, <span class="_ _42"> </span>but <span class="_ _23"> </span>the</div><div class="t m0 x32 h28 y2877 ff19 fs5 fc0 sc0 ls0 ws0">signal <span class="_ _9"></span>model <span class="_ _9"></span>provided <span class="_ _9"></span>with <span class="_ _9"></span>systems <span class="_ _23"></span>such <span class="_ _9"></span>as <span class="_ _9"></span>V<span class="_ _6"></span>ersion <span class="_ _9"></span>7 <span class="_ _9"></span>was <span class="_ _23"></span>not <span class="_ _9"></span>reliable. <span class="_ _45"> </span>Signals<span class="_ _45"> </span>could</div><div class="t m0 x32 h28 y2878 ff19 fs5 fc0 sc0 ls0 ws0">get <span class="_ _23"> </span>lost, <span class="_ _42"> </span>and <span class="_ _42"> </span>it <span class="_ _23"> </span>was <span class="_ _42"> </span>difﬁcult <span class="_ _23"></span>for <span class="_ _23"> </span>a <span class="_ _42"> </span>process <span class="_ _23"> </span>to <span class="_ _42"> </span>turn <span class="_ _23"> </span>of<span class="lsb74">fs<span class="_ _43"></span><span class="ls0">elected <span class="_ _23"> </span>signals <span class="_ _42"> </span>when <span class="_ _42"> </span>executing</span></span></div><div class="t m0 x32 h28 y2879 ff19 fs5 fc0 sc0 ls0 ws0">critical <span class="_ _e"> </span>regions <span class="_ _53"> </span>of <span class="_ _e"> </span>code.<span class="_ _48"> </span>Both <span class="_ _e"> </span>4.3BSD <span class="_"> </span>and <span class="_ _53"> </span>SVR3 <span class="_ _e"> </span>made <span class="_ _e"> </span>changes <span class="_ _e"> </span>to <span class="_ _e"> </span>the <span class="_"> </span>signal <span class="_ _53"> </span>model,</div><div class="t m0 x32 h29 y287a ff19 fs5 fc0 sc0 ls0 ws0">adding <span class="_ _23"> </span>what <span class="_ _42"> </span>ar<span class="lsb75">ec<span class="_ _43"></span><span class="ls0">alled<span class="_ _35"> </span><span class="ff1b ls16">re<span class="ls0">liable <span class="_ _42"> </span>signals</span></span><span class="lsb76">.B<span class="_ _7"></span><span class="ls0">ut <span class="_ _42"> </span>the <span class="_ _23"> </span>changes <span class="_ _42"> </span>made <span class="_ _23"> </span>by <span class="_ _42"> </span>Berkeley <span class="_ _42"> </span>and <span class="_ _23"> </span>A<span class="_ _1"></span>T&amp;T</span></span></span></span></div><div class="t m0 x32 h28 y287b ff19 fs5 fc0 sc0 ls0 ws0">wer<span class="lsb77">ei<span class="_ _b"></span><span class="ls0">ncompatible. <span class="_ _47"> </span>Fortunately<span class="_ _6"></span><span class="lsb77">,P<span class="_ _b"></span><span class="ls0">OSIX.1 <span class="_ _9"></span>standardized <span class="_ _3"></span>the <span class="_ _9"></span>reliable-signal <span class="_ _2"></span>routines, <span class="_ _3"></span>and</span></span></span></span></div><div class="t m0 x32 h28 y287c ff19 fs5 fc0 sc0 ls0 ws0">that is what we describe here.</div><div class="t m0 x3f h28 y287d ff19 fs5 fc0 sc0 ls0 ws0">In <span class="_ _2"></span>this <span class="_ _3"></span>chapter<span class="_ _6"></span>,<span class="_ _47"> </span>we<span class="_ _47"> </span>start <span class="_ _2"></span>with <span class="_ _3"></span>an <span class="_ _2"></span>overview <span class="_ _3"></span>of <span class="_ _2"></span>signals <span class="_ _3"></span>and <span class="_ _2"></span>a <span class="_ _3"></span>description <span class="_ _2"></span>of <span class="_ _3"></span>what <span class="_ _2"></span>each</div><div class="t m0 x32 h28 y287e ff19 fs5 fc0 sc0 ls0 ws0">signal is normally used for<span class="_ _1"></span><span class="lsb78">.T<span class="_ _4a"></span><span class="ls0">hen we look at the problems with earlier implementations.</span></span></div><div class="t m0 x32 h28 y287f ff19 fs5 fc0 sc0 ls0 ws0">It is often important to <span class="_ _2"></span>understand what is wrong with an implementation befor<span class="lsb79">es<span class="_ _d"></span><span class="ls0">eeing</span></span></div><div class="t m0 x32 h28 y2880 ff19 fs5 fc0 sc0 ls0 ws0">how <span class="_"> </span>to <span class="_"> </span>do <span class="_ _e"> </span>things <span class="_"> </span>correctly<span class="_ _4"></span><span class="lsb7a">.T<span class="_ _5d"></span><span class="ls0">his <span class="_"> </span>chapter <span class="_"> </span>contains <span class="_ _e"> </span>numerous <span class="_"> </span>examples <span class="_ _e"> </span>that <span class="_"> </span>ar<span class="lsb7b">en<span class="_ _5b"></span><span class="ls0">ot</span></span></span></span></div><div class="t m0 x32 h28 y2881 ff19 fs5 fc0 sc0 ls0 ws0">entirely corr<span class="_ _0"></span>ect and a discussion of the defects.</div><div class="t m0 x35 h48 y127 ff16 fs1 fc0 sc0 ls0 ws0">10.2 <span class="_ _93"> </span>Signal<span class="_ _54"> </span>Concepts</div><div class="t m0 x32 h2c y2882 ff19 fs5 fc0 sc0 ls0 ws0">First, every signal has a name.<span class="_ _59"> </span>These names all begin with the three characters<span class="_"> </span><span class="ff1a">SIG</span><span class="lsb7c">.F<span class="_ _4a"></span><span class="ls0">or</span></span></div><div class="t m0 x32 h2c y2883 ff19 fs5 fc0 sc0 ls0 ws0">example,<span class="_ _47"> </span><span class="ff1a">SIGABRT<span class="_ _47"> </span></span>is <span class="_ _3"></span>the <span class="_ _3"></span>abort <span class="_ _3"></span>signal <span class="_ _3"></span>that <span class="_ _3"></span>is <span class="_ _9"></span>generated <span class="_ _2"></span>when <span class="_ _9"></span>a <span class="_ _2"></span>process <span class="_ _3"></span>calls <span class="_ _3"></span>the<span class="_ _47"> </span><span class="ff1a">abort</span></div><div class="t m0 x32 h2c y2884 ff19 fs5 fc0 sc0 ls0 ws0">function.<span class="_ _65"> </span><span class="ff1a">SIGALRM<span class="_ _59"> </span></span>is <span class="_ _e"> </span>the <span class="_ _e"> </span>alarm <span class="_"> </span>signal <span class="_ _53"> </span>that <span class="_ _e"> </span>is <span class="_"> </span>generated <span class="_ _53"> </span>when <span class="_ _e"> </span>the <span class="_ _e"> </span>timer <span class="_"> </span>set <span class="_ _53"> </span>by <span class="_ _e"> </span>the</div><div class="t m0 x32 h2c y2885 ff1a fs5 fc0 sc0 ls0 ws0">alarm<span class="_ _66"> </span><span class="ff19">function <span class="_ _3"></span>goes <span class="_ _2"></span>off. <span class="_ _66"> </span>V<span class="_ _6"></span>ersion <span class="_ _2"></span>7 <span class="_ _2"></span>had <span class="_ _2"></span>15 <span class="_ _3"></span>differ<span class="_ _0"></span>ent <span class="_ _2"></span>signals; <span class="_ _2"></span>SVR4 <span class="_ _2"></span>and <span class="_ _3"></span>4.4BSD <span class="_ _2"></span>both <span class="_ _2"></span>had</span></div><div class="t m0 x32 h28 y2886 ff19 fs5 fc0 sc0 ls0 ws0">31 <span class="_ _42"> </span>differ<span class="_ _0"></span>ent <span class="_ _42"> </span>signals.<span class="_ _51"> </span>FreeBSD <span class="_ _42"> </span>8.0 <span class="_ _42"> </span>supports <span class="_ _42"> </span>32 <span class="_ _42"> </span>differ<span class="_ _0"></span>ent <span class="_ _42"> </span>signals.<span class="_ _51"> </span>Mac <span class="_ _42"> </span>OS <span class="_ _42"> </span>X <span class="_ _42"> </span>10.6.8 <span class="_ _42"> </span>and</div><div class="t m0 x1c0 h23 y12e ff18 fs0 fc0 sc0 ls0 ws0">313</div><a class="l" href="#pff" data-dest-detail='[15,"XYZ",50,757,1]'><div class="d m1" style="border-style:none;position:absolute;left:157.497886px;bottom:975.452099px;width:82.812011px;height:134.895020px;background-color:rgba(255,255,255,0.000001);"></div></a><a class="l" href="#pff" data-dest-detail='[15,"XYZ",50,757,1]'><div class="d m1" style="border-style:none;position:absolute;left:80.891993px;bottom:763.786801px;width:105.756005px;height:19.679993px;background-color:rgba(255,255,255,0.000001);"></div></a><a class="l" href="#pff" data-dest-detail='[15,"XYZ",50,757,1]'><div class="d m1" style="border-style:none;position:absolute;left:80.891576px;bottom:264.826820px;width:133.355202px;height:19.679993px;background-color:rgba(255,255,255,0.000001);"></div></a></div><div class="pi" data-data='{"ctm":[2.100000,0.000000,0.000000,2.100000,-115.668004,-156.491993]}'></div></div>
