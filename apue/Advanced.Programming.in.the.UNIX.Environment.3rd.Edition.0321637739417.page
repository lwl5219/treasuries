<div id="pf1a1" class="pf w4 h1f" data-page-no="1a1"><div class="pc pc1a1 w4 h1f"><img class="bi x0 y0 w3 h4" alt="" src="bg1a1.png"/><div class="t m0 x31 h2 y8e ff1 fs0 fc0 sc0 ls0 ws0"><span class="fc1 sc0">ptg10805159</span></div><div class="t m0 x32 h47 y25f ff1e fsb fc0 sc0 ls0 ws0">11</div><div class="t m0 x32 h20 y8f ff15 fs2 fc0 sc0 ls0 ws0">Threads</div><div class="t m0 x35 h48 y30d3 ff16 fs1 fc0 sc0 ls0 ws0">11.1 <span class="_ _93"> </span>Introduction</div><div class="t m0 x32 h28 y30d4 ff19 fs5 fc0 sc0 ls72 ws0">We <span class="_ _35"> </span>d<span class="_ _9"></span><span class="ls0">iscussed <span class="_ _e"> </span>processes <span class="_ _53"> </span>in <span class="_ _e"> </span>earlier <span class="_ _e"> </span>chapters.<span class="_ _48"> </span></span>We <span class="_ _35"> </span>l<span class="_ _9"></span><span class="ls0">earned <span class="_ _e"> </span>about <span class="_ _e"> </span>the <span class="_ _e"> </span>environment <span class="_ _53"> </span>of <span class="_ _e"> </span>a</span></div><div class="t m0 x32 h28 y30d5 ff19 fs5 fc0 sc0 ls0 ws0">UNIX <span class="_ _3"></span>process, <span class="_ _3"></span>the <span class="_ _3"></span>relationships <span class="_ _3"></span>between <span class="_ _9"></span>processes, <span class="_ _3"></span>and <span class="_ _3"></span>ways <span class="_ _9"></span>to <span class="_ _3"></span>control <span class="_ _3"></span>processes. <span class="_ _47"> </span>W<span class="_ _6"></span>e</div><div class="t m0 x32 h28 y30d6 ff19 fs5 fc0 sc0 ls0 ws0">saw that a limited amount of sharing can occur between related pr<span class="_ _0"></span>ocesses.</div><div class="t m0 x3f h28 y30d7 ff19 fs5 fc0 sc0 ls0 ws0">In <span class="_ _9"></span>this <span class="_ _9"></span>chapter<span class="_ _1"></span><span class="lsd73">,w<span class="_ _b"></span><span class="ls0">e’ll <span class="_ _9"></span>look <span class="_ _9"></span>inside <span class="_ _23"></span>a <span class="_ _9"></span>process <span class="_ _3"></span>further <span class="_ _23"></span>to <span class="_ _9"></span>see <span class="_ _9"></span>how <span class="_ _9"></span>we <span class="_ _23"></span>can <span class="_ _9"></span>use <span class="_ _9"></span>multiple</span></span></div><div class="t m0 x32 h29 y30d8 ff1b fs5 fc0 sc0 ls0 ws0">threads of <span class="_ _2"></span>control<span class="_"> </span><span class="ff19">(or <span class="_ _2"></span>simply<span class="_ _66"> </span></span>threads<span class="ff19">)<span class="_ _66"> </span>to<span class="_ _66"> </span>perform <span class="_ _2"></span>multiple <span class="_ _2"></span>tasks <span class="_ _2"></span>within <span class="_ _2"></span>the <span class="_ _2"></span>environment of</span></div><div class="t m0 x32 h28 y30d9 ff19 fs5 fc0 sc0 lsd74 ws0">as<span class="_ _43"></span><span class="ls0">ingle <span class="_ _23"> </span>process. <span class="_ _35"> </span>All<span class="_ _35"> </span>threads <span class="_ _23"> </span>within <span class="_ _42"> </span>a <span class="_ _23"> </span>single <span class="_ _42"> </span>process <span class="_ _23"></span>have <span class="_ _23"> </span>access <span class="_ _42"> </span>to <span class="_ _23"> </span>the <span class="_ _42"> </span>same <span class="_ _23"> </span>process</span></div><div class="t m0 x32 h28 y30da ff19 fs5 fc0 sc0 ls0 ws0">components, such as ﬁle descriptors and memory<span class="_ _4"></span>.</div><div class="t m0 x3f h28 y30db ff19 fs5 fc0 sc0 ls0 ws0">Anytime <span class="_ _3"></span>you <span class="_ _3"></span>try <span class="_ _3"></span>to <span class="_ _3"></span>shar<span class="lsd75">eas<span class="_ _b"></span><span class="ls0">ingle <span class="_ _3"></span>resource <span class="_ _2"></span>among <span class="_ _3"></span>multiple <span class="_ _3"></span>users, <span class="_ _3"></span>you <span class="_ _3"></span>have <span class="_ _3"></span>to <span class="_ _3"></span>deal</span></span></div><div class="t m0 x32 h28 y30dc ff19 fs5 fc0 sc0 ls0 ws0">with <span class="_ _45"> </span>consistency<span class="_ _4"></span><span class="lsd76">.W<span class="_ _184"></span><span class="ls0">e’ll <span class="_ _45"> </span>conclude <span class="_ _45"> </span>this <span class="_ _45"> </span>chapter <span class="_ _45"> </span>with <span class="_ _45"> </span>a <span class="_ _45"> </span>look <span class="_ _45"> </span>at <span class="_ _45"> </span>the <span class="_ _45"> </span>synchronization</span></span></div><div class="t m0 x32 h28 y30dd ff19 fs5 fc0 sc0 ls0 ws0">mechanisms <span class="_ _2"></span>available <span class="_ _3"></span>to <span class="_ _2"></span>prevent <span class="_ _2"></span>multiple <span class="_ _2"></span>threads <span class="_ _2"></span>from <span class="_ _2"></span>viewing <span class="_ _3"></span>inconsistencies <span class="_ _2"></span>in <span class="_ _3"></span>their</div><div class="t m0 x32 h28 y30de ff19 fs5 fc0 sc0 ls0 ws0">shared r<span class="_ _0"></span>esour<span class="_ _0"></span>ces.</div><div class="t m0 x35 h48 y30df ff16 fs1 fc0 sc0 ls0 ws0">11.2 <span class="_ _93"> </span>Thread<span class="_ _54"> </span>Concepts</div><div class="t m0 x32 h28 y30e0 ff19 fs5 fc0 sc0 lsd77 ws0">At<span class="_ _43"></span><span class="ls0">ypical <span class="_ _23"> </span>UNIX <span class="_ _42"> </span>process <span class="_ _42"> </span>can <span class="_ _42"> </span>be <span class="_ _42"> </span>thought <span class="_ _42"> </span>of <span class="_ _42"> </span>as <span class="_ _42"> </span>having <span class="_ _53"> </span>a <span class="_ _42"> </span>single <span class="_ _42"> </span>thread <span class="_ _42"> </span>of <span class="_ _42"> </span>control: <span class="_ _23"> </span>each</span></div><div class="t m0 x32 h28 y30e1 ff19 fs5 fc0 sc0 ls0 ws0">process <span class="_ _42"> </span>is <span class="_ _53"> </span>doing <span class="_ _42"> </span>only <span class="_ _53"> </span>one <span class="_ _53"> </span>thing <span class="_ _53"> </span>at <span class="_ _53"> </span>a <span class="_ _53"> </span>time.<span class="_ _54"> </span><span class="ls62e">Wi<span class="_ _3"></span></span>th <span class="_ _53"> </span>multiple <span class="_ _53"> </span>threads <span class="_ _42"> </span>of <span class="_ _53"> </span>control, <span class="_ _42"> </span>we <span class="_ _53"> </span>can</div><div class="t m0 x32 h28 y30e2 ff19 fs5 fc0 sc0 ls0 ws0">design <span class="_ _3"></span>our <span class="_ _9"></span>programs <span class="_ _2"></span>to <span class="_ _9"></span>do <span class="_ _3"></span>mor<span class="lsd78">et<span class="_ _b"></span><span class="ls0">han <span class="_ _9"></span>one <span class="_ _3"></span>thing <span class="_ _9"></span>at <span class="_ _3"></span>a <span class="_ _9"></span>time <span class="_ _3"></span>within <span class="_ _9"></span>a <span class="_ _3"></span>single <span class="_ _9"></span>process, <span class="_ _2"></span>with</span></span></div><div class="t m0 x32 h28 y30e3 ff19 fs5 fc0 sc0 ls0 ws0">each thread handling a separate task.<span class="_ _59"> </span>This approach can have several beneﬁts.</div><div class="t m0 x3f h28 y30e4 ff19 fs5 fc0 sc0 ls47 ws0">•W<span class="_ _4e"></span><span class="lsd79">ec<span class="_ _1d"></span><span class="ls0">an <span class="_ _45"> </span>simplify <span class="_ _47"> </span>code <span class="_ _47"> </span>that <span class="_ _47"> </span>deals <span class="_ _47"> </span>with <span class="_ _45"> </span>asynchr<span class="_ _0"></span>onous <span class="_ _47"> </span>events <span class="_ _47"> </span>by <span class="_ _45"> </span>assigning <span class="_ _47"> </span>a</span></span></div><div class="t m0 x15 h28 y2882 ff19 fs5 fc0 sc0 ls0 ws0">separate thread to handle each event type.<span class="_ _46"> </span>Each thread can then handle its event</div><div class="t m0 x15 h28 y2883 ff19 fs5 fc0 sc0 ls0 ws0">using a <span class="_ _2"></span>synchronous programming <span class="_ _2"></span>model.<span class="_ _46"> </span><span class="lsd7a">As<span class="_ _d"></span><span class="ls0">ynchronous programming model</span></span></div><div class="t m0 x15 h28 y2884 ff19 fs5 fc0 sc0 ls0 ws0">is much simpler than an asynchronous one.</div><div class="t m0 x3f h28 y30e5 ff19 fs5 fc0 sc0 ls47 ws0">•M<span class="_ _4d"></span><span class="ls0">ultiple <span class="_ _3"></span>processes <span class="_ _2"></span>have <span class="_ _3"></span>to <span class="_ _9"></span>use <span class="_ _3"></span>complex <span class="_ _3"></span>mechanisms <span class="_ _3"></span>provided <span class="_ _3"></span>by <span class="_ _3"></span>the <span class="_ _3"></span>operating</span></div><div class="t m0 x15 h28 y30e6 ff19 fs5 fc0 sc0 ls0 ws0">system <span class="_"> </span>to <span class="_ _53"> </span>shar<span class="lsd7b">em<span class="_ _4a"></span><span class="ls0">emory <span class="_"> </span>and <span class="_ _e"> </span>ﬁle <span class="_"> </span>descriptors, <span class="_ _e"> </span>as <span class="_"> </span>we <span class="_ _e"> </span>will <span class="_"> </span>see <span class="_ _53"> </span>in <span class="_"> </span>Chapters <span class="_ _e"> </span>15</span></span></div><div class="t m0 x1c0 h23 y12e ff18 fs0 fc0 sc0 ls0 ws0">383</div><a class="l" href="#pf10" data-dest-detail='[16,"XYZ",50,757,1]'><div class="d m1" style="border-style:none;position:absolute;left:157.497886px;bottom:975.452099px;width:91.666000px;height:134.895020px;background-color:rgba(255,255,255,0.000001);"></div></a><a class="l" href="#pf10" data-dest-detail='[16,"XYZ",50,757,1]'><div class="d m1" style="border-style:none;position:absolute;left:80.891993px;bottom:766.306826px;width:105.756005px;height:19.679993px;background-color:rgba(255,255,255,0.000001);"></div></a><a class="l" href="#pf10" data-dest-detail='[16,"XYZ",50,757,1]'><div class="d m1" style="border-style:none;position:absolute;left:80.892409px;bottom:398.386801px;width:137.351799px;height:19.679993px;background-color:rgba(255,255,255,0.000001);"></div></a></div><div class="pi" data-data='{"ctm":[2.100000,0.000000,0.000000,2.100000,-115.668004,-156.491993]}'></div></div>
