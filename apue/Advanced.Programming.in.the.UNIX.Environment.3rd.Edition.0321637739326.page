<div id="pf146" class="pf w4 h1f" data-page-no="146"><div class="pc pc146 w4 h1f"><img class="bi x0 y0 w3 h4" alt="" src="bg146.png"/><div class="t m0 x31 h2 y8e ff1 fs0 fc0 sc0 ls0 ws0"><span class="fc1 sc0">ptg10805159</span></div><div class="t m0 x35 h24 ya4 ff18 fs0 fc0 sc0 ls0 ws0">292<span class="_ _1b"> </span><span class="ff19">Process <span class="_"> </span>Relationships<span class="_ _18d"> </span>Chapter <span class="_"> </span>9</span></div><div class="t m0 x3f h26 y12f ff19 fsf fc0 sc0 ls0 ws0">The<span class="_ _4b"> </span><span class="ff1a">telnetd<span class="_ _59"> </span></span>process <span class="_ _53"> </span>then <span class="_"> </span>opens <span class="_ _53"> </span>a <span class="_ _e"> </span>pseudo <span class="_"> </span>terminal <span class="_ _53"> </span>device <span class="_ _e"> </span>and <span class="_"> </span>splits <span class="_ _53"> </span>into <span class="_ _e"> </span>two</div><div class="t m0 x32 h26 y130 ff19 fsf fc0 sc0 ls0 ws0">processes <span class="_"> </span>using<span class="_ _61"> </span><span class="ff1a">fork</span><span class="lsb01">.T<span class="_ _49"></span><span class="ls0">he <span class="_ _66"> </span>parent <span class="_ _66"> </span>handles <span class="_ _47"> </span>the <span class="_ _66"> </span>communication <span class="_ _47"> </span>across <span class="_"> </span>the <span class="_ _47"> </span>network</span></span></div><div class="t m0 x32 h26 y131 ff19 fsf fc0 sc0 ls0 ws0">connection, <span class="_ _42"> </span>and <span class="_ _53"> </span>the <span class="_ _42"> </span>child <span class="_ _53"> </span>does <span class="_ _42"> </span>an<span class="_ _44"> </span><span class="ff1a">exec<span class="_ _44"> </span></span>of <span class="_ _53"> </span>the<span class="_ _44"> </span><span class="ff1a">login<span class="_ _44"> </span></span>program. <span class="_ _44"> </span>The<span class="_ _44"> </span>par<span class="_ _0"></span>ent <span class="_ _42"> </span>and <span class="_ _53"> </span>the</div><div class="t m0 x32 h26 y132 ff19 fsf fc0 sc0 ls0 ws0">child <span class="_ _2"></span>ar<span class="lsb02">ec<span class="_ _8"></span><span class="ls0">onnected <span class="_ _3"></span>through <span class="_ _2"></span>the <span class="_ _2"></span>pseudo <span class="_ _3"></span>terminal.<span class="_ _61"> </span>Befor<span class="ls511">ed<span class="_ _8"></span><span class="ls0">oing <span class="_ _2"></span>the<span class="_ _47"> </span><span class="ff1a">exec</span><span class="ls511">,t<span class="_ _4f"></span><span class="ls0">he <span class="_ _2"></span>child <span class="_ _3"></span>sets</span></span></span></span></span></span></div><div class="t m0 x32 h26 y133 ff19 fsf fc0 sc0 ls0 ws0">up <span class="_ _42"> </span>ﬁle <span class="_ _53"> </span>descriptors <span class="_ _53"> </span>0, <span class="_ _42"> </span>1, <span class="_ _53"> </span>and <span class="_ _53"> </span>2 <span class="_ _53"> </span>to <span class="_ _42"> </span>the <span class="_ _53"> </span>pseudo <span class="_ _53"> </span>terminal.<span class="_ _54"> </span>If <span class="_ _53"> </span>we <span class="_ _53"> </span>log <span class="_ _42"> </span>in <span class="_ _53"> </span>correctly<span class="_ _4"></span>,<span class="_ _4b"> </span><span class="ff1a">login</span></div><div class="t m0 x32 h2a y134 ff19 fsf fc0 sc0 ls0 ws0">performs <span class="_ _9"></span>the <span class="_ _9"></span>same <span class="_ _9"></span>steps <span class="_ _9"></span>we <span class="_ _9"></span>described <span class="_ _23"></span>in <span class="_ _9"></span>Section <span class="_ _9"></span>9.2: <span class="_ _9"></span>it <span class="_ _9"></span>changes <span class="_ _9"></span>to <span class="_ _9"></span>our <span class="_ _9"></span>home <span class="_ _9"></span>directory</div><div class="t m0 x32 h26 y135 ff19 fsf fc0 sc0 ls0 ws0">and <span class="_ _42"> </span>sets <span class="_ _53"> </span>our <span class="_ _53"> </span>group <span class="_ _42"> </span>IDs, <span class="_ _53"> </span>user <span class="_ _53"> </span>ID, <span class="_ _42"> </span>and <span class="_ _53"> </span>our <span class="_ _53"> </span>initial <span class="_ _53"> </span>environment. <span class="_ _44"> </span>Then<span class="_ _44"> </span><span class="ff1a">login<span class="_ _44"> </span></span><span class="ls45">re<span class="_ _2"></span></span>places</div><div class="t m0 x32 h26 y136 ff19 fsf fc0 sc0 ls0 ws0">itself <span class="_ _42"> </span>with <span class="_ _42"> </span>our <span class="_ _42"> </span>login <span class="_ _42"> </span>shell <span class="_ _53"> </span>by <span class="_ _42"> </span>calling<span class="_ _44"> </span><span class="ff1a">exec</span><span class="lsb03">.F<span class="_ _52"></span><span class="ls0">igur<span class="ls486">e9<span class="_ _c"></span><span class="ls0">.5 <span class="_ _42"> </span>shows <span class="_ _53"> </span>the <span class="_ _42"> </span>arrangement <span class="_ _42"> </span>of <span class="_ _42"> </span>the</span></span></span></span></div><div class="t m0 x32 h2a y137 ff19 fsf fc0 sc0 ls0 ws0">processes at this point.</div><div class="t m0 x99 h5e y25ab ff1a fs10 fc0 sc0 ls0 ws0">init</div><div class="t m0 x5c h2e y25ac ff19 fs11 fc0 sc0 ls0 ws0">login shell</div><div class="t m0 x19b h2f y25ad ff19 fs12 fc0 sc0 ls0 ws0">pseudo terminal</div><div class="t m0 x1b7 h2f y25ae ff19 fs12 fc0 sc0 ls0 ws0">device driver</div><div class="t m0 xe0 h30 y25af ff19 fs13 fc0 sc0 ls0 ws0">user at a</div><div class="t m0 xe0 h30 y25b0 ff19 fs13 fc0 sc0 ls0 ws0">terminal</div><div class="t m0 xde h83 y25b1 ff19 fs36 fc0 sc0 ls0 ws0">fd 0, 1, 2</div><div class="t m0 x1e3 h10e y25b2 ff1b fs19 fc0 sc0 ls0 ws0">process ID 1</div><div class="t m0 x1ff h8d y25b3 ff19 fs1a fc0 sc0 ls0 ws0">through<span class="_"> </span><span class="ff1a">inetd</span>,<span class="_"> </span><span class="ff1a">telnetd</span>,</div><div class="t m0 x1ff h8d y25b4 ff19 fs1a fc0 sc0 ls0 ws0">and<span class="_"> </span><span class="ff1a">login</span></div><div class="t m0 x1ff h38 y25b5 ff19 fs1b fc0 sc0 ls0 ws0">network connection through</div><div class="t m0 x1ff hd6 y25b6 ff1a fs1b fc0 sc0 ls0 ws0">telnetd<span class="_ _53"> </span><span class="ff19">server and<span class="_"> </span></span>telnet<span class="_ _e"> </span><span class="ff19">client</span></div><div class="t m0 x76 h38 y25b7 ff18 fs1b fc0 sc0 ls0 ws0">Figure 9.5<span class="_ _5a"> </span><span class="ff19">Arrangement of processes after everything is set for a network login</span></div><div class="t m0 x3f hfa y25b8 ff19 fs88 fc0 sc0 ls0 ws0">Obviously<span class="_ _4"></span><span class="lsb04">,a<span class="ls0">lot <span class="_ _53"> </span>is <span class="_ _53"> </span>going <span class="_ _53"> </span>on <span class="_ _53"> </span>between <span class="_ _53"> </span>the <span class="_ _53"> </span>pseudo <span class="_ _53"> </span>terminal <span class="_ _53"> </span>device <span class="_ _53"> </span>driver <span class="_ _53"> </span>and <span class="_ _53"> </span>the</span></span></div><div class="t m0 x32 hfa y25b9 ff19 fs88 fc0 sc0 ls0 ws0">actual <span class="_ _66"> </span>user <span class="_ _47"> </span>at <span class="_"> </span>the <span class="_ _47"> </span>terminal.<span class="_ _50"> </span><span class="lsb05">We<span class="_ _9"></span></span>’ll <span class="_ _47"> </span>show <span class="_"> </span>all <span class="_ _47"> </span>the <span class="_ _66"> </span>processes <span class="_ _66"> </span>involved <span class="_ _66"> </span>in <span class="_ _47"> </span>this <span class="_ _66"> </span>type <span class="_ _47"> </span>of</div><div class="t m0 x32 hfa y25ba ff19 fs88 fc0 sc0 ls0 ws0">arrangement in Chapter 19 when we talk about pseudo terminals in mor<span class="lsb06">ed<span class="_ _4f"></span><span class="ls0">etail.</span></span></div><div class="t m0 x3f hfa y25bb ff19 fs88 fc0 sc0 ls0 ws0">The <span class="_ _42"> </span>important <span class="_ _42"> </span>thing <span class="_ _42"> </span>to <span class="_ _42"> </span>understand <span class="_ _23"> </span>is <span class="_ _42"> </span>that <span class="_ _42"> </span>whether <span class="_ _42"> </span>we <span class="_ _42"> </span>log <span class="_ _42"> </span>in <span class="_ _42"> </span>through <span class="_ _42"> </span>a <span class="_ _23"> </span>terminal</div><div class="t m0 x32 hfa y25bc ff19 fs88 fc0 sc0 ls0 ws0">(Figur<span class="lsb07">e9<span class="_ _c"></span><span class="ls0">.3) <span class="_ _42"> </span>or <span class="_ _42"> </span>a <span class="_ _42"> </span>network <span class="_ _42"> </span>(Figur<span class="lsb07">e9<span class="_ _43"></span><span class="ls0">.5), <span class="_ _42"> </span>we <span class="_ _42"> </span>have <span class="_ _42"> </span>a <span class="_ _42"> </span>login <span class="_ _42"> </span>shell <span class="_ _42"> </span>with <span class="_ _42"> </span>its <span class="_ _42"> </span>standar<span class="lsb07">di<span class="_ _c"></span><span class="ls0">nput,</span></span></span></span></span></span></div><div class="t m0 x32 hfa y25bd ff19 fs88 fc0 sc0 ls0 ws0">standar<span class="lsb08">do<span class="_ _b"></span><span class="ls0">utput, <span class="_ _3"></span>and <span class="_ _9"></span>standar<span class="lsb08">de<span class="_ _b"></span><span class="ls0">rror <span class="_ _3"></span>connected <span class="_ _9"></span>to <span class="_ _9"></span>either <span class="_ _9"></span>a <span class="_ _3"></span>terminal <span class="_ _9"></span>device <span class="_ _9"></span>or <span class="_ _9"></span>a <span class="_ _9"></span>pseudo</span></span></span></span></div><div class="t m0 x32 hfa y25be ff19 fs88 fc0 sc0 ls0 ws0">terminal <span class="_ _23"> </span>device.<span class="_ _51"> </span><span class="lsb05">We<span class="_ _9"></span></span>’ll <span class="_ _23"> </span>see <span class="_ _42"> </span>in <span class="_ _23"></span>the <span class="_ _23"> </span>coming <span class="_ _23"> </span>sections <span class="_ _23"> </span>that <span class="_ _42"> </span>this <span class="_ _23"></span>login <span class="_ _23"> </span>shell <span class="_ _23"> </span>is <span class="_ _42"> </span>the <span class="_ _23"></span>start <span class="_ _23"></span>of <span class="_ _23"> </span>a</div><div class="t m0 x32 hfa y25bf ff19 fs88 fc0 sc0 ls0 ws0">POSIX.1 session, <span class="_ _2"></span>and that <span class="_ _2"></span>the terminal <span class="_ _2"></span>or <span class="_ _2"></span>pseudo terminal <span class="_ _2"></span>is the <span class="_ _2"></span>controlling terminal for</div><div class="t m0 x32 hfa y25c0 ff19 fs88 fc0 sc0 ls0 ws0">the session.</div><div class="t m0 x35 h10f y25c1 ff16 fs88 fc0 sc0 ls0 ws0">Mac OS X Network Logins</div><div class="t m0 x32 hfa y25c2 ff19 fs88 fc0 sc0 ls0 ws0">Logging <span class="_ _23"> </span>in <span class="_ _42"> </span>to <span class="_ _23"> </span>a <span class="_ _42"> </span>Mac <span class="_ _23"> </span>OS <span class="_ _42"> </span>X <span class="_ _23"> </span>system <span class="_ _42"> </span>over <span class="_ _23"> </span>a <span class="_ _42"> </span>network <span class="_ _23"> </span>is <span class="_ _42"> </span>identical <span class="_ _23"> </span>to <span class="_ _42"> </span>logging <span class="_ _23"> </span>in <span class="_ _42"> </span>to <span class="_ _23"> </span>a <span class="_ _42"> </span>BSD</div><div class="t m0 x32 hfa y25c3 ff19 fs88 fc0 sc0 ls0 ws0">system, <span class="_ _3"></span>because <span class="_ _9"></span>Mac <span class="_ _9"></span>OS <span class="_ _9"></span>X <span class="_ _9"></span>is <span class="_ _3"></span>based <span class="_ _9"></span>partially <span class="_ _9"></span>on <span class="_ _9"></span>FreeBSD. <span class="_ _47"> </span>However<span class="_ _1"></span>,<span class="_ _45"> </span>on<span class="_ _47"> </span>Mac <span class="_ _9"></span>OS <span class="_ _9"></span>X, <span class="_ _9"></span>the</div><div class="t m0 x32 hf9 y25c4 ff1a fs88 fc0 sc0 ls0 ws0">telnet<span class="_ _80"> </span><span class="ff19">daemon is run from<span class="_"> </span></span>launchd<span class="ff19">.</span></div></div><div class="pi" data-data='{"ctm":[2.100000,0.000000,0.000000,2.100000,-115.668004,-156.491993]}'></div></div>
