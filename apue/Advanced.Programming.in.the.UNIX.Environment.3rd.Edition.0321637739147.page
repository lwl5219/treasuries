<div id="pf93" class="pf w4 h1f" data-page-no="93"><div class="pc pc93 w4 h1f"><img class="bi x0 y0 w3 h4" alt="" src="apue/bg93.png"/><div class="t m0 x31 h2 y8e ff1 fs0 fc0 sc0 ls0 ws0"><span class="fc1 sc0">ptg10805159</span></div><div class="t m0 x35 h24 ya4 ff19 fs0 fc0 sc0 ls0 ws0">Section <span class="_"> </span>4.14<span class="_ _19a"> </span>File <span class="_"> </span>Systems<span class="_ _1b"> </span><span class="ff18 ls153">11<span class="_ _2"></span><span class="ls0">3</span></span></div><div class="t m0 x35 h53 y12f ff16 fs2b fc0 sc0 ls0 ws0">4.14 <span class="_ _93"> </span>File<span class="_ _54"> </span>Systems</div><div class="t m0 x32 h2a y4de ff19 fsf fc0 sc0 ls5f ws0">To <span class="_ _66"> </span>a<span class="_ _9"></span><span class="ls0">ppreciate <span class="_ _3"></span>the <span class="_ _9"></span>concept <span class="_ _9"></span>of <span class="_ _9"></span>links <span class="_ _3"></span>to <span class="_ _9"></span>a <span class="_ _9"></span>ﬁle, <span class="_ _9"></span>we <span class="_ _9"></span>need <span class="_ _3"></span>a <span class="_ _9"></span>conceptual <span class="_ _9"></span>understanding <span class="_ _9"></span>of <span class="_ _9"></span>the</span></div><div class="t m0 x32 h2a y6d0 ff19 fsf fc0 sc0 ls0 ws0">structur<span class="_ _0"></span>e<span class="_ _66"> </span>of<span class="_ _47"> </span>the UNIX <span class="_ _3"></span>ﬁle <span class="_ _2"></span>system.<span class="_ _46"> </span>Understanding <span class="_ _3"></span>the <span class="_ _2"></span>differ<span class="_ _0"></span>ence between <span class="_ _3"></span>an <span class="_ _2"></span>i-node <span class="_ _2"></span>and</div><div class="t m0 x32 h2a y6d1 ff19 fsf fc0 sc0 ls44 ws0">ad<span class="_ _d"></span><span class="ls0">irectory entry that points to an i-node is also useful.</span></div><div class="t m0 x3f h2a y6d2 ff19 fsf fc0 sc0 ls5f ws0">Va<span class="_ _9"></span><span class="ls0">rious <span class="_"> </span>implementations <span class="_"> </span>of <span class="_ _e"> </span>the <span class="_"> </span>UNIX <span class="_"> </span>ﬁle <span class="_ _e"> </span>system <span class="_"> </span>ar<span class="ls504">ei<span class="_ _5b"></span><span class="ls505">nu<span class="_ _55"></span><span class="ls0">se <span class="_"> </span>today<span class="_ _4"></span><span class="ls506">.S<span class="_ _5d"></span><span class="ls0">olaris, <span class="_"> </span>for</span></span></span></span></span></span></div><div class="t m0 x32 h2a y6d3 ff19 fsf fc0 sc0 ls0 ws0">example, <span class="_ _3"></span>supports <span class="_ _2"></span>several <span class="_ _3"></span>types <span class="_ _3"></span>of <span class="_ _3"></span>disk <span class="_ _3"></span>ﬁle <span class="_ _3"></span>systems: <span class="_ _3"></span>the <span class="_ _3"></span>traditional <span class="_ _3"></span>BSD-derived <span class="_ _3"></span>UNIX</div><div class="t m0 x32 h26 y6d4 ff19 fsf fc0 sc0 ls0 ws0">ﬁle <span class="_ _23"></span>system <span class="_ _23"> </span>(called<span class="_ _35"> </span><span class="ff1a">UFS</span>), <span class="_ _23"> </span>a <span class="_ _23"> </span>ﬁle <span class="_ _23"> </span>system <span class="_ _42"> </span>(called<span class="_ _35"> </span><span class="ff1a">PCFS</span>)<span class="_ _45"> </span>to<span class="_ _35"> </span>read <span class="_ _23"></span>and <span class="_ _23"> </span>write <span class="_ _23"> </span>DOS-formatted</div><div class="t m0 x32 h26 y6d5 ff19 fsf fc0 sc0 ls0 ws0">diskettes, <span class="_ _47"> </span>and <span class="_ _45"> </span>a <span class="_ _45"> </span>ﬁle <span class="_ _47"> </span>system <span class="_ _45"> </span>(called<span class="_ _16"> </span><span class="ff1a">HSFS</span>)<span class="_ _5a"> </span>to<span class="_ _16"> </span>read <span class="_ _45"> </span>CD <span class="_ _47"> </span>ﬁle <span class="_ _45"> </span>systems.<span class="_ _5f"> </span><span class="ls5f">We <span class="_ _46"> </span>s<span class="_ _9"></span></span>aw <span class="_ _45"> </span>one</div><div class="t m0 x32 h26 y6d6 ff19 fsf fc0 sc0 ls0 ws0">differ<span class="_ _0"></span>ence <span class="_ _9"></span>between <span class="_ _23"></span>ﬁle <span class="_ _23"></span>system <span class="_ _9"></span>types <span class="_ _23"></span>in <span class="_ _23"></span>Figur<span class="ls4e6">e2<span class="_ _43"></span><span class="ls0">.20.<span class="_ _51"> </span><span class="ff1a">UFS<span class="_ _45"> </span></span>is <span class="_ _23"></span>based <span class="_ _9"></span>on <span class="_ _23"> </span>the <span class="_ _23"></span>Berkeley <span class="_ _9"></span>fast</span></span></div><div class="t m0 x32 h2a y6d7 ff19 fsf fc0 sc0 ls0 ws0">ﬁle system, which we describe in this section.</div><div class="t m0 x76 h51 y15a ff19 fs2a fc0 sc0 ls0 ws0">Each <span class="_ _9"></span>ﬁle <span class="_ _9"> </span>system <span class="_ _23"> </span>type <span class="_ _9"></span>has <span class="_ _9"></span>its <span class="_ _9"> </span>own <span class="_ _23"> </span>characteristic <span class="_ _9"></span>features <span class="_ _4"></span>— <span class="_ _a"></span>and<span class="_ _47"> </span>some <span class="_ _23"> </span>of <span class="_ _9"></span>these <span class="_ _9"></span>features <span class="_ _9"></span>can <span class="_ _9"></span>be</div><div class="t m0 x76 h51 y1053 ff19 fs2a fc0 sc0 ls0 ws0">confusing. <span class="_ _45"> </span>For<span class="_ _45"> </span>example, <span class="_ _23"> </span>most <span class="_ _23"> </span>UNIX <span class="_ _42"> </span>ﬁle <span class="_ _23"> </span>systems <span class="_ _23"> </span>support <span class="_ _42"> </span>case-sensitive <span class="_ _23"> </span>ﬁlenames.<span class="_ _61"> </span>Thus, <span class="_ _42"> </span>if</div><div class="t m0 x76 h52 y1054 ff19 fs2a fc0 sc0 ls0 ws0">you create one ﬁle named<span class="_"> </span><span class="ff1a">file.txt<span class="_ _53"> </span></span>and another named<span class="_"> </span><span class="ff1a">file.TXT</span><span class="ls507">,t<span class="_ _84"></span><span class="ls0">hen two distinct ﬁles are</span></span></div><div class="t m0 x76 h52 y1055 ff19 fs2a fc0 sc0 ls0 ws0">created. <span class="_ _66"> </span>On<span class="_ _66"> </span>Mac <span class="_ _9"></span>OS <span class="_ _9"></span>X, <span class="_ _3"></span>however<span class="_ _1"></span><span class="ls508">,t<span class="_ _d"></span><span class="ls0">he<span class="_ _66"> </span><span class="ff1a">HFS<span class="_ _47"> </span></span>ﬁle <span class="_ _3"></span>system <span class="_ _9"></span>is <span class="_ _9"></span>case-preserving <span class="_ _3"></span>with <span class="_ _9"></span>case-insensitive</span></span></div><div class="t m0 x76 h52 y1056 ff19 fs2a fc0 sc0 ls0 ws0">comparisons. <span class="_ _35"> </span>Thus,<span class="_ _45"> </span>if <span class="_"> </span>you <span class="_ _42"> </span>create<span class="_ _45"> </span><span class="ff1a">file.txt</span><span class="ls509">,w<span class="_ _b"></span><span class="ls0">hen <span class="_ _42"> </span>you <span class="_"> </span>try <span class="_ _42"> </span>to <span class="_ _42"> </span>create<span class="_ _45"> </span><span class="ff1a">file.TXT</span><span class="ls50a">,y<span class="_ _b"></span><span class="ls0">ou <span class="_ _42"> </span>will</span></span></span></span></div><div class="t m0 x76 h52 y1057 ff19 fs2a fc0 sc0 ls0 ws0">overwrite<span class="_"> </span><span class="ff1a">file.txt</span><span class="ls50b">.H<span class="_ _43"></span><span class="ls0">owever<span class="_ _6"></span><span class="ls50c">,o<span class="_ _84"></span><span class="ls0">nly <span class="_ _2"></span>the name <span class="_ _2"></span>used <span class="_ _2"></span>when <span class="_ _2"></span>the <span class="_ _2"></span>ﬁle <span class="_ _2"></span>was <span class="_ _2"></span>created is <span class="_ _2"></span>stored <span class="_ _2"></span>in <span class="_ _2"></span>the</span></span></span></span></div><div class="t m0 x76 h51 y1058 ff19 fs2a fc0 sc0 ls0 ws0">ﬁle <span class="_ _3"></span>system <span class="_ _3"></span>(the <span class="_ _3"></span>case-preserving <span class="_ _3"></span>aspect).<span class="_ _4b"> </span>In <span class="_ _9"></span>fact, <span class="_ _3"></span>any <span class="_ _3"></span>permutation <span class="_ _3"></span>of <span class="_ _3"></span>uppercase <span class="_ _3"></span>and <span class="_ _3"></span>lowercase</div><div class="t m0 x76 h52 y1059 ff19 fs2a fc0 sc0 ls0 ws0">letters <span class="_ _9"></span>in <span class="_ _9"> </span>the <span class="_ _23"> </span>sequence<span class="_ _66"> </span><span class="ff1a">f</span>,<span class="_ _47"> </span><span class="ff1a">i</span>,<span class="_ _47"> </span><span class="ff1a">l</span>,<span class="_ _47"> </span><span class="ff1a">e</span>,<span class="_ _47"> </span><span class="ff1a">.</span>,<span class="_ _66"> </span><span class="ff1a">t</span>,<span class="_ _47"> </span><span class="ff1a">x</span>,<span class="_ _47"> </span><span class="ff1a">t<span class="_ _47"> </span></span>will <span class="_ _9"></span>match <span class="_ _9"> </span>when <span class="_ _23"> </span>searching <span class="_ _3"></span>for <span class="_ _23"> </span>the <span class="_ _9"></span>ﬁle <span class="_ _9"></span>(the <span class="_ _9"> </span>case-</div><div class="t m0 x76 h52 y105a ff19 fs2a fc0 sc0 ls0 ws0">insensitive <span class="_ _2"></span>comparison <span class="_ _2"></span>aspect).<span class="_ _4b"> </span>As <span class="_ _2"></span>a <span class="_ _2"></span>consequence, <span class="_ _3"></span>besides<span class="_ _80"> </span><span class="ff1a">file.txt<span class="_ _80"> </span></span>and<span class="_ _80"> </span><span class="ff1a">file.TXT</span><span class="ls50d">,w<span class="_ _5"></span><span class="ls50e">ec<span class="_ _d"></span><span class="ls0">an</span></span></span></div><div class="t m0 x76 h52 y105b ff19 fs2a fc0 sc0 ls0 ws0">access the ﬁle with the names<span class="_"> </span><span class="ff1a">File.txt</span>,<span class="_"> </span><span class="ff1a">fILE.tXt</span><span class="lse9">,a<span class="_ _84"></span><span class="ls0">nd<span class="_"> </span><span class="ff1a">FiLe.TxT</span>.</span></span></div><div class="t m0 x3f h2a y105c ff19 fsf fc0 sc0 ls5f ws0">We <span class="_ _44"> </span>c<span class="_ _9"></span><span class="ls0">an <span class="_"> </span>think <span class="_"> </span>of <span class="_"> </span>a <span class="_"> </span>disk <span class="_"> </span>drive <span class="_"> </span>being <span class="_"> </span>divided <span class="_"> </span>into <span class="_"> </span>one <span class="_ _e"> </span>or <span class="_"> </span>mor<span class="ls3fd">ep<span class="_ _4a"></span><span class="ls0">artitions. <span class="_ _59"> </span>Each</span></span></span></div><div class="t m0 x32 h2a y105d ff19 fsf fc0 sc0 ls0 ws0">partition can contain a <span class="_ _2"></span>ﬁle system, as shown <span class="_ _2"></span>in Figur<span class="ls50f">e4<span class="_ _4f"></span><span class="ls0">.13. <span class="_ _66"> </span>The<span class="_"> </span>i-nodes <span class="_ _2"></span>ar<span class="ls50f">eﬁ<span class="_ _4f"></span><span class="ls0">xed</span></span></span></span></div><div class="t m0 x193 h2a y105e ff19 fsf fc0 sc0 ls0 ws0">-</div><div class="t m0 x18e h2a y105d ff19 fsf fc0 sc0 ls0 ws0">length</div><div class="t m0 x32 h2a y105f ff19 fsf fc0 sc0 ls0 ws0">entries that contain most of the information about a ﬁle.</div><div class="t m0 x194 h2d y1060 ff19 fs10 fc0 sc0 ls0 ws0">partition</div><div class="t m0 x136 h2e y1061 ff19 fs11 fc0 sc0 ls0 ws0">partition</div><div class="t m0 x195 h2f y1062 ff19 fs12 fc0 sc0 ls0 ws0">partition<span class="_ _19b"></span>disk drive</div><div class="t m0 xae h30 y1063 ff19 fs13 fc0 sc0 ls0 ws0">cylinder group 0</div><div class="t m0 x88 h31 y1064 ff19 fs14 fc0 sc0 ls0 ws0">cylinder group 1</div><div class="t m0 x196 h9c y1065 ff18 fs33 fc0 sc0 ls1d7 ws0">...</div><div class="t m0 xe3 h9d y1066 ff19 fs16 fc0 sc0 ls0 ws0">cylinder group<span class="_"> </span><span class="ff1b">n<span class="_ _19c"></span><span class="ff19">ﬁle system</span></span></div><div class="t m0 x5 h83 y1067 ff19 fs36 fc0 sc0 ls0 ws0">super</div><div class="t m0 x197 h83 y1068 ff19 fs36 fc0 sc0 ls0 ws0">block</div><div class="t m0 x198 h83 y1069 ff19 fs36 fc0 sc0 ls0 ws0">copy</div><div class="t m0 x38 h34 y106a ff19 fs17 fc0 sc0 ls0 ws0">cg</div><div class="t m0 x126 h34 y106b ff19 fs17 fc0 sc0 ls0 ws0">info</div><div class="t m0 x2f h35 y106c ff19 fs18 fc0 sc0 ls0 ws0">i-node</div><div class="t m0 x199 h35 y106d ff19 fs18 fc0 sc0 ls0 ws0">map</div><div class="t m0 x17c h36 y106e ff19 fs19 fc0 sc0 ls0 ws0">block</div><div class="t m0 xac h36 y106f ff19 fs19 fc0 sc0 ls0 ws0">bitmap</div><div class="t m0 x19a h37 y1070 ff19 fs1a fc0 sc0 ls0 ws0">i-nodes</div><div class="t m0 xa2 h38 y1071 ff19 fs1b fc0 sc0 ls0 ws0">data blocks</div><div class="t m0 x19b h39 y1072 ff19 fs1c fc0 sc0 ls0 ws0">i-node</div><div class="t m0 x18c h88 y1073 ff19 fs43 fc0 sc0 ls0 ws0">i-node</div><div class="t m0 x73 h9e y1074 ff18 fs4b fc0 sc0 ls510 ws0">...</div><div class="t m0 x43 h3d y1075 ff19 fs1f fc0 sc0 ls0 ws0">i-node</div><div class="t m0 x35 h3f y1076 ff19 fs21 fc0 sc0 ls0 ws0">boot block(s)</div><div class="t m0 xd9 h41 y1077 ff19 fs23 fc0 sc0 ls0 ws0">super block</div><div class="t m0 xab h41 y1078 ff18 fs23 fc0 sc0 ls0 ws0">Figure 4.13<span class="_ _5a"> </span><span class="ff19">Disk drive, partitions, and a ﬁle system</span></div><a class="l" href="#pfd" data-dest-detail='[13,"XYZ",50,757,1]'><div class="d m1" style="border-style:none;position:absolute;left:80.892409px;bottom:1236.288916px;width:112.703804px;height:19.679993px;background-color:rgba(255,255,255,0.000001);"></div></a></div><div class="pi" data-data='{"ctm":[2.100000,0.000000,0.000000,2.100000,-115.668004,-156.491993]}'></div></div>
