<div id="pf14d" class="pf w4 h1f" data-page-no="14d"><div class="pc pc14d w4 h1f"><img class="bi x0 y0 w3 h4" alt="" src="apue/bg14d.png"/><div class="t m0 x31 h2 y8e ff1 fs0 fc0 sc0 ls0 ws0"><span class="fc1 sc0">ptg10805159</span></div><div class="t m0 x35 h24 ya4 ff19 fs0 fc0 sc0 ls0 ws0">Section <span class="_"> </span>9.8<span class="_ _247"> </span>Job <span class="_"> </span>Control<span class="_ _1fb"> </span><span class="ff18">299</span></div><div class="t m0 x3f h2a y12f ff19 fsf fc0 sc0 ls0 ws0">Most <span class="_ _3"></span>applications <span class="_ _3"></span>don’t <span class="_ _3"></span>call <span class="_ _9"></span>these <span class="_ _3"></span>two <span class="_ _3"></span>functions <span class="_ _9"></span>directly<span class="_ _4"></span><span class="lsb35">.I<span class="_ _62"></span><span class="ls0">nstead, <span class="_ _3"></span>the <span class="_ _9"></span>functions <span class="_ _3"></span>are</span></span></div><div class="t m0 x32 h2a y130 ff19 fsf fc0 sc0 ls0 ws0">normally called by job-control shells.</div><div class="t m0 x3f h26 y131 ff19 fsf fc0 sc0 ls0 ws0">The<span class="_"> </span><span class="ff1a">tcgetsid<span class="_ _80"> </span></span>function allows an application <span class="_ _2"></span>to obtain the process gr<span class="_ _0"></span>oup ID for the</div><div class="t m0 x32 h2a y132 ff19 fsf fc0 sc0 ls0 ws0">session leader given a ﬁle descriptor for the controlling TTY<span class="_ _4"></span>.</div><div class="t m0 x3f h57 y2685 ff1a fs2d fc0 sc0 ls0 ws0">#include &lt;termios.h&gt;</div><div class="t m0 x3f h57 y2686 ff1a fs2d fc0 sc0 ls0 ws0">pid_t tcgetsid(int<span class="_"> </span><span class="ff1b">fd</span>);</div><div class="t m0 x127 h5f y2687 ff19 fs2d fc0 sc0 ls0 ws0">Returns: session leader<span class="_ _3"></span>’s process group ID if OK,<span class="_"> </span><span class="ff20">−</span>1<span class="_"> </span>on<span class="_"> </span>err<span class="_ _0"></span>or</div><div class="t m0 x3f h4d y2688 ff19 fs26 fc0 sc0 ls0 ws0">Applications <span class="_ _47"> </span>that <span class="_ _47"> </span>need <span class="_ _47"> </span>to <span class="_ _45"> </span>manage <span class="_ _47"> </span>controlling <span class="_ _66"> </span>terminals <span class="_ _47"> </span>can <span class="_ _45"> </span>use<span class="_ _61"> </span><span class="ff1a">tcgetsid<span class="_ _16"> </span></span>to</div><div class="t m0 x32 h49 y2689 ff19 fs26 fc0 sc0 ls0 ws0">identify <span class="_ _9"></span>the <span class="_ _3"></span>session <span class="_ _9"></span>ID <span class="_ _9"></span>of <span class="_ _9"></span>the <span class="_ _9"></span>controlling <span class="_ _3"></span>terminal’s <span class="_ _9"></span>session <span class="_ _3"></span>leader <span class="_ _9"></span>(which <span class="_ _9"></span>is <span class="_ _9"></span>equivalent</div><div class="t m0 x32 h49 y268a ff19 fs26 fc0 sc0 ls0 ws0">to the session leader<span class="_ _3"></span>’s process group ID).</div><div class="t m0 x35 h4b y268b ff16 fs27 fc0 sc0 ls0 ws0">9.8 <span class="_ _68"> </span>Job<span class="_ _54"> </span>Control</div><div class="t m0 x32 h49 y268c ff19 fs26 fc0 sc0 ls0 ws0">Job <span class="_ _9"></span>control <span class="_ _9"></span>is <span class="_ _9"></span>a <span class="_ _23"></span>featur<span class="lsb36">et<span class="_ _43"></span><span class="ls0">hat <span class="_ _23"></span>was <span class="_ _9"></span>added <span class="_ _23"></span>to <span class="_ _9"></span>BSD <span class="_ _9"></span>around <span class="_ _9"></span>1980.<span class="_ _5a"> </span>This <span class="_ _23"></span>featur<span class="lsb36">ea<span class="_ _43"></span><span class="ls0">llows <span class="_ _23"></span>us <span class="_ _9"></span>to</span></span></span></span></div><div class="t m0 x32 h49 y268d ff19 fs26 fc0 sc0 ls0 ws0">start <span class="_ _42"> </span>multiple <span class="_ _42"> </span>jobs <span class="_ _42"> </span>(groups <span class="_ _23"> </span>of <span class="_ _42"> </span>processes) <span class="_ _42"> </span>from <span class="_ _23"> </span>a <span class="_ _42"> </span>single <span class="_ _42"> </span>terminal <span class="_ _42"> </span>and <span class="_ _42"> </span>to <span class="_ _42"> </span>control <span class="_ _23"> </span>which</div><div class="t m0 x32 h49 y268e ff19 fs26 fc0 sc0 ls0 ws0">jobs <span class="_ _53"> </span>can <span class="_ _53"> </span>access <span class="_ _53"> </span>the <span class="_ _e"> </span>terminal <span class="_ _53"> </span>and <span class="_ _53"> </span>which <span class="_ _53"> </span>jobs <span class="_ _e"> </span>ar<span class="lsb37">er<span class="_ _55"></span><span class="ls0">un <span class="_ _53"> </span>in <span class="_ _53"> </span>the <span class="_ _e"> </span>background. <span class="_ _44"> </span>Job<span class="_ _4b"> </span>control</span></span></div><div class="t m0 x32 h49 y268f ff19 fs26 fc0 sc0 lscc ws0">re<span class="ls0">quires three forms of support:</span></div><div class="t m0 x3f h49 y2690 ff19 fs26 fc0 sc0 ls0 ws0">1. <span class="_ _51"> </span>A<span class="_"> </span>shell that supports job control</div><div class="t m0 x3f h49 y2691 ff19 fs26 fc0 sc0 ls0 ws0">2. <span class="_ _51"> </span>The<span class="_"> </span>terminal driver in the kernel must support job control</div><div class="t m0 x3f h49 y2692 ff19 fs26 fc0 sc0 ls0 ws0">3. <span class="_ _51"> </span>The<span class="_"> </span>kernel must support certain job-control signals</div><div class="t m0 x76 h77 y2693 ff19 fs10 fc0 sc0 ls0 ws0">SVR3 <span class="_ _3"></span>provided <span class="_ _2"></span>a <span class="_ _3"></span>different <span class="_ _2"></span>form <span class="_ _3"></span>of <span class="_ _3"></span>job <span class="_ _3"></span>control <span class="_ _3"></span>called<span class="_ _80"> </span><span class="ff1b">shell <span class="_ _3"></span>layers</span><span class="lsb38">.T<span class="_ _c"></span><span class="ls0">he <span class="_ _3"></span>BSD <span class="_ _3"></span>form <span class="_ _3"></span>of <span class="_ _3"></span>job <span class="_ _3"></span>control,</span></span></div><div class="t m0 x76 h2d y2694 ff19 fs10 fc0 sc0 ls0 ws0">however<span class="_ _1"></span><span class="lsb39">,w<span class="_ _b"></span><span class="ls0">as <span class="_ _23"> </span>selected <span class="_ _42"> </span>by <span class="_ _23"> </span>POSIX.1 <span class="_ _23"> </span>and <span class="_ _23"> </span>is <span class="_ _23"> </span>what <span class="_ _23"> </span>we <span class="_ _23"> </span>describe <span class="_ _42"> </span>here. <span class="_ _47"> </span>In<span class="_ _45"> </span>earlier <span class="_ _23"> </span>versions <span class="_ _23"> </span>of <span class="_ _23"> </span>the</span></span></div><div class="t m0 x76 h2d y2695 ff19 fs10 fc0 sc0 ls0 ws0">standard, job contr<span class="_ _0"></span>ol support was optional, but POSIX.1 now requir<span class="_ _0"></span>es platforms to support it.</div><div class="t m0 x3f h49 y2696 ff19 fs26 fc0 sc0 ls0 ws0">From <span class="_ _23"> </span>our <span class="_ _42"> </span>perspective, <span class="_ _53"> </span>when <span class="_ _42"> </span>using <span class="_ _42"> </span>job <span class="_ _42"> </span>control <span class="_ _42"> </span>from <span class="_ _23"> </span>a <span class="_ _42"> </span>shell, <span class="_ _42"> </span>we <span class="_ _42"> </span>can <span class="_ _53"> </span>start <span class="_ _42"> </span>a <span class="_ _42"> </span>job <span class="_ _42"> </span>in</div><div class="t m0 x32 h49 y2697 ff19 fs26 fc0 sc0 ls0 ws0">either the <span class="_ _2"></span>foregr<span class="_ _0"></span>ound or the <span class="_ _2"></span>background. <span class="_"> </span>A<span class="_"> </span>job <span class="_ _2"></span>is simply <span class="_ _2"></span>a collection <span class="_ _2"></span>of processes, often</div><div class="t m0 x32 h49 y2698 ff19 fs26 fc0 sc0 lsd3 ws0">ap<span class="_ _d"></span><span class="ls0">ipeline of processes. <span class="_"> </span>For<span class="_"> </span>example,</span></div><div class="t m0 x3f h4e y2699 ff1a fs28 fc0 sc0 ls0 ws0">vi main.c</div><div class="t m0 x32 h49 y269a ff19 fs26 fc0 sc0 ls0 ws0">starts a job consisting of one process in the for<span class="_ _0"></span>egr<span class="_ _0"></span>ound. <span class="_"> </span>The<span class="_"> </span>commands</div><div class="t m0 x3f h4e y269b ff1a fs28 fc0 sc0 ls0 ws0">pr *.c | lpr &amp;</div><div class="t m0 x3f h4e y269c ff1a fs28 fc0 sc0 ls0 ws0">make all &amp;</div><div class="t m0 x32 h49 y269d ff19 fs26 fc0 sc0 ls0 ws0">start <span class="_ _9"></span>two <span class="_ _9"></span>jobs <span class="_ _9"></span>in <span class="_ _23"></span>the <span class="_ _9"></span>background. <span class="_ _47"> </span>All<span class="_ _45"> </span>the <span class="_ _9"></span>processes <span class="_ _9"></span>invoked <span class="_ _9"></span>by <span class="_ _9"></span>these <span class="_ _23"></span>background <span class="_ _3"></span>jobs</div><div class="t m0 x32 h49 y269e ff19 fs26 fc0 sc0 ls0 ws0">are<span class="_"> </span>in<span class="_"> </span>the backgr<span class="_ _0"></span>ound.</div><div class="t m0 x3f h49 y269f ff19 fs26 fc0 sc0 ls0 ws0">As <span class="_ _3"></span>we <span class="_ _3"></span>said, <span class="_ _3"></span>to <span class="_ _9"></span>use <span class="_ _3"></span>the <span class="_ _3"></span>features <span class="_ _3"></span>provided <span class="_ _3"></span>by <span class="_ _3"></span>job <span class="_ _3"></span>control, <span class="_ _3"></span>we <span class="_ _3"></span>need <span class="_ _9"></span>to <span class="_ _3"></span>use <span class="_ _3"></span>a <span class="_ _3"></span>shell <span class="_ _9"></span>that</div><div class="t m0 x32 h49 y26a0 ff19 fs26 fc0 sc0 ls0 ws0">supports <span class="_ _9"></span>job <span class="_ _9"></span>control. <span class="_ _45"> </span>W<span class="_ _1"></span>ith <span class="_ _9"></span>older <span class="_ _9"></span>systems, <span class="_ _9"></span>it <span class="_ _9"></span>was <span class="_ _9"></span>simple <span class="_ _9"></span>to <span class="_ _23"></span>say <span class="_ _9"></span>which <span class="_ _9"></span>shells <span class="_ _9"></span>supported</div><div class="t m0 x32 h49 y26a1 ff19 fs26 fc0 sc0 ls0 ws0">job control and which didn’t.<span class="_ _46"> </span>The C shell supported <span class="_ _2"></span>job control, the Bourne shell didn’t,</div><div class="t m0 x32 h49 y26a2 ff19 fs26 fc0 sc0 ls0 ws0">and <span class="_ _2"></span>it <span class="_ _2"></span>was <span class="_ _2"></span>an <span class="_ _2"></span>option <span class="_ _2"></span>with <span class="_ _2"></span>the <span class="_ _2"></span>Korn <span class="_ _2"></span>shell, <span class="_ _2"></span>depending <span class="_ _3"></span>on <span class="_ _2"></span>whether <span class="_ _2"></span>the <span class="_ _2"></span>host <span class="_ _2"></span>supported <span class="_ _2"></span>job</div><div class="t m0 x32 h49 y26a3 ff19 fs26 fc0 sc0 ls0 ws0">control. <span class="_ _47"> </span>But<span class="_ _45"> </span>the <span class="_ _9"></span>C <span class="_ _9"></span>shell <span class="_ _9"></span>has <span class="_ _3"></span>been <span class="_ _9"></span>ported <span class="_ _9"></span>to <span class="_ _9"></span>systems <span class="_ _9"></span>(e.g., <span class="_ _9"></span>earlier <span class="_ _9"></span>versions <span class="_ _9"></span>of <span class="_ _9"></span>System <span class="_ _9"></span>V)</div><div class="t m0 x32 h49 y26a4 ff19 fs26 fc0 sc0 ls0 ws0">that <span class="_ _9"></span>don’t <span class="_ _9"></span>support <span class="_ _9"></span>job <span class="_ _9"></span>control, <span class="_ _3"></span>and <span class="_ _9"></span>the <span class="_ _9"></span>SVR4 <span class="_ _9"></span>Bourne <span class="_ _9"></span>shell, <span class="_ _9"></span>when <span class="_ _9"></span>invoked <span class="_ _9"></span>by <span class="_ _9"></span>the <span class="_ _9"></span>name</div><div class="t m0 x32 h4d y26a5 ff1a fs26 fc0 sc0 ls0 ws0">jsh<span class="_ _66"> </span><span class="ff19">instead of<span class="_ _66"> </span></span>sh<span class="ff19 ls721">,s<span class="_ _d"></span><span class="ls0">upports <span class="_ _2"></span>job control. <span class="_"> </span>The<span class="_ _66"> </span>Korn <span class="_ _2"></span>shell continues <span class="_ _2"></span>to support <span class="_ _2"></span>job control</span></span></div><a class="l" href="#pff" data-dest-detail='[15,"XYZ",50,757,1]'><div class="d m1" style="border-style:none;position:absolute;left:80.892409px;bottom:894.410992px;width:106.427803px;height:19.679992px;background-color:rgba(255,255,255,0.000001);"></div></a></div><div class="pi" data-data='{"ctm":[2.100000,0.000000,0.000000,2.100000,-115.668004,-156.491993]}'></div></div>
