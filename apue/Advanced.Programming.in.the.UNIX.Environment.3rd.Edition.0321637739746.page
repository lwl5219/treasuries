<div id="pf2ea" class="pf w4 h1f" data-page-no="2ea"><div class="pc pc2ea w4 h1f"><img class="bi x0 y0 w3 h4" alt="" src="bg2ea.png"/><div class="t m0 x31 h2 y8e ff1 fs0 fc0 sc0 ls0 ws0"><span class="fc1 sc0">ptg10805159</span></div><div class="t m0 x35 h24 ya4 ff18 fs0 fc0 sc0 ls0 ws0">712<span class="_ _1b"> </span><span class="ff19 ls719">Te<span class="_ _9"></span><span class="ls0">rminal <span class="_"> </span>I/O<span class="_ _eb"> </span>Chapter <span class="_"> </span>18</span></span></div><div class="t m0 x32 h2a y12f ff19 fsf fc0 sc0 ls0 ws0">Running the program in Figur<span class="_ _0"></span><span class="ls44">e1<span class="_ _d"></span><span class="ls0">8.22 on a windowed terminal gives us</span></span></div><div class="t m0 x3f h57 ya9b ff1a fs2d fc0 sc0 ls0 ws0">$<span class="_"> </span><span class="ff1f">./a.out</span></div><div class="t m0 x3f h57 yac1 ff1a fs2d fc0 sc0 ls0 ws0">35 rows, 80 columns<span class="_ _290"> </span><span class="ff1b">initial size</span></div><div class="t m0 x3f h57 yac2 ff1a fs2d fc0 sc0 ls0 ws0">SIGWINCH received<span class="_ _bc"> </span><span class="ff1b">change window size: signal is caught</span></div><div class="t m0 x3f h57 yac3 ff1a fs2d fc0 sc0 ls0 ws0">40 rows, 123 columns</div><div class="t m0 x3f h57 yac4 ff1a fs2d fc0 sc0 ls0 ws0">SIGWINCH received<span class="_ _bc"> </span><span class="ff1b">and again</span></div><div class="t m0 x3f h57 yac5 ff1a fs2d fc0 sc0 ls0 ws0">42 rows, 33 columns</div><div class="t m0 x3f h57 y321e ff1f fs2d fc0 sc0 ls0 ws0">ˆC<span class="_"> </span><span class="ff1a">$<span class="_ _d1"> </span><span class="ff1b">type the interrupt key to terminate</span></span></div><div class="t m0 x35 h7b y5257 ff16 fs27 fc0 sc0 ls0 ws0">18.13<span class="_ _5a"> </span><span class="ff1f">termcap</span>,<span class="_ _54"> </span><span class="ff1f">terminfo</span><span class="ls5d5">,a<span class="_ _52"></span><span class="ls0">nd<span class="_ _54"> </span><span class="ff1f">curses</span></span></span></div><div class="t m0 x32 h4d y5258 ff1a fs26 fc0 sc0 ls0 ws0">termcap<span class="_ _45"> </span><span class="ff19">stands <span class="_ _9"></span>for <span class="_ _9"></span>‘‘terminal <span class="_ _3"></span>capability<span class="_ _6"></span>,’<span class="_ _0"></span><span class="ls1530">’a<span class="_ _b"></span><span class="ls0">nd <span class="_ _9"></span>it <span class="_ _9"></span>refers <span class="_ _9"></span>to <span class="_ _9"></span>the <span class="_ _9"></span>text <span class="_ _9"></span>ﬁle<span class="_ _35"> </span><span class="ff1a">/etc/termcap</span></span></span></span></div><div class="t m0 x32 h4d y5259 ff19 fs26 fc0 sc0 ls0 ws0">and <span class="_ _42"> </span>a <span class="_ _42"> </span>set <span class="_ _53"> </span>of <span class="_ _42"> </span>routines <span class="_ _42"> </span>used <span class="_ _42"> </span>to <span class="_ _53"> </span>read <span class="_ _42"> </span>this <span class="_ _42"> </span>ﬁle.<span class="_ _54"> </span>The<span class="_ _44"> </span><span class="ff1a">termcap<span class="_ _44"> </span></span>scheme <span class="_ _42"> </span>was <span class="_ _42"> </span>developed <span class="_ _53"> </span>at</div><div class="t m0 x32 h4d y525a ff19 fs26 fc0 sc0 ls0 ws0">Berkeley <span class="_ _23"> </span>to <span class="_ _23"> </span>support <span class="_ _42"> </span>the<span class="_ _35"> </span><span class="ff1a">vi<span class="_ _35"> </span></span>editor<span class="_ _6"></span><span class="ls1531">.T<span class="_ _26"></span><span class="ls0">he<span class="_ _35"> </span><span class="ff1a">termcap<span class="_ _35"> </span></span>ﬁle <span class="_ _23"> </span>contains <span class="_ _23"> </span>descriptions <span class="_ _42"> </span>of <span class="_ _23"></span>various</span></span></div><div class="t m0 x32 h49 y525b ff19 fs26 fc0 sc0 ls0 ws0">terminals: <span class="_ _45"> </span>which <span class="_ _45"> </span>features <span class="_ _47"> </span>the <span class="_ _45"> </span>terminal <span class="_ _45"> </span>supports <span class="_ _45"> </span>(e.g., <span class="_ _45"> </span>how <span class="_ _45"> </span>many <span class="_ _45"> </span>lines <span class="_ _45"> </span>and <span class="_ _45"> </span>rows,</div><div class="t m0 x32 h49 y525c ff19 fs26 fc0 sc0 ls0 ws0">whether the terminal <span class="_ _2"></span>support backspace) <span class="_ _2"></span>and how to <span class="_ _2"></span>make the <span class="_ _2"></span>terminal perform <span class="_ _2"></span>certain</div><div class="t m0 x32 h49 y11bb ff19 fs26 fc0 sc0 ls0 ws0">operations <span class="_ _e"> </span>(e.g., <span class="_"> </span>clear <span class="_ _e"> </span>the <span class="_"> </span>scr<span class="_ _0"></span>een, <span class="_ _e"> </span>move <span class="_"> </span>the <span class="_ _e"> </span>cursor <span class="_"> </span>to <span class="_ _53"> </span>a <span class="_"> </span>given <span class="_ _e"> </span>location).<span class="_ _60"> </span><span class="ls164">Ta<span class="_ _9"></span></span>king <span class="_ _e"> </span>this</div><div class="t m0 x32 h49 y525d ff19 fs26 fc0 sc0 ls0 ws0">information out <span class="_ _2"></span>of <span class="_ _2"></span>the compiled <span class="_ _2"></span>program and <span class="_ _2"></span>placing <span class="_ _2"></span>it into <span class="_ _2"></span>a <span class="_ _2"></span>text <span class="_ _2"></span>ﬁle that <span class="_ _2"></span>can <span class="_ _2"></span>easily be</div><div class="t m0 x32 h4d y525e ff19 fs26 fc0 sc0 ls0 ws0">edited allows the<span class="_"> </span><span class="ff1a">vi<span class="_ _80"> </span></span>editor to run on many differ<span class="_ _0"></span>ent terminals.</div><div class="t m0 x3f h4d y525f ff19 fs26 fc0 sc0 ls0 ws0">The <span class="_ _9"></span>routines <span class="_ _3"></span>that <span class="_ _23"></span>support <span class="_ _9"></span>the<span class="_ _45"> </span><span class="ff1a">termcap<span class="_ _45"> </span></span>ﬁle <span class="_ _9"></span>wer<span class="ls2ca">ee<span class="_ _b"></span><span class="ls0">ventually <span class="_ _3"></span>extracted <span class="_ _9"></span>from <span class="_ _9"></span>the<span class="_ _45"> </span><span class="ff1a">vi</span></span></span></div><div class="t m0 x32 h4d y5260 ff19 fs26 fc0 sc0 ls0 ws0">editor <span class="_ _9"></span>and <span class="_ _9"></span>placed <span class="_ _9"></span>into <span class="_ _23"></span>a <span class="_ _9"></span>separate<span class="_ _45"> </span><span class="ff1a">curses<span class="_ _45"> </span></span>library<span class="_ _4"></span><span class="ls1532">.M<span class="_ _62"></span><span class="ls0">any <span class="_ _9"></span>features <span class="_ _9"></span>wer<span class="ls1533">ea<span class="_ _b"></span><span class="ls0">dded <span class="_ _9"></span>to <span class="_ _9"></span>make</span></span></span></span></div><div class="t m0 x32 h49 y5261 ff19 fs26 fc0 sc0 ls0 ws0">this library usable for any program that wanted to manipulate the scr<span class="_ _0"></span>een.</div><div class="t m0 x3f h4d y5262 ff19 fs26 fc0 sc0 ls0 ws0">The<span class="_ _66"> </span><span class="ff1a">termcap<span class="_ _47"> </span></span>scheme <span class="_ _3"></span>was <span class="_ _2"></span>not <span class="_ _3"></span>perfect.<span class="_ _61"> </span>As <span class="_ _3"></span>mor<span class="ls1534">ea<span class="_ _8"></span><span class="ls0">nd <span class="_ _2"></span>mor<span class="ls14e0">et<span class="_ _4f"></span><span class="ls0">erminals <span class="_ _2"></span>wer<span class="ls14e0">ea<span class="_ _8"></span><span class="ls0">dded <span class="_ _3"></span>to</span></span></span></span></span></span></div><div class="t m0 x32 h49 y5263 ff19 fs26 fc0 sc0 ls0 ws0">the <span class="_ _2"></span>data <span class="_ _3"></span>ﬁle, <span class="_ _3"></span>it <span class="_ _3"></span>took <span class="_ _3"></span>longer <span class="_ _3"></span>to <span class="_ _3"></span>scan <span class="_ _3"></span>the <span class="_ _3"></span>ﬁle, <span class="_ _3"></span>looking <span class="_ _3"></span>for <span class="_ _3"></span>a <span class="_ _3"></span>speciﬁc <span class="_ _3"></span>terminal.<span class="_ _61"> </span>The <span class="_ _3"></span>data <span class="_ _3"></span>ﬁle</div><div class="t m0 x32 h49 y5264 ff19 fs26 fc0 sc0 ls0 ws0">also <span class="_ _45"> </span>used <span class="_ _35"> </span>two-character <span class="_ _45"> </span>names <span class="_ _45"> </span>to <span class="_ _35"> </span>identify <span class="_ _45"> </span>the <span class="_ _45"> </span>various <span class="_ _35"> </span>terminal <span class="_ _45"> </span>attributes.<span class="_ _5c"> </span>These</div><div class="t m0 x32 h4d y5265 ff19 fs26 fc0 sc0 ls0 ws0">deﬁciencies <span class="_ _42"> </span>led <span class="_ _42"> </span>to <span class="_ _53"> </span>development <span class="_ _42"> </span>of <span class="_ _42"> </span>the<span class="_ _44"> </span><span class="ff1a">terminfo<span class="_ _44"> </span></span>scheme <span class="_ _42"> </span>and <span class="_ _53"> </span>its <span class="_ _42"> </span>associated<span class="_ _44"> </span><span class="ff1a">curses</span></div><div class="t m0 x32 h4d y5266 ff19 fs26 fc0 sc0 ls0 ws0">library<span class="_ _4"></span><span class="ls1535">.T<span class="_ _52"></span><span class="ls0">he <span class="_ _53"> </span>terminal <span class="_ _53"> </span>descriptions <span class="_ _42"> </span>in<span class="_ _4b"> </span><span class="ff1a">terminfo<span class="_ _44"> </span></span>ar<span class="ls1536">eb<span class="_ _c"></span><span class="ls0">asically <span class="_ _53"> </span>compiled <span class="_ _42"> </span>versions <span class="_ _53"> </span>of <span class="_ _53"> </span>a</span></span></span></span></div><div class="t m0 x32 h4d y5267 ff19 fs26 fc0 sc0 ls0 ws0">textual <span class="_ _e"> </span>description <span class="_"> </span>and <span class="_ _e"> </span>can <span class="_"> </span>be <span class="_ _53"> </span>located <span class="_"> </span>faster <span class="_ _e"> </span>at <span class="_"> </span>runtime.<span class="_ _65"> </span><span class="ff1a">terminfo<span class="_ _59"> </span></span>appeared <span class="_ _e"> </span>with</div><div class="t m0 x32 h49 y5268 ff19 fs26 fc0 sc0 ls0 ws0">SVR2 and has been included in all System V releases since then.</div><div class="t m0 x76 h5e y5269 ff19 fs10 fc0 sc0 ls0 ws0">Historically<span class="_ _6"></span><span class="ls1537">,S<span class="_ _5b"></span><span class="ls0">ystem <span class="_ _45"> </span>V–based <span class="_ _45"> </span>systems <span class="_ _47"> </span>used<span class="_ _16"> </span><span class="ff1a">terminfo</span><span class="ls1537">,a<span class="_ _1d"></span><span class="ls0">nd <span class="_ _45"> </span>BSD-derived <span class="_ _45"> </span>systems <span class="_ _45"> </span>used</span></span></span></span></div><div class="t m0 x76 h5e y526a ff1a fs10 fc0 sc0 ls0 ws0">termcap<span class="ff19 ls1538">,b<span class="_ _4f"></span><span class="ls0">ut <span class="_ _9"></span>it <span class="_ _3"></span>is <span class="_ _9"></span>now <span class="_ _9"></span>common <span class="_ _9"></span>for <span class="_ _3"></span>systems <span class="_ _9"></span>to <span class="_ _9"></span>provide <span class="_ _3"></span>both.<span class="_ _59"> </span>Mac <span class="_ _9"></span>OS <span class="_ _3"></span>X, <span class="_ _9"></span>however<span class="_ _1"></span><span class="ls1539">,s<span class="_ _d"></span><span class="ls0">upports</span></span></span></span></div><div class="t m0 x76 h5e y526b ff19 fs10 fc0 sc0 ls0 ws0">only<span class="_"> </span><span class="ff1a">terminfo</span>.</div><div class="t m0 x32 h4d y526c ff19 fs26 fc0 sc0 ls153a ws0">Ad<span class="_ _b"></span><span class="ls0">escription <span class="_ _9"></span>of<span class="_ _35"> </span><span class="ff1a">terminfo<span class="_ _45"> </span></span>and <span class="_ _23"></span>the<span class="_ _45"> </span><span class="ff1a">curses<span class="_ _35"> </span></span>library <span class="_ _9"></span>is <span class="_ _23"> </span>provided <span class="_ _9"></span>by <span class="_ _23"> </span>Goodheart</span></div><div class="t m0 x1b9 h49 y526d ff19 fs26 fc0 sc0 ls0 ws0">[</div><div class="t m0 xe5 h49 y526c ff19 fs26 fc0 sc0 ls0 ws0">1991</div><div class="t m0 x191 h49 y526d ff19 fs26 fc0 sc0 ls0 ws0">]</div><div class="t m0 x163 h49 y526c ff19 fs26 fc0 sc0 ls0 ws0">,</div><div class="t m0 x32 h49 y526e ff19 fs26 fc0 sc0 ls0 ws0">but <span class="_ _9"></span>this <span class="_ _9"></span>book <span class="_ _23"></span>is <span class="_ _9"></span>currently <span class="_ _9"></span>out <span class="_ _9"></span>of <span class="_ _23"></span>print.<span class="_ _5a"> </span>Strang</div><div class="t m0 x176 h49 y526f ff19 fs26 fc0 sc0 ls0 ws0">[</div><div class="t m0 xcd h49 y526e ff19 fs26 fc0 sc0 ls0 ws0">1986</div><div class="t m0 x1d9 h49 y526f ff19 fs26 fc0 sc0 ls0 ws0">]</div><div class="t m0 x65 h49 y526e ff19 fs26 fc0 sc0 ls0 ws0">describes <span class="_ _9"></span>the <span class="_ _9"></span>Berkeley <span class="_ _23"></span>version <span class="_ _9"></span>of</div><div class="t m0 x32 h4d y5270 ff19 fs26 fc0 sc0 ls0 ws0">the<span class="_ _66"> </span><span class="ff1a">curses<span class="_ _47"> </span></span>library<span class="_ _4"></span><span class="ls153b">.S<span class="_ _5b"></span><span class="ls0">trang, <span class="_ _2"></span>Mui, <span class="_ _3"></span>and <span class="_ _2"></span>O’Reilly</span></span></div><div class="t m0 x179 h49 y5271 ff19 fs26 fc0 sc0 ls0 ws0">[</div><div class="t m0 x17a h49 y5270 ff19 fs26 fc0 sc0 ls0 ws0">1988</div><div class="t m0 x1c6 h49 y5271 ff19 fs26 fc0 sc0 ls0 ws0">]</div><div class="t m0 x109 h4d y5270 ff19 fs26 fc0 sc0 ls0 ws0">provide a <span class="_ _2"></span>description <span class="_ _3"></span>of<span class="_ _66"> </span><span class="ff1a">termcap</span></div><div class="t m0 x32 h4d y5272 ff19 fs26 fc0 sc0 ls0 ws0">and<span class="_"> </span><span class="ff1a">terminfo</span>.</div><div class="t m0 x76 h5e y5273 ff19 fs10 fc0 sc0 ls0 ws0">The<span class="_"> </span><span class="ff1a">ncurses<span class="_ _80"> </span></span>library<span class="_ _6"></span><span class="ls153c">,af<span class="_ _5"></span><span class="ls21d">re<span class="_ _2"></span><span class="ls153c">ev<span class="_ _5"></span><span class="ls0">ersion <span class="_ _2"></span>that <span class="_ _2"></span>is compatible <span class="_ _2"></span>with <span class="_ _2"></span>the <span class="_ _2"></span>SVR4<span class="_"> </span><span class="ff1a">curses<span class="_ _80"> </span></span>interface, can <span class="_ _2"></span>be</span></span></span></span></div><div class="t m0 x76 h5e y5274 ff19 fs10 fc0 sc0 ls0 ws0">found <span class="_ _45"> </span>at<span class="_ _5a"> </span><span class="ff1a">http://invisible-island.net/ncurses/ncurses.html</span><span class="ls153d">.I<span class="_ _49"></span><span class="ls153e">tc<span class="_ _1d"></span><span class="ls0">an <span class="_ _45"> </span>also <span class="_ _35"> </span>be</span></span></span></div><div class="t m0 x76 h5e y5275 ff19 fs10 fc0 sc0 ls0 ws0">found at<span class="_"> </span><span class="ff1a">http://www.gnu.org/software/ncurses</span>.</div><div class="t m0 x3f h4d y5276 ff19 fs26 fc0 sc0 ls0 ws0">Neither<span class="_ _59"> </span><span class="ff1a">termcap<span class="_ _46"> </span></span>nor<span class="_ _59"> </span><span class="ff1a">terminfo</span>,<span class="_ _46"> </span>by<span class="_ _46"> </span>itself, <span class="_"> </span>addresses <span class="_ _e"> </span>the <span class="_"> </span>problems <span class="_"> </span>we’ve <span class="_"> </span>been</div><div class="t m0 x32 h49 y5277 ff19 fs26 fc0 sc0 ls0 ws0">looking <span class="_ _9"></span>at <span class="_ _9"></span>in <span class="_ _9"></span>this <span class="_ _3"></span>chapter: <span class="_ _9"></span>changing <span class="_ _9"></span>the <span class="_ _9"></span>terminal’s <span class="_ _9"></span>mode, <span class="_ _9"></span>changing <span class="_ _9"></span>one <span class="_ _9"></span>of <span class="_ _9"></span>the <span class="_ _9"></span>terminal</div><div class="t m0 x32 h49 y5278 ff19 fs26 fc0 sc0 ls0 ws0">special characters, handling the window <span class="_ _2"></span>size, and so on.<span class="_ _46"> </span>What they <span class="_ _2"></span>do provide is a way</div><a class="l" href="#pf13" data-dest-detail='[19,"XYZ",50,757,1]'><div class="d m1" style="border-style:none;position:absolute;left:80.892634px;bottom:978.201043px;width:235.223701px;height:19.679993px;background-color:rgba(255,255,255,0.000001);"></div></a><a class="l" href="http://invisible-island.net/ncurses/ncurses.html"><div class="d m1" style="border-style:none;position:absolute;left:352.319092px;bottom:237.948897px;width:232.401016px;height:11.984009px;background-color:rgba(255,255,255,0.000001);"></div></a><a class="l" href="http://www.gnu.org/software/ncurses"><div class="d m1" style="border-style:none;position:absolute;left:336.283488px;bottom:220.970413px;width:170.269989px;height:6.755997px;background-color:rgba(255,255,255,0.000001);"></div></a></div><div class="pi" data-data='{"ctm":[2.100000,0.000000,0.000000,2.100000,-115.668004,-156.491993]}'></div></div>
