<div id="pff0" class="pf w4 h1f" data-page-no="f0"><div class="pc pcf0 w4 h1f"><img class="bi x0 y0 w3 h4" alt="" src="bgf0.png"/><div class="t m0 x31 h2 y8e ff1 fs0 fc0 sc0 ls0 ws0"><span class="fc1 sc0">ptg10805159</span></div><div class="t m0 x35 h24 ya4 ff18 fs0 fc0 sc0 ls0 ws0">206<span class="_ _1b"> </span><span class="ff19">Process <span class="_"> </span>Envir<span class="_ _0"></span>onment <span class="_ _1c1"> </span>Chapter<span class="_ _44"> </span>7</span></div><div class="t m0 x24 h51 y1bdf ff19 fs2a fc0 sc0 ls0 ws0">stack</div><div class="t m0 x24 h51 y1be0 ff19 fs2a fc0 sc0 ls0 ws0">heap</div><div class="t m0 x110 h2d y1be1 ff19 fs10 fc0 sc0 ls0 ws0">uninitialized data</div><div class="t m0 x9a h2d y1be2 ff19 fs10 fc0 sc0 ls0 ws0">(bss)</div><div class="t m0 x1e2 h2e y1be3 ff19 fs11 fc0 sc0 ls0 ws0">initialized data</div><div class="t m0 x17 h2f y1be4 ff19 fs12 fc0 sc0 ls0 ws0">text</div><div class="t m0 x1e1 h32 y1be5 ff19 fs15 fc0 sc0 ls0 ws0">command</div><div class="t m0 xad h32 y1be6 ff19 fs15 fc0 sc0 ls0 ws0">-</div><div class="t m0 x170 h32 y1be5 ff19 fs15 fc0 sc0 ls0 ws0">line arguments</div><div class="t m0 x1e1 h32 y1be7 ff19 fs15 fc0 sc0 ls0 ws0">and environment variables</div><div class="t m0 x1e1 h33 y1be8 ff19 fs16 fc0 sc0 ls0 ws0">initialized to</div><div class="t m0 x1e1 h70 y1be9 ff19 fs16 fc0 sc0 ls0 ws0">zer<span class="ls84a">ob<span class="_ _5"></span><span class="ls0">y<span class="_"> </span><span class="ff1a">exec</span></span></span></div><div class="t m0 x1e1 h83 y1bea ff19 fs36 fc0 sc0 ls871 ws0">re<span class="ls0">ad from</span></div><div class="t m0 x1e1 h83 y1beb ff19 fs36 fc0 sc0 ls0 ws0">program ﬁle</div><div class="t m0 x1e1 h71 y1bec ff19 fs36 fc0 sc0 ls0 ws0">by<span class="_"> </span><span class="ff1a">exec</span></div><div class="t m0 x4 h83 y1bed ff19 fs36 fc0 sc0 ls0 ws0">high address</div><div class="t m0 xea h83 y1bee ff19 fs36 fc0 sc0 ls0 ws0">low address</div><div class="t m0 x39 h83 y1bef ff18 fs36 fc0 sc0 ls0 ws0">Figure 7.6<span class="_ _5a"> </span><span class="ff19 ls872">Ty<span class="_ _9"></span><span class="ls0">pical memory arrangement</span></span></div><div class="t m0 x3f h73 y1bf0 ff19 fs38 fc0 sc0 ls0 ws0">The<span class="_ _16"> </span><span class="ff1a">size</span></div><div class="t m0 x1f h74 y1bf1 ff19 fs38 fc0 sc0 ls0 ws0">(</div><div class="t m0 x13a h74 y1bf0 ff19 fs38 fc0 sc0 ls0 ws0">1</div><div class="t m0 x8 h74 y1bf1 ff19 fs38 fc0 sc0 ls0 ws0">)</div><div class="t m0 x144 h74 y1bf0 ff19 fs38 fc0 sc0 ls0 ws0">command <span class="_ _45"> </span>r<span class="_ _0"></span>eports <span class="_ _45"> </span>the <span class="_ _47"> </span>sizes <span class="_ _45"> </span>(in <span class="_ _45"> </span>bytes) <span class="_ _45"> </span>of <span class="_ _47"> </span>the <span class="_ _45"> </span>text, <span class="_ _45"> </span>data, <span class="_ _45"> </span>and <span class="_ _47"> </span>bss</div><div class="t m0 x32 h74 y1bf2 ff19 fs38 fc0 sc0 ls0 ws0">segments. <span class="_"> </span>For<span class="_"> </span>example:</div><div class="t m0 x3f hed y1bf3 ff1a fs81 fc0 sc0 ls0 ws0">$<span class="_"> </span><span class="ff1f">size /usr/bin/cc /bin/sh</span></div><div class="t m0 x41 hed y1bf4 ff1a fs81 fc0 sc0 ls0 ws0">text <span class="_ _68"> </span>data<span class="_ _8a"> </span>bss <span class="_ _15"> </span>dec<span class="_ _15"> </span>hex <span class="_"> </span>filename</div><div class="t m0 x90 hed y1bf5 ff1a fs81 fc0 sc0 ls0 ws0">346919 <span class="_ _68"> </span>3576 <span class="_ _87"> </span>6680<span class="_ _d9"> </span>357175 <span class="_"> </span>57337 <span class="_"> </span>/usr/bin/cc</div><div class="t m0 x90 hed y1bf6 ff1a fs81 fc0 sc0 ls0 ws0">102134 <span class="_ _68"> </span>1776<span class="_ _87"> </span>11272 <span class="_"> </span>115182 <span class="_"> </span>1c1ee <span class="_"> </span>/bin/sh</div><div class="t m0 x32 h74 y1bf7 ff19 fs38 fc0 sc0 ls0 ws0">The <span class="_ _9"></span>fourth <span class="_ _9"></span>and <span class="_ _23"></span>ﬁfth <span class="_ _9"></span>columns <span class="_ _23"></span>ar<span class="_ _0"></span><span class="ls873">et<span class="_ _b"></span><span class="ls0">he <span class="_ _9"></span>total <span class="_ _9"></span>of <span class="_ _23"></span>the <span class="_ _9"></span>three <span class="_ _9"></span>sizes, <span class="_ _9"></span>displayed <span class="_ _23"></span>in <span class="_ _9"></span>decimal <span class="_ _9"></span>and</span></span></div><div class="t m0 x32 h74 y1bf8 ff19 fs38 fc0 sc0 ls0 ws0">hexadecimal, respectively<span class="_ _4"></span>.</div><div class="t m0 x35 h72 y1bf9 ff16 fs37 fc0 sc0 ls0 ws0">7.7 <span class="_ _68"> </span>Shared<span class="_ _54"> </span>Libraries</div><div class="t m0 x32 h74 y1bfa ff19 fs38 fc0 sc0 ls0 ws0">Most <span class="_ _23"> </span>UNIX <span class="_ _42"> </span>systems <span class="_ _23"> </span>today <span class="_ _23"> </span>support <span class="_ _42"> </span>shared <span class="_ _23"></span>libraries.<span class="_ _51"> </span>Arnold</div><div class="t m0 x1 h74 y1bfb ff19 fs38 fc0 sc0 ls0 ws0">[</div><div class="t m0 x166 h74 y1bfa ff19 fs38 fc0 sc0 ls0 ws0">1986</div><div class="t m0 x1ea h74 y1bfb ff19 fs38 fc0 sc0 ls0 ws0">]</div><div class="t m0 x160 h74 y1bfa ff19 fs38 fc0 sc0 ls0 ws0">describes <span class="_ _23"> </span>an <span class="_ _42"> </span>early</div><div class="t m0 x32 h74 y1bfc ff19 fs38 fc0 sc0 ls0 ws0">implementation <span class="_ _4b"> </span>under <span class="_ _59"> </span>System <span class="_ _4b"> </span>V<span class="_ _4"></span><span class="ls874">,a<span class="_ _64"></span><span class="ls0">nd <span class="_ _4b"> </span>Gingell <span class="_ _59"> </span>et <span class="_ _4b"> </span>al.</span></span></div><div class="t m0 x1db h74 y1bfd ff19 fs38 fc0 sc0 ls0 ws0">[</div><div class="t m0 x1a9 h74 y1bfc ff19 fs38 fc0 sc0 ls0 ws0">1987</div><div class="t m0 xc9 h74 y1bfd ff19 fs38 fc0 sc0 ls0 ws0">]</div><div class="t m0 x16a h74 y1bfc ff19 fs38 fc0 sc0 ls0 ws0">describe <span class="_ _4b"> </span>a <span class="_ _59"> </span>differ<span class="_ _1"></span>ent</div><div class="t m0 x32 h74 y1bfe ff19 fs38 fc0 sc0 ls0 ws0">implementation <span class="_ _42"> </span>under <span class="_ _53"> </span>SunOS.<span class="_ _65"> </span>Shared <span class="_ _42"> </span>libraries <span class="_ _53"> </span>remove <span class="_ _42"> </span>the <span class="_ _53"> </span>common <span class="_ _53"> </span>library <span class="_ _53"> </span>routines</div><div class="t m0 x32 h74 y1bff ff19 fs38 fc0 sc0 ls0 ws0">from <span class="_ _47"> </span>the <span class="_ _45"> </span>executable <span class="_ _47"> </span>ﬁle, <span class="_ _45"> </span>instead <span class="_ _47"> </span>maintaining <span class="_ _45"> </span>a <span class="_ _47"> </span>single <span class="_ _45"> </span>copy <span class="_ _47"> </span>of <span class="_ _45"> </span>the <span class="_ _45"> </span>library <span class="_ _47"> </span>routine</div><div class="t m0 x32 h74 y1c00 ff19 fs38 fc0 sc0 ls0 ws0">somewhere<span class="_ _46"> </span>in<span class="_ _61"> </span>memory <span class="_ _47"> </span>that <span class="_ _47"> </span>all <span class="_ _47"> </span>processes <span class="_"> </span>reference. <span class="_ _46"> </span>This<span class="_ _61"> </span><span class="ls875">re<span class="_ _2"></span></span>duces <span class="_ _47"> </span>the <span class="_ _66"> </span>size <span class="_ _47"> </span>of <span class="_ _47"> </span>each</div><div class="t m0 x32 h74 y1c01 ff19 fs38 fc0 sc0 ls0 ws0">executable <span class="_ _23"></span>ﬁle <span class="_ _23"></span>but <span class="_ _23"></span>may <span class="_ _23"></span>add <span class="_ _23"></span>some <span class="_ _23"></span>runtime <span class="_ _9"></span>overhead, <span class="_ _23"></span>either <span class="_ _23"></span>when <span class="_ _23"></span>the <span class="_ _23"></span>program <span class="_ _9"></span>is <span class="_ _23"> </span>ﬁrst</div><div class="t m0 x32 h74 y1c02 ff19 fs38 fc0 sc0 ls0 ws0">executed <span class="_ _9"></span>or <span class="_ _9"></span>the <span class="_ _9"></span>ﬁrst <span class="_ _3"></span>time <span class="_ _9"></span>each <span class="_ _9"></span>shared <span class="_ _9"></span>library <span class="_ _9"></span>function <span class="_ _9"></span>is <span class="_ _9"></span>called.<span class="_ _5a"> </span>Another <span class="_ _9"></span>advantage <span class="_ _9"></span>of</div><div class="t m0 x32 h74 y1c03 ff19 fs38 fc0 sc0 ls0 ws0">shared <span class="_ _53"> </span>libraries <span class="_ _53"> </span>is <span class="_ _e"> </span>that <span class="_ _53"> </span>library <span class="_ _e"> </span>functions <span class="_ _e"> </span>can <span class="_ _53"> </span>be <span class="_ _e"> </span>replaced <span class="_ _53"> </span>with <span class="_ _e"> </span>new <span class="_ _53"> </span>versions <span class="_ _e"> </span>without</div><div class="t m0 x32 h74 y1c04 ff19 fs38 fc0 sc0 ls0 ws0">having to relink edit every pr<span class="_ _0"></span>ogram that uses the library (assuming that the number and</div><div class="t m0 x32 h74 y1c05 ff19 fs38 fc0 sc0 ls0 ws0">type of arguments haven’t changed).</div><div class="t m0 x3f h74 y1c06 ff19 fs38 fc0 sc0 ls0 ws0">Differ<span class="_ _0"></span>ent systems provide dif<span class="_ _0"></span>ferent ways for a program to say that it wants to use <span class="_ _2"></span>or</div><div class="t m0 x32 h73 y1c07 ff19 fs38 fc0 sc0 ls0 ws0">not <span class="_ _2"></span>use <span class="_ _2"></span>the <span class="_ _2"></span>shared <span class="_ _2"></span>libraries.<span class="_ _61"> </span>Options <span class="_ _2"></span>for <span class="_ _3"></span>the<span class="_ _66"> </span><span class="ff1a">cc</span></div><div class="t m0 x176 h74 y1c08 ff19 fs38 fc0 sc0 ls0 ws0">(</div><div class="t m0 xcd h74 y1c07 ff19 fs38 fc0 sc0 ls0 ws0">1</div><div class="t m0 x1eb h74 y1c08 ff19 fs38 fc0 sc0 ls0 ws0">)</div><div class="t m0 x1e1 h73 y1c07 ff19 fs38 fc0 sc0 ls0 ws0">and<span class="_ _66"> </span><span class="ff1a">ld</span></div><div class="t m0 xa4 h74 y1c08 ff19 fs38 fc0 sc0 ls0 ws0">(</div><div class="t m0 x15b h74 y1c07 ff19 fs38 fc0 sc0 ls0 ws0">1</div><div class="t m0 x1a9 h74 y1c08 ff19 fs38 fc0 sc0 ls0 ws0">)</div><div class="t m0 x13e h74 y1c07 ff19 fs38 fc0 sc0 ls0 ws0">commands <span class="_ _2"></span>ar<span class="ls876">et<span class="_ _8"></span><span class="ls0">ypical. <span class="_ _47"> </span>As</span></span></div><a class="l" href="#pfe" data-dest-detail='[14,"XYZ",50,757,1]'><div class="d m1" style="border-style:none;position:absolute;left:80.894941px;bottom:432.415222px;width:134.041603px;height:19.679993px;background-color:rgba(255,255,255,0.000001);"></div></a></div><div class="pi" data-data='{"ctm":[2.100000,0.000000,0.000000,2.100000,-115.668004,-156.491993]}'></div></div>
