<div id="pf155" class="pf w4 h1f" data-page-no="155"><div class="pc pc155 w4 h1f"><img class="bi x0 y0 w3 h4" alt="" src="apue/bg155.png"/><div class="t m0 x31 h2 y8e ff1 fs0 fc0 sc0 ls0 ws0"><span class="fc1 sc0">ptg10805159</span></div><div class="t m0 x35 h24 ya4 ff19 fs0 fc0 sc0 ls0 ws0">Section <span class="_"> </span>9.10<span class="_ _249"> </span>Orphaned <span class="_"> </span>Process <span class="_"> </span>Gr<span class="_ _0"></span>oups<span class="_ _1b"> </span><span class="ff18">307</span></div><div class="t m0 x3f h57 y425 ff1a fs2d fc0 sc0 ls0 ws0">ps -o pid,ppid,pgid,sid,tpgid,comm | cat1 &amp;</div><div class="t m0 x32 h26 y27c1 ff19 fsf fc0 sc0 ls0 ws0">the results ar<span class="ls9d9">es<span class="_ _4f"></span><span class="ls0">imilar<span class="_ _1"></span><span class="ls9d9">,b<span class="_ _d"></span><span class="ls0">ut now<span class="_"> </span><span class="ff1a">ps<span class="_ _66"> </span></span>and<span class="_"> </span><span class="ff1a">cat1<span class="_ _66"> </span></span>ar<span class="ls9d9">ep<span class="_ _d"></span><span class="ls0">laced in the <span class="_ _2"></span>same background process</span></span></span></span></span></span></div><div class="t m0 x32 h2a y27c2 ff19 fsf fc0 sc0 ls0 ws0">group:</div><div class="t m0 xf4 h57 y27c3 ff1a fs2d fc0 sc0 ls0 ws0">PID <span class="_"> </span>PPID <span class="_"> </span>PGID<span class="_ _68"> </span>SID TPGID COMMAND</div><div class="t m0 x90 h57 y27c4 ff1f fs2d fc0 sc0 ls0 ws0">2837<span class="_ _d9"> </span><span class="ff1a">2818<span class="_ _3a"> </span></span>2837<span class="_ _3a"> </span><span class="ff1a">2837 <span class="_"> </span>2837<span class="_"> </span>bash</span></div><div class="t m0 x90 h57 y27c5 ff1a fs2d fc0 sc0 ls0 ws0">5801 <span class="_"> </span>2837 <span class="_"> </span>5801 <span class="_"> </span>2837 <span class="_"> </span>2837<span class="_"> </span>ps</div><div class="t m0 x90 h57 y27c6 ff1a fs2d fc0 sc0 ls0 ws0">5802 <span class="_"> </span>2837 <span class="_"> </span>5801 <span class="_"> </span>2837 <span class="_"> </span>2837<span class="_"> </span>cat1</div><div class="t m0 x32 h2a y27c7 ff19 fsf fc0 sc0 ls0 ws0">Note <span class="_ _e"> </span>that <span class="_"> </span>the <span class="_ _e"> </span>order <span class="_ _e"> </span>in <span class="_"> </span>which <span class="_ _e"> </span>a <span class="_"> </span>shell <span class="_ _53"> </span>creates <span class="_"> </span>pr<span class="_ _1"></span>ocesses <span class="_"> </span>can <span class="_ _e"> </span>differ <span class="_ _e"> </span>depending <span class="_"> </span>on <span class="_ _e"> </span>the</div><div class="t m0 x32 h2a y27c8 ff19 fsf fc0 sc0 ls0 ws0">particular shell in use.</div><div class="t m0 x35 h53 y27c9 ff16 fs2b fc0 sc0 ls0 ws0">9.10 <span class="_ _93"> </span>Orphaned<span class="_ _54"> </span>Process <span class="_"> </span>Gr<span class="_ _1"></span>oups</div><div class="t m0 x32 h2a y27ca ff19 fsf fc0 sc0 ls5f ws0">We<span class="_ _9"></span><span class="ls0">â€™ve <span class="_ _53"> </span>mentioned <span class="_ _53"> </span>that <span class="_ _42"> </span>a <span class="_ _53"> </span>process <span class="_ _42"> </span>whose <span class="_ _53"> </span>parent <span class="_ _42"> </span>terminates <span class="_ _53"> </span>is <span class="_ _53"> </span>called <span class="_ _53"> </span>an <span class="_ _53"> </span>orphan <span class="_ _53"> </span>and <span class="_ _42"> </span>is</span></div><div class="t m0 x32 h26 y27cb ff19 fsf fc0 sc0 ls0 ws0">inherited <span class="_"> </span>by <span class="_"> </span>the<span class="_ _59"> </span><span class="ff1a">init<span class="_ _59"> </span></span>process. <span class="_ _59"> </span>W<span class="_ _6"></span><span class="lsb52">en<span class="_ _4a"></span><span class="ls0">ow <span class="_"> </span>look <span class="_"> </span>at <span class="_"> </span>entir<span class="lsb52">ep<span class="_ _5b"></span><span class="ls45">ro<span class="_ _2"></span><span class="ls0">cess <span class="_"> </span>groups <span class="_"> </span>that <span class="_"> </span>can <span class="_"> </span>be</span></span></span></span></span></div><div class="t m0 x32 h2a y27cc ff19 fsf fc0 sc0 ls0 ws0">orphaned and see how POSIX.1 handles this situation.</div><div class="t m0 x35 h27 y27cd ff16 fsf fc0 sc0 ls0 ws0">Example</div><div class="t m0 x32 h26 y27ce ff19 fsf fc0 sc0 ls0 ws0">Consider <span class="_ _23"> </span>a <span class="_ _42"> </span>pr<span class="_ _0"></span>ocess <span class="_ _23"> </span>that<span class="_ _35"> </span><span class="ff1a">fork</span><span class="lsb53">sac<span class="_ _b"></span><span class="ls0">hild <span class="_ _23"></span>and <span class="_ _23"></span>then <span class="_ _23"> </span>terminates.<span class="_ _51"> </span>Although <span class="_ _42"> </span>this <span class="_ _23"> </span>is <span class="_ _42"> </span>nothing</span></span></div><div class="t m0 x32 h2a y27cf ff19 fsf fc0 sc0 ls0 ws0">abnormal <span class="_ _53"> </span>(it <span class="_ _e"> </span>happens <span class="_ _e"> </span>all <span class="_ _e"> </span>the <span class="_ _e"> </span>time), <span class="_ _e"> </span>what <span class="_ _e"> </span>happens <span class="_ _53"> </span>if <span class="_ _e"> </span>the <span class="_ _e"> </span>child <span class="_ _e"> </span>is <span class="_ _e"> </span>stopped <span class="_ _e"> </span>(using <span class="_ _e"> </span>job</div><div class="t m0 x32 h2a y27d0 ff19 fsf fc0 sc0 ls0 ws0">control) <span class="_ _9"></span>when <span class="_ _9"></span>the <span class="_ _9"></span>parent <span class="_ _9"></span>terminates?<span class="_ _5a"> </span>How <span class="_ _23"></span>will <span class="_ _9"></span>the <span class="_ _23"></span>child <span class="_ _9"></span>ever <span class="_ _9"></span>be <span class="_ _23"></span>continued, <span class="_ _9"></span>and <span class="_ _9"></span>does</div><div class="t m0 x32 h2a y27d1 ff19 fsf fc0 sc0 ls0 ws0">the <span class="_ _3"></span>child <span class="_ _9"></span>know <span class="_ _9"></span>that <span class="_ _9"></span>it <span class="_ _3"></span>has <span class="_ _9"></span>been <span class="_ _9"></span>orphaned?<span class="_ _16"> </span>Figur<span class="lsb54">e9<span class="_ _b"></span><span class="ls0">.1<span class="_ _0"></span><span class="lsb54">1s<span class="_ _b"></span><span class="ls0">hows <span class="_ _9"></span>this <span class="_ _3"></span>situation: <span class="_ _9"></span>the <span class="_ _9"></span>parent</span></span></span></span></div><div class="t m0 x32 h26 y27d2 ff19 fsf fc0 sc0 ls0 ws0">process has<span class="_"> </span><span class="ff1a">fork</span>ed a child that stops, and the par<span class="_ _0"></span>ent is about to exit.</div><div class="t m0 x121 h2d y27d3 ff19 fs10 fc0 sc0 ls0 ws0">login shell</div><div class="t m0 x121 h2d y27d4 ff19 fs10 fc0 sc0 ls0 ws0">(PID 2837)</div><div class="t m0 x205 h2e y27d5 ff19 fs11 fc0 sc0 ls0 ws0">parent</div><div class="t m0 x121 h2e y27d6 ff19 fs11 fc0 sc0 ls0 ws0">(PID 6099)</div><div class="t m0 x77 h2f y27d7 ff19 fs12 fc0 sc0 ls0 ws0">child</div><div class="t m0 x113 h2f y27d8 ff19 fs12 fc0 sc0 ls0 ws0">(PID 6100)</div><div class="t m0 xde h63 y27d9 ff1a fs13 fc0 sc0 ls0 ws0">fork/exec</div><div class="t m29 x46 h127 y27da ff1a fsa2 fc0 sc0 ls0 ws0">fork</div><div class="t m0 x110 h32 y27db ff19 fs15 fc0 sc0 ls0 ws0">process gr<span class="_ _0"></span>oup 2837</div><div class="t m0 x16 h33 y27dc ff19 fs16 fc0 sc0 ls0 ws0">process gr<span class="_ _0"></span>oup 6099</div><div class="t m0 x12b h74 y27dd ff19 fs38 fc0 sc0 ls0 ws0">session</div><div class="t m0 xe7 h83 y27de ff18 fs36 fc0 sc0 ls0 ws0">Figure 9.1<span class="_ _0"></span>1<span class="_ _5a"> </span><span class="ff19">Example of a process group about to be orphaned</span></div><div class="t m0 x32 h74 y27df ff19 fs38 fc0 sc0 ls0 ws0">The <span class="_ _2"></span>program that <span class="_ _2"></span>creates <span class="_ _2"></span>this <span class="_ _2"></span>situation <span class="_ _2"></span>is <span class="_ _2"></span>shown <span class="_ _2"></span>in <span class="_ _2"></span>Figur<span class="lsb55">e9<span class="_ _4f"></span><span class="ls0">.13. <span class="_ _66"> </span>This<span class="_ _47"> </span>program has <span class="_ _2"></span>some</span></span></div><div class="t m0 x32 h74 y27e0 ff19 fs38 fc0 sc0 ls0 ws0">new <span class="_"> </span>featur<span class="_ _0"></span>es. <span class="_ _59"> </span>Here, <span class="_ _e"> </span>we <span class="_"> </span>ar<span class="lsb56">ea<span class="_ _5b"></span><span class="ls0">ssuming <span class="_"> </span>a <span class="_"> </span>job-contr<span class="_ _0"></span>ol <span class="_"> </span>shell.<span class="_ _48"> </span>Recall <span class="_"> </span>fr<span class="_ _0"></span>om <span class="_"> </span>the <span class="_ _e"> </span>previous</span></span></div><div class="t m0 x32 h74 y27e1 ff19 fs38 fc0 sc0 ls0 ws0">section <span class="_ _3"></span>that <span class="_ _3"></span>the <span class="_ _3"></span>shell <span class="_ _9"></span>places <span class="_ _3"></span>the <span class="_ _3"></span>foreground <span class="_ _2"></span>process <span class="_ _3"></span>into <span class="_ _3"></span>its <span class="_ _3"></span>own <span class="_ _9"></span>process <span class="_ _2"></span>group <span class="_ _3"></span>(6099 <span class="_ _3"></span>in</div><a class="l" href="#pff" data-dest-detail='[15,"XYZ",50,757,1]'><div class="d m1" style="border-style:none;position:absolute;left:80.893675px;bottom:941.679962px;width:194.904205px;height:19.679993px;background-color:rgba(255,255,255,0.000001);"></div></a></div><div class="pi" data-data='{"ctm":[2.100000,0.000000,0.000000,2.100000,-115.668004,-156.491993]}'></div></div>
