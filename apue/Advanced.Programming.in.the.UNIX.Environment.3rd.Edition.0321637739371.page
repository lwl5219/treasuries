<div id="pf173" class="pf w4 h1f" data-page-no="173"><div class="pc pc173 w4 h1f"><img class="bi x0 y0 w3 h4" alt="" src="apue/bg173.png"/><div class="t m0 x31 h2 y8e ff1 fs0 fc0 sc0 ls0 ws0"><span class="fc1 sc0">ptg10805159</span></div><div class="t m0 x35 h7a ya4 ff19 fs0 fc0 sc0 ls0 ws0">Section <span class="_"> </span>10.9<span class="_ _11b"> </span><span class="ff1a">kill<span class="_ _59"> </span></span>and<span class="_ _4b"> </span><span class="ff1a">raise<span class="_ _4b"> </span></span>Functions<span class="_ _1b"> </span><span class="ff18">337</span></div><div class="t m0 x3f h57 y1295 ff1a fs2d fc0 sc0 ls0 ws0">#include &lt;signal.h&gt;</div><div class="t m0 x3f h57 y19f8 ff1a fs2d fc0 sc0 ls0 ws0">int kill(pid_t<span class="_"> </span><span class="ff1b">pid</span><span class="ls15c">,i<span class="_ _1d"></span><span class="ls0">nt<span class="_"> </span><span class="ff1b">signo</span>);</span></span></div><div class="t m0 x3f h57 y19f9 ff1a fs2d fc0 sc0 ls0 ws0">int raise(int<span class="_"> </span><span class="ff1b">signo</span>);</div><div class="t m0 x1af h5f y19fa ff19 fs2d fc0 sc0 ls0 ws0">Both return: 0 if OK,<span class="_"> </span><span class="ff20">−</span>1<span class="_"> </span>on<span class="_"> </span>err<span class="_ _0"></span>or</div><div class="t m0 x32 h49 y19fb ff19 fs26 fc0 sc0 ls0 ws0">The call</div><div class="t m0 x3f h4e y2b29 ff1a fs28 fc0 sc0 ls0 ws0">raise(signo);</div><div class="t m0 x32 h49 y2b2a ff19 fs26 fc0 sc0 ls0 ws0">is equivalent to the call</div><div class="t m0 x3f h4e y2b2b ff1a fs28 fc0 sc0 ls0 ws0">kill(getpid(), signo);</div><div class="t m0 x32 h4d y2b2c ff19 fs26 fc0 sc0 ls0 ws0">Ther<span class="lsd3">ea<span class="_ _4f"></span><span class="lscc">re <span class="_ _3"></span>f<span class="ls0">our different conditions for the<span class="_"> </span><span class="ff1b">pid<span class="_"> </span></span>ar<span class="_ _0"></span>gument to<span class="_"> </span><span class="ff1a">kill</span>.</span></span></span></div><div class="t m0 x32 h4d y2b2d ff1b fs26 fc0 sc0 ls0 ws0">pid<span class="_ _59"> </span><span class="ff1a">&gt;<span class="_ _46"> </span><span class="ff19 lsc5d">0T<span class="_ _272"></span><span class="ls0">he signal is sent to the process whose pr<span class="_ _0"></span>ocess ID is<span class="_"> </span><span class="ff1b">pid</span>.</span></span></span></div><div class="t m0 x32 h4d y2b2e ff1b fs26 fc0 sc0 ls0 ws0">pid<span class="_ _59"> </span><span class="ff1a">==<span class="_ _46"> </span><span class="ff19 lsc5e">0T<span class="_ _1fa"></span><span class="ls0">he <span class="_ _53"> </span>signal <span class="_ _e"> </span>is <span class="_ _e"> </span>sent <span class="_ _e"> </span>to <span class="_"> </span>all <span class="_ _53"> </span>processes <span class="_ _53"> </span>whose <span class="_ _e"> </span>process <span class="_ _e"> </span>group <span class="_ _53"> </span>ID <span class="_"> </span>equals <span class="_ _53"> </span>the</span></span></span></div><div class="t m0 x1d h49 y2b2f ff19 fs26 fc0 sc0 ls0 ws0">process <span class="_ _3"></span>group <span class="_ _3"></span>ID <span class="_ _9"></span>of <span class="_ _3"></span>the <span class="_ _9"></span>sender <span class="_ _9"></span>and <span class="_ _9"></span>for <span class="_ _3"></span>which <span class="_ _9"></span>the <span class="_ _9"></span>sender <span class="_ _3"></span>has <span class="_ _9"></span>permission</div><div class="t m0 x1d h4a y2b30 ff19 fs26 fc0 sc0 ls0 ws0">to <span class="_ _59"> </span>send <span class="_ _46"> </span>the <span class="_ _46"> </span>signal.<span class="_ _5e"> </span>Note <span class="_ _59"> </span>that <span class="_ _46"> </span>the <span class="_ _59"> </span>term<span class="_ _60"> </span><span class="ff1b">all <span class="_ _46"> </span>processes<span class="_ _60"> </span></span>excludes <span class="_ _59"> </span>an</div><div class="t m0 x1d h49 y2b31 ff19 fs26 fc0 sc0 ls0 ws0">implementation-deﬁned <span class="_ _16"> </span>set <span class="_ _5a"> </span>of <span class="_ _16"> </span>system <span class="_ _5a"> </span>processes. <span class="_ _5f"> </span>For<span class="_ _5f"> </span>most <span class="_ _5a"> </span>UNIX</div><div class="t m0 x1d h49 y2b32 ff19 fs26 fc0 sc0 ls0 ws0">systems, <span class="_ _42"> </span>this <span class="_ _42"> </span>set <span class="_ _53"> </span>of <span class="_ _42"> </span>system <span class="_ _42"> </span>processes <span class="_ _42"> </span>includes <span class="_ _42"> </span>the <span class="_ _53"> </span>kernel <span class="_ _42"> </span>processes <span class="_ _42"> </span>and</div><div class="t m0 x1d h4d y2b33 ff1a fs26 fc0 sc0 ls0 ws0">init<span class="_ _80"> </span><span class="ff19">(pid 1).</span></div><div class="t m0 x32 h4d y2b34 ff1b fs26 fc0 sc0 ls0 ws0">pid<span class="_ _59"> </span><span class="ff1a">&lt;<span class="_ _46"> </span><span class="ff19 lsc5d">0T<span class="_ _272"></span><span class="ls0">he <span class="_ _e"> </span>signal <span class="_ _e"> </span>is <span class="_ _e"> </span>sent <span class="_ _e"> </span>to <span class="_ _e"> </span>all <span class="_"> </span>pr<span class="_ _1"></span>ocesses <span class="_"> </span>whose <span class="_ _53"> </span>process <span class="_ _53"> </span>group <span class="_ _e"> </span>ID <span class="_ _e"> </span>equals <span class="_ _e"> </span>the</span></span></span></div><div class="t m0 x1d h4a y2b35 ff19 fs26 fc0 sc0 ls0 ws0">absolute value <span class="_ _2"></span>of<span class="_ _47"> </span><span class="ff1b">pid<span class="_"> </span></span>and <span class="_ _2"></span>for <span class="_ _2"></span>which <span class="_ _2"></span>the <span class="_ _2"></span>sender <span class="_ _2"></span>has <span class="_ _2"></span>permission <span class="_ _2"></span>to send <span class="_ _2"></span>the</div><div class="t m0 x1d h49 y2b36 ff19 fs26 fc0 sc0 ls0 ws0">signal. <span class="_ _45"> </span>Again,<span class="_ _45"> </span>the <span class="_ _9"></span>set <span class="_ _9"></span>of <span class="_ _23"></span>all <span class="_ _9"></span>processes <span class="_ _9"></span>excludes <span class="_ _9"></span>certain <span class="_ _9"></span>system <span class="_ _23"></span>pr<span class="_ _0"></span>ocesses,</div><div class="t m0 x1d h49 y2b37 ff19 fs26 fc0 sc0 ls0 ws0">as described earlier<span class="_ _6"></span>.</div><div class="t m0 x32 h4d y2b38 ff1b fs26 fc0 sc0 ls0 ws0">pid<span class="_ _59"> </span><span class="ff1a">==<span class="_ _46"> </span><span class="ff20">−<span class="ff19 lsc5f">1T<span class="_ _1b0"></span><span class="ls0">he <span class="_ _2"></span>signal <span class="_ _3"></span>is <span class="_ _3"></span>sent <span class="_ _3"></span>to <span class="_ _3"></span>all <span class="_ _3"></span>processes <span class="_ _3"></span>on <span class="_ _3"></span>the <span class="_ _2"></span>system <span class="_ _3"></span>for <span class="_ _3"></span>which <span class="_ _3"></span>the <span class="_ _3"></span>sender <span class="_ _3"></span>has</span></span></span></span></div><div class="t m0 x1d h49 y2b39 ff19 fs26 fc0 sc0 ls0 ws0">permission <span class="_ _42"> </span>to <span class="_ _42"> </span>send <span class="_ _42"> </span>the <span class="_ _53"> </span>signal.<span class="_ _54"> </span>As <span class="_ _42"> </span>before, <span class="_ _42"> </span>the <span class="_ _42"> </span>set <span class="_ _42"> </span>of <span class="_ _53"> </span>processes <span class="_ _42"> </span>excludes</div><div class="t m0 x1d h49 y2b3a ff19 fs26 fc0 sc0 ls0 ws0">certain system processes.</div><div class="t m0 x3f h49 y2b3b ff19 fs26 fc0 sc0 ls0 ws0">As <span class="_ _47"> </span>we’ve <span class="_ _47"> </span>mentioned, <span class="_ _47"> </span>a <span class="_ _47"> </span>process <span class="_ _47"> </span>needs <span class="_ _47"> </span>permission <span class="_ _47"> </span>to <span class="_ _47"> </span>send <span class="_ _45"> </span>a <span class="_ _66"> </span>signal <span class="_ _45"> </span>to <span class="_ _47"> </span>another</div><div class="t m0 x32 h49 y2b3c ff19 fs26 fc0 sc0 ls0 ws0">process. <span class="_"> </span>The<span class="_ _47"> </span>superuser <span class="_ _2"></span>can <span class="_ _2"></span>send <span class="_ _3"></span>a <span class="_ _2"></span>signal <span class="_ _3"></span>to <span class="_ _2"></span>any <span class="_ _2"></span>process. <span class="_ _47"> </span>For<span class="_ _66"> </span>other <span class="_ _2"></span>users, <span class="_ _3"></span>the <span class="_ _2"></span>basic <span class="_ _3"></span>rule</div><div class="t m0 x32 h49 y2b3d ff19 fs26 fc0 sc0 ls0 ws0">is that <span class="_ _2"></span>the <span class="_ _2"></span>real or effective <span class="_ _2"></span>user ID <span class="_ _2"></span>of <span class="_ _2"></span>the sender <span class="_ _2"></span>has <span class="_ _2"></span>to <span class="_ _2"></span>equal the <span class="_ _2"></span>real or <span class="_ _2"></span>effective user ID</div><div class="t m0 x32 h4d y2b3e ff19 fs26 fc0 sc0 ls0 ws0">of <span class="_ _3"></span>the <span class="_ _9"></span>receiver<span class="_ _6"></span><span class="lsc60">.I<span class="_ _62"></span><span class="lsc61">ft<span class="_ _8"></span><span class="ls0">he <span class="_ _9"></span>implementation <span class="_ _9"></span>supports<span class="_ _47"> </span><span class="ff1a">_POSIX_SAVED_IDS<span class="_ _45"> </span></span>(as <span class="_ _9"></span>POSIX.1 <span class="_ _9"></span>now</span></span></span></div><div class="t m0 x32 h49 y2b3f ff19 fs26 fc0 sc0 lscc ws0">re<span class="ls0">quires), the <span class="_ _2"></span>saved <span class="_ _2"></span>set-user-ID of <span class="_ _2"></span>the receiver is <span class="_ _2"></span>checked <span class="_ _2"></span>instead <span class="_ _2"></span>of <span class="_ _2"></span>its effective user <span class="_ _2"></span>ID.</span></div><div class="t m0 x32 h49 y2b40 ff19 fs26 fc0 sc0 ls0 ws0">One <span class="_ _47"> </span>special <span class="_ _66"> </span>case <span class="_ _47"> </span>for <span class="_ _47"> </span>the <span class="_ _47"> </span>permission <span class="_ _47"> </span>testing <span class="_ _47"> </span>also <span class="_ _66"> </span>exists: <span class="_ _47"> </span>if <span class="_ _47"> </span>the <span class="_ _47"> </span>signal <span class="_ _47"> </span>being <span class="_ _66"> </span>sent <span class="_ _47"> </span>is</div><div class="t m0 x32 h4d y2b41 ff1a fs26 fc0 sc0 ls0 ws0">SIGCONT<span class="ff19 lsd3">,ap<span class="_ _d"></span><span class="lscc">ro<span class="_ _2"></span><span class="ls0">cess can send it to any other process in the same session.</span></span></span></div><div class="t m0 x3f h4a y2b42 ff19 fs26 fc0 sc0 ls0 ws0">POSIX.1 <span class="_ _3"></span>deﬁnes <span class="_ _2"></span>signal <span class="_ _3"></span>number <span class="_ _3"></span>0 <span class="_ _3"></span>as <span class="_ _3"></span>the <span class="_ _3"></span>null <span class="_ _3"></span>signal.<span class="_ _16"> </span>If <span class="_ _3"></span>the<span class="_ _47"> </span><span class="ff1b">signo<span class="_ _47"> </span></span>argument <span class="_ _3"></span>is <span class="_ _2"></span>0, <span class="_ _3"></span>then</div><div class="t m0 x32 h4d y2b43 ff19 fs26 fc0 sc0 ls0 ws0">the normal error checking is performed by<span class="_"> </span><span class="ff1a">kill</span><span class="lsc62">,b<span class="_ _5"></span><span class="ls0">ut no signal is sent.<span class="_ _46"> </span>This <span class="_ _2"></span>technique is</span></span></div><div class="t m0 x32 h49 y2b44 ff19 fs26 fc0 sc0 ls0 ws0">often <span class="_ _3"></span>used <span class="_ _3"></span>to <span class="_ _9"></span>determine <span class="_ _3"></span>if <span class="_ _3"></span>a <span class="_ _9"></span>speciﬁc <span class="_ _3"></span>process <span class="_ _3"></span>still <span class="_ _3"></span>exists.<span class="_ _16"> </span>If <span class="_ _9"></span>we <span class="_ _3"></span>send <span class="_ _3"></span>the <span class="_ _9"></span>process <span class="_ _2"></span>the <span class="_ _9"></span>null</div><div class="t m0 x32 h4d y2b45 ff19 fs26 fc0 sc0 ls0 ws0">signal <span class="_ _e"> </span>and <span class="_ _e"> </span>it <span class="_ _e"> </span>doesn’t <span class="_ _e"> </span>exist,<span class="_ _4b"> </span><span class="ff1a">kill<span class="_ _4b"> </span></span><span class="lscc">re<span class="_ _2"></span></span>turns<span class="_ _4b"> </span><span class="ff20">−</span><span class="lsc63">1a<span class="_ _c"></span><span class="ls0">nd<span class="_ _4b"> </span><span class="ff1a">errno<span class="_ _4b"> </span></span>is <span class="_"> </span>set <span class="_ _53"> </span>to<span class="_ _4b"> </span><span class="ff1a">ESRCH</span><span class="lsc64">.B<span class="_ _64"></span><span class="lsc63">ea<span class="_ _55"></span><span class="ls0">ware,</span></span></span></span></span></div><div class="t m0 x32 h49 y2b46 ff19 fs26 fc0 sc0 ls0 ws0">however<span class="_ _6"></span><span class="lsc65">,t<span class="_ _c"></span><span class="ls0">hat <span class="_ _53"> </span>UNIX <span class="_"> </span>systems <span class="_ _53"> </span>recycle <span class="_ _53"> </span>process <span class="_ _53"> </span>IDs <span class="_ _e"> </span>after <span class="_ _e"> </span>some <span class="_ _e"> </span>amount <span class="_ _e"> </span>of <span class="_ _e"> </span>time, <span class="_ _e"> </span>so <span class="_ _e"> </span>the</span></span></div><div class="t m0 x32 h49 y2b47 ff19 fs26 fc0 sc0 ls0 ws0">existence <span class="_ _23"></span>of <span class="_ _23"> </span>a <span class="_ _23"> </span>process <span class="_ _23"></span>with <span class="_ _23"> </span>a <span class="_ _23"> </span>given <span class="_ _23"> </span>process <span class="_ _23"></span>ID <span class="_ _23"> </span>does <span class="_ _23"> </span>not <span class="_ _23"> </span>necessarily <span class="_ _42"> </span>mean <span class="_ _23"></span>that <span class="_ _23"></span>it’s <span class="_ _23"> </span>the</div><div class="t m0 x32 h49 y2b48 ff19 fs26 fc0 sc0 ls0 ws0">process that you think it is.</div></div><div class="pi" data-data='{"ctm":[2.100000,0.000000,0.000000,2.100000,-115.668004,-156.491993]}'></div></div>
