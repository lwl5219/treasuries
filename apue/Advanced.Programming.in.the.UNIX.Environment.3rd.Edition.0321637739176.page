<div id="pfb0" class="pf w4 h1f" data-page-no="b0"><div class="pc pcb0 w4 h1f"><img class="bi x0 y0 w3 h4" alt="" src="apue/bgb0.png"/><div class="t m0 x31 h2 y8e ff1 fs0 fc0 sc0 ls0 ws0"><span class="fc1 sc0">ptg10805159</span></div><div class="t m0 x35 h24 ya4 ff18 fs0 fc0 sc0 ls0 ws0">142<span class="_ _1b"> </span><span class="ff19">Files <span class="_"> </span>and <span class="_"> </span>Directories <span class="_ _18d"> </span>Chapter<span class="_ _4b"> </span>4</span></div><div class="t m0 x32 h57 yddc ff18 fs2d fc0 sc0 ls0 ws0">4.15<span class="_ _60"> </span><span class="ff19">Examine <span class="_ _44"> </span>the <span class="_ _44"> </span>archive <span class="_ _35"> </span>formats <span class="_ _44"> </span>used <span class="_ _35"> </span>by <span class="_ _44"> </span>the<span class="_ _51"> </span><span class="ff1a">cpio</span></span></div><div class="t m0 x109 h5f y1450 ff19 fs2d fc0 sc0 ls0 ws0">(</div><div class="t m0 x1ba h5f yddc ff19 fs2d fc0 sc0 ls0 ws0">1</div><div class="t m0 x1af h5f y1450 ff19 fs2d fc0 sc0 ls0 ws0">)</div><div class="t m0 x1bf h57 yddc ff19 fs2d fc0 sc0 ls0 ws0">and<span class="_ _51"> </span><span class="ff1a">tar</span></div><div class="t m0 x5f h5f y1450 ff19 fs2d fc0 sc0 ls0 ws0">(</div><div class="t m0 x16a h5f yddc ff19 fs2d fc0 sc0 ls0 ws0">1</div><div class="t m0 x16c h5f y1450 ff19 fs2d fc0 sc0 ls0 ws0">)</div><div class="t m0 xe4 h5f yddc ff19 fs2d fc0 sc0 ls0 ws0">commands. <span class="_ _51"> </span>(These</div><div class="t m0 x90 h58 yddd ff19 fs2d fc0 sc0 ls0 ws0">descriptions <span class="_ _3"></span>ar<span class="ls61e">eu<span class="_ _8"></span><span class="ls0">sually <span class="_ _3"></span>found <span class="_ _3"></span>in <span class="_ _3"></span>Section <span class="_ _9"></span>5 <span class="_ _2"></span>of <span class="_ _9"></span>the<span class="_ _66"> </span><span class="ff1b">UNIX <span class="_ _3"></span>Programmer <span class="_ _84"></span>’<span class="_ _1"></span><span class="ls61f">sM<span class="_ _d"></span><span class="ls0">anual<span class="ff19">.) <span class="_ _66"> </span>How<span class="_ _47"> </span>many</span></span></span></span></span></span></div><div class="t m0 x90 h5f ydde ff19 fs2d fc0 sc0 ls0 ws0">of the <span class="_ _2"></span>three <span class="_ _2"></span>possible <span class="_ _2"></span>time <span class="_ _2"></span>values ar<span class="ls620">es<span class="_ _d"></span><span class="ls0">aved <span class="_ _2"></span>for <span class="_ _2"></span>each <span class="_ _2"></span>ﬁle?<span class="_ _59"> </span>When <span class="_ _2"></span>a <span class="_ _2"></span>ﬁle <span class="_ _2"></span>is <span class="_ _2"></span>restor<span class="_ _0"></span>ed, what <span class="_ _2"></span>value</span></span></div><div class="t m0 x90 h5f y1451 ff19 fs2d fc0 sc0 ls0 ws0">do you think the access time is set to, and why?</div><div class="t m0 x32 h5f y1452 ff18 fs2d fc0 sc0 ls0 ws0">4.16<span class="_ _60"> </span><span class="ff19">Does <span class="_ _3"></span>the <span class="_ _9"></span>UNIX <span class="_ _3"></span>System <span class="_ _3"></span>have <span class="_ _3"></span>a <span class="_ _3"></span>fundamental <span class="_ _9"></span>limitation <span class="_ _3"></span>on <span class="_ _3"></span>the <span class="_ _3"></span>depth <span class="_ _3"></span>of <span class="_ _3"></span>a <span class="_ _9"></span>directory <span class="_ _2"></span>tree? <span class="_ _66"> </span>T<span class="_ _1"></span>o</span></div><div class="t m0 x90 h5f y1453 ff19 fs2d fc0 sc0 ls0 ws0">ﬁnd <span class="_ _9"></span>out, <span class="_ _23"> </span>write <span class="_ _23"></span>a <span class="_ _9"></span>program <span class="_ _9"></span>that <span class="_ _23"> </span>creates <span class="_ _9"></span>a <span class="_ _23"> </span>directory <span class="_ _9"></span>and <span class="_ _9"></span>then <span class="_ _23"> </span>changes <span class="_ _23"> </span>to <span class="_ _9"></span>that <span class="_ _23"> </span>directory<span class="_ _4"></span>,<span class="_ _45"> </span>in<span class="_ _45"> </span>a</div><div class="t m0 x90 h5f y1454 ff19 fs2d fc0 sc0 ls0 ws0">loop. <span class="_ _47"> </span>Make<span class="_ _47"> </span>certain <span class="_ _3"></span>that <span class="_ _9"></span>the <span class="_ _3"></span>length <span class="_ _9"></span>of <span class="_ _3"></span>the <span class="_ _9"></span>absolute <span class="_ _9"></span>pathname <span class="_ _3"></span>of <span class="_ _9"></span>the <span class="_ _3"></span>leaf <span class="_ _9"></span>of <span class="_ _9"></span>this <span class="_ _3"></span>directory <span class="_ _3"></span>is</div><div class="t m0 x90 h57 y1455 ff19 fs2d fc0 sc0 ls0 ws0">greater <span class="_ _3"></span>than <span class="_ _23"> </span>your <span class="_ _9"></span>system’s<span class="_ _47"> </span><span class="ff1a">PATH_MAX<span class="_ _45"> </span></span>limit. <span class="_ _47"> </span>Can<span class="_ _45"> </span>you <span class="_ _9"></span>call<span class="_ _47"> </span><span class="ff1a">getcwd<span class="_ _45"> </span></span>to <span class="_ _9"></span>fetch <span class="_ _9"></span>the <span class="_ _9"></span>directory’s</div><div class="t m0 x90 h5f y1456 ff19 fs2d fc0 sc0 ls0 ws0">pathname? <span class="_ _47"> </span>How<span class="_ _45"> </span>do <span class="_ _3"></span>the <span class="_ _9"></span>standar<span class="ls621">dU<span class="_ _8"></span><span class="ls0">NIX <span class="_ _9"></span>System <span class="_ _9"></span>tools <span class="_ _9"></span>deal <span class="_ _9"></span>with <span class="_ _23"></span>this <span class="_ _3"></span>long <span class="_ _23"></span>pathname?<span class="_ _46"> </span>Can</span></span></div><div class="t m0 x90 h57 y1457 ff19 fs2d fc0 sc0 ls0 ws0">you archive the dir<span class="_ _0"></span>ectory using either<span class="_"> </span><span class="ff1a">tar<span class="_ _e"> </span></span>or<span class="_"> </span><span class="ff1a">cpio</span>?</div><div class="t m0 x32 h57 y1458 ff18 fs2d fc0 sc0 ls0 ws0">4.17<span class="_ _60"> </span><span class="ff19">In <span class="_ _9"></span>Section <span class="_ _3"></span>3.16, <span class="_ _9"></span>we <span class="_ _3"></span>described <span class="_ _9"></span>the<span class="_ _66"> </span><span class="ff1a">/dev/fd<span class="_ _47"> </span></span>feature. <span class="_ _47"> </span>For<span class="_ _66"> </span>any <span class="_ _9"></span>user <span class="_ _3"></span>to <span class="_ _9"></span>be <span class="_ _3"></span>able <span class="_ _9"></span>to <span class="_ _3"></span>access <span class="_ _9"></span>these</span></div><div class="t m0 x90 h57 y1459 ff19 fs2d fc0 sc0 ls0 ws0">ﬁles, <span class="_ _53"> </span>their <span class="_"> </span>permissions <span class="_ _42"> </span>must <span class="_"> </span>be<span class="_ _44"> </span><span class="ff1a">rw-rw-rw-</span><span class="ls622">.S<span class="_ _52"></span><span class="ls0">ome <span class="_"> </span>pr<span class="_ _0"></span>ograms <span class="_ _53"> </span>that <span class="_"> </span>cr<span class="_ _0"></span>eate <span class="_ _53"> </span>an <span class="_"> </span>output <span class="_ _42"> </span>ﬁle</span></span></div><div class="t m0 x90 h5f y145a ff19 fs2d fc0 sc0 ls0 ws0">delete the ﬁle ﬁrst, in case it already exists, ignoring the r<span class="_ _0"></span>eturn code:</div><div class="t m0 x138 h57 y145b ff1a fs2d fc0 sc0 ls0 ws0">unlink(path);</div><div class="t m0 x138 h57 y145c ff1a fs2d fc0 sc0 ls0 ws0">if ((fd = creat(path, FILE_MODE)) &lt; 0)</div><div class="t m0 x1d h57 y145d ff1a fs2d fc0 sc0 ls0 ws0">err_sys(...);</div><div class="t m0 x90 h57 y145e ff19 fs2d fc0 sc0 ls0 ws0">What happens if<span class="_"> </span><span class="ff1a">path<span class="_ _e"> </span></span>is<span class="_"> </span><span class="ff1a">/dev/fd/1</span>?</div></div><div class="pi" data-data='{"ctm":[2.100000,0.000000,0.000000,2.100000,-115.668004,-156.491993]}'></div></div>
