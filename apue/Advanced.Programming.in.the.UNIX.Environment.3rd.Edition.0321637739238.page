<div id="pfee" class="pf w4 h1f" data-page-no="ee"><div class="pc pcee w4 h1f"><img class="bi x0 y0 w3 h4" alt="" src="apue/bgee.png"/><div class="t m0 x31 h2 y8e ff1 fs0 fc0 sc0 ls0 ws0"><span class="fc1 sc0">ptg10805159</span></div><div class="t m0 x35 h24 ya4 ff18 fs0 fc0 sc0 ls0 ws0">204<span class="_ _1b"> </span><span class="ff19">Process <span class="_"> </span>Envir<span class="_ _0"></span>onment <span class="_ _1c1"> </span>Chapter<span class="_ _44"> </span>7</span></div><div class="t m0 x19a h5e y1b99 ff1a fs10 fc0 sc0 ls0 ws0">NULL</div><div class="t m0 x52 h5e y1b9a ff1a fs10 fc0 sc0 ls0 ws0">environ:</div><div class="t m0 x47 h4f y1b9b ff1a fs11 fc0 sc0 ls0 ws0">HOME=/home/sar\0</div><div class="t m0 x47 h6d y1b9c ff1a fs12 fc0 sc0 ls0 ws0">PATH=:/bin:/usr/bin\0</div><div class="t m0 x47 h63 y1b9d ff1a fs13 fc0 sc0 ls0 ws0">SHELL=/bin/bash\0</div><div class="t m0 x1e8 h6f y1b9e ff1a fs14 fc0 sc0 ls0 ws0">USER=sar\0</div><div class="t m0 x1e8 h66 y1b9f ff1a fs15 fc0 sc0 ls0 ws0">LOGNAME=sar\0</div><div class="t m0 xdf h32 y1ba0 ff19 fs15 fc0 sc0 ls0 ws0">environment</div><div class="t m0 x1b h32 y1ba1 ff19 fs15 fc0 sc0 ls0 ws0">pointer</div><div class="t m0 x17 h32 y1ba0 ff19 fs15 fc0 sc0 ls0 ws0">environment</div><div class="t m0 x1a4 h32 y1ba1 ff19 fs15 fc0 sc0 ls0 ws0">list</div><div class="t m0 x1e9 h32 y1ba2 ff19 fs15 fc0 sc0 ls0 ws0">environment</div><div class="t m0 x166 h32 y1ba3 ff19 fs15 fc0 sc0 ls0 ws0">strings</div><div class="t m0 x180 h32 y1ba4 ff18 fs15 fc0 sc0 ls0 ws0">Figure 7.5<span class="_ _5a"> </span><span class="ff19">Environment consisting of ﬁve C character strings</span></div><div class="t m0 x32 hd0 y1ba5 ff1b fs33 fc0 sc0 ls0 ws0">environment pointer<span class="ff19 ls856">,t<span class="_ _4f"></span><span class="ls0">he <span class="_ _2"></span>array of <span class="_ _2"></span>pointers the <span class="_ _2"></span>environment list, and <span class="_ _2"></span>the strings <span class="_ _2"></span>they point</span></span></div><div class="t m0 x32 hd0 y1ba6 ff19 fs33 fc0 sc0 ls0 ws0">to the<span class="_"> </span><span class="ff1b">environment strings</span>.</div><div class="t m0 x3f h67 y1ba7 ff19 fs33 fc0 sc0 ls0 ws0">By convention, the environment consists of</div><div class="t m0 x3f h68 y1ba8 ff1b fs33 fc0 sc0 ls0 ws0">name<span class="ff1a">=</span>value</div><div class="t m0 x32 h67 y1ba9 ff19 fs33 fc0 sc0 ls0 ws0">strings, <span class="_ _2"></span>as <span class="_ _3"></span>shown <span class="_ _3"></span>in <span class="_ _2"></span>Figur<span class="ls857">e7<span class="_ _8"></span><span class="ls0">.5. <span class="_ _47"> </span>Most<span class="_ _47"> </span>predeﬁned <span class="_ _2"></span>names <span class="_ _3"></span>ar<span class="ls858">ee<span class="_ _8"></span><span class="ls0">ntirely <span class="_ _2"></span>uppercase, <span class="_ _2"></span>but <span class="_ _3"></span>this</span></span></span></span></div><div class="t m0 x32 h67 y1baa ff19 fs33 fc0 sc0 ls0 ws0">is only a convention.</div><div class="t m0 x3f h68 y1bab ff19 fs33 fc0 sc0 ls0 ws0">Historically<span class="_ _4"></span><span class="ls859">,m<span class="_ _4a"></span><span class="ls0">ost <span class="_"> </span>UNIX <span class="_ _66"> </span>systems <span class="_ _66"> </span>have <span class="_ _66"> </span>provided <span class="_"> </span>a <span class="_ _47"> </span>thir<span class="ls85a">da<span class="_ _1d"></span><span class="ls1d5">rg<span class="_ _2"></span><span class="ls0">ument <span class="_"> </span>to <span class="_ _47"> </span>the<span class="_ _46"> </span><span class="ff1a">main</span></span></span></span></span></span></div><div class="t m0 x32 h67 y1bac ff19 fs33 fc0 sc0 ls0 ws0">function that is the address of the envir<span class="_ _0"></span>onment list:</div><div class="t m0 x3f h98 y1bad ff1a fs4a fc0 sc0 ls0 ws0">int main(int<span class="_"> </span><span class="ff1b">argc</span><span class="ls85b">,c<span class="_ _1d"></span><span class="ls0">har *<span class="ff1b">argv</span>[], char *<span class="ff1b">envp</span>[]);</span></span></div><div class="t m0 x32 h68 y1bae ff19 fs33 fc0 sc0 ls0 ws0">Because <span class="_ _42"> </span>ISO <span class="_ _53"> </span>C <span class="_ _42"> </span>speciﬁes <span class="_ _53"> </span>that <span class="_ _42"> </span>the<span class="_ _4b"> </span><span class="ff1a">main<span class="_ _44"> </span></span>function <span class="_ _42"> </span>be <span class="_ _53"> </span>written <span class="_ _42"> </span>with <span class="_ _53"> </span>two <span class="_ _42"> </span>arguments, <span class="_ _42"> </span>and</div><div class="t m0 x32 h68 y1baf ff19 fs33 fc0 sc0 ls0 ws0">because <span class="_"> </span>this <span class="_ _53"> </span>thir<span class="ls85c">da<span class="_ _4a"></span><span class="ls1d5">rg<span class="_ _2"></span><span class="ls0">ument <span class="_"> </span>pr<span class="_ _0"></span>ovides <span class="_ _e"> </span>no <span class="_"> </span>beneﬁt <span class="_ _e"> </span>over <span class="_"> </span>the <span class="_ _e"> </span>global <span class="_"> </span>variable<span class="_ _4b"> </span><span class="ff1a">environ</span>,</span></span></span></div><div class="t m0 x32 h68 y1bb0 ff19 fs33 fc0 sc0 ls0 ws0">POSIX.1 <span class="_ _44"> </span>speciﬁes <span class="_ _4b"> </span>that<span class="_ _54"> </span><span class="ff1a">environ<span class="_ _65"> </span></span>should <span class="_ _4b"> </span>be <span class="_ _44"> </span>used <span class="_ _4b"> </span>instead <span class="_ _44"> </span>of <span class="_ _4b"> </span>the <span class="_ _44"> </span>(possible) <span class="_ _4b"> </span>third</div><div class="t m0 x32 h68 y1bb1 ff19 fs33 fc0 sc0 ls0 ws0">argument. <span class="_ _35"> </span>Access<span class="_ _44"> </span>to <span class="_ _42"> </span>speciﬁc <span class="_ _23"> </span>environment <span class="_ _42"> </span>variables <span class="_ _42"> </span>is <span class="_ _42"> </span>normally <span class="_ _42"> </span>through <span class="_ _23"> </span>the<span class="_ _44"> </span><span class="ff1a">getenv</span></div><div class="t m0 x32 h68 y1bb2 ff19 fs33 fc0 sc0 ls0 ws0">and<span class="_ _16"> </span><span class="ff1a">putenv<span class="_"> </span></span>functions, <span class="_ _47"> </span>described <span class="_ _47"> </span>in <span class="_ _45"> </span>Section <span class="_ _47"> </span>7.9, <span class="_ _47"> </span>instead <span class="_ _45"> </span>of <span class="_ _47"> </span>through <span class="_ _47"> </span>the<span class="_ _16"> </span><span class="ff1a">environ</span></div><div class="t m0 x32 h68 y1bb3 ff19 fs33 fc0 sc0 ls0 ws0">variable. <span class="_"> </span>But<span class="_ _47"> </span>to go <span class="_ _2"></span>through the <span class="_ _2"></span>entir<span class="ls85d">ee<span class="_ _4f"></span><span class="ls0">nvironment, the<span class="_ _66"> </span><span class="ff1a">environ<span class="_ _47"> </span></span>pointer must <span class="_ _2"></span>be <span class="_ _2"></span>used.</span></span></div><div class="t m0 x35 hec y1bb4 ff16 fs80 fc0 sc0 ls0 ws0">7.6 <span class="_ _68"> </span>Memor<span class="ls85e">yL<span class="_ _52"></span><span class="ls85f">ay<span class="ls0">out <span class="_"> </span>of <span class="_"> </span>a <span class="_"> </span>C <span class="_"> </span>Program</span></span></span></div><div class="t m0 x32 h67 y1bb5 ff19 fs33 fc0 sc0 ls0 ws0">Historically<span class="_ _4"></span><span class="ls1d7">,aCp<span class="_ _5"></span><span class="ls1d5">ro<span class="ls0">gram has been composed of the following pieces:</span></span></span></div><div class="t m0 x3f h67 y1bb6 ff19 fs33 fc0 sc0 ls495 ws0">•T<span class="_ _4e"></span><span class="ls0">ext <span class="_"> </span>segment, <span class="_"> </span>consisting <span class="_"> </span>of <span class="_"> </span>the <span class="_"> </span>machine <span class="_"> </span>instructions <span class="_"> </span>that <span class="_"> </span>the <span class="_"> </span>CPU <span class="_ _e"> </span>executes.</span></div><div class="t m0 x15 h67 y1bb7 ff19 fs33 fc0 sc0 ls0 ws0">Usually<span class="_ _4"></span><span class="ls860">,t<span class="_ _b"></span><span class="ls0">he <span class="_ _9"></span>text <span class="_ _42"> </span>segment <span class="_ _23"></span>is <span class="_ _23"></span>sharable <span class="_ _23"> </span>so <span class="_ _23"> </span>that <span class="_ _23"> </span>only <span class="_ _23"> </span>a <span class="_ _42"> </span>single <span class="_ _23"></span>copy <span class="_ _23"></span>needs <span class="_ _23"> </span>to <span class="_ _23"> </span>be <span class="_ _23"> </span>in</span></span></div><div class="t m0 x15 h67 y1bb8 ff19 fs33 fc0 sc0 ls0 ws0">memory <span class="_ _3"></span>for <span class="_ _9"></span>frequently <span class="_ _2"></span>executed <span class="_ _9"></span>programs, <span class="_ _3"></span>such <span class="_ _3"></span>as <span class="_ _9"></span>text <span class="_ _3"></span>editors, <span class="_ _9"></span>the <span class="_ _3"></span>C <span class="_ _3"></span>compiler<span class="_ _1"></span>,</div><div class="t m0 x15 h67 y1bb9 ff19 fs33 fc0 sc0 ls0 ws0">the <span class="_ _53"> </span>shells, <span class="_ _53"> </span>and <span class="_ _53"> </span>so <span class="_ _53"> </span>on.<span class="_ _65"> </span>Also, <span class="_ _53"> </span>the <span class="_ _53"> </span>text <span class="_ _53"> </span>segment <span class="_ _53"> </span>is <span class="_ _53"> </span>often <span class="_ _53"> </span>read-only<span class="_ _4"></span>,<span class="_ _4b"> </span>to<span class="_ _44"> </span>p<span class="ls1d5">re<span class="_ _2"></span></span>vent <span class="_ _53"> </span>a</div><div class="t m0 x15 h67 y1bba ff19 fs33 fc0 sc0 ls0 ws0">program fr<span class="_ _0"></span>om accidentally modifying its instructions.</div><a class="l" href="#pfe" data-dest-detail='[14,"XYZ",50,757,1]'><div class="d m1" style="border-style:none;position:absolute;left:80.891785px;bottom:301.835122px;width:230.054093px;height:19.679993px;background-color:rgba(255,255,255,0.000001);"></div></a></div><div class="pi" data-data='{"ctm":[2.100000,0.000000,0.000000,2.100000,-115.668004,-156.491993]}'></div></div>
