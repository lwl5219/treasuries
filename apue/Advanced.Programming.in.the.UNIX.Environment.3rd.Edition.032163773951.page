<div id="pf33" class="pf w4 h1f" data-page-no="33"><div class="pc pc33 w4 h1f"><img class="bi x0 y0 w3 h4" alt="" src="apue/bg33.png"/><div class="t m0 x31 h2 y8e ff1 fs0 fc0 sc0 ls0 ws0"><span class="fc1 sc0">ptg10805159</span></div><div class="t m0 x35 h24 ya4 ff19 fs0 fc0 sc0 ls0 ws0">Section <span class="_"> </span>1.8<span class="_ _8e"> </span>User <span class="_"> </span>Identiﬁcation<span class="_ _1b"> </span><span class="ff18">17</span></div><div class="t m0 x76 h51 y2a3 ff19 fs2a fc0 sc0 ls0 ws0">Client <span class="_ _9"> </span>versions <span class="_ _23"> </span>of <span class="_ _23"> </span>Mac <span class="_ _9"> </span>OS <span class="_ _23"> </span>X <span class="_ _23"> </span>ship <span class="_ _9"></span>with <span class="_ _23"> </span>the <span class="_ _9"> </span>superuser <span class="_ _23"> </span>account <span class="_ _23"> </span>disabled; <span class="_ _9"></span>server <span class="_ _23"> </span>versions <span class="_ _9"> </span>ship</div><div class="t m0 x76 h51 y2a4 ff19 fs2a fc0 sc0 ls0 ws0">with <span class="_ _9"> </span>the <span class="_ _23"> </span>account <span class="_ _9"> </span>already <span class="_ _23"> </span>enabled.<span class="_ _59"> </span>Instructions <span class="_ _23"> </span>ar<span class="ls19a">ea<span class="_ _b"></span><span class="ls0">vailable <span class="_ _23"> </span>on <span class="_ _23"> </span>Apple’s <span class="_ _9"></span>W<span class="_ _1"></span>eb <span class="_ _9"> </span>site <span class="_ _23"> </span>describing</span></span></div><div class="t m0 x76 h52 y2a5 ff19 fs2a fc0 sc0 ls0 ws0">how to enable it.<span class="_ _35"> </span>See<span class="_"> </span><span class="ff1a">http://support.apple.com/kb/HT1528</span>.</div><div class="t m0 x35 h27 y46d ff16 fsf fc0 sc0 ls0 ws0">Group ID</div><div class="t m0 x32 h2b y46e ff19 fsf fc0 sc0 ls0 ws0">Our entry in the passwor<span class="ls19b">dﬁ<span class="_ _d"></span><span class="ls0">le also speciﬁes our numeric<span class="_"> </span><span class="ff1b">group ID</span><span class="ls19c">.T<span class="_ _4a"></span><span class="ls0">his, too, is assigned</span></span></span></span></div><div class="t m0 x32 h2a y46f ff19 fsf fc0 sc0 ls0 ws0">by <span class="_ _3"></span>the <span class="_ _3"></span>system <span class="_ _3"></span>administrator <span class="_ _3"></span>when <span class="_ _3"></span>our <span class="_ _3"></span>login <span class="_ _3"></span>name <span class="_ _3"></span>is <span class="_ _3"></span>assigned.<span class="_ _61"> </span><span class="lsbc">Ty<span class="_ _23"></span></span>pically<span class="_ _4"></span><span class="ls19d">,t<span class="_ _8"></span><span class="ls0">he <span class="_ _3"></span>password</span></span></div><div class="t m0 x32 h2a y470 ff19 fsf fc0 sc0 ls0 ws0">ﬁle contains <span class="_ _2"></span>multiple <span class="_ _2"></span>entries <span class="_ _2"></span>that <span class="_ _2"></span>specify the <span class="_ _2"></span>same <span class="_ _2"></span>group ID.<span class="_ _61"> </span>Groups ar<span class="ls19e">en<span class="_ _4f"></span><span class="ls0">ormally <span class="_ _2"></span>used</span></span></div><div class="t m0 x32 h2a y471 ff19 fsf fc0 sc0 ls0 ws0">to <span class="_ _47"> </span>collect <span class="_ _47"> </span>users <span class="_ _47"> </span>together <span class="_ _45"> </span>into <span class="_ _47"> </span>projects <span class="_ _66"> </span>or <span class="_ _47"> </span>departments.<span class="_ _5f"> </span>This <span class="_ _45"> </span>allows <span class="_ _47"> </span>the <span class="_ _47"> </span>sharing <span class="_ _47"> </span>of</div><div class="t m0 x32 h2a y472 ff19 fsf fc0 sc0 ls45 ws0">re<span class="ls0">sources, such <span class="_ _2"></span>as ﬁles, <span class="_ _2"></span>among <span class="_ _2"></span>members of <span class="_ _2"></span>the same <span class="_ _2"></span>group. <span class="_"> </span>W<span class="_ _6"></span>e’ll <span class="_ _2"></span>see in <span class="_ _2"></span>Section 4.5 <span class="_ _2"></span>that</span></div><div class="t m0 x32 h2a y473 ff19 fsf fc0 sc0 ls0 ws0">we <span class="_ _9"></span>can <span class="_ _9"></span>set <span class="_ _9"></span>the <span class="_ _9"></span>permissions <span class="_ _9"></span>on <span class="_ _9"></span>a <span class="_ _9"></span>ﬁle <span class="_ _9"></span>so <span class="_ _9"></span>that <span class="_ _9"></span>all <span class="_ _9"></span>members <span class="_ _9"></span>of <span class="_ _9"></span>a <span class="_ _9"></span>group <span class="_ _3"></span>can <span class="_ _9"></span>access <span class="_ _9"></span>the <span class="_ _9"></span>ﬁle,</div><div class="t m0 x32 h2a y474 ff19 fsf fc0 sc0 ls0 ws0">whereas others outside the gr<span class="_ _0"></span>oup cannot.</div><div class="t m0 x3f h2a y475 ff19 fsf fc0 sc0 ls0 ws0">There<span class="_ _44"> </span>is<span class="_ _4b"> </span>also <span class="_ _53"> </span>a <span class="_ _53"> </span>group <span class="_ _53"> </span>ﬁle <span class="_ _53"> </span>that <span class="_ _53"> </span>maps <span class="_ _53"> </span>group <span class="_ _53"> </span>names <span class="_ _53"> </span>into <span class="_ _e"> </span>numeric <span class="_ _53"> </span>group <span class="_ _42"> </span>IDs.<span class="_ _65"> </span>The</div><div class="t m0 x32 h26 y476 ff19 fsf fc0 sc0 ls0 ws0">group ﬁle is usually<span class="_"> </span><span class="ff1a">/etc/group</span>.</div><div class="t m0 x3f h2a y477 ff19 fsf fc0 sc0 ls0 ws0">The <span class="_ _23"></span>use <span class="_ _23"></span>of <span class="_ _23"></span>numeric <span class="_ _9"></span>user <span class="_ _23"> </span>IDs <span class="_ _23"> </span>and <span class="_ _23"> </span>numeric <span class="_ _23"> </span>group <span class="_ _23"></span>IDs <span class="_ _23"></span>for <span class="_ _9"></span>permissions <span class="_ _23"> </span>is <span class="_ _23"> </span>historical.</div><div class="t m0 x32 h2a y478 ff19 fsf fc0 sc0 ls65 ws0">Wi<span class="_ _3"></span><span class="ls0">th <span class="_ _23"></span>every <span class="_ _23"></span>ﬁle <span class="_ _23"></span>on <span class="_ _23"></span>disk, <span class="_ _23"></span>the <span class="_ _23"></span>ﬁle <span class="_ _23"></span>system <span class="_ _23"></span>stores <span class="_ _9"></span>both <span class="_ _23"> </span>the <span class="_ _23"> </span>user <span class="_ _23"> </span>ID <span class="_ _23"> </span>and <span class="_ _23"> </span>the <span class="_ _23"> </span>group <span class="_ _23"></span>ID <span class="_ _23"></span>of <span class="_ _23"></span>a</span></div><div class="t m0 x32 h2a y479 ff19 fsf fc0 sc0 ls0 ws0">ﬁle’s owner<span class="_ _1"></span><span class="ls19f">.S<span class="_ _5b"></span><span class="ls0">toring <span class="_ _2"></span>both of these <span class="_ _2"></span>values requires only four bytes, <span class="_ _2"></span>assuming that each <span class="_ _2"></span>is</span></span></div><div class="t m0 x32 h2a y47a ff19 fsf fc0 sc0 ls0 ws0">stored <span class="_ _9"></span>as <span class="_ _9"></span>a <span class="_ _23"></span>two-byte <span class="_ _9"></span>integer<span class="_ _1"></span><span class="ls1a0">.I<span class="_ _26"></span><span class="ls1a1">ft<span class="_ _b"></span><span class="ls0">he <span class="_ _9"></span>full <span class="_ _23"></span>ASCII <span class="_ _9"></span>login <span class="_ _23"></span>name <span class="_ _9"></span>and <span class="_ _23"></span>gr<span class="_ _0"></span>oup <span class="_ _9"></span>name <span class="_ _23"></span>wer<span class="ls1a2">eu<span class="_ _43"></span><span class="ls0">sed</span></span></span></span></span></div><div class="t m0 x32 h2a y47b ff19 fsf fc0 sc0 ls0 ws0">instead, <span class="_ _47"> </span>additional <span class="_ _45"> </span>disk <span class="_ _45"> </span>space <span class="_ _47"> </span>would <span class="_ _45"> </span>be <span class="_ _45"> </span>r<span class="_ _0"></span>equired. <span class="_ _61"> </span>In<span class="_ _5a"> </span>addition, <span class="_ _45"> </span>comparing <span class="_ _47"> </span>strings</div><div class="t m0 x32 h2a y47c ff19 fsf fc0 sc0 ls0 ws0">during permission checks is mor<span class="ls44">ee<span class="_ _4f"></span><span class="ls0">xpensive than comparing integers.</span></span></div><div class="t m0 x3f h2a y47d ff19 fsf fc0 sc0 ls0 ws0">Users, <span class="_ _23"></span>however<span class="_ _6"></span><span class="ls1a3">,w<span class="_ _b"></span><span class="ls0">ork <span class="_ _9"></span>better <span class="_ _23"> </span>with <span class="_ _23"></span>names <span class="_ _23"></span>than <span class="_ _23"></span>with <span class="_ _9"></span>numbers, <span class="_ _23"> </span>so <span class="_ _23"> </span>the <span class="_ _23"> </span>passwor<span class="ls1a4">dﬁ<span class="_ _43"></span><span class="ls0">le</span></span></span></span></div><div class="t m0 x32 h2a y47e ff19 fsf fc0 sc0 ls0 ws0">maintains <span class="_ _3"></span>the <span class="_ _3"></span>mapping <span class="_ _3"></span>between <span class="_ _3"></span>login <span class="_ _3"></span>names <span class="_ _3"></span>and <span class="_ _3"></span>user <span class="_ _3"></span>IDs, <span class="_ _3"></span>and <span class="_ _3"></span>the <span class="_ _3"></span>group <span class="_ _2"></span>ﬁle <span class="_ _3"></span>provides</div><div class="t m0 x32 h26 y47f ff19 fsf fc0 sc0 ls0 ws0">the <span class="_ _2"></span>mapping <span class="_ _3"></span>between <span class="_ _3"></span>group <span class="_ _2"></span>names <span class="_ _2"></span>and <span class="_ _3"></span>group <span class="_ _2"></span>IDs.<span class="_ _61"> </span>The<span class="_ _47"> </span><span class="ff1a">ls <span class="_ _d"></span>-l<span class="_ _47"> </span><span class="ff19">command, <span class="_ _2"></span>for <span class="_ _3"></span>example,</span></span></div><div class="t m0 x32 h2a y480 ff19 fsf fc0 sc0 ls0 ws0">prints <span class="_ _2"></span>the <span class="_ _2"></span>login <span class="_ _2"></span>name <span class="_ _2"></span>of <span class="_ _2"></span>the <span class="_ _2"></span>owner <span class="_ _2"></span>of <span class="_ _2"></span>a <span class="_ _2"></span>ﬁle, <span class="_ _2"></span>using <span class="_ _2"></span>the <span class="_ _2"></span>passwor<span class="ls5b">dﬁ<span class="_ _4f"></span><span class="ls0">le <span class="_ _2"></span>to <span class="_ _2"></span>map <span class="_ _2"></span>the <span class="_ _2"></span>numeric</span></span></div><div class="t m0 x32 h2a y481 ff19 fsf fc0 sc0 ls0 ws0">user ID into the corresponding login name.</div><div class="t m0 x76 h51 y482 ff19 fs2a fc0 sc0 ls0 ws0">Early <span class="_ _42"> </span>UNIX <span class="_"> </span>systems <span class="_ _42"> </span>used <span class="_ _42"> </span>16</div><div class="t m0 xb5 h51 y483 ff19 fs2a fc0 sc0 ls0 ws0">-</div><div class="t m0 xb6 h51 y482 ff19 fs2a fc0 sc0 ls0 ws0">bit <span class="_ _42"> </span>integers <span class="_"> </span>to <span class="_ _42"> </span>repr<span class="_ _0"></span>esent <span class="_ _42"> </span>user <span class="_"> </span>and <span class="_ _42"> </span>group <span class="_ _42"> </span>IDs.<span class="_ _16"> </span>Contemporary</div><div class="t m0 x76 h51 y484 ff19 fs2a fc0 sc0 ls0 ws0">UNIX systems use 32</div><div class="t m0 xb7 h51 y485 ff19 fs2a fc0 sc0 ls0 ws0">-</div><div class="t m0 x59 h51 y484 ff19 fs2a fc0 sc0 ls0 ws0">bit integers.</div><div class="t m0 x35 h27 y486 ff16 fsf fc0 sc0 ls0 ws0">Example</div><div class="t m0 x32 h2a y487 ff19 fsf fc0 sc0 ls0 ws0">The program in Figur<span class="_ _0"></span><span class="ls44">e1<span class="_ _d"></span><span class="ls0">.9 prints the user ID and the group ID.</span></span></div><div class="t m0 x32 h4e y488 ff1a fs28 fc0 sc0 ls0 ws0">#include &quot;apue.h&quot;</div><div class="t m0 x32 h4e y489 ff1a fs28 fc0 sc0 ls0 ws0">int</div><div class="t m0 x32 h4e y48a ff1a fs28 fc0 sc0 ls0 ws0">main(void)</div><div class="t m0 x32 h4e y48b ff1a fs28 fc0 sc0 ls0 ws0">{</div><div class="t m0 x8a h4e y48c ff1a fs28 fc0 sc0 ls0 ws0">printf(&quot;uid = %d, gid = %d\n&quot;, getuid(), getgid());</div><div class="t m0 x8a h4e y48d ff1a fs28 fc0 sc0 ls0 ws0">exit(0);</div><div class="t m0 x32 h4e y48e ff1a fs28 fc0 sc0 ls0 ws0">}</div><div class="t m0 xa8 h2e y48f ff18 fs11 fc0 sc0 ls0 ws0">Figure 1.9<span class="_ _5a"> </span><span class="ff19">Print user ID and group ID</span></div><div class="t m0 x32 h54 y490 ff19 fs2c fc0 sc0 ls155 ws0">We <span class="_ _35"> </span>c<span class="_ _9"></span><span class="ls0">all <span class="_ _53"> </span>the <span class="_ _53"> </span>functions<span class="_ _44"> </span><span class="ff1a">getuid<span class="_ _4b"> </span></span>and<span class="_ _4b"> </span><span class="ff1a">getgid<span class="_ _44"> </span></span>to <span class="_ _53"> </span>return <span class="_ _53"> </span>the <span class="_ _53"> </span>user <span class="_ _53"> </span>ID <span class="_ _53"> </span>and <span class="_ _e"> </span>the <span class="_ _53"> </span>group <span class="_ _42"> </span>ID.</span></div><div class="t m0 x32 h55 y491 ff19 fs2c fc0 sc0 ls0 ws0">Running the program yields</div><div class="t m0 x3f h5d y492 ff1a fs2f fc0 sc0 ls0 ws0">$<span class="_"> </span><span class="ff1f">./a.out</span></div><div class="t m0 x3f h5d y493 ff1a fs2f fc0 sc0 ls0 ws0">uid = 205, gid = 105</div><a class="l" href="http://support.apple.com/kb/HT1528"><div class="d m1" style="border-style:none;position:absolute;left:430.636473px;bottom:1203.738916px;width:165.200012px;height:11.984009px;background-color:rgba(255,255,255,0.000001);"></div></a></div><div class="pi" data-data='{"ctm":[2.100000,0.000000,0.000000,2.100000,-115.668004,-156.491993]}'></div></div>
