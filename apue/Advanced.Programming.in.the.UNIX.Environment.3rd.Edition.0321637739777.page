<div id="pf309" class="pf w4 h1f" data-page-no="309"><div class="pc pc309 w4 h1f"><img class="bi x0 y0 w3 h4" alt="" src="bg309.png"/><div class="t m0 x31 h2 y8e ff1 fs0 fc0 sc0 ls0 ws0"><span class="fc1 sc0">ptg10805159</span></div><div class="t m0 x32 h47 y25f ff1e fsb fc0 sc0 ls0 ws0">20</div><div class="t m0 x32 h20 y8f ff15 fs2 fc0 sc0 ls623 ws0">AD<span class="_ _9e"></span><span class="ls0">ata<span class="_ _2"></span>base <span class="_"> </span>Librar<span class="_ _9"></span>y</span></div><div class="t m0 x35 h48 y554e ff16 fs1 fc0 sc0 ls0 ws0">20.1 <span class="_ _93"> </span>Introduction</div><div class="t m0 x32 h28 y1461 ff19 fs5 fc0 sc0 ls0 ws0">During <span class="_ _53"> </span>the <span class="_ _e"> </span>early <span class="_ _53"> </span>1980s, <span class="_ _e"> </span>the <span class="_ _53"> </span>UNIX <span class="_ _e"> </span>System <span class="_ _53"> </span>was <span class="_ _e"> </span>considered <span class="_ _42"> </span>a <span class="_ _e"> </span>hostile <span class="_ _53"> </span>environment <span class="_ _53"> </span>for</div><div class="t m0 x32 h28 y1462 ff19 fs5 fc0 sc0 ls12e9 ws0">ru<span class="ls0">nning <span class="_ _23"> </span>multiuser <span class="_ _23"> </span>database <span class="_ _23"> </span>systems.<span class="_ _51"> </span>(See <span class="_ _23"> </span>Stonebraker</span></div><div class="t m0 x47 h28 y554f ff19 fs5 fc0 sc0 ls0 ws0">[</div><div class="t m0 xa3 h28 y1462 ff19 fs5 fc0 sc0 ls0 ws0">1981</div><div class="t m0 x14c h28 y554f ff19 fs5 fc0 sc0 ls0 ws0">]</div><div class="t m0 x208 h28 y1462 ff19 fs5 fc0 sc0 ls0 ws0">and <span class="_ _23"></span>W<span class="_ _6"></span>einberger</div><div class="t m0 x190 h28 y554f ff19 fs5 fc0 sc0 ls0 ws0">[</div><div class="t m0 x1b9 h28 y1462 ff19 fs5 fc0 sc0 ls0 ws0">1982</div><div class="t m0 xcf h28 y554f ff19 fs5 fc0 sc0 ls0 ws0">]</div><div class="t m0 x191 h28 y1462 ff19 fs5 fc0 sc0 ls0 ws0">.)</div><div class="t m0 x32 h28 y1463 ff19 fs5 fc0 sc0 ls0 ws0">Earlier systems, <span class="_ _2"></span>such <span class="_ _2"></span>as <span class="_ _2"></span>V<span class="_ _6"></span>ersion 7, <span class="_ _2"></span>did <span class="_ _2"></span>indeed <span class="_ _2"></span>present large obstacles, <span class="_ _2"></span>since <span class="_ _2"></span>they did <span class="_ _2"></span>not</div><div class="t m0 x32 h28 y13d ff19 fs5 fc0 sc0 ls0 ws0">provide any form of IPC <span class="_ _2"></span>(other than half-duplex <span class="_ _2"></span>pipes) and did <span class="_ _2"></span>not provide any form of</div><div class="t m0 x32 h28 y13e ff19 fs5 fc0 sc0 ls0 ws0">byte-range <span class="_ _42"> </span>locking.<span class="_ _54"> </span>Many <span class="_ _42"> </span>of <span class="_ _42"> </span>these <span class="_ _42"> </span>deﬁciencies <span class="_ _53"> </span>wer<span class="ls15f0">er<span class="_ _55"></span><span class="ls0">emedied, <span class="_ _53"> </span>however<span class="_ _6"></span><span class="ls15f1">.B<span class="_ _7"></span><span class="ls15f2">yt<span class="_ _c"></span><span class="ls0">he <span class="_ _53"> </span>late</span></span></span></span></span></div><div class="t m0 x32 h28 y13f ff19 fs5 fc0 sc0 ls0 ws0">1980s, <span class="_ _42"> </span>the <span class="_ _53"> </span>UNIX <span class="_ _42"> </span>System <span class="_ _53"> </span>had <span class="_ _53"> </span>evolved <span class="_ _42"> </span>to <span class="_ _53"> </span>provide <span class="_ _42"> </span>a <span class="_ _42"> </span>suitable <span class="_ _53"> </span>environment <span class="_ _42"> </span>for <span class="_ _42"> </span>running</div><div class="t m0 x32 h28 y140 ff19 fs5 fc0 sc0 ls16 ws0">re<span class="ls0">liable, <span class="_ _66"> </span>multiuser <span class="_ _47"> </span>database <span class="_"> </span>systems.<span class="_ _50"> </span>Since <span class="_"> </span>then, <span class="_ _47"> </span>numerous <span class="_"> </span>commercial <span class="_"> </span>ﬁrms <span class="_"> </span>have</span></div><div class="t m0 x32 h28 y141 ff19 fs5 fc0 sc0 ls0 ws0">offer<span class="_ _0"></span>ed these types of database systems.</div><div class="t m0 x3f h28 y142 ff19 fs5 fc0 sc0 ls0 ws0">In <span class="_ _3"></span>this <span class="_ _2"></span>chapter<span class="_ _1"></span>,<span class="_ _47"> </span>we<span class="_ _47"> </span>develop <span class="_ _3"></span>a <span class="_ _3"></span>simple, <span class="_ _3"></span>multiuser <span class="_ _3"></span>database <span class="_ _3"></span>library <span class="_ _3"></span>of <span class="_ _3"></span>C <span class="_ _3"></span>functions <span class="_ _3"></span>that</div><div class="t m0 x32 h28 y143 ff19 fs5 fc0 sc0 ls0 ws0">any <span class="_ _2"></span>program <span class="_ _2"></span>can <span class="_ _3"></span>call <span class="_ _2"></span>to <span class="_ _3"></span>fetch <span class="_ _3"></span>and <span class="_ _2"></span>stor<span class="ls15f3">er<span class="_ _8"></span><span class="ls0">ecords <span class="_ _2"></span>in <span class="_ _2"></span>a <span class="_ _3"></span>database.<span class="_ _61"> </span>(Such <span class="_ _3"></span>a <span class="_ _3"></span>database <span class="_ _2"></span>is <span class="_ _3"></span>often</span></span></div><div class="t m0 x32 h29 y144 ff19 fs5 fc0 sc0 ls0 ws0">called <span class="_"> </span>a<span class="_ _61"> </span><span class="ff1b">key–value <span class="_"> </span>store</span>.) <span class="_ _46"> </span>This<span class="_ _46"> </span>library <span class="_ _47"> </span>of <span class="_"> </span>C <span class="_ _66"> </span>functions <span class="_ _66"> </span>is <span class="_ _66"> </span>usually <span class="_ _66"> </span>only <span class="_ _66"> </span>one <span class="_ _66"> </span>part <span class="_ _66"> </span>of <span class="_ _47"> </span>a</div><div class="t m0 x32 h28 y5550 ff19 fs5 fc0 sc0 ls0 ws0">complete <span class="_ _47"> </span>database <span class="_ _47"> </span>system.<span class="_ _50"> </span><span class="ls72">We <span class="_ _46"> </span>d<span class="_ _9"></span><span class="ls15f4">on<span class="_ _1d"></span><span class="ls0">ot <span class="_ _47"> </span>develop <span class="_ _47"> </span>the <span class="_ _47"> </span>other <span class="_ _47"> </span>pieces, <span class="_ _47"> </span>such <span class="_ _47"> </span>as <span class="_ _47"> </span>a <span class="_ _47"> </span>query</span></span></span></div><div class="t m0 x32 h28 y5551 ff19 fs5 fc0 sc0 ls0 ws0">language, <span class="_ _2"></span>leaving <span class="_ _3"></span>these <span class="_ _3"></span>items <span class="_ _3"></span>to <span class="_ _2"></span>the <span class="_ _3"></span>many <span class="_ _3"></span>textbooks <span class="_ _3"></span>on <span class="_ _3"></span>database <span class="_ _2"></span>systems.<span class="_ _16"> </span>Our <span class="_ _3"></span>interest</div><div class="t m0 x32 h28 y30e0 ff19 fs5 fc0 sc0 ls0 ws0">is <span class="_ _3"></span>the <span class="_ _9"></span>parts <span class="_ _3"></span>of <span class="_ _9"></span>the <span class="_ _3"></span>UNIX <span class="_ _3"></span>System <span class="_ _9"></span>interface <span class="_ _3"></span>required <span class="_ _2"></span>by <span class="_ _9"></span>a <span class="_ _3"></span>database <span class="_ _9"></span>library<span class="_ _4"></span><span class="ls15f5">,a<span class="_ _8"></span><span class="ls0">nd <span class="_ _9"></span>how <span class="_ _3"></span>they</span></span></div><div class="t m0 x32 h28 y30e1 ff19 fs5 fc0 sc0 ls16 ws0">re<span class="ls0">late <span class="_"> </span>to <span class="_ _53"> </span>the <span class="_ _e"> </span>topics <span class="_ _e"> </span>we’ve <span class="_ _e"> </span>already <span class="_ _53"> </span>covered <span class="_ _e"> </span>(such <span class="_ _e"> </span>as <span class="_ _e"> </span>recor<span class="ls37">d—b<span class="_ _4"></span><span class="ls0">yte-range <span class="_ _4"></span>— <span class="_ _84"></span>locking,<span class="_ _59"> </span>in</span></span></span></div><div class="t m0 x32 h28 y30e2 ff19 fs5 fc0 sc0 ls0 ws0">Section 14.3).</div><div class="t m0 x35 h48 y14b ff16 fs1 fc0 sc0 ls0 ws0">20.2 <span class="_ _93"> </span>History</div><div class="t m0 x32 h2c y14d ff19 fs5 fc0 sc0 ls0 ws0">One <span class="_ _42"> </span>popular <span class="_ _53"> </span>library <span class="_ _42"> </span>of <span class="_ _53"> </span>database <span class="_ _53"> </span>functions <span class="_ _42"> </span>in <span class="_ _53"> </span>the <span class="_ _53"> </span>UNIX <span class="_ _42"> </span>System <span class="_ _53"> </span>is <span class="_ _53"> </span>the<span class="_ _44"> </span><span class="ff1a">dbm</span>(3) <span class="_ _53"> </span>library<span class="_ _4"></span>.</div><div class="t m0 x32 h28 y14e ff19 fs5 fc0 sc0 ls0 ws0">This <span class="_ _3"></span>library <span class="_ _3"></span>was <span class="_ _9"></span>developed <span class="_ _3"></span>by <span class="_ _3"></span>Ken <span class="_ _3"></span>Thompson <span class="_ _9"></span>and <span class="_ _3"></span>uses <span class="_ _3"></span>a <span class="_ _9"></span>dynamic <span class="_ _3"></span>hashing <span class="_ _3"></span>scheme.<span class="_ _16"> </span>It</div><div class="t m0 x32 h28 y14f ff19 fs5 fc0 sc0 ls0 ws0">was <span class="_"> </span>originally <span class="_"> </span>provided <span class="_"> </span>with <span class="_ _e"> </span>V<span class="_ _6"></span>ersion <span class="_"> </span>7, <span class="_"> </span>appears <span class="_"> </span>in <span class="_"> </span>all <span class="_"> </span>BSD <span class="_"> </span>r<span class="_ _0"></span>eleases, <span class="_"> </span>and <span class="_"> </span>was <span class="_"> </span>also</div><div class="t m0 x1c0 h23 y12e ff18 fs0 fc0 sc0 ls0 ws0">743</div><a class="l" href="#pf13" data-dest-detail='[19,"XYZ",50,757,1]'><div class="d m1" style="border-style:none;position:absolute;left:157.497886px;bottom:975.452099px;width:239.060013px;height:134.895020px;background-color:rgba(255,255,255,0.000001);"></div></a><a class="l" href="#pf13" data-dest-detail='[19,"XYZ",50,757,1]'><div class="d m1" style="border-style:none;position:absolute;left:80.892409px;bottom:731.026788px;width:105.755806px;height:19.680023px;background-color:rgba(255,255,255,0.000001);"></div></a><a class="l" href="#pf13" data-dest-detail='[19,"XYZ",50,757,1]'><div class="d m1" style="border-style:none;position:absolute;left:80.893259px;bottom:227.026820px;width:77.460404px;height:19.679993px;background-color:rgba(255,255,255,0.000001);"></div></a></div><div class="pi" data-data='{"ctm":[2.100000,0.000000,0.000000,2.100000,-115.668004,-156.491993]}'></div></div>
