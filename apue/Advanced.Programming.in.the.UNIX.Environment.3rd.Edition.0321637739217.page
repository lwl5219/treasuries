<div id="pfd9" class="pf w4 h1f" data-page-no="d9"><div class="pc pcd9 w4 h1f"><img class="bi x0 y0 w3 h4" alt="" src="apue/bgd9.png"/><div class="t m0 x31 h2 y8e ff1 fs0 fc0 sc0 ls0 ws0"><span class="fc1 sc0">ptg10805159</span></div><div class="t m0 x35 h24 ya4 ff19 fs0 fc0 sc0 ls0 ws0">Section <span class="_"> </span>6.5<span class="_ _1f6"> </span>Supplementary <span class="_"> </span>Group <span class="_"> </span>IDs<span class="_ _1b"> </span><span class="ff18">183</span></div><div class="t m0 x32 h2a y12f ff19 fsf fc0 sc0 ls0 ws0">Like <span class="_ _9"></span>the <span class="_ _9"></span>passwor<span class="ls7a3">dﬁ<span class="_ _b"></span><span class="ls0">le <span class="_ _9"></span>functions, <span class="_ _9"></span>both <span class="_ _23"></span>of <span class="_ _9"></span>these <span class="_ _9"></span>functions <span class="_ _9"></span>normally <span class="_ _23"></span>return <span class="_ _3"></span>pointers <span class="_ _23"></span>to <span class="_ _9"></span>a</span></span></div><div class="t m0 x32 h26 y130 ff1a fsf fc0 sc0 ls0 ws0">static<span class="_ _80"> </span><span class="ff19">variable, which is overwritten on each call.</span></div><div class="t m0 x3f h2a y131 ff19 fsf fc0 sc0 ls0 ws0">If <span class="_ _3"></span>we <span class="_ _3"></span>want <span class="_ _9"></span>to <span class="_ _3"></span>search <span class="_ _3"></span>the <span class="_ _9"></span>entir<span class="ls7a4">eg<span class="_ _b"></span><span class="ls45">ro<span class="ls0">up <span class="_ _9"></span>ﬁle, <span class="_ _3"></span>we <span class="_ _9"></span>need <span class="_ _3"></span>some <span class="_ _9"></span>additional <span class="_ _3"></span>functions.<span class="_ _16"> </span>The</span></span></span></div><div class="t m0 x32 h2a y132 ff19 fsf fc0 sc0 ls0 ws0">following three functions ar<span class="_ _0"></span><span class="ls44">el<span class="_ _d"></span><span class="ls0">ike their counterparts for the passwor<span class="ls44">dﬁ<span class="_ _4f"></span><span class="ls0">le.</span></span></span></span></div><div class="t m0 x3f h57 y126b ff1a fs2d fc0 sc0 ls0 ws0">#include &lt;grp.h&gt;</div><div class="t m0 x3f h57 y126c ff1a fs2d fc0 sc0 ls0 ws0">struct group *getgrent(void);</div><div class="t m0 x1bb h57 y126d ff19 fs2d fc0 sc0 ls0 ws0">Returns: pointer if OK,<span class="_"> </span><span class="ff1a">NULL<span class="_ _e"> </span></span>on error or end of ﬁle</div><div class="t m0 x3f h57 y126e ff1a fs2d fc0 sc0 ls0 ws0">void setgrent(void);</div><div class="t m0 x3f h57 y18cc ff1a fs2d fc0 sc0 ls0 ws0">void endgrent(void);</div><div class="t m0 x76 h2d y18cd ff19 fs10 fc0 sc0 ls0 ws0">These <span class="_ _3"></span>three <span class="_ _9"></span>functions <span class="_ _3"></span>ar<span class="ls787">en<span class="_ _4f"></span><span class="ls0">ot <span class="_ _9"></span>part <span class="_ _9"></span>of <span class="_ _9"></span>the <span class="_ _3"></span>base <span class="_ _9"></span>POSIX.1 <span class="_ _9"></span>standard. <span class="_ _66"> </span>They<span class="_ _66"> </span>ar<span class="ls786">ed<span class="_ _4f"></span><span class="ls0">eﬁned <span class="_ _9"></span>as <span class="_ _3"></span>part <span class="_ _9"></span>of</span></span></span></span></div><div class="t m0 x76 h2d y18ce ff19 fs10 fc0 sc0 ls0 ws0">the XSI option in the Single UNIX Speciﬁcation.<span class="_ _35"> </span>All UNIX Systems provide them.</div><div class="t m0 x3f h4d y18cf ff19 fs26 fc0 sc0 ls0 ws0">The<span class="_ _45"> </span><span class="ff1a">setgrent<span class="_ _47"> </span></span>function <span class="_ _9"></span>opens <span class="_ _9"></span>the <span class="_ _3"></span>group <span class="_ _3"></span>ﬁle, <span class="_ _9"></span>if <span class="_ _9"></span>it’s <span class="_ _9"></span>not <span class="_ _3"></span>already <span class="_ _9"></span>open, <span class="_ _3"></span>and <span class="_ _9"></span>rewinds</div><div class="t m0 x32 h4d y18d0 ff19 fs26 fc0 sc0 ls0 ws0">it. <span class="_ _35"> </span>The<span class="_ _35"> </span><span class="ff1a">getgrent<span class="_ _44"> </span></span>function <span class="_ _23"> </span>reads <span class="_ _23"> </span>the <span class="_ _42"> </span>next <span class="_ _23"> </span>entry <span class="_ _42"> </span>from <span class="_ _23"></span>the <span class="_ _23"> </span>group <span class="_ _23"> </span>ﬁle, <span class="_ _42"> </span>opening <span class="_ _42"> </span>the <span class="_ _23"> </span>ﬁle</div><div class="t m0 x32 h4d y18d1 ff19 fs26 fc0 sc0 ls0 ws0">ﬁrst, if it’s not already open.<span class="_ _59"> </span>The<span class="_"> </span><span class="ff1a">endgrent<span class="_ _80"> </span></span>function closes the group ﬁle.</div><div class="t m0 x35 h4b y18d2 ff16 fs27 fc0 sc0 ls0 ws0">6.5 <span class="_ _68"> </span>Supplementar<span class="ls5d5">yG<span class="_ _52"></span><span class="ls7a5">ro<span class="_ _2"></span><span class="ls0">up <span class="_"> </span>IDs</span></span></span></div><div class="t m0 x32 h49 y18d3 ff19 fs26 fc0 sc0 ls0 ws0">The <span class="_ _23"> </span>use <span class="_ _42"> </span>of <span class="_ _23"> </span>groups <span class="_ _23"> </span>in <span class="_ _42"> </span>the <span class="_ _23"> </span>UNIX <span class="_ _42"> </span>System <span class="_ _42"> </span>has <span class="_ _23"> </span>changed <span class="_ _42"> </span>over <span class="_ _23"> </span>time.<span class="_ _51"> </span><span class="ls3aa">Wi<span class="_ _3"></span></span>th <span class="_ _42"> </span>V<span class="_ _4"></span>ersion <span class="_ _42"> </span>7, <span class="_ _42"> </span>each</div><div class="t m0 x32 h49 y18d4 ff19 fs26 fc0 sc0 ls0 ws0">user <span class="_ _42"> </span>belonged <span class="_ _42"> </span>to <span class="_ _42"> </span>a <span class="_ _42"> </span>single <span class="_ _53"> </span>group <span class="_ _42"> </span>at <span class="_ _42"> </span>any <span class="_ _42"> </span>point <span class="_ _42"> </span>in <span class="_ _42"> </span>time.<span class="_ _54"> </span>When <span class="_ _42"> </span>we <span class="_ _53"> </span>logged <span class="_ _42"> </span>in, <span class="_ _42"> </span>we <span class="_ _42"> </span>were</div><div class="t m0 x32 h49 y18d5 ff19 fs26 fc0 sc0 ls0 ws0">assigned <span class="_ _9"></span>the <span class="_ _23"></span>real <span class="_ _9"></span>group <span class="_ _9"></span>ID <span class="_ _23"></span>corresponding <span class="_ _9"></span>to <span class="_ _9"></span>the <span class="_ _23"> </span>numerical <span class="_ _23"></span>group <span class="_ _9"></span>ID <span class="_ _9"></span>in <span class="_ _23"></span>our <span class="_ _9"></span>password</div><div class="t m0 x32 h4d y18d6 ff19 fs26 fc0 sc0 ls0 ws0">ﬁle <span class="_ _23"></span>entry<span class="_ _4"></span><span class="ls7a6">.W<span class="_ _64"></span><span class="ls7a7">ec<span class="_ _b"></span><span class="ls0">ould <span class="_ _9"></span>change <span class="_ _23"> </span>this <span class="_ _23"> </span>at <span class="_ _23"> </span>any <span class="_ _23"> </span>point <span class="_ _23"> </span>by <span class="_ _23"> </span>executing<span class="_ _35"> </span><span class="ff1a">newgrp</span></span></span></span></div><div class="t m0 xe3 h49 y18d7 ff19 fs26 fc0 sc0 ls0 ws0">(</div><div class="t m0 xe4 h49 y18d6 ff19 fs26 fc0 sc0 ls0 ws0">1</div><div class="t m0 x11d h49 y18d7 ff19 fs26 fc0 sc0 ls0 ws0">)</div><div class="t m0 x11e h4d y18d6 ff19 fs26 fc0 sc0 ls7a8 ws0">.I<span class="_ _7"></span><span class="ls7a9">ft<span class="_ _b"></span><span class="ls0">he<span class="_ _45"> </span><span class="ff1a">newgrp</span></span></span></div><div class="t m0 x32 h49 y18d8 ff19 fs26 fc0 sc0 ls0 ws0">command <span class="_ _2"></span>succeeded <span class="_ _2"></span>(refer to <span class="_ _2"></span>the <span class="_ _2"></span>manual <span class="_ _2"></span>page <span class="_ _2"></span>for <span class="_ _2"></span>the <span class="_ _2"></span>permission <span class="_ _2"></span>rules), <span class="_ _2"></span>our <span class="_ _2"></span>real group</div><div class="t m0 x32 h49 y18d9 ff19 fs26 fc0 sc0 ls0 ws0">ID <span class="_ _3"></span>was <span class="_ _9"></span>changed <span class="_ _3"></span>to <span class="_ _9"></span>the <span class="_ _3"></span>new <span class="_ _9"></span>group’s <span class="_ _2"></span>ID, <span class="_ _9"></span>and <span class="_ _3"></span>this <span class="_ _9"></span>value <span class="_ _3"></span>was <span class="_ _9"></span>used <span class="_ _3"></span>for <span class="_ _9"></span>all <span class="_ _3"></span>subsequent <span class="_ _9"></span>ﬁle</div><div class="t m0 x32 h49 y18da ff19 fs26 fc0 sc0 ls0 ws0">access <span class="_ _2"></span>permission <span class="_ _3"></span>checks.<span class="_ _16"> </span><span class="ls164">We <span class="_ _80"> </span>c<span class="_ _9"></span></span>ould <span class="_ _3"></span>always <span class="_ _2"></span>go <span class="_ _3"></span>back <span class="_ _3"></span>to <span class="_ _3"></span>our <span class="_ _3"></span>original <span class="_ _2"></span>group <span class="_ _2"></span>by <span class="_ _3"></span>executing</div><div class="t m0 x32 h4d y18db ff1a fs26 fc0 sc0 ls0 ws0">newgrp<span class="_ _80"> </span><span class="ff19">without any arguments.</span></div><div class="t m0 x3f h49 y18dc ff19 fs26 fc0 sc0 ls0 ws0">This <span class="_ _53"> </span>form <span class="_ _e"> </span>of <span class="_ _53"> </span>group <span class="_ _53"> </span>membership <span class="_ _53"> </span>persisted <span class="_ _e"> </span>until <span class="_ _e"> </span>it <span class="_ _53"> </span>was <span class="_ _e"> </span>changed <span class="_ _53"> </span>in <span class="_ _e"> </span>4.2BSD <span class="_ _53"> </span>(circa</div><div class="t m0 x32 h49 y18dd ff19 fs26 fc0 sc0 ls0 ws0">1983). <span class="_"> </span>W<span class="_ _1"></span>ith <span class="_ _2"></span>4.2BSD, <span class="_ _2"></span>the concept <span class="_ _2"></span>of supplementary <span class="_ _2"></span>group IDs was <span class="_ _2"></span>introduced. <span class="_"> </span>Not<span class="_"> </span>only</div><div class="t m0 x32 h49 y18de ff19 fs26 fc0 sc0 ls0 ws0">did <span class="_ _9"></span>we <span class="_ _9"></span>belong <span class="_ _23"></span>to <span class="_ _9"></span>the <span class="_ _9"></span>group <span class="_ _9"></span>corresponding <span class="_ _3"></span>to <span class="_ _23"></span>the <span class="_ _9"></span>group <span class="_ _9"></span>ID <span class="_ _9"></span>in <span class="_ _9"></span>our <span class="_ _23"></span>passwor<span class="ls7aa">dﬁ<span class="_ _43"></span><span class="ls0">le <span class="_ _23"></span>entry<span class="_ _4"></span>,</span></span></div><div class="t m0 x32 h49 y18df ff19 fs26 fc0 sc0 ls0 ws0">but we could also <span class="_ _2"></span>belong to as <span class="_ _2"></span>many as 16 <span class="_ _2"></span>additional groups. <span class="_"> </span>The<span class="_"> </span>ﬁle access permission</div><div class="t m0 x32 h49 y18e0 ff19 fs26 fc0 sc0 ls0 ws0">checks <span class="_ _42"> </span>wer<span class="ls7ab">em<span class="_ _c"></span><span class="ls0">odiﬁed <span class="_ _42"> </span>so <span class="_ _42"> </span>that <span class="_ _42"> </span>in <span class="_ _23"> </span>addition <span class="_ _42"> </span>to <span class="_ _42"> </span>comparing <span class="_ _42"> </span>the <span class="_ _42"> </span>the <span class="_ _42"> </span>ﬁle’s <span class="_ _23"> </span>group <span class="_ _42"> </span>ID <span class="_ _42"> </span>to <span class="_ _23"> </span>the</span></span></div><div class="t m0 x32 h49 y18e1 ff19 fs26 fc0 sc0 ls0 ws0">process ef<span class="_ _0"></span>fective gr<span class="_ _0"></span>oup ID, it was also compared to all the supplementary gr<span class="_ _0"></span>oup IDs.</div><div class="t m0 x76 h2d y18e2 ff19 fs10 fc0 sc0 ls0 ws0">Supplementary <span class="_ _23"> </span>group <span class="_ _9"></span>IDs <span class="_ _23"> </span>ar<span class="ls7ac">ear<span class="_ _b"></span><span class="ls0">equired <span class="_ _9"> </span>feature<span class="_ _47"> </span>of<span class="_ _45"> </span>POSIX.1. <span class="_ _47"> </span>(In<span class="_ _47"> </span>older <span class="_ _23"> </span>versions <span class="_ _23"> </span>of <span class="_ _23"> </span>POSIX.1,</span></span></div><div class="t m0 x76 h5e y18e3 ff19 fs10 fc0 sc0 ls0 ws0">they <span class="_ _66"> </span>wer<span class="ls16f">eo<span class="_ _4a"></span><span class="ls0">ptional.) <span class="_ _59"> </span>The<span class="_ _59"> </span>constant<span class="_ _46"> </span><span class="ff1a">NGROUPS_MAX<span class="_"> </span></span>(Figur<span class="ls16f">e2<span class="_ _4a"></span><span class="ls0">.1<span class="_ _1"></span>1) <span class="_ _47"> </span>speciﬁes <span class="_ _66"> </span>the <span class="_ _47"> </span>number <span class="_ _66"> </span>of</span></span></span></span></div><div class="t m0 x76 h2d y18e4 ff19 fs10 fc0 sc0 ls0 ws0">supplementary group IDs.<span class="_ _35"> </span><span class="ls136">Ac<span class="_ _84"></span><span class="ls0">ommon value is 16 (Figur<span class="ls136">e2<span class="_ _5"></span><span class="ls0">.15).</span></span></span></span></div><div class="t m0 x3f h49 y18e5 ff19 fs26 fc0 sc0 ls0 ws0">The <span class="_ _53"> </span>advantage <span class="_"> </span>of <span class="_ _53"> </span>using <span class="_ _53"> </span>supplementary <span class="_"> </span>gr<span class="_ _1"></span>oup <span class="_"> </span>IDs <span class="_ _53"> </span>is <span class="_ _53"> </span>that <span class="_"> </span>we <span class="_ _53"> </span>no <span class="_ _53"> </span>longer <span class="_"> </span>have <span class="_ _53"> </span>to</div><div class="t m0 x32 h49 y18e6 ff19 fs26 fc0 sc0 ls0 ws0">change <span class="_ _45"> </span>gr<span class="_ _0"></span>oups <span class="_ _47"> </span>explicitly<span class="_ _6"></span><span class="ls7ad">.I<span class="_ _56"></span><span class="ls7ae">ti<span class="_ _62"></span><span class="ls7af">sn<span class="_ _62"></span><span class="ls0">ot <span class="_ _45"> </span>uncommon <span class="_ _45"> </span>to <span class="_ _47"> </span>belong <span class="_ _45"> </span>to <span class="_ _47"> </span>multiple <span class="_ _45"> </span>groups <span class="_ _47"> </span>(i.e.,</span></span></span></span></div><div class="t m0 x32 h49 y18e7 ff19 fs26 fc0 sc0 ls0 ws0">participate in multiple projects) at the same time.</div><div class="t m0 x3f h49 y18e8 ff19 fs26 fc0 sc0 ls0 ws0">Three functions ar<span class="_ _0"></span><span class="lsd3">ep<span class="_ _d"></span><span class="lscc">ro<span class="ls0">vided to fetch and set the supplementary group IDs.</span></span></span></div><a class="l" href="#pfe" data-dest-detail='[14,"XYZ",50,757,1]'><div class="d m1" style="border-style:none;position:absolute;left:80.892842px;bottom:702.762920px;width:190.584595px;height:19.679993px;background-color:rgba(255,255,255,0.000001);"></div></a></div><div class="pi" data-data='{"ctm":[2.100000,0.000000,0.000000,2.100000,-115.668004,-156.491993]}'></div></div>
