<div id="pf145" class="pf w4 h1f" data-page-no="145"><div class="pc pc145 w4 h1f"><img class="bi x0 y0 w3 h4" alt="" src="bg145.png"/><div class="t m0 x31 h2 y8e ff1 fs0 fc0 sc0 ls0 ws0"><span class="fc1 sc0">ptg10805159</span></div><div class="t m0 x35 h24 ya4 ff19 fs0 fc0 sc0 ls0 ws0">Section <span class="_"> </span>9.3<span class="_ _22e"> </span>Network <span class="_"> </span>Logins<span class="_ _1b"> </span><span class="ff18">291</span></div><div class="t m0 x35 h27 y12f ff16 fsf fc0 sc0 ls0 ws0">BSD Network Logins</div><div class="t m0 x32 h26 y131 ff19 fsf fc0 sc0 ls0 ws0">In <span class="_ _47"> </span>BSD, <span class="_ _66"> </span>a <span class="_ _47"> </span>single <span class="_ _47"> </span>process <span class="_ _66"> </span>waits <span class="_ _47"> </span>for <span class="_ _47"> </span>most <span class="_ _47"> </span>network <span class="_ _47"> </span>connections: <span class="_ _47"> </span>the<span class="_ _61"> </span><span class="ff1a">inetd<span class="_ _16"> </span></span>process,</div><div class="t m0 x32 h2b y132 ff19 fsf fc0 sc0 ls0 ws0">sometimes <span class="_ _23"></span>called <span class="_ _9"></span>the<span class="_ _35"> </span><span class="ff1b">Internet <span class="_ _9"></span>superserver</span><span class="lsafb">.I<span class="_ _26"></span><span class="ls485">nt<span class="_ _b"></span><span class="ls0">his <span class="_ _23"></span>section, <span class="_ _9"></span>we’ll <span class="_ _23"> </span>look <span class="_ _23"></span>at <span class="_ _23"></span>the <span class="_ _9"></span>sequence <span class="_ _23"> </span>of</span></span></span></div><div class="t m0 x32 h2a y133 ff19 fsf fc0 sc0 ls0 ws0">processes <span class="_ _23"></span>involved <span class="_ _42"> </span>in <span class="_ _23"> </span>network <span class="_ _42"> </span>logins <span class="_ _23"> </span>for <span class="_ _42"> </span>a <span class="_ _42"> </span>BSD <span class="_ _23"> </span>system.<span class="_ _54"> </span><span class="ls5f">We <span class="_ _45"> </span>a<span class="_ _9"></span><span class="ls45">re <span class="_ _42"> </span>n<span class="_ _2"></span></span></span>ot <span class="_ _42"> </span>interested <span class="_ _23"></span>in <span class="_ _42"> </span>the</div><div class="t m0 x32 h2a y134 ff19 fsf fc0 sc0 ls0 ws0">detailed <span class="_ _2"></span>network <span class="_ _3"></span>programming <span class="_ _2"></span>aspects <span class="_ _2"></span>of <span class="_ _3"></span>these <span class="_ _2"></span>processes; <span class="_ _2"></span>refer <span class="_ _2"></span>to <span class="_ _2"></span>Stevens, <span class="_ _3"></span>Fenner<span class="_ _1"></span><span class="ls14d">,a<span class="_ _8"></span><span class="ls0">nd</span></span></div><div class="t m0 x32 h2a y135 ff19 fsf fc0 sc0 ls0 ws0">Rudoff</div><div class="t m0 x183 h2a y2593 ff19 fsf fc0 sc0 ls0 ws0">[</div><div class="t m0 x52 h2a y135 ff19 fsf fc0 sc0 ls0 ws0">2004</div><div class="t m0 x198 h2a y2593 ff19 fsf fc0 sc0 ls0 ws0">]</div><div class="t m0 x159 h2a y135 ff19 fsf fc0 sc0 ls0 ws0">for all the details.</div><div class="t m0 x3f h26 y136 ff19 fsf fc0 sc0 ls0 ws0">As <span class="_ _23"></span>part <span class="_ _23"> </span>of <span class="_ _23"> </span>the <span class="_ _23"> </span>system <span class="_ _23"> </span>start-up,<span class="_ _35"> </span><span class="ff1a">init<span class="_ _35"> </span></span>invokes <span class="_ _23"> </span>a <span class="_ _23"> </span>shell <span class="_ _23"> </span>that <span class="_ _23"> </span>executes <span class="_ _42"> </span>the <span class="_ _23"></span>shell <span class="_ _23"></span>script</div><div class="t m0 x32 h26 y137 ff1a fsf fc0 sc0 ls0 ws0">/etc/rc<span class="ff19 ls641">.O<span class="_ _7"></span><span class="ls0">ne <span class="_ _23"> </span>of <span class="_ _23"> </span>the <span class="_ _23"> </span>daemons <span class="_ _23"></span>that <span class="_ _23"></span>is <span class="_ _23"></span>started <span class="_ _23"></span>by <span class="_ _9"></span>this <span class="_ _23"> </span>shell <span class="_ _23"> </span>script <span class="_ _23"> </span>is<span class="_ _35"> </span><span class="ff1a">inetd</span><span class="lsafc">.O<span class="_ _7"></span><span class="ls0">nce <span class="_ _23"> </span>the</span></span></span></span></div><div class="t m0 x32 h26 y138 ff19 fsf fc0 sc0 ls0 ws0">shell <span class="_ _42"> </span>script <span class="_ _42"> </span>terminates, <span class="_ _53"> </span>the <span class="_ _42"> </span>parent <span class="_ _42"> </span>process <span class="_ _42"> </span>of<span class="_ _44"> </span><span class="ff1a">inetd<span class="_ _44"> </span></span>becomes<span class="_ _44"> </span><span class="ff1a">init</span>;<span class="_ _44"> </span><span class="ff1a">inetd<span class="_ _44"> </span></span>waits <span class="_ _42"> </span>for</div><div class="t m0 x32 h2a y139 ff19 fsf fc0 sc0 ls0 ws0">TCP/IP connection requests to <span class="_ _2"></span>arrive at <span class="_ _2"></span>the host.<span class="_ _46"> </span>When <span class="_ _2"></span>a connection <span class="_ _2"></span>request arrives for</div><div class="t m0 x32 h26 y13a ff19 fsf fc0 sc0 ls0 ws0">it to handle,<span class="_"> </span><span class="ff1a">inetd<span class="_ _80"> </span></span>does a<span class="_"> </span><span class="ff1a">fork<span class="_ _66"> </span></span>and<span class="_"> </span><span class="ff1a">exec<span class="_ _80"> </span></span>of the appropriate program.</div><div class="t m0 x3f h2a y254 ff19 fsf fc0 sc0 ls0 ws0">Let’s <span class="_ _35"> </span>assume <span class="_ _35"> </span>that <span class="_ _44"> </span>a <span class="_ _35"> </span>TCP <span class="_ _35"> </span>connection <span class="_ _35"> </span>request <span class="_ _35"> </span>arrives <span class="_ _35"> </span>for <span class="_ _35"> </span>the <span class="_ _44"> </span>TELNET <span class="_ _35"> </span>server<span class="_ _6"></span>.</div><div class="t m0 x32 h2a y255 ff19 fsf fc0 sc0 ls0 ws0">TELNET <span class="_ _23"></span>is <span class="_ _23"></span>a <span class="_ _23"></span>remote <span class="_ _9"></span>login <span class="_ _23"> </span>application <span class="_ _42"> </span>that <span class="_ _23"></span>uses <span class="_ _23"></span>the <span class="_ _23"></span>TCP <span class="_ _23"></span>protocol. <span class="_ _45"> </span>A<span class="_ _35"> </span>user <span class="_ _23"></span>on <span class="_ _23"></span>another</div><div class="t m0 x32 h2a y13b ff19 fsf fc0 sc0 ls0 ws0">host <span class="_ _9"></span>(that <span class="_ _3"></span>is <span class="_ _9"></span>connected <span class="_ _9"></span>to <span class="_ _9"></span>the <span class="_ _9"></span>server<span class="_ _3"></span>’s <span class="_ _9"></span>host <span class="_ _9"></span>through <span class="_ _3"></span>a <span class="_ _9"></span>network <span class="_ _9"></span>of <span class="_ _9"></span>some <span class="_ _3"></span>form) <span class="_ _9"></span>or <span class="_ _9"></span>on <span class="_ _9"></span>the</div><div class="t m0 x32 h2a y13c ff19 fsf fc0 sc0 ls0 ws0">same host initiates the login by starting the TELNET client:</div><div class="t m0 x3f h57 y2594 ff1a fs2d fc0 sc0 ls0 ws0">telnet<span class="_"> </span><span class="ff1b">hostname</span></div><div class="t m0 x32 h2b y2595 ff19 fsf fc0 sc0 ls0 ws0">The <span class="_"> </span>client <span class="_"> </span>opens <span class="_"> </span>a <span class="_"> </span>TCP <span class="_"> </span>connection <span class="_"> </span>to<span class="_ _46"> </span><span class="ff1b">hostname</span><span class="lsafd">,a<span class="_ _4a"></span><span class="ls0">nd <span class="_"> </span>the <span class="_"> </span>program <span class="_"> </span>that’s <span class="_"> </span>started <span class="_"> </span>on</span></span></div><div class="t m0 x32 h2b y2596 ff1b fsf fc0 sc0 ls0 ws0">hostname<span class="_ _44"> </span><span class="ff19">is <span class="_ _42"> </span>called <span class="_ _53"> </span>the <span class="_ _42"> </span>TELNET <span class="_ _53"> </span>server<span class="_ _1"></span><span class="lsafe">.T<span class="_ _52"></span><span class="ls0">he <span class="_ _42"> </span>client <span class="_ _53"> </span>and <span class="_ _42"> </span>the <span class="_ _53"> </span>server <span class="_ _42"> </span>then <span class="_ _53"> </span>exchange <span class="_ _42"> </span>data</span></span></span></div><div class="t m0 x32 h2a y2597 ff19 fsf fc0 sc0 ls0 ws0">across the TCP <span class="_ _2"></span>connection using <span class="_ _2"></span>the TELNET <span class="_ _2"></span>application protocol. <span class="_"> </span>What<span class="_ _66"> </span>has <span class="_ _2"></span>happened</div><div class="t m0 x32 h2a y2598 ff19 fsf fc0 sc0 ls0 ws0">is <span class="_ _23"> </span>that <span class="_ _23"> </span>the <span class="_ _42"> </span>user <span class="_ _23"> </span>who <span class="_ _23"> </span>started <span class="_ _42"> </span>the <span class="_ _23"> </span>client <span class="_ _23"> </span>program <span class="_ _23"> </span>is <span class="_ _42"> </span>now <span class="_ _23"></span>logged <span class="_ _23"> </span>in <span class="_ _42"> </span>to <span class="_ _23"></span>the <span class="_ _23"> </span>server<span class="_ _9"></span>’s <span class="_ _23"> </span>host.</div><div class="t m0 x32 h2a y2599 ff19 fsf fc0 sc0 ls0 ws0">(This <span class="_ _66"> </span>assumes, <span class="_ _47"> </span>of <span class="_ _47"> </span>course, <span class="_ _66"> </span>that <span class="_ _47"> </span>the <span class="_ _47"> </span>user <span class="_ _66"> </span>has <span class="_ _47"> </span>a <span class="_ _47"> </span>valid <span class="_ _47"> </span>account <span class="_ _66"> </span>on <span class="_ _47"> </span>the <span class="_ _47"> </span>server<span class="_ _3"></span>’s <span class="_ _47"> </span>host.)</div><div class="t m0 x32 h2a y259a ff19 fsf fc0 sc0 ls0 ws0">Figur<span class="lsaff">e9<span class="_ _43"></span><span class="ls0">.4 <span class="_ _23"></span>shows <span class="_ _23"></span>the <span class="_ _9"></span>sequence <span class="_ _23"></span>of <span class="_ _23"></span>pr<span class="_ _0"></span>ocesses <span class="_ _23"></span>involved <span class="_ _9"></span>in <span class="_ _23"></span>executing <span class="_ _23"></span>the <span class="_ _9"></span>TELNET <span class="_ _23"></span>server<span class="_ _6"></span>,</span></span></div><div class="t m0 x32 h26 y259b ff19 fsf fc0 sc0 ls0 ws0">called<span class="_"> </span><span class="ff1a">telnetd</span>.</div><div class="t m0 x1a4 h5e y259c ff1a fs10 fc0 sc0 ls0 ws0">init</div><div class="t m0 x88 h4f y259d ff1a fs11 fc0 sc0 ls0 ws0">inetd</div><div class="t m0 x207 h6d y259e ff1a fs12 fc0 sc0 ls0 ws0">inetd</div><div class="t m0 x1df h63 y259f ff1a fs13 fc0 sc0 ls0 ws0">telnetd</div><div class="t m0 x95 h70 y25a0 ff1a fs16 fc0 sc0 ls0 ws0">fork</div><div class="t m0 x95 h71 y25a1 ff1a fs36 fc0 sc0 ls0 ws0">exec</div><div class="t m0 xc5 hfc y25a2 ff1b fs36 fc0 sc0 ls0 ws0">process ID 1</div><div class="t m0 x144 h34 y25a3 ff19 fs17 fc0 sc0 ls0 ws0">TCP connection request</div><div class="t m0 xe8 h34 y25a4 ff19 fs17 fc0 sc0 ls0 ws0">from TELNET client</div><div class="t m0 x17b hd4 y25a5 ff1a fs18 fc0 sc0 ls0 ws0">fork<span class="ff19">/</span>exec<span class="_ _53"> </span><span class="ff19">of<span class="_"> </span></span>/bin/sh<span class="ff19 lsb00">,w<span class="_ _84"></span><span class="ls0">hich</span></span></div><div class="t m0 x17b hd4 y25a6 ff19 fs18 fc0 sc0 ls0 ws0">executes shell script<span class="_"> </span><span class="ff1a">/etc/rc</span></div><div class="t m0 x17b h35 y25a7 ff19 fs18 fc0 sc0 ls0 ws0">when system comes up multiuser</div><div class="t m0 x17b h36 y25a8 ff19 fs19 fc0 sc0 ls0 ws0">when connection request</div><div class="t m0 x17b h36 y25a9 ff19 fs19 fc0 sc0 ls0 ws0">arrives from TELNET client</div><div class="t m0 x13a h36 y25aa ff18 fs19 fc0 sc0 ls0 ws0">Figure 9.4<span class="_ _5a"> </span><span class="ff19">Sequence of processes involved in executing TELNET server</span></div></div><div class="pi" data-data='{"ctm":[2.100000,0.000000,0.000000,2.100000,-115.668004,-156.491993]}'></div></div>
