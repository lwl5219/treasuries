<div id="pf14a" class="pf w4 h1f" data-page-no="14a"><div class="pc pc14a w4 h1f"><img class="bi x0 y0 w3 h4" alt="" src="apue/bg14a.png"/><div class="t m0 x31 h2 y8e ff1 fs0 fc0 sc0 ls0 ws0"><span class="fc1 sc0">ptg10805159</span></div><div class="t m0 x35 h24 ya4 ff18 fs0 fc0 sc0 ls0 ws0">296<span class="_ _1b"> </span><span class="ff19">Process <span class="_"> </span>Relationships<span class="_ _18d"> </span>Chapter <span class="_"> </span>9</span></div><div class="t m0 x32 h2a y12f ff19 fsf fc0 sc0 ls0 ws0">This <span class="_ _3"></span>function <span class="_ _9"></span>returns <span class="_ _3"></span>an <span class="_ _3"></span>error <span class="_ _3"></span>if <span class="_ _9"></span>the <span class="_ _9"></span>caller <span class="_ _3"></span>is <span class="_ _9"></span>already <span class="_ _3"></span>a <span class="_ _3"></span>process <span class="_ _3"></span>group <span class="_ _3"></span>leader<span class="_ _1"></span><span class="lsb1e">.T<span class="_ _52"></span><span class="lsb1f">oe<span class="_ _8"></span><span class="ls0">nsure</span></span></span></div><div class="t m0 x32 h26 y130 ff19 fsf fc0 sc0 ls0 ws0">this <span class="_ _2"></span>is <span class="_ _2"></span>not <span class="_ _3"></span>the <span class="_ _2"></span>case, <span class="_ _3"></span>the <span class="_ _2"></span>usual <span class="_ _3"></span>practice <span class="_ _2"></span>is <span class="_ _3"></span>to <span class="_ _2"></span>call<span class="_ _47"> </span><span class="ff1a">fork<span class="_ _66"> </span></span>and <span class="_ _3"></span>have <span class="_ _2"></span>the <span class="_ _3"></span>parent <span class="_ _2"></span>terminate <span class="_ _2"></span>and</div><div class="t m0 x32 h2a y131 ff19 fsf fc0 sc0 ls0 ws0">the <span class="_ _53"> </span>child <span class="_"> </span>continue.<span class="_ _54"> </span><span class="ls5f">We <span class="_ _44"> </span>a<span class="_ _9"></span><span class="ls45">re <span class="_"> </span>g</span></span>uaranteed <span class="_"> </span>that <span class="_ _53"> </span>the <span class="_ _53"> </span>child <span class="_"> </span>is <span class="_ _42"> </span>not <span class="_"> </span>a <span class="_ _53"> </span>process <span class="_ _53"> </span>group <span class="_ _53"> </span>leader<span class="_ _1"></span>,</div><div class="t m0 x32 h2a y132 ff19 fsf fc0 sc0 ls0 ws0">because <span class="_ _2"></span>the <span class="_ _2"></span>process <span class="_ _2"></span>group ID <span class="_ _3"></span>of <span class="_ _2"></span>the <span class="_ _2"></span>parent <span class="_ _2"></span>is <span class="_ _2"></span>inherited <span class="_ _2"></span>by <span class="_ _3"></span>the <span class="_ _2"></span>child, <span class="_ _2"></span>but <span class="_ _2"></span>the <span class="_ _3"></span>child <span class="_ _2"></span>gets <span class="_ _2"></span>a</div><div class="t m0 x32 h2a y133 ff19 fsf fc0 sc0 ls0 ws0">new <span class="_ _3"></span>process <span class="_ _2"></span>ID.<span class="_ _5a"> </span>Hence, <span class="_ _3"></span>it <span class="_ _3"></span>is <span class="_ _3"></span>impossible <span class="_ _3"></span>for <span class="_ _9"></span>the <span class="_ _3"></span>child’s <span class="_ _3"></span>process <span class="_ _3"></span>ID <span class="_ _3"></span>to <span class="_ _3"></span>equal <span class="_ _3"></span>its <span class="_ _9"></span>inherited</div><div class="t m0 x32 h2a y134 ff19 fsf fc0 sc0 ls0 ws0">process gr<span class="_ _0"></span>oup ID.</div><div class="t m0 x3f h2a y135 ff19 fsf fc0 sc0 ls0 ws0">The <span class="_"> </span>Single <span class="_"> </span>UNIX <span class="_"> </span>Speciﬁcation <span class="_ _66"> </span>talks <span class="_"> </span>only <span class="_ _66"> </span>about <span class="_"> </span>a <span class="_ _66"> </span>‘<span class="_ _0"></span>‘session <span class="_"> </span>leader<span class="_ _9"></span><span class="ls124">’’<span class="_ _2"></span><span class="ls2ee">;t<span class="_ _4a"></span><span class="ls0">here<span class="_ _59"> </span>is<span class="_ _46"> </span>no</span></span></span></div><div class="t m0 x32 h2a y136 ff19 fsf fc0 sc0 ls124 ws0">‘‘<span class="_ _2"></span><span class="ls0">session <span class="_ _3"></span>ID’<span class="lsb20">’s<span class="_ _b"></span><span class="ls0">imilar <span class="_ _3"></span>to <span class="_ _3"></span>a <span class="_ _9"></span>process <span class="_ _2"></span>ID <span class="_ _3"></span>or <span class="_ _3"></span>a <span class="_ _9"></span>process <span class="_ _2"></span>group <span class="_ _2"></span>ID.<span class="_ _16"> </span>Obviously<span class="_ _6"></span><span class="ls460">,as<span class="_ _8"></span><span class="ls0">ession <span class="_ _3"></span>leader</span></span></span></span></span></div><div class="t m0 x32 h2a y137 ff19 fsf fc0 sc0 ls0 ws0">is a <span class="_ _2"></span>single <span class="_ _2"></span>process that <span class="_ _2"></span>has a <span class="_ _2"></span>unique <span class="_ _2"></span>process ID, <span class="_ _2"></span>so <span class="_ _2"></span>we could <span class="_ _2"></span>talk <span class="_ _2"></span>about <span class="_ _2"></span>a session <span class="_ _2"></span>ID <span class="_ _2"></span>that</div><div class="t m0 x32 h2a y138 ff19 fsf fc0 sc0 ls0 ws0">is <span class="_ _9"></span>the <span class="_ _9"></span>process <span class="_ _3"></span>ID <span class="_ _9"></span>of <span class="_ _23"></span>the <span class="_ _3"></span>session <span class="_ _9"></span>leader<span class="_ _1"></span><span class="lsb21">.T<span class="_ _62"></span><span class="ls0">his <span class="_ _9"></span>concept <span class="_ _9"></span>of <span class="_ _9"></span>a <span class="_ _9"></span>session <span class="_ _9"></span>ID <span class="_ _23"></span>was <span class="_ _3"></span>introduced <span class="_ _9"></span>in</span></span></div><div class="t m0 x32 h2a y139 ff19 fsf fc0 sc0 ls0 ws0">SVR4. <span class="_ _45"> </span>Historically<span class="_ _4"></span><span class="ls5a">,B<span class="_ _b"></span><span class="ls0">SD</span></span></div><div class="t m0 x36 h2a y2625 ff19 fsf fc0 sc0 ls0 ws0">-</div><div class="t m0 x2f h2a y139 ff19 fsf fc0 sc0 ls0 ws0">based <span class="_ _3"></span>systems <span class="_ _9"></span>didn’t <span class="_ _9"></span>support <span class="_ _9"></span>this <span class="_ _3"></span>notion, <span class="_ _9"></span>but <span class="_ _9"></span>have <span class="_ _3"></span>since <span class="_ _9"></span>been</div><div class="t m0 x32 h26 y13a ff19 fsf fc0 sc0 ls0 ws0">updated <span class="_ _2"></span>to <span class="_ _2"></span>include <span class="_ _2"></span>it.<span class="_ _61"> </span>The<span class="_ _47"> </span><span class="ff1a">getsid<span class="_ _66"> </span></span>function <span class="_ _3"></span>returns the <span class="_ _2"></span>process <span class="_ _2"></span>group <span class="_ _2"></span>ID <span class="_ _2"></span>of <span class="_ _2"></span>a <span class="_ _2"></span>process’s</div><div class="t m0 x32 h2a y254 ff19 fsf fc0 sc0 ls0 ws0">session leader<span class="_ _6"></span>.</div><div class="t m0 x76 h51 ya07 ff19 fs2a fc0 sc0 ls0 ws0">Some <span class="_ _2"></span>implementations, <span class="_ _2"></span>such <span class="_ _3"></span>as <span class="_ _2"></span>Solaris, <span class="_ _3"></span>join <span class="_ _2"></span>with <span class="_ _2"></span>the <span class="_ _3"></span>Single <span class="_ _2"></span>UNIX <span class="_ _2"></span>Speciﬁcation <span class="_ _3"></span>in <span class="_ _2"></span>the <span class="_ _3"></span>practice</div><div class="t m0 x76 h51 ya08 ff19 fs2a fc0 sc0 ls0 ws0">of <span class="_ _3"></span>avoiding <span class="_ _9"></span>the <span class="_ _9"></span>use <span class="_ _3"></span>of <span class="_ _9"></span>the <span class="_ _9"></span>phrase <span class="_ _3"></span>‘‘session <span class="_ _3"></span>ID,’<span class="lsb22">’o<span class="_ _8"></span><span class="ls0">pting <span class="_ _9"></span>instead <span class="_ _9"></span>to <span class="_ _3"></span>refer <span class="_ _3"></span>to <span class="_ _9"></span>this <span class="_ _9"></span>as <span class="_ _3"></span>the <span class="_ _9"></span>‘‘pr<span class="_ _0"></span>ocess</span></span></div><div class="t m0 x76 h51 ya09 ff19 fs2a fc0 sc0 ls0 ws0">group ID <span class="_ _3"></span>of <span class="_ _2"></span>the <span class="_ _2"></span>session <span class="_ _2"></span>leader<span class="_ _1"></span>.’<span class="lsb23">’T<span class="_ _55"></span><span class="ls0">he <span class="_ _3"></span>two <span class="_ _2"></span>ar<span class="ls83a">ee<span class="_ _5"></span><span class="ls0">quivalent, <span class="_ _2"></span>since <span class="_ _2"></span>the <span class="_ _2"></span>session <span class="_ _2"></span>leader <span class="_ _3"></span>is <span class="_ _2"></span>always <span class="_ _2"></span>the</span></span></span></span></div><div class="t m0 x76 h51 y2626 ff19 fs2a fc0 sc0 ls0 ws0">leader of a process gr<span class="_ _0"></span>oup.</div><div class="t m0 x3f h57 y2627 ff1a fs2d fc0 sc0 ls0 ws0">#include &lt;unistd.h&gt;</div><div class="t m0 x3f h57 y2628 ff1a fs2d fc0 sc0 ls0 ws0">pid_t getsid(pid_t<span class="_"> </span><span class="ff1b">pid</span>);</div><div class="t m0 x127 h5f y2629 ff19 fs2d fc0 sc0 ls0 ws0">Returns: session leader<span class="_ _3"></span>’s process group ID if OK,<span class="_"> </span><span class="ff20">−</span>1<span class="_"> </span>on<span class="_"> </span>err<span class="_ _0"></span>or</div><div class="t m0 x32 h4d y262a ff19 fs26 fc0 sc0 ls0 ws0">If<span class="_ _45"> </span><span class="ff1b">pid<span class="_ _45"> </span></span>is <span class="_ _3"></span>0,<span class="_ _45"> </span><span class="ff1a">getsid<span class="_ _45"> </span></span><span class="lscc">re</span>turns <span class="_ _9"></span>the <span class="_ _9"></span>process <span class="_ _9"></span>group <span class="_ _3"></span>ID <span class="_ _9"></span>of <span class="_ _9"></span>the <span class="_ _9"></span>calling <span class="_ _9"></span>process’s <span class="_ _9"></span>session <span class="_ _9"></span>leader<span class="_ _6"></span>.</div><div class="t m0 x32 h49 y262b ff19 fs26 fc0 sc0 ls0 ws0">For <span class="_ _45"> </span>security <span class="_ _47"> </span>reasons, <span class="_ _45"> </span>some <span class="_ _45"> </span>implementations <span class="_ _47"> </span>may <span class="_ _45"> </span>restrict <span class="_ _47"> </span>the <span class="_ _45"> </span>calling <span class="_ _45"> </span>process <span class="_ _47"> </span>from</div><div class="t m0 x32 h4a y262c ff19 fs26 fc0 sc0 ls0 ws0">obtaining <span class="_ _23"></span>the <span class="_ _9"></span>process <span class="_ _9"></span>group <span class="_ _23"></span>ID <span class="_ _9"></span>of <span class="_ _23"> </span>the <span class="_ _23"></span>session <span class="_ _23"></span>leader <span class="_ _9"></span>if<span class="_ _35"> </span><span class="ff1b">pid<span class="_ _45"> </span></span>doesn’t <span class="_ _23"> </span>belong <span class="_ _23"></span>to <span class="_ _23"></span>the <span class="_ _9"></span>same</div><div class="t m0 x32 h49 y262d ff19 fs26 fc0 sc0 ls0 ws0">session as the caller<span class="_ _6"></span>.</div><div class="t m0 x35 h4b y262e ff16 fs27 fc0 sc0 ls0 ws0">9.6 <span class="_ _68"> </span>Controlling <span class="_"> </span>T<span class="_ _6"></span>erminal</div><div class="t m0 x32 h49 y262f ff19 fs26 fc0 sc0 ls0 ws0">Sessions and process gr<span class="_ _0"></span>oups have a few other characteristics.</div><div class="t m0 x3f h4a y2630 ff19 fs26 fc0 sc0 ls15d ws0">•A<span class="_ _c"></span><span class="ls0">session <span class="_"> </span>can <span class="_ _53"> </span>have <span class="_"> </span>a <span class="_ _53"> </span>single<span class="_ _59"> </span><span class="ff1b">controlling <span class="_ _53"> </span>terminal</span><span class="lsb24">.T<span class="_ _64"></span><span class="ls0">his <span class="_ _e"> </span>is <span class="_"> </span>usually <span class="_ _53"> </span>the <span class="_"> </span>terminal</span></span></span></div><div class="t m0 x15 h49 y2631 ff19 fs26 fc0 sc0 ls0 ws0">device (in the case of a terminal login) or pseudo terminal device (in <span class="_ _2"></span>the case of a</div><div class="t m0 x15 h49 y2632 ff19 fs26 fc0 sc0 ls0 ws0">network login) on which we log in.</div><div class="t m0 x3f h49 y2633 ff19 fs26 fc0 sc0 ls15d ws0">•T<span class="_ _4d"></span><span class="ls0">he <span class="_ _9"></span>session <span class="_ _23"></span>leader <span class="_ _9"></span>that <span class="_ _23"></span>establishes <span class="_ _9"></span>the <span class="_ _9"></span>connection <span class="_ _23"></span>to <span class="_ _9"></span>the <span class="_ _23"></span>controlling <span class="_ _9"></span>terminal <span class="_ _9"></span>is</span></div><div class="t m0 x15 h4a y2634 ff19 fs26 fc0 sc0 ls0 ws0">called the<span class="_"> </span><span class="ff1b">controlling pr<span class="_ _0"></span>ocess<span class="ff19">.</span></span></div><div class="t m0 x3f h4a y2635 ff19 fs26 fc0 sc0 ls15d ws0">•T<span class="_ _4d"></span><span class="ls0">he <span class="_"> </span>pr<span class="_ _1"></span>ocess <span class="_"> </span>groups <span class="_ _e"> </span>within <span class="_"> </span>a <span class="_ _e"> </span>session <span class="_"> </span>can <span class="_"> </span>be <span class="_ _53"> </span>divided <span class="_"> </span>into <span class="_"> </span>a <span class="_ _e"> </span>single<span class="_ _59"> </span><span class="ff1b">foreground</span></span></div><div class="t m0 x15 h4a y2636 ff1b fs26 fc0 sc0 ls0 ws0">process gr<span class="_ _0"></span>oup<span class="_"> </span><span class="ff19">and one or mor<span class="_ _0"></span>e<span class="_"> </span><span class="ff1b">background pr<span class="_ _0"></span>ocess groups<span class="ff19">.</span></span></span></div><div class="t m0 x3f h49 y2637 ff19 fs26 fc0 sc0 ls15d ws0">•I<span class="_ _4d"></span><span class="lsb25">fas<span class="_ _b"></span><span class="ls0">ession <span class="_ _9"></span>has <span class="_ _9"></span>a <span class="_ _9"></span>controlling <span class="_ _3"></span>terminal, <span class="_ _9"></span>it <span class="_ _9"></span>has <span class="_ _9"></span>a <span class="_ _9"></span>single <span class="_ _9"></span>foregr<span class="_ _1"></span>ound <span class="_ _9"></span>process <span class="_ _9"></span>group</span></span></div><div class="t m0 x15 h49 y2638 ff19 fs26 fc0 sc0 ls0 ws0">and all other process gr<span class="_ _0"></span>oups in the session ar<span class="_ _0"></span><span class="lsd3">eb<span class="_ _d"></span><span class="ls0">ackground process gr<span class="_ _1"></span>oups.</span></span></div><div class="t m0 x3f h49 y2639 ff19 fs26 fc0 sc0 ls15d ws0">•W<span class="_ _4d"></span><span class="ls0">henever <span class="_ _23"></span>we <span class="_ _23"> </span>press <span class="_ _23"></span>the <span class="_ _23"></span>terminal’s <span class="_ _23"></span>interrupt <span class="_ _23"></span>key <span class="_ _23"></span>(often <span class="_ _23"> </span>DELETE <span class="_ _23"> </span>or <span class="_ _23"> </span>Control</span></div><div class="t m0 x61 h49 y263a ff19 fs26 fc0 sc0 ls0 ws0">-</div><div class="t m0 x192 h49 y2639 ff19 fs26 fc0 sc0 ls0 ws0">C),</div><div class="t m0 x15 h49 y263b ff19 fs26 fc0 sc0 ls0 ws0">the interrupt signal is sent to all pr<span class="_ _0"></span>ocesses in the foregr<span class="_ _0"></span>ound process gr<span class="_ _1"></span>oup.</div><a class="l" href="#pff" data-dest-detail='[15,"XYZ",50,757,1]'><div class="d m1" style="border-style:none;position:absolute;left:80.893259px;bottom:510.234937px;width:155.724396px;height:19.679992px;background-color:rgba(255,255,255,0.000001);"></div></a></div><div class="pi" data-data='{"ctm":[2.100000,0.000000,0.000000,2.100000,-115.668004,-156.491993]}'></div></div>
