<div id="pf128" class="pf w4 h1f" data-page-no="128"><div class="pc pc128 w4 h1f"><img class="bi x0 y0 w3 h4" alt="" src="bg128.png"/><div class="t m0 x31 h2 y8e ff1 fs0 fc0 sc0 ls0 ws0"><span class="fc1 sc0">ptg10805159</span></div><div class="t m0 x35 h24 ya4 ff18 fs0 fc0 sc0 ls0 ws0">262<span class="_ _1b"> </span><span class="ff19">Process <span class="_"> </span>Contr<span class="_ _0"></span>ol <span class="_ _222"> </span>Chapter<span class="_ _4b"> </span>8</span></div><div class="t m0 x35 h27 y12f ff16 fsf fc0 sc0 ls0 ws0">Example</div><div class="t m0 x32 h2b y131 ff19 fsf fc0 sc0 lsa35 ws0">Ac<span class="_ _5b"></span><span class="ls0">ommon <span class="_ _66"> </span>use <span class="_ _66"> </span>for <span class="_ _47"> </span>the <span class="_"> </span>optional <span class="_ _66"> </span>argument <span class="_ _66"> </span>following <span class="_ _66"> </span>the <span class="_ _47"> </span>interpr<span class="_ _0"></span>eter<span class="_ _46"> </span><span class="ff1b">pathname<span class="_ _61"> </span></span>is <span class="_ _66"> </span>to</span></div><div class="t m0 x32 h26 y132 ff19 fsf fc0 sc0 ls0 ws0">specify <span class="_ _23"> </span>the<span class="_ _44"> </span><span class="ff1a">-f<span class="_ _35"> </span></span>option <span class="_ _23"> </span>for <span class="_ _42"> </span>programs <span class="_ _23"></span>that <span class="_ _23"> </span>support <span class="_ _42"> </span>this <span class="_ _23"> </span>option.<span class="_ _54"> </span>For <span class="_ _23"> </span>example, <span class="_ _42"> </span>an<span class="_ _35"> </span><span class="ff1a">awk</span></div><div class="t m0 x40 h2a y1ab0 ff19 fsf fc0 sc0 ls0 ws0">(</div><div class="t m0 x1b2 h2a y132 ff19 fsf fc0 sc0 ls0 ws0">1</div><div class="t m0 x17e h2a y1ab0 ff19 fsf fc0 sc0 ls0 ws0">)</div><div class="t m0 x32 h2a y133 ff19 fsf fc0 sc0 ls0 ws0">program can be executed as</div><div class="t m0 x3f h57 y2280 ff1a fs2d fc0 sc0 ls0 ws0">awk -f myfile</div><div class="t m0 x32 h26 y1210 ff19 fsf fc0 sc0 ls0 ws0">which tells<span class="_"> </span><span class="ff1a">awk<span class="_ _80"> </span></span>to read the<span class="_"> </span><span class="ff1a">awk<span class="_ _80"> </span></span>program from the ﬁle<span class="_"> </span><span class="ff1a">myfile</span>.</div><div class="t m0 x76 h52 y2281 ff19 fs2a fc0 sc0 ls0 ws0">Systems <span class="_ _9"> </span>derived <span class="_ _23"> </span>from <span class="_ _9"></span>UNIX <span class="_ _23"> </span>System <span class="_ _9"></span>V <span class="_ _23"> </span>often <span class="_ _9"></span>include <span class="_ _23"> </span>two <span class="_ _9"></span>versions <span class="_ _23"> </span>of <span class="_ _9"> </span>the<span class="_ _47"> </span><span class="ff1a">awk<span class="_ _45"> </span></span>language. <span class="_ _66"> </span>On</div><div class="t m0 x76 h52 y2282 ff19 fs2a fc0 sc0 ls0 ws0">these <span class="_ _47"> </span>systems,<span class="_ _46"> </span><span class="ff1a">awk<span class="_"> </span></span>is <span class="_ _47"> </span>often <span class="_ _45"> </span>called <span class="_ _66"> </span>‘‘old<span class="_ _59"> </span><span class="ff1a">awk</span><span class="lsa36">’’ <span class="_ _35"> </span>a</span>nd <span class="_ _45"> </span>corr<span class="_ _0"></span>esponds <span class="_ _47"> </span>to <span class="_ _47"> </span>the <span class="_ _47"> </span>original <span class="_ _47"> </span>version</div><div class="t m0 x76 h52 y2283 ff19 fs2a fc0 sc0 ls0 ws0">distributed with V<span class="_ _6"></span>ersion 7.<span class="_ _44"> </span>In contrast,<span class="_"> </span><span class="ff1a">nawk<span class="_ _53"> </span></span>(new<span class="_"> </span><span class="ff1a">awk</span><span class="lsa37">)c<span class="_ _84"></span><span class="ls0">ontains numerous enhancements and</span></span></div><div class="t m0 x76 h51 y2284 ff19 fs2a fc0 sc0 ls0 ws0">corresponds to <span class="_ _2"></span>the <span class="_ _2"></span>language <span class="_ _2"></span>described in <span class="_ _2"></span>Aho, <span class="_ _2"></span>Kernighan, <span class="_ _2"></span>and <span class="_ _2"></span>W<span class="_ _1"></span>einberger</div><div class="t m0 x3a h51 y2285 ff19 fs2a fc0 sc0 ls0 ws0">[</div><div class="t m0 x51 h51 y2284 ff19 fs2a fc0 sc0 ls0 ws0">1988</div><div class="t m0 x70 h51 y2285 ff19 fs2a fc0 sc0 ls0 ws0">]</div><div class="t m0 x18a h51 y2284 ff19 fs2a fc0 sc0 lsa38 ws0">.T<span class="_ _c"></span><span class="ls0">his <span class="_ _2"></span>newer</span></div><div class="t m0 x76 h51 y2286 ff19 fs2a fc0 sc0 ls0 ws0">version <span class="_ _3"></span>provides <span class="_ _2"></span>access <span class="_ _3"></span>to <span class="_ _3"></span>the <span class="_ _3"></span>command</div><div class="t m0 xeb h51 y2287 ff19 fs2a fc0 sc0 ls0 ws0">-</div><div class="t m0 x7f h51 y2286 ff19 fs2a fc0 sc0 ls0 ws0">line <span class="_ _3"></span>arguments, <span class="_ _2"></span>which <span class="_ _3"></span>we <span class="_ _3"></span>need <span class="_ _3"></span>for <span class="_ _3"></span>the <span class="_ _3"></span>example <span class="_ _3"></span>that</div><div class="t m0 x76 h51 y2288 ff19 fs2a fc0 sc0 ls0 ws0">follows. <span class="_"> </span>Solaris<span class="_"> </span>10 provides both versions.</div><div class="t m0 x76 h52 y2289 ff19 fs2a fc0 sc0 ls0 ws0">The<span class="_"> </span><span class="ff1a">awk<span class="_ _e"> </span></span>program is <span class="_ _2"></span>one <span class="_ _2"></span>of the <span class="_ _2"></span>utilities included <span class="_ _2"></span>by POSIX <span class="_ _2"></span>in its <span class="_ _2"></span>1003.2 standard, which <span class="_ _2"></span>is <span class="_ _2"></span>now</div><div class="t m0 x76 h51 y228a ff19 fs2a fc0 sc0 ls0 ws0">part <span class="_ _23"> </span>of <span class="_ _42"> </span>the <span class="_ _42"> </span>base <span class="_ _23"> </span>POSIX.1 <span class="_ _42"> </span>speciﬁcation <span class="_ _23"> </span>in <span class="_ _42"> </span>the <span class="_ _42"> </span>Single <span class="_ _23"> </span>UNIX <span class="_ _42"> </span>Speciﬁcation.<span class="_ _61"> </span>This <span class="_ _42"> </span>utility <span class="_ _23"> </span>is <span class="_ _42"> </span>also</div><div class="t m0 x76 h51 y228b ff19 fs2a fc0 sc0 ls0 ws0">based on the language described in Aho, Kernighan, and W<span class="_ _6"></span>einberger</div><div class="t m0 x12 h51 y228c ff19 fs2a fc0 sc0 ls0 ws0">[</div><div class="t m0 xfe h51 y228b ff19 fs2a fc0 sc0 ls0 ws0">1988</div><div class="t m0 x11e h51 y228c ff19 fs2a fc0 sc0 ls0 ws0">]</div><div class="t m0 x3e h51 y228b ff19 fs2a fc0 sc0 ls0 ws0">.</div><div class="t m0 x76 h52 y228d ff19 fs2a fc0 sc0 ls0 ws0">The <span class="_ _9"></span>version <span class="_ _23"> </span>of<span class="_ _66"> </span><span class="ff1a">awk<span class="_ _47"> </span></span>in <span class="_ _23"> </span>Mac <span class="_ _9"></span>OS <span class="_ _23"> </span>X <span class="_ _9"></span>10.6.8 <span class="_ _9"> </span>is <span class="_ _23"> </span>based <span class="_ _9"></span>on <span class="_ _23"> </span>the <span class="_ _9"></span>Bell <span class="_ _9"></span>Laboratories <span class="_ _23"> </span>version, <span class="_ _9"></span>which <span class="_ _9"> </span>has</div><div class="t m0 x76 h51 y228e ff19 fs2a fc0 sc0 ls0 ws0">been <span class="_ _2"></span>placed <span class="_ _3"></span>in <span class="_ _3"></span>the <span class="_ _3"></span>public <span class="_ _3"></span>domain.<span class="_ _4b"> </span>FreeBSD <span class="_ _3"></span>8.0 <span class="_ _2"></span>and <span class="_ _3"></span>some <span class="_ _3"></span>Linux <span class="_ _3"></span>distributions <span class="_ _3"></span>ship <span class="_ _3"></span>with <span class="_ _3"></span>GNU</div><div class="t m0 x76 h52 y228f ff1a fs2a fc0 sc0 ls0 ws0">awk<span class="ff19 lsa39">,c<span class="_ _84"></span><span class="ls0">alled<span class="_"> </span><span class="ff1a">gawk</span><span class="lsa39">,w<span class="_ _84"></span><span class="ls0">hich is linked to the name<span class="_"> </span><span class="ff1a">awk</span>.<span class="_ _44"> </span><span class="ff1a">gawk<span class="_ _53"> </span></span>conforms to the POSIX standard, but</span></span></span></span></div><div class="t m0 x76 h52 y2290 ff19 fs2a fc0 sc0 ls0 ws0">also includes other extensions.<span class="_ _44"> </span>Because they ar<span class="lsa3a">em<span class="_ _5"></span><span class="ls0">or<span class="lsa3a">eu<span class="_ _84"></span><span class="ls0">p-to-date,<span class="_"> </span><span class="ff1a">gawk<span class="_ _e"> </span></span>and the version of<span class="_"> </span><span class="ff1a">awk</span></span></span></span></span></div><div class="t m0 x76 h52 y2291 ff19 fs2a fc0 sc0 ls0 ws0">from <span class="_ _2"></span>Bell <span class="_ _2"></span>Laboratories <span class="_ _3"></span>ar<span class="lsa3b">ep<span class="_ _d"></span><span class="ls34e">re<span class="_ _2"></span><span class="ls0">ferred <span class="_ _2"></span>to <span class="_ _3"></span>either<span class="_ _80"> </span><span class="ff1a">nawk<span class="_ _80"> </span></span>or <span class="_ _3"></span>old<span class="_ _80"> </span><span class="ff1a">awk</span><span class="lsa3c">.(<span class="_ _c"></span><span class="ls0">The <span class="_ _3"></span>Bell <span class="_ _2"></span>Labs <span class="_ _3"></span>version <span class="_ _3"></span>of<span class="_ _80"> </span><span class="ff1a">awk</span></span></span></span></span></span></div><div class="t m0 x76 h52 y2292 ff19 fs2a fc0 sc0 ls0 ws0">is available at<span class="_"> </span><span class="ff1a">http://cm.bell-labs.com/cm/cs/awkbook/index.html</span>.)</div><div class="t m0 x32 h26 y2293 ff19 fsf fc0 sc0 ls0 ws0">Using the<span class="_"> </span><span class="ff1a">-f<span class="_ _80"> </span></span>option with an interpreter ﬁle lets us write</div><div class="t m0 x3f h57 y2294 ff1a fs2d fc0 sc0 ls0 ws0">#!/bin/awk -f</div><div class="t m0 x3f h58 y2295 ff1b fs2d fc0 sc0 ls0 ws0">(awk program follows in the interpr<span class="_ _0"></span>eter ﬁle)</div><div class="t m0 x32 h26 y2296 ff19 fsf fc0 sc0 ls0 ws0">For example, Figur<span class="ls44">e8<span class="_ _4f"></span><span class="ls0">.21 shows<span class="_"> </span><span class="ff1a">/usr/local/bin/awkexample<span class="_ _66"> </span></span>(an interpreter ﬁle).</span></span></div><div class="t m0 x32 h4e y2297 ff1a fs28 fc0 sc0 ls0 ws0">#!/usr/bin/awk -f</div><div class="t m0 x32 h4e y2298 ff1a fs28 fc0 sc0 ls1b6 ws0">#N<span class="_ _1d"></span><span class="ls0">ote: on Solaris, use nawk instead</span></div><div class="t m0 x32 h4e y2299 ff1a fs28 fc0 sc0 ls0 ws0">BEGIN {</div><div class="t m0 x8a h4e y229a ff1a fs28 fc0 sc0 ls0 ws0">for (i = 0; i &lt; ARGC; i++)</div><div class="t m0 x9d h4e y229b ff1a fs28 fc0 sc0 ls0 ws0">printf &quot;ARGV[%d] = %s\n&quot;, i, ARGV[i]</div><div class="t m0 x8a h4e y229c ff1a fs28 fc0 sc0 ls0 ws0">exit</div><div class="t m0 x32 h4e y229d ff1a fs28 fc0 sc0 ls0 ws0">}</div><div class="t m0 x18f h4f y229e ff18 fs11 fc0 sc0 ls0 ws0">Figure 8.21<span class="_ _5a"> </span><span class="ff19">An<span class="_"> </span><span class="ff1a">awk<span class="_ _e"> </span></span>program as an interpreter ﬁle</span></div><div class="t m0 x32 h54 y229f ff19 fs2c fc0 sc0 ls0 ws0">If <span class="_ _47"> </span>one <span class="_ _45"> </span>of <span class="_ _47"> </span>the <span class="_ _47"> </span>path <span class="_ _45"> </span>pr<span class="_ _0"></span>eﬁxes <span class="_ _47"> </span>is<span class="_ _16"> </span><span class="ff1a">/usr/local/bin</span>,<span class="_ _5a"> </span>we<span class="_ _16"> </span>can <span class="_ _47"> </span>execute <span class="_ _45"> </span>the <span class="_ _47"> </span>program <span class="_ _47"> </span>in</div><div class="t m0 x32 h55 y22a0 ff19 fs2c fc0 sc0 ls0 ws0">Figur<span class="ls142">e8<span class="_ _4f"></span><span class="ls0">.21 (assuming that we’ve turned on the execute bit for the ﬁle) as</span></span></div><div class="t m0 x3f h5d y22a1 ff1a fs2f fc0 sc0 ls0 ws0">$<span class="_"> </span><span class="ff1f">awkexample file1 FILENAME2 f3</span></div><div class="t m0 x3f h5d y22a2 ff1a fs2f fc0 sc0 ls0 ws0">ARGV[0] = awk</div><div class="t m0 x3f h5d y22a3 ff1a fs2f fc0 sc0 ls0 ws0">ARGV[1] = file1</div><div class="t m0 x3f h5d y22a4 ff1a fs2f fc0 sc0 ls0 ws0">ARGV[2] = FILENAME2</div><div class="t m0 x3f h5d y22a5 ff1a fs2f fc0 sc0 ls0 ws0">ARGV[3] = f3</div><a class="l" href="http://cm.bell-labs.com/cm/cs/awkbook/index.html"><div class="d m1" style="border-style:none;position:absolute;left:375.076805px;bottom:702.468890px;width:235.064010px;height:11.984008px;background-color:rgba(255,255,255,0.000001);"></div></a></div><div class="pi" data-data='{"ctm":[2.100000,0.000000,0.000000,2.100000,-115.668004,-156.491993]}'></div></div>
