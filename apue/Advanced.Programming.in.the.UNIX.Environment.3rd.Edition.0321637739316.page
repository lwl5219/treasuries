<div id="pf13c" class="pf w4 h1f" data-page-no="13c"><div class="pc pc13c w4 h1f"><img class="bi x0 y0 w3 h4" alt="" src="apue/bg13c.png"/><div class="t m0 x31 h2 y8e ff1 fs0 fc0 sc0 ls0 ws0"><span class="fc1 sc0">ptg10805159</span></div><div class="t m0 x35 h24 ya4 ff18 fs0 fc0 sc0 ls0 ws0">282<span class="_ _1b"> </span><span class="ff19">Process <span class="_"> </span>Contr<span class="_ _0"></span>ol <span class="_ _222"> </span>Chapter<span class="_ _4b"> </span>8</span></div><div class="t m0 x194 h57 y425 ff1a fs2d fc0 sc0 ls0 ws0">(tmsend-&gt;tms_cutime - tmsstart-&gt;tms_cutime) / (double) clktck);</div><div class="t m0 x8a h57 y426 ff1a fs2d fc0 sc0 ls0 ws0">printf(&quot; <span class="_"> </span>child<span class="_"> </span>sys: <span class="_ _d9"> </span>%7.2f\n&quot;,</div><div class="t m0 x194 h57 y800 ff1a fs2d fc0 sc0 ls0 ws0">(tmsend-&gt;tms_cstime - tmsstart-&gt;tms_cstime) / (double) clktck);</div><div class="t m0 x32 h57 y801 ff1a fs2d fc0 sc0 ls0 ws0">}</div><div class="t m0 x185 h2d y24dc ff18 fs10 fc0 sc0 ls0 ws0">Figure 8.31<span class="_ _5a"> </span><span class="ff19 ls373">Ti<span class="_ _3"></span><span class="ls0">me and execute all command</span></span></div><div class="t m0 x1af h2d y24dd ff19 fs10 fc0 sc0 ls0 ws0">-</div><div class="t m0 x1a3 h2d y24dc ff19 fs10 fc0 sc0 ls0 ws0">line arguments</div><div class="t m0 x32 h49 y24de ff19 fs26 fc0 sc0 ls0 ws0">If we run this pr<span class="_ _0"></span>ogram, we get</div><div class="t m0 x3f h4e y24df ff1a fs28 fc0 sc0 ls0 ws0">$<span class="_"> </span><span class="ff1f">./a.out &quot;sleep 5&quot; &quot;date&quot; &quot;man bash &gt;/dev/null&quot;</span></div><div class="t m0 x3f h4e y24e0 ff1a fs28 fc0 sc0 ls0 ws0">command: sleep 5</div><div class="t m0 xf4 h4e y24e1 ff1a fs28 fc0 sc0 ls0 ws0">real: <span class="_ _15"> </span>5.01</div><div class="t m0 xf4 h4e y24e2 ff1a fs28 fc0 sc0 ls0 ws0">user: <span class="_ _15"> </span>0.00</div><div class="t m0 xf4 h4e y24e3 ff1a fs28 fc0 sc0 ls0 ws0">sys: <span class="_ _8a"> </span>0.00</div><div class="t m0 xf4 h4e y24e4 ff1a fs28 fc0 sc0 ls0 ws0">child user:<span class="_ _8a"> </span>0.00</div><div class="t m0 xf4 h4e y24e5 ff1a fs28 fc0 sc0 ls0 ws0">child sys:<span class="_ _189"> </span>0.00</div><div class="t m0 x3f h4e y24e6 ff1a fs28 fc0 sc0 ls0 ws0">normal termination, exit status = 0</div><div class="t m0 x3f h4e y24e7 ff1a fs28 fc0 sc0 ls0 ws0">command: date</div><div class="t m0 x3f h4e y24e8 ff1a fs28 fc0 sc0 ls0 ws0">Sun Feb 26 18:39:23 EST 2012</div><div class="t m0 xf4 h4e y24e9 ff1a fs28 fc0 sc0 ls0 ws0">real: <span class="_ _15"> </span>0.00</div><div class="t m0 xf4 h4e y24ea ff1a fs28 fc0 sc0 ls0 ws0">user: <span class="_ _15"> </span>0.00</div><div class="t m0 xf4 h4e y24eb ff1a fs28 fc0 sc0 ls0 ws0">sys: <span class="_ _8a"> </span>0.00</div><div class="t m0 xf4 h4e y24ec ff1a fs28 fc0 sc0 ls0 ws0">child user:<span class="_ _8a"> </span>0.00</div><div class="t m0 xf4 h4e y24ed ff1a fs28 fc0 sc0 ls0 ws0">child sys:<span class="_ _189"> </span>0.00</div><div class="t m0 x3f h4e y24ee ff1a fs28 fc0 sc0 ls0 ws0">normal termination, exit status = 0</div><div class="t m0 x3f h4e y24ef ff1a fs28 fc0 sc0 ls0 ws0">command: man bash &gt;/dev/null</div><div class="t m0 xf4 h4e y24f0 ff1a fs28 fc0 sc0 ls0 ws0">real: <span class="_ _15"> </span>1.46</div><div class="t m0 xf4 h4e y24f1 ff1a fs28 fc0 sc0 ls0 ws0">user: <span class="_ _15"> </span>0.00</div><div class="t m0 xf4 h4e y24f2 ff1a fs28 fc0 sc0 ls0 ws0">sys: <span class="_ _8a"> </span>0.00</div><div class="t m0 xf4 h4e y24f3 ff1a fs28 fc0 sc0 ls0 ws0">child user:<span class="_ _8a"> </span>1.32</div><div class="t m0 xf4 h4e y24f4 ff1a fs28 fc0 sc0 ls0 ws0">child sys:<span class="_ _189"> </span>0.07</div><div class="t m0 x3f h4e y24f5 ff1a fs28 fc0 sc0 ls0 ws0">normal termination, exit status = 0</div><div class="t m0 x32 h49 y24f6 ff19 fs26 fc0 sc0 ls0 ws0">In <span class="_ _3"></span>the <span class="_ _3"></span>ﬁrst <span class="_ _3"></span>two <span class="_ _9"></span>commands, <span class="_ _3"></span>execution <span class="_ _3"></span>is <span class="_ _9"></span>fast <span class="_ _3"></span>enough <span class="_ _3"></span>to <span class="_ _3"></span>avoid <span class="_ _9"></span>registering <span class="_ _2"></span>any <span class="_ _3"></span>CPU <span class="_ _9"></span>time</div><div class="t m0 x32 h49 y24f7 ff19 fs26 fc0 sc0 ls0 ws0">at <span class="_ _42"> </span>the <span class="_ _23"> </span>reported <span class="_ _42"> </span>resolution. <span class="_ _35"> </span>In<span class="_ _35"> </span>the <span class="_ _42"> </span>thir<span class="lsaa9">dc<span class="_ _43"></span><span class="ls0">ommand, <span class="_ _23"> </span>however<span class="_ _1"></span>,<span class="_ _44"> </span>we<span class="_ _35"> </span>run <span class="_ _42"> </span>a <span class="_ _42"> </span>command <span class="_ _23"> </span>that</span></span></div><div class="t m0 x32 h49 y24f8 ff19 fs26 fc0 sc0 ls0 ws0">takes enough <span class="_ _2"></span>processing time <span class="_ _2"></span>to <span class="_ _2"></span>note <span class="_ _2"></span>that all <span class="_ _2"></span>the <span class="_ _2"></span>CPU <span class="_ _2"></span>time <span class="_ _2"></span>appears in <span class="_ _2"></span>the <span class="_ _2"></span>child <span class="_ _2"></span>process,</div><div class="t m0 x32 h49 y24f9 ff19 fs26 fc0 sc0 ls0 ws0">which is wher<span class="lsd3">et<span class="_ _4f"></span><span class="ls0">he shell and the command execute.</span></span></div><div class="t m0 x35 h99 y24fa ff16 fs3b fc0 sc0 ls0 ws0">8.18 <span class="_ _93"> </span>Summary</div><div class="t m0 x32 h55 y24fb ff19 fs2c fc0 sc0 lsaaa ws0">At<span class="_ _26"></span><span class="ls0">horough <span class="_ _45"> </span>understanding <span class="_ _45"> </span>of <span class="_ _45"> </span>the <span class="_ _35"> </span>UNIX <span class="_ _45"> </span>System’s <span class="_ _45"> </span>process <span class="_ _45"> </span>control <span class="_ _45"> </span>is <span class="_ _45"> </span>essential <span class="_ _45"> </span>for</span></div><div class="t m0 x32 h54 y24fc ff19 fs2c fc0 sc0 ls0 ws0">advanced <span class="_ _53"> </span>programming. <span class="_ _44"> </span>Ther<span class="lsaab">ea<span class="_ _c"></span><span class="ls150">re <span class="_"> </span>o<span class="ls0">nly <span class="_ _e"> </span>a <span class="_ _53"> </span>few <span class="_ _e"> </span>functions <span class="_ _53"> </span>to <span class="_ _e"> </span>master:<span class="_ _4b"> </span><span class="ff1a">fork</span><span class="lsaab">,t<span class="_ _c"></span><span class="ls0">he<span class="_ _4b"> </span><span class="ff1a">exec</span></span></span></span></span></span></div><div class="t m0 x32 h54 y24fd ff19 fs2c fc0 sc0 ls0 ws0">family<span class="_ _4"></span>,<span class="_ _35"> </span><span class="ff1a">_exit</span>,<span class="_ _35"> </span><span class="ff1a">wait</span><span class="lsaac">,a<span class="_ _43"></span><span class="ls0">nd<span class="_ _35"> </span><span class="ff1a">waitpid</span><span class="lsaad">.T<span class="_ _26"></span><span class="ls0">hese <span class="_ _23"></span>primitives <span class="_ _23"></span>ar<span class="lsaae">eu<span class="_ _43"></span><span class="ls0">sed <span class="_ _23"></span>in <span class="_ _23"></span>many <span class="_ _23"> </span>applications.</span></span></span></span></span></span></div><div class="t m0 x32 h54 y24fe ff19 fs2c fc0 sc0 ls0 ws0">The<span class="_"> </span><span class="ff1a">fork<span class="_ _80"> </span></span>function also gave us an opportunity to look at race conditions.</div><div class="t m0 x3f h54 y24ff ff19 fs2c fc0 sc0 ls0 ws0">Our <span class="_ _23"></span>examination <span class="_ _9"></span>of <span class="_ _23"></span>the<span class="_ _45"> </span><span class="ff1a">system<span class="_ _35"> </span></span>function <span class="_ _23"></span>and <span class="_ _9"></span>process <span class="_ _9"></span>accounting <span class="_ _23"> </span>gave <span class="_ _23"></span>us <span class="_ _23"></span>another</div><div class="t m0 x32 h55 y2500 ff19 fs2c fc0 sc0 ls0 ws0">look <span class="_ _23"></span>at <span class="_ _23"></span>all <span class="_ _23"></span>these <span class="_ _23"></span>pr<span class="_ _0"></span>ocess <span class="_ _23"></span>control <span class="_ _9"></span>functions.<span class="_ _51"> </span><span class="ls155">We <span class="_ _47"> </span>a<span class="_ _9"></span></span>lso <span class="_ _23"> </span>looked <span class="_ _23"> </span>at <span class="_ _23"> </span>another <span class="_ _23"> </span>variation <span class="_ _23"> </span>of <span class="_ _23"> </span>the</div><a class="l" href="#pff" data-dest-detail='[15,"XYZ",50,757,1]'><div class="d m1" style="border-style:none;position:absolute;left:80.892842px;bottom:299.329805px;width:90.804596px;height:19.680008px;background-color:rgba(255,255,255,0.000001);"></div></a></div><div class="pi" data-data='{"ctm":[2.100000,0.000000,0.000000,2.100000,-115.668004,-156.491993]}'></div></div>
