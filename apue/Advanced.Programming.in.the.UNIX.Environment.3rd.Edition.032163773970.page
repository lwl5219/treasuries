<div id="pf46" class="pf w4 h1f" data-page-no="46"><div class="pc pc46 w4 h1f"><img class="bi x0 y0 w3 h4" alt="" src="apue/bg46.png"/><div class="t m0 x31 h2 y8e ff1 fs0 fc0 sc0 ls0 ws0"><span class="fc1 sc0">ptg10805159</span></div><div class="t m0 x35 h24 ya4 ff18 fs0 fc0 sc0 ls0 ws0">36<span class="_ _1b"> </span><span class="ff19">UNIX <span class="_"> </span>Standardization <span class="_"> </span>and <span class="_"> </span>Implementations<span class="_ _99"> </span>Chapter <span class="_"> </span>2</span></div><div class="t m0 x35 h53 y12f ff16 fs2b fc0 sc0 ls0 ws0">2.4 <span class="_ _68"> </span>Relationship<span class="_ _54"> </span>of <span class="_"> </span>Standards <span class="_"> </span>and <span class="_"> </span>Implementations</div><div class="t m0 x32 h2a y4de ff19 fsf fc0 sc0 ls0 ws0">The <span class="_ _2"></span>standards <span class="_ _2"></span>that <span class="_ _3"></span>we’ve <span class="_ _2"></span>mentioned <span class="_ _3"></span>deﬁne <span class="_ _2"></span>a <span class="_ _3"></span>subset <span class="_ _3"></span>of <span class="_ _2"></span>any <span class="_ _3"></span>actual <span class="_ _2"></span>system.<span class="_ _16"> </span>The <span class="_ _2"></span>focus <span class="_ _3"></span>of</div><div class="t m0 x32 h2a y6d0 ff19 fsf fc0 sc0 ls0 ws0">this <span class="_ _2"></span>book <span class="_ _2"></span>is <span class="_ _3"></span>on <span class="_ _2"></span>four <span class="_ _3"></span>real <span class="_ _2"></span>systems: <span class="_ _2"></span>FreeBSD <span class="_ _2"></span>8.0, <span class="_ _2"></span>Linux <span class="_ _3"></span>3.2.0, <span class="_ _2"></span>Mac <span class="_ _2"></span>OS <span class="_ _3"></span>X <span class="_ _2"></span>10.6.8, <span class="_ _3"></span>and <span class="_ _2"></span>Solaris</div><div class="t m0 x32 h2a y6d1 ff19 fsf fc0 sc0 ls0 ws0">10. <span class="_ _35"> </span>Although<span class="_ _35"> </span>only <span class="_ _42"> </span>Mac <span class="_ _23"> </span>OS <span class="_ _42"> </span>X <span class="_ _23"> </span>and <span class="_ _23"> </span>Solaris <span class="_ _42"> </span>can <span class="_ _23"> </span>call <span class="_ _42"> </span>themselves <span class="_ _23"> </span>UNIX <span class="_ _42"> </span>systems, <span class="_ _23"> </span>all <span class="_ _42"> </span>four</div><div class="t m0 x32 h2a y6d2 ff19 fsf fc0 sc0 ls0 ws0">provide <span class="_ _2"></span>a <span class="_ _9"></span>similar <span class="_ _3"></span>programming <span class="_ _3"></span>environment. <span class="_ _47"> </span>Because<span class="_ _45"> </span>all <span class="_ _3"></span>four <span class="_ _3"></span>ar<span class="ls268">eP<span class="_ _b"></span><span class="ls0">OSIX <span class="_ _9"></span>compliant <span class="_ _3"></span>to</span></span></div><div class="t m0 x32 h2a y6d3 ff19 fsf fc0 sc0 ls0 ws0">varying <span class="_"> </span>degrees, <span class="_"> </span>we <span class="_"> </span>will <span class="_"> </span>also <span class="_"> </span>concentrate <span class="_"> </span>on <span class="_"> </span>the <span class="_"> </span>features <span class="_"> </span>requir<span class="_ _1"></span>ed <span class="_"> </span>by <span class="_ _66"> </span>the <span class="_"> </span>POSIX.1</div><div class="t m0 x32 h2a y6d4 ff19 fsf fc0 sc0 ls0 ws0">standard, <span class="_ _53"> </span>noting <span class="_"> </span>any <span class="_ _e"> </span>differences <span class="_ _53"> </span>between <span class="_"> </span>POSIX <span class="_ _e"> </span>and <span class="_"> </span>the <span class="_ _e"> </span>actual <span class="_ _e"> </span>implementations <span class="_"> </span>of</div><div class="t m0 x32 h2a y6d5 ff19 fsf fc0 sc0 ls0 ws0">these <span class="_ _42"> </span>four <span class="_ _42"> </span>systems.<span class="_ _54"> </span>Those <span class="_ _42"> </span>features <span class="_ _23"> </span>and <span class="_ _42"> </span>routines <span class="_ _42"> </span>that <span class="_ _42"> </span>ar<span class="ls269">es<span class="_ _c"></span><span class="ls0">peciﬁc <span class="_ _42"> </span>to <span class="_ _42"> </span>only <span class="_ _42"> </span>a <span class="_ _42"> </span>particular</span></span></div><div class="t m0 x32 h2a y6d6 ff19 fsf fc0 sc0 ls0 ws0">implementation <span class="_ _23"> </span>ar<span class="ls26a">ec<span class="_ _43"></span><span class="ls0">learly <span class="_ _23"> </span>marked.<span class="_ _51"> </span><span class="ls5f">We<span class="_ _23"></span></span>’ll <span class="_ _23"> </span>also <span class="_ _23"> </span>note <span class="_ _42"> </span>any <span class="_ _23"> </span>features <span class="_ _23"> </span>that <span class="_ _42"> </span>ar<span class="ls26b">er<span class="_ _c"></span><span class="ls0">equired <span class="_ _23"> </span>on</span></span></span></span></div><div class="t m0 x32 h2a y6d7 ff19 fsf fc0 sc0 ls0 ws0">UNIX systems but ar<span class="ls44">eo<span class="_ _4f"></span><span class="ls0">ptional on other POSIX-conforming systems.</span></span></div><div class="t m0 x3f h2a y6d8 ff19 fsf fc0 sc0 ls0 ws0">Be <span class="_ _9"></span>awar<span class="ls26c">et<span class="_ _b"></span><span class="ls0">hat <span class="_ _9"></span>the <span class="_ _9"></span>implementations <span class="_ _9"></span>provide <span class="_ _9"></span>backwar<span class="ls26c">dc<span class="_ _b"></span><span class="ls0">ompatibility <span class="_ _3"></span>for <span class="_ _9"></span>features <span class="_ _9"></span>in</span></span></span></span></div><div class="t m0 x32 h2a y6d9 ff19 fsf fc0 sc0 ls0 ws0">earlier <span class="_ _53"> </span>releases, <span class="_ _42"> </span>such <span class="_ _53"> </span>as <span class="_ _53"> </span>SVR3.2 <span class="_ _53"> </span>and <span class="_ _53"> </span>4.3BSD.<span class="_ _65"> </span>For <span class="_ _53"> </span>example, <span class="_ _53"> </span>Solaris <span class="_ _53"> </span>supports <span class="_ _53"> </span>both <span class="_ _53"> </span>the</div><div class="t m0 x32 h26 y6da ff19 fsf fc0 sc0 ls0 ws0">POSIX.1 <span class="_ _2"></span>speciﬁcation <span class="_ _3"></span>for <span class="_ _3"></span>nonblocking <span class="_ _2"></span>I/O <span class="_ _3"></span>(<span class="ff1a">O_NONBLOCK</span><span class="ls77">)a<span class="_ _4f"></span><span class="ls0">nd <span class="_ _2"></span>the <span class="_ _3"></span>traditional <span class="_ _3"></span>System <span class="_ _3"></span>V</span></span></div><div class="t m0 x32 h26 y6db ff19 fsf fc0 sc0 ls0 ws0">method <span class="_ _42"> </span>(<span class="ff1a">O_NDELAY</span>). <span class="_ _44"> </span>In<span class="_ _44"> </span>this <span class="_ _42"> </span>text, <span class="_ _42"> </span>we’ll <span class="_ _53"> </span>use <span class="_ _42"> </span>only <span class="_ _42"> </span>the <span class="_ _53"> </span>POSIX.1 <span class="_ _42"> </span>feature, <span class="_ _42"> </span>although <span class="_ _42"> </span>we’ll</div><div class="t m0 x32 h2a y6dc ff19 fsf fc0 sc0 ls0 ws0">mention <span class="_ _42"> </span>the <span class="_ _42"> </span>nonstandar<span class="ls26d">df<span class="_ _c"></span><span class="ls0">eatur<span class="ls26d">et<span class="_ _43"></span><span class="ls0">hat <span class="_ _42"> </span>it <span class="_ _42"> </span>replaces. <span class="_ _35"> </span>Similarly<span class="_ _6"></span><span class="ls26d">,b<span class="_ _c"></span><span class="ls0">oth <span class="_ _53"> </span>SVR3.2 <span class="_ _42"> </span>and <span class="_ _53"> </span>4.3BSD</span></span></span></span></span></span></div><div class="t m0 x32 h2a y6dd ff19 fsf fc0 sc0 ls0 ws0">provided r<span class="_ _0"></span>eliable signals in a <span class="_ _2"></span>way that differs from the POSIX.1 standard. <span class="_"> </span>In<span class="_"> </span>Chapter 10</div><div class="t m0 x32 h2a y6de ff19 fsf fc0 sc0 ls0 ws0">we describe only the POSIX.1 signal mechanism.</div><div class="t m0 x35 h53 y162 ff16 fs2b fc0 sc0 ls0 ws0">2.5 <span class="_ _68"> </span>Limits</div><div class="t m0 x32 h2a y6df ff19 fsf fc0 sc0 ls0 ws0">The <span class="_ _9"></span>implementations <span class="_ _9"></span>deﬁne <span class="_ _9"></span>many <span class="_ _23"></span>magic <span class="_ _9"></span>numbers <span class="_ _9"></span>and <span class="_ _9"></span>constants.<span class="_ _5a"> </span>Many <span class="_ _9"></span>of <span class="_ _23"></span>these <span class="_ _9"></span>have</div><div class="t m0 x32 h2a y6e0 ff19 fsf fc0 sc0 ls0 ws0">been <span class="_ _3"></span>har<span class="ls26e">dc<span class="_ _b"></span><span class="ls0">oded <span class="_ _3"></span>into <span class="_ _3"></span>programs <span class="_ _3"></span>or <span class="_ _3"></span>wer<span class="ls26f">ed<span class="_ _b"></span><span class="ls0">etermined <span class="_ _3"></span>using <span class="_ _3"></span>ad <span class="_ _3"></span>hoc <span class="_ _3"></span>techniques.<span class="_ _16"> </span><span class="ls65">Wi<span class="_ _3"></span></span>th <span class="_ _3"></span>the</span></span></span></span></div><div class="t m0 x32 h2a y6e1 ff19 fsf fc0 sc0 ls0 ws0">various <span class="_ _23"> </span>standardization <span class="_ _23"> </span>efforts <span class="_ _23"> </span>that <span class="_ _23"> </span>we’ve <span class="_ _42"> </span>described, <span class="_ _23"> </span>mor<span class="ls26b">ep<span class="_ _43"></span><span class="ls0">ortable <span class="_ _23"> </span>methods <span class="_ _42"> </span>ar<span class="ls26b">en<span class="_ _43"></span><span class="ls0">ow</span></span></span></span></div><div class="t m0 x32 h2a y6e2 ff19 fsf fc0 sc0 ls0 ws0">provided to determine these <span class="_ _2"></span>magic numbers and <span class="_ _2"></span>implementation-deﬁned limits, <span class="_ _2"></span>greatly</div><div class="t m0 x32 h2a y6e3 ff19 fsf fc0 sc0 ls0 ws0">improving the portability of softwar<span class="_ _0"></span><span class="ls44">ew<span class="_ _d"></span><span class="ls0">ritten for the UNIX environment.</span></span></div><div class="t m0 x3f h2a y6e4 ff19 fsf fc0 sc0 lsbc ws0">Tw<span class="_ _9"></span><span class="ls44">ot<span class="_ _d"></span><span class="ls0">ypes of limits ar<span class="ls44">en<span class="_ _d"></span><span class="ls0">eeded:</span></span></span></span></div><div class="t m0 x3f h2a y6e5 ff19 fsf fc0 sc0 ls0 ws0">1. <span class="_ _51"> </span>Compile-time<span class="_"> </span>limits (e.g., what’s the largest value of a short integer?)</div><div class="t m0 x3f h2a y6e6 ff19 fsf fc0 sc0 ls0 ws0">2. <span class="_ _51"> </span>Runtime<span class="_"> </span>limits (e.g., how many bytes in a ﬁlename?)</div><div class="t m0 x32 h2a y6e7 ff19 fsf fc0 sc0 ls0 ws0">Compile-time <span class="_ _2"></span>limits <span class="_ _2"></span>can <span class="_ _2"></span>be <span class="_ _3"></span>deﬁned <span class="_ _2"></span>in <span class="_ _2"></span>headers <span class="_ _3"></span>that <span class="_ _2"></span>any <span class="_ _2"></span>program <span class="_ _2"></span>can <span class="_ _2"></span>include <span class="_ _2"></span>at <span class="_ _3"></span>compile</div><div class="t m0 x32 h2a y6e8 ff19 fsf fc0 sc0 ls0 ws0">time. <span class="_"> </span>But<span class="_ _66"> </span><span class="ls4e">ru</span>ntime <span class="_ _2"></span>limits requir<span class="ls11b">et<span class="_ _4f"></span><span class="ls0">he process to <span class="_ _2"></span>call a <span class="_ _2"></span>function to <span class="_ _2"></span>obtain the <span class="_ _2"></span>limit’s value.</span></span></div><div class="t m0 x3f h2a y6e9 ff19 fsf fc0 sc0 ls0 ws0">Additionally<span class="_ _4"></span><span class="ls270">,s<span class="_ _5b"></span><span class="ls0">ome <span class="_ _47"> </span>limits <span class="_"> </span>can <span class="_ _47"> </span>be <span class="_ _66"> </span>ﬁxed <span class="_ _66"> </span>on <span class="_ _47"> </span>a <span class="_"> </span>given <span class="_ _47"> </span>implementation<span class="_ _9"></span><span class="ls9d">—a<span class="_ _6"></span><span class="ls0">nd <span class="_ _66"> </span>could</span></span></span></span></div><div class="t m0 x32 h2a y6ea ff19 fsf fc0 sc0 ls0 ws0">therefor<span class="_ _0"></span>e<span class="_ _35"> </span>be<span class="_ _44"> </span>deﬁned <span class="_ _42"> </span>statically <span class="_ _42"> </span>in <span class="_ _42"> </span>a <span class="_ _42"> </span>header<span class="_ _3"></span><span class="ls9d">—y<span class="_ _1"></span><span class="ls0">et <span class="_ _42"> </span>vary <span class="_ _42"> </span>on <span class="_ _42"> </span>another <span class="_ _42"> </span>implementation <span class="_ _42"> </span>and</span></span></div><div class="t m0 x32 h2a y6eb ff19 fsf fc0 sc0 ls0 ws0">would requir<span class="ls271">ear<span class="_ _8"></span><span class="ls0">untime <span class="_ _2"></span>function call.<span class="_ _61"> </span>An example <span class="_ _2"></span>of this <span class="_ _2"></span>type <span class="_ _2"></span>of limit <span class="_ _2"></span>is the <span class="_ _2"></span>maximum</span></span></div><div class="t m0 x32 h2a y6ec ff19 fsf fc0 sc0 ls0 ws0">number <span class="_ _53"> </span>of <span class="_ _53"> </span>bytes <span class="_ _e"> </span>in <span class="_ _53"> </span>a <span class="_ _e"> </span>ﬁlename.<span class="_ _65"> </span>Befor<span class="ls272">eS<span class="_ _55"></span><span class="ls0">VR4, <span class="_ _53"> </span>System <span class="_ _e"> </span>V <span class="_ _53"> </span>historically <span class="_ _53"> </span>allowed <span class="_ _e"> </span>only <span class="_ _53"> </span>14</span></span></div><div class="t m0 x32 h2a y6ed ff19 fsf fc0 sc0 ls0 ws0">bytes <span class="_ _9"></span>in <span class="_ _3"></span>a <span class="_ _9"></span>ﬁlename, <span class="_ _9"></span>whereas <span class="_ _3"></span>BSD-derived <span class="_ _9"></span>systems <span class="_ _9"></span>increased <span class="_ _3"></span>this <span class="_ _9"></span>number <span class="_ _9"></span>to <span class="_ _9"></span>255.<span class="_ _16"> </span>Most</div><div class="t m0 x32 h2a y6ee ff19 fsf fc0 sc0 ls0 ws0">UNIX <span class="_ _2"></span>System <span class="_ _3"></span>implementations <span class="_ _3"></span>these <span class="_ _3"></span>days <span class="_ _2"></span>support <span class="_ _3"></span>multiple <span class="_ _3"></span>ﬁle <span class="_ _3"></span>system <span class="_ _3"></span>types, <span class="_ _2"></span>and <span class="_ _3"></span>each</div><div class="t m0 x32 h2a y6ef ff19 fsf fc0 sc0 ls0 ws0">type <span class="_ _2"></span>has <span class="_ _3"></span>its <span class="_ _3"></span>own <span class="_ _3"></span>limit.<span class="_ _16"> </span>This <span class="_ _3"></span>is <span class="_ _3"></span>the <span class="_ _3"></span>case <span class="_ _3"></span>of <span class="_ _3"></span>a <span class="_ _3"></span>runtime <span class="_ _2"></span>limit <span class="_ _3"></span>that <span class="_ _3"></span>depends <span class="_ _3"></span>on <span class="_ _3"></span>where<span class="_ _47"> </span>in<span class="_ _47"> </span>the</div><div class="t m0 x32 h2a y6f0 ff19 fsf fc0 sc0 ls0 ws0">ﬁle system the ﬁle in question is located.<span class="_ _46"> </span><span class="ls273">Aﬁ<span class="_ _d"></span><span class="ls0">lename in the <span class="_ _2"></span>root ﬁle system, for example,</span></span></div><div class="t m0 x32 h2a y6f1 ff19 fsf fc0 sc0 ls0 ws0">could <span class="_ _e"> </span>have <span class="_ _e"> </span>a <span class="_ _e"> </span>14</div><div class="t m0 xdf h2a y6f2 ff19 fsf fc0 sc0 ls0 ws0">-</div><div class="t m0 x50 h2a y6f1 ff19 fsf fc0 sc0 ls0 ws0">byte <span class="_ _e"> </span>limit, <span class="_ _e"> </span>whereas <span class="_ _53"> </span>a <span class="_"> </span>ﬁlename <span class="_ _53"> </span>in <span class="_ _e"> </span>another <span class="_ _e"> </span>ﬁle <span class="_"> </span>system <span class="_ _53"> </span>could <span class="_ _e"> </span>have <span class="_ _e"> </span>a</div><div class="t m0 x32 h2a y6f3 ff19 fsf fc0 sc0 ls0 ws0">255</div><div class="t m0 x20 h2a y6f4 ff19 fsf fc0 sc0 ls0 ws0">-</div><div class="t m0 x3f h2a y6f3 ff19 fsf fc0 sc0 ls0 ws0">byte limit.</div><div class="t m0 x3f h2a y6f5 ff19 fsf fc0 sc0 ls5f ws0">To <span class="_ _53"> </span>s<span class="_ _9"></span><span class="ls0">olve these problems, three types of limits ar<span class="_ _1"></span><span class="ls44">ep<span class="_ _5"></span><span class="ls45">ro<span class="ls0">vided:</span></span></span></span></div><div class="t m0 x3f h2a y6f6 ff19 fsf fc0 sc0 ls0 ws0">1. <span class="_ _51"> </span>Compile-time<span class="_"> </span>limits (headers)</div><a class="l" href="#pfc" data-dest-detail='[12,"XYZ",50,757,1]'><div class="d m1" style="border-style:none;position:absolute;left:80.892409px;bottom:1236.288916px;width:321.154808px;height:19.679993px;background-color:rgba(255,255,255,0.000001);"></div></a><a class="l" href="#pfc" data-dest-detail='[12,"XYZ",50,757,1]'><div class="d m1" style="border-style:none;position:absolute;left:80.892201px;bottom:732.288916px;width:71.339904px;height:19.679993px;background-color:rgba(255,255,255,0.000001);"></div></a></div><div class="pi" data-data='{"ctm":[2.100000,0.000000,0.000000,2.100000,-115.668004,-156.491993]}'></div></div>
