<div id="pfe4" class="pf w4 h1f" data-page-no="e4"><div class="pc pce4 w4 h1f"><img class="bi x0 y0 w3 h4" alt="" src="bge4.png"/><div class="t m0 x31 h2 y8e ff1 fs0 fc0 sc0 ls0 ws0"><span class="fc1 sc0">ptg10805159</span></div><div class="t m0 x35 h24 ya4 ff18 fs0 fc0 sc0 ls0 ws0">194<span class="_ _1b"> </span><span class="ff19">System <span class="_"> </span>Data <span class="_"> </span>Files <span class="_"> </span>and <span class="_"> </span>Information<span class="_ _114"> </span>Chapter <span class="_"> </span>6</span></div><div class="t m0 x32 h2a y12f ff19 fsf fc0 sc0 ls0 ws0">containing <span class="_ _9"></span>the <span class="_ _9"></span>ﬁrst <span class="_ _23"></span>day <span class="_ _9"></span>in <span class="_ _23"></span>January <span class="_ _9"></span>has <span class="_ _9"></span>four <span class="_ _23"></span>or <span class="_ _9"></span>mor<span class="ls811">ed<span class="_ _b"></span><span class="ls0">ays <span class="_ _3"></span>in <span class="_ _23"></span>the <span class="_ _9"></span>new <span class="_ _23"></span>year<span class="_ _6"></span><span class="ls811">,t<span class="_ _b"></span><span class="ls0">hen <span class="_ _9"></span>this <span class="_ _23"></span>is</span></span></span></span></div><div class="t m0 x32 h2a y130 ff19 fsf fc0 sc0 ls0 ws0">treated as <span class="_ _2"></span>week <span class="_ _2"></span>1.<span class="_ _61"> </span>Otherwise, <span class="_ _2"></span>it <span class="_ _2"></span>is <span class="_ _2"></span>treated as <span class="_ _2"></span>the <span class="_ _3"></span>last <span class="_ _2"></span>week <span class="_ _2"></span>of <span class="_ _2"></span>the <span class="_ _2"></span>previous year<span class="_ _1"></span><span class="ls812">.I<span class="_ _5b"></span><span class="ls813">nb<span class="_ _4f"></span><span class="ls0">oth</span></span></span></div><div class="t m0 x32 h2a y131 ff19 fsf fc0 sc0 ls0 ws0">cases, Monday is treated as the ﬁrst day of the week.</div><div class="t m0 x3f h26 y132 ff19 fsf fc0 sc0 ls0 ws0">As <span class="_ _35"> </span>with<span class="_ _54"> </span><span class="ff1a">printf</span>,<span class="_ _51"> </span><span class="ff1a">strftime<span class="_ _54"> </span></span>supports <span class="_ _35"> </span>modiﬁers <span class="_ _35"> </span>for <span class="_ _44"> </span>some <span class="_ _35"> </span>of <span class="_ _35"> </span>the <span class="_ _44"> </span>conversion</div><div class="t m0 x32 h26 y133 ff19 fsf fc0 sc0 ls0 ws0">speciﬁers. <span class="_ _66"> </span>The<span class="_ _47"> </span><span class="ff1a">E<span class="_ _66"> </span></span>and<span class="_ _66"> </span><span class="ff1a">O<span class="_ _47"> </span></span>modiﬁers <span class="_ _2"></span>can <span class="_ _2"></span>be <span class="_ _2"></span>used <span class="_ _2"></span>to <span class="_ _2"></span>generate <span class="_ _2"></span>an <span class="_ _2"></span>alternative <span class="_ _2"></span>format <span class="_ _3"></span>if <span class="_ _2"></span>one <span class="_ _2"></span>is</div><div class="t m0 x32 h2a y134 ff19 fsf fc0 sc0 ls0 ws0">supported by the locale.</div><div class="t m0 x76 h52 y736 ff19 fs2a fc0 sc0 ls0 ws0">Some systems support additional, nonstandar<span class="lse9">de<span class="_ _5"></span><span class="ls0">xtensions to the<span class="_"> </span><span class="ff1b">format<span class="_"> </span></span>string for<span class="_"> </span><span class="ff1a">strftime</span>.</span></span></div><div class="t m0 x35 h27 y1a58 ff16 fsf fc0 sc0 ls0 ws0">Example</div><div class="t m0 x32 h2a y1a59 ff19 fsf fc0 sc0 ls0 ws0">Figur<span class="ls814">e6<span class="_ _8"></span><span class="ls0">.1<span class="_ _1"></span><span class="ls814">1s<span class="_ _4f"></span><span class="ls0">hows <span class="_ _3"></span>how <span class="_ _2"></span>to <span class="_ _2"></span>use <span class="_ _3"></span>several <span class="_ _2"></span>of <span class="_ _3"></span>the <span class="_ _2"></span>time <span class="_ _2"></span>functions <span class="_ _3"></span>discussed <span class="_ _2"></span>in <span class="_ _3"></span>this <span class="_ _2"></span>chapter<span class="_ _1"></span><span class="ls188">.I<span class="_ _1d"></span><span class="ls0">n</span></span></span></span></span></span></div><div class="t m0 x32 h26 y1a5a ff19 fsf fc0 sc0 ls0 ws0">particular<span class="_ _6"></span>,<span class="_ _47"> </span>it<span class="_ _47"> </span>shows <span class="_ _3"></span>how<span class="_ _47"> </span><span class="ff1a">strftime<span class="_ _47"> </span></span>can <span class="_ _3"></span>be <span class="_ _3"></span>used <span class="_ _3"></span>to <span class="_ _2"></span>print <span class="_ _3"></span>a <span class="_ _3"></span>string <span class="_ _3"></span>containing <span class="_ _3"></span>the <span class="_ _3"></span>current</div><div class="t m0 x32 h2a y1a5b ff19 fsf fc0 sc0 ls0 ws0">date and time.</div><div class="t m0 x32 h4e y1a5c ff1a fs28 fc0 sc0 ls0 ws0">#include &lt;stdio.h&gt;</div><div class="t m0 x32 h4e y1a5d ff1a fs28 fc0 sc0 ls0 ws0">#include &lt;stdlib.h&gt;</div><div class="t m0 x32 h4e y1a5e ff1a fs28 fc0 sc0 ls0 ws0">#include &lt;time.h&gt;</div><div class="t m0 x32 h4e y1a5f ff1a fs28 fc0 sc0 ls0 ws0">int</div><div class="t m0 x32 h4e y1a60 ff1a fs28 fc0 sc0 ls0 ws0">main(void)</div><div class="t m0 x32 h4e y1a61 ff1a fs28 fc0 sc0 ls0 ws0">{</div><div class="t m0 x8a h4e y1a62 ff1a fs28 fc0 sc0 ls0 ws0">time_t t;</div><div class="t m0 x8a h4e y1a63 ff1a fs28 fc0 sc0 ls0 ws0">struct tm *tmp;</div><div class="t m0 x8a h4e y1a64 ff1a fs28 fc0 sc0 ls0 ws0">char buf1[16];</div><div class="t m0 x8a h4e y1a65 ff1a fs28 fc0 sc0 ls0 ws0">char buf2[64];</div><div class="t m0 x8a h4e y1a66 ff1a fs28 fc0 sc0 ls0 ws0">time(&amp;t);</div><div class="t m0 x8a h4e y1a67 ff1a fs28 fc0 sc0 ls0 ws0">tmp = localtime(&amp;t);</div><div class="t m0 x8a h4e y1a68 ff1a fs28 fc0 sc0 ls0 ws0">if (strftime(buf1, 16, &quot;time and date: %r, %a %b %d, %Y&quot;, tmp) == 0)</div><div class="t m0 x9d h4e y1a69 ff1a fs28 fc0 sc0 ls0 ws0">printf(&quot;buffer length 16 is too small\n&quot;);</div><div class="t m0 x8a h4e y1a6a ff1a fs28 fc0 sc0 ls0 ws0">else</div><div class="t m0 x9d h4e y1a6b ff1a fs28 fc0 sc0 ls0 ws0">printf(&quot;%s\n&quot;, buf1);</div><div class="t m0 x8a h4e y1a6c ff1a fs28 fc0 sc0 ls0 ws0">if (strftime(buf2, 64, &quot;time and date: %r, %a %b %d, %Y&quot;, tmp) == 0)</div><div class="t m0 x9d h4e y1a6d ff1a fs28 fc0 sc0 ls0 ws0">printf(&quot;buffer length 64 is too small\n&quot;);</div><div class="t m0 x8a h4e y1a6e ff1a fs28 fc0 sc0 ls0 ws0">else</div><div class="t m0 x9d h4e y1a6f ff1a fs28 fc0 sc0 ls0 ws0">printf(&quot;%s\n&quot;, buf2);</div><div class="t m0 x8a h4e y1a70 ff1a fs28 fc0 sc0 ls0 ws0">exit(0);</div><div class="t m0 x32 h4e y1a71 ff1a fs28 fc0 sc0 ls0 ws0">}</div><div class="t m0 xa7 h4f y1a72 ff18 fs11 fc0 sc0 ls0 ws0">Figure 6.1<span class="_ _0"></span>1<span class="_ _5a"> </span><span class="ff19">Using the<span class="_"> </span><span class="ff1a">strftime<span class="_ _e"> </span></span>function</span></div><div class="t m0 x32 h55 y1a73 ff19 fs2c fc0 sc0 ls0 ws0">Recall the <span class="_ _2"></span>relationship <span class="_ _2"></span>of <span class="_ _2"></span>the various <span class="_ _2"></span>time <span class="_ _2"></span>functions <span class="_ _2"></span>shown <span class="_ _2"></span>in <span class="_ _2"></span>Figur<span class="ls815">e6<span class="_ _4f"></span><span class="ls0">.9. <span class="_ _66"> </span>Before<span class="_"> </span>we<span class="_ _47"> </span>can</span></span></div><div class="t m0 x32 h55 y1a74 ff19 fs2c fc0 sc0 ls0 ws0">print the <span class="_ _2"></span>time <span class="_ _2"></span>in <span class="_ _2"></span>a <span class="_ _2"></span>human-readable format, we <span class="_ _2"></span>need <span class="_ _2"></span>to <span class="_ _2"></span>get <span class="_ _2"></span>the time <span class="_ _2"></span>and <span class="_ _2"></span>convert <span class="_ _2"></span>it <span class="_ _2"></span>into a</div><div class="t m0 x32 h55 y1a75 ff19 fs2c fc0 sc0 ls0 ws0">broken-down time str<span class="_ _0"></span>ucture. <span class="_"> </span>Sample<span class="_"> </span>output fr<span class="_ _0"></span>om Figur<span class="ls142">e6<span class="_ _4f"></span><span class="ls0">.1<span class="_ _1"></span><span class="ls142">1i<span class="_ _5"></span><span class="ls0">s</span></span></span></span></div><div class="t m0 x3f h5d y1a76 ff1a fs2f fc0 sc0 ls0 ws0">$<span class="_"> </span><span class="ff1f">./a.out</span></div><div class="t m0 x3f h5d y1a77 ff1a fs2f fc0 sc0 ls0 ws0">buffer length 16 is too small</div><div class="t m0 x3f h5d y1a78 ff1a fs2f fc0 sc0 ls0 ws0">time and date: 11:12:35 PM, Thu Jan 19, 2012</div></div><div class="pi" data-data='{"ctm":[2.100000,0.000000,0.000000,2.100000,-115.668004,-156.491993]}'></div></div>
