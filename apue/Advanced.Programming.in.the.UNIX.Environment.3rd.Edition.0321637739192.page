<div id="pfc0" class="pf w4 h1f" data-page-no="c0"><div class="pc pcc0 w4 h1f"><img class="bi x0 y0 w3 h4" alt="" src="bgc0.png"/><div class="t m0 x31 h2 y8e ff1 fs0 fc0 sc0 ls0 ws0"><span class="fc1 sc0">ptg10805159</span></div><div class="t m0 x35 h24 ya4 ff18 fs0 fc0 sc0 ls0 ws0">158<span class="_ _1b"> </span><span class="ff19">Standar<span class="ls30a">dI<span class="_ _55"></span><span class="ls0">/O <span class="_"> </span>Library<span class="_ _1c9"> </span>Chapter <span class="_"> </span>5</span></span></span></div><div class="t m0 x3f h57 y1295 ff1a fs2d fc0 sc0 ls0 ws0">#include &lt;stdio.h&gt;</div><div class="t m0 x3f h57 y1601 ff1a fs2d fc0 sc0 ls0 ws0">long ftell(FILE *<span class="ff1b">fp</span>);</div><div class="t m0 x15e h5f y1602 ff19 fs2d fc0 sc0 ls0 ws0">Returns: current ﬁle position indicator if OK,<span class="_"> </span><span class="ff20">−</span>1L on err<span class="_ _0"></span>or</div><div class="t m0 x3f h57 y1603 ff1a fs2d fc0 sc0 ls0 ws0">int fseek(FILE *<span class="ff1b">fp</span><span class="ls15c">,l<span class="_ _1d"></span><span class="ls0">ong<span class="_"> </span><span class="ff1b">offset</span><span class="ls15c">,i<span class="_ _5b"></span><span class="ls0">nt<span class="_"> </span><span class="ff1b">whence</span>);</span></span></span></span></div><div class="t m0 x153 h5f y1604 ff19 fs2d fc0 sc0 ls0 ws0">Returns: 0 if OK,<span class="_"> </span><span class="ff20">−</span>1<span class="_"> </span>on<span class="_"> </span>error</div><div class="t m0 x3f h57 y1605 ff1a fs2d fc0 sc0 ls0 ws0">void rewind(FILE *<span class="ff1b">fp</span>);</div><div class="t m0 x32 h49 y1606 ff19 fs26 fc0 sc0 ls0 ws0">For <span class="_ _9"></span>a <span class="_ _9"></span>binary <span class="_ _23"></span>ﬁle, <span class="_ _9"></span>a <span class="_ _9"></span>ﬁle’s <span class="_ _23"></span>position <span class="_ _9"></span>indicator <span class="_ _9"></span>is <span class="_ _23"></span>measured <span class="_ _3"></span>in <span class="_ _23"></span>bytes <span class="_ _9"></span>from <span class="_ _9"></span>the <span class="_ _9"></span>beginning <span class="_ _9"></span>of</div><div class="t m0 x32 h4d y1607 ff19 fs26 fc0 sc0 ls0 ws0">the <span class="_ _2"></span>ﬁle.<span class="_ _61"> </span>The <span class="_ _3"></span>value <span class="_ _2"></span>returned <span class="_ _2"></span>by<span class="_ _47"> </span><span class="ff1a">ftell<span class="_ _66"> </span></span>for <span class="_ _3"></span>a <span class="_ _2"></span>binary <span class="_ _3"></span>ﬁle <span class="_ _2"></span>is <span class="_ _3"></span>this <span class="_ _2"></span>byte <span class="_ _2"></span>position.<span class="_ _16"> </span><span class="ls164">To <span class="_ _e"> </span>p<span class="_ _23"></span></span>osition</div><div class="t m0 x32 h4d y1608 ff19 fs26 fc0 sc0 ls6e1 ws0">ab<span class="_ _b"></span><span class="ls0">inary <span class="_ _9"></span>ﬁle <span class="_ _9"></span>using<span class="_ _45"> </span><span class="ff1a">fseek</span>,<span class="_ _45"> </span>we<span class="_ _47"> </span>must <span class="_ _9"></span>specify <span class="_ _9"></span>a <span class="_ _9"></span>byte<span class="_ _45"> </span><span class="ff1b">offset<span class="_ _45"> </span></span>and <span class="_ _3"></span>indicate <span class="_ _9"></span>how <span class="_ _9"></span>that <span class="_ _9"></span>offset <span class="_ _3"></span>is</span></div><div class="t m0 x32 h4d y1609 ff19 fs26 fc0 sc0 ls0 ws0">interpreted. <span class="_ _61"> </span>The<span class="_ _16"> </span>values <span class="_ _45"> </span>for<span class="_ _16"> </span><span class="ff1b">whence<span class="_ _16"> </span></span>ar<span class="ls6e2">et<span class="_ _62"></span><span class="ls0">he <span class="_ _47"> </span>same <span class="_ _45"> </span>as <span class="_ _47"> </span>for <span class="_ _47"> </span>the<span class="_ _5a"> </span><span class="ff1a">lseek<span class="_ _16"> </span></span>function <span class="_ _47"> </span>from</span></span></div><div class="t m0 x32 h4d y160a ff19 fs26 fc0 sc0 ls0 ws0">Section 3.6:<span class="_ _47"> </span><span class="ff1a">SEEK_SET<span class="_ _66"> </span></span>means <span class="_ _2"></span>from the <span class="_ _2"></span>beginning <span class="_ _2"></span>of <span class="_ _2"></span>the ﬁle,<span class="_ _47"> </span><span class="ff1a">SEEK_CUR<span class="_ _66"> </span></span>means <span class="_ _2"></span>from the</div><div class="t m0 x32 h4d y160b ff19 fs26 fc0 sc0 ls0 ws0">current <span class="_ _3"></span>ﬁle <span class="_ _3"></span>position, <span class="_ _9"></span>and<span class="_ _47"> </span><span class="ff1a">SEEK_END<span class="_ _45"> </span></span>means <span class="_ _3"></span>from <span class="_ _3"></span>the <span class="_ _9"></span>end <span class="_ _3"></span>of <span class="_ _9"></span>ﬁle.<span class="_ _16"> </span>ISO <span class="_ _9"></span>C <span class="_ _9"></span>doesn’t <span class="_ _3"></span>require</div><div class="t m0 x32 h4d y160c ff19 fs26 fc0 sc0 ls0 ws0">an <span class="_ _53"> </span>implementation <span class="_ _53"> </span>to <span class="_ _53"> </span>support <span class="_ _53"> </span>the<span class="_ _4b"> </span><span class="ff1a">SEEK_END<span class="_ _4b"> </span></span>speciﬁcation <span class="_ _53"> </span>for <span class="_ _53"> </span>a <span class="_ _53"> </span>binary <span class="_ _e"> </span>ﬁle, <span class="_ _53"> </span>as <span class="_ _53"> </span>some</div><div class="t m0 x32 h49 y160d ff19 fs26 fc0 sc0 ls0 ws0">systems <span class="_ _3"></span>requir<span class="ls6e3">eab<span class="_ _b"></span><span class="ls0">inary <span class="_ _3"></span>ﬁle <span class="_ _9"></span>to <span class="_ _3"></span>be <span class="_ _9"></span>padded <span class="_ _9"></span>at <span class="_ _3"></span>the <span class="_ _9"></span>end <span class="_ _3"></span>with <span class="_ _9"></span>zeros <span class="_ _3"></span>to <span class="_ _3"></span>make <span class="_ _9"></span>the <span class="_ _3"></span>ﬁle <span class="_ _9"></span>size <span class="_ _3"></span>a</span></span></div><div class="t m0 x32 h4d y160e ff19 fs26 fc0 sc0 ls0 ws0">multiple <span class="_"> </span>of <span class="_"> </span>some <span class="_"> </span>magic <span class="_"> </span>number<span class="_ _1"></span><span class="ls6e4">.U<span class="_ _5d"></span><span class="ls0">nder <span class="_"> </span>the <span class="_"> </span>UNIX <span class="_"> </span>System, <span class="_ _66"> </span>however<span class="_ _1"></span>,<span class="_ _46"> </span><span class="ff1a">SEEK_END<span class="_ _46"> </span></span>is</span></span></div><div class="t m0 x32 h49 y160f ff19 fs26 fc0 sc0 ls0 ws0">supported for binary ﬁles.</div><div class="t m0 x3f h49 y1610 ff19 fs26 fc0 sc0 ls0 ws0">For <span class="_ _42"> </span>text <span class="_ _53"> </span>ﬁles, <span class="_ _42"> </span>the <span class="_ _53"> </span>ﬁle’s <span class="_ _53"> </span>current <span class="_ _42"> </span>position <span class="_ _42"> </span>may <span class="_ _53"> </span>not <span class="_ _53"> </span>be <span class="_ _42"> </span>measurable <span class="_ _53"> </span>as <span class="_ _53"> </span>a <span class="_ _42"> </span>simple <span class="_ _53"> </span>byte</div><div class="t m0 x32 h49 y1611 ff19 fs26 fc0 sc0 ls0 ws0">offset. <span class="_ _35"> </span>Again,<span class="_ _35"> </span>this <span class="_ _42"> </span>is <span class="_ _23"> </span>mainly <span class="_ _42"> </span>under <span class="_ _42"> </span>non-UNIX <span class="_ _23"> </span>systems <span class="_ _42"> </span>that <span class="_ _42"> </span>might <span class="_ _23"> </span>stor<span class="ls6e5">et<span class="_ _43"></span><span class="ls0">ext <span class="_ _23"> </span>ﬁles <span class="_ _42"> </span>in <span class="_ _42"> </span>a</span></span></div><div class="t m0 x32 h4d y1612 ff19 fs26 fc0 sc0 ls0 ws0">differ<span class="_ _0"></span>ent <span class="_ _e"> </span>format.<span class="_ _48"> </span><span class="ls164">To <span class="_ _35"> </span>p<span class="_ _23"></span></span>osition <span class="_ _53"> </span>a <span class="_"> </span>text <span class="_ _53"> </span>ﬁle,<span class="_ _59"> </span><span class="ff1b">whence<span class="_ _4b"> </span></span>has <span class="_"> </span>to <span class="_ _53"> </span>be<span class="_ _59"> </span><span class="ff1a">SEEK_SET</span><span class="ls6e6">,a<span class="_ _55"></span><span class="ls0">nd <span class="_ _e"> </span>only <span class="_ _e"> </span>two</span></span></div><div class="t m0 x32 h4a y1613 ff19 fs26 fc0 sc0 ls0 ws0">values <span class="_ _23"></span>for<span class="_ _45"> </span><span class="ff1b">offset<span class="_ _35"> </span></span>ar<span class="_ _0"></span><span class="ls6e7">ea<span class="_ _b"></span><span class="ls0">llowed: <span class="_ _9"></span>0<span class="_ _9"></span><span class="ls161">—m<span class="_ _6"></span><span class="ls0">eaning <span class="_ _23"> </span>rewind <span class="_ _9"></span>the <span class="_ _23"> </span>ﬁle <span class="_ _23"></span>to <span class="_ _23"></span>its <span class="_ _9"></span>beginning<span class="_ _9"></span><span class="ls161">—o<span class="_ _1"></span><span class="ls6e8">rav<span class="_ _43"></span><span class="ls0">alue</span></span></span></span></span></span></span></div><div class="t m0 x32 h4d y1614 ff19 fs26 fc0 sc0 ls0 ws0">that <span class="_ _9"></span>was <span class="_ _9"></span>returned <span class="_ _3"></span>by<span class="_ _45"> </span><span class="ff1a">ftell<span class="_ _45"> </span></span>for <span class="_ _9"></span>that <span class="_ _23"></span>ﬁle.<span class="_ _16"> </span><span class="ls5bc">As<span class="_ _8"></span><span class="ls0">tream <span class="_ _3"></span>can <span class="_ _9"></span>also <span class="_ _9"></span>be <span class="_ _23"></span>set <span class="_ _9"></span>to <span class="_ _9"></span>the <span class="_ _9"></span>beginning <span class="_ _9"></span>of</span></span></div><div class="t m0 x32 h4d y1615 ff19 fs26 fc0 sc0 ls0 ws0">the ﬁle with the<span class="_"> </span><span class="ff1a">rewind<span class="_ _80"> </span></span>function.</div><div class="t m0 x3f h4d y1616 ff19 fs26 fc0 sc0 ls0 ws0">The<span class="_"> </span><span class="ff1a">ftello<span class="_ _66"> </span></span>function <span class="_ _2"></span>is the <span class="_ _2"></span>same as<span class="_ _66"> </span><span class="ff1a">ftell</span><span class="ls6e9">,a<span class="_ _d"></span><span class="ls0">nd <span class="_ _2"></span>the<span class="_"> </span><span class="ff1a">fseeko<span class="_ _66"> </span></span>function <span class="_ _2"></span>is the <span class="_ _2"></span>same as</span></span></div><div class="t m0 x32 h4d y1617 ff1a fs26 fc0 sc0 ls0 ws0">fseek<span class="ff19 lsd3">,e<span class="_ _d"></span><span class="ls0">xcept that the type of the offset is<span class="_"> </span><span class="ff1a">off_t<span class="_ _80"> </span></span>instead of<span class="_"> </span><span class="ff1a">long</span>.</span></span></div><div class="t m0 x3f h4e y1618 ff1a fs28 fc0 sc0 ls0 ws0">#include &lt;stdio.h&gt;</div><div class="t m0 x3f h4e y1619 ff1a fs28 fc0 sc0 ls0 ws0">off_t ftello(FILE *<span class="ff1b">fp</span>);</div><div class="t m0 x18 h4e y161a ff19 fs28 fc0 sc0 ls0 ws0">Returns: current ﬁle position indicator if OK,<span class="_"> </span><span class="ff1a">(off_t)<span class="ff20">−</span>1<span class="_ _e"> </span></span>on error</div><div class="t m0 x3f h4e y161b ff1a fs28 fc0 sc0 ls0 ws0">int fseeko(FILE *<span class="ff1b">fp</span><span class="ls1b6">,o<span class="_ _1d"></span><span class="ls0">ff_t<span class="_"> </span><span class="ff1b">offset</span><span class="ls1b6">,i<span class="_ _5b"></span><span class="ls0">nt<span class="_"> </span><span class="ff1b">whence</span>);</span></span></span></span></div><div class="t m0 x153 h7c y161c ff19 fs28 fc0 sc0 ls0 ws0">Returns: 0 if OK,<span class="_"> </span><span class="ff20">−</span>1<span class="_"> </span>on<span class="_"> </span>error</div><div class="t m0 x32 h54 y161d ff19 fs2c fc0 sc0 ls0 ws0">Recall the <span class="_ _2"></span>discussion <span class="_ _2"></span>of <span class="_ _2"></span>the<span class="_"> </span><span class="ff1a">off_t<span class="_ _66"> </span></span>data <span class="_ _2"></span>type <span class="_ _2"></span>in <span class="_ _2"></span>Section <span class="_ _2"></span>3.6.<span class="_ _46"> </span>Implementations <span class="_ _2"></span>can <span class="_ _2"></span>deﬁne</div><div class="t m0 x32 h54 y161e ff19 fs2c fc0 sc0 ls0 ws0">the<span class="_"> </span><span class="ff1a">off_t<span class="_ _80"> </span></span>type to be larger than 32 bits.</div><div class="t m0 x3f h54 y161f ff19 fs2c fc0 sc0 ls0 ws0">As <span class="_ _2"></span>we <span class="_ _2"></span>mentioned <span class="_ _3"></span>earlier<span class="_ _6"></span><span class="ls6ea">,t<span class="_ _4f"></span><span class="ls0">he<span class="_ _47"> </span><span class="ff1a">fgetpos<span class="_ _47"> </span></span>and<span class="_ _66"> </span><span class="ff1a">fsetpos<span class="_ _47"> </span></span>functions <span class="_ _2"></span>wer<span class="ls6eb">ei<span class="_ _8"></span><span class="ls0">ntroduced <span class="_ _2"></span>by</span></span></span></span></div><div class="t m0 x32 h55 y1620 ff19 fs2c fc0 sc0 ls0 ws0">the ISO C standard.</div><div class="t m0 x3f h5d y1621 ff1a fs2f fc0 sc0 ls0 ws0">#include &lt;stdio.h&gt;</div><div class="t m0 x3f h5d y1622 ff1a fs2f fc0 sc0 ls0 ws0">int fgetpos(FILE *restrict<span class="_"> </span><span class="ff1b">fp</span><span class="ls395">,f<span class="_ _1d"></span><span class="ls0">pos_t *restrict<span class="_"> </span><span class="ff1b">pos</span>);</span></span></div><div class="t m0 x3f h5d y1623 ff1a fs2f fc0 sc0 ls0 ws0">int fsetpos(FILE *<span class="ff1b">fp</span><span class="ls395">,c<span class="_ _1d"></span><span class="ls0">onst fpos_t *<span class="ff1b">pos</span>);</span></span></div><div class="t m0 x116 hc2 y1624 ff19 fs2f fc0 sc0 ls0 ws0">Both return: 0 if OK, nonzer<span class="_ _0"></span>o<span class="_"> </span>on<span class="_"> </span>error</div></div><div class="pi" data-data='{"ctm":[2.100000,0.000000,0.000000,2.100000,-115.668004,-156.491993]}'></div></div>
