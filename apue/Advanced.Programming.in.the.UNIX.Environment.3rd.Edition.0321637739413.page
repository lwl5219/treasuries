<div id="pf19d" class="pf w4 h1f" data-page-no="19d"><div class="pc pc19d w4 h1f"><img class="bi x0 y0 w3 h4" alt="" src="bg19d.png"/><div class="t m0 x31 h2 y8e ff1 fs0 fc0 sc0 ls0 ws0"><span class="fc1 sc0">ptg10805159</span></div><div class="t m0 x35 h24 ya4 ff19 fs0 fc0 sc0 ls0 ws0">Section <span class="_"> </span>10.22<span class="_ _f4"> </span>Signal <span class="_"> </span>Names <span class="_"> </span>and <span class="_"> </span>Numbers<span class="_ _1b"> </span><span class="ff18">379</span></div><div class="t m0 x32 h26 y12f ff19 fsf fc0 sc0 ls0 ws0">should <span class="_ _9"></span>be <span class="_ _9"></span>set <span class="_ _23"></span>to<span class="_ _45"> </span><span class="ff1a">SIG_IGN</span><span class="lsd4d">.I<span class="_ _26"></span><span class="ls758">nf<span class="_ _b"></span><span class="ls0">act, <span class="_ _9"></span>the <span class="_ _23"></span>shell <span class="_ _9"></span>doesn’t <span class="_ _9"></span>explicitly <span class="_ _9"></span>ignor<span class="ls88f">et<span class="_ _b"></span><span class="ls0">his <span class="_ _9"></span>signal;<span class="_ _45"> </span><span class="ff1a">init</span></span></span></span></span></span></div><div class="t m0 x32 h26 y130 ff19 fsf fc0 sc0 ls0 ws0">sets <span class="_ _2"></span>the <span class="_ _3"></span>disposition <span class="_ _2"></span>of <span class="_ _3"></span>the <span class="_ _3"></span>three job-control <span class="_ _2"></span>signals <span class="_ _3"></span>(<span class="ff1a">SIGTSTP</span>,<span class="_ _47"> </span><span class="ff1a">SIGTTIN</span><span class="ls448">,a<span class="_ _8"></span><span class="ls0">nd<span class="_ _47"> </span><span class="ff1a">SIGTTOU</span>)</span></span></div><div class="t m0 x32 h26 y131 ff19 fsf fc0 sc0 ls0 ws0">to<span class="_ _35"> </span><span class="ff1a">SIG_IGN</span><span class="lsd4e">.T<span class="_ _7"></span><span class="ls0">his <span class="_ _23"> </span>disposition <span class="_ _42"> </span>is <span class="_ _23"></span>then <span class="_ _23"> </span>inherited <span class="_ _23"> </span>by <span class="_ _42"> </span>all <span class="_ _23"> </span>login <span class="_ _23"> </span>shells.<span class="_ _51"> </span>Only <span class="_ _42"> </span>a <span class="_ _23"></span>job-control</span></span></div><div class="t m0 x32 h26 y132 ff19 fsf fc0 sc0 ls0 ws0">shell should reset the disposition of these thr<span class="_ _0"></span>ee signals to<span class="_"> </span><span class="ff1a">SIG_DFL</span>.</div><div class="t m0 x3f h26 y133 ff19 fsf fc0 sc0 ls0 ws0">When <span class="_ _3"></span>we <span class="_ _3"></span>type <span class="_ _9"></span>the <span class="_ _3"></span>suspend <span class="_ _9"></span>character<span class="_ _6"></span><span class="lsd4f">,t<span class="_ _8"></span><span class="ls0">he <span class="_ _9"></span>process <span class="_ _2"></span>receives <span class="_ _3"></span>the<span class="_ _45"> </span><span class="ff1a">SIGTSTP<span class="_ _47"> </span></span>signal <span class="_ _3"></span>and</span></span></div><div class="t m0 x32 h2a y134 ff19 fsf fc0 sc0 ls0 ws0">the <span class="_ _45"> </span>signal <span class="_ _45"> </span>handler <span class="_ _35"> </span>is <span class="_ _45"> </span>invoked.<span class="_ _1a3"> </span>At <span class="_ _35"> </span>this <span class="_ _45"> </span>point, <span class="_ _45"> </span>we <span class="_ _35"> </span>would <span class="_ _45"> </span>do <span class="_ _45"> </span>any <span class="_ _35"> </span>terminal-r<span class="_ _0"></span>elated</div><div class="t m0 x32 h2a y135 ff19 fsf fc0 sc0 ls0 ws0">processing: <span class="_ _3"></span>move <span class="_ _9"></span>the <span class="_ _3"></span>cursor <span class="_ _9"></span>to <span class="_ _9"></span>the <span class="_ _3"></span>lower-left <span class="_ _9"></span>corner<span class="_ _6"></span><span class="lsd50">,r<span class="_ _b"></span><span class="ls0">estor<span class="lsd50">et<span class="_ _b"></span><span class="ls0">he <span class="_ _9"></span>terminal <span class="_ _3"></span>mode, <span class="_ _9"></span>and <span class="_ _9"></span>so</span></span></span></span></div><div class="t m0 x32 h26 y136 ff19 fsf fc0 sc0 ls0 ws0">on. <span class="_ _47"> </span>W<span class="_ _6"></span><span class="lsd51">et<span class="_ _8"></span><span class="ls0">hen <span class="_ _3"></span>send <span class="_ _2"></span>ourself <span class="_ _3"></span>the <span class="_ _2"></span>same <span class="_ _3"></span>signal,<span class="_ _47"> </span><span class="ff1a">SIGTSTP</span><span class="lsd52">,a<span class="_ _8"></span><span class="ls0">fter <span class="_ _3"></span>resetting <span class="_ _2"></span>its <span class="_ _2"></span>disposition <span class="_ _3"></span>to <span class="_ _2"></span>its</span></span></span></span></div><div class="t m0 x32 h2a y137 ff19 fsf fc0 sc0 ls0 ws0">default <span class="_ _2"></span>(stop <span class="_ _3"></span>the <span class="_ _3"></span>process) <span class="_ _2"></span>and <span class="_ _3"></span>unblocking <span class="_ _2"></span>the <span class="_ _3"></span>signal.<span class="_ _16"> </span><span class="ls5f">We <span class="_ _80"> </span>h<span class="_ _9"></span></span>ave <span class="_ _2"></span>to <span class="_ _3"></span>unblock <span class="_ _3"></span>it <span class="_ _3"></span>since <span class="_ _2"></span>we’re</div><div class="t m0 x32 h2a y138 ff19 fsf fc0 sc0 ls0 ws0">currently <span class="_ _23"></span>handling <span class="_ _23"></span>that <span class="_ _23"> </span>same <span class="_ _42"> </span>signal, <span class="_ _23"> </span>and <span class="_ _23"> </span>the <span class="_ _42"> </span>system <span class="_ _23"> </span>blocks <span class="_ _23"> </span>it <span class="_ _42"> </span>automatically <span class="_ _23"> </span>while <span class="_ _42"> </span>it’s</div><div class="t m0 x32 h2a y139 ff19 fsf fc0 sc0 ls0 ws0">being <span class="_ _3"></span>caught.<span class="_ _5a"> </span>At <span class="_ _3"></span>this <span class="_ _9"></span>point, <span class="_ _9"></span>the <span class="_ _3"></span>system <span class="_ _9"></span>stops <span class="_ _3"></span>the <span class="_ _9"></span>process. <span class="_ _47"> </span>It<span class="_ _45"> </span>is <span class="_ _3"></span>continued <span class="_ _3"></span>only <span class="_ _9"></span>when <span class="_ _9"></span>it</div><div class="t m0 x32 h26 y13a ff19 fsf fc0 sc0 ls45 ws0">re<span class="ls0">ceives (usually <span class="_ _2"></span>from the job-control shell, in response to an interactive<span class="_"> </span><span class="ff1a">fg<span class="_ _66"> </span></span>command) a</span></div><div class="t m0 x32 h26 y254 ff1a fsf fc0 sc0 ls0 ws0">SIGCONT<span class="_ _44"> </span><span class="ff19">signal. <span class="_ _44"> </span>W<span class="_ _6"></span><span class="lsd53">ed<span class="_ _c"></span><span class="ls0">on’t <span class="_ _42"> </span>catch<span class="_ _44"> </span><span class="ff1a">SIGCONT</span><span class="lsd54">.I<span class="_ _7"></span><span class="ls0">ts <span class="_ _42"> </span>default <span class="_ _42"> </span>disposition <span class="_ _42"> </span>is <span class="_ _53"> </span>to <span class="_ _42"> </span>continue <span class="_ _42"> </span>the</span></span></span></span></span></div><div class="t m0 x32 h2a y255 ff19 fsf fc0 sc0 ls0 ws0">stopped <span class="_ _2"></span>process; <span class="_ _2"></span>when <span class="_ _3"></span>this <span class="_ _2"></span>happens, <span class="_ _3"></span>the <span class="_ _2"></span>program <span class="_ _2"></span>continues <span class="_ _3"></span>as <span class="_ _3"></span>though <span class="_ _2"></span>it <span class="_ _3"></span>returned from</div><div class="t m0 x32 h26 y13b ff19 fsf fc0 sc0 ls0 ws0">the<span class="_ _44"> </span><span class="ff1a">kill<span class="_ _35"> </span></span>function. <span class="_ _44"> </span>When<span class="_ _44"> </span>the <span class="_ _42"> </span>program <span class="_ _42"> </span>is <span class="_ _42"> </span>continued, <span class="_ _42"> </span>we <span class="_ _42"> </span>reset <span class="_ _42"> </span>the <span class="_ _42"> </span>disposition <span class="_ _42"> </span>for <span class="_ _42"> </span>the</div><div class="t m0 x32 h26 y13c ff1a fsf fc0 sc0 ls0 ws0">SIGTSTP<span class="_ _35"> </span><span class="ff19">signal <span class="_ _9"></span>and <span class="_ _23"> </span>do <span class="_ _23"> </span>whatever <span class="_ _23"> </span>terminal <span class="_ _23"></span>processing <span class="_ _9"></span>we <span class="_ _23"> </span>want <span class="_ _23"> </span>(we <span class="_ _23"> </span>could <span class="_ _23"></span>redraw <span class="_ _9"></span>the</span></div><div class="t m0 x32 h2a y256 ff19 fsf fc0 sc0 ls0 ws0">screen, for example).</div><div class="t m0 x35 h4b y307f ff16 fs27 fc0 sc0 ls0 ws0">10.22 <span class="_ _66"> </span>Signal<span class="_ _54"> </span>Names <span class="_"> </span>and <span class="_"> </span>Numbers</div><div class="t m0 x32 h49 y3080 ff19 fs26 fc0 sc0 ls0 ws0">In <span class="_ _42"> </span>this <span class="_ _53"> </span>section, <span class="_ _53"> </span>we <span class="_ _53"> </span>describe <span class="_ _53"> </span>how <span class="_ _42"> </span>to <span class="_ _53"> </span>map <span class="_ _53"> </span>between <span class="_ _53"> </span>signal <span class="_ _42"> </span>numbers <span class="_ _53"> </span>and <span class="_ _53"> </span>names.<span class="_ _54"> </span>Some</div><div class="t m0 x32 h49 y3081 ff19 fs26 fc0 sc0 ls0 ws0">systems provide the array</div><div class="t m0 x3f h4e y3082 ff1a fs28 fc0 sc0 ls0 ws0">extern char *sys_siglist[];</div><div class="t m0 x32 h49 y3083 ff19 fs26 fc0 sc0 ls0 ws0">The <span class="_ _9"></span>array <span class="_ _23"></span>index <span class="_ _9"></span>is <span class="_ _23"></span>the <span class="_ _9"></span>signal <span class="_ _23"> </span>number<span class="_ _1"></span><span class="lsd55">,g<span class="_ _b"></span><span class="ls0">iving <span class="_ _9"></span>a <span class="_ _9"></span>pointer <span class="_ _23"></span>to <span class="_ _23"></span>the <span class="_ _9"></span>character <span class="_ _23"></span>string <span class="_ _9"></span>name <span class="_ _23"></span>of</span></span></div><div class="t m0 x32 h49 y3084 ff19 fs26 fc0 sc0 ls0 ws0">the signal.</div><div class="t m0 x76 h2d y3085 ff19 fs10 fc0 sc0 ls0 ws0">FreeBSD 8.0, Linux 3.2.0, and Mac <span class="_ _2"></span>OS X 10.6.8 all <span class="_ _2"></span>provide this array of signal <span class="_ _2"></span>names.<span class="_ _44"> </span>Solaris 10</div><div class="t m0 x76 h5e y3086 ff19 fs10 fc0 sc0 ls0 ws0">does, too, but it uses the name<span class="_"> </span><span class="ff1a">_sys_siglist<span class="_ _53"> </span></span>instead.</div><div class="t m0 x3f h49 y3087 ff19 fs26 fc0 sc0 ls164 ws0">To <span class="_ _53"> </span>p<span class="_ _9"></span><span class="ls0">rint the character <span class="_ _2"></span>string corresponding to a signal number in a portable manner<span class="_ _1"></span>,</span></div><div class="t m0 x32 h4d y3088 ff19 fs26 fc0 sc0 ls0 ws0">we can use the<span class="_"> </span><span class="ff1a">psignal<span class="_ _80"> </span></span>function.</div><div class="t m0 x3f h4e y3089 ff1a fs28 fc0 sc0 ls0 ws0">#include &lt;signal.h&gt;</div><div class="t m0 x3f h4e y308a ff1a fs28 fc0 sc0 ls0 ws0">void psignal(int<span class="_"> </span><span class="ff1b">signo</span><span class="ls1b6">,c<span class="_ _1d"></span><span class="ls0">onst char *<span class="ff1b">msg</span>);</span></span></div><div class="t m0 x32 h60 y308b ff19 fs2c fc0 sc0 ls0 ws0">The <span class="_ _42"> </span>string<span class="_ _4b"> </span><span class="ff1b">msg<span class="_ _44"> </span></span>(which <span class="_ _53"> </span>normally <span class="_ _53"> </span>includes <span class="_ _53"> </span>the <span class="_ _53"> </span>name <span class="_ _42"> </span>of <span class="_ _53"> </span>the <span class="_ _53"> </span>program) <span class="_ _53"> </span>is <span class="_ _42"> </span>output <span class="_ _53"> </span>to <span class="_ _53"> </span>the</div><div class="t m0 x32 h55 y308c ff19 fs2c fc0 sc0 ls0 ws0">standar<span class="lsd56">de<span class="_ _8"></span><span class="ls0">rror<span class="_ _6"></span><span class="lsd56">,f<span class="_ _d"></span><span class="ls0">ollowed <span class="_ _2"></span>by <span class="_ _2"></span>a <span class="_ _2"></span>colon <span class="_ _2"></span>and <span class="_ _2"></span>a <span class="_ _2"></span>space, <span class="_ _2"></span>followed <span class="_ _2"></span>by <span class="_ _2"></span>a <span class="_ _2"></span>description <span class="_ _2"></span>of <span class="_ _2"></span>the <span class="_ _2"></span>signal,</span></span></span></span></div><div class="t m0 x32 h54 y308d ff19 fs2c fc0 sc0 ls0 ws0">followed <span class="_"> </span>by <span class="_ _e"> </span>a <span class="_"> </span>newline.<span class="_ _65"> </span>If<span class="_ _46"> </span><span class="ff1b">msg<span class="_ _59"> </span></span>is<span class="_ _59"> </span><span class="ff1a">NULL</span><span class="lsd57">,t<span class="_ _4a"></span><span class="ls0">hen <span class="_"> </span>only <span class="_ _e"> </span>the <span class="_"> </span>description <span class="_"> </span>is <span class="_ _e"> </span>written <span class="_"> </span>to <span class="_ _e"> </span>the</span></span></div><div class="t m0 x32 h54 y308e ff19 fs2c fc0 sc0 ls0 ws0">standar<span class="ls142">de<span class="_ _4f"></span><span class="ls0">rror<span class="_ _6"></span><span class="ls5e9">.T<span class="_ _4a"></span><span class="ls0">his function is similar to<span class="_"> </span><span class="ff1a">perror<span class="_ _66"> </span></span>(Section 1.7).</span></span></span></span></div><div class="t m0 x3f h54 y308f ff19 fs2c fc0 sc0 ls0 ws0">If <span class="_ _42"> </span>you <span class="_ _42"> </span>have <span class="_ _42"> </span>a<span class="_ _35"> </span><span class="ff1a">siginfo<span class="_ _44"> </span></span>structur<span class="_ _0"></span><span class="lsd58">ef<span class="_ _43"></span><span class="ls150">ro<span class="ls0">m<span class="_ _44"> </span>an<span class="_ _35"> </span>alternative<span class="_ _44"> </span><span class="ff1a">sigaction<span class="_ _35"> </span></span>signal <span class="_ _42"> </span>handler<span class="_ _1"></span>,</span></span></span></div><div class="t m0 x32 h54 y3090 ff19 fs2c fc0 sc0 ls0 ws0">you can print the signal information with the<span class="_"> </span><span class="ff1a">psiginfo<span class="_ _80"> </span></span>function.</div><div class="t m0 x3f h5d y3091 ff1a fs2f fc0 sc0 ls0 ws0">#include &lt;signal.h&gt;</div><div class="t m0 x3f h5d y3092 ff1a fs2f fc0 sc0 ls0 ws0">void psiginfo(const siginfo_t *<span class="ff1b">info</span><span class="ls395">,c<span class="_ _1d"></span><span class="ls0">onst char *<span class="ff1b">msg</span>);</span></span></div><a class="l" href="#pf10" data-dest-detail='[16,"XYZ",50,757,1]'><div class="d m1" style="border-style:none;position:absolute;left:80.892634px;bottom:757.491030px;width:204.540687px;height:19.678986px;background-color:rgba(255,255,255,0.000001);"></div></a></div><div class="pi" data-data='{"ctm":[2.100000,0.000000,0.000000,2.100000,-115.668004,-156.491993]}'></div></div>
