<div id="pf11e" class="pf w4 h1f" data-page-no="11e"><div class="pc pc11e w4 h1f"><img class="bi x0 y0 w3 h4" alt="" src="apue/bg11e.png"/><div class="t m0 x31 h2 y8e ff1 fs0 fc0 sc0 ls0 ws0"><span class="fc1 sc0">ptg10805159</span></div><div class="t m0 x35 h24 ya4 ff18 fs0 fc0 sc0 ls0 ws0">252<span class="_ _1b"> </span><span class="ff19">Process <span class="_"> </span>Contr<span class="_ _0"></span>ol <span class="_ _222"> </span>Chapter<span class="_ _4b"> </span>8</span></div><div class="t m0 x76 h51 y2a3 ff19 fs2a fc0 sc0 ls0 ws0">Historically<span class="_ _6"></span><span class="ls9f8">,t<span class="_ _5"></span><span class="ls0">he <span class="_ _2"></span>limit <span class="_ _2"></span>in <span class="_ _2"></span>older <span class="_ _2"></span>System <span class="_ _3"></span>V <span class="_ _2"></span>implementations <span class="_ _2"></span>was <span class="_ _2"></span>5,120 <span class="_ _2"></span>bytes.<span class="_ _4b"> </span>Older <span class="_ _2"></span>BSD <span class="_ _2"></span>systems</span></span></div><div class="t m0 x76 h51 y2a4 ff19 fs2a fc0 sc0 ls0 ws0">had <span class="_ _2"></span>a <span class="_ _2"></span>limit <span class="_ _3"></span>of <span class="_ _2"></span>20,480 <span class="_ _2"></span>bytes.<span class="_ _4b"> </span>The <span class="_ _2"></span>limit <span class="_ _3"></span>in <span class="_ _2"></span>current <span class="_ _2"></span>systems <span class="_ _2"></span>is <span class="_ _3"></span>much <span class="_ _2"></span>higher<span class="_ _1"></span><span class="ls9f9">.(<span class="_ _c"></span><span class="ls0">See <span class="_ _3"></span>the <span class="_ _2"></span>output <span class="_ _2"></span>from</span></span></div><div class="t m0 x76 h51 y2a5 ff19 fs2a fc0 sc0 ls0 ws0">the program in Figur<span class="_ _0"></span><span class="lse9">e2<span class="_ _84"></span><span class="ls0">.14, which is summarized in Figur<span class="lse9">e2<span class="_ _5"></span><span class="ls0">.15.)</span></span></span></span></div><div class="t m0 x3f h26 y2130 ff19 fsf fc0 sc0 ls5f ws0">To <span class="_ _46"> </span>g<span class="_ _9"></span><span class="ls0">et <span class="_ _45"> </span>around <span class="_ _47"> </span>the <span class="_ _45"> </span>limitation <span class="_ _47"> </span>in <span class="_ _45"> </span>argument <span class="_ _47"> </span>list <span class="_ _45"> </span>size, <span class="_ _45"> </span>we <span class="_ _47"> </span>can <span class="_ _45"> </span>use <span class="_ _45"> </span>the<span class="_ _16"> </span><span class="ff1a">xargs</span></span></div><div class="t m0 x40 h2a y2131 ff19 fsf fc0 sc0 ls0 ws0">(</div><div class="t m0 x1b2 h2a y2130 ff19 fsf fc0 sc0 ls0 ws0">1</div><div class="t m0 x17e h2a y2131 ff19 fsf fc0 sc0 ls0 ws0">)</div><div class="t m0 x32 h2a ya9 ff19 fsf fc0 sc0 ls0 ws0">command <span class="_ _44"> </span>to <span class="_ _44"> </span>break <span class="_ _35"> </span>up <span class="_ _44"> </span>long <span class="_ _44"> </span>argument <span class="_ _35"> </span>lists.<span class="_ _93"> </span><span class="ls5f">To <span class="_ _5a"> </span>l<span class="_ _9"></span></span>ook <span class="_ _44"> </span>for <span class="_ _44"> </span>all <span class="_ _44"> </span>the <span class="_ _44"> </span>occurrences <span class="_ _44"> </span>of</div><div class="t m0 x32 h26 y2132 ff1a fsf fc0 sc0 ls0 ws0">getrlimit<span class="_ _80"> </span><span class="ff19">in the man pages on our system, we could use</span></div><div class="t m0 x3f h57 y2133 ff1a fs2d fc0 sc0 ls0 ws0">find /usr/share/man -type f -print | xargs grep getrlimit</div><div class="t m0 x32 h2a y2134 ff19 fsf fc0 sc0 ls0 ws0">If the man pages on our system ar<span class="ls44">ec<span class="_ _4f"></span><span class="ls0">ompressed, however<span class="_ _6"></span>,<span class="_"> </span>we<span class="_"> </span>could try</span></span></div><div class="t m0 x3f h57 y2135 ff1a fs2d fc0 sc0 ls0 ws0">find /usr/share/man -type f -print | xargs bzgrep getrlimit</div><div class="t m0 x32 h26 y2136 ff19 fsf fc0 sc0 ls5f ws0">We <span class="_ _80"> </span>u<span class="_ _23"></span><span class="ls0">se <span class="_ _3"></span>the<span class="_ _45"> </span><span class="ff1a">type <span class="_ _8"></span>-f<span class="_ _45"> </span><span class="ff19">option <span class="_ _3"></span>to <span class="_ _9"></span>the<span class="_ _45"> </span></span>find<span class="_ _47"> </span><span class="ff19">command <span class="_ _9"></span>to <span class="_ _3"></span>restrict <span class="_ _3"></span>the <span class="_ _9"></span>list <span class="_ _3"></span>so <span class="_ _9"></span>that <span class="_ _9"></span>it <span class="_ _3"></span>contains</span></span></span></div><div class="t m0 x32 h26 y2137 ff19 fsf fc0 sc0 ls0 ws0">only <span class="_ _9"></span>regular <span class="_ _3"></span>ﬁles, <span class="_ _9"></span>because <span class="_ _9"></span>the<span class="_ _45"> </span><span class="ff1a">grep<span class="_ _45"> </span></span>commands <span class="_ _9"></span>can’t <span class="_ _9"></span>search <span class="_ _3"></span>for <span class="_ _9"></span>patterns <span class="_ _9"></span>in <span class="_ _9"></span>directories,</div><div class="t m0 x32 h2a y2138 ff19 fsf fc0 sc0 ls0 ws0">and we want to avoid unnecessary error messages.</div><div class="t m0 x3f h26 y2139 ff19 fsf fc0 sc0 ls5f ws0">We<span class="_ _9"></span><span class="ls0">’ve <span class="_ _23"></span>mentioned <span class="_ _9"></span>that <span class="_ _23"></span>the <span class="_ _23"></span>process <span class="_ _9"></span>ID <span class="_ _9"></span>does <span class="_ _23"> </span>not <span class="_ _23"></span>change <span class="_ _9"></span>after <span class="_ _23"> </span>an<span class="_ _45"> </span><span class="ff1a">exec</span><span class="ls242">,b<span class="_ _b"></span><span class="ls0">ut <span class="_ _23"></span>the <span class="_ _9"></span>new</span></span></span></div><div class="t m0 x32 h2a y213a ff19 fsf fc0 sc0 ls0 ws0">program inherits additional pr<span class="_ _0"></span>operties fr<span class="_ _0"></span>om the calling process:</div><div class="t m0 x3f h2a y213b ff19 fsf fc0 sc0 ls49 ws0">•P<span class="_ _4d"></span><span class="ls45">ro<span class="ls0">cess ID and parent process ID</span></span></div><div class="t m0 x3f h2a y213c ff19 fsf fc0 sc0 ls49 ws0">•R<span class="_ _4d"></span><span class="ls0">eal user ID and real gr<span class="_ _0"></span>oup ID</span></div><div class="t m0 x3f h2a y213d ff19 fsf fc0 sc0 ls49 ws0">•S<span class="_ _4d"></span><span class="ls0">upplementary group IDs</span></div><div class="t m0 x3f h2a y213e ff19 fsf fc0 sc0 ls49 ws0">•P<span class="_ _4d"></span><span class="ls45">ro<span class="ls0">cess group ID</span></span></div><div class="t m0 x3f h2a y213f ff19 fsf fc0 sc0 ls49 ws0">•S<span class="_ _4d"></span><span class="ls0">ession ID</span></div><div class="t m0 x3f h2a y2140 ff19 fsf fc0 sc0 ls49 ws0">•C<span class="_ _4d"></span><span class="ls0">ontrolling terminal</span></div><div class="t m0 x3f h2a y2141 ff19 fsf fc0 sc0 ls49 ws0">•T<span class="_ _184"></span><span class="ls0">ime left until alarm clock</span></div><div class="t m0 x3f h2a y2142 ff19 fsf fc0 sc0 ls49 ws0">•C<span class="_ _4d"></span><span class="ls0">urrent working dir<span class="_ _0"></span>ectory</span></div><div class="t m0 x3f h2a y2143 ff19 fsf fc0 sc0 ls49 ws0">•R<span class="_ _4d"></span><span class="ls0">oot directory</span></div><div class="t m0 x3f h2a y2144 ff19 fsf fc0 sc0 ls49 ws0">•F<span class="_ _4d"></span><span class="ls0">ile mode creation mask</span></div><div class="t m0 x3f h2a y2145 ff19 fsf fc0 sc0 ls49 ws0">•F<span class="_ _4d"></span><span class="ls0">ile locks</span></div><div class="t m0 x3f h2a y2146 ff19 fsf fc0 sc0 ls49 ws0">•P<span class="_ _4d"></span><span class="ls45">ro<span class="ls0">cess signal mask</span></span></div><div class="t m0 x3f h2a y2147 ff19 fsf fc0 sc0 ls49 ws0">•P<span class="_ _4d"></span><span class="ls0">ending signals</span></div><div class="t m0 x3f h2a y2148 ff19 fsf fc0 sc0 ls49 ws0">•R<span class="_ _4d"></span><span class="ls0">esource limits</span></div><div class="t m0 x3f h2a y2149 ff19 fsf fc0 sc0 ls49 ws0">•N<span class="_ _4d"></span><span class="ls0">ice value (on XSI-conformant systems; see Section 8.16)</span></div><div class="t m0 x3f h26 y214a ff19 fsf fc0 sc0 ls49 ws0">•V<span class="_ _4e"></span><span class="ls0">alues for<span class="_"> </span><span class="ff1a">tms_utime</span>,<span class="_"> </span><span class="ff1a">tms_stime</span>,<span class="_"> </span><span class="ff1a">tms_cutime</span><span class="ls44">,a<span class="_ _5"></span><span class="ls0">nd<span class="_"> </span><span class="ff1a">tms_cstime</span></span></span></span></div><div class="t m0 x32 h2a y214b ff19 fsf fc0 sc0 ls0 ws0">The <span class="_ _e"> </span>handling <span class="_"> </span>of <span class="_ _e"> </span>open <span class="_ _e"> </span>ﬁles <span class="_"> </span>depends <span class="_ _e"> </span>on <span class="_ _e"> </span>the <span class="_"> </span>value <span class="_ _e"> </span>of <span class="_"> </span>the <span class="_ _53"> </span>close-on-exec <span class="_"> </span>ﬂag <span class="_ _e"> </span>for <span class="_ _e"> </span>each</div><div class="t m0 x32 h26 y214c ff19 fsf fc0 sc0 ls0 ws0">descriptor<span class="_ _6"></span><span class="ls9fa">.R<span class="_ _95"></span><span class="ls0">ecall <span class="_ _45"> </span>from <span class="_ _35"> </span>Figur<span class="ls9fb">e3<span class="_ _7"></span><span class="ls0">.7 <span class="_ _35"> </span>and <span class="_ _45"> </span>our <span class="_ _35"> </span>mention <span class="_ _35"> </span>of <span class="_ _45"> </span>the<span class="_ _51"> </span><span class="ff1a">FD_CLOEXEC<span class="_"> </span></span>ﬂag <span class="_ _35"> </span>in</span></span></span></span></div><div class="t m0 x32 h2a y214d ff19 fsf fc0 sc0 ls0 ws0">Section <span class="_ _2"></span>3.14 <span class="_ _3"></span>that <span class="_ _3"></span>every <span class="_ _3"></span>open <span class="_ _2"></span>descriptor <span class="_ _3"></span>in <span class="_ _3"></span>a <span class="_ _2"></span>process <span class="_ _3"></span>has <span class="_ _2"></span>a <span class="_ _3"></span>close-on-exec <span class="_ _3"></span>ﬂag.<span class="_ _61"> </span>If <span class="_ _3"></span>this <span class="_ _3"></span>ﬂag</div><div class="t m0 x32 h26 y214e ff19 fsf fc0 sc0 ls0 ws0">is <span class="_ _42"> </span>set, <span class="_ _42"> </span>the <span class="_ _23"> </span>descriptor <span class="_ _42"> </span>is <span class="_ _42"> </span>closed <span class="_ _42"> </span>across <span class="_ _23"> </span>an<span class="_ _44"> </span><span class="ff1a">exec</span><span class="ls275">.O<span class="_ _7"></span><span class="ls0">therwise, <span class="_ _42"> </span>the <span class="_ _42"> </span>descriptor <span class="_ _23"> </span>is <span class="_ _42"> </span>left <span class="_ _42"> </span>open</span></span></div><div class="t m0 x32 h26 y214f ff19 fsf fc0 sc0 ls0 ws0">across <span class="_ _2"></span>the<span class="_ _47"> </span><span class="ff1a">exec</span><span class="ls9fc">.T<span class="_ _1d"></span><span class="ls0">he <span class="_ _3"></span>default <span class="_ _3"></span>is <span class="_ _3"></span>to <span class="_ _3"></span>leave <span class="_ _3"></span>the <span class="_ _3"></span>descriptor <span class="_ _3"></span>open <span class="_ _9"></span>acr<span class="_ _0"></span>oss <span class="_ _3"></span>the<span class="_ _47"> </span><span class="ff1a">exec<span class="_ _47"> </span></span>unless <span class="_ _3"></span>we</span></span></div><div class="t m0 x32 h26 y2150 ff19 fsf fc0 sc0 ls0 ws0">speciﬁcally set the close-on-exec ﬂag using<span class="_"> </span><span class="ff1a">fcntl</span>.</div><div class="t m0 x3f h26 y2151 ff19 fsf fc0 sc0 ls0 ws0">POSIX.1 <span class="_ _45"> </span>speciﬁcally <span class="_ _45"> </span>requir<span class="_ _0"></span>es <span class="_ _45"> </span>that <span class="_ _45"> </span>open <span class="_ _45"> </span>directory <span class="_ _45"> </span>str<span class="_ _0"></span>eams <span class="_ _45"> </span>(recall <span class="_ _45"> </span>the<span class="_ _16"> </span><span class="ff1a">opendir</span></div></div><div class="pi" data-data='{"ctm":[2.100000,0.000000,0.000000,2.100000,-115.668004,-156.491993]}'></div></div>
