<div id="pf2a" class="pf w4 h1f" data-page-no="2a"><div class="pc pc2a w4 h1f"><img class="bi x0 y0 w3 h4" alt="" src="bg2a.png"/><div class="t m0 x31 h2 y8e ff1 fs0 fc0 sc0 ls0 ws0"><span class="fc1 sc0">ptg10805159</span></div><div class="t m0 x35 h24 ya4 ff18 fs0 fc0 sc0 ls0 ws0">8<span class="_ _1b"> </span><span class="ff19">UNIX <span class="_"> </span>System <span class="_"> </span>Overview<span class="_ _69"> </span>Chapter <span class="_"> </span>1</span></div><div class="t m0 x35 h27 y12f ff16 fsf fc0 sc0 ls2d ws0">Wo<span class="_ _3"></span><span class="ls0">rking Directory</span></div><div class="t m0 x32 h2b y342 ff19 fsf fc0 sc0 ls0 ws0">Every <span class="_ _53"> </span>process <span class="_ _53"> </span>has <span class="_ _e"> </span>a<span class="_ _59"> </span><span class="ff1b">working <span class="_ _53"> </span>directory</span><span class="ls126">,s<span class="_ _55"></span><span class="ls0">ometimes <span class="_ _e"> </span>called <span class="_ _53"> </span>the<span class="_ _59"> </span><span class="ff1b">current <span class="_ _53"> </span>working <span class="_ _53"> </span>directory</span>.</span></span></div><div class="t m0 x32 h2a y343 ff19 fsf fc0 sc0 ls0 ws0">This <span class="_ _9"></span>is <span class="_ _9"></span>the <span class="_ _9"></span>directory <span class="_ _9"></span>from <span class="_ _9"></span>which <span class="_ _9"></span>all <span class="_ _9"></span>relative <span class="_ _9"></span>pathnames <span class="_ _9"></span>ar<span class="ls127">ei<span class="_ _b"></span><span class="ls0">nterpr<span class="_ _0"></span>eted. <span class="_ _45"> </span>A<span class="_ _45"> </span>process <span class="_ _3"></span>can</span></span></div><div class="t m0 x32 h26 y344 ff19 fsf fc0 sc0 ls0 ws0">change its working directory with the<span class="_"> </span><span class="ff1a">chdir<span class="_ _80"> </span></span>function.</div><div class="t m0 x3f h26 y345 ff19 fsf fc0 sc0 ls0 ws0">For <span class="_ _23"> </span>example, <span class="_ _42"> </span>the <span class="_ _23"> </span>relative <span class="_ _23"> </span>pathname<span class="_ _44"> </span><span class="ff1a">doc/memo/joe<span class="_ _35"> </span></span><span class="ls45">re</span>fers <span class="_ _42"> </span>to <span class="_ _23"> </span>the <span class="_ _42"> </span>ﬁle <span class="_ _23"> </span>or <span class="_ _42"> </span>directory</div><div class="t m0 x32 h26 y346 ff1a fsf fc0 sc0 ls0 ws0">joe<span class="ff19">,<span class="_ _47"> </span>in<span class="_ _45"> </span>the <span class="_ _9"></span>directory<span class="_ _47"> </span></span>memo<span class="ff19">,<span class="_ _45"> </span>in<span class="_ _47"> </span>the <span class="_ _9"></span>directory<span class="_ _47"> </span></span>doc<span class="ff19 ls128">,w<span class="_ _8"></span><span class="ls0">hich <span class="_ _3"></span>must <span class="_ _9"></span>be <span class="_ _9"></span>a <span class="_ _3"></span>directory <span class="_ _9"></span>within <span class="_ _3"></span>the</span></span></div><div class="t m0 x32 h26 y347 ff19 fsf fc0 sc0 ls0 ws0">working <span class="_ _42"> </span>directory<span class="_ _4"></span><span class="ls129">.F<span class="_ _52"></span><span class="ls45">ro<span class="_ _2"></span><span class="ls12a">ml<span class="_ _43"></span><span class="ls0">ooking <span class="_ _42"> </span>just <span class="_ _42"> </span>at <span class="_ _42"> </span>this <span class="_ _42"> </span>pathname, <span class="_ _42"> </span>we <span class="_ _42"> </span>know <span class="_ _42"> </span>that <span class="_ _42"> </span>both<span class="_ _44"> </span><span class="ff1a">doc<span class="_ _44"> </span></span>and</span></span></span></span></div><div class="t m0 x32 h26 y348 ff1a fsf fc0 sc0 ls0 ws0">memo<span class="_ _45"> </span><span class="ff19">have <span class="_ _9"></span>to <span class="_ _9"></span>be <span class="_ _9"></span>directories, <span class="_ _9"></span>but <span class="_ _9"></span>we <span class="_ _9"></span>can’t <span class="_ _9"></span>tell <span class="_ _9"></span>whether<span class="_ _45"> </span></span>joe<span class="_ _45"> </span><span class="ff19">is <span class="_ _9"></span>a <span class="_ _9"></span>ﬁle <span class="_ _23"></span>or <span class="_ _3"></span>a <span class="_ _23"></span>dir<span class="_ _0"></span>ectory<span class="_ _4"></span><span class="ls12b">.T<span class="_ _62"></span><span class="ls0">he</span></span></span></div><div class="t m0 x32 h26 y349 ff19 fsf fc0 sc0 ls0 ws0">pathname<span class="_ _45"> </span><span class="ff1a">/usr/lib/lint<span class="_ _47"> </span></span>is <span class="_ _9"></span>an <span class="_ _9"></span>absolute <span class="_ _9"></span>pathname <span class="_ _9"></span>that <span class="_ _9"></span>refers <span class="_ _3"></span>to <span class="_ _9"></span>the <span class="_ _9"></span>ﬁle <span class="_ _3"></span>or <span class="_ _9"></span>directory</div><div class="t m0 x32 h26 y1d2 ff1a fsf fc0 sc0 ls0 ws0">lint<span class="_ _80"> </span><span class="ff19">in the directory<span class="_"> </span></span>lib<span class="ff19">,<span class="_"> </span>in<span class="_"> </span>the directory<span class="_"> </span></span>usr<span class="ff19 ls44">,w<span class="_ _4f"></span><span class="ls0">hich is in the root directory<span class="_ _4"></span>.</span></span></div><div class="t m0 x35 h27 y34a ff16 fsf fc0 sc0 ls0 ws0">Home Directory</div><div class="t m0 x32 h2b y34b ff19 fsf fc0 sc0 ls0 ws0">When <span class="_ _2"></span>we <span class="_ _3"></span>log <span class="_ _3"></span>in, <span class="_ _3"></span>the <span class="_ _3"></span>working <span class="_ _2"></span>directory <span class="_ _3"></span>is <span class="_ _2"></span>set <span class="_ _3"></span>to <span class="_ _3"></span>our<span class="_ _47"> </span><span class="ff1b">home <span class="_ _3"></span>directory</span><span class="ls12c">.O<span class="_ _1d"></span><span class="ls0">ur <span class="_ _2"></span>home <span class="_ _3"></span>directory</span></span></div><div class="t m0 x32 h2a y34c ff19 fsf fc0 sc0 ls0 ws0">is obtained from our entry in the passwor<span class="_ _0"></span><span class="ls44">dﬁ<span class="_ _d"></span><span class="ls0">le (Section 1.3).</span></span></div><div class="t m0 x35 h53 y34d ff16 fs2b fc0 sc0 ls0 ws0">1.5 <span class="_ _68"> </span>Input<span class="_ _54"> </span>and <span class="_"> </span>Output</div><div class="t m0 x35 h27 y34e ff16 fsf fc0 sc0 ls0 ws0">File Descriptors</div><div class="t m0 x32 h2a y34f ff19 fsf fc0 sc0 ls0 ws0">File descriptors ar<span class="ls12d">en<span class="_ _d"></span><span class="ls0">ormally small <span class="_ _2"></span>non-negative integers that <span class="_ _2"></span>the kernel <span class="_ _2"></span>uses to identify</span></span></div><div class="t m0 x32 h2a y350 ff19 fsf fc0 sc0 ls0 ws0">the <span class="_ _3"></span>ﬁles <span class="_ _3"></span>accessed <span class="_ _3"></span>by <span class="_ _3"></span>a <span class="_ _3"></span>process. <span class="_ _47"> </span>Whenever<span class="_ _47"> </span>it <span class="_ _3"></span>opens <span class="_ _3"></span>an <span class="_ _3"></span>existing <span class="_ _3"></span>ﬁle <span class="_ _3"></span>or <span class="_ _3"></span>creates <span class="_ _3"></span>a <span class="_ _3"></span>new <span class="_ _3"></span>ﬁle,</div><div class="t m0 x32 h2a y351 ff19 fsf fc0 sc0 ls0 ws0">the kernel returns a ﬁle descriptor that we use when we want to r<span class="_ _0"></span>ead or write the ﬁle.</div><div class="t m0 x35 h27 y352 ff16 fsf fc0 sc0 ls0 ws0">Standar<span class="ls12e">dI<span class="_ _8"></span><span class="ls0">nput, Standar<span class="ls12e">dO<span class="_ _4f"></span><span class="ls0">utput, and Standar<span class="ls12e">dE<span class="_ _8"></span><span class="ls0">rror</span></span></span></span></span></span></div><div class="t m0 x32 h2a y353 ff19 fsf fc0 sc0 ls0 ws0">By <span class="_ _47"> </span>convention, <span class="_ _66"> </span>all <span class="_ _47"> </span>shells <span class="_ _47"> </span>open <span class="_ _47"> </span>three <span class="_"> </span>descriptors <span class="_ _47"> </span>whenever <span class="_ _47"> </span>a <span class="_ _47"> </span>new <span class="_ _66"> </span>program <span class="_ _47"> </span>is <span class="_ _66"> </span>run:</div><div class="t m0 x32 h2a y354 ff19 fsf fc0 sc0 ls0 ws0">standar<span class="ls12f">di<span class="_ _43"></span><span class="ls0">nput, <span class="_ _23"></span>standar<span class="ls12f">do<span class="_ _43"></span><span class="ls0">utput, <span class="_ _23"></span>and <span class="_ _23"> </span>standar<span class="ls130">de<span class="_ _43"></span><span class="ls0">rror<span class="_ _6"></span><span class="ls131">.I<span class="_ _7"></span><span class="ls130">fn<span class="_ _b"></span><span class="ls0">othing <span class="_ _23"></span>special <span class="_ _23"></span>is <span class="_ _23"></span>done, <span class="_ _23"></span>as <span class="_ _23"></span>in</span></span></span></span></span></span></span></span></span></div><div class="t m0 x32 h2a y355 ff19 fsf fc0 sc0 ls0 ws0">the simple command</div><div class="t m0 x3f h57 y356 ff1a fs2d fc0 sc0 ls0 ws0">ls</div><div class="t m0 x32 h2a y357 ff19 fsf fc0 sc0 ls0 ws0">then <span class="_ _3"></span>all <span class="_ _9"></span>three <span class="_ _3"></span>ar<span class="ls132">ec<span class="_ _b"></span><span class="ls0">onnected <span class="_ _9"></span>to <span class="_ _3"></span>the <span class="_ _9"></span>terminal.<span class="_ _5a"> </span>Most <span class="_ _3"></span>shells <span class="_ _9"></span>provide <span class="_ _3"></span>a <span class="_ _9"></span>way <span class="_ _9"></span>to <span class="_ _3"></span>redirect <span class="_ _3"></span>any</span></span></div><div class="t m0 x32 h2a y358 ff19 fsf fc0 sc0 ls0 ws0">or all of these three descriptors to any ﬁle.<span class="_ _59"> </span>For example,</div><div class="t m0 x3f h57 y359 ff1a fs2d fc0 sc0 ls0 ws0">ls &gt; file.list</div><div class="t m0 x32 h26 y35a ff19 fsf fc0 sc0 ls0 ws0">executes <span class="_ _45"> </span>the<span class="_ _5a"> </span><span class="ff1a">ls<span class="_"> </span></span>command <span class="_ _47"> </span>with <span class="_ _45"> </span>its <span class="_ _45"> </span>standar<span class="ls133">do<span class="_ _26"></span><span class="ls0">utput <span class="_ _45"> </span>redirected <span class="_ _47"> </span>to <span class="_ _45"> </span>the <span class="_ _45"> </span>ﬁle <span class="_ _45"> </span>named</span></span></div><div class="t m0 x32 h26 y35b ff1a fsf fc0 sc0 ls0 ws0">file.list<span class="ff19">.</span></div><div class="t m0 x35 h27 y35c ff16 fsf fc0 sc0 ls0 ws0">Unbuff<span class="_ _0"></span>ered I/O</div><div class="t m0 x32 h26 y35d ff19 fsf fc0 sc0 ls0 ws0">Unbuffer<span class="_ _0"></span>ed <span class="_ _3"></span>I/O <span class="_ _9"></span>is <span class="_ _9"></span>provided <span class="_ _9"></span>by <span class="_ _9"></span>the <span class="_ _9"></span>functions<span class="_ _45"> </span><span class="ff1a">open</span>,<span class="_ _45"> </span><span class="ff1a">read</span>,<span class="_ _47"> </span><span class="ff1a">write</span>,<span class="_ _45"> </span><span class="ff1a">lseek</span><span class="ls134">,a<span class="_ _b"></span><span class="ls0">nd<span class="_ _45"> </span><span class="ff1a">close</span>.</span></span></div><div class="t m0 x32 h2a y35e ff19 fsf fc0 sc0 ls0 ws0">These functions all work with ﬁle descriptors.</div><div class="t m0 x35 h27 y35f ff16 fsf fc0 sc0 ls0 ws0">Example</div><div class="t m0 x32 h2a y360 ff19 fsf fc0 sc0 ls0 ws0">If <span class="_ _3"></span>we’r<span class="ls8a">ew<span class="_ _b"></span><span class="ls0">illing <span class="_ _3"></span>to <span class="_ _9"></span>read <span class="_ _2"></span>from <span class="_ _3"></span>the <span class="_ _3"></span>standar<span class="ls135">di<span class="_ _b"></span><span class="ls0">nput <span class="_ _3"></span>and <span class="_ _9"></span>write <span class="_ _3"></span>to <span class="_ _3"></span>the <span class="_ _3"></span>standar<span class="ls135">do<span class="_ _8"></span><span class="ls0">utput, <span class="_ _3"></span>then</span></span></span></span></span></span></div><div class="t m0 x32 h2a y361 ff19 fsf fc0 sc0 ls0 ws0">the program in Figur<span class="_ _0"></span><span class="ls44">e1<span class="_ _d"></span><span class="ls0">.4 copies any regular ﬁle on a UNIX system.</span></span></div><a class="l" href="#pfb" data-dest-detail='[11,"XYZ",50,757,1]'><div class="d m1" style="border-style:none;position:absolute;left:80.891993px;bottom:815.448928px;width:139.331002px;height:19.679993px;background-color:rgba(255,255,255,0.000001);"></div></a></div><div class="pi" data-data='{"ctm":[2.100000,0.000000,0.000000,2.100000,-115.668004,-156.491993]}'></div></div>
