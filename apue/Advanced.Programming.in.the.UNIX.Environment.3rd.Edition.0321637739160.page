<div id="pfa0" class="pf w4 h1f" data-page-no="a0"><div class="pc pca0 w4 h1f"><img class="bi x0 y0 w3 h4" alt="" src="bga0.png"/><div class="t m0 x31 h2 y8e ff1 fs0 fc0 sc0 ls0 ws0"><span class="fc1 sc0">ptg10805159</span></div><div class="t m0 x35 h24 ya4 ff18 fs0 fc0 sc0 ls0 ws0">126<span class="_ _1b"> </span><span class="ff19">Files <span class="_"> </span>and <span class="_"> </span>Directories <span class="_ _18d"> </span>Chapter<span class="_ _4b"> </span>4</span></div><div class="t m0 x35 h75 y12f ff16 fs2b fc0 sc0 ls0 ws0">4.20<span class="_ _6d"> </span><span class="ff1f">futimens</span>,<span class="_ _54"> </span><span class="ff1f">utimensat</span><span class="ls1c3">,a<span class="_ _52"></span><span class="ls0">nd<span class="_ _54"> </span><span class="ff1f">utimes<span class="_ _54"> </span></span>Functions</span></span></div><div class="t m0 x32 h2a y4de ff19 fsf fc0 sc0 ls0 ws0">Several <span class="_ _2"></span>functions <span class="_ _3"></span>ar<span class="ls590">ea<span class="_ _8"></span><span class="ls0">vailable <span class="_ _3"></span>to <span class="_ _3"></span>change <span class="_ _2"></span>the <span class="_ _3"></span>access <span class="_ _3"></span>time <span class="_ _2"></span>and <span class="_ _3"></span>the <span class="_ _3"></span>modiﬁcation <span class="_ _3"></span>time <span class="_ _2"></span>of <span class="_ _3"></span>a</span></span></div><div class="t m0 x32 h26 y6d0 ff19 fsf fc0 sc0 ls0 ws0">ﬁle. <span class="_ _59"> </span>The<span class="_ _59"> </span><span class="ff1a">futimens<span class="_ _46"> </span></span>and<span class="_ _59"> </span><span class="ff1a">utimensat<span class="_ _59"> </span></span>functions <span class="_"> </span>provide <span class="_"> </span>nanosecond <span class="_ _e"> </span>granularity <span class="_"> </span>for</div><div class="t m0 x32 h26 y6d1 ff19 fsf fc0 sc0 ls0 ws0">specifying <span class="_ _9"></span>timestamps, <span class="_ _23"></span>using <span class="_ _9"></span>the<span class="_ _45"> </span><span class="ff1a">timespec<span class="_ _35"> </span></span>structur<span class="_ _0"></span><span class="ls4e7">e(<span class="_ _b"></span><span class="ls0">the <span class="_ _9"></span>same <span class="_ _9"></span>structur<span class="ls4e7">eu<span class="_ _b"></span><span class="ls0">sed <span class="_ _9"></span>by <span class="_ _9"></span>the</span></span></span></span></div><div class="t m0 x32 h26 y6d2 ff1a fsf fc0 sc0 ls0 ws0">stat<span class="_ _80"> </span><span class="ff19">family of functions; see Section 4.2).</span></div><div class="t m0 x3f h57 y1210 ff1a fs2d fc0 sc0 ls0 ws0">#include &lt;sys/stat.h&gt;</div><div class="t m0 x3f h57 y1211 ff1a fs2d fc0 sc0 ls0 ws0">int futimens(int<span class="_"> </span><span class="ff1b">fd</span><span class="ls15c">,c<span class="_ _1d"></span><span class="ls0">onst struct timespec<span class="_"> </span><span class="ff1b">times[2]</span>);</span></span></div><div class="t m0 x3f h57 y1212 ff1a fs2d fc0 sc0 ls0 ws0">int utimensat(int<span class="_"> </span><span class="ff1b">fd</span><span class="ls15c">,c<span class="_ _1d"></span><span class="ls0">onst char *<span class="ff1b">path</span><span class="ls15c">,c<span class="_ _5b"></span><span class="ls0">onst struct timespec<span class="_"> </span><span class="ff1b">times[2]</span>,</span></span></span></span></div><div class="t m0 xea h57 y1213 ff1a fs2d fc0 sc0 ls0 ws0">int<span class="_"> </span><span class="ff1b">ﬂag</span>);</div><div class="t m0 x1af h5f y1214 ff19 fs2d fc0 sc0 ls0 ws0">Both return: 0 if OK,<span class="_"> </span><span class="ff20">−</span>1<span class="_"> </span>on<span class="_"> </span>err<span class="_ _0"></span>or</div><div class="t m0 x3f h4a y1215 ff19 fs26 fc0 sc0 ls0 ws0">In <span class="_ _9"></span>both <span class="_ _9"></span>functions, <span class="_ _9"></span>the <span class="_ _9"></span>ﬁrst <span class="_ _9"></span>element <span class="_ _9"></span>of <span class="_ _9"></span>the<span class="_ _45"> </span><span class="ff1b">times<span class="_ _45"> </span></span>array <span class="_ _9"></span>argument <span class="_ _3"></span>contains <span class="_ _9"></span>the <span class="_ _9"></span>access</div><div class="t m0 x32 h49 y1216 ff19 fs26 fc0 sc0 ls0 ws0">time, <span class="_ _9"></span>and <span class="_ _9"></span>the <span class="_ _9"></span>second <span class="_ _9"></span>element <span class="_ _9"></span>contains <span class="_ _9"></span>the <span class="_ _9"></span>modiﬁcation <span class="_ _9"></span>time.<span class="_ _16"> </span>The <span class="_ _9"></span>two <span class="_ _9"></span>time <span class="_ _9"></span>values <span class="_ _9"></span>are</div><div class="t m0 x32 h49 y1217 ff19 fs26 fc0 sc0 ls0 ws0">calendar <span class="_"> </span>times, <span class="_"> </span>which <span class="_ _e"> </span>count <span class="_"> </span>seconds <span class="_"> </span>since <span class="_"> </span>the <span class="_ _e"> </span>Epoch, <span class="_"> </span>as <span class="_"> </span>described <span class="_"> </span>in <span class="_"> </span>Section <span class="_ _e"> </span>1.10.</div><div class="t m0 x32 h49 y1218 ff19 fs26 fc0 sc0 ls0 ws0">Partial seconds ar<span class="lsd3">ee<span class="_ _4f"></span><span class="ls0">xpressed in nanoseconds.</span></span></div><div class="t m0 x3f h49 y1219 ff19 fs26 fc0 sc0 ls3aa ws0">Ti<span class="_ _3"></span><span class="ls0">mestamps can be speciﬁed in one of four ways:</span></div><div class="t m0 x3f h4a y121a ff19 fs26 fc0 sc0 ls0 ws0">1. <span class="_ _51"> </span>The<span class="_ _66"> </span><span class="ff1b">times<span class="_ _47"> </span></span>argument is <span class="_ _2"></span>a <span class="_ _2"></span>null <span class="_ _2"></span>pointer<span class="_ _1"></span><span class="ls591">.I<span class="_ _5b"></span><span class="ls592">nt<span class="_ _4f"></span><span class="ls0">his <span class="_ _2"></span>case, <span class="_ _2"></span>both <span class="_ _2"></span>timestamps <span class="_ _2"></span>ar<span class="ls593">es<span class="_ _4f"></span><span class="ls0">et <span class="_ _2"></span>to <span class="_ _2"></span>the</span></span></span></span></span></div><div class="t m0 x41 h49 y121b ff19 fs26 fc0 sc0 ls0 ws0">current time.</div><div class="t m0 x3f h4d y121c ff19 fs26 fc0 sc0 ls0 ws0">2. <span class="_ _51"> </span>The<span class="_ _44"> </span><span class="ff1b">times<span class="_ _35"> </span></span>argument <span class="_ _42"> </span>points <span class="_ _42"> </span>to <span class="_ _42"> </span>an <span class="_ _42"> </span>array <span class="_ _42"> </span>of <span class="_ _42"> </span>two<span class="_ _44"> </span><span class="ff1a">timespec<span class="_ _35"> </span></span>structures. <span class="_ _35"> </span>If<span class="_ _44"> </span>either</div><div class="t m0 x41 h4d y121d ff1a fs26 fc0 sc0 ls0 ws0">tv_nsec<span class="_ _47"> </span><span class="ff19">ﬁeld <span class="_ _9"></span>has <span class="_ _3"></span>the <span class="_ _3"></span>special <span class="_ _9"></span>value<span class="_ _47"> </span></span>UTIME_NOW<span class="ff19 ls594">,t<span class="_ _8"></span><span class="ls0">he <span class="_ _9"></span>corresponding <span class="_ _2"></span>timestamp</span></span></div><div class="t m0 x41 h4d y121e ff19 fs26 fc0 sc0 ls0 ws0">is set to the current time.<span class="_ _59"> </span>The corresponding<span class="_"> </span><span class="ff1a">tv_sec<span class="_ _80"> </span></span>ﬁeld is ignored.</div><div class="t m0 x3f h4d y121f ff19 fs26 fc0 sc0 ls0 ws0">3. <span class="_ _51"> </span>The<span class="_ _44"> </span><span class="ff1b">times<span class="_ _35"> </span></span>argument <span class="_ _42"> </span>points <span class="_ _42"> </span>to <span class="_ _42"> </span>an <span class="_ _42"> </span>array <span class="_ _42"> </span>of <span class="_ _42"> </span>two<span class="_ _44"> </span><span class="ff1a">timespec<span class="_ _35"> </span></span>structures. <span class="_ _35"> </span>If<span class="_ _44"> </span>either</div><div class="t m0 x41 h4d y1220 ff1a fs26 fc0 sc0 ls0 ws0">tv_nsec<span class="_ _61"> </span><span class="ff19">ﬁeld <span class="_ _45"> </span>has <span class="_ _66"> </span>the <span class="_ _45"> </span>special <span class="_ _66"> </span>value<span class="_ _16"> </span></span>UTIME_OMIT<span class="ff19 ls595">,t<span class="_ _5b"></span><span class="ls0">hen <span class="_ _47"> </span>the <span class="_ _47"> </span>corresponding</span></span></div><div class="t m0 x41 h4d y1221 ff19 fs26 fc0 sc0 ls0 ws0">timestamp is unchanged.<span class="_ _59"> </span>The corresponding<span class="_"> </span><span class="ff1a">tv_sec<span class="_ _80"> </span></span>ﬁeld is ignored.</div><div class="t m0 x3f h4d y1222 ff19 fs26 fc0 sc0 ls0 ws0">4. <span class="_ _51"> </span>The<span class="_ _4b"> </span><span class="ff1b">times<span class="_ _59"> </span></span>argument <span class="_ _53"> </span>points <span class="_ _e"> </span>to <span class="_ _e"> </span>an <span class="_ _e"> </span>array <span class="_ _e"> </span>of <span class="_"> </span>two<span class="_ _44"> </span><span class="ff1a">timespec<span class="_ _59"> </span></span>structur<span class="_ _0"></span>es <span class="_ _e"> </span>and <span class="_ _e"> </span>the</div><div class="t m0 x41 h4d y1223 ff1a fs26 fc0 sc0 ls0 ws0">tv_nsec<span class="_ _66"> </span><span class="ff19">ﬁeld <span class="_ _2"></span>contains <span class="_ _2"></span>a <span class="_ _2"></span>value <span class="_ _2"></span>other <span class="_ _2"></span>than<span class="_ _47"> </span></span>UTIME_NOW<span class="_ _66"> </span><span class="ff19">or<span class="_ _66"> </span></span>UTIME_OMIT<span class="ff19 ls596">.I<span class="_ _5b"></span><span class="ls597">nt<span class="_ _d"></span><span class="ls0">his</span></span></span></div><div class="t m0 x41 h49 y1224 ff19 fs26 fc0 sc0 ls0 ws0">case, <span class="_ _4b"> </span>the <span class="_ _59"> </span>corresponding <span class="_ _4b"> </span>timestamp <span class="_ _4b"> </span>is <span class="_ _59"> </span>set <span class="_ _59"> </span>to <span class="_ _4b"> </span>the <span class="_ _59"> </span>value <span class="_ _4b"> </span>speciﬁed <span class="_ _59"> </span>by <span class="_ _59"> </span>the</div><div class="t m0 x41 h4d y1225 ff19 fs26 fc0 sc0 ls0 ws0">corresponding<span class="_"> </span><span class="ff1a">tv_sec<span class="_ _80"> </span></span>and<span class="_"> </span><span class="ff1a">tv_nsec<span class="_ _80"> </span></span>ﬁelds.</div><div class="t m0 x3f h4a y1226 ff19 fs26 fc0 sc0 ls0 ws0">The <span class="_ _3"></span>privileges <span class="_ _3"></span>required <span class="_ _2"></span>to <span class="_ _3"></span>execute <span class="_ _3"></span>these <span class="_ _3"></span>functions <span class="_ _9"></span>depend <span class="_ _3"></span>on <span class="_ _3"></span>the <span class="_ _3"></span>value <span class="_ _3"></span>of <span class="_ _3"></span>the<span class="_ _45"> </span><span class="ff1b">times</span></div><div class="t m0 x32 h49 y1227 ff19 fs26 fc0 sc0 ls0 ws0">argument.</div><div class="t m0 x3f h4d y1228 ff19 fs26 fc0 sc0 ls15d ws0">•I<span class="_ _4d"></span><span class="ls0">f<span class="_ _45"> </span><span class="ff1b">times<span class="_ _35"> </span></span>is <span class="_ _9"></span>a <span class="_ _23"></span>null <span class="_ _23"></span>pointer <span class="_ _9"></span>or <span class="_ _23"></span>if <span class="_ _23"></span>either<span class="_ _45"> </span><span class="ff1a">tv_nsec<span class="_ _45"> </span></span>ﬁeld <span class="_ _23"> </span>is <span class="_ _23"></span>set <span class="_ _9"></span>to<span class="_ _35"> </span><span class="ff1a">UTIME_NOW</span><span class="ls598">,e<span class="_ _b"></span><span class="ls0">ither</span></span></span></div><div class="t m0 x15 h49 y1229 ff19 fs26 fc0 sc0 ls0 ws0">the <span class="_ _53"> </span>effective <span class="_ _53"> </span>user <span class="_ _e"> </span>ID <span class="_ _e"> </span>of <span class="_ _e"> </span>the <span class="_ _e"> </span>process <span class="_ _53"> </span>must <span class="_ _e"> </span>equal <span class="_ _53"> </span>the <span class="_ _e"> </span>owner <span class="_ _e"> </span>ID <span class="_ _e"> </span>of <span class="_ _e"> </span>the <span class="_ _e"> </span>ﬁle, <span class="_ _53"> </span>the</div><div class="t m0 x15 h49 y122a ff19 fs26 fc0 sc0 ls0 ws0">process <span class="_ _66"> </span>must <span class="_ _47"> </span>have <span class="_ _47"> </span>write <span class="_ _47"> </span>permission <span class="_ _47"> </span>for <span class="_ _47"> </span>the <span class="_ _47"> </span>ﬁle, <span class="_ _47"> </span>or <span class="_ _47"> </span>the <span class="_ _47"> </span>process <span class="_ _47"> </span>must <span class="_ _47"> </span>be <span class="_ _47"> </span>a</div><div class="t m0 x15 h49 y122b ff19 fs26 fc0 sc0 ls0 ws0">superuser pr<span class="_ _0"></span>ocess.</div><div class="t m0 x3f h4d y122c ff19 fs26 fc0 sc0 ls15d ws0">•I<span class="_ _4d"></span><span class="ls0">f<span class="_ _35"> </span><span class="ff1b">times<span class="_ _35"> </span></span>is <span class="_ _42"> </span>a <span class="_ _23"> </span>non-null <span class="_ _42"> </span>pointer <span class="_ _23"> </span>and <span class="_ _42"> </span>either<span class="_ _35"> </span><span class="ff1a">tv_nsec<span class="_ _35"> </span></span>ﬁeld <span class="_ _42"> </span>has <span class="_ _42"> </span>a <span class="_ _23"> </span>value <span class="_ _42"> </span>other <span class="_ _23"> </span>than</span></div><div class="t m0 x15 h4d y122d ff1a fs26 fc0 sc0 ls0 ws0">UTIME_NOW<span class="_ _66"> </span><span class="ff19">or<span class="_ _47"> </span></span>UTIME_OMIT<span class="ff19 ls13d">,t<span class="_ _4f"></span><span class="ls0">he <span class="_ _2"></span>effective <span class="_ _2"></span>user <span class="_ _2"></span>ID <span class="_ _2"></span>of <span class="_ _2"></span>the <span class="_ _3"></span>process must <span class="_ _2"></span>equal <span class="_ _3"></span>the</span></span></div><div class="t m0 x15 h49 y122e ff19 fs26 fc0 sc0 ls0 ws0">owner <span class="_ _2"></span>ID <span class="_ _3"></span>of <span class="_ _2"></span>the <span class="_ _3"></span>ﬁle, <span class="_ _3"></span>or <span class="_ _2"></span>the <span class="_ _3"></span>process <span class="_ _2"></span>must <span class="_ _2"></span>be <span class="_ _3"></span>a <span class="_ _2"></span>superuser <span class="_ _3"></span>process. <span class="_ _66"> </span>Merely <span class="_ _2"></span>having</div><div class="t m0 x15 h49 y122f ff19 fs26 fc0 sc0 ls0 ws0">write permission for the ﬁle is not adequate.</div><a class="l" href="#pfd" data-dest-detail='[13,"XYZ",50,757,1]'><div class="d m1" style="border-style:none;position:absolute;left:80.892409px;bottom:1236.288916px;width:313.631798px;height:19.679993px;background-color:rgba(255,255,255,0.000001);"></div></a></div><div class="pi" data-data='{"ctm":[2.100000,0.000000,0.000000,2.100000,-115.668004,-156.491993]}'></div></div>
