<div id="pf5c" class="pf w4 h1f" data-page-no="5c"><div class="pc pc5c w4 h1f"><img class="bi x0 y0 w3 h4" alt="" src="apue/bg5c.png"/><div class="t m0 x31 h2 y8e ff1 fs0 fc0 sc0 ls0 ws0"><span class="fc1 sc0">ptg10805159</span></div><div class="t m0 x35 h24 ya4 ff18 fs0 fc0 sc0 ls0 ws0">58<span class="_ _1b"> </span><span class="ff19">UNIX <span class="_"> </span>Standardization <span class="_"> </span>and <span class="_"> </span>Implementations<span class="_ _99"> </span>Chapter <span class="_"> </span>2</span></div><div class="t m0 x32 h2a y12f ff19 fsf fc0 sc0 ls0 ws0">This <span class="_ _3"></span>causes <span class="_ _2"></span>the <span class="_ _3"></span>featur<span class="ls315">et<span class="_ _8"></span><span class="ls0">est <span class="_ _3"></span>macro<span class="_ _47"> </span>to<span class="_ _47"> </span>be<span class="_ _47"> </span>deﬁned <span class="_ _3"></span>befor<span class="ls315">ea<span class="_ _8"></span><span class="ls0">ny <span class="_ _3"></span>header <span class="_ _2"></span>ﬁles <span class="_ _3"></span>ar<span class="ls316">ei<span class="_ _8"></span><span class="ls0">ncluded <span class="_ _3"></span>by</span></span></span></span></span></span></div><div class="t m0 x32 h2a y130 ff19 fsf fc0 sc0 ls0 ws0">the <span class="_ _2"></span>C <span class="_ _3"></span>program. <span class="_ _66"> </span>If<span class="_ _47"> </span>we <span class="_ _2"></span>want <span class="_ _3"></span>to <span class="_ _3"></span>use <span class="_ _2"></span>only <span class="_ _3"></span>the <span class="_ _2"></span>POSIX.1 <span class="_ _3"></span>deﬁnitions, <span class="_ _2"></span>we <span class="_ _3"></span>can <span class="_ _3"></span>also <span class="_ _2"></span>set <span class="_ _3"></span>the <span class="_ _2"></span>ﬁrst</div><div class="t m0 x32 h2a y131 ff19 fsf fc0 sc0 ls0 ws0">line of a source ﬁle to</div><div class="t m0 x3f h57 y449 ff1a fs2d fc0 sc0 ls0 ws0">#define _POSIX_C_SOURCE<span class="_ _d9"> </span>200809L</div><div class="t m0 x3f h2a y44a ff19 fsf fc0 sc0 ls5f ws0">To <span class="_ _66"> </span>e<span class="_ _9"></span><span class="ls0">nable <span class="_ _9"></span>the <span class="_ _3"></span>XSI <span class="_ _9"></span>option <span class="_ _9"></span>of <span class="_ _9"></span>V<span class="_ _4"></span>ersion <span class="_ _9"></span>4 <span class="_ _9"></span>of <span class="_ _9"></span>the <span class="_ _3"></span>Single <span class="_ _9"></span>UNIX <span class="_ _9"></span>Speciﬁcation, <span class="_ _9"></span>we <span class="_ _9"></span>need <span class="_ _3"></span>to</span></div><div class="t m0 x32 h26 y9c9 ff19 fsf fc0 sc0 ls0 ws0">deﬁne <span class="_ _23"> </span>the <span class="_ _23"> </span>constant<span class="_ _44"> </span><span class="ff1a">_XOPEN_SOURCE<span class="_ _35"> </span></span>to <span class="_ _23"></span>be <span class="_ _23"> </span>700.<span class="_ _51"> </span>Besides <span class="_ _42"> </span>enabling <span class="_ _23"> </span>the <span class="_ _42"> </span>XSI <span class="_ _23"></span>option, <span class="_ _23"> </span>this</div><div class="t m0 x32 h26 y9ca ff19 fsf fc0 sc0 ls0 ws0">has <span class="_ _42"> </span>the <span class="_ _53"> </span>same <span class="_ _53"> </span>effect <span class="_ _42"> </span>as <span class="_ _53"> </span>deﬁning<span class="_ _4b"> </span><span class="ff1a">_POSIX_C_SOURCE<span class="_ _44"> </span></span>to <span class="_ _53"> </span>be <span class="_ _53"> </span>200809L <span class="_ _53"> </span>as <span class="_ _42"> </span>far <span class="_ _53"> </span>as <span class="_ _53"> </span>POSIX.1</div><div class="t m0 x32 h2a y9cb ff19 fsf fc0 sc0 ls0 ws0">functionality is concerned.</div><div class="t m0 x3f h26 y9cc ff19 fsf fc0 sc0 ls0 ws0">The <span class="_"> </span>Single <span class="_"> </span>UNIX <span class="_"> </span>Speciﬁcation <span class="_ _e"> </span>deﬁnes <span class="_"> </span>the<span class="_ _59"> </span><span class="ff1a">c99<span class="_ _46"> </span></span>utility <span class="_"> </span>as <span class="_"> </span>the <span class="_"> </span>interface <span class="_ _e"> </span>to <span class="_"> </span>the <span class="_"> </span>C</div><div class="t m0 x32 h2a y9cd ff19 fsf fc0 sc0 ls0 ws0">compilation environment. <span class="_"> </span>W<span class="_ _6"></span>ith it we can compile a ﬁle as follows:</div><div class="t m0 x3f h57 y9ce ff1a fs2d fc0 sc0 ls0 ws0">c99 -D_XOPEN_SOURCE=700 file.c -o file</div><div class="t m0 x32 h26 y9cf ff19 fsf fc0 sc0 ls5f ws0">To <span class="_ _35"> </span>e<span class="_ _9"></span><span class="ls0">nable <span class="_ _e"> </span>the <span class="_ _e"> </span>1999 <span class="_ _e"> </span>ISO <span class="_ _e"> </span>C <span class="_ _53"> </span>extensions <span class="_ _e"> </span>in <span class="_ _e"> </span>the<span class="_ _4b"> </span><span class="ff1a">gcc<span class="_ _4b"> </span></span><span class="ls317">Cc<span class="_ _c"></span><span class="ls0">ompiler<span class="_ _1"></span>,<span class="_ _4b"> </span>we<span class="_ _4b"> </span>use <span class="_ _e"> </span>the<span class="_ _4b"> </span><span class="ff1a">-std=c99</span></span></span></span></div><div class="t m0 x32 h2a y9d0 ff19 fsf fc0 sc0 ls0 ws0">option, as in</div><div class="t m0 x3f h57 y9d1 ff1a fs2d fc0 sc0 ls0 ws0">gcc -D_XOPEN_SOURCE=700 -std=c99 file.c -o file</div><div class="t m0 x35 h53 y9d2 ff16 fs2b fc0 sc0 ls0 ws0">2.8 <span class="_ _68"> </span>Primitive<span class="_ _54"> </span>System <span class="_"> </span>Data <span class="_"> </span>T<span class="_ _1"></span>ypes</div><div class="t m0 x32 h2a y9d3 ff19 fsf fc0 sc0 ls0 ws0">Historically<span class="_ _4"></span><span class="ls318">,c<span class="_ _1d"></span><span class="ls0">ertain <span class="_ _47"> </span>C <span class="_ _45"> </span>data <span class="_ _47"> </span>types <span class="_ _47"> </span>have <span class="_ _47"> </span>been <span class="_ _47"> </span>associated <span class="_ _47"> </span>with <span class="_ _47"> </span>certain <span class="_ _45"> </span>UNIX <span class="_ _47"> </span>system</span></span></div><div class="t m0 x32 h2a y9d4 ff19 fsf fc0 sc0 ls0 ws0">variables. <span class="_ _47"> </span>For<span class="_ _47"> </span>example, <span class="_ _3"></span>major <span class="_ _3"></span>and <span class="_ _3"></span>minor <span class="_ _3"></span>device <span class="_ _3"></span>numbers <span class="_ _3"></span>have <span class="_ _9"></span>historically <span class="_ _2"></span>been <span class="_ _9"></span>stor<span class="_ _0"></span>ed</div><div class="t m0 x32 h2a y9d5 ff19 fsf fc0 sc0 ls0 ws0">in a 16</div><div class="t m0 x14b h2a y9d6 ff19 fsf fc0 sc0 ls0 ws0">-</div><div class="t m0 x15 h2a y9d5 ff19 fsf fc0 sc0 ls0 ws0">bit short integer<span class="_ _1"></span><span class="ls11d">,w<span class="_ _d"></span><span class="ls0">ith 8 <span class="_ _2"></span>bits for <span class="_ _2"></span>the major <span class="_ _2"></span>device number <span class="_ _2"></span>and 8 <span class="_ _2"></span>bits for the <span class="_ _2"></span>minor</span></span></div><div class="t m0 x32 h2a y9d7 ff19 fsf fc0 sc0 ls0 ws0">device <span class="_ _23"></span>number<span class="_ _6"></span><span class="ls319">.B<span class="_ _26"></span><span class="ls0">ut <span class="_ _23"> </span>many <span class="_ _23"> </span>larger <span class="_ _23"></span>systems <span class="_ _23"></span>need <span class="_ _23"></span>mor<span class="ls31a">et<span class="_ _43"></span><span class="ls0">han <span class="_ _23"></span>256 <span class="_ _23"></span>values <span class="_ _23"></span>for <span class="_ _23"></span>these <span class="_ _23"></span>device</span></span></span></span></div><div class="t m0 x32 h2a y9d8 ff19 fsf fc0 sc0 ls0 ws0">numbers, <span class="_ _3"></span>so <span class="_ _9"></span>a <span class="_ _3"></span>different <span class="_ _2"></span>technique <span class="_ _9"></span>is <span class="_ _3"></span>needed.<span class="_ _5a"> </span>(Indeed, <span class="_ _3"></span>the <span class="_ _9"></span>32</div><div class="t m0 x13e h2a y9d9 ff19 fsf fc0 sc0 ls0 ws0">-</div><div class="t m0 x14c h2a y9d8 ff19 fsf fc0 sc0 ls0 ws0">bit <span class="_ _3"></span>version <span class="_ _9"></span>of <span class="_ _3"></span>Solaris <span class="_ _9"></span>uses</div><div class="t m0 x32 h2a y9da ff19 fsf fc0 sc0 ls0 ws0">32 bits for the device number: 14 bits for the major and 18 bits for the minor<span class="_ _6"></span>.)</div><div class="t m0 x3f h26 y9db ff19 fsf fc0 sc0 ls0 ws0">The <span class="_ _9"></span>header<span class="_ _35"> </span><span class="ff1a">&lt;sys/types.h&gt;<span class="_ _45"> </span></span>deﬁnes <span class="_ _9"></span>some <span class="_ _23"></span>implementation-dependent <span class="_ _9"></span>data <span class="_ _23"></span>types,</div><div class="t m0 x32 h2b y9dc ff19 fsf fc0 sc0 ls0 ws0">called <span class="_ _e"> </span>the<span class="_ _4b"> </span><span class="ff1b">primitive <span class="_ _e"> </span>system <span class="_ _e"> </span>data <span class="_ _e"> </span>types</span><span class="ls31b">.M<span class="_ _64"></span><span class="ls0">ore<span class="_ _4b"> </span>of<span class="_ _4b"> </span>these <span class="_"> </span>data <span class="_ _53"> </span>types <span class="_ _e"> </span>ar<span class="ls31c">ed<span class="_ _55"></span><span class="ls0">eﬁned <span class="_ _53"> </span>in <span class="_"> </span>other</span></span></span></span></div><div class="t m0 x32 h26 y9dd ff19 fsf fc0 sc0 ls0 ws0">headers <span class="_ _e"> </span>as <span class="_"> </span>well.<span class="_ _65"> </span>These <span class="_ _e"> </span>data <span class="_"> </span>types <span class="_ _53"> </span>ar<span class="ls31d">ed<span class="_ _55"></span><span class="ls0">eﬁned <span class="_ _e"> </span>in <span class="_ _e"> </span>the <span class="_"> </span>headers <span class="_ _53"> </span>with <span class="_"> </span>the <span class="_ _53"> </span>C<span class="_ _59"> </span><span class="ff1a">typedef</span></span></span></div><div class="t m0 x32 h26 y9de ff19 fsf fc0 sc0 ls0 ws0">facility<span class="_ _4"></span><span class="ls31e">.M<span class="_ _1d"></span><span class="ls0">ost <span class="_ _3"></span>end <span class="_ _9"></span>in<span class="_ _47"> </span><span class="ff1a">_t</span><span class="ls31e">.F<span class="_ _1d"></span><span class="ls0">igur<span class="ls31f">e2<span class="_ _b"></span><span class="ls0">.21 <span class="_ _3"></span>lists <span class="_ _9"></span>many <span class="_ _3"></span>of <span class="_ _3"></span>the <span class="_ _3"></span>primitive <span class="_ _9"></span>system <span class="_ _3"></span>data <span class="_ _3"></span>types <span class="_ _9"></span>that</span></span></span></span></span></span></div><div class="t m0 x32 h2a y9df ff19 fsf fc0 sc0 ls0 ws0">we’ll encounter in this text.</div><div class="t m0 x3f h2a y9e0 ff19 fsf fc0 sc0 ls0 ws0">By <span class="_ _35"> </span>deﬁning <span class="_ _35"> </span>these <span class="_ _35"> </span>data <span class="_ _35"> </span>types <span class="_ _35"> </span>this <span class="_ _35"> </span>way<span class="_ _6"></span>,<span class="_ _51"> </span>we<span class="_ _51"> </span>do<span class="_ _51"> </span>not <span class="_ _35"> </span>build <span class="_ _35"> </span>into <span class="_ _35"> </span>our <span class="_ _35"> </span>programs</div><div class="t m0 x32 h2a y9e1 ff19 fsf fc0 sc0 ls0 ws0">implementation <span class="_ _3"></span>details <span class="_ _3"></span>that <span class="_ _9"></span>can <span class="_ _3"></span>change <span class="_ _9"></span>from <span class="_ _2"></span>one <span class="_ _9"></span>system <span class="_ _3"></span>to <span class="_ _3"></span>another<span class="_ _1"></span><span class="ls320">.W<span class="_ _52"></span><span class="ls321">ed<span class="_ _8"></span><span class="ls0">escribe <span class="_ _9"></span>what</span></span></span></div><div class="t m0 x32 h2a y9e2 ff19 fsf fc0 sc0 ls0 ws0">each of these data types is used for when we encounter them later in the text.</div><div class="t m0 x35 h53 y9e3 ff16 fs2b fc0 sc0 ls0 ws0">2.9 <span class="_ _68"> </span>Differences <span class="_"> </span>Between <span class="_"> </span>Standar<span class="_ _0"></span>ds</div><div class="t m0 x32 h2a y9e4 ff19 fsf fc0 sc0 ls0 ws0">All <span class="_ _45"> </span>in <span class="_ _35"> </span>all, <span class="_ _45"> </span>these <span class="_ _35"> </span>various <span class="_ _45"> </span>standards <span class="_ _35"> </span>ﬁt <span class="_ _45"> </span>together <span class="_ _35"> </span>nicely<span class="_ _4"></span><span class="ls322">.O<span class="_ _95"></span><span class="ls0">ur <span class="_ _45"> </span>main <span class="_ _35"> </span>concern <span class="_ _45"> </span>is <span class="_ _35"> </span>any</span></span></div><div class="t m0 x32 h2a y9e5 ff19 fsf fc0 sc0 ls0 ws0">differ<span class="_ _0"></span>ences <span class="_ _23"> </span>between <span class="_ _23"> </span>the <span class="_ _42"> </span>ISO <span class="_ _23"> </span>C <span class="_ _42"> </span>standar<span class="ls26a">da<span class="_ _43"></span><span class="ls0">nd <span class="_ _23"></span>POSIX.1, <span class="_ _23"> </span>since <span class="_ _42"> </span>the <span class="_ _23"></span>Base <span class="_ _23"> </span>Speciﬁcations <span class="_ _42"> </span>of</span></span></div><div class="t m0 x32 h2a y9e6 ff19 fsf fc0 sc0 ls0 ws0">the <span class="_ _45"> </span>Single <span class="_ _45"> </span>UNIX <span class="_ _45"> </span>Speciﬁcation <span class="_ _35"> </span>and <span class="_ _45"> </span>POSIX.1 <span class="_ _45"> </span>ar<span class="ls323">eo<span class="_ _26"></span><span class="ls0">ne <span class="_ _45"> </span>and <span class="_ _45"> </span>the <span class="_ _45"> </span>same.<span class="_ _5c"> </span>Conﬂicts <span class="_ _45"> </span>are</span></span></div><div class="t m0 x32 h2a y9e7 ff19 fsf fc0 sc0 ls0 ws0">unintended, <span class="_ _9"></span>but <span class="_ _9"></span>if <span class="_ _9"></span>they <span class="_ _23"></span>should <span class="_ _9"></span>arise, <span class="_ _9"></span>POSIX.1 <span class="_ _9"></span>defers <span class="_ _9"></span>to <span class="_ _9"></span>the <span class="_ _23"></span>ISO <span class="_ _9"></span>C <span class="_ _9"></span>standard. <span class="_ _47"> </span>However<span class="_ _1"></span>,</div><div class="t m0 x32 h2a y9e8 ff19 fsf fc0 sc0 ls0 ws0">ther<span class="ls44">ea<span class="_ _4f"></span><span class="ls45">re <span class="_ _3"></span>s<span class="ls0">ome differences.</span></span></span></div><div class="t m0 x3f h26 y9e9 ff19 fsf fc0 sc0 ls0 ws0">ISO <span class="_ _53"> </span>C <span class="_ _42"> </span>deﬁnes <span class="_ _53"> </span>the <span class="_ _53"> </span>function<span class="_ _4b"> </span><span class="ff1a">clock<span class="_ _44"> </span></span>to <span class="_ _53"> </span>return <span class="_ _42"> </span>the <span class="_ _53"> </span>amount <span class="_ _53"> </span>of <span class="_ _53"> </span>CPU <span class="_ _53"> </span>time <span class="_ _53"> </span>used <span class="_ _53"> </span>by <span class="_ _53"> </span>a</div><div class="t m0 x32 h26 y9ea ff19 fsf fc0 sc0 ls0 ws0">process. <span class="_"> </span>The<span class="_ _66"> </span>value <span class="_ _2"></span>returned is <span class="_ _2"></span>a<span class="_ _66"> </span><span class="ff1a">clock_t<span class="_ _47"> </span></span>value, but <span class="_ _2"></span>ISO <span class="_ _2"></span>C <span class="_ _2"></span>doesn’t <span class="_ _2"></span>specify its <span class="_ _2"></span>units.<span class="_ _61"> </span><span class="ls5f">To</span></div><a class="l" href="#pfc" data-dest-detail='[12,"XYZ",50,757,1]'><div class="d m1" style="border-style:none;position:absolute;left:80.892634px;bottom:778.278903px;width:209.352699px;height:19.679992px;background-color:rgba(255,255,255,0.000001);"></div></a><a class="l" href="#pfc" data-dest-detail='[12,"XYZ",50,757,1]'><div class="d m1" style="border-style:none;position:absolute;left:80.894733px;bottom:324.676820px;width:222.359696px;height:19.679993px;background-color:rgba(255,255,255,0.000001);"></div></a></div><div class="pi" data-data='{"ctm":[2.100000,0.000000,0.000000,2.100000,-115.668004,-156.491993]}'></div></div>
