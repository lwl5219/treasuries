<div id="pf5d" class="pf w4 h1f" data-page-no="5d"><div class="pc pc5d w4 h1f"><img class="bi x0 y0 w3 h4" alt="" src="apue/bg5d.png"/><div class="t m0 x31 h2 y8e ff1 fs0 fc0 sc0 ls0 ws0"><span class="fc1 sc0">ptg10805159</span></div><div class="t m0 x35 h24 ya4 ff19 fs0 fc0 sc0 ls0 ws0">Section <span class="_"> </span>2.9<span class="_ _161"> </span>Differences <span class="_"> </span>Between <span class="_"> </span>Standar<span class="_ _0"></span>ds<span class="_ _1b"> </span><span class="ff18">59</span></div><div class="t m0 x60 h51 y597 ff19 fs2a fc0 sc0 ls324 ws0">Ty<span class="_ _3"></span><span class="ls0">pe <span class="_ _168"> </span>Description</span></div><div class="t m0 x14d h5e y7b6 ff1a fs10 fc0 sc0 ls0 ws0">clock_t<span class="_ _9f"> </span><span class="ff19">counter of clock ticks (process time) (Section 1.10)</span></div><div class="t m0 x14d h5e y7b7 ff1a fs10 fc0 sc0 ls0 ws0">comp_t<span class="_ _7d"> </span><span class="ff19">compressed clock ticks (not deﬁned by POSIX.1; see Section 8.14)</span></div><div class="t m0 x14d h5e y7b8 ff1a fs10 fc0 sc0 ls0 ws0">dev_t<span class="_ _a1"> </span><span class="ff19">device numbers (major and minor) (Section 4.24)</span></div><div class="t m0 x14d h5e y7b9 ff1a fs10 fc0 sc0 ls0 ws0">fd_set<span class="_ _7d"> </span><span class="ff19">ﬁle descriptor sets (Section 14.4.1)</span></div><div class="t m0 x14d h5e y7ba ff1a fs10 fc0 sc0 ls0 ws0">fpos_t<span class="_ _7d"> </span><span class="ff19">ﬁle position (Section 5.10)</span></div><div class="t m0 x14d h5e y7bb ff1a fs10 fc0 sc0 ls0 ws0">gid_t<span class="_ _a1"> </span><span class="ff19">numeric group IDs</span></div><div class="t m0 x14d h5e y7bc ff1a fs10 fc0 sc0 ls0 ws0">ino_t<span class="_ _a1"> </span><span class="ff19">i-node numbers (Section 4.14)</span></div><div class="t m0 x14d h5e y7bd ff1a fs10 fc0 sc0 ls0 ws0">mode_t<span class="_ _7d"> </span><span class="ff19">ﬁle type, ﬁle creation mode (Section 4.5)</span></div><div class="t m0 x14d h5e y7be ff1a fs10 fc0 sc0 ls0 ws0">nlink_t<span class="_ _9f"> </span><span class="ff19">link counts for directory entries (Section 4.14)</span></div><div class="t m0 x14d h5e y7bf ff1a fs10 fc0 sc0 ls0 ws0">off_t<span class="_ _a1"> </span><span class="ff19">ﬁle sizes and offsets (signed) (</span>lseek<span class="ff19 ls136">,S<span class="_ _5"></span><span class="ls0">ection 3.6)</span></span></div><div class="t m0 x14d h5e y7c0 ff1a fs10 fc0 sc0 ls0 ws0">pid_t<span class="_ _a1"> </span><span class="ff19">process IDs and pr<span class="_ _0"></span>ocess group IDs (signed) (Sections 8.2 and 9.4)</span></div><div class="t m0 x14d h5e y7c1 ff1a fs10 fc0 sc0 ls0 ws0">pthread_t<span class="_ _6c"> </span><span class="ff19">thread IDs (Section 1<span class="_ _1"></span>1.3)</span></div><div class="t m0 x14d h5e y7c2 ff1a fs10 fc0 sc0 ls0 ws0">ptrdiff_t<span class="_ _6c"> </span><span class="ff19 ls21d">re<span class="ls0">sult of subtracting two pointers (signed)</span></span></div><div class="t m0 x14d h5e y7c3 ff1a fs10 fc0 sc0 ls0 ws0">rlim_t<span class="_ _7d"> </span><span class="ff19 ls21d">re<span class="ls0">source limits (Section 7.1<span class="_ _0"></span>1)</span></span></div><div class="t m0 x14d h5e y7c4 ff1a fs10 fc0 sc0 ls0 ws0">sig_atomic_t<span class="_ _6e"> </span><span class="ff19">data type that can be accessed atomically (Section 10.15)</span></div><div class="t m0 x14d h5e y7c5 ff1a fs10 fc0 sc0 ls0 ws0">sigset_t<span class="_ _10b"> </span><span class="ff19">signal set (Section 10.11)</span></div><div class="t m0 x14d h5e y7c6 ff1a fs10 fc0 sc0 ls0 ws0">size_t<span class="_ _7d"> </span><span class="ff19">sizes of objects (such as strings) (unsigned) (Section 3.7)</span></div><div class="t m0 x14d h5e y7c7 ff1a fs10 fc0 sc0 ls0 ws0">ssize_t<span class="_ _9f"> </span><span class="ff19">functions that return a count of bytes (signed) (</span>read<span class="ff19">,<span class="_"> </span></span>write<span class="ff19 ls136">,S<span class="_ _5"></span><span class="ls0">ection 3.7)</span></span></div><div class="t m0 x14d h5e y7c8 ff1a fs10 fc0 sc0 ls0 ws0">time_t<span class="_ _7d"> </span><span class="ff19">counter of seconds of calendar time (Section 1.10)</span></div><div class="t m0 x14d h5e y7c9 ff1a fs10 fc0 sc0 ls0 ws0">uid_t<span class="_ _a1"> </span><span class="ff19">numeric user IDs</span></div><div class="t m0 x14d h5e y7ca ff1a fs10 fc0 sc0 ls0 ws0">wchar_t<span class="_ _9f"> </span><span class="ff19">can repr<span class="_ _0"></span>esent all distinct character codes</span></div><div class="t m0 x14e h2e y9eb ff18 fs11 fc0 sc0 ls0 ws0">Figure 2.21<span class="_ _5a"> </span><span class="ff19">Some common primitive system data types</span></div><div class="t m0 x32 h54 y5f6 ff19 fs2c fc0 sc0 ls0 ws0">convert <span class="_ _23"></span>this <span class="_ _23"></span>value <span class="_ _9"></span>to <span class="_ _23"> </span>seconds, <span class="_ _23"> </span>we <span class="_ _23"> </span>divide <span class="_ _23"></span>it <span class="_ _23"></span>by<span class="_ _45"> </span><span class="ff1a">CLOCKS_PER_SEC</span><span class="ls325">,w<span class="_ _b"></span><span class="ls0">hich <span class="_ _23"></span>is <span class="_ _9"></span>deﬁned <span class="_ _23"> </span>in</span></span></div><div class="t m0 x32 h54 y9ec ff19 fs2c fc0 sc0 ls0 ws0">the<span class="_ _45"> </span><span class="ff1a">&lt;time.h&gt;<span class="_ _45"> </span></span>header<span class="_ _6"></span><span class="ls326">.P<span class="_ _62"></span><span class="ls0">OSIX.1 <span class="_ _9"></span>deﬁnes <span class="_ _9"></span>the <span class="_ _9"></span>function<span class="_ _45"> </span><span class="ff1a">times<span class="_ _45"> </span></span>that <span class="_ _3"></span>returns <span class="_ _9"></span>both <span class="_ _9"></span>the <span class="_ _9"></span>CPU</span></span></div><div class="t m0 x32 h55 y9ed ff19 fs2c fc0 sc0 ls0 ws0">time <span class="_ _23"></span>(for <span class="_ _23"></span>the <span class="_ _9"></span>caller <span class="_ _23"> </span>and <span class="_ _23"> </span>all <span class="_ _23"> </span>its <span class="_ _23"></span>terminated <span class="_ _23"></span>children) <span class="_ _9"></span>and <span class="_ _23"> </span>the <span class="_ _23"></span>clock <span class="_ _23"></span>time.<span class="_ _51"> </span>All <span class="_ _9"></span>these <span class="_ _23"> </span>time</div><div class="t m0 x32 h54 y9ee ff19 fs2c fc0 sc0 ls0 ws0">values <span class="_ _42"> </span>are<span class="_ _44"> </span><span class="ff1a">clock_t<span class="_ _35"> </span></span>values. <span class="_ _44"> </span>The<span class="_ _44"> </span><span class="ff1a">sysconf<span class="_ _44"> </span></span>function <span class="_ _53"> </span>is <span class="_ _42"> </span>used <span class="_ _42"> </span>to <span class="_ _53"> </span>obtain <span class="_ _42"> </span>the <span class="_ _42"> </span>number <span class="_ _53"> </span>of</div><div class="t m0 x32 h54 y9ef ff19 fs2c fc0 sc0 ls0 ws0">clock ticks per second for <span class="_ _2"></span>use with the return values from the<span class="_"> </span><span class="ff1a">times<span class="_ _66"> </span></span>function. <span class="_"> </span>What<span class="_"> </span>we</div><div class="t m0 x32 h54 y9f0 ff19 fs2c fc0 sc0 ls0 ws0">have <span class="_ _2"></span>is <span class="_ _2"></span>the <span class="_ _3"></span>same <span class="_ _2"></span>data <span class="_ _2"></span>type <span class="_ _3"></span>(<span class="ff1a">clock_t</span><span class="ls327">)u<span class="_ _4f"></span><span class="ls0">sed <span class="_ _2"></span>to <span class="_ _2"></span>hold <span class="_ _3"></span>measurements of <span class="_ _3"></span>time <span class="_ _2"></span>deﬁned <span class="_ _3"></span>with</span></span></div><div class="t m0 x32 h55 y9f1 ff19 fs2c fc0 sc0 ls0 ws0">differ<span class="_ _0"></span>ent <span class="_ _53"> </span>units <span class="_ _53"> </span>by <span class="_ _e"> </span>ISO <span class="_ _53"> </span>C <span class="_ _e"> </span>and <span class="_ _53"> </span>POSIX.1.<span class="_ _48"> </span>The <span class="_ _53"> </span>difference <span class="_ _53"> </span>can <span class="_ _53"> </span>be <span class="_ _e"> </span>seen <span class="_ _53"> </span>in <span class="_ _e"> </span>Solaris, <span class="_ _53"> </span>where</div><div class="t m0 x32 h54 y9f2 ff1a fs2c fc0 sc0 ls0 ws0">clock<span class="_ _47"> </span><span class="ff19 ls150">re<span class="ls0">turns <span class="_ _2"></span>microseconds <span class="_ _2"></span>(hence<span class="_ _47"> </span></span></span>CLOCKS_PER_SEC<span class="_ _47"> </span><span class="ff19">is <span class="_ _2"></span>1 <span class="_ _3"></span>million), <span class="_ _2"></span>whereas<span class="_ _47"> </span></span>sysconf</div><div class="t m0 x32 h55 y9f3 ff19 fs2c fc0 sc0 ls150 ws0">re<span class="ls0">turns <span class="_ _23"> </span>the <span class="_ _23"></span>value <span class="_ _23"></span>100 <span class="_ _23"></span>for <span class="_ _23"></span>clock <span class="_ _9"></span>ticks <span class="_ _23"> </span>per <span class="_ _23"> </span>second.<span class="_ _51"> </span>Thus <span class="_ _23"></span>we <span class="_ _9"></span>must <span class="_ _23"> </span>take <span class="_ _23"> </span>car<span class="ls328">ew<span class="_ _43"></span><span class="ls0">hen <span class="_ _23"> </span>using</span></span></span></div><div class="t m0 x32 h54 y9f4 ff19 fs2c fc0 sc0 ls0 ws0">variables of type<span class="_"> </span><span class="ff1a">clock_t<span class="_ _80"> </span></span>so that we don’t mix variables with different units.</div><div class="t m0 x3f h55 y9f5 ff19 fs2c fc0 sc0 ls0 ws0">Another <span class="_ _9"></span>area <span class="_ _9"></span>of <span class="_ _9"></span>potential <span class="_ _23"></span>conﬂict <span class="_ _9"></span>is <span class="_ _23"></span>when <span class="_ _9"></span>the <span class="_ _9"></span>ISO <span class="_ _23"></span>C <span class="_ _9"></span>standar<span class="ls329">ds<span class="_ _b"></span><span class="ls0">peciﬁes <span class="_ _9"></span>a <span class="_ _9"></span>function,</span></span></div><div class="t m0 x32 h55 y9f6 ff19 fs2c fc0 sc0 ls0 ws0">but <span class="_ _23"> </span>doesn’t <span class="_ _42"> </span>specify <span class="_ _23"> </span>it <span class="_ _42"> </span>as <span class="_ _23"> </span>strongly <span class="_ _23"> </span>as <span class="_ _42"> </span>POSIX.1 <span class="_ _23"> </span>does.<span class="_ _51"> </span>This <span class="_ _42"> </span>is <span class="_ _23"> </span>the <span class="_ _42"> </span>case <span class="_ _23"> </span>for <span class="_ _42"> </span>functions <span class="_ _23"> </span>that</div><div class="t m0 x32 h55 y9f7 ff19 fs2c fc0 sc0 ls150 ws0">re<span class="ls0">quir<span class="ls32a">ead<span class="_ _43"></span><span class="ls0">iffer<span class="_ _0"></span>ent <span class="_ _23"> </span>implementation <span class="_ _42"> </span>in <span class="_ _23"></span>a <span class="_ _23"> </span>POSIX <span class="_ _42"> </span>environment <span class="_ _23"></span>(with <span class="_ _23"></span>multiple <span class="_ _23"> </span>processes)</span></span></span></div><div class="t m0 x32 h55 y9f8 ff19 fs2c fc0 sc0 ls0 ws0">than <span class="_ _47"> </span>in <span class="_ _47"> </span>an <span class="_ _66"> </span>ISO <span class="_ _47"> </span>C <span class="_ _47"> </span>environment <span class="_ _47"> </span>(wher<span class="ls32b">ev<span class="_ _62"></span><span class="ls0">ery <span class="_ _47"> </span>little <span class="_ _47"> </span>can <span class="_ _47"> </span>be <span class="_ _47"> </span>assumed <span class="_ _47"> </span>about <span class="_ _47"> </span>the <span class="_ _47"> </span>host</span></span></div><div class="t m0 x32 h55 y9f9 ff19 fs2c fc0 sc0 ls0 ws0">operating <span class="_ _35"> </span>system).<span class="_ _5c"> </span>Nevertheless, <span class="_ _35"> </span>POSIX-compliant <span class="_ _35"> </span>systems <span class="_ _35"> </span>implement <span class="_ _35"> </span>the <span class="_ _45"> </span>ISO <span class="_ _35"> </span>C</div><div class="t m0 x32 h54 y7e0 ff19 fs2c fc0 sc0 ls0 ws0">function for <span class="_ _2"></span>compatibility<span class="_ _6"></span><span class="ls32c">.T<span class="_ _5b"></span><span class="ls0">he<span class="_"> </span><span class="ff1a">signal<span class="_ _47"> </span></span>function is <span class="_ _2"></span>an <span class="_ _2"></span>example.<span class="_ _46"> </span>If <span class="_ _2"></span>we <span class="_ _2"></span>unknowingly use</span></span></div><div class="t m0 x32 h54 y9fa ff19 fs2c fc0 sc0 ls0 ws0">the<span class="_"> </span><span class="ff1a">signal<span class="_ _47"> </span></span>function provided by <span class="_ _2"></span>Solaris <span class="_ _2"></span>(hoping <span class="_ _2"></span>to <span class="_ _2"></span>write <span class="_ _2"></span>portable <span class="_ _2"></span>code <span class="_ _2"></span>that can <span class="_ _2"></span>be <span class="_ _2"></span>run</div><div class="t m0 x32 h55 y9fb ff19 fs2c fc0 sc0 ls0 ws0">in <span class="_"> </span>ISO <span class="_"> </span>C <span class="_ _66"> </span>environments <span class="_"> </span>and <span class="_"> </span>under <span class="_"> </span>older <span class="_ _66"> </span>UNIX <span class="_"> </span>systems), <span class="_ _66"> </span>it <span class="_ _66"> </span>will <span class="_"> </span>provide <span class="_"> </span>semantics</div><div class="t m0 x32 h54 y9fc ff19 fs2c fc0 sc0 ls0 ws0">differ<span class="_ _0"></span>ent <span class="_ _53"> </span>from <span class="_ _e"> </span>the <span class="_ _e"> </span>POSIX.1<span class="_ _4b"> </span><span class="ff1a">sigaction<span class="_ _4b"> </span></span>function. <span class="_ _59"> </span>W<span class="_ _6"></span>e’ll <span class="_ _e"> </span>have <span class="_ _e"> </span>more<span class="_ _4b"> </span>to<span class="_ _4b"> </span>say <span class="_ _e"> </span>about <span class="_ _e"> </span>the</div><div class="t m0 x32 h54 y9fd ff1a fs2c fc0 sc0 ls0 ws0">signal<span class="_ _80"> </span><span class="ff19">function in Chapter 10.</span></div></div><div class="pi" data-data='{"ctm":[2.100000,0.000000,0.000000,2.100000,-115.668004,-156.491993]}'></div></div>
