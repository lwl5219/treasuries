<div id="pf3aa" class="pf w4 h1f" data-page-no="3aa"><div class="pc pc3aa w4 h1f"><img class="bi x0 y0 w3 h4" alt="" src="bg3aa.png"/><div class="t m0 x31 h2 y8e ff1 fs0 fc0 sc0 ls0 ws0"><span class="fc1 sc0">ptg10805159</span></div><div class="t m0 x35 h24 ya4 ff18 fs0 fc0 sc0 ls0 ws0">904<span class="_ _1b"> </span><span class="ff19">Miscellaneous <span class="_"> </span>Source <span class="_"> </span>Code<span class="_ _2c"> </span>Appendix <span class="_"> </span>B</span></div><div class="t m0 x32 h57 y425 ff1a fs2d fc0 sc0 ls0 ws0">static void</div><div class="t m0 x32 h57 y426 ff1a fs2d fc0 sc0 ls0 ws0">log_doit(int errnoflag, int error, int priority, const char *fmt,</div><div class="t m0 x175 h57 y800 ff1a fs2d fc0 sc0 ls0 ws0">va_list ap)</div><div class="t m0 x32 h57 y801 ff1a fs2d fc0 sc0 ls0 ws0">{</div><div class="t m0 x8a h57 y802 ff1a fs2d fc0 sc0 ls0 ws0">char <span class="_ _68"> </span>buf[MAXLINE];</div><div class="t m0 x8a h57 yaeb ff1a fs2d fc0 sc0 ls0 ws0">vsnprintf(buf, MAXLINE-1, fmt, ap);</div><div class="t m0 x8a h57 y16f9 ff1a fs2d fc0 sc0 ls0 ws0">if (errnoflag)</div><div class="t m0 x9d h57 y16df ff1a fs2d fc0 sc0 ls0 ws0">snprintf(buf+strlen(buf), MAXLINE-strlen(buf)-1, &quot;: %s&quot;,</div><div class="t m0 x76 h57 y16e0 ff1a fs2d fc0 sc0 ls0 ws0">strerror(error));</div><div class="t m0 x8a h57 y16e1 ff1a fs2d fc0 sc0 ls0 ws0">strcat(buf, &quot;\n&quot;);</div><div class="t m0 x8a h57 y16e2 ff1a fs2d fc0 sc0 ls0 ws0">if (log_to_stderr) {</div><div class="t m0 x9d h57 y16e3 ff1a fs2d fc0 sc0 ls0 ws0">fflush(stdout);</div><div class="t m0 x9d h57 y16e4 ff1a fs2d fc0 sc0 ls0 ws0">fputs(buf, stderr);</div><div class="t m0 x9d h57 y16e5 ff1a fs2d fc0 sc0 ls0 ws0">fflush(stderr);</div><div class="t m0 x8a h57 y16e6 ff1a fs2d fc0 sc0 ls15c ws0">}e<span class="_ _1d"></span><span class="ls0">lse {</span></div><div class="t m0 x9d h57 y16e7 ff1a fs2d fc0 sc0 ls0 ws0">syslog(priority, &quot;%s&quot;, buf);</div><div class="t m0 x8a h57 y16e8 ff1a fs2d fc0 sc0 ls0 ws0">}</div><div class="t m0 x32 h57 y16e9 ff1a fs2d fc0 sc0 ls0 ws0">}</div><div class="t m0 x123 h2d y5fce ff18 fs10 fc0 sc0 ls0 ws0">Figure B.4<span class="_ _5a"> </span><span class="ff19">Error functions for daemons</span></div></div><div class="pi" data-data='{"ctm":[2.100000,0.000000,0.000000,2.100000,-115.668004,-156.491993]}'></div></div>
