<div id="pf2d8" class="pf w4 h1f" data-page-no="2d8"><div class="pc pc2d8 w4 h1f"><img class="bi x0 y0 w3 h4" alt="" src="bg2d8.png"/><div class="t m0 x31 h2 y8e ff1 fs0 fc0 sc0 ls0 ws0"><span class="fc1 sc0">ptg10805159</span></div><div class="t m0 x35 h24 ya4 ff18 fs0 fc0 sc0 ls0 ws0">694<span class="_ _1b"> </span><span class="ff19 ls719">Te<span class="_ _9"></span><span class="ls0">rminal <span class="_"> </span>I/O<span class="_ _eb"> </span>Chapter <span class="_"> </span>18</span></span></div><div class="t m0 x3f h26 y12f ff19 fsf fc0 sc0 ls0 ws0">The<span class="_ _5a"> </span><span class="ff1a">tcsendbreak<span class="_"> </span></span>function <span class="_ _45"> </span>transmits <span class="_ _45"> </span>a <span class="_ _45"> </span>continuous <span class="_ _45"> </span>str<span class="_ _0"></span>eam <span class="_ _45"> </span>of <span class="_ _45"> </span>zer<span class="ls368">ob<span class="_ _26"></span><span class="ls0">its <span class="_ _45"> </span>for <span class="_ _45"> </span>a</span></span></div><div class="t m0 x32 h2b y130 ff19 fsf fc0 sc0 ls0 ws0">speciﬁed <span class="_ _42"> </span>duration.<span class="_ _54"> </span>If <span class="_ _42"> </span>the<span class="_ _44"> </span><span class="ff1b">duration<span class="_ _35"> </span></span>argument <span class="_ _42"> </span>is <span class="_ _42"> </span>0, <span class="_ _42"> </span>the <span class="_ _42"> </span>transmission <span class="_ _42"> </span>lasts <span class="_ _42"> </span>between <span class="_ _42"> </span>0.25</div><div class="t m0 x32 h2b y131 ff19 fsf fc0 sc0 ls0 ws0">second <span class="_ _23"></span>and <span class="_ _23"></span>0.5 <span class="_ _23"> </span>second.<span class="_ _51"> </span>POSIX.1 <span class="_ _23"> </span>speciﬁes <span class="_ _23"> </span>that <span class="_ _23"> </span>if<span class="_ _35"> </span><span class="ff1b">duration<span class="_ _35"> </span></span>is <span class="_ _23"> </span>nonzero, <span class="_ _23"></span>the <span class="_ _23"></span>transmission</div><div class="t m0 x32 h2a y132 ff19 fsf fc0 sc0 ls0 ws0">time is implementation dependent.</div><div class="t m0 x35 h53 y50d7 ff16 fs2b fc0 sc0 ls0 ws0">18.9 <span class="_ _93"> </span>T<span class="_ _6"></span>erminal <span class="_"> </span>Identiﬁcation</div><div class="t m0 x32 h2a y2916 ff19 fsf fc0 sc0 ls0 ws0">Historically<span class="_ _4"></span><span class="ls880">,t<span class="_ _8"></span><span class="ls0">he <span class="_ _9"></span>name <span class="_ _3"></span>of <span class="_ _9"></span>the <span class="_ _3"></span>controlling <span class="_ _3"></span>terminal <span class="_ _9"></span>in <span class="_ _9"></span>most <span class="_ _3"></span>versions <span class="_ _9"></span>of <span class="_ _3"></span>the <span class="_ _9"></span>UNIX <span class="_ _3"></span>System</span></span></div><div class="t m0 x32 h26 y50d8 ff19 fsf fc0 sc0 ls0 ws0">has been<span class="_"> </span><span class="ff1a">/dev/tty</span><span class="ls648">.P<span class="_ _4a"></span><span class="ls0">OSIX.1 provides a runtime function that we can call to determine</span></span></div><div class="t m0 x32 h2a y50d9 ff19 fsf fc0 sc0 ls0 ws0">the name of the controlling terminal.</div><div class="t m0 x3f h57 y50da ff1a fs2d fc0 sc0 ls0 ws0">#include &lt;stdio.h&gt;</div><div class="t m0 x3f h57 y50db ff1a fs2d fc0 sc0 ls0 ws0">char *ctermid(char *<span class="ff1b">ptr</span>);</div><div class="t m0 x1d8 h5f y50dc ff19 fs2d fc0 sc0 ls0 ws0">Returns: pointer to name of controlling terminal</div><div class="t m0 xeb h5f y50dd ff19 fs2d fc0 sc0 ls0 ws0">on success, pointer to empty string on error</div><div class="t m0 x32 h4d y50de ff19 fs26 fc0 sc0 ls0 ws0">If<span class="_"> </span><span class="ff1b">ptr<span class="_ _66"> </span></span>is <span class="_ _2"></span>non-null, it <span class="_ _2"></span>is assumed <span class="_ _2"></span>to <span class="_ _2"></span>point to <span class="_ _2"></span>an array <span class="_ _2"></span>of at <span class="_ _2"></span>least<span class="_"> </span><span class="ff1a">L_ctermid<span class="_ _66"> </span></span>bytes, <span class="_ _2"></span>and <span class="_ _2"></span>the</div><div class="t m0 x32 h49 y50df ff19 fs26 fc0 sc0 ls0 ws0">name <span class="_ _53"> </span>of <span class="_ _e"> </span>the <span class="_ _e"> </span>controlling <span class="_ _53"> </span>terminal <span class="_ _53"> </span>of <span class="_ _e"> </span>the <span class="_ _e"> </span>process <span class="_ _53"> </span>is <span class="_ _53"> </span>stored <span class="_ _53"> </span>in <span class="_ _e"> </span>the <span class="_ _e"> </span>array<span class="_ _4"></span><span class="ls14ea">.T<span class="_ _52"></span><span class="ls0">he <span class="_ _53"> </span>constant</span></span></div><div class="t m0 x32 h4d y50e0 ff1a fs26 fc0 sc0 ls0 ws0">L_ctermid<span class="_ _44"> </span><span class="ff19">is <span class="_ _53"> </span>deﬁned <span class="_ _53"> </span>in<span class="_ _44"> </span></span>&lt;stdio.h&gt;<span class="ff19 lsff0">.I<span class="_ _52"></span><span class="ls0">f<span class="_ _4b"> </span><span class="ff1b">ptr<span class="_ _44"> </span></span>is <span class="_ _53"> </span>a <span class="_ _53"> </span>null <span class="_ _53"> </span>pointer<span class="_ _6"></span><span class="lsff1">,t<span class="_ _43"></span><span class="ls0">he <span class="_ _42"> </span>function <span class="_ _53"> </span>allocates</span></span></span></span></div><div class="t m0 x32 h49 y50e1 ff19 fs26 fc0 sc0 lscc ws0">ro<span class="ls0">om <span class="_ _53"> </span>for <span class="_ _53"> </span>the <span class="_ _53"> </span>array <span class="_ _53"> </span>(usually <span class="_ _53"> </span>as <span class="_ _53"> </span>a <span class="_ _53"> </span>static <span class="_ _53"> </span>variable).<span class="_ _65"> </span>Again, <span class="_ _53"> </span>the <span class="_ _53"> </span>name <span class="_ _42"> </span>of <span class="_ _53"> </span>the <span class="_ _53"> </span>controlling</span></div><div class="t m0 x32 h49 y50e2 ff19 fs26 fc0 sc0 ls0 ws0">terminal of the process is stor<span class="_ _0"></span>ed in the array<span class="_ _4"></span>.</div><div class="t m0 x3f h49 y50e3 ff19 fs26 fc0 sc0 ls0 ws0">In <span class="_"> </span>both <span class="_"> </span>cases, <span class="_ _e"> </span>the <span class="_"> </span>starting <span class="_"> </span>address <span class="_ _e"> </span>of <span class="_"> </span>the <span class="_"> </span>array <span class="_"> </span>is <span class="_ _e"> </span>returned <span class="_"> </span>as <span class="_"> </span>the <span class="_ _e"> </span>value <span class="_"> </span>of <span class="_"> </span>the</div><div class="t m0 x32 h4d y50e4 ff19 fs26 fc0 sc0 ls0 ws0">function. <span class="_ _59"> </span>Since<span class="_ _46"> </span>most <span class="_"> </span>UNIX <span class="_"> </span>systems <span class="_"> </span>use<span class="_ _46"> </span><span class="ff1a">/dev/tty<span class="_ _46"> </span></span>as <span class="_"> </span>the <span class="_"> </span>name <span class="_"> </span>of <span class="_"> </span>the <span class="_"> </span>controlling</div><div class="t m0 x32 h49 y50e5 ff19 fs26 fc0 sc0 ls0 ws0">terminal, this function is intended to aid portability to other operating systems.</div><div class="t m0 x76 h5e y50e6 ff19 fs10 fc0 sc0 ls0 ws0">All four platforms described in this text return the string<span class="_"> </span><span class="ff1a">/dev/tty<span class="_ _53"> </span></span>when we call<span class="_"> </span><span class="ff1a">ctermid</span>.</div><div class="t m0 x35 h4d y50e7 ff16 fs26 fc0 sc0 ls0 ws0">Example <span class="_ _84"></span>—<span class="_ _9"></span><span class="ff1f">ctermid<span class="_ _66"> </span></span>Function</div><div class="t m0 x32 h4d y50e8 ff19 fs26 fc0 sc0 ls0 ws0">Figur<span class="lsd3">e1<span class="_ _4f"></span><span class="ls0">8.12 shows an implementation of the POSIX.1<span class="_"> </span><span class="ff1a">ctermid<span class="_ _66"> </span></span>function.</span></span></div><div class="t m0 x32 h5d y50e9 ff1a fs2f fc0 sc0 ls0 ws0">#include <span class="_ _68"> </span>&lt;stdio.h&gt;</div><div class="t m0 x32 h5d y50ea ff1a fs2f fc0 sc0 ls0 ws0">#include <span class="_ _68"> </span>&lt;string.h&gt;</div><div class="t m0 x32 h5d y50eb ff1a fs2f fc0 sc0 ls0 ws0">static char ctermid_name[L_ctermid];</div><div class="t m0 x32 h5d y50ec ff1a fs2f fc0 sc0 ls0 ws0">char *</div><div class="t m0 x32 h5d y50ed ff1a fs2f fc0 sc0 ls0 ws0">ctermid(char *str)</div><div class="t m0 x32 h5d y50ee ff1a fs2f fc0 sc0 ls0 ws0">{</div><div class="t m0 x8a h5d y50ef ff1a fs2f fc0 sc0 ls0 ws0">if (str == NULL)</div><div class="t m0 x9d h5d y50f0 ff1a fs2f fc0 sc0 ls0 ws0">str = ctermid_name;</div><div class="t m0 x8a h5d y50f1 ff1a fs2f fc0 sc0 ls0 ws0">return(strcpy(str, &quot;/dev/tty&quot;));<span class="_ _15"> </span>/* strcpy() returns str */</div><div class="t m0 x32 h5d y50f2 ff1a fs2f fc0 sc0 ls0 ws0">}</div><div class="t m0 x234 h6d y50f3 ff18 fs12 fc0 sc0 ls0 ws0">Figure 18.12<span class="_ _5a"> </span><span class="ff19">Implementation of POSIX.1<span class="_"> </span><span class="ff1a">ctermid<span class="_ _e"> </span></span>function</span></div><a class="l" href="#pf13" data-dest-detail='[19,"XYZ",50,757,1]'><div class="d m1" style="border-style:none;position:absolute;left:80.890952px;bottom:1080.048863px;width:166.643508px;height:19.679993px;background-color:rgba(255,255,255,0.000001);"></div></a></div><div class="pi" data-data='{"ctm":[2.100000,0.000000,0.000000,2.100000,-115.668004,-156.491993]}'></div></div>
