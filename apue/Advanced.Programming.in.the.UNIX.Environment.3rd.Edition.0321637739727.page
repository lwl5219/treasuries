<div id="pf2d7" class="pf w4 h1f" data-page-no="2d7"><div class="pc pc2d7 w4 h1f"><img class="bi x0 y0 w3 h4" alt="" src="apue/bg2d7.png"/><div class="t m0 x31 h2 y8e ff1 fs0 fc0 sc0 ls0 ws0"><span class="fc1 sc0">ptg10805159</span></div><div class="t m0 x35 h24 ya4 ff19 fs0 fc0 sc0 ls0 ws0">Section <span class="_"> </span>18.8<span class="_ _1e3"> </span>Line <span class="_"> </span>Control <span class="_"> </span>Functions<span class="_ _1fb"> </span><span class="ff18">693</span></div><div class="t m0 x3f h2a y12f ff19 fsf fc0 sc0 ls0 ws0">The <span class="_ _23"> </span>four <span class="_ _23"> </span>baud <span class="_ _23"> </span>rate <span class="_ _42"> </span>functions <span class="_ _23"> </span>exist <span class="_ _23"> </span>to <span class="_ _23"> </span>insulate <span class="_ _42"> </span>applications <span class="_ _23"></span>from <span class="_ _23"></span>differ<span class="_ _1"></span>ences <span class="_ _42"> </span>in <span class="_ _23"></span>the</div><div class="t m0 x32 h26 y130 ff19 fsf fc0 sc0 ls0 ws0">way <span class="_ _23"> </span>that <span class="_ _23"> </span>implementations <span class="_ _23"> </span>represent <span class="_ _23"></span>baud <span class="_ _23"></span>rates <span class="_ _23"> </span>in <span class="_ _23"> </span>the<span class="_ _35"> </span><span class="ff1a">termios<span class="_ _35"> </span></span>structure. <span class="_ _45"> </span>Linux<span class="_ _35"> </span>and</div><div class="t m0 x32 h2a y131 ff19 fsf fc0 sc0 ls0 ws0">BSD-derived <span class="_ _42"> </span>platforms <span class="_ _42"> </span>tend <span class="_ _42"> </span>to <span class="_ _42"> </span>stor<span class="ls7e6">eb<span class="_ _43"></span><span class="ls0">aud <span class="_ _42"> </span>rates <span class="_ _42"> </span>as <span class="_ _42"> </span>numeric <span class="_ _42"> </span>values <span class="_ _42"> </span>equal <span class="_ _42"> </span>to <span class="_ _53"> </span>the <span class="_ _42"> </span>rates</span></span></div><div class="t m0 x32 h2a y132 ff19 fsf fc0 sc0 ls0 ws0">(i.e., 9,600 baud <span class="_ _2"></span>is stored as the value <span class="_ _2"></span>9,600), whereas System V–derived platforms <span class="_ _2"></span>(such</div><div class="t m0 x32 h2a y133 ff19 fsf fc0 sc0 ls0 ws0">as Solaris) <span class="_ _2"></span>tend <span class="_ _2"></span>to <span class="_ _2"></span>encode <span class="_ _2"></span>the <span class="_ _2"></span>baud <span class="_ _2"></span>rate <span class="_ _2"></span>in <span class="_ _2"></span>a <span class="_ _2"></span>bitmask.<span class="_ _61"> </span>The <span class="_ _2"></span>speed <span class="_ _2"></span>values <span class="_ _2"></span>we <span class="_ _2"></span>get <span class="_ _2"></span>from the</div><div class="t m0 x32 h26 y134 ff1a fsf fc0 sc0 ls0 ws0">cfget<span class="_ _65"> </span><span class="ff19">functions <span class="_ _4b"> </span>and <span class="_ _4b"> </span>pass <span class="_ _4b"> </span>to <span class="_ _4b"> </span>the<span class="_ _65"> </span></span>cfset<span class="_ _65"> </span><span class="ff19">functions <span class="_ _4b"> </span>ar<span class="ls14e6">eu<span class="_ _64"></span><span class="ls0">ntranslated <span class="_ _4b"> </span>from <span class="_ _4b"> </span>their</span></span></span></div><div class="t m0 x32 h26 y135 ff19 fsf fc0 sc0 ls45 ws0">re<span class="ls0">presentation as they ar<span class="ls44">es<span class="_ _4f"></span><span class="ls0">tored in the<span class="_"> </span><span class="ff1a">termios<span class="_ _80"> </span></span>structure.</span></span></span></div><div class="t m0 x35 h53 y2501 ff16 fs2b fc0 sc0 ls0 ws0">18.8 <span class="_ _93"> </span>Line<span class="_ _54"> </span>Control <span class="_"> </span>Functions</div><div class="t m0 x32 h2a y2a6b ff19 fsf fc0 sc0 ls0 ws0">The <span class="_ _23"> </span>following <span class="_ _42"> </span>four <span class="_ _42"> </span>functions <span class="_ _23"> </span>provide <span class="_ _23"> </span>line <span class="_ _42"> </span>control <span class="_ _23"> </span>capability <span class="_ _42"> </span>for <span class="_ _23"> </span>terminal <span class="_ _42"> </span>devices.<span class="_ _51"> </span>All</div><div class="t m0 x32 h26 y50bf ff19 fsf fc0 sc0 ls0 ws0">four <span class="_ _3"></span>requir<span class="_ _0"></span><span class="ls14e7">et<span class="_ _8"></span><span class="ls0">hat<span class="_ _47"> </span><span class="ff1b">fd<span class="_ _45"> </span></span><span class="ls45">re</span>fer <span class="_ _3"></span>to <span class="_ _3"></span>a <span class="_ _9"></span>terminal <span class="_ _3"></span>device; <span class="_ _3"></span>otherwise,<span class="_ _47"> </span><span class="ff20">−</span>1<span class="_ _45"> </span>is<span class="_ _47"> </span>returned <span class="_ _2"></span>with<span class="_ _45"> </span><span class="ff1a">errno<span class="_ _47"> </span></span>set</span></span></div><div class="t m0 x32 h26 y50c0 ff19 fsf fc0 sc0 ls0 ws0">to<span class="_"> </span><span class="ff1a">ENOTTY</span>.</div><div class="t m0 x3f h57 y50c1 ff1a fs2d fc0 sc0 ls0 ws0">#include &lt;termios.h&gt;</div><div class="t m0 x3f h57 y50c2 ff1a fs2d fc0 sc0 ls0 ws0">int tcdrain(int<span class="_"> </span><span class="ff1b">fd</span>);</div><div class="t m0 x3f h57 y50c3 ff1a fs2d fc0 sc0 ls0 ws0">int tcflow(int<span class="_"> </span><span class="ff1b">fd</span><span class="ls15c">,i<span class="_ _1d"></span><span class="ls0">nt<span class="_"> </span><span class="ff1b">action</span>);</span></span></div><div class="t m0 x3f h57 y50c4 ff1a fs2d fc0 sc0 ls0 ws0">int tcflush(int<span class="_"> </span><span class="ff1b">fd</span><span class="ls15c">,i<span class="_ _1d"></span><span class="ls0">nt<span class="_"> </span><span class="ff1b">queue</span>);</span></span></div><div class="t m0 x3f h57 y50c5 ff1a fs2d fc0 sc0 ls0 ws0">int tcsendbreak(int<span class="_"> </span><span class="ff1b">fd</span><span class="ls15c">,i<span class="_ _1d"></span><span class="ls0">nt<span class="_"> </span><span class="ff1b">duration</span>);</span></span></div><div class="t m0 x17b h5f y50c6 ff19 fs2d fc0 sc0 ls0 ws0">All four return: 0 if OK,<span class="_"> </span><span class="ff20">−</span>1<span class="_"> </span>on<span class="_"> </span>err<span class="_ _0"></span>or</div><div class="t m0 x3f h4d y50c7 ff19 fs26 fc0 sc0 ls0 ws0">The<span class="_ _66"> </span><span class="ff1a">tcdrain<span class="_ _47"> </span></span>function <span class="_ _2"></span>waits <span class="_ _2"></span>for <span class="_ _2"></span>all <span class="_ _2"></span>output <span class="_ _2"></span>to <span class="_ _2"></span>be <span class="_ _2"></span>transmitted.<span class="_ _61"> </span>The<span class="_ _47"> </span><span class="ff1a">tcflow<span class="_ _66"> </span></span>function</div><div class="t m0 x32 h4a y50c8 ff19 fs26 fc0 sc0 ls0 ws0">gives <span class="_ _2"></span>us <span class="_ _3"></span>control <span class="_ _2"></span>over <span class="_ _3"></span>both <span class="_ _3"></span>input <span class="_ _2"></span>and <span class="_ _3"></span>output <span class="_ _3"></span>ﬂow <span class="_ _3"></span>control. <span class="_ _66"> </span>The<span class="_ _47"> </span><span class="ff1b">action<span class="_ _47"> </span></span>argument <span class="_ _2"></span>must <span class="_ _3"></span>be</div><div class="t m0 x32 h49 y50c9 ff19 fs26 fc0 sc0 ls0 ws0">one of the following four values:</div><div class="t m0 x3f h4d y50ca ff1a fs26 fc0 sc0 ls0 ws0">TCOOFF<span class="_ _5c"> </span><span class="ff19">Output is suspended.</span></div><div class="t m0 x3f h4d y50cb ff1a fs26 fc0 sc0 ls0 ws0">TCOON<span class="_ _2b"> </span><span class="ff19">Output that was previously suspended is r<span class="_ _0"></span>estarted.</span></div><div class="t m0 x3f h4d y50cc ff1a fs26 fc0 sc0 ls0 ws0">TCIOFF<span class="_ _5c"> </span><span class="ff19">The <span class="_ _9"></span>system <span class="_ _3"></span>transmits <span class="_ _9"></span>a <span class="_ _3"></span>STOP <span class="_ _3"></span>character<span class="_ _1"></span><span class="ls14e8">,w<span class="_ _b"></span><span class="ls0">hich <span class="_ _9"></span>should <span class="_ _3"></span>cause <span class="_ _9"></span>the <span class="_ _3"></span>terminal</span></span></span></div><div class="t m0 x1d h49 y50cd ff19 fs26 fc0 sc0 ls0 ws0">device to stop sending data.</div><div class="t m0 x3f h4d y50ce ff1a fs26 fc0 sc0 ls0 ws0">TCION<span class="_ _2b"> </span><span class="ff19">The system <span class="_ _2"></span>transmits a ST<span class="_ _1"></span>AR<span class="_ _0"></span><span class="lsf2d">Tc<span class="_ _d"></span><span class="ls0">haracter<span class="_ _6"></span><span class="lsf2d">,w<span class="_ _d"></span><span class="ls0">hich <span class="_ _2"></span>should cause the <span class="_ _2"></span>terminal</span></span></span></span></span></div><div class="t m0 x1d h49 y50cf ff19 fs26 fc0 sc0 ls0 ws0">device to resume sending data.</div><div class="t m0 x3f h4d y50d0 ff19 fs26 fc0 sc0 ls0 ws0">The<span class="_ _47"> </span><span class="ff1a">tcflush<span class="_ _45"> </span></span>function <span class="_ _3"></span>lets <span class="_ _3"></span>us <span class="_ _9"></span>ﬂush <span class="_ _3"></span>(throw <span class="_ _3"></span>away) <span class="_ _3"></span>either <span class="_ _9"></span>the <span class="_ _3"></span>input <span class="_ _9"></span>buffer <span class="_ _2"></span>(data <span class="_ _9"></span>that</div><div class="t m0 x32 h49 y50d1 ff19 fs26 fc0 sc0 ls0 ws0">has <span class="_ _3"></span>been <span class="_ _3"></span>received <span class="_ _2"></span>by <span class="_ _3"></span>the <span class="_ _3"></span>terminal <span class="_ _9"></span>driver<span class="_ _6"></span><span class="ls14e9">,w<span class="_ _8"></span><span class="ls0">hich <span class="_ _3"></span>we <span class="_ _9"></span>have <span class="_ _3"></span>not <span class="_ _3"></span>read) <span class="_ _2"></span>or <span class="_ _3"></span>the <span class="_ _3"></span>output <span class="_ _3"></span>buffer</span></span></div><div class="t m0 x32 h4a y50d2 ff19 fs26 fc0 sc0 ls0 ws0">(data <span class="_ _9"></span>that <span class="_ _23"></span>we <span class="_ _23"></span>have <span class="_ _9"></span>written, <span class="_ _23"></span>which <span class="_ _9"></span>has <span class="_ _23"></span>not <span class="_ _23"></span>yet <span class="_ _9"></span>been <span class="_ _23"></span>transmitted).<span class="_ _5a"> </span>The<span class="_ _35"> </span><span class="ff1b">queue<span class="_ _45"> </span></span>argument</div><div class="t m0 x32 h49 y50d3 ff19 fs26 fc0 sc0 ls0 ws0">must be one of the following three constants:</div><div class="t m0 x3f h4d y50d4 ff1a fs26 fc0 sc0 ls0 ws0">TCIFLUSH<span class="_ _2b"> </span><span class="ff19">The input queue is ﬂushed.</span></div><div class="t m0 x3f h4d y50d5 ff1a fs26 fc0 sc0 ls0 ws0">TCOFLUSH<span class="_ _2b"> </span><span class="ff19">The output queue is ﬂushed.</span></div><div class="t m0 x3f h4d y50d6 ff1a fs26 fc0 sc0 ls0 ws0">TCIOFLUSH<span class="_ _5c"> </span><span class="ff19">Both the input and the output queues ar<span class="lsd3">eﬂ<span class="_ _d"></span><span class="ls0">ushed.</span></span></span></div><a class="l" href="#pf13" data-dest-detail='[19,"XYZ",50,757,1]'><div class="d m1" style="border-style:none;position:absolute;left:80.891785px;bottom:1009.488916px;width:173.771103px;height:19.679993px;background-color:rgba(255,255,255,0.000001);"></div></a></div><div class="pi" data-data='{"ctm":[2.100000,0.000000,0.000000,2.100000,-115.668004,-156.491993]}'></div></div>
