<div id="pf153" class="pf w4 h1f" data-page-no="153"><div class="pc pc153 w4 h1f"><img class="bi x0 y0 w3 h4" alt="" src="bg153.png"/><div class="t m0 x31 h2 y8e ff1 fs0 fc0 sc0 ls0 ws0"><span class="fc1 sc0">ptg10805159</span></div><div class="t m0 x35 h24 ya4 ff19 fs0 fc0 sc0 ls0 ws0">Section <span class="_"> </span>9.9<span class="_ _2c"> </span>Shell <span class="_"> </span>Execution <span class="_"> </span>of <span class="_"> </span>Programs<span class="_ _1b"> </span><span class="ff18">305</span></div><div class="t m0 x32 h2a y12f ff19 fsf fc0 sc0 ls0 ws0">of that <span class="_ _2"></span>name.<span class="_ _61"> </span>The next <span class="_ _2"></span>line <span class="_ _2"></span>we enter <span class="_ _2"></span>to <span class="_ _2"></span>the <span class="_ _2"></span>shell is <span class="_ _2"></span>taken <span class="_ _2"></span>as the <span class="_ _2"></span>password, and <span class="_ _2"></span>the <span class="_ _2"></span>ﬁle <span class="_ _2"></span>is</div><div class="t m0 x32 h2a y130 ff19 fsf fc0 sc0 ls0 ws0">not <span class="_ _2"></span>encrypted <span class="_ _2"></span>correctly<span class="_ _4"></span><span class="ls308">,s<span class="_ _4f"></span><span class="ls0">ending <span class="_ _2"></span>junk <span class="_ _2"></span>to <span class="_ _2"></span>the <span class="_ _2"></span>printer<span class="_ _1"></span><span class="lsb4e">.H<span class="_ _5b"></span><span class="ls0">ere<span class="_"> </span>we<span class="_ _66"> </span>h<span class="_ _2"></span>ave <span class="_ _2"></span>two <span class="_ _2"></span>processes trying</span></span></span></span></div><div class="t m0 x32 h2a y131 ff19 fsf fc0 sc0 ls0 ws0">to <span class="_ _9"></span>read <span class="_ _9"></span>from <span class="_ _9"></span>the <span class="_ _9"></span>same <span class="_ _9"></span>device <span class="_ _23"></span>at <span class="_ _9"></span>the <span class="_ _9"></span>same <span class="_ _23"></span>time, <span class="_ _9"></span>and <span class="_ _9"></span>the <span class="_ _23"></span>r<span class="_ _0"></span>esult <span class="_ _9"></span>depends <span class="_ _23"></span>on <span class="_ _9"></span>the <span class="_ _9"></span>system.</div><div class="t m0 x32 h2a y132 ff19 fsf fc0 sc0 ls0 ws0">Job <span class="_"> </span>control, <span class="_"> </span>as <span class="_"> </span>we <span class="_"> </span>described <span class="_ _66"> </span>earlier<span class="_ _1"></span><span class="lsb4f">,h<span class="_ _4a"></span><span class="ls0">andles <span class="_"> </span>this <span class="_"> </span>multiplexing <span class="_"> </span>of <span class="_ _66"> </span>a <span class="_ _66"> </span>single <span class="_"> </span>terminal</span></span></div><div class="t m0 x32 h2a y133 ff19 fsf fc0 sc0 ls0 ws0">between multiple processes in a better fashion.</div><div class="t m0 x3f h2a y134 ff19 fsf fc0 sc0 ls0 ws0">Returning <span class="_ _45"> </span>to <span class="_ _45"> </span>our <span class="_ _45"> </span>Bourne <span class="_ _45"> </span>shell <span class="_ _45"> </span>example, <span class="_ _45"> </span>if <span class="_ _45"> </span>we <span class="_ _47"> </span>execute <span class="_ _45"> </span>three <span class="_ _45"> </span>processes <span class="_ _47"> </span>in <span class="_ _45"> </span>the</div><div class="t m0 x32 h2a y135 ff19 fsf fc0 sc0 ls0 ws0">pipeline, we can examine the process contr<span class="_ _0"></span>ol used by this shell:</div><div class="t m0 x3f h57 y2766 ff1a fs2d fc0 sc0 ls0 ws0">ps -o pid,ppid,pgid,sid,comm | cat1 | cat2</div><div class="t m0 x32 h2a y2767 ff19 fsf fc0 sc0 ls0 ws0">This pipeline generates the following output:</div><div class="t m0 xf4 h57 y2768 ff1a fs2d fc0 sc0 ls0 ws0">PID <span class="_"> </span>PPID <span class="_"> </span>PGID<span class="_ _68"> </span>SID COMMAND</div><div class="t m0 xf4 h57 y2769 ff1a fs2d fc0 sc0 ls0 ws0">949 <span class="_ _d9"> </span>947 <span class="_ _3a"> </span>949 <span class="_ _3a"> </span>949<span class="_"> </span>sh</div><div class="t m0 x90 h57 y276a ff1a fs2d fc0 sc0 ls0 ws0">1988 <span class="_ _d9"> </span>949 <span class="_ _3a"> </span>949 <span class="_ _3a"> </span>949<span class="_"> </span>cat2</div><div class="t m0 x90 h57 y276b ff1a fs2d fc0 sc0 ls0 ws0">1989 <span class="_"> </span>1988<span class="_ _68"> </span>949 <span class="_ _3a"> </span>949<span class="_"> </span>ps</div><div class="t m0 x90 h57 y276c ff1a fs2d fc0 sc0 ls0 ws0">1990 <span class="_"> </span>1988<span class="_ _68"> </span>949 <span class="_ _3a"> </span>949<span class="_"> </span>cat1</div><div class="t m0 x76 h51 y276d ff19 fs2a fc0 sc0 ls0 ws0">Don’t <span class="_ _23"> </span>be <span class="_ _42"> </span>alarmed <span class="_ _23"> </span>if <span class="_ _42"> </span>the <span class="_ _23"> </span>output <span class="_ _42"> </span>on <span class="_ _23"> </span>your <span class="_ _42"> </span>system <span class="_ _23"> </span>doesn’t <span class="_ _42"> </span>show <span class="_ _23"> </span>the <span class="_ _23"> </span>proper <span class="_ _42"> </span>command <span class="_ _23"> </span>names.</div><div class="t m0 x76 h51 y276e ff19 fs2a fc0 sc0 ls0 ws0">Sometimes you might get results such as</div><div class="t m0 x144 h52 y276f ff1a fs2a fc0 sc0 ls0 ws0">PID <span class="_"> </span>PPID <span class="_"> </span>PGID<span class="_ _d8"> </span>SID COMMAND</div><div class="t m0 x144 h52 y2770 ff1a fs2a fc0 sc0 ls0 ws0">949 <span class="_ _7f"> </span>947 <span class="_ _93"> </span>949 <span class="_ _7f"> </span>949<span class="_"> </span>sh</div><div class="t m0 x143 h52 y2771 ff1a fs2a fc0 sc0 ls0 ws0">1831 <span class="_ _7f"> </span>949 <span class="_ _93"> </span>949 <span class="_ _7f"> </span>949<span class="_"> </span>sh</div><div class="t m0 x143 h52 y2772 ff1a fs2a fc0 sc0 ls0 ws0">1832 <span class="_"> </span>1831<span class="_ _d8"> </span>949 <span class="_ _7f"> </span>949<span class="_"> </span>ps</div><div class="t m0 x143 h52 y2773 ff1a fs2a fc0 sc0 ls0 ws0">1833 <span class="_"> </span>1831<span class="_ _d8"> </span>949 <span class="_ _7f"> </span>949<span class="_"> </span>sh</div><div class="t m0 x76 h52 y2774 ff19 fs2a fc0 sc0 ls0 ws0">What’s <span class="_ _23"> </span>happening <span class="_ _9"> </span>here<span class="_ _47"> </span>is<span class="_ _45"> </span>that <span class="_ _9"> </span>the<span class="_ _45"> </span><span class="ff1a">ps<span class="_ _47"> </span></span>process <span class="_ _9"> </span>is <span class="_ _23"> </span>racing <span class="_ _23"> </span>with <span class="_ _23"> </span>the <span class="_ _23"> </span>shell, <span class="_ _9"> </span>which <span class="_ _23"> </span>is <span class="_ _23"> </span>forking <span class="_ _23"> </span>and</div><div class="t m0 x76 h52 y2775 ff19 fs2a fc0 sc0 ls0 ws0">executing <span class="_ _23"> </span>the<span class="_ _45"> </span><span class="ff1a">cat<span class="_ _45"> </span></span>commands. <span class="_ _47"> </span>In<span class="_ _45"> </span>this <span class="_ _23"> </span>case, <span class="_ _42"> </span>the <span class="_ _23"> </span>shell <span class="_ _23"> </span>hasn’t <span class="_ _23"> </span>yet <span class="_ _42"> </span>completed <span class="_ _23"> </span>the <span class="_ _23"> </span>call <span class="_ _23"> </span>to<span class="_ _45"> </span><span class="ff1a">exec</span></div><div class="t m0 x76 h52 y2776 ff19 fs2a fc0 sc0 ls0 ws0">when<span class="_"> </span><span class="ff1a">ps<span class="_ _53"> </span></span>has obtained the list of processes to print.</div><div class="t m0 x32 h2a y2777 ff19 fsf fc0 sc0 ls0 ws0">Again, the last <span class="_ _2"></span>process in the pipeline <span class="_ _2"></span>is the <span class="_ _2"></span>child of the <span class="_ _2"></span>shell, and <span class="_ _2"></span>all previous processes</div><div class="t m0 x32 h2a y2778 ff19 fsf fc0 sc0 ls0 ws0">in the pipeline ar<span class="ls44">ec<span class="_ _4f"></span><span class="ls0">hildren of the last process. <span class="_"> </span>Figur<span class="_ _0"></span><span class="ls44">e9<span class="_ _d"></span><span class="ls0">.10 shows what is happening.</span></span></span></span></div><div class="t m0 xdf h5e y2779 ff1a fs10 fc0 sc0 ls0 ws0">sh</div><div class="t m0 x6 h2d y277a ff19 fs10 fc0 sc0 ls0 ws0">(</div><div class="t m0 xb9 h2d y277b ff19 fs10 fc0 sc0 ls0 ws0">949</div><div class="t m0 x180 h2d y277a ff19 fs10 fc0 sc0 ls0 ws0">)</div><div class="t m0 x8c h4f y277c ff1a fs11 fc0 sc0 ls0 ws0">fork</div><div class="t m0 xb5 h6d y277d ff1a fs12 fc0 sc0 ls0 ws0">sh</div><div class="t m0 x85 h2f y277e ff19 fs12 fc0 sc0 ls0 ws0">(</div><div class="t m0 xe0 h2f y277f ff19 fs12 fc0 sc0 ls0 ws0">1988</div><div class="t m0 xcc h2f y277e ff19 fs12 fc0 sc0 ls0 ws0">)</div><div class="t m0 x80 h63 y2780 ff1a fs13 fc0 sc0 ls0 ws0">sh</div><div class="t m0 x201 h30 y2781 ff19 fs13 fc0 sc0 ls0 ws0">(</div><div class="t m0 x19d h30 y2782 ff19 fs13 fc0 sc0 ls0 ws0">1989</div><div class="t m0 x1cb h30 y2781 ff19 fs13 fc0 sc0 ls0 ws0">)</div><div class="t m0 x170 h6f y2783 ff1a fs14 fc0 sc0 ls0 ws0">exec</div><div class="t m0 x1b1 h66 y2784 ff1a fs15 fc0 sc0 ls0 ws0">ps</div><div class="t m0 x12 h32 y2785 ff19 fs15 fc0 sc0 ls0 ws0">(</div><div class="t m0 xd3 h32 y2786 ff19 fs15 fc0 sc0 ls0 ws0">1989</div><div class="t m0 x11e h32 y2785 ff19 fs15 fc0 sc0 ls0 ws0">)</div><div class="t m25 x114 h123 y2787 ff1a fs9e fc0 sc0 ls0 ws0">fork</div><div class="t m0 x80 h71 y2788 ff1a fs36 fc0 sc0 ls0 ws0">sh</div><div class="t m0 x201 h83 y2789 ff19 fs36 fc0 sc0 ls0 ws0">(</div><div class="t m0 x19d h83 y278a ff19 fs36 fc0 sc0 ls0 ws0">1990</div><div class="t m0 x1cb h83 y2789 ff19 fs36 fc0 sc0 ls0 ws0">)</div><div class="t m0 x170 hcc y278b ff1a fs17 fc0 sc0 ls0 ws0">exec</div><div class="t m0 x16c hd4 y278c ff1a fs18 fc0 sc0 ls0 ws0">cat1</div><div class="t m0 x12 h35 y278d ff19 fs18 fc0 sc0 ls0 ws0">(</div><div class="t m0 xd3 h35 y278e ff19 fs18 fc0 sc0 ls0 ws0">1990</div><div class="t m0 x11e h35 y278d ff19 fs18 fc0 sc0 ls0 ws0">)</div><div class="t m26 x95 h124 y278f ff1a fs9f fc0 sc0 ls0 ws0">fork</div><div class="t m0 x1a5 h38 y2790 ff19 fs1b fc0 sc0 ls0 ws0">pipeline</div><div class="t m0 xc1 hd7 y2791 ff1a fs1c fc0 sc0 ls0 ws0">cat2</div><div class="t m0 x85 h39 y2792 ff19 fs1c fc0 sc0 ls0 ws0">(</div><div class="t m0 xe0 h39 y2793 ff19 fs1c fc0 sc0 ls0 ws0">1988</div><div class="t m0 xcc h39 y2792 ff19 fs1c fc0 sc0 ls0 ws0">)</div><div class="t m0 x84 hd7 y2794 ff1a fs1c fc0 sc0 ls0 ws0">exec</div><div class="t m27 x109 h125 y2795 ff19 fsa0 fc0 sc0 ls0 ws0">pipeline</div><div class="t m28 x30 h126 y2796 ff19 fsa1 fc0 sc0 ls0 ws0">notiﬁcation to parent</div><div class="t m28 x9f h126 y2797 ff19 fsa1 fc0 sc0 ls0 ws0">on termination</div><div class="t m0 x14 hde y2798 ff18 fs1f fc0 sc0 ls0 ws0">Figure 9.10<span class="_ _5a"> </span><span class="ff19">Processes in the pipeline<span class="_ _66"> </span><span class="ff1a">ps <span class="_ _5"></span>| <span class="_ _84"></span>cat1 <span class="_ _5"></span>| <span class="_ _84"></span>cat2<span class="_ _66"> </span><span class="ff19">when invoked by Bourne shell</span></span></span></div></div><div class="pi" data-data='{"ctm":[2.100000,0.000000,0.000000,2.100000,-115.668004,-156.491993]}'></div></div>
