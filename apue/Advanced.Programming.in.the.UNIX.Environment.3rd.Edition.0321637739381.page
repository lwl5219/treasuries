<div id="pf17d" class="pf w4 h1f" data-page-no="17d"><div class="pc pc17d w4 h1f"><img class="bi x0 y0 w3 h4" alt="" src="bg17d.png"/><div class="t m0 x31 h2 y8e ff1 fs0 fc0 sc0 ls0 ws0"><span class="fc1 sc0">ptg10805159</span></div><div class="t m0 x35 h7a ya4 ff19 fs0 fc0 sc0 ls0 ws0">Section <span class="_"> </span>10.13<span class="_ _274"> </span><span class="ff1a">sigpending<span class="_ _4b"> </span></span>Function<span class="_ _1b"> </span><span class="ff18">347</span></div><div class="t m0 x32 h57 y362 ff1a fs2d fc0 sc0 ls0 ws0">#include &quot;apue.h&quot;</div><div class="t m0 x32 h57 y3c0 ff1a fs2d fc0 sc0 ls0 ws0">#include &lt;errno.h&gt;</div><div class="t m0 x32 h57 y1d78 ff1a fs2d fc0 sc0 ls0 ws0">void</div><div class="t m0 x32 h57 y1d79 ff1a fs2d fc0 sc0 ls0 ws0">pr_mask(const char *str)</div><div class="t m0 x32 h57 y1d7a ff1a fs2d fc0 sc0 ls0 ws0">{</div><div class="t m0 x8a h57 y1d7b ff1a fs2d fc0 sc0 ls0 ws0">sigset_t <span class="_ _68"> </span>sigset;</div><div class="t m0 x8a h57 y2197 ff1a fs2d fc0 sc0 ls0 ws0">int <span class="_ _186"> </span>errno_save;</div><div class="t m0 x8a h57 y1d7c ff1a fs2d fc0 sc0 ls0 ws0">errno_save = errno;<span class="_ _8a"> </span>/* we can be called by signal handlers */</div><div class="t m0 x8a h57 y1d7d ff1a fs2d fc0 sc0 ls0 ws0">if (sigprocmask(0, NULL, &amp;sigset) &lt; 0) {</div><div class="t m0 x9d h57 y1d7e ff1a fs2d fc0 sc0 ls0 ws0">err_ret(&quot;sigprocmask error&quot;);</div><div class="t m0 x8a h57 y1d7f ff1a fs2d fc0 sc0 ls15c ws0">}e<span class="_ _1d"></span><span class="ls0">lse {</span></div><div class="t m0 x9d h57 y1d80 ff1a fs2d fc0 sc0 ls0 ws0">printf(&quot;%s&quot;, str);</div><div class="t m0 x9d h57 y2c5b ff1a fs2d fc0 sc0 ls0 ws0">if (sigismember(&amp;sigset, SIGINT))</div><div class="t m0 x1f h57 y2c5c ff1a fs2d fc0 sc0 ls0 ws0">printf(&quot; SIGINT&quot;);</div><div class="t m0 x9d h57 y2c5d ff1a fs2d fc0 sc0 ls0 ws0">if (sigismember(&amp;sigset, SIGQUIT))</div><div class="t m0 x1f h57 y2c5e ff1a fs2d fc0 sc0 ls0 ws0">printf(&quot; SIGQUIT&quot;);</div><div class="t m0 x9d h57 y2c5f ff1a fs2d fc0 sc0 ls0 ws0">if (sigismember(&amp;sigset, SIGUSR1))</div><div class="t m0 x1f h57 y2c60 ff1a fs2d fc0 sc0 ls0 ws0">printf(&quot; SIGUSR1&quot;);</div><div class="t m0 x9d h57 y2c61 ff1a fs2d fc0 sc0 ls0 ws0">if (sigismember(&amp;sigset, SIGALRM))</div><div class="t m0 x1f h57 y2c62 ff1a fs2d fc0 sc0 ls0 ws0">printf(&quot; SIGALRM&quot;);</div><div class="t m0 x9d h57 y2c63 ff1a fs2d fc0 sc0 ls0 ws0">/* remaining signals can go here<span class="_ _d9"> </span>*/</div><div class="t m0 x9d h57 y2c64 ff1a fs2d fc0 sc0 ls0 ws0">printf(&quot;\n&quot;);</div><div class="t m0 x8a h57 y2c65 ff1a fs2d fc0 sc0 ls0 ws0">}</div><div class="t m0 x8a h57 y2c66 ff1a fs2d fc0 sc0 ls0 ws0">errno = errno_save;<span class="_ _8a"> </span>/* restore errno */</div><div class="t m0 x32 h57 y2c67 ff1a fs2d fc0 sc0 ls0 ws0">}</div><div class="t m0 x18f h2d y2c68 ff18 fs10 fc0 sc0 ls0 ws0">Figure 10.14<span class="_ _5a"> </span><span class="ff19">Print the signal mask for the process</span></div><div class="t m0 x32 h49 y2c69 ff19 fs26 fc0 sc0 ls164 ws0">To <span class="_ _46"> </span>s<span class="_ _23"></span><span class="ls0">ave <span class="_ _45"> </span>space, <span class="_ _45"> </span>we <span class="_ _45"> </span>don’t <span class="_ _45"> </span>test <span class="_ _45"> </span>the <span class="_ _35"> </span>signal <span class="_ _45"> </span>mask <span class="_ _45"> </span>for <span class="_ _45"> </span>every <span class="_ _45"> </span>signal <span class="_ _45"> </span>that <span class="_ _45"> </span>we <span class="_ _45"> </span>listed <span class="_ _35"> </span>in</span></div><div class="t m0 x32 h49 y2c6a ff19 fs26 fc0 sc0 ls0 ws0">Figur<span class="lsd3">e1<span class="_ _4f"></span><span class="ls0">0.1. <span class="_"> </span>(See<span class="_"> </span>Exercise 10.9.)</span></span></div><div class="t m0 x35 h7d y2c6b ff16 fs3b fc0 sc0 ls0 ws0">10.13<span class="_ _5a"> </span><span class="ff1f">sigpending<span class="_ _54"> </span></span>Function</div><div class="t m0 x32 h54 y2c6c ff19 fs2c fc0 sc0 ls0 ws0">The<span class="_ _47"> </span><span class="ff1a">sigpending<span class="_ _66"> </span></span>function <span class="_ _3"></span>returns <span class="_ _2"></span>the <span class="_ _2"></span>set <span class="_ _3"></span>of <span class="_ _3"></span>signals <span class="_ _2"></span>that <span class="_ _3"></span>ar<span class="lsca5">eb<span class="_ _8"></span><span class="ls0">locked <span class="_ _3"></span>from delivery <span class="_ _3"></span>and</span></span></div><div class="t m0 x32 h60 y2c6d ff19 fs2c fc0 sc0 ls0 ws0">currently <span class="_ _2"></span>pending <span class="_ _3"></span>for <span class="_ _9"></span>the <span class="_ _3"></span>calling <span class="_ _3"></span>process. <span class="_ _47"> </span>The<span class="_ _47"> </span>set <span class="_ _9"></span>of <span class="_ _3"></span>signals <span class="_ _3"></span>is <span class="_ _3"></span>returned <span class="_ _3"></span>through <span class="_ _2"></span>the<span class="_ _45"> </span><span class="ff1b">set</span></div><div class="t m0 x32 h55 y2c6e ff19 fs2c fc0 sc0 ls0 ws0">argument.</div><div class="t m0 x3f h5d y2c6f ff1a fs2f fc0 sc0 ls0 ws0">#include &lt;signal.h&gt;</div><div class="t m0 x3f h5d y2c70 ff1a fs2f fc0 sc0 ls0 ws0">int sigpending(sigset_t *<span class="ff1b">set</span>);</div><div class="t m0 x153 hc2 y2c71 ff19 fs2f fc0 sc0 ls0 ws0">Returns: 0 if OK,<span class="_"> </span><span class="ff20">−</span>1<span class="_"> </span>on<span class="_"> </span>error</div><a class="l" href="#pf10" data-dest-detail='[16,"XYZ",50,757,1]'><div class="d m1" style="border-style:none;position:absolute;left:80.892842px;bottom:384.734686px;width:165.336609px;height:19.680023px;background-color:rgba(255,255,255,0.000001);"></div></a></div><div class="pi" data-data='{"ctm":[2.100000,0.000000,0.000000,2.100000,-115.668004,-156.491993]}'></div></div>
