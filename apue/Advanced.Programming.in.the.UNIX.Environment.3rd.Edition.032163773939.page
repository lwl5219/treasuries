<div id="pf27" class="pf w4 h1f" data-page-no="27"><div class="pc pc27 w4 h1f"><img class="bi x0 y0 w3 h4" alt="" src="bg27.png"/><div class="t m0 x31 h2 y8e ff1 fs0 fc0 sc0 ls0 ws0"><span class="fc1 sc0">ptg10805159</span></div><div class="t m0 x35 h24 ya4 ff19 fs0 fc0 sc0 ls0 ws0">Section <span class="_"> </span>1.4<span class="_ _81"> </span>Files <span class="_"> </span>and <span class="_"> </span>Directories<span class="_ _1b"> </span><span class="ff18">5</span></div><div class="t m0 x76 h51 y2a3 ff19 fs2a fc0 sc0 ls0 ws0">The <span class="_ _2"></span>Research <span class="_ _3"></span>UNIX <span class="_ _2"></span>System <span class="_ _3"></span>and <span class="_ _3"></span>some <span class="_ _3"></span>older <span class="_ _3"></span>UNIX <span class="_ _2"></span>System <span class="_ _3"></span>V <span class="_ _3"></span>ﬁle <span class="_ _3"></span>systems <span class="_ _2"></span>restricted <span class="_ _3"></span>a <span class="_ _2"></span>ﬁlename</div><div class="t m0 x76 h51 y2a4 ff19 fs2a fc0 sc0 ls0 ws0">to <span class="_ _80"> </span>14 <span class="_ _66"> </span>characters.<span class="_ _54"> </span>BSD <span class="_ _66"> </span>versions <span class="_ _66"> </span>extended <span class="_ _80"> </span>this <span class="_ _66"> </span>limit <span class="_ _66"> </span>to <span class="_ _66"> </span>255 <span class="_ _66"> </span>characters.<span class="_ _54"> </span><span class="lsed">To<span class="_ _3"></span></span>day<span class="_ _6"></span><span class="lsf7">,a<span class="_ _55"></span><span class="ls0">lmost <span class="_ _66"> </span>all</span></span></div><div class="t m0 x76 h51 y2a5 ff19 fs2a fc0 sc0 ls0 ws0">commercial UNIX ﬁle systems support at least 255-character ﬁlenames.</div><div class="t m0 x35 h27 y2cc ff16 fsf fc0 sc0 ls27 ws0">Pa<span class="_ _2"></span><span class="ls0">thname</span></div><div class="t m0 x32 h2a y2cd ff19 fsf fc0 sc0 lsf8 ws0">As<span class="_ _8"></span><span class="ls0">equence <span class="_ _3"></span>of <span class="_ _2"></span>one <span class="_ _3"></span>or <span class="_ _2"></span>mor<span class="lsf8">eﬁ<span class="_ _4f"></span><span class="ls0">lenames, <span class="_ _2"></span>separated <span class="_ _3"></span>by <span class="_ _2"></span>slashes <span class="_ _3"></span>and <span class="_ _2"></span>optionally <span class="_ _2"></span>starting <span class="_ _3"></span>with</span></span></span></div><div class="t m0 x32 h2b y2ce ff19 fsf fc0 sc0 lsf9 ws0">as<span class="_ _c"></span><span class="ls0">lash, <span class="_ _53"> </span>forms <span class="_ _42"> </span>a<span class="_ _44"> </span><span class="ff1b">pathname</span><span class="lsfa">.A<span class="_ _d"></span><span class="ls0">pathname <span class="_ _53"> </span>that <span class="_ _42"> </span>begins <span class="_ _42"> </span>with <span class="_ _53"> </span>a <span class="_ _42"> </span>slash <span class="_ _42"> </span>is <span class="_ _53"> </span>called <span class="_ _42"> </span>an<span class="_ _44"> </span><span class="ff1b">absolute</span></span></span></span></div><div class="t m0 x32 h2b y2cf ff1b fsf fc0 sc0 ls0 ws0">pathname<span class="ff19 lsfb">;o<span class="_ _55"></span><span class="ls0">therwise, <span class="_ _e"> </span>it’s <span class="_ _e"> </span>called <span class="_"> </span>a<span class="_ _4b"> </span><span class="ff1b ls45">re<span class="ls0">lative <span class="_"> </span>pathname</span></span><span class="lsfc">.R<span class="_ _5d"></span><span class="ls0">elative <span class="_"> </span>pathnames <span class="_ _53"> </span>refer <span class="_ _e"> </span>to <span class="_"> </span>ﬁles</span></span></span></span></div><div class="t m0 x32 h26 y2d0 ff19 fsf fc0 sc0 ls45 ws0">re<span class="ls0">lative <span class="_"> </span>to <span class="_"> </span>the <span class="_"> </span>current <span class="_"> </span>directory<span class="_ _4"></span><span class="lsfd">.T<span class="_ _5d"></span><span class="ls0">he <span class="_"> </span>name <span class="_"> </span>for <span class="_"> </span>the <span class="_"> </span>root <span class="_"> </span>of <span class="_"> </span>the <span class="_"> </span>ﬁle <span class="_"> </span>system <span class="_"> </span>(<span class="ff1a">/</span>)<span class="_ _59"> </span>is<span class="_ _46"> </span>a</span></span></span></div><div class="t m0 x32 h2a y2d1 ff19 fsf fc0 sc0 ls0 ws0">special-case absolute pathname that has no ﬁlename component.</div><div class="t m0 x35 h27 y2d2 ff16 fsf fc0 sc0 ls0 ws0">Example</div><div class="t m0 x32 h2a y2d3 ff19 fsf fc0 sc0 ls0 ws0">Listing <span class="_ _e"> </span>the <span class="_"> </span>names <span class="_ _e"> </span>of <span class="_ _e"> </span>all <span class="_"> </span>the <span class="_ _e"> </span>ﬁles <span class="_ _e"> </span>in <span class="_"> </span>a <span class="_ _e"> </span>directory <span class="_ _e"> </span>is <span class="_ _e"> </span>not <span class="_"> </span>difﬁcult. <span class="_ _4b"> </span>Figur<span class="lsfe">e1<span class="_ _4a"></span><span class="ls0">.3 <span class="_"> </span>shows <span class="_ _53"> </span>a</span></span></div><div class="t m0 x32 h26 y2d4 ff19 fsf fc0 sc0 ls0 ws0">bare-bones implementation of the<span class="_"> </span><span class="ff1a">ls</span></div><div class="t m0 x99 h2a y2d5 ff19 fsf fc0 sc0 ls0 ws0">(</div><div class="t m0 x9a h2a y2d4 ff19 fsf fc0 sc0 ls0 ws0">1</div><div class="t m0 x9b h2a y2d5 ff19 fsf fc0 sc0 ls0 ws0">)</div><div class="t m0 x9c h2a y2d4 ff19 fsf fc0 sc0 ls0 ws0">command.</div><div class="t m0 x32 h4e y2d6 ff1a fs28 fc0 sc0 ls0 ws0">#include &quot;apue.h&quot;</div><div class="t m0 x32 h4e y2d7 ff1a fs28 fc0 sc0 ls0 ws0">#include &lt;dirent.h&gt;</div><div class="t m0 x32 h4e y2d8 ff1a fs28 fc0 sc0 ls0 ws0">int</div><div class="t m0 x32 h4e y2d9 ff1a fs28 fc0 sc0 ls0 ws0">main(int argc, char *argv[])</div><div class="t m0 x32 h4e y2da ff1a fs28 fc0 sc0 ls0 ws0">{</div><div class="t m0 x8a h4e y2db ff1a fs28 fc0 sc0 ls0 ws0">DIR <span class="_ _82"> </span>*dp;</div><div class="t m0 x8a h4e y2dc ff1a fs28 fc0 sc0 ls0 ws0">struct dirent<span class="_ _68"> </span>*dirp;</div><div class="t m0 x8a h4e y2dd ff1a fs28 fc0 sc0 ls0 ws0">if (argc != 2)</div><div class="t m0 x9d h4e y2de ff1a fs28 fc0 sc0 ls0 ws0">err_quit(&quot;usage: ls directory_name&quot;);</div><div class="t m0 x8a h4e y2df ff1a fs28 fc0 sc0 ls0 ws0">if ((dp = opendir(argv[1])) == NULL)</div><div class="t m0 x9d h4e y2e0 ff1a fs28 fc0 sc0 ls0 ws0">err_sys(&quot;can’t open %s&quot;, argv[1]);</div><div class="t m0 x8a h4e y2e1 ff1a fs28 fc0 sc0 ls0 ws0">while ((dirp = readdir(dp)) != NULL)</div><div class="t m0 x9d h4e y2e2 ff1a fs28 fc0 sc0 ls0 ws0">printf(&quot;%s\n&quot;, dirp-&gt;d_name);</div><div class="t m0 x8a h4e y2e3 ff1a fs28 fc0 sc0 ls0 ws0">closedir(dp);</div><div class="t m0 x8a h4e y2e4 ff1a fs28 fc0 sc0 ls0 ws0">exit(0);</div><div class="t m0 x32 h4e y2e5 ff1a fs28 fc0 sc0 ls0 ws0">}</div><div class="t m0 x9e h2e y2e6 ff18 fs11 fc0 sc0 ls0 ws0">Figure 1.3<span class="_ _5a"> </span><span class="ff19">List all the ﬁles in a directory</span></div><div class="t m0 x3f h54 y2e7 ff19 fs2c fc0 sc0 ls0 ws0">The <span class="_ _23"> </span>notation<span class="_ _35"> </span><span class="ff1a">ls</span></div><div class="t m0 x4 h55 y2e8 ff19 fs2c fc0 sc0 ls0 ws0">(</div><div class="t m0 x9f h55 y2e7 ff19 fs2c fc0 sc0 ls0 ws0">1</div><div class="t m0 xa0 h55 y2e8 ff19 fs2c fc0 sc0 ls0 ws0">)</div><div class="t m0 x3d h55 y2e7 ff19 fs2c fc0 sc0 ls0 ws0">is <span class="_ _23"> </span>the <span class="_ _23"> </span>normal <span class="_ _42"> </span>way <span class="_ _23"> </span>to <span class="_ _23"> </span>reference <span class="_ _23"></span>a <span class="_ _23"></span>particular <span class="_ _23"> </span>entry <span class="_ _23"> </span>in <span class="_ _42"> </span>the <span class="_ _23"></span>UNIX</div><div class="t m0 x32 h54 y2e9 ff19 fs2c fc0 sc0 ls0 ws0">system <span class="_ _23"> </span>manuals.<span class="_ _51"> </span>It <span class="_ _42"> </span>refers <span class="_ _23"></span>to <span class="_ _23"> </span>the <span class="_ _23"> </span>entry <span class="_ _42"> </span>for<span class="_ _35"> </span><span class="ff1a">ls<span class="_ _35"> </span></span>in <span class="_ _23"> </span>Section <span class="_ _42"> </span>1.<span class="_ _51"> </span>The <span class="_ _23"> </span>sections <span class="_ _42"> </span>ar<span class="lsff">en<span class="_ _43"></span><span class="ls0">ormally</span></span></div><div class="t m0 x32 h55 y2ea ff19 fs2c fc0 sc0 ls0 ws0">numbered <span class="_ _59"> </span>1 <span class="_ _46"> </span>through <span class="_ _46"> </span>8, <span class="_ _46"> </span>and <span class="_ _46"> </span>all <span class="_ _46"> </span>the <span class="_ _46"> </span>entries <span class="_ _46"> </span>within <span class="_ _46"> </span>each <span class="_ _46"> </span>section <span class="_ _46"> </span>ar<span class="ls100">ea<span class="_ _49"></span><span class="ls0">rranged</span></span></div><div class="t m0 x32 h55 y2eb ff19 fs2c fc0 sc0 ls0 ws0">alphabetically<span class="_ _4"></span><span class="ls101">.T<span class="_ _26"></span><span class="ls0">hroughout <span class="_ _23"></span>this <span class="_ _9"></span>text, <span class="_ _23"></span>we <span class="_ _23"></span>assume <span class="_ _9"></span>that <span class="_ _23"> </span>you <span class="_ _23"></span>have <span class="_ _9"></span>a <span class="_ _23"> </span>copy <span class="_ _23"></span>of <span class="_ _23"></span>the <span class="_ _9"></span>manuals</span></span></div><div class="t m0 x32 h55 y2ec ff19 fs2c fc0 sc0 ls0 ws0">for your UNIX system.</div><div class="t m0 x76 h56 y2ed ff19 fs11 fc0 sc0 ls0 ws0">Historically<span class="_ _6"></span><span class="ls102">,U<span class="_ _d"></span><span class="ls0">NIX <span class="_ _3"></span>systems <span class="_ _3"></span>lumped <span class="_ _3"></span>all <span class="_ _9"></span>eight <span class="_ _3"></span>sections <span class="_ _3"></span>together <span class="_ _3"></span>into <span class="_ _3"></span>what <span class="_ _9"></span>was <span class="_ _3"></span>called <span class="_ _3"></span>the<span class="_ _66"> </span><span class="ff1b">UNIX</span></span></span></div><div class="t m0 x76 h56 y2ee ff1b fs11 fc0 sc0 ls0 ws0">Programmer <span class="_ _a"></span>’<span class="_ _1"></span><span class="ls103">sM<span class="_ _43"></span><span class="ls0">anual<span class="ff19 ls104">.A<span class="_ _62"></span><span class="ls103">st<span class="_ _43"></span><span class="ls0">he <span class="_"> </span>page <span class="_"> </span>count <span class="_ _42"> </span>increased, <span class="_"> </span>the <span class="_"> </span>tr<span class="_ _0"></span>end <span class="_"> </span>changed <span class="_"> </span>to <span class="_ _42"> </span>distributing <span class="_"> </span>the</span></span></span></span></span></div><div class="t m0 x76 h2e y2ef ff19 fs11 fc0 sc0 ls0 ws0">sections <span class="_ _23"> </span>among <span class="_ _23"> </span>separate <span class="_ _42"> </span>manuals: <span class="_ _23"> </span>one <span class="_ _23"> </span>for <span class="_ _42"> </span>users, <span class="_ _23"> </span>one <span class="_ _23"> </span>for <span class="_ _42"> </span>programmers, <span class="_ _23"> </span>and <span class="_ _23"> </span>one <span class="_ _23"> </span>for <span class="_ _42"> </span>system</div><div class="t m0 x76 h2e y2f0 ff19 fs11 fc0 sc0 ls0 ws0">administrators, for example.</div></div><div class="pi" data-data='{"ctm":[2.100000,0.000000,0.000000,2.100000,-115.668004,-156.491993]}'></div></div>
