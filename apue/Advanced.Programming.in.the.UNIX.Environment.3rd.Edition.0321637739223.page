<div id="pfdf" class="pf w4 h1f" data-page-no="df"><div class="pc pcdf w4 h1f"><img class="bi x0 y0 w3 h4" alt="" src="bgdf.png"/><div class="t m0 x31 h2 y8e ff1 fs0 fc0 sc0 ls0 ws0"><span class="fc1 sc0">ptg10805159</span></div><div class="t m0 x35 h24 ya4 ff19 fs0 fc0 sc0 ls0 ws0">Section <span class="_"> </span>6.10<span class="_ _1fd"> </span><span class="ls7ed">Ti<span class="_ _2"></span></span>me <span class="_"> </span>and <span class="_"> </span>Date <span class="_"> </span>Routines<span class="_ _1b"> </span><span class="ff18">189</span></div><div class="t m0 x3f h26 y12f ff19 fsf fc0 sc0 ls0 ws0">There<span class="_ _35"> </span>is<span class="_ _35"> </span>also <span class="_ _23"> </span>a<span class="_ _44"> </span><span class="ff1a">hostname</span></div><div class="t m0 x146 h2a y1ac ff19 fsf fc0 sc0 ls0 ws0">(</div><div class="t m0 x136 h2a y12f ff19 fsf fc0 sc0 ls0 ws0">1</div><div class="t m0 x1d6 h2a y1ac ff19 fsf fc0 sc0 ls0 ws0">)</div><div class="t m0 x157 h2a y12f ff19 fsf fc0 sc0 ls0 ws0">command <span class="_ _23"> </span>that <span class="_ _42"> </span>can <span class="_ _42"> </span>fetch <span class="_ _23"> </span>or <span class="_ _42"> </span>set <span class="_ _42"> </span>the <span class="_ _23"> </span>host <span class="_ _42"> </span>name.<span class="_ _51"> </span>(The</div><div class="t m0 x32 h26 y130 ff19 fsf fc0 sc0 ls0 ws0">host <span class="_ _23"></span>name <span class="_ _23"> </span>is <span class="_ _23"> </span>set <span class="_ _23"> </span>by <span class="_ _42"> </span>the <span class="_ _23"></span>superuser <span class="_ _23"></span>using <span class="_ _23"></span>a <span class="_ _23"></span>similar <span class="_ _23"> </span>function,<span class="_ _35"> </span><span class="ff1a">sethostname</span>.) <span class="_ _35"> </span>The<span class="_ _35"> </span>host</div><div class="t m0 x32 h2a y131 ff19 fsf fc0 sc0 ls0 ws0">name <span class="_ _66"> </span>is <span class="_ _47"> </span>normally <span class="_ _47"> </span>set <span class="_ _66"> </span>at <span class="_ _47"> </span>bootstrap <span class="_ _66"> </span>time <span class="_ _47"> </span>from <span class="_"> </span>one <span class="_ _47"> </span>of <span class="_ _47"> </span>the <span class="_ _66"> </span>start-up <span class="_ _47"> </span>ﬁles <span class="_ _66"> </span>invoked <span class="_ _47"> </span>by</div><div class="t m0 x32 h26 y132 ff1a fsf fc0 sc0 ls0 ws0">/etc/rc<span class="_ _80"> </span><span class="ff19">or<span class="_"> </span></span>init<span class="ff19">.</span></div><div class="t m0 x35 h53 y1989 ff16 fs2b fc0 sc0 ls0 ws0">6.10 <span class="_ _93"> </span>Time<span class="_ _54"> </span>and <span class="_"> </span>Date <span class="_"> </span>Routines</div><div class="t m0 x32 h2a y198a ff19 fsf fc0 sc0 ls0 ws0">The <span class="_ _2"></span>basic <span class="_ _3"></span>time <span class="_ _3"></span>service <span class="_ _3"></span>provided <span class="_ _2"></span>by <span class="_ _3"></span>the <span class="_ _2"></span>UNIX <span class="_ _3"></span>kernel <span class="_ _3"></span>counts <span class="_ _3"></span>the <span class="_ _2"></span>number <span class="_ _3"></span>of <span class="_ _3"></span>seconds <span class="_ _3"></span>that</div><div class="t m0 x32 h2a y198b ff19 fsf fc0 sc0 ls0 ws0">have <span class="_ _e"> </span>passed <span class="_"> </span>since <span class="_ _53"> </span>the <span class="_"> </span>Epoch: <span class="_ _53"> </span>00:00:00 <span class="_"> </span>January <span class="_ _53"> </span>1, <span class="_"> </span>1970, <span class="_ _53"> </span>Coordinated <span class="_ _e"> </span>Universal <span class="_"> </span>T<span class="_ _6"></span>ime</div><div class="t m0 x32 h2a y198c ff19 fsf fc0 sc0 ls0 ws0">(</div><div class="t m0 x62 h2a y198d ff19 fsf fc0 sc0 ls0 ws0">UTC</div><div class="t m0 x156 h2a y198c ff19 fsf fc0 sc0 ls0 ws0">)</div><div class="t m0 xe1 h26 y198d ff19 fsf fc0 sc0 ls7ee ws0">.I<span class="_ _7"></span><span class="ls7ef">nS<span class="_ _43"></span><span class="ls0">ection <span class="_ _23"> </span>1.10, <span class="_ _42"> </span>we <span class="_ _42"> </span>said <span class="_ _23"> </span>that <span class="_ _42"> </span>these <span class="_ _23"> </span>seconds <span class="_ _42"> </span>ar<span class="ls7f0">er<span class="_ _c"></span><span class="ls0">epresented <span class="_ _23"> </span>in <span class="_ _42"> </span>a<span class="_ _35"> </span><span class="ff1a">time_t<span class="_ _44"> </span></span>data</span></span></span></span></div><div class="t m0 x32 h2b y198e ff19 fsf fc0 sc0 ls0 ws0">type, <span class="_ _2"></span>and <span class="_ _2"></span>we <span class="_ _2"></span>call <span class="_ _2"></span>them<span class="_ _47"> </span><span class="ff1b">calendar <span class="_ _2"></span>times</span><span class="ls4c1">.T<span class="_ _5b"></span><span class="ls0">hese <span class="_ _2"></span>calendar <span class="_ _2"></span>times <span class="_ _2"></span>represent both <span class="_ _2"></span>the <span class="_ _2"></span>time <span class="_ _3"></span>and</span></span></div><div class="t m0 x32 h2a y198f ff19 fsf fc0 sc0 ls0 ws0">the <span class="_ _42"> </span>date.<span class="_ _54"> </span>The <span class="_ _42"> </span>UNIX <span class="_ _42"> </span>System <span class="_ _42"> </span>has <span class="_ _42"> </span>always <span class="_ _53"> </span>differ<span class="_ _0"></span>ed <span class="_ _42"> </span>from <span class="_ _23"> </span>other <span class="_ _42"> </span>operating <span class="_ _53"> </span>systems <span class="_ _42"> </span>in <span class="_ _42"> </span>(a)</div><div class="t m0 x32 h2a y1990 ff19 fsf fc0 sc0 ls0 ws0">keeping <span class="_ _3"></span>time <span class="_ _9"></span>in <span class="_ _9"></span>UTC <span class="_ _9"></span>instead <span class="_ _9"></span>of <span class="_ _3"></span>the <span class="_ _9"></span>local <span class="_ _9"></span>time, <span class="_ _9"></span>(b) <span class="_ _9"></span>automatically <span class="_ _3"></span>handling <span class="_ _9"></span>conversions,</div><div class="t m0 x32 h2a y1991 ff19 fsf fc0 sc0 ls0 ws0">such as daylight saving time, and (c) keeping the time and date as a single quantity<span class="_ _4"></span>.</div><div class="t m0 x3f h26 y1992 ff19 fsf fc0 sc0 ls0 ws0">The<span class="_"> </span><span class="ff1a">time<span class="_ _80"> </span></span>function returns the current time and date.</div><div class="t m0 x3f h57 y1993 ff1a fs2d fc0 sc0 ls0 ws0">#include &lt;time.h&gt;</div><div class="t m0 x3f h57 y1994 ff1a fs2d fc0 sc0 ls0 ws0">time_t time(time_t *<span class="ff1b">calptr</span>);</div><div class="t m0 x17a h5f y1995 ff19 fs2d fc0 sc0 ls0 ws0">Returns: value of time if OK,<span class="_"> </span><span class="ff20">−</span>1<span class="_"> </span>on<span class="_"> </span>error</div><div class="t m0 x32 h49 y1996 ff19 fs26 fc0 sc0 ls0 ws0">The <span class="_ _3"></span>time <span class="_ _3"></span>value <span class="_ _3"></span>is <span class="_ _3"></span>always <span class="_ _3"></span>returned <span class="_ _3"></span>as <span class="_ _3"></span>the <span class="_ _3"></span>value <span class="_ _3"></span>of <span class="_ _3"></span>the <span class="_ _3"></span>function.<span class="_ _16"> </span>If <span class="_ _3"></span>the <span class="_ _3"></span>argument <span class="_ _3"></span>is <span class="_ _3"></span>non-</div><div class="t m0 x32 h4a y1997 ff19 fs26 fc0 sc0 ls0 ws0">null, the time value is also stored at the location pointed to by<span class="_"> </span><span class="ff1b">calptr</span>.</div><div class="t m0 x3f h49 y1998 ff19 fs26 fc0 sc0 ls0 ws0">The <span class="_ _9"></span>real-time <span class="_ _9"></span>extensions <span class="_ _9"></span>to <span class="_ _23"></span>POSIX.1 <span class="_ _9"></span>added <span class="_ _23"></span>support <span class="_ _9"></span>for <span class="_ _9"></span>multiple <span class="_ _23"></span>system <span class="_ _9"></span>clocks.<span class="_ _5a"> </span>In</div><div class="t m0 x32 h49 y1999 ff19 fs26 fc0 sc0 ls736 ws0">Ve<span class="_ _23"></span><span class="ls0">rsion <span class="_ _23"></span>4 <span class="_ _23"> </span>of <span class="_ _23"> </span>the <span class="_ _42"> </span>Single <span class="_ _23"> </span>UNIX <span class="_ _23"> </span>Speciﬁcation, <span class="_ _42"> </span>the <span class="_ _23"> </span>interfaces <span class="_ _23"> </span>used <span class="_ _42"> </span>to <span class="_ _23"> </span>control <span class="_ _23"></span>these <span class="_ _23"> </span>clocks</span></div><div class="t m0 x32 h4d y199a ff19 fs26 fc0 sc0 ls0 ws0">wer<span class="ls7f1">em<span class="_ _8"></span><span class="ls0">oved <span class="_ _2"></span>from <span class="_ _2"></span>an <span class="_ _2"></span>option <span class="_ _3"></span>group to <span class="_ _3"></span>the <span class="_ _2"></span>base.<span class="_ _61"> </span><span class="ls7f2">Ac<span class="_ _4f"></span><span class="ls0">lock <span class="_ _3"></span>is <span class="_ _2"></span>identiﬁed <span class="_ _2"></span>by <span class="_ _3"></span>the<span class="_ _47"> </span><span class="ff1a">clockid_t</span></span></span></span></span></div><div class="t m0 x32 h49 y199b ff19 fs26 fc0 sc0 ls0 ws0">type. <span class="_"> </span>Standar<span class="lsd3">dv<span class="_ _4f"></span><span class="ls0">alues ar<span class="lsd3">es<span class="_ _d"></span><span class="ls0">ummarized in Figur<span class="lsd3">e6<span class="_ _d"></span><span class="ls0">.8.</span></span></span></span></span></span></div><div class="t m0 x8f h2e y199c ff19 fs11 fc0 sc0 ls0 ws0">Identiﬁer <span class="_ _1ee"> </span>Option<span class="_ _1fe"> </span>Description</div><div class="t m0 x2c h6d y199d ff1a fs12 fc0 sc0 ls0 ws0">CLOCK_REALTIME<span class="_ _1ff"> </span><span class="ff19 ls222">re<span class="ls0">al system time</span></span></div><div class="t m0 x2c h6d y199e ff1a fs12 fc0 sc0 ls0 ws0">CLOCK_MONOTONIC <span class="_ _137"> </span>_POSIX_MONOTONIC_CLOCK<span class="_ _5f"> </span><span class="ff19 ls222">re<span class="ls0">al system time with no negative jumps</span></span></div><div class="t m0 x2c h6d y199f ff1a fs12 fc0 sc0 ls0 ws0">CLOCK_PROCESS_CPUTIME_ID <span class="_ _47"> </span>_POSIX_CPUTIME<span class="_ _182"> </span><span class="ff19">CPU time for calling process</span></div><div class="t m0 x2c h6d y19a0 ff1a fs12 fc0 sc0 ls0 ws0">CLOCK_THREAD_CPUTIME_ID <span class="_ _50"> </span>_POSIX_THREAD_CPUTIME<span class="_ _41"> </span><span class="ff19">CPU time for calling thr<span class="_ _1"></span>ead</span></div><div class="t m0 x11b h30 y19a1 ff18 fs13 fc0 sc0 ls0 ws0">Figure 6.8<span class="_ _5a"> </span><span class="ff19">Clock type identiﬁers</span></div><div class="t m0 x3f h64 y19a2 ff19 fs31 fc0 sc0 ls0 ws0">The<span class="_ _35"> </span><span class="ff1a">clock_gettime<span class="_ _35"> </span></span>function <span class="_ _42"> </span>can <span class="_ _23"> </span>be <span class="_ _42"> </span>used <span class="_ _23"> </span>to <span class="_ _23"> </span>get <span class="_ _42"> </span>the <span class="_ _23"> </span>time <span class="_ _42"> </span>of <span class="_ _23"> </span>the <span class="_ _42"> </span>speciﬁed <span class="_ _23"> </span>clock.</div><div class="t m0 x32 h64 y19a3 ff19 fs31 fc0 sc0 ls0 ws0">The <span class="_ _45"> </span>time <span class="_ _45"> </span>is <span class="_ _35"> </span>returned <span class="_ _45"> </span>in <span class="_ _45"> </span>a<span class="_ _5a"> </span><span class="ff1a">timespec<span class="_"> </span></span>structure, <span class="_ _45"> </span>introduced <span class="_ _45"> </span>in <span class="_ _45"> </span>Section <span class="_ _45"> </span>4.2, <span class="_ _35"> </span>which</div><div class="t m0 x32 h6e y19a4 ff19 fs31 fc0 sc0 ls0 ws0">expresses time values in terms of seconds and nanoseconds.</div><div class="t m0 x3f h65 y19a5 ff1a fs32 fc0 sc0 ls0 ws0">#include &lt;sys/time.h&gt;</div><div class="t m0 x3f h65 y19a6 ff1a fs32 fc0 sc0 ls0 ws0">int clock_gettime(clockid_t<span class="_"> </span><span class="ff1b">clock_id</span><span class="ls441">,s<span class="_ _1d"></span><span class="ls0">truct timespec *<span class="ff1b">tsp</span>);</span></span></div><div class="t m0 x153 h92 y19a7 ff19 fs32 fc0 sc0 ls0 ws0">Returns: 0 if OK,<span class="_"> </span><span class="ff20">−</span>1<span class="_"> </span>on<span class="_"> </span>error</div><a class="l" href="#pfe" data-dest-detail='[14,"XYZ",50,757,1]'><div class="d m1" style="border-style:none;position:absolute;left:80.893259px;bottom:1077.528966px;width:182.699387px;height:19.679993px;background-color:rgba(255,255,255,0.000001);"></div></a></div><div class="pi" data-data='{"ctm":[2.100000,0.000000,0.000000,2.100000,-115.668004,-156.491993]}'></div></div>
