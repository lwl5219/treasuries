<div id="pf135" class="pf w4 h1f" data-page-no="135"><div class="pc pc135 w4 h1f"><img class="bi x0 y0 w3 h4" alt="" src="bg135.png"/><div class="t m0 x31 h2 y8e ff1 fs0 fc0 sc0 ls0 ws0"><span class="fc1 sc0">ptg10805159</span></div><div class="t m0 x35 h24 ya4 ff19 fs0 fc0 sc0 ls0 ws0">Section <span class="_"> </span>8.15<span class="_ _e5"> </span>User <span class="_"> </span>Identiﬁcation<span class="_ _1fb"> </span><span class="ff18">275</span></div><div class="t m0 x32 h2a y12f ff19 fsf fc0 sc0 ls0 ws0">Section <span class="_ _9"></span>8.6.<span class="_ _5a"> </span>The <span class="_ _9"></span>only <span class="_ _9"></span>information <span class="_ _23"></span>in <span class="_ _9"></span>this <span class="_ _9"></span>byte <span class="_ _9"></span>is <span class="_ _9"></span>a <span class="_ _9"></span>core-ﬂag <span class="_ _9"></span>bit <span class="_ _9"></span>(usually <span class="_ _9"></span>the <span class="_ _23"></span>high-or<span class="_ _0"></span>der</div><div class="t m0 x32 h2a y130 ff19 fsf fc0 sc0 ls0 ws0">bit) <span class="_ _3"></span>and <span class="_ _3"></span>the <span class="_ _3"></span>signal <span class="_ _3"></span>number <span class="_ _3"></span>(usually <span class="_ _9"></span>the <span class="_ _2"></span>seven <span class="_ _9"></span>low-order <span class="_ _2"></span>bits), <span class="_ _3"></span>if <span class="_ _3"></span>the <span class="_ _9"></span>process <span class="_ _2"></span>terminated</div><div class="t m0 x32 h26 y131 ff19 fsf fc0 sc0 ls0 ws0">abnormally<span class="_ _4"></span><span class="lsa77">.I<span class="_ _52"></span><span class="lsa78">ft<span class="_ _55"></span><span class="ls0">he <span class="_ _e"> </span>process <span class="_ _42"> </span>terminated <span class="_ _e"> </span>normally<span class="_ _4"></span>,<span class="_ _4b"> </span>we<span class="_ _4b"> </span>a<span class="ls45">re <span class="_"> </span>n</span>ot <span class="_ _e"> </span>able <span class="_ _53"> </span>to <span class="_ _53"> </span>obtain <span class="_ _e"> </span>the<span class="_ _44"> </span><span class="ff1a">exit</span></span></span></span></div><div class="t m0 x32 h2a y132 ff19 fsf fc0 sc0 ls0 ws0">status <span class="_ _9"></span>from <span class="_ _9"></span>the <span class="_ _23"></span>accounting <span class="_ _9"></span>ﬁle.<span class="_ _5a"> </span>For <span class="_ _23"></span>the <span class="_ _9"></span>ﬁrst <span class="_ _23"></span>child, <span class="_ _9"></span>this <span class="_ _9"></span>value <span class="_ _23"></span>is <span class="_ _9"></span>128<span class="_ _53"> </span><span class="ff1c">+<span class="_ _42"> </span></span>6. <span class="_ _35"> </span>The<span class="_ _45"> </span>128 <span class="_ _9"></span>is <span class="_ _23"></span>the</div><div class="t m0 x32 h26 y133 ff19 fsf fc0 sc0 ls0 ws0">cor<span class="lsa79">eﬂ<span class="_ _4a"></span><span class="ls0">ag <span class="_"> </span>bit, <span class="_ _53"> </span>and <span class="_ _e"> </span>6 <span class="_ _e"> </span>happens <span class="_"> </span>to <span class="_ _53"> </span>be <span class="_ _e"> </span>the <span class="_ _e"> </span>value <span class="_ _e"> </span>on <span class="_"> </span>this <span class="_ _53"> </span>system <span class="_ _e"> </span>for<span class="_ _59"> </span><span class="ff1a">SIGABRT</span><span class="lsa7a">,w<span class="_ _55"></span><span class="ls0">hich <span class="_ _e"> </span>is</span></span></span></span></div><div class="t m0 x32 h26 y134 ff19 fsf fc0 sc0 ls0 ws0">generated <span class="_ _42"> </span>by <span class="_ _42"> </span>the <span class="_ _53"> </span>call <span class="_ _42"> </span>to<span class="_ _44"> </span><span class="ff1a">abort</span><span class="lsa7b">.T<span class="_ _52"></span><span class="ls0">he <span class="_ _53"> </span>value <span class="_ _42"> </span>9 <span class="_ _53"> </span>for <span class="_ _42"> </span>the <span class="_ _53"> </span>fourth <span class="_ _42"> </span>child <span class="_ _53"> </span>corresponds <span class="_ _42"> </span>to <span class="_ _42"> </span>the</span></span></div><div class="t m0 x32 h26 y135 ff19 fsf fc0 sc0 ls0 ws0">value <span class="_ _2"></span>of<span class="_ _66"> </span><span class="ff1a">SIGKILL</span><span class="lsa7c">.W<span class="_ _26"></span><span class="lsa7d">ec<span class="_ _4f"></span><span class="ls0">an’t <span class="_ _2"></span>tell <span class="_ _2"></span>from the <span class="_ _3"></span>accounting <span class="_ _2"></span>data <span class="_ _2"></span>that <span class="_ _2"></span>the <span class="_ _2"></span>parent’s argument to</span></span></span></div><div class="t m0 x32 h26 y136 ff1a fsf fc0 sc0 ls0 ws0">exit<span class="_ _80"> </span><span class="ff19">was 2 and that the thir<span class="ls44">dc<span class="_ _d"></span><span class="ls0">hild’s argument to<span class="_"> </span><span class="ff1a">exit<span class="_ _80"> </span></span>was 0.</span></span></span></div><div class="t m0 x3f h26 y137 ff19 fsf fc0 sc0 ls0 ws0">The <span class="_ _3"></span>size <span class="_ _9"></span>of <span class="_ _9"></span>the <span class="_ _9"></span>ﬁle<span class="_ _45"> </span><span class="ff1a">/etc/passwd<span class="_ _47"> </span></span>that <span class="_ _9"></span>the<span class="_ _45"> </span><span class="ff1a">dd<span class="_ _45"> </span></span>pr<span class="_ _0"></span>ocess <span class="_ _3"></span>copies <span class="_ _9"></span>in <span class="_ _9"></span>the <span class="_ _9"></span>second <span class="_ _9"></span>child <span class="_ _3"></span>is</div><div class="t m0 x32 h2a y138 ff19 fsf fc0 sc0 ls0 ws0">777 <span class="_ _3"></span>bytes.<span class="_ _61"> </span>The <span class="_ _3"></span>number <span class="_ _3"></span>of <span class="_ _3"></span>characters <span class="_ _3"></span>of <span class="_ _3"></span>I/O <span class="_ _3"></span>is <span class="_ _3"></span>just <span class="_ _3"></span>over <span class="_ _3"></span>twice <span class="_ _3"></span>this <span class="_ _3"></span>value.<span class="_ _16"> </span>It <span class="_ _3"></span>is <span class="_ _3"></span>twice <span class="_ _3"></span>the</div><div class="t m0 x32 h2a y139 ff19 fsf fc0 sc0 ls0 ws0">value, <span class="_ _3"></span>as <span class="_ _3"></span>777 <span class="_ _3"></span>bytes <span class="_ _3"></span>ar<span class="lsa7e">er<span class="_ _b"></span><span class="ls0">ead <span class="_ _3"></span>in, <span class="_ _3"></span>then <span class="_ _9"></span>777 <span class="_ _3"></span>bytes <span class="_ _3"></span>ar<span class="lsa7e">ew<span class="_ _b"></span><span class="ls0">ritten <span class="_ _3"></span>out.<span class="_ _16"> </span>Even <span class="_ _9"></span>though <span class="_ _3"></span>the <span class="_ _3"></span>output</span></span></span></span></div><div class="t m0 x32 h2a y13a ff19 fsf fc0 sc0 ls0 ws0">goes <span class="_ _9"></span>to <span class="_ _9"></span>the <span class="_ _9"></span>null <span class="_ _9"></span>device, <span class="_ _9"></span>the <span class="_ _9"></span>bytes <span class="_ _9"></span>ar<span class="lsa7f">es<span class="_ _b"></span><span class="ls0">till <span class="_ _3"></span>accounted <span class="_ _9"></span>for<span class="_ _1"></span><span class="lsa80">.T<span class="_ _62"></span><span class="ls0">he <span class="_ _9"></span>31 <span class="_ _9"></span>additional <span class="_ _9"></span>bytes <span class="_ _9"></span>come</span></span></span></span></div><div class="t m0 x32 h26 y254 ff19 fsf fc0 sc0 ls0 ws0">from the<span class="_"> </span><span class="ff1a">dd<span class="_ _66"> </span></span>command <span class="_ _2"></span>reporting the summary <span class="_ _2"></span>of bytes <span class="_ _2"></span>read and written, <span class="_ _2"></span>which it <span class="_ _2"></span>prints</div><div class="t m0 x32 h26 y255 ff19 fsf fc0 sc0 ls0 ws0">to<span class="_"> </span><span class="ff1a">stdout</span>.</div><div class="t m0 x3f h26 y13b ff19 fsf fc0 sc0 ls0 ws0">The<span class="_ _35"> </span><span class="ff1a">ac_flag<span class="_ _44"> </span></span>values <span class="_ _23"> </span>ar<span class="lsa81">ea<span class="_ _43"></span><span class="ls45">re <span class="_ _53"> </span>w<span class="ls0">hat <span class="_ _42"> </span>we <span class="_ _42"> </span>would <span class="_ _42"> </span>expect.<span class="_ _51"> </span>The<span class="_ _44"> </span><span class="ff1a">F<span class="_ _35"> </span></span>ﬂag <span class="_ _42"> </span>is <span class="_ _42"> </span>set <span class="_ _23"> </span>for <span class="_ _42"> </span>all <span class="_ _42"> </span>the</span></span></span></div><div class="t m0 x32 h26 y13c ff19 fsf fc0 sc0 ls0 ws0">child <span class="_ _2"></span>processes except <span class="_ _3"></span>the <span class="_ _2"></span>second <span class="_ _2"></span>child, <span class="_ _2"></span>which <span class="_ _2"></span>does <span class="_ _3"></span>the<span class="_ _66"> </span><span class="ff1a">execl</span><span class="lsa82">.T<span class="_ _5b"></span><span class="ls0">he<span class="_ _47"> </span><span class="ff1a">F<span class="_ _66"> </span></span>ﬂag <span class="_ _2"></span>is <span class="_ _2"></span>not <span class="_ _3"></span>set <span class="_ _2"></span>for</span></span></div><div class="t m0 x32 h26 y256 ff19 fsf fc0 sc0 ls0 ws0">the parent, because the interactive shell that executed the parent did a<span class="_"> </span><span class="ff1a">fork<span class="_ _66"> </span></span>and then an</div><div class="t m0 x32 h26 y257 ff1a fsf fc0 sc0 ls0 ws0">exec<span class="_ _66"> </span><span class="ff19">of the<span class="_"> </span></span>a.out<span class="_ _66"> </span><span class="ff19">ﬁle. <span class="_ _66"> </span>The<span class="_ _66"> </span>ﬁrst child <span class="_ _2"></span>process calls<span class="_"> </span></span>abort<span class="ff19 ls21c">,w<span class="_ _d"></span><span class="ls0">hich <span class="_ _2"></span>generates a<span class="_"> </span><span class="ff1a">SIGABRT</span></span></span></div><div class="t m0 x32 h26 y258 ff19 fsf fc0 sc0 ls0 ws0">signal <span class="_ _9"></span>to <span class="_ _23"></span>generate <span class="_ _9"></span>the <span class="_ _23"> </span>cor<span class="ls632">ed<span class="_ _b"></span><span class="ls0">ump. <span class="_ _45"> </span>Note<span class="_ _45"> </span>that <span class="_ _9"></span>neither <span class="_ _23"> </span>the<span class="_ _45"> </span><span class="ff1a">X<span class="_ _35"> </span></span>ﬂag <span class="_ _9"></span>nor <span class="_ _23"></span>the<span class="_ _45"> </span><span class="ff1a">D<span class="_ _35"> </span></span>ﬂag <span class="_ _9"></span>is <span class="_ _23"></span>on, <span class="_ _9"></span>as</span></span></div><div class="t m0 x32 h2a y161 ff19 fsf fc0 sc0 ls0 ws0">they <span class="_ _9"></span>ar<span class="lsa83">en<span class="_ _b"></span><span class="ls0">ot <span class="_ _9"></span>supported <span class="_ _9"></span>on <span class="_ _9"></span>Solaris; <span class="_ _23"></span>the <span class="_ _9"></span>information <span class="_ _9"></span>they <span class="_ _9"></span>represent <span class="_ _3"></span>can <span class="_ _23"></span>be <span class="_ _9"></span>derived <span class="_ _9"></span>from</span></span></div><div class="t m0 x32 h26 y162 ff19 fsf fc0 sc0 ls0 ws0">the<span class="_ _61"> </span><span class="ff1a">ac_stat<span class="_ _16"> </span></span>ﬁeld. <span class="_ _16"> </span>The<span class="_ _16"> </span>fourth <span class="_ _47"> </span>child <span class="_ _47"> </span>also <span class="_ _47"> </span>terminates <span class="_ _47"> </span>because <span class="_ _47"> </span>of <span class="_ _45"> </span>a <span class="_ _66"> </span>signal, <span class="_ _45"> </span>but <span class="_ _66"> </span>the</div><div class="t m0 x32 h26 y1db ff1a fsf fc0 sc0 ls0 ws0">SIGKILL<span class="_ _80"> </span><span class="ff19">signal does not generate a cor<span class="ls44">ed<span class="_ _d"></span><span class="ls0">ump; it just terminates the process.</span></span></span></div><div class="t m0 x3f h2a y25a ff19 fsf fc0 sc0 ls0 ws0">As <span class="_ _2"></span>a <span class="_ _3"></span>ﬁnal <span class="_ _2"></span>note, <span class="_ _3"></span>the <span class="_ _2"></span>ﬁrst <span class="_ _3"></span>child <span class="_ _2"></span>has <span class="_ _3"></span>a <span class="_ _3"></span>0 <span class="_ _2"></span>count <span class="_ _3"></span>for <span class="_ _2"></span>the <span class="_ _3"></span>number <span class="_ _2"></span>of <span class="_ _3"></span>characters <span class="_ _2"></span>of <span class="_ _3"></span>I/O, <span class="_ _3"></span>yet</div><div class="t m0 x32 h26 y164 ff19 fsf fc0 sc0 ls0 ws0">this <span class="_ _9"></span>process <span class="_ _9"></span>generated <span class="_ _9"></span>a<span class="_ _45"> </span><span class="ff1a">core<span class="_ _45"> </span></span>ﬁle. <span class="_ _45"> </span>It<span class="_ _45"> </span>appears <span class="_ _9"></span>that <span class="_ _23"></span>the <span class="_ _9"></span>I/O <span class="_ _9"></span>requir<span class="_ _0"></span>ed <span class="_ _9"></span>to <span class="_ _9"></span>write <span class="_ _23"></span>the<span class="_ _45"> </span><span class="ff1a">core</span></div><div class="t m0 x32 h2a y25b ff19 fsf fc0 sc0 ls0 ws0">ﬁle is not charged to the pr<span class="_ _0"></span>ocess.</div><div class="t m0 x35 h4b y241a ff16 fs27 fc0 sc0 ls0 ws0">8.15 <span class="_ _93"> </span>User<span class="_ _54"> </span>Identiﬁcation</div><div class="t m0 x32 h49 y241b ff19 fs26 fc0 sc0 ls0 ws0">Any <span class="_"> </span>pr<span class="_ _0"></span>ocess <span class="_"> </span>can <span class="_ _e"> </span>ﬁnd <span class="_"> </span>out <span class="_"> </span>its <span class="_"> </span>r<span class="_ _1"></span>eal <span class="_"> </span>and <span class="_"> </span>ef<span class="_ _0"></span>fective <span class="_"> </span>user <span class="_"> </span>ID <span class="_ _e"> </span>and <span class="_"> </span>group <span class="_ _e"> </span>ID.<span class="_ _60"> </span>Sometimes,</div><div class="t m0 x32 h49 y241c ff19 fs26 fc0 sc0 ls0 ws0">however<span class="_ _6"></span>,<span class="_ _35"> </span>we<span class="_ _45"> </span>want <span class="_ _9"></span>to <span class="_ _23"></span>ﬁnd <span class="_ _9"></span>out <span class="_ _9"></span>the <span class="_ _23"></span>login <span class="_ _9"></span>name <span class="_ _23"></span>of <span class="_ _9"></span>the <span class="_ _23"></span>user <span class="_ _9"></span>who’s <span class="_ _9"></span>running <span class="_ _23"></span>the <span class="_ _9"></span>program.</div><div class="t m0 x32 h4d y241d ff19 fs26 fc0 sc0 ls164 ws0">We <span class="_ _35"> </span>c<span class="_ _23"></span><span class="ls0">ould <span class="_ _e"> </span>call<span class="_ _59"> </span><span class="ff1a">getpwuid(getuid())</span><span class="lsa84">,b<span class="_ _55"></span><span class="ls0">ut <span class="_ _e"> </span>what <span class="_"> </span>if <span class="_ _53"> </span>a <span class="_"> </span>single <span class="_ _53"> </span>user <span class="_"> </span>has <span class="_ _e"> </span>multiple <span class="_ _e"> </span>login</span></span></span></div><div class="t m0 x32 h49 y241e ff19 fs26 fc0 sc0 ls0 ws0">names, <span class="_ _e"> </span>each <span class="_"> </span>with <span class="_ _53"> </span>the <span class="_"> </span>same <span class="_ _e"> </span>user <span class="_ _e"> </span>ID?<span class="_ _48"> </span>(A <span class="_"> </span>person <span class="_ _e"> </span>might <span class="_ _e"> </span>have <span class="_"> </span>multiple <span class="_ _e"> </span>entries <span class="_ _e"> </span>in <span class="_"> </span>the</div><div class="t m0 x32 h49 y241f ff19 fs26 fc0 sc0 ls0 ws0">passwor<span class="lsa85">dﬁ<span class="_ _b"></span><span class="ls0">le <span class="_ _3"></span>with <span class="_ _9"></span>the <span class="_ _3"></span>same <span class="_ _3"></span>user <span class="_ _3"></span>ID <span class="_ _3"></span>to <span class="_ _9"></span>have <span class="_ _3"></span>a <span class="_ _3"></span>different <span class="_ _2"></span>login <span class="_ _3"></span>shell <span class="_ _3"></span>for <span class="_ _9"></span>each <span class="_ _3"></span>entry<span class="_ _4"></span>.) <span class="_ _45"> </span>The</span></span></div><div class="t m0 x32 h49 y2420 ff19 fs26 fc0 sc0 ls0 ws0">system <span class="_ _47"> </span>normally <span class="_ _47"> </span>keeps <span class="_ _47"> </span>track <span class="_ _47"> </span>of <span class="_ _47"> </span>the <span class="_ _47"> </span>name <span class="_ _47"> </span>we <span class="_ _47"> </span>log <span class="_ _47"> </span>in <span class="_ _47"> </span>under <span class="_ _47"> </span>(Section <span class="_ _47"> </span>6.8), <span class="_ _47"> </span>and <span class="_ _47"> </span>the</div><div class="t m0 x32 h4d y2421 ff1a fs26 fc0 sc0 ls0 ws0">getlogin<span class="_ _80"> </span><span class="ff19">function provides a way to fetch that login name.</span></div><div class="t m0 x3f h4e y2422 ff1a fs28 fc0 sc0 ls0 ws0">#include &lt;unistd.h&gt;</div><div class="t m0 x3f h4e y2423 ff1a fs28 fc0 sc0 ls0 ws0">char *getlogin(void);</div><div class="t m0 x8c h4e y2424 ff19 fs28 fc0 sc0 ls0 ws0">Returns: pointer to string giving login name if OK,<span class="_"> </span><span class="ff1a">NULL<span class="_ _e"> </span></span>on error</div><div class="t m0 x32 h55 y2425 ff19 fs2c fc0 sc0 ls0 ws0">This function <span class="_ _2"></span>can <span class="_ _2"></span>fail <span class="_ _2"></span>if <span class="_ _2"></span>the <span class="_ _2"></span>process is <span class="_ _2"></span>not <span class="_ _2"></span>attached <span class="_ _2"></span>to a <span class="_ _2"></span>terminal <span class="_ _2"></span>that <span class="_ _2"></span>a <span class="_ _2"></span>user <span class="_ _2"></span>logged <span class="_ _2"></span>in <span class="_ _2"></span>to.</div><div class="t m0 x32 h60 y2426 ff19 fs2c fc0 sc0 ls155 ws0">We <span class="_ _53"> </span>n<span class="_ _9"></span><span class="ls0">ormally call these processes<span class="_"> </span><span class="ff1b">daemons</span><span class="ls5e9">.W<span class="_ _26"></span><span class="ls142">ed<span class="_ _d"></span><span class="ls0">iscuss them in Chapter 13.</span></span></span></span></div><a class="l" href="#pff" data-dest-detail='[15,"XYZ",50,757,1]'><div class="d m1" style="border-style:none;position:absolute;left:80.892634px;bottom:530.688916px;width:144.023689px;height:19.679993px;background-color:rgba(255,255,255,0.000001);"></div></a></div><div class="pi" data-data='{"ctm":[2.100000,0.000000,0.000000,2.100000,-115.668004,-156.491993]}'></div></div>
