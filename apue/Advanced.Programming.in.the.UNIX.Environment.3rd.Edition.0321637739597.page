<div id="pf255" class="pf w4 h1f" data-page-no="255"><div class="pc pc255 w4 h1f"><img class="bi x0 y0 w3 h4" alt="" src="apue/bg255.png"/><div class="t m0 x31 h2 y8e ff1 fs0 fc0 sc0 ls0 ws0"><span class="fc1 sc0">ptg10805159</span></div><div class="t m0 x35 h24 ya4 ff19 fs0 fc0 sc0 ls0 ws0">Section <span class="_"> </span>15.7<span class="_ _2bc"> </span>Message <span class="_"> </span>Queues<span class="_ _1b"> </span><span class="ff18">563</span></div><div class="t m0 x32 h26 y12f ff19 fsf fc0 sc0 ls5f ws0">We<span class="_ _9"></span><span class="ls0">’ll <span class="_ _42"> </span>see <span class="_ _42"> </span>that <span class="_ _42"> </span>these <span class="_ _42"> </span>three <span class="_ _42"> </span>commands <span class="_ _42"> </span>(<span class="ff1a">IPC_STAT</span>,<span class="_ _35"> </span><span class="ff1a">IPC_SET</span><span class="ls1225">,a<span class="_ _43"></span><span class="ls0">nd<span class="_ _44"> </span><span class="ff1a">IPC_RMID</span><span class="ls1225">)a<span class="_ _43"></span><span class="ls45">re <span class="_ _42"> </span>a<span class="_ _2"></span><span class="ls0">lso</span></span></span></span></span></span></div><div class="t m0 x32 h2a y130 ff19 fsf fc0 sc0 ls0 ws0">provided for semaphor<span class="_ _0"></span>es and shar<span class="_ _0"></span>ed memory<span class="_ _4"></span>.</div><div class="t m0 x3f h26 y131 ff19 fsf fc0 sc0 ls0 ws0">Data is placed onto a message queue by calling<span class="_"> </span><span class="ff1a">msgsnd</span>.</div><div class="t m0 x3f h57 yb37 ff1a fs2d fc0 sc0 ls0 ws0">#include &lt;sys/msg.h&gt;</div><div class="t m0 x3f h57 y441a ff1a fs2d fc0 sc0 ls0 ws0">int msgsnd(int<span class="_"> </span><span class="ff1b">msqid</span><span class="ls15c">,c<span class="_ _1d"></span><span class="ls0">onst void *<span class="ff1b">ptr</span><span class="ls15c">,s<span class="_ _5b"></span><span class="ls0">ize_t<span class="_"> </span><span class="ff1b">nbytes</span><span class="ls15c">,i<span class="_ _1d"></span><span class="ls0">nt<span class="_"> </span><span class="ff1b">ﬂag</span>);</span></span></span></span></span></span></div><div class="t m0 x153 h5f y441b ff19 fs2d fc0 sc0 ls0 ws0">Returns: 0 if OK,<span class="_"> </span><span class="ff20">−</span>1<span class="_"> </span>on<span class="_"> </span>error</div><div class="t m0 x32 h49 y441c ff19 fs26 fc0 sc0 ls0 ws0">As we mentioned earlier<span class="_ _6"></span><span class="lsfcc">,e<span class="_ _5"></span><span class="ls0">ach message is composed of a positive long integer type ﬁeld,</span></span></div><div class="t m0 x32 h4a y441d ff19 fs26 fc0 sc0 ls1226 ws0">an<span class="_ _b"></span><span class="ls0">on-negative <span class="_ _9"></span>length <span class="_ _9"></span>(<span class="ff1b">nbytes</span>), <span class="_ _3"></span>and <span class="_ _9"></span>the <span class="_ _9"></span>actual <span class="_ _3"></span>data <span class="_ _9"></span>bytes <span class="_ _3"></span>(corresponding <span class="_ _9"></span>to <span class="_ _3"></span>the <span class="_ _9"></span>length).</span></div><div class="t m0 x32 h49 y441e ff19 fs26 fc0 sc0 ls0 ws0">Messages ar<span class="lsd3">ea<span class="_ _4f"></span><span class="ls0">lways placed at the end of the queue.</span></span></div><div class="t m0 x3f h4a y441f ff19 fs26 fc0 sc0 ls0 ws0">The<span class="_"> </span><span class="ff1b">ptr<span class="_ _47"> </span></span>argument points <span class="_ _2"></span>to <span class="_ _2"></span>a <span class="_ _2"></span>long <span class="_ _2"></span>integer <span class="_ _2"></span>that <span class="_ _2"></span>contains the <span class="_ _2"></span>positive <span class="_ _2"></span>integer <span class="_ _2"></span>message</div><div class="t m0 x32 h49 y4420 ff19 fs26 fc0 sc0 ls0 ws0">type, <span class="_ _3"></span>and <span class="_ _3"></span>it <span class="_ _3"></span>is <span class="_ _3"></span>immediately <span class="_ _3"></span>followed <span class="_ _3"></span>by <span class="_ _3"></span>the <span class="_ _3"></span>message <span class="_ _3"></span>data.<span class="_ _16"> </span>(There<span class="_ _66"> </span>is<span class="_ _45"> </span>no<span class="_ _66"> </span>m<span class="_ _2"></span>essage <span class="_ _3"></span>data <span class="_ _3"></span>if</div><div class="t m0 x32 h4a y4421 ff1b fs26 fc0 sc0 ls0 ws0">nbytes<span class="_ _35"> </span><span class="ff19">is <span class="_ _23"> </span>0.)<span class="_ _51"> </span>If <span class="_ _42"> </span>the <span class="_ _23"></span>largest <span class="_ _23"></span>message <span class="_ _23"> </span>we <span class="_ _23"> </span>send <span class="_ _42"> </span>is <span class="_ _23"> </span>512 <span class="_ _23"> </span>bytes, <span class="_ _42"> </span>we <span class="_ _23"> </span>can <span class="_ _23"> </span>deﬁne <span class="_ _42"> </span>the <span class="_ _23"> </span>following</span></div><div class="t m0 x32 h49 y4422 ff19 fs26 fc0 sc0 ls0 ws0">structur<span class="_ _0"></span>e:</div><div class="t m0 x3f h4e y4423 ff1a fs28 fc0 sc0 ls0 ws0">struct mymesg {</div><div class="t m0 xf4 h4e y4424 ff1a fs28 fc0 sc0 ls0 ws0">long <span class="_"> </span>mtype;<span class="_ _189"> </span>/* positive message type */</div><div class="t m0 xf4 h4e y4425 ff1a fs28 fc0 sc0 ls0 ws0">char <span class="_"> </span>mtext[512];<span class="_"> </span>/* message data, of length<span class="_"> </span><span class="ff1b">nbytes<span class="_ _61"> </span></span>*/</div><div class="t m0 x3f h4e y4426 ff1a fs28 fc0 sc0 ls0 ws0">};</div><div class="t m0 x32 h4d y4427 ff19 fs26 fc0 sc0 ls0 ws0">The<span class="_ _35"> </span><span class="ff1b">ptr<span class="_ _44"> </span></span>argument <span class="_ _23"> </span>is <span class="_ _42"> </span>then <span class="_ _42"> </span>a <span class="_ _42"> </span>pointer <span class="_ _42"> </span>to <span class="_ _42"> </span>a<span class="_ _44"> </span><span class="ff1a">mymesg<span class="_ _35"> </span></span>structure. <span class="_ _35"> </span>The<span class="_ _44"> </span>message <span class="_ _23"> </span>type <span class="_ _42"> </span>can <span class="_ _42"> </span>be</div><div class="t m0 x32 h49 y4428 ff19 fs26 fc0 sc0 ls0 ws0">used by the receiver to fetch messages in an or<span class="_ _0"></span>der other than ﬁrst in, ﬁrst out.</div><div class="t m0 x76 h2d y4429 ff19 fs10 fc0 sc0 ls0 ws0">Some <span class="_ _42"> </span>platforms <span class="_ _42"> </span>support <span class="_ _42"> </span>both <span class="_ _42"> </span>32</div><div class="t m0 xcc h2d y442a ff19 fs10 fc0 sc0 ls0 ws0">-</div><div class="t m0 x6c h2d y4429 ff19 fs10 fc0 sc0 ls0 ws0">bit <span class="_ _42"> </span>and <span class="_ _42"> </span>64</div><div class="t m0 x1fe h2d y442a ff19 fs10 fc0 sc0 ls0 ws0">-</div><div class="t m0 xce h2d y4429 ff19 fs10 fc0 sc0 ls0 ws0">bit <span class="_ _42"> </span>environments. <span class="_ _45"> </span>This<span class="_ _45"> </span>affects <span class="_ _42"> </span>the <span class="_ _42"> </span>size <span class="_ _42"> </span>of <span class="_ _42"> </span>long</div><div class="t m0 x76 h2d y442b ff19 fs10 fc0 sc0 ls0 ws0">integers <span class="_ _3"></span>and <span class="_ _9"></span>pointers.<span class="_ _59"> </span>For <span class="_ _9"></span>example, <span class="_ _9"></span>on <span class="_ _3"></span>64</div><div class="t m0 xaf h2d y442c ff19 fs10 fc0 sc0 ls0 ws0">-</div><div class="t m0 x179 h2d y442b ff19 fs10 fc0 sc0 ls0 ws0">bit <span class="_ _3"></span>SP<span class="_ _1"></span>ARC <span class="_ _9"></span>systems, <span class="_ _9"></span>Solaris <span class="_ _3"></span>allows <span class="_ _9"></span>both <span class="_ _9"></span>32</div><div class="t m0 x18e h2d y442c ff19 fs10 fc0 sc0 ls0 ws0">-</div><div class="t m0 xe5 h2d y442b ff19 fs10 fc0 sc0 ls0 ws0">bit <span class="_ _3"></span>and</div><div class="t m0 x76 h2d y442d ff19 fs10 fc0 sc0 ls0 ws0">64</div><div class="t m0 x159 h2d y442e ff19 fs10 fc0 sc0 ls0 ws0">-</div><div class="t m0 x1f h2d y442d ff19 fs10 fc0 sc0 ls0 ws0">bit applications to coexist.<span class="_ _44"> </span>If a 32</div><div class="t m0 x19a h2d y442e ff19 fs10 fc0 sc0 ls0 ws0">-</div><div class="t m0 x1f3 h2d y442d ff19 fs10 fc0 sc0 ls0 ws0">bit application were<span class="_"> </span>to<span class="_"> </span>exchange this structur<span class="ls1227">eo<span class="_ _5"></span><span class="ls0">ver a pipe</span></span></div><div class="t m0 x76 h2d y442f ff19 fs10 fc0 sc0 ls0 ws0">or a socket with <span class="_ _2"></span>a 64</div><div class="t m0 xa8 h2d y4430 ff19 fs10 fc0 sc0 ls0 ws0">-</div><div class="t m0 xb7 h2d y442f ff19 fs10 fc0 sc0 ls0 ws0">bit application, problems would arise, because <span class="_ _2"></span>the size of a <span class="_ _2"></span>long integer is</div><div class="t m0 x76 h2d y4431 ff19 fs10 fc0 sc0 ls1228 ws0">4b<span class="_ _b"></span><span class="ls0">ytes <span class="_ _23"> </span>in <span class="_ _42"> </span>a <span class="_ _23"> </span>32</span></div><div class="t m0 x1d0 h2d y4432 ff19 fs10 fc0 sc0 ls0 ws0">-</div><div class="t m0 x2f h2d y4431 ff19 fs10 fc0 sc0 ls0 ws0">bit <span class="_ _23"> </span>application, <span class="_ _23"> </span>but <span class="_ _23"> </span>8 <span class="_ _23"> </span>bytes <span class="_ _23"> </span>in <span class="_ _42"> </span>a <span class="_ _23"> </span>64</div><div class="t m0 x73 h2d y4432 ff19 fs10 fc0 sc0 ls0 ws0">-</div><div class="t m0 x65 h2d y4431 ff19 fs10 fc0 sc0 ls0 ws0">bit <span class="_ _23"> </span>application.<span class="_ _46"> </span>This <span class="_ _42"> </span>means <span class="_ _23"> </span>that <span class="_ _23"> </span>a <span class="_ _23"> </span>32</div><div class="t m0 x40 h2d y4432 ff19 fs10 fc0 sc0 ls0 ws0">-</div><div class="t m0 xcf h2d y4431 ff19 fs10 fc0 sc0 ls0 ws0">bit</div><div class="t m0 x76 h5e y4433 ff19 fs10 fc0 sc0 ls0 ws0">application <span class="_ _9"></span>will <span class="_ _23"> </span>expect <span class="_ _9"></span>that <span class="_ _9"> </span>the<span class="_ _47"> </span><span class="ff1a">mtext<span class="_ _47"> </span></span>ﬁeld <span class="_ _23"> </span>will <span class="_ _9"></span>start <span class="_ _23"> </span>4 <span class="_ _9"></span>bytes <span class="_ _23"> </span>after <span class="_ _9"></span>the <span class="_ _9"> </span>start <span class="_ _23"> </span>of <span class="_ _9"></span>the <span class="_ _23"> </span>structur<span class="_ _0"></span>e,</div><div class="t m0 x76 h2d y4434 ff19 fs10 fc0 sc0 ls0 ws0">whereas <span class="_ _3"></span>a <span class="_ _9"> </span>64</div><div class="t m0 x134 h2d y4435 ff19 fs10 fc0 sc0 ls0 ws0">-</div><div class="t m0 x3c h5e y4434 ff19 fs10 fc0 sc0 ls0 ws0">bit <span class="_ _9"></span>application <span class="_ _9"></span>will <span class="_ _9"></span>expect <span class="_ _9"></span>the<span class="_ _47"> </span><span class="ff1a">mtext<span class="_ _66"> </span></span>ﬁeld <span class="_ _9"> </span>to <span class="_ _23"> </span>start <span class="_ _3"></span>8 <span class="_ _23"> </span>bytes <span class="_ _3"></span>after <span class="_ _23"> </span>the <span class="_ _3"></span>start <span class="_ _23"> </span>of <span class="_ _3"></span>the</div><div class="t m0 x76 h2d y4436 ff19 fs10 fc0 sc0 ls0 ws0">structure. <span class="_ _80"> </span>In<span class="_ _47"> </span>this <span class="_ _3"></span>situation, <span class="_ _9"></span>part <span class="_ _9"></span>of <span class="_ _9"></span>the <span class="_ _9"></span>64</div><div class="t m0 x74 h2d y4437 ff19 fs10 fc0 sc0 ls0 ws0">-</div><div class="t m0 x107 h5e y4436 ff19 fs10 fc0 sc0 ls0 ws0">bit <span class="_ _3"></span>application’s<span class="_ _47"> </span><span class="ff1a">mtype<span class="_ _66"> </span></span>ﬁeld <span class="_ _9"></span>will <span class="_ _9"></span>appear <span class="_ _3"></span>as <span class="_ _9"></span>part <span class="_ _9"></span>of</div><div class="t m0 x76 h5e y4438 ff19 fs10 fc0 sc0 ls0 ws0">the<span class="_ _e"> </span><span class="ff1a">mtext<span class="_ _80"> </span></span>ﬁeld <span class="_ _2"></span>to <span class="_ _2"></span>the <span class="_ _2"></span>32</div><div class="t m0 x15e h2d y4439 ff19 fs10 fc0 sc0 ls0 ws0">-</div><div class="t m0 x1d6 h2d y4438 ff19 fs10 fc0 sc0 ls0 ws0">bit <span class="_ _2"></span>application, <span class="_ _2"></span>and <span class="_ _2"></span>the <span class="_ _2"></span>ﬁrst <span class="_ _2"></span>4 <span class="_ _2"></span>bytes <span class="_ _2"></span>in <span class="_ _2"></span>the <span class="_ _2"></span>32</div><div class="t m0 x1fd h2d y4439 ff19 fs10 fc0 sc0 ls0 ws0">-</div><div class="t m0 x16f h5e y4438 ff19 fs10 fc0 sc0 ls0 ws0">bit <span class="_ _2"></span>application’s<span class="_ _e"> </span><span class="ff1a">mtext</span></div><div class="t m0 x76 h5e y443a ff19 fs10 fc0 sc0 ls0 ws0">ﬁeld will be interpreted as a part of the<span class="_"> </span><span class="ff1a">mtype<span class="_ _53"> </span></span>ﬁeld by the 64</div><div class="t m0 x1e9 h2d y443b ff19 fs10 fc0 sc0 ls0 ws0">-</div><div class="t m0 x21d h2d y443a ff19 fs10 fc0 sc0 ls0 ws0">bit application.</div><div class="t m0 x76 h2d y443c ff19 fs10 fc0 sc0 ls0 ws0">This <span class="_"> </span>pr<span class="_ _1"></span>oblem <span class="_"> </span>doesn’t <span class="_ _42"> </span>happen <span class="_"> </span>with <span class="_ _42"> </span>XSI <span class="_"> </span>message <span class="_ _42"> </span>queues, <span class="_"> </span>however<span class="_ _6"></span><span class="ls1229">.S<span class="_ _1d"></span><span class="ls0">olaris <span class="_"> </span>implements <span class="_ _42"> </span>the</span></span></div><div class="t m0 x76 h2d y443d ff19 fs10 fc0 sc0 ls0 ws0">32</div><div class="t m0 x159 h2d y443e ff19 fs10 fc0 sc0 ls0 ws0">-</div><div class="t m0 x1f h2d y443d ff19 fs10 fc0 sc0 ls0 ws0">bit <span class="_ _2"></span>version <span class="_ _3"></span>of <span class="_ _3"></span>the <span class="_ _2"></span>IPC <span class="_ _3"></span>system <span class="_ _3"></span>calls <span class="_ _2"></span>with <span class="_ _3"></span>different <span class="_ _2"></span>entry <span class="_ _2"></span>points <span class="_ _3"></span>than <span class="_ _3"></span>the <span class="_ _2"></span>64</div><div class="t m0 x210 h2d y443e ff19 fs10 fc0 sc0 ls0 ws0">-</div><div class="t m0 x37 h2d y443d ff19 fs10 fc0 sc0 ls0 ws0">bit <span class="_ _2"></span>version <span class="_ _3"></span>of <span class="_ _3"></span>the</div><div class="t m0 x76 h2d y443f ff19 fs10 fc0 sc0 ls0 ws0">IPC system <span class="_ _2"></span>calls.<span class="_ _4b"> </span>The system <span class="_ _2"></span>calls <span class="_ _2"></span>know <span class="_ _2"></span>how <span class="_ _2"></span>to <span class="_ _2"></span>deal <span class="_ _2"></span>with <span class="_ _2"></span>a <span class="_ _2"></span>32</div><div class="t m0 xfd h2d y4440 ff19 fs10 fc0 sc0 ls0 ws0">-</div><div class="t m0 x166 h2d y443f ff19 fs10 fc0 sc0 ls0 ws0">bit application <span class="_ _2"></span>communicating</div><div class="t m0 x76 h2d y4441 ff19 fs10 fc0 sc0 ls0 ws0">with <span class="_ _2"></span>a <span class="_ _2"></span>64</div><div class="t m0 x126 h2d y4442 ff19 fs10 fc0 sc0 ls0 ws0">-</div><div class="t m0 x185 h2d y4441 ff19 fs10 fc0 sc0 ls0 ws0">bit <span class="_ _2"></span>application, <span class="_ _2"></span>and <span class="_ _3"></span>treat <span class="_ _2"></span>the <span class="_ _2"></span>type <span class="_ _3"></span>ﬁeld <span class="_ _2"></span>specially <span class="_ _2"></span>to <span class="_ _3"></span>avoid <span class="_ _2"></span>it <span class="_ _3"></span>interfering <span class="_ _2"></span>with <span class="_ _3"></span>the <span class="_ _2"></span>data</div><div class="t m0 x76 h2d y4443 ff19 fs10 fc0 sc0 ls0 ws0">portion <span class="_ _23"> </span>of <span class="_ _42"> </span>the <span class="_ _23"> </span>message.<span class="_ _16"> </span>The <span class="_ _23"> </span>only <span class="_ _42"> </span>potential <span class="_ _42"> </span>problem <span class="_ _23"> </span>is <span class="_ _23"> </span>a <span class="_ _42"> </span>loss <span class="_ _23"> </span>of <span class="_ _42"> </span>information <span class="_ _23"> </span>when <span class="_ _42"> </span>a <span class="_ _23"> </span>64</div><div class="t m0 x40 h2d y4444 ff19 fs10 fc0 sc0 ls0 ws0">-</div><div class="t m0 xcf h2d y4443 ff19 fs10 fc0 sc0 ls0 ws0">bit</div><div class="t m0 x76 h2d y4445 ff19 fs10 fc0 sc0 ls0 ws0">application sends <span class="_ _2"></span>a <span class="_ _2"></span>message <span class="_ _2"></span>with <span class="_ _2"></span>a <span class="_ _2"></span>value in <span class="_ _2"></span>the <span class="_ _2"></span>8</div><div class="t m0 x19d h2d y4446 ff19 fs10 fc0 sc0 ls0 ws0">-</div><div class="t m0 x17b h2d y4445 ff19 fs10 fc0 sc0 ls0 ws0">byte type <span class="_ _2"></span>ﬁeld <span class="_ _2"></span>that <span class="_ _2"></span>is <span class="_ _2"></span>larger than <span class="_ _2"></span>will <span class="_ _2"></span>ﬁt <span class="_ _2"></span>in a</div><div class="t m0 x76 h2d y4447 ff19 fs10 fc0 sc0 ls0 ws0">32</div><div class="t m0 x159 h2d y4448 ff19 fs10 fc0 sc0 ls0 ws0">-</div><div class="t m0 x1f h2d y4447 ff19 fs10 fc0 sc0 ls0 ws0">bit <span class="_ _9"> </span>application’s <span class="_ _23"> </span>4</div><div class="t m0 xb7 h2d y4448 ff19 fs10 fc0 sc0 ls0 ws0">-</div><div class="t m0 x186 h2d y4447 ff19 fs10 fc0 sc0 ls0 ws0">byte <span class="_ _9"> </span>type <span class="_ _23"> </span>ﬁeld.<span class="_ _59"> </span>In <span class="_ _23"> </span>this <span class="_ _9"> </span>case, <span class="_ _23"> </span>the <span class="_ _9"> </span>32</div><div class="t m0 x1d1 h2d y4448 ff19 fs10 fc0 sc0 ls0 ws0">-</div><div class="t m0 x1da h2d y4447 ff19 fs10 fc0 sc0 ls0 ws0">bit <span class="_ _9"> </span>application <span class="_ _23"> </span>will <span class="_ _9"> </span>see <span class="_ _23"> </span>a <span class="_ _9"></span>truncated</div><div class="t m0 x76 h2d y4449 ff19 fs10 fc0 sc0 ls0 ws0">type value.</div><div class="t m0 x3f h4d y444a ff19 fs26 fc0 sc0 ls0 ws0">A<span class="_ _35"> </span><span class="ff1b">ﬂag<span class="_ _44"> </span></span>value <span class="_ _23"> </span>of<span class="_ _44"> </span><span class="ff1a">IPC_NOWAIT<span class="_ _35"> </span></span>can <span class="_ _42"> </span>be <span class="_ _42"> </span>speciﬁed.<span class="_ _51"> </span>This <span class="_ _42"> </span>is <span class="_ _42"> </span>similar <span class="_ _23"> </span>to <span class="_ _42"> </span>the <span class="_ _42"> </span>nonblocking</div><div class="t m0 x32 h49 y444b ff19 fs26 fc0 sc0 ls0 ws0">I/O <span class="_ _2"></span>ﬂag <span class="_ _2"></span>for <span class="_ _3"></span>ﬁle <span class="_ _2"></span>I/O <span class="_ _3"></span>(Section <span class="_ _2"></span>14.2).<span class="_ _61"> </span>If <span class="_ _3"></span>the <span class="_ _2"></span>message <span class="_ _3"></span>queue <span class="_ _2"></span>is <span class="_ _3"></span>full <span class="_ _2"></span>(either <span class="_ _3"></span>the <span class="_ _2"></span>total <span class="_ _2"></span>number</div><div class="t m0 x32 h49 y444c ff19 fs26 fc0 sc0 ls0 ws0">of <span class="_ _9"></span>messages <span class="_ _9"></span>on <span class="_ _23"></span>the <span class="_ _9"></span>queue <span class="_ _9"></span>equals <span class="_ _23"></span>the <span class="_ _9"></span>system <span class="_ _9"></span>limit, <span class="_ _9"></span>or <span class="_ _23"></span>the <span class="_ _9"></span>total <span class="_ _9"></span>number <span class="_ _23"></span>of <span class="_ _9"></span>bytes <span class="_ _9"></span>on <span class="_ _9"></span>the</div><div class="t m0 x32 h4d y444d ff19 fs26 fc0 sc0 ls0 ws0">queue <span class="_ _47"> </span>equals <span class="_ _47"> </span>the <span class="_ _45"> </span>system <span class="_ _47"> </span>limit), <span class="_ _47"> </span>specifying<span class="_ _16"> </span><span class="ff1a">IPC_NOWAIT<span class="_"> </span></span>causes<span class="_ _61"> </span><span class="ff1a">msgsnd<span class="_"> </span></span>to <span class="_ _66"> </span>return</div><div class="t m0 x32 h4d y444e ff19 fs26 fc0 sc0 ls0 ws0">immediately <span class="_ _3"></span>with <span class="_ _3"></span>an <span class="_ _3"></span>error <span class="_ _2"></span>of<span class="_ _47"> </span><span class="ff1a">EAGAIN</span><span class="ls122a">.I<span class="_ _1d"></span><span class="ls0">f<span class="_ _45"> </span><span class="ff1a">IPC_NOWAIT<span class="_ _66"> </span></span>is <span class="_ _3"></span>not <span class="_ _9"></span>speciﬁed, <span class="_ _2"></span>we <span class="_ _3"></span>ar<span class="ls122b">eb<span class="_ _8"></span><span class="ls0">locked</span></span></span></span></div><div class="t m0 x32 h49 y444f ff19 fs26 fc0 sc0 ls0 ws0">until there<span class="_"> </span>is<span class="_ _66"> </span>room for the <span class="_ _2"></span>message, <span class="_ _2"></span>the queue <span class="_ _2"></span>is removed from the <span class="_ _2"></span>system, or <span class="_ _2"></span>a signal <span class="_ _2"></span>is</div><div class="t m0 x32 h4d y4450 ff19 fs26 fc0 sc0 ls0 ws0">caught and the <span class="_ _2"></span>signal handler <span class="_ _2"></span>returns. <span class="_"> </span>In<span class="_"> </span>the <span class="_ _2"></span>second case, an <span class="_ _2"></span>error of<span class="_"> </span><span class="ff1a">EIDRM<span class="_ _66"> </span></span>is returned</div><div class="t m0 x32 h4d y4451 ff19 fs26 fc0 sc0 ls0 ws0">(‘<span class="_ _0"></span>‘identiﬁer r<span class="_ _0"></span>emoved’<span class="_ _0"></span>’); in the last case, the error r<span class="_ _1"></span>eturned is<span class="_"> </span><span class="ff1a">EINTR</span>.</div></div><div class="pi" data-data='{"ctm":[2.100000,0.000000,0.000000,2.100000,-115.668004,-156.491993]}'></div></div>
