<div id="pf2ee" class="pf w4 h1f" data-page-no="2ee"><div class="pc pc2ee w4 h1f"><img class="bi x0 y0 w3 h4" alt="" src="bg2ee.png"/><div class="t m0 x31 h2 y8e ff1 fs0 fc0 sc0 ls0 ws0"><span class="fc1 sc0">ptg10805159</span></div><div class="t m0 x35 h24 ya4 ff18 fs0 fc0 sc0 ls0 ws0">716<span class="_ _1b"> </span><span class="ff19">Pseudo <span class="_"> </span>T<span class="_ _6"></span>erminals <span class="_ _23a"> </span>Chapter<span class="_ _4b"> </span>19</span></div><div class="t m0 x15c h51 y5288 ff19 fs2a fc0 sc0 ls34e ws0">re<span class="ls0">ad and write</span></div><div class="t m0 x1eb h51 y5289 ff19 fs2a fc0 sc0 ls0 ws0">functions</div><div class="t m0 x174 h2d y528a ff19 fs10 fc0 sc0 ls0 ws0">terminal</div><div class="t m0 x176 h2d y528b ff19 fs10 fc0 sc0 ls0 ws0">line discipline</div><div class="t m0 x1de h2e y528c ff19 fs11 fc0 sc0 ls0 ws0">pseudo terminal</div><div class="t m0 x22b h2e y528d ff19 fs11 fc0 sc0 ls0 ws0">slave</div><div class="t m0 x13c h2f y528e ff19 fs12 fc0 sc0 ls0 ws0">pseudo terminal</div><div class="t m0 x4a h2f y528f ff19 fs12 fc0 sc0 ls0 ws0">master</div><div class="t m0 x145 h30 y5290 ff19 fs13 fc0 sc0 ls4d0 ws0">re<span class="ls0">ad and write</span></div><div class="t m0 x131 h30 y5291 ff19 fs13 fc0 sc0 ls0 ws0">functions</div><div class="t m0 x177 h31 y5292 ff19 fs14 fc0 sc0 ls0 ws0">user</div><div class="t m0 x1d3 h31 y5293 ff19 fs14 fc0 sc0 ls0 ws0">process</div><div class="t m0 x21f h32 y5294 ff19 fs15 fc0 sc0 ls0 ws0">user</div><div class="t m0 x136 h32 y5295 ff19 fs15 fc0 sc0 ls0 ws0">process</div><div class="t m0 x45 h70 y5296 ff1a fs16 fc0 sc0 ls0 ws0">fork</div><div class="t m0 x45 h70 y5297 ff1a fs16 fc0 sc0 ls0 ws0">exec</div><div class="t m0 x212 h173 y5298 ff1b fs85 fc0 sc0 ls0 ws0">stdin, stdout, stderr</div><div class="t m0 xba h148 y5299 ff19 fsa3 fc0 sc0 ls0 ws0">kernel</div><div class="t m0 x206 h148 y529a ff18 fsa3 fc0 sc0 ls0 ws0">Figure 19.1<span class="_ _5a"> </span><span class="ff19 ls154d">Ty<span class="_ _9"></span><span class="ls0">pical arrangement of processes using a pseudo terminal</span></span></div><div class="t m0 x3f h174 y529b ff19 fsc1 fc0 sc0 ls154e ws0">•N<span class="_ _4d"></span><span class="ls0">ormally<span class="_ _4"></span><span class="ls154f">,ap<span class="_ _d"></span><span class="ls1550">ro<span class="_ _2"></span><span class="ls0">cess opens <span class="_ _2"></span>the <span class="_ _2"></span>pseudo <span class="_ _2"></span>terminal <span class="_ _2"></span>master <span class="_ _2"></span>and then <span class="_ _2"></span>calls<span class="_ _66"> </span><span class="ff1a">fork</span><span class="ls1551">.T<span class="_ _4a"></span><span class="ls0">he</span></span></span></span></span></span></div><div class="t m0 x15 h175 y529c ff19 fsc1 fc0 sc0 ls0 ws0">child <span class="_ _2"></span>establishes <span class="_ _3"></span>a <span class="_ _2"></span>new <span class="_ _3"></span>session, <span class="_ _3"></span>opens <span class="_ _2"></span>the <span class="_ _3"></span>corresponding <span class="_ _2"></span>pseudo <span class="_ _3"></span>terminal <span class="_ _2"></span>slave,</div><div class="t m0 x15 h175 y529d ff19 fsc1 fc0 sc0 ls0 ws0">duplicates <span class="_ _45"> </span>the <span class="_ _35"> </span>ﬁle <span class="_ _35"> </span>descriptor <span class="_ _45"> </span>to <span class="_ _35"> </span>the <span class="_ _45"> </span>standar<span class="ls1552">di<span class="_ _26"></span><span class="ls0">nput, <span class="_ _35"> </span>standar<span class="_ _0"></span><span class="ls1552">do<span class="_ _7"></span><span class="ls0">utput, <span class="_ _35"> </span>and</span></span></span></span></div><div class="t m0 x15 h174 y529e ff19 fsc1 fc0 sc0 ls0 ws0">standar<span class="ls1553">de<span class="_ _55"></span><span class="ls0">rror<span class="_ _6"></span><span class="ls1553">,a<span class="_ _c"></span><span class="ls0">nd <span class="_ _53"> </span>then <span class="_ _53"> </span>calls<span class="_ _4b"> </span><span class="ff1a">exec</span><span class="ls1554">.T<span class="_ _52"></span><span class="ls0">he <span class="_ _42"> </span>pseudo <span class="_ _e"> </span>terminal <span class="_ _53"> </span>slave <span class="_ _53"> </span>becomes <span class="_ _53"> </span>the</span></span></span></span></span></span></div><div class="t m0 x15 h175 y529f ff19 fsc1 fc0 sc0 ls0 ws0">controlling terminal for the child pr<span class="_ _0"></span>ocess.</div><div class="t m0 x3f h175 y52a0 ff19 fsc1 fc0 sc0 ls154e ws0">•I<span class="_ _4d"></span><span class="ls1555">ta<span class="_ _b"></span><span class="ls0">ppears <span class="_ _9"></span>to <span class="_ _9"></span>the <span class="_ _23"></span>user <span class="_ _9"></span>process <span class="_ _9"></span>above <span class="_ _9"></span>the <span class="_ _23"></span>slave <span class="_ _9"></span>that <span class="_ _9"></span>its <span class="_ _23"></span>standar<span class="ls1556">di<span class="_ _b"></span><span class="ls0">nput, <span class="_ _3"></span>standard</span></span></span></span></div><div class="t m0 x15 h175 y52a1 ff19 fsc1 fc0 sc0 ls0 ws0">output, <span class="_ _9"></span>and <span class="_ _9"></span>standar<span class="ls1557">de<span class="_ _b"></span><span class="ls0">rror <span class="_ _3"></span>ar<span class="ls1557">eat<span class="_ _b"></span><span class="ls0">erminal <span class="_ _9"></span>device.<span class="_ _5a"> </span>The <span class="_ _23"></span>process <span class="_ _3"></span>can <span class="_ _23"></span>issue <span class="_ _9"></span>all <span class="_ _9"></span>the</span></span></span></span></div><div class="t m0 x15 h175 y52a2 ff19 fsc1 fc0 sc0 ls0 ws0">terminal I/O functions <span class="_ _2"></span>from Chapter 18 on these <span class="_ _2"></span>descriptors.<span class="_ _46"> </span>But since the <span class="_ _2"></span>slave</div><div class="t m0 x15 h175 y52a3 ff19 fsc1 fc0 sc0 ls0 ws0">isn’t <span class="_ _42"> </span>a <span class="_ _53"> </span>real <span class="_ _53"> </span>terminal <span class="_ _42"> </span>device, <span class="_ _53"> </span>functions <span class="_ _53"> </span>that <span class="_ _53"> </span>don’t <span class="_ _53"> </span>make <span class="_ _53"> </span>sense <span class="_ _53"> </span>(e.g., <span class="_ _53"> </span>change <span class="_ _53"> </span>the</div><div class="t m0 x15 h175 y52a4 ff19 fsc1 fc0 sc0 ls0 ws0">baud rate, send a break character<span class="_ _6"></span><span class="ls1558">,s<span class="_ _d"></span><span class="ls0">et odd parity) ar<span class="ls1558">ej<span class="_ _d"></span><span class="ls0">ust ignored.</span></span></span></span></div><div class="t m0 x3f h175 y52a5 ff19 fsc1 fc0 sc0 ls154e ws0">•A<span class="_ _4d"></span><span class="ls0">nything <span class="_ _42"> </span>written <span class="_ _42"> </span>to <span class="_ _42"> </span>the <span class="_ _42"> </span>master <span class="_ _42"> </span>appears <span class="_ _42"> </span>as <span class="_ _42"> </span>input <span class="_ _42"> </span>to <span class="_ _42"> </span>the <span class="_ _42"> </span>slave, <span class="_ _42"> </span>and <span class="_ _42"> </span>vice <span class="_ _53"> </span>versa.</span></div><div class="t m0 x15 h175 y52a6 ff19 fsc1 fc0 sc0 ls0 ws0">Indeed, <span class="_ _2"></span>all <span class="_ _3"></span>the <span class="_ _3"></span>input <span class="_ _3"></span>to <span class="_ _3"></span>the <span class="_ _2"></span>slave <span class="_ _3"></span>comes <span class="_ _3"></span>from <span class="_ _2"></span>the <span class="_ _3"></span>user <span class="_ _3"></span>process <span class="_ _2"></span>above <span class="_ _3"></span>the <span class="_ _3"></span>pseudo</div><div class="t m0 x15 h175 y52a7 ff19 fsc1 fc0 sc0 ls0 ws0">terminal <span class="_ _42"> </span>master<span class="_ _6"></span><span class="ls1559">.T<span class="_ _7"></span><span class="ls0">his <span class="_ _42"> </span>behaves <span class="_ _42"> </span>like <span class="_ _42"> </span>a <span class="_ _42"> </span>bidirectional <span class="_ _42"> </span>pipe, <span class="_ _42"> </span>but <span class="_ _42"> </span>with <span class="_ _42"> </span>the <span class="_ _42"> </span>terminal</span></span></div><div class="t m0 x15 h175 y52a8 ff19 fsc1 fc0 sc0 ls0 ws0">line <span class="_ _42"> </span>discipline <span class="_ _23"> </span>module <span class="_ _42"> </span>above <span class="_ _42"> </span>the <span class="_ _23"> </span>slave, <span class="_ _42"> </span>we <span class="_ _42"> </span>have <span class="_ _42"> </span>additional <span class="_ _23"> </span>capabilities <span class="_ _42"> </span>over <span class="_ _42"> </span>a</div><div class="t m0 x15 h175 y52a9 ff19 fsc1 fc0 sc0 ls0 ws0">plain pipe.</div><div class="t m0 x32 h175 y52aa ff19 fsc1 fc0 sc0 ls0 ws0">Figur<span class="ls155a">e1<span class="_ _8"></span><span class="ls0">9.1 <span class="_ _2"></span>shows <span class="_ _2"></span>what <span class="_ _3"></span>a <span class="_ _2"></span>pseudo <span class="_ _2"></span>terminal <span class="_ _2"></span>looks <span class="_ _2"></span>like <span class="_ _2"></span>on <span class="_ _3"></span>a <span class="_ _2"></span>FreeBSD, Mac <span class="_ _2"></span>OS <span class="_ _3"></span>X, <span class="_ _2"></span>or <span class="_ _2"></span>Linux</span></span></div><div class="t m0 x32 h175 y52ab ff19 fsc1 fc0 sc0 ls0 ws0">system. <span class="_"> </span>In<span class="_"> </span>Section 19.3, we show how to open these devices.</div><div class="t m0 x3f h175 y52ac ff19 fsc1 fc0 sc0 ls0 ws0">Under <span class="_ _59"> </span>Solaris, <span class="_ _59"> </span>a <span class="_ _46"> </span>pseudo <span class="_ _59"> </span>terminal <span class="_ _46"> </span>is <span class="_ _59"> </span>built <span class="_ _46"> </span>using <span class="_ _59"> </span>the <span class="_ _46"> </span>STREAMS <span class="_ _59"> </span>subsystem.</div><div class="t m0 x32 h175 y52ad ff19 fsc1 fc0 sc0 ls0 ws0">Figur<span class="ls155b">e1<span class="_ _43"></span><span class="ls0">9.2 <span class="_ _23"></span>details <span class="_ _23"></span>the <span class="_ _9"></span>arrangement <span class="_ _23"></span>of <span class="_ _23"></span>the <span class="_ _9"></span>pseudo <span class="_ _23"> </span>terminal <span class="_ _23"></span>STREAMS <span class="_ _9"></span>modules <span class="_ _23"> </span>under</span></span></div><div class="t m0 x32 h175 y52ae ff19 fsc1 fc0 sc0 ls0 ws0">Solaris. <span class="_ _66"> </span>The<span class="_ _47"> </span>two <span class="_ _2"></span>STREAMS <span class="_ _3"></span>modules <span class="_ _2"></span>that <span class="_ _2"></span>ar<span class="ls155c">es<span class="_ _4f"></span><span class="ls0">hown <span class="_ _2"></span>as <span class="_ _2"></span>dashed <span class="_ _3"></span>boxes <span class="_ _2"></span>ar<span class="ls155d">eo<span class="_ _4f"></span><span class="ls0">ptional. <span class="_ _66"> </span>The</span></span></span></span></div><div class="t m0 x32 h174 y52af ff1a fsc1 fc0 sc0 ls0 ws0">pckt<span class="_ _4b"> </span><span class="ff19">and<span class="_ _59"> </span></span>ptem<span class="_ _59"> </span><span class="ff19">modules <span class="_ _e"> </span>help <span class="_ _e"> </span>provide <span class="_ _e"> </span>semantics <span class="_ _e"> </span>speciﬁc <span class="_"> </span>to <span class="_ _53"> </span>pseudo <span class="_"> </span>terminals.<span class="_ _65"> </span>The</span></div><div class="t m0 x32 h174 y52b0 ff19 fsc1 fc0 sc0 ls0 ws0">other <span class="_"> </span>two <span class="_ _e"> </span>modules <span class="_"> </span>(<span class="ff1a">ldterm<span class="_ _4b"> </span></span>and<span class="_ _59"> </span><span class="ff1a">ttcompat</span><span class="ls155e">)p<span class="_ _55"></span><span class="ls1550">ro<span class="ls0">vide <span class="_"> </span>line <span class="_"> </span>discipline <span class="_ _e"> </span>processing. <span class="_ _59"> </span>In</span></span></span></div><div class="t m0 x32 h175 y52b1 ff19 fsc1 fc0 sc0 ls0 ws0">Section 19.3, we show how to build this arrangement of STREAMS modules.</div></div><div class="pi" data-data='{"ctm":[2.100000,0.000000,0.000000,2.100000,-115.668004,-156.491993]}'></div></div>
