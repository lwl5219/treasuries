<div id="pfd4" class="pf w4 h1f" data-page-no="d4"><div class="pc pcd4 w4 h1f"><img class="bi x0 y0 w3 h4" alt="" src="bgd4.png"/><div class="t m0 x31 h2 y8e ff1 fs0 fc0 sc0 ls0 ws0"><span class="fc1 sc0">ptg10805159</span></div><div class="t m0 x35 h24 ya4 ff18 fs0 fc0 sc0 ls0 ws0">178<span class="_ _1b"> </span><span class="ff19">System <span class="_"> </span>Data <span class="_"> </span>Files <span class="_"> </span>and <span class="_"> </span>Information<span class="_ _114"> </span>Chapter <span class="_"> </span>6</span></div><div class="t m0 xa5 h52 y597 ff1a fs2a fc0 sc0 ls0 ws0">struct passwd<span class="_ _7e"> </span><span class="ff19">FreeBSD <span class="_ _3a"> </span>Linux<span class="_ _141"> </span>Mac OS X<span class="_ _93"> </span>Solaris</span></div><div class="t m0 x1cf h51 y598 ff19 fs2a fc0 sc0 ls0 ws0">member <span class="_ _12a"> </span>8.0<span class="_ _dc"> </span>3.2.0 <span class="_ _17"> </span>10.6.8<span class="_ _1a8"> </span>10</div><div class="t m0 x52 h51 y599 ff19 fs2a fc0 sc0 ls0 ws0">Description<span class="_ _1ea"> </span>POSIX.1</div><div class="t m0 x2c h5e y59a ff19 fs10 fc0 sc0 ls0 ws0">user name<span class="_ _18a"> </span><span class="ff1a">char <span class="_"> </span>*pw_name<span class="_ _e0"> </span></span><span class="ls76e">•••••</span></div><div class="t m0 x2c h5e y59b ff19 fs10 fc0 sc0 ls0 ws0">encrypted password<span class="_ _2f"> </span><span class="ff1a">char <span class="_"> </span>*pw_passwd<span class="_ _b8"> </span></span><span class="ls76e">••••</span></div><div class="t m0 x2c h5e y59c ff19 fs10 fc0 sc0 ls0 ws0">numerical user ID<span class="_ _6b"> </span><span class="ff1a">uid_t <span class="_"> </span>pw_uid<span class="_ _17e"> </span></span><span class="ls76e">•••••</span></div><div class="t m0 x2c h5e y59d ff19 fs10 fc0 sc0 ls0 ws0">numerical group ID<span class="_ _16e"> </span><span class="ff1a">gid_t <span class="_"> </span>pw_gid<span class="_ _1eb"> </span></span><span class="ls76e">•••••</span></div><div class="t m0 x2c h5e y59e ff19 fs10 fc0 sc0 ls0 ws0">comment ﬁeld<span class="_ _b6"> </span><span class="ff1a">char <span class="_"> </span>*pw_gecos<span class="_ _1ec"> </span></span><span class="ls76e">••••</span></div><div class="t m0 x2c h5e y59f ff19 fs10 fc0 sc0 ls0 ws0">initial working directory<span class="_ _12b"> </span><span class="ff1a">char <span class="_"> </span>*pw_dir<span class="_ _17e"> </span></span><span class="ls76e">•••••</span></div><div class="t m0 x2c h5e y5a0 ff19 fs10 fc0 sc0 ls0 ws0">initial shell (user program)<span class="_ _179"> </span><span class="ff1a">char <span class="_"> </span>*pw_shell<span class="_ _78"> </span></span><span class="ls76e">•••••</span></div><div class="t m0 x2c h5e y5a1 ff19 fs10 fc0 sc0 ls0 ws0">user access class<span class="_ _bc"> </span><span class="ff1a">char <span class="_"> </span>*pw_class<span class="_ _1ec"> </span></span><span class="ls76f">••</span></div><div class="t m0 x2c h5e y5a2 ff19 fs10 fc0 sc0 ls0 ws0">next time to change password<span class="_ _35"> </span><span class="ff1a">time_t pw_change<span class="_ _b8"> </span></span><span class="ls76f">••</span></div><div class="t m0 x2c h5e y5a3 ff19 fs10 fc0 sc0 ls0 ws0">account expiration time<span class="_ _dc"> </span><span class="ff1a">time_t pw_expire<span class="_ _b8"> </span></span><span class="ls76f">••</span></div><div class="t m0 xc0 h4f y1829 ff18 fs11 fc0 sc0 ls0 ws0">Figure 6.1<span class="_ _5a"> </span><span class="ff19">Fields in<span class="_"> </span><span class="ff1a">/etc/passwd<span class="_ _e"> </span></span>ﬁle</span></div><div class="t m0 x3f h54 y182a ff19 fs2c fc0 sc0 ls0 ws0">Historically<span class="_ _4"></span><span class="ls770">,t<span class="_ _43"></span><span class="ls0">he <span class="_ _42"> </span>passwor<span class="ls770">dﬁ<span class="_ _43"></span><span class="ls0">le <span class="_ _23"></span>has <span class="_ _23"> </span>been <span class="_ _42"> </span>stored <span class="_ _9"></span>in<span class="_ _44"> </span><span class="ff1a">/etc/passwd<span class="_ _35"> </span></span>and <span class="_ _23"></span>has <span class="_ _23"> </span>been <span class="_ _42"> </span>an</span></span></span></span></div><div class="t m0 x32 h55 y182b ff19 fs2c fc0 sc0 ls0 ws0">ASCII <span class="_ _42"> </span>ﬁle.<span class="_ _51"> </span>Each <span class="_ _42"> </span>line <span class="_ _42"> </span>contains <span class="_ _23"> </span>the <span class="_ _42"> </span>ﬁelds <span class="_ _42"> </span>described <span class="_ _42"> </span>in <span class="_ _23"> </span>Figur<span class="ls771">e6<span class="_ _43"></span><span class="ls0">.1, <span class="_ _23"> </span>separated <span class="_ _42"> </span>by <span class="_ _42"> </span>colons.</span></span></div><div class="t m0 x32 h54 y182c ff19 fs2c fc0 sc0 ls0 ws0">For example, four lines from the<span class="_"> </span><span class="ff1a">/etc/passwd<span class="_ _80"> </span></span>ﬁle on Linux could be</div><div class="t m0 x3f h5d y182d ff1a fs2f fc0 sc0 ls0 ws0">root:x:0:0:root:/root:/bin/bash</div><div class="t m0 x3f h5d y182e ff1a fs2f fc0 sc0 ls0 ws0">squid:x:23:23::/var/spool/squid:/dev/null</div><div class="t m0 x3f h5d y182f ff1a fs2f fc0 sc0 ls0 ws0">nobody:x:65534:65534:Nobody:/home:/bin/sh</div><div class="t m0 x3f h5d y1830 ff1a fs2f fc0 sc0 ls0 ws0">sar:x:205:105:Stephen Rago:/home/sar:/bin/bash</div><div class="t m0 x32 h55 y1831 ff19 fs2c fc0 sc0 ls0 ws0">Note the following points about these entries.</div><div class="t m0 x3f h54 y1832 ff19 fs2c fc0 sc0 ls237 ws0">•T<span class="_ _4d"></span><span class="ls0">here<span class="_"> </span>is<span class="_"> </span>usually an <span class="_ _2"></span>entry with <span class="_ _2"></span>the user <span class="_ _2"></span>name<span class="_"> </span><span class="ff1a">root</span><span class="ls772">.T<span class="_ _4a"></span><span class="ls0">his entry <span class="_ _2"></span>has a <span class="_ _2"></span>user ID <span class="_ _2"></span>of 0</span></span></span></div><div class="t m0 x15 h55 y1833 ff19 fs2c fc0 sc0 ls0 ws0">(the superuser).</div><div class="t m0 x3f h55 y1834 ff19 fs2c fc0 sc0 ls237 ws0">•T<span class="_ _4d"></span><span class="ls0">he encrypted <span class="_ _2"></span>passwor<span class="ls773">dﬁ<span class="_ _4f"></span><span class="ls0">eld <span class="_ _2"></span>contains <span class="_ _2"></span>a single <span class="_ _2"></span>character <span class="_ _2"></span>as <span class="_ _2"></span>a <span class="_ _2"></span>placeholder where</span></span></span></div><div class="t m0 x15 h55 y1835 ff19 fs2c fc0 sc0 ls0 ws0">older <span class="_ _47"> </span>versions <span class="_ _47"> </span>of <span class="_ _47"> </span>the <span class="_ _47"> </span>UNIX <span class="_ _47"> </span>System <span class="_ _47"> </span>used <span class="_ _47"> </span>to <span class="_ _47"> </span>stor<span class="ls774">et<span class="_ _62"></span><span class="ls0">he <span class="_ _47"> </span>encrypted <span class="_ _47"> </span>password.</span></span></div><div class="t m0 x15 h55 y1836 ff19 fs2c fc0 sc0 ls0 ws0">Because <span class="_ _53"> </span>it <span class="_ _53"> </span>is <span class="_ _53"> </span>a <span class="_ _53"> </span>security <span class="_ _53"> </span>hole <span class="_ _e"> </span>to <span class="_ _53"> </span>stor<span class="ls775">et<span class="_ _55"></span><span class="ls0">he <span class="_ _53"> </span>encrypted <span class="_ _e"> </span>password<span class="_ _44"> </span>in<span class="_ _44"> </span>a<span class="_ _4b"> </span>ﬁle <span class="_ _53"> </span>that <span class="_ _53"> </span>is</span></span></div><div class="t m0 x15 h55 y1837 ff19 fs2c fc0 sc0 ls150 ws0">re<span class="ls0">adable <span class="_ _47"> </span>by <span class="_ _66"> </span>everyone, <span class="_ _47"> </span>encrypted <span class="_ _47"> </span>passwords <span class="_"> </span>ar<span class="ls776">en<span class="_ _1d"></span><span class="ls0">ow <span class="_ _47"> </span>kept <span class="_ _66"> </span>elsewhere. <span class="_ _61"> </span>W<span class="_ _6"></span>e’ll</span></span></span></div><div class="t m0 x15 h55 y1838 ff19 fs2c fc0 sc0 ls0 ws0">cover this issue in mor<span class="ls142">ed<span class="_ _4f"></span><span class="ls0">etail in the next section when we discuss passwords.</span></span></div><div class="t m0 x3f h55 y1839 ff19 fs2c fc0 sc0 ls237 ws0">•S<span class="_ _4d"></span><span class="ls0">ome <span class="_ _23"></span>ﬁelds <span class="_ _23"></span>in <span class="_ _23"></span>a <span class="_ _23"></span>passwor<span class="ls777">dﬁ<span class="_ _43"></span><span class="ls0">le <span class="_ _23"> </span>entry <span class="_ _23"> </span>can <span class="_ _23"> </span>be <span class="_ _23"> </span>empty<span class="_ _6"></span><span class="ls778">.I<span class="_ _7"></span><span class="ls779">ft<span class="_ _b"></span><span class="ls0">he <span class="_ _9"></span>encrypted <span class="_ _23"> </span>password</span></span></span></span></span></span></div><div class="t m0 x15 h55 y183a ff19 fs2c fc0 sc0 ls0 ws0">ﬁeld <span class="_ _2"></span>is <span class="_ _3"></span>empty<span class="_ _4"></span>,<span class="_ _47"> </span>it<span class="_ _47"> </span>usually <span class="_ _2"></span>means <span class="_ _2"></span>that <span class="_ _3"></span>the <span class="_ _2"></span>user <span class="_ _3"></span>does <span class="_ _2"></span>not <span class="_ _3"></span>have <span class="_ _2"></span>a <span class="_ _3"></span>password. <span class="_"> </span>(This<span class="_ _47"> </span>is</div><div class="t m0 x15 h54 y183b ff19 fs2c fc0 sc0 ls0 ws0">not recommended.) <span class="_"> </span>The<span class="_"> </span>entry <span class="_ _2"></span>for<span class="_"> </span><span class="ff1a">squid<span class="_ _66"> </span></span>has <span class="_ _2"></span>one <span class="_ _2"></span>blank ﬁeld: <span class="_ _2"></span>the comment <span class="_ _2"></span>ﬁeld.</div><div class="t m0 x15 h55 y183c ff19 fs2c fc0 sc0 ls0 ws0">An empty comment ﬁeld has no effect.</div><div class="t m0 x3f h55 y183d ff19 fs2c fc0 sc0 ls237 ws0">•T<span class="_ _4d"></span><span class="ls0">he <span class="_ _23"> </span>shell <span class="_ _23"> </span>ﬁeld <span class="_ _42"> </span>contains <span class="_ _23"> </span>the <span class="_ _23"> </span>name <span class="_ _42"> </span>of <span class="_ _23"> </span>the <span class="_ _23"> </span>executable <span class="_ _42"> </span>program <span class="_ _23"></span>to <span class="_ _23"></span>be <span class="_ _23"> </span>used <span class="_ _23"> </span>as <span class="_ _42"> </span>the</span></div><div class="t m0 x15 h55 y183e ff19 fs2c fc0 sc0 ls0 ws0">login <span class="_ _42"> </span>shell <span class="_ _53"> </span>for <span class="_ _42"> </span>the <span class="_ _53"> </span>user<span class="_ _1"></span><span class="ls77a">.T<span class="_ _52"></span><span class="ls0">he <span class="_ _42"> </span>default <span class="_ _53"> </span>value <span class="_ _53"> </span>for <span class="_ _42"> </span>an <span class="_ _53"> </span>empty <span class="_ _53"> </span>shell <span class="_ _42"> </span>ﬁeld <span class="_ _53"> </span>is <span class="_ _42"> </span>usually</span></span></div><div class="t m0 x15 h54 y183f ff1a fs2c fc0 sc0 ls0 ws0">/bin/sh<span class="ff19 ls77b">.N<span class="_ _5b"></span><span class="ls0">ote, <span class="_ _2"></span>however<span class="_ _6"></span><span class="ls77c">,t<span class="_ _d"></span><span class="ls0">hat <span class="_ _2"></span>the <span class="_ _2"></span>entry <span class="_ _2"></span>for<span class="_ _66"> </span><span class="ff1a">squid<span class="_ _47"> </span></span>has<span class="_"> </span><span class="ff1a">/dev/null<span class="_ _47"> </span></span>as the <span class="_ _2"></span>login</span></span></span></span></div><div class="t m0 x15 h55 y1840 ff19 fs2c fc0 sc0 ls0 ws0">shell. <span class="_ _35"> </span>Obviously<span class="_ _4"></span><span class="ls77d">,t<span class="_ _b"></span><span class="ls0">his <span class="_ _23"></span>is <span class="_ _23"> </span>a <span class="_ _23"> </span>device <span class="_ _42"> </span>and <span class="_ _23"> </span>cannot <span class="_ _42"> </span>be <span class="_ _23"> </span>executed, <span class="_ _42"> </span>so <span class="_ _23"> </span>its <span class="_ _42"> </span>use <span class="_ _23"> </span>here<span class="_ _35"> </span>is<span class="_ _35"> </span>to</span></span></div><div class="t m0 x15 h54 y1841 ff19 fs2c fc0 sc0 ls0 ws0">prevent anyone fr<span class="_ _0"></span>om logging in to our system as user<span class="_"> </span><span class="ff1a">squid</span>.</div><div class="t m0 x76 h2e y1842 ff19 fs11 fc0 sc0 ls0 ws0">Many <span class="_ _80"> </span>services <span class="_ _80"> </span>have <span class="_ _66"> </span>separate <span class="_ _80"> </span>user <span class="_ _80"> </span>IDs <span class="_ _66"> </span>for <span class="_ _80"> </span>the <span class="_ _80"> </span>daemon <span class="_ _66"> </span>processes <span class="_ _80"> </span>(Chapter <span class="_ _80"> </span>13) <span class="_ _80"> </span>that <span class="_ _66"> </span>help</div><div class="t m0 x76 h4f y1843 ff19 fs11 fc0 sc0 ls0 ws0">implement <span class="_ _3"></span>the <span class="_ _9"></span>service.<span class="_ _59"> </span>The<span class="_ _66"> </span><span class="ff1a">squid<span class="_ _66"> </span></span>entry <span class="_ _9"></span>is <span class="_ _3"></span>for <span class="_ _9"></span>the <span class="_ _3"></span>processes <span class="_ _9"></span>implementing <span class="_ _3"></span>the<span class="_ _66"> </span><span class="ff1a">squid<span class="_ _47"> </span></span>proxy</div><div class="t m0 x76 h2e y1844 ff19 fs11 fc0 sc0 ls0 ws0">cache service.</div></div><div class="pi" data-data='{"ctm":[2.100000,0.000000,0.000000,2.100000,-115.668004,-156.491993]}'></div></div>
