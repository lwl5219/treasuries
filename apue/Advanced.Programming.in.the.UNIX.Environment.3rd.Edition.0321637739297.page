<div id="pf129" class="pf w4 h1f" data-page-no="129"><div class="pc pc129 w4 h1f"><img class="bi x0 y0 w3 h4" alt="" src="apue/bg129.png"/><div class="t m0 x31 h2 y8e ff1 fs0 fc0 sc0 ls0 ws0"><span class="fc1 sc0">ptg10805159</span></div><div class="t m0 x35 h24 ya4 ff19 fs0 fc0 sc0 ls0 ws0">Section <span class="_"> </span>8.12<span class="_ _238"> </span>Interpreter <span class="_"> </span>Files<span class="_ _1fb"> </span><span class="ff18">263</span></div><div class="t m0 x32 h26 y12f ff19 fsf fc0 sc0 ls0 ws0">When<span class="_"> </span><span class="ff1a">/bin/awk<span class="_ _80"> </span></span>is executed, its command</div><div class="t m0 x1cd h2a y5cc ff19 fsf fc0 sc0 ls0 ws0">-</div><div class="t m0 x113 h2a y12f ff19 fsf fc0 sc0 ls0 ws0">line arguments ar<span class="_ _0"></span>e</div><div class="t m0 x3f h57 ya9b ff1a fs2d fc0 sc0 ls0 ws0">/bin/awk -f /usr/local/bin/awkexample file1 FILENAME2 f3</div><div class="t m0 x32 h26 y22a6 ff19 fsf fc0 sc0 ls0 ws0">The <span class="_ _2"></span>pathname <span class="_ _2"></span>of <span class="_ _2"></span>the <span class="_ _2"></span>interpreter <span class="_ _2"></span>ﬁle <span class="_ _2"></span>(<span class="ff1a">/usr/local/bin/awkexample</span>)<span class="_ _47"> </span>is<span class="_ _66"> </span>passed <span class="_ _2"></span>to <span class="_ _3"></span>the</div><div class="t m0 x32 h2a y22a7 ff19 fsf fc0 sc0 ls0 ws0">interpreter<span class="_ _6"></span><span class="lsa3d">.T<span class="_ _7"></span><span class="ls0">he <span class="_ _23"> </span>ﬁlename <span class="_ _42"> </span>portion <span class="_ _42"> </span>of <span class="_ _23"> </span>this <span class="_ _42"> </span>pathname <span class="_ _23"> </span>(what <span class="_ _42"> </span>we <span class="_ _42"> </span>typed <span class="_ _23"> </span>to <span class="_ _42"> </span>the <span class="_ _42"> </span>shell) <span class="_ _23"> </span>isn’t</span></span></div><div class="t m0 x32 h26 y22a8 ff19 fsf fc0 sc0 ls0 ws0">adequate, <span class="_ _3"></span>because <span class="_ _9"></span>the <span class="_ _9"></span>interpreter <span class="_ _3"></span>(<span class="ff1a">/bin/awk<span class="_ _45"> </span></span>in <span class="_ _3"></span>this <span class="_ _9"></span>example) <span class="_ _9"></span>can’t <span class="_ _9"></span>be <span class="_ _3"></span>expected <span class="_ _9"></span>to <span class="_ _9"></span>use</div><div class="t m0 x32 h26 y22a9 ff19 fsf fc0 sc0 ls0 ws0">the<span class="_ _66"> </span><span class="ff1a">PATH<span class="_ _47"> </span></span>variable <span class="_ _2"></span>to <span class="_ _3"></span>locate <span class="_ _2"></span>ﬁles.<span class="_ _61"> </span>When <span class="_ _3"></span>it <span class="_ _2"></span>reads <span class="_ _2"></span>the <span class="_ _2"></span>interpreter <span class="_ _2"></span>ﬁle,<span class="_ _47"> </span><span class="ff1a">awk<span class="_ _66"> </span></span>ignores <span class="_ _2"></span>the <span class="_ _2"></span>ﬁrst</div><div class="t m0 x32 h26 y22aa ff19 fsf fc0 sc0 ls0 ws0">line, since the pound sign is<span class="_"> </span><span class="ff1a">awk</span>’s comment character<span class="_ _6"></span>.</div><div class="t m0 x3f h2a y22ab ff19 fsf fc0 sc0 ls5f ws0">We <span class="_ _53"> </span>c<span class="_ _9"></span><span class="ls0">an verify these command</span></div><div class="t m0 xc7 h2a y22ac ff19 fsf fc0 sc0 ls0 ws0">-</div><div class="t m0 xed h2a y22ab ff19 fsf fc0 sc0 ls0 ws0">line arguments with the following commands:</div><div class="t m0 x3f h57 y22ad ff1a fs2d fc0 sc0 ls0 ws0">$<span class="_"> </span><span class="ff1f">/bin/su<span class="_ _205"> </span><span class="ff1b">become superuser</span></span></div><div class="t m0 x3f h57 y22ae ff1a fs2d fc0 sc0 ls0 ws0">Password:<span class="_ _205"> </span><span class="ff1b">enter superuser password</span></div><div class="t m0 x3f h57 y22af ff1a fs2d fc0 sc0 ls0 ws0">#<span class="_"> </span><span class="ff1f">mv /usr/bin/awk /usr/bin/awk.save<span class="_ _8a"> </span><span class="ff1b">save the original program</span></span></div><div class="t m0 x3f h57 y22b0 ff1a fs2d fc0 sc0 ls0 ws0">#<span class="_"> </span><span class="ff1f">cp /home/sar/bin/echoarg /usr/bin/awk<span class="_"> </span><span class="ff1b">and replace it temporarily</span></span></div><div class="t m0 x3f h57 y22b1 ff1a fs2d fc0 sc0 ls0 ws0">#<span class="_"> </span><span class="ff1f">suspend<span class="_ _205"> </span><span class="ff1b">suspend the superuser shell</span></span></div><div class="t m0 x3f h57 y22b2 ff1a fs2d fc0 sc0 ls0 ws0">[1] + Stopped<span class="_ _176"> </span>/bin/su<span class="_ _bd"> </span><span class="ff1b">using job control</span></div><div class="t m0 x3f h57 y22b3 ff1a fs2d fc0 sc0 ls0 ws0">$<span class="_"> </span><span class="ff1f">awkexample file1 FILENAME2 f3</span></div><div class="t m0 x3f h57 y22b4 ff1a fs2d fc0 sc0 ls0 ws0">argv[0]: /bin/awk</div><div class="t m0 x3f h57 y22b5 ff1a fs2d fc0 sc0 ls0 ws0">argv[1]: -f</div><div class="t m0 x3f h57 y22b6 ff1a fs2d fc0 sc0 ls0 ws0">argv[2]: /usr/local/bin/awkexample</div><div class="t m0 x3f h57 y22b7 ff1a fs2d fc0 sc0 ls0 ws0">argv[3]: file1</div><div class="t m0 x3f h57 y22b8 ff1a fs2d fc0 sc0 ls0 ws0">argv[4]: FILENAME2</div><div class="t m0 x3f h57 y22b9 ff1a fs2d fc0 sc0 ls0 ws0">argv[5]: f3</div><div class="t m0 x3f h57 y22ba ff1a fs2d fc0 sc0 ls0 ws0">$<span class="_"> </span><span class="ff1f">fg<span class="_ _8b"> </span><span class="ff1b ls1e7">re<span class="ls0">sume superuser shell using job control</span></span></span></div><div class="t m0 x3f h57 y22bb ff1a fs2d fc0 sc0 ls0 ws0">/bin/su</div><div class="t m0 x3f h57 y22bc ff1a fs2d fc0 sc0 ls0 ws0">#<span class="_"> </span><span class="ff1f">mv /usr/bin/awk.save /usr/bin/awk<span class="_ _8a"> </span><span class="ff1b ls1e7">re<span class="ls0">stor<span class="ls110">et<span class="_ _5"></span><span class="ls0">he original program</span></span></span></span></span></div><div class="t m0 x3f h57 y22bd ff1a fs2d fc0 sc0 ls0 ws0">#<span class="_"> </span><span class="ff1f">exit<span class="_ _239"> </span><span class="ff1b">and exit the superuser shell</span></span></div><div class="t m0 x32 h26 y22be ff19 fsf fc0 sc0 ls0 ws0">In <span class="_ _2"></span>this <span class="_ _3"></span>example, <span class="_ _3"></span>the<span class="_ _47"> </span><span class="ff1a">-f<span class="_ _47"> </span></span>option <span class="_ _3"></span>for <span class="_ _3"></span>the <span class="_ _2"></span>interpreter <span class="_ _3"></span>is <span class="_ _2"></span>required. <span class="_ _66"> </span>As<span class="_ _47"> </span>we <span class="_ _3"></span>said, <span class="_ _3"></span>this <span class="_ _3"></span>tells<span class="_ _47"> </span><span class="ff1a">awk</span></div><div class="t m0 x32 h26 y22bf ff19 fsf fc0 sc0 ls0 ws0">where<span class="_ _45"> </span>to<span class="_ _35"> </span>look <span class="_ _23"></span>for <span class="_ _23"> </span>the<span class="_ _35"> </span><span class="ff1a">awk<span class="_ _35"> </span></span>pr<span class="_ _0"></span>ogram. <span class="_ _35"> </span>If<span class="_ _35"> </span>we <span class="_ _9"></span>remove <span class="_ _23"></span>the<span class="_ _35"> </span><span class="ff1a">-f<span class="_ _35"> </span></span>option <span class="_ _23"></span>fr<span class="_ _0"></span>om <span class="_ _23"></span>the <span class="_ _23"></span>interpreter</div><div class="t m0 x32 h2a y22c0 ff19 fsf fc0 sc0 ls0 ws0">ﬁle, <span class="_"> </span>an <span class="_ _e"> </span>error <span class="_ _e"> </span>message <span class="_"> </span>usually <span class="_ _e"> </span>results <span class="_"> </span>when <span class="_ _e"> </span>we <span class="_"> </span>try <span class="_ _e"> </span>to <span class="_"> </span>run <span class="_ _e"> </span>it.<span class="_ _48"> </span>The <span class="_"> </span>exact <span class="_"> </span>text <span class="_ _e"> </span>of <span class="_"> </span>the</div><div class="t m0 x32 h2a y22c1 ff19 fsf fc0 sc0 ls0 ws0">message <span class="_"> </span>varies, <span class="_"> </span>depending <span class="_"> </span>on <span class="_"> </span>wher<span class="_ _0"></span><span class="lsa3e">et<span class="_ _4a"></span><span class="ls0">he <span class="_"> </span>interpr<span class="_ _0"></span>eter <span class="_"> </span>ﬁle <span class="_"> </span>is <span class="_"> </span>stor<span class="_ _0"></span>ed <span class="_"> </span>and <span class="_"> </span>whether <span class="_"> </span>the</span></span></div><div class="t m0 x32 h2a y22c2 ff19 fsf fc0 sc0 ls45 ws0">re<span class="ls0">maining <span class="_ _44"> </span>arguments <span class="_ _35"> </span>represent <span class="_ _35"> </span>existing <span class="_ _44"> </span>ﬁles.<span class="_ _98"> </span>This <span class="_ _44"> </span>is <span class="_ _44"> </span>because <span class="_ _44"> </span>the <span class="_ _35"> </span>command</span></div><div class="t m0 x17d h2a y22c3 ff19 fsf fc0 sc0 ls0 ws0">-</div><div class="t m0 x61 h2a y22c2 ff19 fsf fc0 sc0 ls0 ws0">line</div><div class="t m0 x32 h2a y22c4 ff19 fsf fc0 sc0 ls0 ws0">arguments in this case ar<span class="_ _0"></span>e</div><div class="t m0 x3f h57 y22c5 ff1a fs2d fc0 sc0 ls0 ws0">/bin/awk /usr/local/bin/awkexample file1 FILENAME2 f3</div><div class="t m0 x32 h26 y22c6 ff19 fsf fc0 sc0 ls0 ws0">and<span class="_ _44"> </span><span class="ff1a">awk<span class="_ _44"> </span></span>is <span class="_ _42"> </span>trying <span class="_ _53"> </span>to <span class="_ _42"> </span>interpret <span class="_ _42"> </span>the <span class="_ _42"> </span>string<span class="_ _4b"> </span><span class="ff1a">/usr/local/bin/awkexample<span class="_ _44"> </span></span>as <span class="_ _42"> </span>an<span class="_ _44"> </span><span class="ff1a">awk</span></div><div class="t m0 x32 h26 y22c7 ff19 fsf fc0 sc0 ls0 ws0">program. <span class="_ _47"> </span>If<span class="_ _45"> </span>we <span class="_ _3"></span>couldn’t <span class="_ _9"></span>pass <span class="_ _9"></span>at <span class="_ _3"></span>least <span class="_ _9"></span>a <span class="_ _9"></span>single <span class="_ _3"></span>optional <span class="_ _9"></span>argument <span class="_ _3"></span>to <span class="_ _9"></span>the <span class="_ _9"></span>interpreter <span class="_ _3"></span>(<span class="ff1a">-f</span></div><div class="t m0 x32 h2a y22c8 ff19 fsf fc0 sc0 ls0 ws0">in this case), these interpreter ﬁles would be usable only with the shells.</div><div class="t m0 x3f h49 y22c9 ff19 fs26 fc0 sc0 ls0 ws0">Ar<span class="lsa3f">ei<span class="_ _43"></span><span class="ls0">nterpreter <span class="_ _9"></span>ﬁles <span class="_ _23"> </span>required? <span class="_ _45"> </span>Not<span class="_ _35"> </span><span class="lscc">re</span>ally<span class="_ _6"></span><span class="lsa40">.T<span class="_ _7"></span><span class="ls0">hey <span class="_ _23"> </span>provide <span class="_ _23"></span>an <span class="_ _23"></span>efﬁciency <span class="_ _9"></span>gain <span class="_ _23"> </span>for <span class="_ _23"> </span>the</span></span></span></span></div><div class="t m0 x32 h49 y22ca ff19 fs26 fc0 sc0 ls0 ws0">user <span class="_ _53"> </span>at <span class="_ _e"> </span>some <span class="_ _53"> </span>expense <span class="_ _e"> </span>in <span class="_ _53"> </span>the <span class="_ _e"> </span>kernel <span class="_ _53"> </span>(since <span class="_ _e"> </span>it’s <span class="_ _53"> </span>the <span class="_ _e"> </span>kernel <span class="_ _53"> </span>that <span class="_ _e"> </span>recognizes <span class="_ _53"> </span>these <span class="_ _53"> </span>ﬁles).</div><div class="t m0 x32 h49 y22cb ff19 fs26 fc0 sc0 ls0 ws0">Interpreter ﬁles ar<span class="_ _0"></span><span class="lsd3">eu<span class="_ _d"></span><span class="ls0">seful for the following reasons.</span></span></div><div class="t m0 x3f h49 y22cc ff19 fs26 fc0 sc0 ls0 ws0">1. <span class="_ _51"> </span>They<span class="_ _5a"> </span>hide <span class="_ _45"> </span>that <span class="_ _45"> </span>certain <span class="_ _45"> </span>programs <span class="_ _45"> </span>ar<span class="_ _0"></span><span class="lsa41">es<span class="_ _26"></span><span class="ls0">cripts <span class="_ _45"> </span>in <span class="_ _45"> </span>some <span class="_ _45"> </span>other <span class="_ _45"> </span>language.<span class="_ _1a3"> </span>For</span></span></div><div class="t m0 x41 h49 y22cd ff19 fs26 fc0 sc0 ls0 ws0">example, to execute the program in Figur<span class="_ _0"></span><span class="lsd3">e8<span class="_ _d"></span><span class="ls0">.21, we just say</span></span></div><div class="t m0 x7d h4e y22ce ff1a fs28 fc0 sc0 ls0 ws0">awkexample<span class="_"> </span><span class="ff1b">optional-arguments</span></div></div><div class="pi" data-data='{"ctm":[2.100000,0.000000,0.000000,2.100000,-115.668004,-156.491993]}'></div></div>
