<div id="pf33e" class="pf w4 h1f" data-page-no="33e"><div class="pc pc33e w4 h1f"><img class="bi x0 y0 w3 h4" alt="" src="apue/bg33e.png"/><div class="t m0 x31 h2 y8e ff1 fs0 fc0 sc0 ls0 ws0"><span class="fc1 sc0">ptg10805159</span></div><div class="t m0 x35 h24 ya4 ff18 fs0 fc0 sc0 ls0 ws0">796<span class="_ _1b"> </span><span class="ff19">Communicating <span class="_"> </span>with <span class="_"> </span>a <span class="_"> </span>Network <span class="_"> </span>Printer<span class="_ _23b"> </span>Chapter <span class="_"> </span>21</span></div><div class="t m0 x32 h26 y12f ff19 fsf fc0 sc0 ls5f ws0">We <span class="_ _53"> </span>s<span class="_ _9"></span><span class="ls0">tart with the<span class="_"> </span><span class="ff1a">ipp.h<span class="_ _66"> </span></span>header ﬁle.</span></div><div class="t m0 x140 h4e y59f9 ff1a fs28 fc0 sc0 ls1651 ws0">1#<span class="_ _244"></span><span class="ls0">ifndef _IPP_H</span></div><div class="t m0 x140 h4e y59fa ff1a fs28 fc0 sc0 ls1651 ws0">2#<span class="_ _244"></span><span class="ls0">define _IPP_H</span></div><div class="t m0 x140 h4e y59fb ff1a fs28 fc0 sc0 ls1651 ws0">3/<span class="_ _244"></span><span class="ls0">*</span></div><div class="t m0 x140 h4e y59fc ff1a fs28 fc0 sc0 lsf75 ws0">4*<span class="_ _244"></span><span class="ls0">Defines parts of the IPP protocol between the scheduler</span></div><div class="t m0 x140 h4e y59fd ff1a fs28 fc0 sc0 lsf75 ws0">5*<span class="_ _244"></span><span class="ls0">and the printer.<span class="_ _d9"> </span>Based on RFC2911 and RFC2910.</span></div><div class="t m0 x140 h4e y59fe ff1a fs28 fc0 sc0 lsf75 ws0">6*<span class="_ _19"></span><span class="ls0">/</span></div><div class="t m0 x140 h4e y59ff ff1a fs28 fc0 sc0 ls1651 ws0">7/<span class="_ _244"></span><span class="ls0">*</span></div><div class="t m0 x140 h4e y5a00 ff1a fs28 fc0 sc0 lsf75 ws0">8*<span class="_ _244"></span><span class="ls0">Status code classes.</span></div><div class="t m0 x140 h4e y5a01 ff1a fs28 fc0 sc0 lsf75 ws0">9*<span class="_ _19"></span><span class="ls0">/</span></div><div class="t m0 x32 h4e y5a02 ff1a fs28 fc0 sc0 ls0 ws0">10 <span class="_ _d9"> </span>#define<span class="_"> </span>STATCLASS_OK(x) <span class="_ _15"> </span>((x)<span class="_"> </span>&gt;= 0x0000 &amp;&amp; (x) &lt;= 0x00ff)</div><div class="t m0 x32 h4e y5a03 ff1a fs28 fc0 sc0 ls0 ws0">11 <span class="_ _d9"> </span>#define<span class="_"> </span>STATCLASS_INFO(x) <span class="_ _3a"> </span>((x)<span class="_"> </span>&gt;= 0x0100 &amp;&amp; (x) &lt;= 0x01ff)</div><div class="t m0 x32 h4e y5a04 ff1a fs28 fc0 sc0 ls0 ws0">12 <span class="_ _d9"> </span>#define<span class="_"> </span>STATCLASS_REDIR(x) <span class="_"> </span>((x)<span class="_"> </span>&gt;= 0x0300 &amp;&amp; (x) &lt;= 0x03ff)</div><div class="t m0 x32 h4e y5a05 ff1a fs28 fc0 sc0 ls0 ws0">13 <span class="_ _d9"> </span>#define<span class="_"> </span>STATCLASS_CLIERR(x) ((x) &gt;= 0x0400 &amp;&amp; (x) &lt;= 0x04ff)</div><div class="t m0 x32 h4e y5a06 ff1a fs28 fc0 sc0 ls0 ws0">14 <span class="_ _d9"> </span>#define<span class="_"> </span>STATCLASS_SRVERR(x) ((x) &gt;= 0x0500 &amp;&amp; (x) &lt;= 0x05ff)</div><div class="t m0 x32 h4e y5a07 ff1a fs28 fc0 sc0 ls0 ws0">15 <span class="_ _d9"> </span>/*</div><div class="t m0 x32 h4e y5a08 ff1a fs28 fc0 sc0 ls0 ws0">16 <span class="_ _68"> </span>*<span class="_"> </span>Status codes.</div><div class="t m0 x32 h4e y5a09 ff1a fs28 fc0 sc0 ls0 ws0">17 <span class="_ _68"> </span>*/</div><div class="t m0 x32 h4e y5a0a ff1a fs28 fc0 sc0 ls0 ws0">18 <span class="_ _d9"> </span>#define<span class="_"> </span>STAT_OK <span class="_ _26d"> </span>0x0000<span class="_ _d9"> </span>/* success */</div><div class="t m0 x32 h4e y5a0b ff1a fs28 fc0 sc0 ls0 ws0">19 <span class="_ _d9"> </span>#define<span class="_"> </span>STAT_OK_ATTRIGN <span class="_ _3a"> </span>0x0001<span class="_ _3a"> </span>/* OK; some attrs ignored */</div><div class="t m0 x32 h4e y5a0c ff1a fs28 fc0 sc0 ls0 ws0">20 <span class="_ _d9"> </span>#define<span class="_"> </span>STAT_OK_ATTRCON <span class="_ _3a"> </span>0x0002<span class="_ _3a"> </span>/* OK; some attrs conflicted */</div><div class="t m0 x32 h4e y5a0d ff1a fs28 fc0 sc0 ls0 ws0">21 <span class="_ _d9"> </span>#define<span class="_"> </span>STAT_CLI_BADREQ <span class="_ _3a"> </span>0x0400<span class="_ _3a"> </span>/* invalid client request */</div><div class="t m0 x32 h4e y5a0e ff1a fs28 fc0 sc0 ls0 ws0">22 <span class="_ _d9"> </span>#define<span class="_"> </span>STAT_CLI_FORBID <span class="_ _3a"> </span>0x0401<span class="_ _3a"> </span>/* request is forbidden */</div><div class="t m0 x32 h4e y5a0f ff1a fs28 fc0 sc0 ls0 ws0">23 <span class="_ _d9"> </span>#define<span class="_"> </span>STAT_CLI_NOAUTH <span class="_ _3a"> </span>0x0402<span class="_ _3a"> </span>/* authentication required */</div><div class="t m0 x32 h4e y5a10 ff1a fs28 fc0 sc0 ls0 ws0">24 <span class="_ _d9"> </span>#define<span class="_"> </span>STAT_CLI_NOPERM <span class="_ _3a"> </span>0x0403<span class="_ _3a"> </span>/* client not authorized */</div><div class="t m0 x32 h4e y5a11 ff1a fs28 fc0 sc0 ls0 ws0">25 <span class="_ _d9"> </span>#define<span class="_"> </span>STAT_CLI_NOTPOS <span class="_ _3a"> </span>0x0404<span class="_ _3a"> </span>/* request not possible */</div><div class="t m0 x32 h4e y5a12 ff1a fs28 fc0 sc0 ls0 ws0">26 <span class="_ _d9"> </span>#define<span class="_"> </span>STAT_CLI_TIMOUT <span class="_ _3a"> </span>0x0405<span class="_ _3a"> </span>/* client too slow */</div><div class="t m0 x32 h4e y5a13 ff1a fs28 fc0 sc0 ls0 ws0">27 <span class="_ _d9"> </span>#define<span class="_"> </span>STAT_CLI_NOTFND <span class="_ _3a"> </span>0x0406<span class="_ _3a"> </span>/* no object found for URI */</div><div class="t m0 x32 h4e y5a14 ff1a fs28 fc0 sc0 ls0 ws0">28 <span class="_ _d9"> </span>#define<span class="_"> </span>STAT_CLI_OBJGONE <span class="_"> </span>0x0407 <span class="_"> </span>/*<span class="_"> </span>object no longer available */</div><div class="t m0 x32 h4e y5a15 ff1a fs28 fc0 sc0 ls0 ws0">29 <span class="_ _d9"> </span>#define<span class="_"> </span>STAT_CLI_TOOBIG <span class="_ _3a"> </span>0x0408<span class="_ _3a"> </span>/* requested entity too big */</div><div class="t m0 x32 h4e y5a16 ff1a fs28 fc0 sc0 ls0 ws0">30 <span class="_ _d9"> </span>#define<span class="_"> </span>STAT_CLI_TOOLNG <span class="_ _3a"> </span>0x0409<span class="_ _3a"> </span>/* attribute value too large */</div><div class="t m0 x32 h4e y5a17 ff1a fs28 fc0 sc0 ls0 ws0">31 <span class="_ _d9"> </span>#define<span class="_"> </span>STAT_CLI_BADFMT <span class="_ _3a"> </span>0x040a<span class="_ _3a"> </span>/* unsupported doc format */</div><div class="t m0 x32 h4e y5a18 ff1a fs28 fc0 sc0 ls0 ws0">32 <span class="_ _d9"> </span>#define<span class="_"> </span>STAT_CLI_NOTSUP <span class="_ _3a"> </span>0x040b<span class="_ _3a"> </span>/* attributes not supported */</div><div class="t m0 x32 h4e y5a19 ff1a fs28 fc0 sc0 ls0 ws0">33 <span class="_ _d9"> </span>#define<span class="_"> </span>STAT_CLI_NOSCHM <span class="_ _3a"> </span>0x040c<span class="_ _3a"> </span>/* URI scheme not supported */</div><div class="t m0 x32 h4e y5a1a ff1a fs28 fc0 sc0 ls0 ws0">34 <span class="_ _d9"> </span>#define<span class="_"> </span>STAT_CLI_NOCHAR <span class="_ _3a"> </span>0x040d<span class="_ _3a"> </span>/* charset not supported */</div><div class="t m0 x32 h4e y5a1b ff1a fs28 fc0 sc0 ls0 ws0">35 <span class="_ _d9"> </span>#define<span class="_"> </span>STAT_CLI_ATTRCON <span class="_"> </span>0x040e <span class="_"> </span>/*<span class="_"> </span>attributes conflicted */</div><div class="t m0 x32 h4e y5a1c ff1a fs28 fc0 sc0 ls0 ws0">36 <span class="_ _d9"> </span>#define<span class="_"> </span>STAT_CLI_NOCOMP <span class="_ _3a"> </span>0x040f<span class="_ _3a"> </span>/* compression not supported */</div><div class="t m0 x32 h4e y5a1d ff1a fs28 fc0 sc0 ls0 ws0">37 <span class="_ _d9"> </span>#define<span class="_"> </span>STAT_CLI_COMPERR <span class="_"> </span>0x0410 <span class="_"> </span>/*<span class="_"> </span>data can’t be decompressed */</div><div class="t m0 x32 h4e y5a1e ff1a fs28 fc0 sc0 ls0 ws0">38 <span class="_ _d9"> </span>#define<span class="_"> </span>STAT_CLI_FMTERR <span class="_ _3a"> </span>0x0411<span class="_ _3a"> </span>/* document format error */</div><div class="t m0 x32 h4e y5a1f ff1a fs28 fc0 sc0 ls0 ws0">39 <span class="_ _d9"> </span>#define<span class="_"> </span>STAT_CLI_ACCERR <span class="_ _3a"> </span>0x0412<span class="_ _3a"> </span>/* error accessing data */</div><div class="t m0 x32 h54 y5a20 ff19 fs2c fc0 sc0 ls0 ws0">[1 <span class="_ _a"></span>– <span class="_ _a"></span>14]<span class="_ _288"> </span><span class="ls155">We <span class="_ _e"> </span>s<span class="_ _9"></span></span>tart the<span class="_"> </span><span class="ff1a">ipp.h<span class="_ _66"> </span></span>header with the standard<span class="_"> </span><span class="ff1a">#ifdef<span class="_ _80"> </span></span>to prevent err<span class="_ _0"></span>ors when it</div><div class="t m0 x2d h55 y5a21 ff19 fs2c fc0 sc0 ls0 ws0">is <span class="_ _42"> </span>included <span class="_ _53"> </span>twice <span class="_ _42"> </span>in <span class="_ _53"> </span>the <span class="_ _42"> </span>same <span class="_ _53"> </span>ﬁle.<span class="_ _54"> </span>Then <span class="_ _53"> </span>we <span class="_ _42"> </span>deﬁne <span class="_ _53"> </span>the <span class="_ _42"> </span>classes <span class="_ _53"> </span>of <span class="_ _42"> </span>IPP <span class="_ _53"> </span>status</div><div class="t m0 x2d h55 y5a22 ff19 fs2c fc0 sc0 ls0 ws0">codes (see Section 13 in RFC 291<span class="_ _1"></span>1).</div><div class="t m0 x32 h55 y5a23 ff19 fs2c fc0 sc0 ls0 ws0">[15 <span class="_ _a"></span>– <span class="_ _a"></span>39]<span class="_ _65"> </span><span class="ls155">We <span class="_ _66"> </span>d<span class="_ _9"></span></span>eﬁne <span class="_ _9"></span>speciﬁc <span class="_ _9"></span>status <span class="_ _9"></span>codes <span class="_ _9"></span>based <span class="_ _9"></span>on <span class="_ _9"></span>RFC <span class="_ _9"></span>291<span class="_ _0"></span>1. <span class="_ _45"> </span>W<span class="_ _6"></span><span class="ls173b">ed<span class="_ _b"></span><span class="ls0">on’t <span class="_ _9"></span>use <span class="_ _9"></span>these <span class="_ _9"></span>codes</span></span></div><div class="t m0 x2d h55 y5a24 ff19 fs2c fc0 sc0 ls0 ws0">in the program shown her<span class="_ _0"></span>e; their use is left as an exer<span class="_ _0"></span>cise (See Exercise 21.1).</div></div><div class="pi" data-data='{"ctm":[2.100000,0.000000,0.000000,2.100000,-115.668004,-156.491993]}'></div></div>
