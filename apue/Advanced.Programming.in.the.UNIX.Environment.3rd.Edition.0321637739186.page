<div id="pfba" class="pf w4 h1f" data-page-no="ba"><div class="pc pcba w4 h1f"><img class="bi x0 y0 w3 h4" alt="" src="bgba.png"/><div class="t m0 x31 h2 y8e ff1 fs0 fc0 sc0 ls0 ws0"><span class="fc1 sc0">ptg10805159</span></div><div class="t m0 x35 h24 ya4 ff18 fs0 fc0 sc0 ls0 ws0">152<span class="_ _1b"> </span><span class="ff19">Standar<span class="ls30a">dI<span class="_ _55"></span><span class="ls0">/O <span class="_"> </span>Library<span class="_ _1c9"> </span>Chapter <span class="_"> </span>5</span></span></span></div><div class="t m0 x3f h2a y12f ff19 fsf fc0 sc0 ls0 ws0">The <span class="_ _9"></span>character <span class="_ _23"> </span>that <span class="_ _23"></span>we <span class="_ _23"></span>push <span class="_ _9"></span>back <span class="_ _23"></span>does <span class="_ _23"></span>not <span class="_ _9"></span>have <span class="_ _23"></span>to <span class="_ _23"></span>be <span class="_ _9"></span>the <span class="_ _23"></span>same <span class="_ _23"></span>character <span class="_ _9"></span>that <span class="_ _23"></span>was</div><div class="t m0 x32 h26 y130 ff19 fsf fc0 sc0 ls45 ws0">re<span class="ls0">ad. <span class="_ _45"> </span>W<span class="_ _6"></span><span class="ls699">ea<span class="_ _b"></span><span class="ls45">re <span class="_ _42"> </span>n<span class="ls0">ot <span class="_ _9"></span>able <span class="_ _23"></span>to <span class="_ _9"></span>push <span class="_ _9"></span>back<span class="_ _45"> </span><span class="ff1a">EOF</span><span class="ls69a">.W<span class="_ _62"></span><span class="ls0">hen <span class="_ _9"></span>we <span class="_ _9"></span>reach <span class="_ _9"></span>the <span class="_ _9"></span>end <span class="_ _9"></span>of <span class="_ _23"></span>ﬁle, <span class="_ _9"></span>however<span class="_ _6"></span><span class="ls69b">,w<span class="_ _b"></span><span class="ls0">e</span></span></span></span></span></span></span></span></div><div class="t m0 x32 h2a y131 ff19 fsf fc0 sc0 ls0 ws0">can <span class="_ _9"></span>push <span class="_ _9"></span>back <span class="_ _23"></span>a <span class="_ _9"></span>character<span class="_ _6"></span><span class="ls69c">.T<span class="_ _62"></span><span class="ls0">he <span class="_ _9"></span>next <span class="_ _23"></span>r<span class="_ _0"></span>ead <span class="_ _9"></span>will <span class="_ _9"></span>return <span class="_ _9"></span>that <span class="_ _9"></span>character<span class="_ _1"></span><span class="ls63">,a<span class="_ _b"></span><span class="ls0">nd <span class="_ _9"></span>the <span class="_ _23"></span>r<span class="_ _0"></span>ead <span class="_ _9"></span>after</span></span></span></span></div><div class="t m0 x32 h26 y132 ff19 fsf fc0 sc0 ls0 ws0">that <span class="_ _3"></span>will <span class="_ _3"></span>return<span class="_ _66"> </span><span class="ff1a">EOF</span><span class="ls69d">.T<span class="_ _1d"></span><span class="ls0">his <span class="_ _3"></span>works <span class="_ _3"></span>because <span class="_ _3"></span>a <span class="_ _3"></span>successful <span class="_ _3"></span>call <span class="_ _9"></span>to<span class="_ _47"> </span><span class="ff1a">ungetc<span class="_ _47"> </span></span>clears <span class="_ _3"></span>the <span class="_ _3"></span>end-of-</span></span></div><div class="t m0 x32 h2a y133 ff19 fsf fc0 sc0 ls0 ws0">ﬁle indication for the stream.</div><div class="t m0 x3f h2a y134 ff19 fsf fc0 sc0 ls0 ws0">Pushback <span class="_ _2"></span>is <span class="_ _2"></span>often <span class="_ _2"></span>used <span class="_ _2"></span>when <span class="_ _3"></span>we’r<span class="ls474">er<span class="_ _b"></span><span class="ls0">eading <span class="_ _3"></span>an <span class="_ _2"></span>input <span class="_ _2"></span>stream <span class="_ _2"></span>and <span class="_ _2"></span>breaking the <span class="_ _3"></span>input</span></span></div><div class="t m0 x32 h2a y135 ff19 fsf fc0 sc0 ls0 ws0">into words <span class="_ _2"></span>or <span class="_ _2"></span>tokens <span class="_ _2"></span>of <span class="_ _2"></span>some <span class="_ _2"></span>form.<span class="_ _46"> </span>Sometimes <span class="_ _2"></span>we <span class="_ _2"></span>need <span class="_ _2"></span>to <span class="_ _2"></span>peek <span class="_ _2"></span>at <span class="_ _2"></span>the <span class="_ _2"></span>next <span class="_ _2"></span>character <span class="_ _2"></span>to</div><div class="t m0 x32 h2a y136 ff19 fsf fc0 sc0 ls0 ws0">determine how to <span class="_ _2"></span>handle the current character<span class="_ _1"></span><span class="ls69e">.I<span class="_ _5b"></span><span class="ls0">t’s <span class="_ _2"></span>then easy to <span class="_ _2"></span>push back the <span class="_ _2"></span>character</span></span></div><div class="t m0 x32 h26 y137 ff19 fsf fc0 sc0 ls0 ws0">that <span class="_ _2"></span>we <span class="_ _2"></span>peeked <span class="_ _2"></span>at, <span class="_ _2"></span>for <span class="_ _2"></span>the <span class="_ _3"></span>next <span class="_ _2"></span>call <span class="_ _2"></span>to<span class="_ _47"> </span><span class="ff1a">getc<span class="_ _66"> </span></span>to <span class="_ _2"></span>return. <span class="_ _66"> </span>If<span class="_ _47"> </span>the standar<span class="ls69f">dI<span class="_ _4f"></span><span class="ls0">/O <span class="_ _2"></span>library <span class="_ _2"></span>didn’t</span></span></div><div class="t m0 x32 h2a y138 ff19 fsf fc0 sc0 ls0 ws0">provide <span class="_ _3"></span>this <span class="_ _3"></span>pushback <span class="_ _9"></span>capability<span class="_ _6"></span>,<span class="_ _47"> </span>we<span class="_ _45"> </span>would <span class="_ _3"></span>have <span class="_ _9"></span>to <span class="_ _9"></span>stor<span class="ls6a0">et<span class="_ _b"></span><span class="ls0">he <span class="_ _3"></span>character <span class="_ _9"></span>in <span class="_ _9"></span>a <span class="_ _3"></span>variable <span class="_ _9"></span>of</span></span></div><div class="t m0 x32 h26 y139 ff19 fsf fc0 sc0 ls0 ws0">our <span class="_ _23"></span>own, <span class="_ _9"></span>along <span class="_ _23"> </span>with <span class="_ _23"> </span>a <span class="_ _23"> </span>ﬂag <span class="_ _23"></span>telling <span class="_ _23"></span>us <span class="_ _23"></span>to <span class="_ _9"></span>use <span class="_ _23"> </span>this <span class="_ _23"> </span>character <span class="_ _23"></span>instead <span class="_ _23"></span>of <span class="_ _23"></span>calling<span class="_ _45"> </span><span class="ff1a">getc<span class="_ _35"> </span></span>the</div><div class="t m0 x32 h2a y13a ff19 fsf fc0 sc0 ls0 ws0">next time we need a character<span class="_ _6"></span>.</div><div class="t m0 x76 h52 y155b ff19 fs2a fc0 sc0 ls0 ws0">When <span class="_ _3"></span>we <span class="_ _3"></span>push <span class="_ _3"></span>characters <span class="_ _3"></span>back <span class="_ _3"></span>with<span class="_ _66"> </span><span class="ff1a">ungetc</span><span class="ls6a1">,t<span class="_ _d"></span><span class="ls0">hey <span class="_ _3"></span>ar<span class="ls6a1">en<span class="_ _d"></span><span class="ls0">ot <span class="_ _3"></span>written <span class="_ _3"></span>back <span class="_ _3"></span>to <span class="_ _3"></span>the <span class="_ _3"></span>underlying <span class="_ _3"></span>ﬁle</span></span></span></span></div><div class="t m0 x76 h51 y155c ff19 fs2a fc0 sc0 ls0 ws0">or device.<span class="_ _35"> </span>Instead, they ar<span class="lse9">ek<span class="_ _84"></span><span class="ls0">ept incore<span class="_"> </span>in<span class="_"> </span>the standar<span class="lse9">dI<span class="_ _5"></span><span class="ls0">/O library’s buffer for the stream.</span></span></span></span></div><div class="t m0 x35 h27 ya29 ff16 fsf fc0 sc0 ls0 ws0">Output Functions</div><div class="t m0 x32 h2a y155d ff19 fsf fc0 sc0 ls0 ws0">Output <span class="_ _53"> </span>functions <span class="_ _53"> </span>ar<span class="ls6a2">ea<span class="_ _55"></span><span class="ls0">vailable <span class="_ _e"> </span>that <span class="_ _53"> </span>correspond <span class="_ _42"> </span>to <span class="_ _e"> </span>each <span class="_ _53"> </span>of <span class="_ _53"> </span>the <span class="_ _e"> </span>input <span class="_ _53"> </span>functions <span class="_ _53"> </span>we’ve</span></span></div><div class="t m0 x32 h2a y155e ff19 fsf fc0 sc0 ls0 ws0">already described.</div><div class="t m0 x3f h57 y155f ff1a fs2d fc0 sc0 ls0 ws0">#include &lt;stdio.h&gt;</div><div class="t m0 x3f h57 y1560 ff1a fs2d fc0 sc0 ls0 ws0">int putc(int<span class="_"> </span><span class="ff1b">c</span><span class="ls15c">,F<span class="_ _1d"></span><span class="ls0">ILE *<span class="ff1b">fp</span>);</span></span></div><div class="t m0 x3f h57 y1561 ff1a fs2d fc0 sc0 ls0 ws0">int fputc(int<span class="_"> </span><span class="ff1b">c</span><span class="ls15c">,F<span class="_ _1d"></span><span class="ls0">ILE *<span class="ff1b">fp</span>);</span></span></div><div class="t m0 x3f h57 y1562 ff1a fs2d fc0 sc0 ls0 ws0">int putchar(int<span class="_"> </span><span class="ff1b">c</span>);</div><div class="t m0 x1c5 h57 y1563 ff19 fs2d fc0 sc0 ls0 ws0">All three r<span class="_ _0"></span>eturn:<span class="_"> </span><span class="ff1b">c<span class="_"> </span></span>if OK,<span class="_"> </span><span class="ff1a">EOF<span class="_ _e"> </span></span>on error</div><div class="t m0 x32 h4d y1564 ff19 fs26 fc0 sc0 ls0 ws0">As <span class="_ _53"> </span>with <span class="_"> </span>the <span class="_ _42"> </span>input <span class="_"> </span>functions,<span class="_ _44"> </span><span class="ff1a">putchar(c)<span class="_ _59"> </span></span>is <span class="_ _53"> </span>equivalent <span class="_ _e"> </span>to<span class="_ _4b"> </span><span class="ff1a">putc(c, <span class="_ _4"></span>stdout)<span class="ff19 ls6a3">,a<span class="_ _55"></span><span class="ls0">nd</span></span></span></div><div class="t m0 x32 h4d y1565 ff1a fs26 fc0 sc0 ls0 ws0">putc<span class="_ _44"> </span><span class="ff19">can <span class="_ _e"> </span>be <span class="_ _53"> </span>implemented <span class="_ _53"> </span>as <span class="_ _e"> </span>a <span class="_ _53"> </span>macro, <span class="_ _53"> </span>whereas<span class="_ _44"> </span></span>fputc<span class="_ _4b"> </span><span class="ff19">cannot <span class="_ _53"> </span>be <span class="_ _53"> </span>implemented <span class="_ _53"> </span>as <span class="_ _e"> </span>a</span></div><div class="t m0 x32 h49 y1566 ff19 fs26 fc0 sc0 ls0 ws0">macro.</div><div class="t m0 x35 h4b y1567 ff16 fs27 fc0 sc0 ls0 ws0">5.7 <span class="_ _68"> </span>Line-at-a-Time<span class="_ _54"> </span>I/O</div><div class="t m0 x32 h4d y1568 ff19 fs26 fc0 sc0 ls0 ws0">Line-at-a-time input is provided by the two functions,<span class="_"> </span><span class="ff1a">fgets<span class="_ _80"> </span></span>and<span class="_"> </span><span class="ff1a">gets</span>.</div><div class="t m0 x3f h4e y1569 ff1a fs28 fc0 sc0 ls0 ws0">#include &lt;stdio.h&gt;</div><div class="t m0 x3f h4e y156a ff1a fs28 fc0 sc0 ls0 ws0">char *fgets(char *restrict<span class="_"> </span><span class="ff1b">buf</span><span class="ls1b6">,i<span class="_ _1d"></span><span class="ls0">nt<span class="_"> </span><span class="ff1b">n</span><span class="ls1b6">,F<span class="_ _5b"></span><span class="ls0">ILE *restrict<span class="_"> </span><span class="ff1b">fp</span>);</span></span></span></span></div><div class="t m0 x3f h4e y156b ff1a fs28 fc0 sc0 ls0 ws0">char *gets(char *<span class="ff1b">buf<span class="_ _42"> </span></span>);</div><div class="t m0 x17 h4e y156c ff19 fs28 fc0 sc0 ls0 ws0">Both return:<span class="_"> </span><span class="ff1a">buf<span class="_ _e"> </span></span>if OK,<span class="_"> </span><span class="ff1a">NULL<span class="_ _e"> </span></span>on end of ﬁle or error</div><div class="t m0 x32 h54 y156d ff19 fs2c fc0 sc0 ls0 ws0">Both <span class="_ _23"> </span>specify <span class="_ _42"> </span>the <span class="_ _23"> </span>address <span class="_ _23"></span>of <span class="_ _23"> </span>the <span class="_ _42"> </span>buffer <span class="_ _23"></span>to <span class="_ _23"> </span>read <span class="_ _23"></span>the <span class="_ _23"> </span>line <span class="_ _42"> </span>into.<span class="_ _51"> </span>The<span class="_ _35"> </span><span class="ff1a">gets<span class="_ _35"> </span></span>function <span class="_ _42"> </span>reads</div><div class="t m0 x32 h54 y156e ff19 fs2c fc0 sc0 ls0 ws0">from standar<span class="_ _0"></span><span class="ls142">di<span class="_ _d"></span><span class="ls0">nput, whereas<span class="_"> </span><span class="ff1a">fgets<span class="_ _80"> </span></span><span class="ls150">re</span>ads from the speciﬁed stream.</span></span></div><div class="t m0 x3f h54 y156f ff19 fs2c fc0 sc0 ls6a4 ws0">Wi<span class="_ _3"></span><span class="ls0">th<span class="_ _35"> </span><span class="ff1a">fgets</span>,<span class="_ _44"> </span>we<span class="_ _35"> </span>have <span class="_ _42"> </span>to <span class="_ _23"> </span>specify <span class="_ _42"> </span>the <span class="_ _42"> </span>size <span class="_ _23"> </span>of <span class="_ _42"> </span>the <span class="_ _42"> </span>buffer<span class="_ _6"></span>,<span class="_ _35"> </span><span class="ff1b">n</span><span class="ls6a5">.T<span class="_ _7"></span><span class="ls0">his <span class="_ _42"> </span>function <span class="_ _23"> </span>reads <span class="_ _42"> </span>up</span></span></span></div><div class="t m0 x32 h60 y1570 ff19 fs2c fc0 sc0 ls0 ws0">through <span class="_ _42"> </span>and <span class="_ _e"> </span>including <span class="_ _53"> </span>the <span class="_ _53"> </span>next <span class="_ _e"> </span>newline, <span class="_ _53"> </span>but <span class="_ _53"> </span>no <span class="_ _e"> </span>mor<span class="ls6a6">et<span class="_ _55"></span><span class="ls0">han<span class="_ _4b"> </span><span class="ff1b">n<span class="_ _42"> </span><span class="ff20">−<span class="_ _53"> </span></span>1<span class="_ _4b"> </span></span>characters, <span class="_ _53"> </span>into <span class="_ _53"> </span>the</span></span></div><a class="l" href="#pfe" data-dest-detail='[14,"XYZ",50,757,1]'><div class="d m1" style="border-style:none;position:absolute;left:80.893259px;bottom:419.010930px;width:140.688400px;height:19.679993px;background-color:rgba(255,255,255,0.000001);"></div></a></div><div class="pi" data-data='{"ctm":[2.100000,0.000000,0.000000,2.100000,-115.668004,-156.491993]}'></div></div>
