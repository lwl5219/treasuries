<div id="pf8b" class="pf w4 h1f" data-page-no="8b"><div class="pc pc8b w4 h1f"><img class="bi x0 y0 w3 h4" alt="" src="bg8b.png"/><div class="t m0 x31 h2 y8e ff1 fs0 fc0 sc0 ls0 ws0"><span class="fc1 sc0">ptg10805159</span></div><div class="t m0 x35 h7a ya4 ff19 fs0 fc0 sc0 ls0 ws0">Section <span class="_"> </span>4.8<span class="_ _177"> </span><span class="ff1a">umask<span class="_ _4b"> </span></span>Function<span class="_ _1b"> </span><span class="ff18">105</span></div><div class="t m0 x32 h2a y12f ff19 fsf fc0 sc0 ls0 ws0">If we run this pr<span class="_ _0"></span>ogram, we can see how the permission bits have been set.</div><div class="t m0 x3f h57 yf34 ff1a fs2d fc0 sc0 ls0 ws0">$<span class="_"> </span><span class="ff1f">umask<span class="_ _194"> </span><span class="ff1b">ﬁrst print the current ﬁle mode cr<span class="_ _0"></span>eation mask</span></span></div><div class="t m0 x3f h57 yf35 ff1a fs2d fc0 sc0 ls0 ws0">002</div><div class="t m0 x3f h57 yf36 ff1a fs2d fc0 sc0 ls0 ws0">$<span class="_"> </span><span class="ff1f">./a.out</span></div><div class="t m0 x3f h57 yf37 ff1a fs2d fc0 sc0 ls0 ws0">$<span class="_"> </span><span class="ff1f">ls -l foo bar</span></div><div class="t m0 x3f h57 yf38 ff1a fs2d fc0 sc0 ls0 ws0">-rw------- <span class="_"> </span>1<span class="_"> </span>sar <span class="_ _82"> </span>0<span class="_"> </span>Dec <span class="_"> </span>7<span class="_"> </span>21:20 bar</div><div class="t m0 x3f h57 yf39 ff1a fs2d fc0 sc0 ls0 ws0">-rw-rw-rw- <span class="_"> </span>1<span class="_"> </span>sar <span class="_ _82"> </span>0<span class="_"> </span>Dec <span class="_"> </span>7<span class="_"> </span>21:20 foo</div><div class="t m0 x3f h57 yf3a ff1a fs2d fc0 sc0 ls0 ws0">$<span class="_"> </span><span class="ff1f">umask<span class="_ _194"> </span><span class="ff1b">see if the ﬁle mode creation mask changed</span></span></div><div class="t m0 x3f h57 yf3b ff1a fs2d fc0 sc0 ls0 ws0">002</div><div class="t m0 x3f h4d yf3c ff19 fs26 fc0 sc0 ls0 ws0">Most <span class="_ _23"> </span>users <span class="_ _23"> </span>of <span class="_ _42"> </span>UNIX <span class="_ _23"> </span>systems <span class="_ _23"> </span>never <span class="_ _42"> </span>deal <span class="_ _23"></span>with <span class="_ _23"> </span>their<span class="_ _35"> </span><span class="ff1a">umask<span class="_ _35"> </span></span>value. <span class="_ _35"> </span>It<span class="_ _35"> </span>is <span class="_ _42"> </span>usually <span class="_ _23"></span>set</div><div class="t m0 x32 h49 yf3d ff19 fs26 fc0 sc0 ls0 ws0">once, <span class="_"> </span>on <span class="_ _53"> </span>login, <span class="_"> </span>by <span class="_"> </span>the <span class="_ _53"> </span>shell’s <span class="_"> </span>start-up <span class="_"> </span>ﬁle, <span class="_ _53"> </span>and <span class="_"> </span>never <span class="_"> </span>changed.<span class="_ _65"> </span>Nevertheless, <span class="_"> </span>when</div><div class="t m0 x32 h49 yf3e ff19 fs26 fc0 sc0 ls0 ws0">writing <span class="_ _47"> </span>programs <span class="_ _45"> </span>that <span class="_ _47"> </span>create <span class="_ _47"> </span>new <span class="_ _45"> </span>ﬁles, <span class="_ _47"> </span>if <span class="_ _45"> </span>we <span class="_ _47"> </span>want <span class="_ _45"> </span>to <span class="_ _47"> </span>ensur<span class="ls4c9">et<span class="_ _62"></span><span class="ls0">hat <span class="_ _45"> </span>speciﬁc <span class="_ _47"> </span>access</span></span></div><div class="t m0 x32 h4d yf3f ff19 fs26 fc0 sc0 ls0 ws0">permission <span class="_ _53"> </span>bits <span class="_"> </span>ar<span class="_ _1"></span><span class="ls4ca">ee<span class="_ _c"></span><span class="ls0">nabled, <span class="_ _e"> </span>we <span class="_ _e"> </span>must <span class="_ _e"> </span>modify <span class="_ _e"> </span>the<span class="_ _4b"> </span><span class="ff1a">umask<span class="_ _4b"> </span></span>value <span class="_"> </span>while <span class="_ _53"> </span>the <span class="_ _e"> </span>process <span class="_ _53"> </span>is</span></span></div><div class="t m0 x32 h49 yf40 ff19 fs26 fc0 sc0 ls2b1 ws0">ru<span class="ls0">nning. <span class="_ _45"> </span>For<span class="_ _47"> </span>example, <span class="_ _9"></span>if <span class="_ _9"></span>we <span class="_ _9"></span>want <span class="_ _9"></span>to <span class="_ _3"></span>ensur<span class="ls4cb">et<span class="_ _b"></span><span class="ls0">hat <span class="_ _9"></span>anyone <span class="_ _9"></span>can <span class="_ _9"></span>read <span class="_ _3"></span>a <span class="_ _9"></span>ﬁle, <span class="_ _3"></span>we <span class="_ _9"></span>should <span class="_ _9"></span>set</span></span></span></div><div class="t m0 x32 h4d yf41 ff19 fs26 fc0 sc0 ls0 ws0">the<span class="_ _59"> </span><span class="ff1a">umask<span class="_ _59"> </span></span>to <span class="_"> </span>0.<span class="_ _60"> </span>Otherwise, <span class="_"> </span>the<span class="_ _59"> </span><span class="ff1a">umask<span class="_ _59"> </span></span>value <span class="_"> </span>that <span class="_"> </span>is <span class="_"> </span>in <span class="_ _e"> </span>effect <span class="_"> </span>when <span class="_ _e"> </span>our <span class="_"> </span>process <span class="_"> </span>is</div><div class="t m0 x32 h49 yf42 ff19 fs26 fc0 sc0 ls2b1 ws0">ru<span class="ls0">nning can cause permission bits to be turned off.</span></div><div class="t m0 x3f h4d yf43 ff19 fs26 fc0 sc0 ls0 ws0">In the <span class="_ _2"></span>preceding example, we <span class="_ _2"></span>use the <span class="_ _2"></span>shell’s<span class="_"> </span><span class="ff1a">umask<span class="_ _66"> </span></span>command <span class="_ _2"></span>to print <span class="_ _2"></span>the ﬁle <span class="_ _2"></span>mode</div><div class="t m0 x32 h49 yf44 ff19 fs26 fc0 sc0 ls0 ws0">creation <span class="_ _9"></span>mask <span class="_ _23"> </span>both <span class="_ _23"> </span>before<span class="_ _45"> </span>we<span class="_ _35"> </span>run <span class="_ _23"></span>the <span class="_ _9"></span>program <span class="_ _23"></span>and <span class="_ _23"></span>after <span class="_ _23"></span>it <span class="_ _9"></span>completes.<span class="_ _51"> </span>This <span class="_ _23"> </span>shows <span class="_ _23"> </span>us</div><div class="t m0 x32 h49 yf45 ff19 fs26 fc0 sc0 ls0 ws0">that <span class="_ _42"> </span>changing <span class="_ _42"> </span>the <span class="_ _23"> </span>ﬁle <span class="_ _42"> </span>mode <span class="_ _42"> </span>creation <span class="_ _42"> </span>mask <span class="_ _23"> </span>of <span class="_ _42"> </span>a <span class="_ _42"> </span>process <span class="_ _42"> </span>doesn’t <span class="_ _23"> </span>affect <span class="_ _42"> </span>the <span class="_ _42"> </span>mask <span class="_ _42"> </span>of <span class="_ _23"> </span>its</div><div class="t m0 x32 h4d yf46 ff19 fs26 fc0 sc0 ls0 ws0">parent (often <span class="_ _3"></span>a <span class="_ _2"></span>shell).<span class="_ _61"> </span>All <span class="_ _3"></span>of <span class="_ _2"></span>the <span class="_ _3"></span>shells <span class="_ _2"></span>have <span class="_ _2"></span>a <span class="_ _3"></span>built-in<span class="_ _47"> </span><span class="ff1a">umask<span class="_ _66"> </span></span>command <span class="_ _3"></span>that <span class="_ _2"></span>we <span class="_ _2"></span>can <span class="_ _3"></span>use</div><div class="t m0 x32 h49 yf47 ff19 fs26 fc0 sc0 ls0 ws0">to set or print the current ﬁle mode cr<span class="_ _0"></span>eation mask.</div><div class="t m0 x3f h4d yf48 ff19 fs26 fc0 sc0 ls0 ws0">Users <span class="_ _9"></span>can <span class="_ _23"> </span>set <span class="_ _23"></span>the<span class="_ _45"> </span><span class="ff1a">umask<span class="_ _35"> </span></span>value <span class="_ _9"></span>to <span class="_ _23"> </span>control <span class="_ _9"></span>the <span class="_ _23"></span>default <span class="_ _23"></span>permissions <span class="_ _9"></span>on <span class="_ _23"></span>the <span class="_ _23"></span>ﬁles <span class="_ _9"></span>they</div><div class="t m0 x32 h49 yf49 ff19 fs26 fc0 sc0 ls0 ws0">create. <span class="_ _47"> </span>This<span class="_ _47"> </span>value <span class="_ _9"></span>is <span class="_ _3"></span>expressed <span class="_ _3"></span>in <span class="_ _3"></span>octal, <span class="_ _9"></span>with <span class="_ _3"></span>one <span class="_ _9"></span>bit <span class="_ _3"></span>repr<span class="_ _0"></span>esenting <span class="_ _3"></span>one <span class="_ _9"></span>permission <span class="_ _3"></span>to <span class="_ _3"></span>be</div><div class="t m0 x32 h49 yf4a ff19 fs26 fc0 sc0 ls0 ws0">masked <span class="_ _45"> </span>off, <span class="_ _45"> </span>as <span class="_ _45"> </span>shown <span class="_ _45"> </span>in <span class="_ _35"> </span>Figur<span class="_ _0"></span><span class="ls4cc">e4<span class="_ _26"></span><span class="ls0">.10. <span class="_ _5a"> </span>Permissions<span class="_ _51"> </span>can <span class="_ _45"> </span>be <span class="_ _45"> </span>denied <span class="_ _45"> </span>by <span class="_ _35"> </span>setting <span class="_ _45"> </span>the</span></span></div><div class="t m0 x32 h4d yf4b ff19 fs26 fc0 sc0 ls0 ws0">corresponding <span class="_ _47"> </span>bits.<span class="_ _5f"> </span>Some <span class="_ _45"> </span>common<span class="_ _16"> </span><span class="ff1a">umask<span class="_"> </span></span>values <span class="_ _47"> </span>ar<span class="ls4cd">e0<span class="_ _26"></span><span class="ls0">02 <span class="_ _45"> </span>to <span class="_ _47"> </span>prevent <span class="_ _47"> </span>others <span class="_ _45"> </span>from</span></span></div><div class="t m0 x32 h49 yf4c ff19 fs26 fc0 sc0 ls0 ws0">writing <span class="_ _23"> </span>your <span class="_ _42"> </span>ﬁles, <span class="_ _23"> </span>022 <span class="_ _42"> </span>to <span class="_ _23"> </span>prevent <span class="_ _23"></span>group <span class="_ _23"></span>members <span class="_ _23"> </span>and <span class="_ _42"> </span>others <span class="_ _23"> </span>from <span class="_ _23"> </span>writing <span class="_ _42"> </span>your <span class="_ _23"> </span>ﬁles,</div><div class="t m0 x32 h49 yf4d ff19 fs26 fc0 sc0 ls0 ws0">and <span class="_ _42"> </span>027 <span class="_ _42"> </span>to <span class="_ _23"> </span>prevent <span class="_ _42"> </span>group <span class="_ _23"> </span>members <span class="_ _42"> </span>from <span class="_ _23"> </span>writing <span class="_ _42"> </span>your <span class="_ _42"> </span>ﬁles <span class="_ _42"> </span>and <span class="_ _42"> </span>others <span class="_ _42"> </span>from <span class="_ _23"> </span>reading,</div><div class="t m0 x32 h49 yf4e ff19 fs26 fc0 sc0 ls0 ws0">writing, or executing your ﬁles.</div><div class="t m0 x15f h2e yf4f ff19 fs11 fc0 sc0 ls0 ws0">Mask bit<span class="_ _15"> </span>Meaning</div><div class="t m0 xed h6d yf50 ff1a fs12 fc0 sc0 ls0 ws0">0400<span class="_ _1b"> </span><span class="ff19">user<span class="_ _0"></span>-read</span></div><div class="t m0 xed h6d yf51 ff1a fs12 fc0 sc0 ls0 ws0">0200<span class="_ _1b"> </span><span class="ff19">user<span class="_ _0"></span>-write</span></div><div class="t m0 xed h6d yf52 ff1a fs12 fc0 sc0 ls0 ws0">0100<span class="_ _1b"> </span><span class="ff19">user<span class="_ _0"></span>-execute</span></div><div class="t m0 xed h6d yf53 ff1a fs12 fc0 sc0 ls0 ws0">0040<span class="_ _1b"> </span><span class="ff19">gr<span class="_ _0"></span>oup-read</span></div><div class="t m0 xed h6d yf54 ff1a fs12 fc0 sc0 ls0 ws0">0020<span class="_ _1b"> </span><span class="ff19">gr<span class="_ _0"></span>oup-write</span></div><div class="t m0 xed h6d yf55 ff1a fs12 fc0 sc0 ls0 ws0">0010<span class="_ _1b"> </span><span class="ff19">gr<span class="_ _0"></span>oup-execute</span></div><div class="t m0 xed h6d yf56 ff1a fs12 fc0 sc0 ls0 ws0">0004<span class="_ _1b"> </span><span class="ff19">other<span class="_ _0"></span>-read</span></div><div class="t m0 xed h6d yf57 ff1a fs12 fc0 sc0 ls0 ws0">0002<span class="_ _1b"> </span><span class="ff19">other<span class="_ _0"></span>-write</span></div><div class="t m0 xed h6d yf58 ff1a fs12 fc0 sc0 ls0 ws0">0001<span class="_ _1b"> </span><span class="ff19">other<span class="_ _0"></span>-execute</span></div><div class="t m0 x26 h63 yf59 ff18 fs13 fc0 sc0 ls0 ws0">Figure 4.10<span class="_ _5a"> </span><span class="ff19">The<span class="_"> </span><span class="ff1a">umask<span class="_ _e"> </span></span>ﬁle access permission bits</span></div><div class="t m0 x3f h64 yf5a ff19 fs31 fc0 sc0 ls0 ws0">The <span class="_ _35"> </span>Single <span class="_ _35"> </span>UNIX <span class="_ _44"> </span>Speciﬁcation <span class="_ _35"> </span>requir<span class="_ _0"></span>es <span class="_ _35"> </span>that <span class="_ _35"> </span>the<span class="_ _54"> </span><span class="ff1a">umask<span class="_ _51"> </span></span>command <span class="_ _35"> </span>support <span class="_ _44"> </span>a</div><div class="t m0 x32 h6e yf5b ff19 fs31 fc0 sc0 ls0 ws0">symbolic <span class="_ _e"> </span>mode <span class="_ _e"> </span>of <span class="_ _e"> </span>operation.<span class="_ _48"> </span>Unlike <span class="_ _e"> </span>the <span class="_ _e"> </span>octal <span class="_ _e"> </span>format, <span class="_ _e"> </span>the <span class="_ _e"> </span>symbolic <span class="_ _e"> </span>format <span class="_ _e"> </span>speciﬁes</div><div class="t m0 x32 h6e yf5c ff19 fs31 fc0 sc0 ls0 ws0">which <span class="_ _53"> </span>permissions <span class="_ _53"> </span>are<span class="_ _4b"> </span>to<span class="_ _4b"> </span>be<span class="_ _44"> </span>allowed <span class="_ _e"> </span>(i.e., <span class="_ _53"> </span>clear <span class="_ _e"> </span>in <span class="_ _53"> </span>the <span class="_ _e"> </span>ﬁle <span class="_ _53"> </span>creation <span class="_ _53"> </span>mask) <span class="_ _53"> </span>instead <span class="_ _e"> </span>of</div><div class="t m0 x32 h6e yf5d ff19 fs31 fc0 sc0 ls0 ws0">which <span class="_ _3"></span>ones <span class="_ _3"></span>are<span class="_ _47"> </span>to<span class="_ _47"> </span>be<span class="_ _47"> </span>denied <span class="_ _3"></span>(i.e., <span class="_ _3"></span>set <span class="_ _3"></span>in <span class="_ _3"></span>the <span class="_ _9"></span>ﬁle <span class="_ _3"></span>creation <span class="_ _2"></span>mask).<span class="_ _16"> </span>Compar<span class="ls4ce">eb<span class="_ _8"></span><span class="ls0">oth <span class="_ _3"></span>forms <span class="_ _3"></span>of</span></span></div><div class="t m0 x32 h6e yf5e ff19 fs31 fc0 sc0 ls0 ws0">the command, shown below<span class="_ _6"></span>.</div></div><div class="pi" data-data='{"ctm":[2.100000,0.000000,0.000000,2.100000,-115.668004,-156.491993]}'></div></div>
