<div id="pfe8" class="pf w4 h1f" data-page-no="e8"><div class="pc pce8 w4 h1f"><img class="bi x0 y0 w3 h4" alt="" src="bge8.png"/><div class="t m0 x31 h2 y8e ff1 fs0 fc0 sc0 ls0 ws0"><span class="fc1 sc0">ptg10805159</span></div><div class="t m0 x35 h24 ya4 ff18 fs0 fc0 sc0 ls0 ws0">198<span class="_ _1b"> </span><span class="ff19">Process <span class="_"> </span>Envir<span class="_ _0"></span>onment <span class="_ _1c1"> </span>Chapter<span class="_ _44"> </span>7</span></div><div class="t m0 x35 h53 y12f ff16 fs2b fc0 sc0 ls0 ws0">7.3 <span class="_ _68"> </span>Process <span class="_"> </span>T<span class="_ _6"></span>ermination</div><div class="t m0 x32 h2a y4de ff19 fsf fc0 sc0 ls0 ws0">Ther<span class="ls82d">ea<span class="_ _55"></span><span class="ls45">re <span class="_"> </span>e<span class="ls0">ight <span class="_ _e"> </span>ways <span class="_ _e"> </span>for <span class="_ _53"> </span>a <span class="_ _e"> </span>process <span class="_ _53"> </span>to <span class="_ _e"> </span>terminate.<span class="_ _65"> </span>Normal <span class="_ _e"> </span>termination <span class="_ _e"> </span>occurs <span class="_ _e"> </span>in <span class="_ _53"> </span>ﬁve</span></span></span></div><div class="t m0 x32 h2a y6d0 ff19 fsf fc0 sc0 ls0 ws0">ways:</div><div class="t m0 x3f h26 y6d2 ff19 fsf fc0 sc0 ls0 ws0">1. <span class="_ _51"> </span>Return<span class="_"> </span>from<span class="_"> </span><span class="ff1a">main</span></div><div class="t m0 x3f h26 y1ad4 ff19 fsf fc0 sc0 ls0 ws0">2. <span class="_ _51"> </span>Calling<span class="_"> </span><span class="ff1a">exit</span></div><div class="t m0 x3f h26 y1ad5 ff19 fsf fc0 sc0 ls0 ws0">3. <span class="_ _51"> </span>Calling<span class="_"> </span><span class="ff1a">_exit<span class="_ _80"> </span></span>or<span class="_"> </span><span class="ff1a">_Exit</span></div><div class="t m0 x3f h2a y6d6 ff19 fsf fc0 sc0 ls0 ws0">4. <span class="_ _51"> </span>Return<span class="_"> </span>of the last thread fr<span class="_ _0"></span>om its start routine (Section 1<span class="_ _6"></span>1.5)</div><div class="t m0 x3f h26 y1ad6 ff19 fsf fc0 sc0 ls0 ws0">5. <span class="_ _51"> </span>Calling<span class="_"> </span><span class="ff1a">pthread_exit<span class="_ _80"> </span></span>(Section 1<span class="_ _0"></span>1.5) from the last thr<span class="_ _1"></span>ead</div><div class="t m0 x32 h2a y1ad7 ff19 fsf fc0 sc0 ls0 ws0">Abnormal termination occurs in three ways:</div><div class="t m0 x3f h26 y1ad8 ff19 fsf fc0 sc0 ls0 ws0">6. <span class="_ _51"> </span>Calling<span class="_"> </span><span class="ff1a">abort<span class="_ _80"> </span></span>(Section 10.17)</div><div class="t m0 x3f h2a y1ad9 ff19 fsf fc0 sc0 ls0 ws0">7. <span class="_ _51"> </span>Receipt<span class="_"> </span>of a signal (Section 10.2)</div><div class="t m0 x3f h2a y6de ff19 fsf fc0 sc0 ls0 ws0">8. <span class="_ _51"> </span>Response<span class="_"> </span>of the last thread to a cancellation r<span class="_ _0"></span>equest (Sections 1<span class="_ _1"></span>1.5 and 12.7)</div><div class="t m0 x1e4 h51 y1ada ff19 fs2a fc0 sc0 ls0 ws0">For now<span class="_ _1"></span><span class="ls82e">,w<span class="_ _5"></span><span class="ls0">e’ll <span class="_ _2"></span>ignor<span class="ls82f">et<span class="_ _5"></span><span class="ls0">he three termination <span class="_ _2"></span>methods speciﬁc <span class="_ _2"></span>to threads until we <span class="_ _2"></span>discuss</span></span></span></span></div><div class="t m0 x1e4 h51 y1adb ff19 fs2a fc0 sc0 ls0 ws0">threads in Chapters 1<span class="_ _1"></span><span class="lse9">1a<span class="_ _84"></span><span class="ls0">nd 12.</span></span></div><div class="t m0 x32 h2a y1adc ff19 fsf fc0 sc0 ls0 ws0">The <span class="_ _2"></span>start-up <span class="_ _3"></span>routine <span class="_ _3"></span>that <span class="_ _3"></span>we <span class="_ _3"></span>mentioned <span class="_ _2"></span>in <span class="_ _3"></span>the <span class="_ _3"></span>previous <span class="_ _3"></span>section <span class="_ _2"></span>is <span class="_ _3"></span>also <span class="_ _3"></span>written <span class="_ _3"></span>so <span class="_ _3"></span>that <span class="_ _3"></span>if</div><div class="t m0 x32 h26 y1add ff19 fsf fc0 sc0 ls0 ws0">the<span class="_ _4b"> </span><span class="ff1a">main<span class="_ _4b"> </span></span>function <span class="_ _53"> </span>returns, <span class="_ _53"> </span>the<span class="_ _4b"> </span><span class="ff1a">exit<span class="_ _4b"> </span></span>function <span class="_ _e"> </span>is <span class="_ _53"> </span>called.<span class="_ _48"> </span>If <span class="_ _53"> </span>the <span class="_ _e"> </span>start-up <span class="_ _e"> </span>routine <span class="_ _53"> </span>were</div><div class="t m0 x32 h26 y1ade ff19 fsf fc0 sc0 ls0 ws0">coded in C (it is often coded in assembly language) the call to<span class="_"> </span><span class="ff1a">main<span class="_ _80"> </span></span>could look like</div><div class="t m0 x3f h57 y1adf ff1a fs2d fc0 sc0 ls0 ws0">exit(main(argc, argv));</div><div class="t m0 x35 h27 y1ae0 ff16 fsf fc0 sc0 ls0 ws0">Exit Functions</div><div class="t m0 x32 h26 y1ae1 ff19 fsf fc0 sc0 ls0 ws0">Three <span class="_ _2"></span>functions <span class="_ _3"></span>terminate <span class="_ _9"></span>a <span class="_ _3"></span>program <span class="_ _3"></span>normally:<span class="_ _47"> </span><span class="ff1a">_exit<span class="_ _47"> </span></span>and<span class="_ _45"> </span><span class="ff1a">_Exit</span><span class="ls830">,w<span class="_ _b"></span><span class="ls0">hich <span class="_ _9"></span>return <span class="_ _2"></span>to <span class="_ _9"></span>the</span></span></div><div class="t m0 x32 h26 y1ae2 ff19 fsf fc0 sc0 ls0 ws0">kernel <span class="_ _53"> </span>immediately<span class="_ _6"></span><span class="ls831">,a<span class="_ _55"></span><span class="ls0">nd<span class="_ _4b"> </span><span class="ff1a">exit</span><span class="ls831">,w<span class="_ _c"></span><span class="ls0">hich <span class="_ _53"> </span>performs <span class="_ _e"> </span>certain <span class="_ _53"> </span>cleanup <span class="_ _e"> </span>processing <span class="_ _53"> </span>and <span class="_ _53"> </span>then</span></span></span></span></div><div class="t m0 x32 h2a y1ae3 ff19 fsf fc0 sc0 ls45 ws0">re<span class="ls0">turns to the kernel.</span></div><div class="t m0 x3f h57 y1ae4 ff1a fs2d fc0 sc0 ls0 ws0">#include &lt;stdlib.h&gt;</div><div class="t m0 x3f h57 y1ae5 ff1a fs2d fc0 sc0 ls0 ws0">void exit(int<span class="_"> </span><span class="ff1b">status</span>);</div><div class="t m0 x3f h57 y1ae6 ff1a fs2d fc0 sc0 ls0 ws0">void _Exit(int<span class="_"> </span><span class="ff1b">status</span>);</div><div class="t m0 x3f h57 y1ae7 ff1a fs2d fc0 sc0 ls0 ws0">#include &lt;unistd.h&gt;</div><div class="t m0 x3f h57 y1ae8 ff1a fs2d fc0 sc0 ls0 ws0">void _exit(int<span class="_"> </span><span class="ff1b">status</span>);</div><div class="t m0 x32 h49 y1ae9 ff19 fs26 fc0 sc0 ls164 ws0">We<span class="_ _9"></span><span class="ls0">’ll <span class="_ _3"></span>discuss <span class="_ _3"></span>the <span class="_ _3"></span>effect <span class="_ _3"></span>of <span class="_ _3"></span>these <span class="_ _3"></span>three <span class="_ _3"></span>functions <span class="_ _3"></span>on <span class="_ _3"></span>other <span class="_ _3"></span>processes, <span class="_ _3"></span>such <span class="_ _3"></span>as <span class="_ _3"></span>the <span class="_ _3"></span>children</span></div><div class="t m0 x32 h49 y1aea ff19 fs26 fc0 sc0 ls0 ws0">and the parent of the terminating pr<span class="_ _0"></span>ocess, in Section 8.5.</div><div class="t m0 x76 h5e y1aeb ff19 fs10 fc0 sc0 ls0 ws0">The <span class="_ _3"></span>reason <span class="_ _3"></span>for <span class="_ _3"></span>the <span class="_ _9"></span>differ<span class="_ _0"></span>ent <span class="_ _3"></span>headers <span class="_ _3"></span>is <span class="_ _9"></span>that<span class="_ _66"> </span><span class="ff1a">exit<span class="_ _66"> </span></span>and<span class="_ _80"> </span><span class="ff1a">_Exit<span class="_ _66"> </span></span>ar<span class="ls832">es<span class="_ _d"></span><span class="ls0">peciﬁed <span class="_ _3"></span>by <span class="_ _9"></span>ISO <span class="_ _3"></span>C, <span class="_ _3"></span>whereas</span></span></div><div class="t m0 x76 h5e y1aec ff1a fs10 fc0 sc0 ls0 ws0">_exit<span class="_ _53"> </span><span class="ff19">is speciﬁed by POSIX.1.</span></div><a class="l" href="#pfe" data-dest-detail='[14,"XYZ",50,757,1]'><div class="d m1" style="border-style:none;position:absolute;left:80.892409px;bottom:1236.288916px;width:157.079796px;height:19.679993px;background-color:rgba(255,255,255,0.000001);"></div></a></div><div class="pi" data-data='{"ctm":[2.100000,0.000000,0.000000,2.100000,-115.668004,-156.491993]}'></div></div>
