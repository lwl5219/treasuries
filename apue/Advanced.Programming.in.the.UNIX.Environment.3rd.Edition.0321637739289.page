<div id="pf121" class="pf w4 h1f" data-page-no="121"><div class="pc pc121 w4 h1f"><img class="bi x0 y0 w3 h4" alt="" src="bg121.png"/><div class="t m0 x31 h2 y8e ff1 fs0 fc0 sc0 ls0 ws0"><span class="fc1 sc0">ptg10805159</span></div><div class="t m0 x35 h24 ya4 ff19 fs0 fc0 sc0 ls0 ws0">Section <span class="_"> </span>8.1<span class="_ _1"></span><span class="lsa07">1C<span class="_ _234"></span><span class="ls0">hanging <span class="_"> </span>User <span class="_"> </span>IDs <span class="_"> </span>and <span class="_"> </span>Group <span class="_"> </span>IDs<span class="_ _1fb"> </span><span class="ff18">255</span></span></span></div><div class="t m0 x32 h57 y362 ff1a fs2d fc0 sc0 ls0 ws0">#include &quot;apue.h&quot;</div><div class="t m0 x32 h57 y1cc1 ff1a fs2d fc0 sc0 ls0 ws0">int</div><div class="t m0 x32 h57 y1d78 ff1a fs2d fc0 sc0 ls0 ws0">main(int argc, char *argv[])</div><div class="t m0 x32 h57 y1d79 ff1a fs2d fc0 sc0 ls0 ws0">{</div><div class="t m0 x8a h57 y1d7a ff1a fs2d fc0 sc0 ls0 ws0">int <span class="_ _186"> </span>i;</div><div class="t m0 x8a h57 y1d7b ff1a fs2d fc0 sc0 ls0 ws0">char <span class="_ _b7"> </span>**ptr;</div><div class="t m0 x8a h57 y2197 ff1a fs2d fc0 sc0 ls0 ws0">extern char **environ;</div><div class="t m0 x8a h57 y1d7c ff1a fs2d fc0 sc0 ls0 ws0">for (i = 0; i &lt; argc; i++)<span class="_ _189"> </span>/* echo all command-line args */</div><div class="t m0 x9d h57 y1d7d ff1a fs2d fc0 sc0 ls0 ws0">printf(&quot;argv[%d]: %s\n&quot;, i, argv[i]);</div><div class="t m0 x8a h57 y2016 ff1a fs2d fc0 sc0 ls0 ws0">for (ptr = environ; *ptr != 0; ptr++)<span class="_ _68"> </span>/* and all env strings */</div><div class="t m0 x9d h57 y2017 ff1a fs2d fc0 sc0 ls0 ws0">printf(&quot;%s\n&quot;, *ptr);</div><div class="t m0 x8a h57 y1cc7 ff1a fs2d fc0 sc0 ls0 ws0">exit(0);</div><div class="t m0 x32 h57 y1cc8 ff1a fs2d fc0 sc0 ls0 ws0">}</div><div class="t m0 x16e h2d y2198 ff18 fs10 fc0 sc0 ls0 ws0">Figure 8.17<span class="_ _5a"> </span><span class="ff19">Echo all command</span></div><div class="t m0 x87 h2d y2199 ff19 fs10 fc0 sc0 ls0 ws0">-</div><div class="t m0 xdd h2d y2198 ff19 fs10 fc0 sc0 ls0 ws0">line arguments and all envir<span class="_ _0"></span>onment strings</div><div class="t m0 x32 h49 y219a ff19 fs26 fc0 sc0 ls0 ws0">When we execute the program fr<span class="_ _0"></span>om Figur<span class="_ _0"></span><span class="lsd3">e8<span class="_ _d"></span><span class="ls0">.16, we get</span></span></div><div class="t m0 x3f h4e y219b ff1a fs28 fc0 sc0 ls0 ws0">$<span class="_"> </span><span class="ff1f">./a.out</span></div><div class="t m0 x3f h4e y219c ff1a fs28 fc0 sc0 ls0 ws0">argv[0]: echoall</div><div class="t m0 x3f h4e y219d ff1a fs28 fc0 sc0 ls0 ws0">argv[1]: myarg1</div><div class="t m0 x3f h4e y219e ff1a fs28 fc0 sc0 ls0 ws0">argv[2]: MY ARG2</div><div class="t m0 x3f h4e y219f ff1a fs28 fc0 sc0 ls0 ws0">USER=unknown</div><div class="t m0 x3f h4e y21a0 ff1a fs28 fc0 sc0 ls0 ws0">PATH=/tmp</div><div class="t m0 x3f h4e y21a1 ff1a fs28 fc0 sc0 ls1b6 ws0">$a<span class="_ _1d"></span><span class="ls0">rgv[0]: echoall</span></div><div class="t m0 x3f h4e y21a2 ff1a fs28 fc0 sc0 ls0 ws0">argv[1]: only 1 arg</div><div class="t m0 x3f h4e y21a3 ff1a fs28 fc0 sc0 ls0 ws0">USER=sar</div><div class="t m0 x3f h4e y21a4 ff1a fs28 fc0 sc0 ls0 ws0">LOGNAME=sar</div><div class="t m0 x3f h4e y21a5 ff1a fs28 fc0 sc0 ls0 ws0">SHELL=/bin/bash</div><div class="t m0 xb5 hc4 y21a6 ff1b fs28 fc0 sc0 ls0 ws0">47 mor<span class="ls396">el<span class="_ _d"></span><span class="ls0">ines that aren’<span class="_ _0"></span><span class="ls396">ts<span class="_ _5"></span><span class="ls0">hown</span></span></span></span></div><div class="t m0 x3f h4e y21a7 ff1a fs28 fc0 sc0 ls0 ws0">HOME=/home/sar</div><div class="t m0 x32 h4d y21a8 ff19 fs26 fc0 sc0 ls0 ws0">Note <span class="_ _23"></span>that <span class="_ _9"></span>the <span class="_ _23"> </span>shell <span class="_ _23"></span>prompt <span class="_ _9"></span>appeared <span class="_ _9"></span>befor<span class="lsa08">et<span class="_ _b"></span><span class="ls0">he <span class="_ _9"></span>printing <span class="_ _23"></span>of<span class="_ _45"> </span><span class="ff1a">argv[0]<span class="_ _35"> </span></span>fr<span class="_ _0"></span>om <span class="_ _23"></span>the <span class="_ _9"></span>second</span></span></div><div class="t m0 x32 h4d y21a9 ff1a fs26 fc0 sc0 ls0 ws0">exec<span class="ff19 ls199">.T<span class="_ _4a"></span><span class="ls0">his occurred because the par<span class="_ _1"></span>ent did not<span class="_"> </span><span class="ff1a">wait<span class="_ _66"> </span></span>for this child process to ﬁnish.</span></span></div><div class="t m0 x35 h99 y21aa ff16 fs3b fc0 sc0 ls0 ws0">8.11 <span class="_ _93"> </span>Changing<span class="_ _54"> </span>User <span class="_"> </span>IDs <span class="_"> </span>and <span class="_"> </span>Group <span class="_"> </span>IDs</div><div class="t m0 x32 h55 y21ab ff19 fs2c fc0 sc0 ls0 ws0">In <span class="_ _2"></span>the <span class="_ _3"></span>UNIX <span class="_ _3"></span>System, <span class="_ _2"></span>privileges, <span class="_ _3"></span>such <span class="_ _3"></span>as <span class="_ _2"></span>being <span class="_ _3"></span>able <span class="_ _3"></span>to <span class="_ _3"></span>change <span class="_ _2"></span>the <span class="_ _3"></span>system’s <span class="_ _3"></span>notion <span class="_ _2"></span>of <span class="_ _3"></span>the</div><div class="t m0 x32 h55 y21ac ff19 fs2c fc0 sc0 ls0 ws0">current date, <span class="_ _3"></span>and <span class="_ _3"></span>access <span class="_ _2"></span>control, <span class="_ _2"></span>such <span class="_ _3"></span>as <span class="_ _2"></span>being <span class="_ _3"></span>able <span class="_ _2"></span>to <span class="_ _3"></span>read <span class="_ _2"></span>or <span class="_ _3"></span>write <span class="_ _2"></span>a <span class="_ _3"></span>particular <span class="_ _2"></span>ﬁle, <span class="_ _3"></span>are</div><div class="t m0 x32 h55 y21ad ff19 fs2c fc0 sc0 ls0 ws0">based <span class="_ _9"></span>on <span class="_ _9"></span>user <span class="_ _9"></span>and <span class="_ _9"></span>group <span class="_ _3"></span>IDs.<span class="_ _5a"> </span>When <span class="_ _9"></span>our <span class="_ _9"></span>programs <span class="_ _9"></span>need <span class="_ _9"></span>additional <span class="_ _9"></span>privileges <span class="_ _9"></span>or <span class="_ _9"></span>need</div><div class="t m0 x32 h55 y21ae ff19 fs2c fc0 sc0 ls0 ws0">to <span class="_ _42"> </span>gain <span class="_ _42"> </span>access <span class="_ _53"> </span>to <span class="_ _42"> </span>resources <span class="_ _42"> </span>that <span class="_ _42"> </span>they <span class="_ _53"> </span>currently <span class="_ _42"> </span>aren’t <span class="_ _42"> </span>allowed <span class="_ _42"> </span>to <span class="_ _42"> </span>access, <span class="_ _53"> </span>they <span class="_ _42"> </span>need <span class="_ _53"> </span>to</div><div class="t m0 x32 h55 y21af ff19 fs2c fc0 sc0 ls0 ws0">change <span class="_ _42"> </span>their <span class="_ _53"> </span>user <span class="_ _53"> </span>or <span class="_ _53"> </span>group <span class="_ _42"> </span>ID <span class="_ _53"> </span>to <span class="_ _53"> </span>an <span class="_ _53"> </span>ID <span class="_ _42"> </span>that <span class="_ _53"> </span>has <span class="_ _53"> </span>the <span class="_ _53"> </span>appropriate <span class="_ _42"> </span>privilege <span class="_ _53"> </span>or <span class="_ _53"> </span>access.</div><div class="t m0 x32 h55 y21b0 ff19 fs2c fc0 sc0 ls0 ws0">Similarly<span class="_ _4"></span><span class="lsa09">,w<span class="_ _d"></span><span class="ls0">hen <span class="_ _2"></span>our programs <span class="_ _2"></span>need <span class="_ _2"></span>to <span class="_ _2"></span>lower their <span class="_ _2"></span>privileges <span class="_ _2"></span>or <span class="_ _2"></span>prevent access <span class="_ _2"></span>to <span class="_ _2"></span>certain</span></span></div><div class="t m0 x32 h55 y21b1 ff19 fs2c fc0 sc0 ls150 ws0">re<span class="ls0">sources, <span class="_ _2"></span>they <span class="_ _3"></span>do <span class="_ _3"></span>so <span class="_ _2"></span>by <span class="_ _3"></span>changing <span class="_ _3"></span>either <span class="_ _2"></span>their <span class="_ _3"></span>user <span class="_ _3"></span>ID <span class="_ _2"></span>or <span class="_ _3"></span>group <span class="_ _2"></span>ID <span class="_ _3"></span>to <span class="_ _2"></span>an <span class="_ _3"></span>ID <span class="_ _3"></span>without <span class="_ _2"></span>the</span></div><div class="t m0 x32 h55 y21b2 ff19 fs2c fc0 sc0 ls0 ws0">privilege or ability access to the resour<span class="_ _0"></span>ce.</div><a class="l" href="#pff" data-dest-detail='[15,"XYZ",50,757,1]'><div class="d m1" style="border-style:none;position:absolute;left:80.892842px;bottom:337.400699px;width:245.807587px;height:19.680008px;background-color:rgba(255,255,255,0.000001);"></div></a></div><div class="pi" data-data='{"ctm":[2.100000,0.000000,0.000000,2.100000,-115.668004,-156.491993]}'></div></div>
