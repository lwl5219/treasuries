<div id="pf15d" class="pf w4 h1f" data-page-no="15d"><div class="pc pc15d w4 h1f"><img class="bi x0 y0 w3 h4" alt="" src="apue/bg15d.png"/><div class="t m0 x31 h2 y8e ff1 fs0 fc0 sc0 ls0 ws0"><span class="fc1 sc0">ptg10805159</span></div><div class="t m0 x35 h24 ya4 ff19 fs0 fc0 sc0 ls0 ws0">Section <span class="_"> </span>10.2<span class="_ _24c"> </span>Signal <span class="_"> </span>Concepts<span class="_ _1b"> </span><span class="ff18">315</span></div><div class="t m0 x3f h2a y12f ff19 fsf fc0 sc0 ls5f ws0">We <span class="_ _66"> </span>c<span class="_ _9"></span><span class="ls0">an <span class="_ _9"></span>tell <span class="_ _9"></span>the <span class="_ _9"></span>kernel <span class="_ _9"></span>to <span class="_ _9"></span>do <span class="_ _9"></span>one <span class="_ _9"></span>of <span class="_ _9"></span>three <span class="_ _9"></span>things <span class="_ _9"></span>when <span class="_ _9"></span>a <span class="_ _9"></span>signal <span class="_ _9"></span>occurs.<span class="_ _5a"> </span></span>We <span class="_ _66"> </span>c<span class="_ _23"></span><span class="ls0">all <span class="_ _3"></span>this</span></div><div class="t m0 x32 h2b y130 ff19 fsf fc0 sc0 ls0 ws0">the<span class="_"> </span><span class="ff1b">disposition<span class="_"> </span></span>of the signal, or the<span class="_"> </span><span class="ff1b">action<span class="_"> </span></span>associated with a signal.</div><div class="t m0 x3f h2a y405 ff19 fsf fc0 sc0 ls0 ws0">1. <span class="_ _51"> </span>Ignor<span class="lsb85">et<span class="_ _c"></span><span class="ls0">he <span class="_ _42"> </span>signal.<span class="_ _65"> </span>This <span class="_ _42"> </span>works <span class="_ _42"> </span>for <span class="_ _53"> </span>most <span class="_ _42"> </span>signals, <span class="_ _53"> </span>but <span class="_ _42"> </span>two <span class="_ _53"> </span>signals <span class="_ _42"> </span>can <span class="_ _53"> </span>never <span class="_ _42"> </span>be</span></span></div><div class="t m0 x41 h26 y1fb ff19 fsf fc0 sc0 ls0 ws0">ignored:<span class="_"> </span><span class="ff1a">SIGKILL<span class="_ _66"> </span></span>and<span class="_ _47"> </span><span class="ff1a">SIGSTOP</span><span class="lsb86">.T<span class="_ _5b"></span><span class="ls0">he <span class="_ _2"></span>reason these <span class="_ _2"></span>two <span class="_ _2"></span>signals <span class="_ _2"></span>can’t <span class="_ _2"></span>be <span class="_ _2"></span>ignored</span></span></div><div class="t m0 x41 h2a y1fc ff19 fsf fc0 sc0 ls0 ws0">is to provide the kernel and <span class="_ _2"></span>the superuser with a <span class="_ _2"></span>sureﬁr<span class="_ _0"></span><span class="lsb87">ew<span class="_ _4f"></span><span class="ls0">ay <span class="_ _2"></span>of either killing <span class="_ _2"></span>or</span></span></div><div class="t m0 x41 h2a y1fd ff19 fsf fc0 sc0 ls0 ws0">stopping <span class="_ _3"></span>any <span class="_ _3"></span>process. <span class="_ _47"> </span>Also,<span class="_ _47"> </span>if <span class="_ _3"></span>we <span class="_ _3"></span>ignor<span class="lsb88">es<span class="_ _8"></span><span class="ls0">ome <span class="_ _3"></span>of <span class="_ _3"></span>the <span class="_ _3"></span>signals <span class="_ _3"></span>that <span class="_ _3"></span>ar<span class="ls89e">eg<span class="_ _8"></span><span class="ls0">enerated</span></span></span></span></div><div class="t m0 x41 h2a y406 ff19 fsf fc0 sc0 ls0 ws0">by <span class="_ _9"></span>a <span class="_ _3"></span>hardwar<span class="ls243">ee<span class="_ _b"></span><span class="ls0">xception <span class="_ _3"></span>(such <span class="_ _9"></span>as <span class="_ _9"></span>illegal <span class="_ _9"></span>memory <span class="_ _9"></span>refer<span class="_ _0"></span>ence <span class="_ _9"></span>or <span class="_ _3"></span>divide <span class="_ _9"></span>by <span class="_ _9"></span>0), <span class="_ _9"></span>the</span></span></div><div class="t m0 x41 h2a y407 ff19 fsf fc0 sc0 ls0 ws0">behavior of the process is undeﬁned.</div><div class="t m0 x3f h2a y28ae ff19 fsf fc0 sc0 ls0 ws0">2. <span class="_ _51"> </span>Catch<span class="_ _61"> </span>the <span class="_ _47"> </span>signal.<span class="_ _50"> </span><span class="ls5f">To <span class="_ _59"> </span>d<span class="_ _9"></span><span class="lsb89">ot<span class="_ _5b"></span><span class="ls0">his, <span class="_ _47"> </span>we <span class="_ _66"> </span>tell <span class="_ _47"> </span>the <span class="_ _66"> </span>kernel <span class="_ _47"> </span>to <span class="_ _47"> </span>call <span class="_ _66"> </span>a <span class="_ _47"> </span>function <span class="_ _47"> </span>of <span class="_ _66"> </span>ours</span></span></span></div><div class="t m0 x41 h2a y28af ff19 fsf fc0 sc0 ls0 ws0">whenever <span class="_ _23"></span>the <span class="_ _23"></span>signal <span class="_ _23"></span>occurs.<span class="_ _5a"> </span>In <span class="_ _23"> </span>our <span class="_ _23"> </span>function, <span class="_ _23"> </span>we <span class="_ _23"> </span>can <span class="_ _23"> </span>do <span class="_ _23"> </span>whatever <span class="_ _23"> </span>we <span class="_ _23"> </span>want <span class="_ _23"> </span>to</div><div class="t m0 x41 h2a y28b0 ff19 fsf fc0 sc0 ls0 ws0">handle <span class="_"> </span>the <span class="_"> </span>condition.<span class="_ _48"> </span>If <span class="_"> </span>we’r<span class="lsb8a">ew<span class="_ _5b"></span><span class="ls0">riting <span class="_"> </span>a <span class="_"> </span>command <span class="_"> </span>interpr<span class="_ _0"></span>eter<span class="_ _6"></span><span class="lsb8a">,f<span class="_ _4a"></span><span class="ls0">or <span class="_"> </span>example,</span></span></span></span></div><div class="t m0 x41 h2a y28b1 ff19 fsf fc0 sc0 ls0 ws0">when <span class="_ _2"></span>the <span class="_ _2"></span>user <span class="_ _2"></span>generates <span class="_ _2"></span>the <span class="_ _3"></span>interrupt <span class="_ _2"></span>signal <span class="_ _2"></span>at <span class="_ _2"></span>the <span class="_ _2"></span>keyboard, <span class="_ _2"></span>we <span class="_ _2"></span>probably <span class="_ _2"></span>want</div><div class="t m0 x41 h2a y28b2 ff19 fsf fc0 sc0 ls0 ws0">to <span class="_ _3"></span>return <span class="_ _9"></span>to <span class="_ _3"></span>the <span class="_ _9"></span>main <span class="_ _9"></span>loop <span class="_ _9"></span>of <span class="_ _9"></span>the <span class="_ _3"></span>program, <span class="_ _9"></span>terminating <span class="_ _3"></span>whatever <span class="_ _9"></span>command <span class="_ _9"></span>we</div><div class="t m0 x41 h26 y28b3 ff19 fsf fc0 sc0 ls0 ws0">wer<span class="lsa6">ee<span class="_ _c"></span><span class="ls0">xecuting <span class="_ _42"> </span>for <span class="_ _42"> </span>the <span class="_ _42"> </span>user<span class="_ _6"></span><span class="lsb8b">.I<span class="_ _7"></span><span class="lsb8c">ft<span class="_ _43"></span><span class="ls0">he<span class="_ _35"> </span><span class="ff1a">SIGCHLD<span class="_ _44"> </span></span>signal <span class="_ _42"> </span>is <span class="_ _23"> </span>caught, <span class="_ _42"> </span>it <span class="_ _42"> </span>means <span class="_ _42"> </span>that <span class="_ _23"> </span>a</span></span></span></span></span></div><div class="t m0 x41 h26 y28b4 ff19 fsf fc0 sc0 ls0 ws0">child <span class="_ _9"></span>process <span class="_ _9"></span>has <span class="_ _9"></span>terminated, <span class="_ _9"></span>so <span class="_ _9"></span>the <span class="_ _23"></span>signal-catching <span class="_ _9"></span>function <span class="_ _9"></span>can <span class="_ _9"></span>call<span class="_ _45"> </span><span class="ff1a">waitpid</span></div><div class="t m0 x41 h2a y28b5 ff19 fsf fc0 sc0 ls0 ws0">to <span class="_ _23"> </span>fetch <span class="_ _23"> </span>the <span class="_ _42"> </span>child’s <span class="_ _23"> </span>process <span class="_ _23"> </span>ID <span class="_ _23"> </span>and <span class="_ _42"> </span>termination <span class="_ _23"> </span>status.<span class="_ _51"> </span>As <span class="_ _42"> </span>another <span class="_ _23"> </span>example, <span class="_ _23"> </span>if</div><div class="t m0 x41 h2a y28b6 ff19 fsf fc0 sc0 ls0 ws0">the <span class="_ _2"></span>process <span class="_ _2"></span>has <span class="_ _3"></span>created <span class="_ _2"></span>temporary <span class="_ _3"></span>ﬁles, <span class="_ _2"></span>we <span class="_ _3"></span>may <span class="_ _3"></span>want <span class="_ _3"></span>to <span class="_ _2"></span>write <span class="_ _3"></span>a <span class="_ _3"></span>signal-catching</div><div class="t m0 x41 h26 y28b7 ff19 fsf fc0 sc0 ls0 ws0">function for <span class="_ _2"></span>the<span class="_"> </span><span class="ff1a">SIGTERM<span class="_ _66"> </span></span>signal <span class="_ _2"></span>(the termination <span class="_ _2"></span>signal that <span class="_ _2"></span>is the <span class="_ _2"></span>default signal</div><div class="t m0 x41 h26 y28b8 ff19 fsf fc0 sc0 ls0 ws0">sent <span class="_ _3"></span>by <span class="_ _3"></span>the<span class="_ _47"> </span><span class="ff1a">kill<span class="_ _45"> </span></span>command) <span class="_ _2"></span>to <span class="_ _9"></span>clean <span class="_ _3"></span>up <span class="_ _3"></span>the <span class="_ _3"></span>temporary <span class="_ _9"></span>ﬁles.<span class="_ _61"> </span>Note <span class="_ _9"></span>that <span class="_ _3"></span>the <span class="_ _3"></span>two</div><div class="t m0 x41 h26 y28b9 ff19 fsf fc0 sc0 ls0 ws0">signals<span class="_"> </span><span class="ff1a">SIGKILL<span class="_ _80"> </span></span>and<span class="_"> </span><span class="ff1a">SIGSTOP<span class="_ _66"> </span></span>can’t be caught.</div><div class="t m0 x3f h2a y28ba ff19 fsf fc0 sc0 ls0 ws0">3. <span class="_ _51"> </span>Let<span class="_ _16"> </span>the <span class="_ _45"> </span>default <span class="_ _47"> </span>action <span class="_ _45"> </span>apply<span class="_ _4"></span><span class="lsb8d">.E<span class="_ _56"></span><span class="ls0">very <span class="_ _45"> </span>signal <span class="_ _47"> </span>has <span class="_ _45"> </span>a <span class="_ _47"> </span>default <span class="_ _45"> </span>action, <span class="_ _47"> </span>shown <span class="_ _47"> </span>in</span></span></div><div class="t m0 x41 h2a y28bb ff19 fsf fc0 sc0 ls0 ws0">Figur<span class="lsb8e">e1<span class="_ _55"></span><span class="ls0">0.1. <span class="_ _4b"> </span>Note<span class="_ _44"> </span>that <span class="_ _53"> </span>the <span class="_ _53"> </span>default <span class="_ _53"> </span>action <span class="_ _53"> </span>for <span class="_ _53"> </span>most <span class="_ _42"> </span>signals <span class="_ _53"> </span>is <span class="_ _53"> </span>to <span class="_ _53"> </span>terminate <span class="_ _53"> </span>the</span></span></div><div class="t m0 x41 h2a y28bc ff19 fsf fc0 sc0 ls0 ws0">process.</div><div class="t m0 x32 h2a y1bd ff19 fsf fc0 sc0 ls0 ws0">Figur<span class="lsb8f">e1<span class="_ _8"></span><span class="ls0">0.1 <span class="_ _2"></span>lists <span class="_ _2"></span>the <span class="_ _2"></span>names <span class="_ _2"></span>of <span class="_ _2"></span>all <span class="_ _2"></span>the <span class="_ _2"></span>signals, <span class="_ _2"></span>an <span class="_ _2"></span>indication <span class="_ _2"></span>of <span class="_ _2"></span>which <span class="_ _3"></span>systems <span class="_ _2"></span>support <span class="_ _2"></span>the</span></span></div><div class="t m0 x32 h2a y1be ff19 fsf fc0 sc0 ls0 ws0">signal, <span class="_ _3"></span>and <span class="_ _3"></span>the <span class="_ _3"></span>default <span class="_ _3"></span>action <span class="_ _3"></span>for <span class="_ _3"></span>the <span class="_ _3"></span>signal.<span class="_ _16"> </span>The <span class="_ _3"></span>SUS <span class="_ _3"></span>column <span class="_ _3"></span>contains <span class="_ _3"></span>• <span class="_ _3"></span>if <span class="_ _3"></span>the <span class="_ _3"></span>signal <span class="_ _3"></span>is</div><div class="t m0 x32 h2a y1bf ff19 fsf fc0 sc0 ls0 ws0">deﬁned <span class="_ _9"></span>as <span class="_ _9"></span>part <span class="_ _9"></span>of <span class="_ _9"></span>the <span class="_ _23"></span>base <span class="_ _9"></span>POSIX.1 <span class="_ _9"></span>speciﬁcation <span class="_ _9"></span>and<span class="_ _45"> </span><span class="ff18">XSI<span class="_ _45"> </span></span>if <span class="_ _9"></span>it <span class="_ _9"></span>is <span class="_ _9"></span>deﬁned <span class="_ _23"></span>as <span class="_ _9"></span>part <span class="_ _9"></span>of <span class="_ _9"></span>the</div><div class="t m0 x32 h2a y1c0 ff19 fsf fc0 sc0 ls0 ws0">XSI option.</div><div class="t m0 x3f h2a y1c1 ff19 fsf fc0 sc0 ls0 ws0">When the <span class="_ _2"></span>default <span class="_ _2"></span>action <span class="_ _2"></span>is <span class="_ _2"></span>labeled ‘‘terminate+cor<span class="_ _0"></span>e,’<span class="_ _1"></span>’<span class="_ _66"> </span>it<span class="_ _47"> </span>means that <span class="_ _2"></span>a <span class="_ _2"></span>memory <span class="_ _2"></span>image</div><div class="t m0 x32 h26 y1c2 ff19 fsf fc0 sc0 ls0 ws0">of <span class="_ _42"> </span>the <span class="_ _53"> </span>process <span class="_ _42"> </span>is <span class="_ _42"> </span>left <span class="_ _53"> </span>in <span class="_ _42"> </span>the <span class="_ _53"> </span>ﬁle <span class="_ _42"> </span>named<span class="_ _44"> </span><span class="ff1a">core<span class="_ _44"> </span></span>of <span class="_ _53"> </span>the <span class="_ _42"> </span>current <span class="_ _42"> </span>working <span class="_ _53"> </span>directory <span class="_ _42"> </span>of <span class="_ _42"> </span>the</div><div class="t m0 x32 h26 y1c3 ff19 fsf fc0 sc0 ls0 ws0">process. <span class="_ _47"> </span>(Because<span class="_ _47"> </span>the <span class="_ _3"></span>ﬁle <span class="_ _3"></span>is <span class="_ _3"></span>named<span class="_ _45"> </span><span class="ff1a">core</span>,<span class="_ _47"> </span>it<span class="_ _47"> </span>shows <span class="_ _3"></span>how <span class="_ _9"></span>long <span class="_ _3"></span>this <span class="_ _3"></span>featur<span class="ls82">eh<span class="_ _b"></span><span class="ls0">as <span class="_ _9"></span>been <span class="_ _3"></span>part</span></span></div><div class="t m0 x32 h2a y1c4 ff19 fsf fc0 sc0 ls0 ws0">of <span class="_ _e"> </span>the <span class="_"> </span>UNIX <span class="_ _e"> </span>System.)<span class="_ _48"> </span>This <span class="_"> </span>ﬁle <span class="_ _53"> </span>can <span class="_"> </span>be <span class="_ _e"> </span>used <span class="_"> </span>with <span class="_ _53"> </span>most <span class="_"> </span>UNIX <span class="_ _e"> </span>System <span class="_ _e"> </span>debuggers <span class="_"> </span>to</div><div class="t m0 x32 h2a y1c5 ff19 fsf fc0 sc0 ls0 ws0">examine the state of the process at the time it terminated.</div><div class="t m0 x76 h52 y28bd ff19 fs2a fc0 sc0 ls0 ws0">The <span class="_ _23"> </span>generation <span class="_ _23"> </span>of <span class="_ _23"> </span>the<span class="_ _47"> </span><span class="ff1a">core<span class="_ _45"> </span></span>ﬁle <span class="_ _9"> </span>is <span class="_ _23"> </span>an <span class="_ _23"> </span>implementation <span class="_ _23"> </span>feature<span class="_ _47"> </span>of<span class="_ _45"> </span>most <span class="_ _23"> </span>versions <span class="_ _23"> </span>of <span class="_ _23"> </span>the <span class="_ _9"> </span>UNIX</div><div class="t m0 x76 h51 y28be ff19 fs2a fc0 sc0 ls0 ws0">System. <span class="_ _46"> </span>Although<span class="_ _61"> </span>this <span class="_ _47"> </span>feature<span class="_ _46"> </span>is<span class="_ _61"> </span>not <span class="_ _47"> </span>part <span class="_ _45"> </span>of <span class="_ _47"> </span>POSIX.1, <span class="_ _45"> </span>it <span class="_ _47"> </span>is <span class="_ _45"> </span>mentioned <span class="_ _47"> </span>as <span class="_ _45"> </span>a <span class="_ _47"> </span>potential</div><div class="t m0 x76 h51 y28bf ff19 fs2a fc0 sc0 ls0 ws0">implementation-speciﬁc action in the Single UNIX Speciﬁcation’s XSI option.</div><div class="t m0 x76 h51 y28c0 ff19 fs2a fc0 sc0 ls0 ws0">The <span class="_ _9"> </span>name <span class="_ _23"> </span>of <span class="_ _23"> </span>the <span class="_ _9"> </span>cor<span class="lsb90">eﬁ<span class="_ _8"></span><span class="ls0">le <span class="_ _23"> </span>varies <span class="_ _9"> </span>among <span class="_ _23"> </span>implementations.<span class="_ _46"> </span>On <span class="_ _23"> </span>FreeBSD <span class="_ _9"></span>8.0, <span class="_ _23"> </span>for <span class="_ _9"></span>example, <span class="_ _23"> </span>the</span></span></div><div class="t m0 x76 h76 y28c1 ff19 fs2a fc0 sc0 ls0 ws0">cor<span class="lsb91">eﬁ<span class="_ _5"></span><span class="ls0">le is named<span class="_ _e"> </span><span class="ff1b">cmdname</span>.core, where<span class="_"> </span><span class="ff1b">cmdname<span class="_"> </span></span>is <span class="_ _2"></span>the name of the <span class="_ _2"></span>command corresponding to</span></span></div><div class="t m0 x76 h76 y28c2 ff19 fs2a fc0 sc0 ls0 ws0">the process that <span class="_ _2"></span>received the signal.<span class="_ _44"> </span>On <span class="_ _2"></span>Mac <span class="_ _2"></span>OS X <span class="_ _2"></span>10.6.8, <span class="_ _2"></span>the cor<span class="lsb92">eﬁ<span class="_ _5"></span><span class="ls0">le <span class="_ _2"></span>is named <span class="_ _2"></span>core.<span class="ff1b">pid</span><span class="lsb92">,w<span class="_ _5"></span><span class="ls0">here</span></span></span></span></div><div class="t m0 x76 h76 y28c3 ff1b fs2a fc0 sc0 ls0 ws0">pid<span class="_ _80"> </span><span class="ff19">is <span class="_ _2"></span>the <span class="_ _3"></span>ID <span class="_ _3"></span>of <span class="_ _2"></span>the <span class="_ _3"></span>process <span class="_ _2"></span>that <span class="_ _2"></span>received <span class="_ _3"></span>the <span class="_ _2"></span>signal.<span class="_ _4b"> </span>(These <span class="_ _3"></span>systems <span class="_ _2"></span>allow <span class="_ _3"></span>the <span class="_ _2"></span>cor<span class="lsb93">eﬁ<span class="_ _5"></span><span class="ls0">lename <span class="_ _2"></span>to</span></span></span></div><div class="t m0 x76 h52 y28c4 ff19 fs2a fc0 sc0 ls0 ws0">be <span class="_"> </span>conﬁgured <span class="_"> </span>via <span class="_"> </span>a<span class="_ _44"> </span><span class="ff1a">sysctl<span class="_ _35"> </span></span>parameter<span class="_ _1"></span><span class="lsb94">.O<span class="_ _26"></span><span class="lsb95">nL<span class="_ _43"></span><span class="ls0">inux <span class="_"> </span>3.2.0, <span class="_"> </span>the <span class="_"> </span>name <span class="_ _e"> </span>is <span class="_ _e"> </span>conﬁgured <span class="_"> </span>through</span></span></span></div><div class="t m0 x76 h52 y28c5 ff1a fs2a fc0 sc0 ls0 ws0">/proc/sys/kernel/core_pattern<span class="ff19">.)</span></div><div class="t m0 x76 h51 y28c6 ff19 fs2a fc0 sc0 ls0 ws0">Most implementations leave <span class="_ _2"></span>the cor<span class="lsb96">eﬁ<span class="_ _5"></span><span class="ls0">le <span class="_ _2"></span>in the current working directory of <span class="_ _2"></span>the corresponding</span></span></div><div class="t m0 x76 h52 y28c7 ff19 fs2a fc0 sc0 ls0 ws0">process; <span class="_"> </span>Mac<span class="_"> </span>OS X places all cor<span class="_ _0"></span><span class="lse9">eﬁ<span class="_ _84"></span><span class="ls0">les in<span class="_"> </span><span class="ff1a">/cores<span class="_ _53"> </span></span>instead.</span></span></div></div><div class="pi" data-data='{"ctm":[2.100000,0.000000,0.000000,2.100000,-115.668004,-156.491993]}'></div></div>
