<div id="pf2c" class="pf w4 h1f" data-page-no="2c"><div class="pc pc2c w4 h1f"><img class="bi x0 y0 w3 h4" alt="" src="bg2c.png"/><div class="t m0 x31 h2 y8e ff1 fs0 fc0 sc0 ls0 ws0"><span class="fc1 sc0">ptg10805159</span></div><div class="t m0 x35 h24 ya4 ff18 fs0 fc0 sc0 ls0 ws0">10<span class="_ _1b"> </span><span class="ff19">UNIX <span class="_"> </span>System <span class="_"> </span>Overview<span class="_ _85"> </span>Chapter <span class="_"> </span>1</span></div><div class="t m0 x35 h27 y12f ff16 fsf fc0 sc0 ls0 ws0">Standar<span class="ls12e">dI<span class="_ _8"></span><span class="ls0">/O</span></span></div><div class="t m0 x32 h2a y342 ff19 fsf fc0 sc0 ls0 ws0">The <span class="_ _35"> </span>standar<span class="ls143">dI<span class="_ _52"></span><span class="ls0">/O <span class="_ _44"> </span>functions <span class="_ _35"> </span>provide <span class="_ _35"> </span>a <span class="_ _35"> </span>buffered <span class="_ _35"> </span>interface <span class="_ _35"> </span>to <span class="_ _35"> </span>the <span class="_ _44"> </span>unbuf<span class="_ _0"></span>fered <span class="_ _35"> </span>I/O</span></span></div><div class="t m0 x32 h2a y343 ff19 fsf fc0 sc0 ls0 ws0">functions. <span class="_ _45"> </span>Using<span class="_ _45"> </span>standar<span class="ls144">dI<span class="_ _b"></span><span class="ls0">/O <span class="_ _3"></span>relieves <span class="_ _9"></span>us <span class="_ _9"></span>from <span class="_ _9"></span>having <span class="_ _9"></span>to <span class="_ _9"></span>choose <span class="_ _9"></span>optimal <span class="_ _9"></span>buffer <span class="_ _9"></span>sizes,</span></span></div><div class="t m0 x32 h26 y344 ff19 fsf fc0 sc0 ls0 ws0">such <span class="_ _2"></span>as <span class="_ _2"></span>the<span class="_ _47"> </span><span class="ff1a">BUFFSIZE<span class="_ _47"> </span></span>constant <span class="_ _2"></span>in <span class="_ _2"></span>Figur<span class="ls145">e1<span class="_ _8"></span><span class="ls0">.4. <span class="_ _47"> </span>The<span class="_ _47"> </span>standar<span class="ls146">dI<span class="_ _8"></span><span class="ls0">/O <span class="_ _2"></span>functions <span class="_ _3"></span>also <span class="_ _2"></span>simplify</span></span></span></span></div><div class="t m0 x32 h26 y345 ff19 fsf fc0 sc0 ls0 ws0">dealing <span class="_ _23"></span>with <span class="_ _23"></span>lines <span class="_ _23"></span>of <span class="_ _9"></span>input <span class="_ _23"> </span>(a <span class="_ _23"> </span>common <span class="_ _23"> </span>occurrence <span class="_ _23"></span>in <span class="_ _23"></span>UNIX <span class="_ _23"></span>applications).<span class="_ _5a"> </span>The<span class="_ _35"> </span><span class="ff1a">fgets</span></div><div class="t m0 x32 h26 y346 ff19 fsf fc0 sc0 ls0 ws0">function, <span class="_ _e"> </span>for <span class="_ _e"> </span>example, <span class="_"> </span>r<span class="_ _0"></span>eads <span class="_ _e"> </span>an <span class="_ _e"> </span>entir<span class="ls147">el<span class="_ _4a"></span><span class="ls0">ine. <span class="_ _59"> </span>The<span class="_ _59"> </span><span class="ff1a">read<span class="_ _4b"> </span></span>function, <span class="_"> </span>in <span class="_ _53"> </span>contrast, <span class="_ _e"> </span>reads <span class="_ _e"> </span>a</span></span></div><div class="t m0 x32 h2a y347 ff19 fsf fc0 sc0 ls0 ws0">speciﬁed <span class="_ _53"> </span>number <span class="_ _e"> </span>of <span class="_ _e"> </span>bytes.<span class="_ _65"> </span>As <span class="_ _e"> </span>we <span class="_ _53"> </span>shall <span class="_ _e"> </span>see <span class="_ _e"> </span>in <span class="_ _e"> </span>Section <span class="_ _53"> </span>5.4, <span class="_ _e"> </span>the <span class="_ _e"> </span>standar<span class="ls148">dI<span class="_ _55"></span><span class="ls0">/O <span class="_ _53"> </span>library</span></span></div><div class="t m0 x32 h2a y348 ff19 fsf fc0 sc0 ls0 ws0">provides functions that let us contr<span class="_ _0"></span>ol the style of buf<span class="_ _0"></span>fering used by the library<span class="_ _4"></span>.</div><div class="t m0 x3f h26 y349 ff19 fsf fc0 sc0 ls0 ws0">The <span class="_ _35"> </span>most <span class="_ _45"> </span>common <span class="_ _35"> </span>standar<span class="ls149">dI<span class="_ _7"></span><span class="ls0">/O <span class="_ _35"> </span>function <span class="_ _35"> </span>is<span class="_ _5a"> </span><span class="ff1a">printf</span><span class="ls14a">.I<span class="_ _56"></span><span class="ls149">np<span class="_ _7"></span><span class="ls45">ro<span class="ls0">grams <span class="_ _35"> </span>that <span class="_ _35"> </span>call</span></span></span></span></span></span></div><div class="t m0 x32 h26 y1d2 ff1a fsf fc0 sc0 ls0 ws0">printf<span class="ff19 ls14b">,w<span class="_ _c"></span><span class="ls0">e’ll <span class="_ _53"> </span>always <span class="_ _42"> </span>include<span class="_ _44"> </span><span class="ff1a">&lt;stdio.h&gt;<span class="_ _9"></span></span><span class="ls9d">—n<span class="_ _6"></span><span class="ls0">ormally <span class="_ _42"> </span>by <span class="_ _53"> </span>including<span class="_ _44"> </span><span class="ff1a">apue.h<span class="_ _9"></span></span><span class="ls9d">—a<span class="_ _6"></span><span class="ls14c">st<span class="_ _43"></span><span class="ls0">his</span></span></span></span></span></span></span></div><div class="t m0 x32 h2a y1d3 ff19 fsf fc0 sc0 ls0 ws0">header contains the function prototypes for all the standar<span class="_ _0"></span><span class="ls44">dI<span class="_ _d"></span><span class="ls0">/O functions.</span></span></div><div class="t m0 x35 h27 y38a ff16 fsf fc0 sc0 ls0 ws0">Example</div><div class="t m0 x32 h2a y38b ff19 fsf fc0 sc0 ls0 ws0">The <span class="_ _2"></span>program <span class="_ _2"></span>in <span class="_ _3"></span>Figur<span class="ls14d">e1<span class="_ _8"></span><span class="ls0">.5, <span class="_ _2"></span>which <span class="_ _3"></span>we’ll <span class="_ _2"></span>examine <span class="_ _3"></span>in <span class="_ _2"></span>mor<span class="ls14d">ed<span class="_ _4f"></span><span class="ls0">etail <span class="_ _2"></span>in <span class="_ _3"></span>Section <span class="_ _2"></span>5.8, <span class="_ _3"></span>is <span class="_ _2"></span>like <span class="_ _3"></span>the</span></span></span></span></div><div class="t m0 x32 h26 y38c ff19 fsf fc0 sc0 ls0 ws0">previous <span class="_ _2"></span>program <span class="_ _2"></span>that <span class="_ _2"></span>called<span class="_ _47"> </span><span class="ff1a">read<span class="_ _47"> </span></span>and<span class="_ _47"> </span><span class="ff1a">write</span><span class="ls14e">.T<span class="_ _1d"></span><span class="ls0">his <span class="_ _3"></span>program <span class="_ _2"></span>copies <span class="_ _3"></span>standar<span class="ls14f">di<span class="_ _8"></span><span class="ls0">nput <span class="_ _3"></span>to</span></span></span></span></div><div class="t m0 x32 h2a y38d ff19 fsf fc0 sc0 ls0 ws0">standar<span class="ls44">do<span class="_ _4f"></span><span class="ls0">utput and can copy any regular ﬁle.</span></span></div><div class="t m0 x32 h4e y38e ff1a fs28 fc0 sc0 ls0 ws0">#include &quot;apue.h&quot;</div><div class="t m0 x32 h4e y38f ff1a fs28 fc0 sc0 ls0 ws0">int</div><div class="t m0 x32 h4e y390 ff1a fs28 fc0 sc0 ls0 ws0">main(void)</div><div class="t m0 x32 h4e y391 ff1a fs28 fc0 sc0 ls0 ws0">{</div><div class="t m0 x8a h4e y392 ff1a fs28 fc0 sc0 ls0 ws0">int <span class="_ _15"> </span>c;</div><div class="t m0 x8a h4e y393 ff1a fs28 fc0 sc0 ls0 ws0">while ((c = getc(stdin)) != EOF)</div><div class="t m0 x9d h4e y394 ff1a fs28 fc0 sc0 ls0 ws0">if (putc(c, stdout) == EOF)</div><div class="t m0 x1f h4e y395 ff1a fs28 fc0 sc0 ls0 ws0">err_sys(&quot;output error&quot;);</div><div class="t m0 x8a h4e y396 ff1a fs28 fc0 sc0 ls0 ws0">if (ferror(stdin))</div><div class="t m0 x9d h4e y397 ff1a fs28 fc0 sc0 ls0 ws0">err_sys(&quot;input error&quot;);</div><div class="t m0 x8a h4e y398 ff1a fs28 fc0 sc0 ls0 ws0">exit(0);</div><div class="t m0 x32 h4e y399 ff1a fs28 fc0 sc0 ls0 ws0">}</div><div class="t m0 x53 h2e y39a ff18 fs11 fc0 sc0 ls0 ws0">Figure 1.5<span class="_ _5a"> </span><span class="ff19">Copy standar<span class="lsdb">di<span class="_ _84"></span><span class="ls0">nput to standar<span class="lsdb">do<span class="_ _5"></span><span class="ls0">utput, using standar<span class="lsdb">dI<span class="_ _84"></span><span class="ls0">/O</span></span></span></span></span></span></span></div><div class="t m0 x32 h54 y39b ff19 fs2c fc0 sc0 ls0 ws0">The <span class="_ _2"></span>function<span class="_ _45"> </span><span class="ff1a">getc<span class="_ _66"> </span></span><span class="ls150">re<span class="_ _2"></span></span>ads <span class="_ _3"></span>one <span class="_ _3"></span>character <span class="_ _3"></span>at <span class="_ _3"></span>a <span class="_ _3"></span>time, <span class="_ _3"></span>and <span class="_ _3"></span>this <span class="_ _3"></span>character <span class="_ _2"></span>is <span class="_ _3"></span>written <span class="_ _3"></span>by<span class="_ _47"> </span><span class="ff1a">putc</span>.</div><div class="t m0 x32 h54 y39c ff19 fs2c fc0 sc0 ls0 ws0">After <span class="_ _23"> </span>the <span class="_ _23"> </span>last <span class="_ _23"> </span>byte <span class="_ _42"> </span>of <span class="_ _23"> </span>input <span class="_ _23"> </span>has <span class="_ _23"> </span>been <span class="_ _42"> </span>read,<span class="_ _45"> </span><span class="ff1a">getc<span class="_ _35"> </span></span><span class="ls150">re<span class="_ _2"></span></span>turns <span class="_ _23"> </span>the <span class="_ _42"> </span>constant<span class="_ _35"> </span><span class="ff1a">EOF<span class="_ _35"> </span></span>(deﬁned <span class="_ _23"></span>in</div><div class="t m0 x32 h54 y39d ff1a fs2c fc0 sc0 ls0 ws0">&lt;stdio.h&gt;<span class="ff19">). <span class="_ _45"> </span>The<span class="_ _35"> </span>standar<span class="_ _0"></span><span class="ls151">dI<span class="_ _b"></span><span class="ls0">/O <span class="_ _9"></span>constants<span class="_ _45"> </span><span class="ff1a">stdin<span class="_ _35"> </span></span>and<span class="_ _45"> </span><span class="ff1a">stdout<span class="_ _45"> </span></span>ar<span class="ls151">ea<span class="_ _b"></span><span class="ls0">lso <span class="_ _9"></span>deﬁned <span class="_ _9"></span>in <span class="_ _23"> </span>the</span></span></span></span></span></div><div class="t m0 x32 h54 y39e ff1a fs2c fc0 sc0 ls0 ws0">&lt;stdio.h&gt;<span class="_ _80"> </span><span class="ff19">header and refer to the standar<span class="ls142">di<span class="_ _4f"></span><span class="ls0">nput and standar<span class="ls142">do<span class="_ _d"></span><span class="ls0">utput.</span></span></span></span></span></div><div class="t m0 x35 h59 y39f ff16 fs2e fc0 sc0 ls0 ws0">1.6 <span class="_ _68"> </span>Programs <span class="_"> </span>and <span class="_"> </span>Pr<span class="_ _1"></span>ocesses</div><div class="t m0 x35 h5a y3a0 ff16 fs29 fc0 sc0 ls0 ws0">Program</div><div class="t m0 x32 h5b y3a1 ff19 fs29 fc0 sc0 ls0 ws0">A<span class="_ _45"> </span><span class="ff1b">program<span class="_ _45"> </span></span>is <span class="_ _9"></span>an <span class="_ _9"></span>executable <span class="_ _9"></span>ﬁle <span class="_ _23"></span>r<span class="_ _0"></span>esiding <span class="_ _9"></span>on <span class="_ _9"></span>disk <span class="_ _23"></span>in <span class="_ _9"></span>a <span class="_ _9"></span>directory<span class="_ _4"></span><span class="ls152">.A<span class="_ _d"></span><span class="ls0">program <span class="_ _9"></span>is <span class="_ _9"></span>read <span class="_ _9"></span>into</span></span></div><div class="t m0 x32 h5c y3a2 ff19 fs29 fc0 sc0 ls0 ws0">memory <span class="_ _9"></span>and <span class="_ _23"></span>is <span class="_ _9"></span>executed <span class="_ _23"></span>by <span class="_ _9"></span>the <span class="_ _23"> </span>kernel <span class="_ _23"></span>as <span class="_ _9"></span>a <span class="_ _23"></span>result <span class="_ _9"></span>of <span class="_ _9"></span>one <span class="_ _23"></span>of <span class="_ _9"></span>the <span class="_ _23"></span>seven<span class="_ _45"> </span><span class="ff1a">exec<span class="_ _35"> </span></span>functions.</div><div class="t m0 x32 h50 y3a3 ff19 fs29 fc0 sc0 lse2 ws0">We<span class="_ _9"></span><span class="ls0">’ll cover these functions in Section 8.10.</span></div><a class="l" href="#pfb" data-dest-detail='[11,"XYZ",50,757,1]'><div class="d m1" style="border-style:none;position:absolute;left:80.893259px;bottom:258.104711px;width:186.252396px;height:19.679993px;background-color:rgba(255,255,255,0.000001);"></div></a></div><div class="pi" data-data='{"ctm":[2.100000,0.000000,0.000000,2.100000,-115.668004,-156.491993]}'></div></div>
