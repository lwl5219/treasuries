<div id="pf124" class="pf w4 h1f" data-page-no="124"><div class="pc pc124 w4 h1f"><img class="bi x0 y0 w3 h4" alt="" src="apue/bg124.png"/><div class="t m0 x31 h2 y8e ff1 fs0 fc0 sc0 ls0 ws0"><span class="fc1 sc0">ptg10805159</span></div><div class="t m0 x35 h24 ya4 ff18 fs0 fc0 sc0 ls0 ws0">258<span class="_ _1b"> </span><span class="ff19">Process <span class="_"> </span>Contr<span class="_ _0"></span>ol <span class="_ _222"> </span>Chapter<span class="_ _4b"> </span>8</span></div><div class="t m0 x35 h26 y12f ff1f fsf fc0 sc0 ls0 ws0">seteuid<span class="_ _66"> </span><span class="ff16">and<span class="_"> </span></span>setegid<span class="_ _47"> </span><span class="ff16">Functions</span></div><div class="t m0 x32 h26 y131 ff19 fsf fc0 sc0 ls0 ws0">POSIX.1 <span class="_ _47"> </span>includes <span class="_ _45"> </span>the <span class="_ _45"> </span>two <span class="_ _47"> </span>functions<span class="_ _5a"> </span><span class="ff1a">seteuid<span class="_ _16"> </span></span>and<span class="_ _5a"> </span><span class="ff1a">setegid</span><span class="lsa1c">.T<span class="_ _95"></span><span class="ls0">hese <span class="_ _45"> </span>functions <span class="_ _45"> </span>ar<span class="_ _0"></span>e</span></span></div><div class="t m0 x32 h26 y132 ff19 fsf fc0 sc0 ls0 ws0">similar <span class="_ _9"></span>to<span class="_ _45"> </span><span class="ff1a">setuid<span class="_ _45"> </span></span>and<span class="_ _35"> </span><span class="ff1a">setgid</span><span class="lsa1d">,b<span class="_ _b"></span><span class="ls0">ut <span class="_ _9"></span>only <span class="_ _9"></span>the <span class="_ _9"></span>effective <span class="_ _9"></span>user <span class="_ _9"></span>ID <span class="_ _23"></span>or <span class="_ _9"></span>effective <span class="_ _9"></span>group <span class="_ _9"></span>ID <span class="_ _9"></span>is</span></span></div><div class="t m0 x32 h2a y133 ff19 fsf fc0 sc0 ls0 ws0">changed.</div><div class="t m0 x3f h57 y1130 ff1a fs2d fc0 sc0 ls0 ws0">#include &lt;unistd.h&gt;</div><div class="t m0 x3f h57 y21f9 ff1a fs2d fc0 sc0 ls0 ws0">int seteuid(uid_t<span class="_"> </span><span class="ff1b">uid</span>);</div><div class="t m0 x3f h57 y21fa ff1a fs2d fc0 sc0 ls0 ws0">int setegid(gid_t<span class="_"> </span><span class="ff1b">gid</span>);</div><div class="t m0 x1af h5f y21fb ff19 fs2d fc0 sc0 ls0 ws0">Both return: 0 if OK,<span class="_"> </span><span class="ff20">−</span>1<span class="_"> </span>on<span class="_"> </span>err<span class="_ _0"></span>or</div><div class="t m0 x32 h49 y21fc ff19 fs26 fc0 sc0 ls0 ws0">An <span class="_ _9"></span>unprivileged <span class="_ _9"></span>user <span class="_ _9"></span>can <span class="_ _23"></span>set <span class="_ _9"></span>its <span class="_ _9"></span>effective <span class="_ _9"></span>user <span class="_ _9"></span>ID <span class="_ _9"></span>to <span class="_ _9"></span>either <span class="_ _23"></span>its <span class="_ _9"></span>r<span class="_ _0"></span>eal <span class="_ _9"></span>user <span class="_ _9"></span>ID <span class="_ _23"></span>or <span class="_ _9"></span>its <span class="_ _9"></span>saved</div><div class="t m0 x32 h4a y21fd ff19 fs26 fc0 sc0 ls0 ws0">set-user-ID. <span class="_"> </span>For<span class="_ _66"> </span><span class="lsa1e">ap<span class="_ _d"></span><span class="ls0">rivileged user<span class="_ _1"></span><span class="lsa1e">,o<span class="_ _d"></span><span class="ls0">nly the <span class="_ _2"></span>effective <span class="_ _2"></span>user ID <span class="_ _2"></span>is <span class="_ _2"></span>set <span class="_ _2"></span>to<span class="_ _66"> </span><span class="ff1b">uid</span><span class="lsa1f">.(<span class="_ _5b"></span><span class="ls0">This <span class="_ _2"></span>behavior</span></span></span></span></span></span></div><div class="t m0 x32 h4d y21fe ff19 fs26 fc0 sc0 ls0 ws0">differs fr<span class="_ _0"></span>om that of the<span class="_"> </span><span class="ff1a">setuid<span class="_ _80"> </span></span>function, which changes all three user IDs.)</div><div class="t m0 x3f h49 y21ff ff19 fs26 fc0 sc0 ls0 ws0">Figur<span class="lsa20">e8<span class="_ _b"></span><span class="ls0">.19 <span class="_ _3"></span>summarizes <span class="_ _9"></span>all <span class="_ _3"></span>the <span class="_ _3"></span>functions <span class="_ _3"></span>that <span class="_ _3"></span>we’ve <span class="_ _3"></span>described <span class="_ _9"></span>her<span class="_ _0"></span><span class="lsa21">et<span class="_ _8"></span><span class="ls0">hat <span class="_ _3"></span>modify <span class="_ _3"></span>the</span></span></span></span></div><div class="t m0 x32 h49 y2200 ff19 fs26 fc0 sc0 ls0 ws0">three user IDs.</div><div class="t m0 x52 hc2 y2201 ff19 fs2f fc0 sc0 ls8b2 ws0">re<span class="ls0">al</span></div><div class="t m0 x14b hc2 y2202 ff19 fs2f fc0 sc0 ls0 ws0">user ID</div><div class="t m0 x1df hff y2203 ff19 fs30 fc0 sc0 ls0 ws0">effective</div><div class="t m0 x154 hff y2204 ff19 fs30 fc0 sc0 ls0 ws0">user ID</div><div class="t m0 x1fb h92 y2205 ff19 fs32 fc0 sc0 ls0 ws0">saved</div><div class="t m0 x1c3 h92 y2206 ff19 fs32 fc0 sc0 ls0 ws0">set-user-ID</div><div class="t m0 x9 h30 y2207 ff19 fs13 fc0 sc0 ls0 ws0">superuser</div><div class="t m0 x2e h63 y2208 ff1a fs13 fc0 sc0 ls0 ws0">setreuid(<span class="ff1b">ruid</span>,<span class="_"> </span><span class="ff1b">euid</span>)</div><div class="t m0 x9c h30 y2207 ff19 fs13 fc0 sc0 ls0 ws0">superuser</div><div class="t m0 x1bb h63 y2208 ff1a fs13 fc0 sc0 ls0 ws0">setuid(<span class="ff1b">uid</span>)</div><div class="t m0 x37 h30 y2207 ff19 fs13 fc0 sc0 ls0 ws0">superuser</div><div class="t m0 x120 h63 y2208 ff1a fs13 fc0 sc0 ls0 ws0">seteuid(<span class="ff1b">uid</span>)</div><div class="t m14 xea h100 y2209 ff1b fs8a fc0 sc0 ls0 ws0">euid</div><div class="t m15 x184 h101 y220a ff1b fs8b fc0 sc0 ls0 ws0">euid</div><div class="t m16 xe h101 y220b ff1b fs8b fc0 sc0 ls0 ws0">uid</div><div class="t m16 xbd h101 y220c ff1b fs8b fc0 sc0 ls0 ws0">uid</div><div class="t m15 xdc h101 y220d ff1b fs8b fc0 sc0 ls0 ws0">uid</div><div class="t m0 xe1 h102 y220e ff1b fs1a fc0 sc0 ls0 ws0">ruid</div><div class="t m0 x95 h102 y220f ff1b fs1a fc0 sc0 ls0 ws0">uid</div><div class="t m0 x30 h37 y2210 ff19 fs1a fc0 sc0 ls0 ws0">unprivileged</div><div class="t m0 xa0 h8d y2211 ff1a fs1a fc0 sc0 ls0 ws0">setreuid</div><div class="t m0 xa2 h37 y2210 ff19 fs1a fc0 sc0 ls0 ws0">unprivileged</div><div class="t m0 x1e8 h8d y2211 ff1a fs1a fc0 sc0 ls0 ws0">setreuid</div><div class="t m0 x25 h3c y2212 ff19 fs1e fc0 sc0 ls0 ws0">unprivileged</div><div class="t m0 x12f h103 y2213 ff1a fs1e fc0 sc0 ls0 ws0">setuid<span class="_ _53"> </span><span class="ff19">or<span class="_"> </span></span>seteuid</div><div class="t m0 x100 h3d y2214 ff19 fs1f fc0 sc0 ls0 ws0">unprivileged</div><div class="t m0 x81 hde y2215 ff1a fs1f fc0 sc0 ls0 ws0">setuid<span class="_ _53"> </span><span class="ff19">or<span class="_"> </span></span>seteuid</div><div class="t m0 x75 hde y2216 ff1a fs1f fc0 sc0 ls0 ws0">exec<span class="_ _53"> </span><span class="ff19">of</span></div><div class="t m0 x100 h3d y2217 ff19 fs1f fc0 sc0 ls0 ws0">set-user-ID</div><div class="t m0 xb1 h3f y2218 ff18 fs21 fc0 sc0 ls0 ws0">Figure 8.19<span class="_ _5a"> </span><span class="ff19">Summary of all the functions that set the various user IDs</span></div><div class="t m0 x35 h104 y2219 ff16 fs44 fc0 sc0 ls0 ws0">Group IDs</div><div class="t m0 x32 h89 y221a ff19 fs44 fc0 sc0 ls0 ws0">Everything <span class="_ _53"> </span>that <span class="_ _53"> </span>we’ve <span class="_ _53"> </span>said <span class="_ _e"> </span>so <span class="_ _53"> </span>far <span class="_ _53"> </span>in <span class="_ _53"> </span>this <span class="_ _e"> </span>section <span class="_ _53"> </span>also <span class="_ _53"> </span>applies <span class="_ _53"> </span>in <span class="_ _e"> </span>a <span class="_ _53"> </span>similar <span class="_ _53"> </span>fashion <span class="_ _53"> </span>to</div><div class="t m0 x32 h105 y221b ff19 fs44 fc0 sc0 ls0 ws0">group <span class="_ _9"></span>IDs.<span class="_ _51"> </span>The <span class="_ _23"> </span>supplementary <span class="_ _23"> </span>group <span class="_ _9"></span>IDs <span class="_ _23"> </span>ar<span class="lsa22">en<span class="_ _b"></span><span class="ls0">ot <span class="_ _9"></span>affected <span class="_ _23"></span>by<span class="_ _45"> </span><span class="ff1a">setgid</span>,<span class="_ _35"> </span><span class="ff1a">setregid</span><span class="lsa22">,o<span class="_ _b"></span><span class="ls0">r</span></span></span></span></div><div class="t m0 x32 h105 y221c ff1a fs44 fc0 sc0 ls0 ws0">setegid<span class="ff19">.</span></div></div><div class="pi" data-data='{"ctm":[2.100000,0.000000,0.000000,2.100000,-115.668004,-156.491993]}'></div></div>
