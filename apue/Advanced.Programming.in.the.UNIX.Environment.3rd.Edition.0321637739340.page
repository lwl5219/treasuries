<div id="pf154" class="pf w4 h1f" data-page-no="154"><div class="pc pc154 w4 h1f"><img class="bi x0 y0 w3 h4" alt="" src="apue/bg154.png"/><div class="t m0 x31 h2 y8e ff1 fs0 fc0 sc0 ls0 ws0"><span class="fc1 sc0">ptg10805159</span></div><div class="t m0 x35 h24 ya4 ff18 fs0 fc0 sc0 ls0 ws0">306<span class="_ _1b"> </span><span class="ff19">Process <span class="_"> </span>Relationships<span class="_ _18d"> </span>Chapter <span class="_"> </span>9</span></div><div class="t m0 x32 h2a y12f ff19 fsf fc0 sc0 ls0 ws0">Since <span class="_ _9"></span>the <span class="_ _9"></span>last <span class="_ _9"></span>process <span class="_ _9"></span>in <span class="_ _9"></span>the <span class="_ _23"></span>pipeline <span class="_ _9"></span>is <span class="_ _9"></span>the <span class="_ _9"></span>child <span class="_ _9"></span>of <span class="_ _23"></span>the <span class="_ _9"></span>login <span class="_ _9"></span>shell, <span class="_ _9"></span>the <span class="_ _9"></span>shell <span class="_ _23"></span>is <span class="_ _9"></span>notiﬁed</div><div class="t m0 x32 h26 y130 ff19 fsf fc0 sc0 ls0 ws0">when that process (<span class="ff1a">cat2</span><span class="ls44">)t<span class="_ _4f"></span><span class="ls0">erminates.</span></span></div><div class="t m0 x3f h2a y131 ff19 fsf fc0 sc0 ls0 ws0">Now <span class="_ _9"></span>let’s <span class="_ _23"></span>examine <span class="_ _9"></span>the <span class="_ _23"> </span>same <span class="_ _23"></span>examples <span class="_ _9"></span>using <span class="_ _23"></span>a <span class="_ _9"></span>job-control <span class="_ _9"></span>shell <span class="_ _23"></span>running <span class="_ _9"></span>on <span class="_ _23"></span>Linux.</div><div class="t m0 x32 h2a y132 ff19 fsf fc0 sc0 ls0 ws0">This <span class="_ _23"></span>shows <span class="_ _23"></span>the <span class="_ _23"> </span>way <span class="_ _23"> </span>these <span class="_ _23"> </span>shells <span class="_ _23"> </span>handle <span class="_ _23"> </span>background <span class="_ _23"> </span>jobs.<span class="_ _51"> </span><span class="ls5f">We<span class="_ _9"></span></span>’ll <span class="_ _23"> </span>use <span class="_ _23"> </span>the <span class="_ _23"> </span>Bourne-again</div><div class="t m0 x32 h2a y133 ff19 fsf fc0 sc0 ls0 ws0">shell in this example; the results with other job-contr<span class="_ _0"></span>ol shells ar<span class="_ _0"></span><span class="ls44">ea<span class="_ _d"></span><span class="ls0">lmost identical.</span></span></div><div class="t m0 x3f h57 y2799 ff1a fs2d fc0 sc0 ls0 ws0">ps -o pid,ppid,pgid,sid,tpgid,comm</div><div class="t m0 x32 h2a y279a ff19 fsf fc0 sc0 ls0 ws0">gives us</div><div class="t m0 xf4 h57 y279b ff1a fs2d fc0 sc0 ls0 ws0">PID <span class="_"> </span>PPID <span class="_"> </span>PGID<span class="_ _68"> </span>SID TPGID COMMAND</div><div class="t m0 x90 h57 y279c ff1a fs2d fc0 sc0 ls0 ws0">2837 <span class="_"> </span>2818 <span class="_"> </span>2837 <span class="_"> </span>2837 <span class="_"> </span>5796<span class="_"> </span>bash</div><div class="t m0 x90 h57 y279d ff1f fs2d fc0 sc0 ls0 ws0">5796<span class="_ _d9"> </span><span class="ff1a">2837<span class="_ _3a"> </span></span>5796<span class="_ _3a"> </span><span class="ff1a">2837 <span class="_"> </span>5796<span class="_"> </span>ps</span></div><div class="t m0 x32 h26 y279e ff19 fsf fc0 sc0 ls0 ws0">(Starting <span class="_ _66"> </span>with <span class="_ _47"> </span>this <span class="_ _47"> </span>example, <span class="_ _47"> </span>we <span class="_ _66"> </span>show <span class="_ _47"> </span>the <span class="_ _47"> </span>foregr<span class="_ _1"></span>ound <span class="_ _47"> </span>process <span class="_ _66"> </span>group <span class="_ _66"> </span>in <span class="_ _47"> </span>a<span class="_ _61"> </span><span class="ff1f">bolder</span></div><div class="t m0 x32 h26 y279f ff1f fsf fc0 sc0 ls0 ws0">font<span class="ff19">.) <span class="_ _65"> </span>W<span class="_ _6"></span><span class="ls125">ei<span class="_ _64"></span><span class="ls0">mmediately <span class="_ _4b"> </span>see <span class="_ _4b"> </span>a <span class="_ _4b"> </span>difference <span class="_ _44"> </span>from <span class="_ _44"> </span>our <span class="_ _4b"> </span>Bourne <span class="_ _4b"> </span>shell <span class="_ _4b"> </span>example.<span class="_ _93"> </span>The</span></span></span></div><div class="t m0 x32 h26 y27a0 ff19 fsf fc0 sc0 ls0 ws0">Bourne-again <span class="_ _42"> </span>shell <span class="_ _42"> </span>places <span class="_ _53"> </span>the <span class="_ _42"> </span>foreground <span class="_ _42"> </span>job <span class="_ _42"> </span>(<span class="ff1a">ps</span><span class="ls255">)i<span class="_ _c"></span><span class="ls0">nto <span class="_ _53"> </span>its <span class="_ _42"> </span>own <span class="_ _53"> </span>process <span class="_ _42"> </span>group</span></span></div><div class="t m0 x1b9 h2a y27a1 ff19 fsf fc0 sc0 ls0 ws0">(</div><div class="t m0 xe5 h2a y27a0 ff19 fsf fc0 sc0 ls0 ws0">5796</div><div class="t m0 x191 h2a y27a1 ff19 fsf fc0 sc0 ls0 ws0">)</div><div class="t m0 x163 h2a y27a0 ff19 fsf fc0 sc0 ls0 ws0">.</div><div class="t m0 x32 h26 y27a2 ff19 fsf fc0 sc0 ls0 ws0">The<span class="_"> </span><span class="ff1a">ps<span class="_ _80"> </span></span>command is the process group leader and the only pr<span class="_ _0"></span>ocess in this process gr<span class="_ _0"></span>oup.</div><div class="t m0 x32 h2a y27a3 ff19 fsf fc0 sc0 ls0 ws0">Furthermore, <span class="_"> </span>this <span class="_ _47"> </span>process <span class="_ _66"> </span>group <span class="_ _66"> </span>is <span class="_ _47"> </span>the <span class="_ _47"> </span>foregr<span class="_ _1"></span>ound <span class="_ _47"> </span>process <span class="_ _66"> </span>group, <span class="_ _66"> </span>since <span class="_ _47"> </span>it <span class="_ _47"> </span>has <span class="_ _66"> </span>the</div><div class="t m0 x32 h26 y27a4 ff19 fsf fc0 sc0 ls0 ws0">controlling <span class="_"> </span>terminal.<span class="_ _60"> </span>Our <span class="_ _66"> </span>login <span class="_ _66"> </span>shell <span class="_ _47"> </span>is <span class="_"> </span>a <span class="_ _66"> </span>background <span class="_"> </span>process <span class="_"> </span>group <span class="_"> </span>while <span class="_ _66"> </span>the<span class="_ _61"> </span><span class="ff1a">ps</span></div><div class="t m0 x32 h2a y27a5 ff19 fsf fc0 sc0 ls0 ws0">command <span class="_ _47"> </span>executes.<span class="_ _5f"> </span>Note, <span class="_ _47"> </span>however<span class="_ _1"></span><span class="lsb50">,t<span class="_ _1d"></span><span class="ls0">hat <span class="_ _47"> </span>both <span class="_ _47"> </span>process <span class="_ _47"> </span>groups, <span class="_ _47"> </span>2837 <span class="_ _47"> </span>and <span class="_ _47"> </span>5796, <span class="_ _47"> </span>are</span></span></div><div class="t m0 x32 h2a y27a6 ff19 fsf fc0 sc0 ls0 ws0">members <span class="_ _2"></span>of <span class="_ _3"></span>the <span class="_ _3"></span>same <span class="_ _3"></span>session.<span class="_ _61"> </span>Indeed, <span class="_ _3"></span>we’ll <span class="_ _3"></span>see <span class="_ _2"></span>that <span class="_ _3"></span>the <span class="_ _3"></span>session <span class="_ _3"></span>never <span class="_ _2"></span>changes <span class="_ _3"></span>through</div><div class="t m0 x32 h2a y27a7 ff19 fsf fc0 sc0 ls0 ws0">our examples in this section.</div><div class="t m0 x3f h2a y27a8 ff19 fsf fc0 sc0 ls0 ws0">Executing this process in the backgr<span class="_ _0"></span>ound,</div><div class="t m0 x3f h57 y27a9 ff1a fs2d fc0 sc0 ls0 ws0">ps -o pid,ppid,pgid,sid,tpgid,comm &amp;</div><div class="t m0 x32 h2a y27aa ff19 fsf fc0 sc0 ls0 ws0">gives us</div><div class="t m0 xf4 h57 y27ab ff1a fs2d fc0 sc0 ls0 ws0">PID <span class="_"> </span>PPID <span class="_"> </span>PGID<span class="_ _68"> </span>SID TPGID COMMAND</div><div class="t m0 x90 h57 y27ac ff1f fs2d fc0 sc0 ls0 ws0">2837<span class="_ _d9"> </span><span class="ff1a">2818<span class="_ _3a"> </span></span>2837<span class="_ _3a"> </span><span class="ff1a">2837 <span class="_"> </span>2837<span class="_"> </span>bash</span></div><div class="t m0 x90 h57 y27ad ff1a fs2d fc0 sc0 ls0 ws0">5797 <span class="_"> </span>2837 <span class="_"> </span>5797 <span class="_"> </span>2837 <span class="_"> </span>2837<span class="_"> </span>ps</div><div class="t m0 x32 h26 y27ae ff19 fsf fc0 sc0 ls0 ws0">Again, <span class="_ _3"></span>the<span class="_ _47"> </span><span class="ff1a">ps<span class="_ _47"> </span></span>command <span class="_ _9"></span>is <span class="_ _3"></span>placed <span class="_ _3"></span>into <span class="_ _3"></span>its <span class="_ _3"></span>own <span class="_ _3"></span>process <span class="_ _3"></span>group, <span class="_ _2"></span>but <span class="_ _9"></span>this <span class="_ _3"></span>time <span class="_ _3"></span>the <span class="_ _3"></span>process</div><div class="t m0 x32 h2a y27af ff19 fsf fc0 sc0 ls0 ws0">group</div><div class="t m0 xe2 h2a y27b0 ff19 fsf fc0 sc0 ls0 ws0">(</div><div class="t m0 x41 h2a y27af ff19 fsf fc0 sc0 ls0 ws0">5797</div><div class="t m0 x20c h2a y27b0 ff19 fsf fc0 sc0 ls0 ws0">)</div><div class="t m0 x159 h2a y27af ff19 fsf fc0 sc0 ls0 ws0">is <span class="_ _42"> </span>no <span class="_ _42"> </span>longer <span class="_ _53"> </span>the <span class="_ _42"> </span>foreground <span class="_ _23"> </span>process <span class="_ _42"> </span>group <span class="_ _a"></span>— <span class="_ _a"></span>it<span class="_ _44"> </span>is <span class="_ _42"> </span>a <span class="_ _53"> </span>background <span class="_ _42"> </span>process</div><div class="t m0 x32 h2a y27b1 ff19 fsf fc0 sc0 ls0 ws0">group. <span class="_ _44"> </span>The<span class="_ _44"> </span>TPGID <span class="_ _53"> </span>of <span class="_ _53"> </span>2837 <span class="_ _53"> </span>indicates <span class="_ _53"> </span>that <span class="_ _53"> </span>the <span class="_ _53"> </span>foregr<span class="_ _0"></span>ound <span class="_ _53"> </span>process <span class="_ _42"> </span>group <span class="_ _42"> </span>is <span class="_ _53"> </span>our <span class="_ _53"> </span>login</div><div class="t m0 x32 h2a y27b2 ff19 fsf fc0 sc0 ls0 ws0">shell.</div><div class="t m0 x3f h2a y27b3 ff19 fsf fc0 sc0 ls0 ws0">Executing two processes in a pipeline, as in</div><div class="t m0 x3f h57 y27b4 ff1a fs2d fc0 sc0 ls0 ws0">ps -o pid,ppid,pgid,sid,tpgid,comm | cat1</div><div class="t m0 x32 h2a y27b5 ff19 fsf fc0 sc0 ls0 ws0">gives us</div><div class="t m0 xf4 h57 y27b6 ff1a fs2d fc0 sc0 ls0 ws0">PID <span class="_"> </span>PPID <span class="_"> </span>PGID<span class="_ _68"> </span>SID TPGID COMMAND</div><div class="t m0 x90 h57 y27b7 ff1a fs2d fc0 sc0 ls0 ws0">2837 <span class="_"> </span>2818 <span class="_"> </span>2837 <span class="_"> </span>2837 <span class="_"> </span>5799<span class="_"> </span>bash</div><div class="t m0 x90 h57 y27b8 ff1f fs2d fc0 sc0 ls0 ws0">5799<span class="_ _d9"> </span><span class="ff1a">2837<span class="_ _3a"> </span></span>5799<span class="_ _3a"> </span><span class="ff1a">2837 <span class="_"> </span>5799<span class="_"> </span>ps</span></div><div class="t m0 x90 h57 y27b9 ff1f fs2d fc0 sc0 ls0 ws0">5800<span class="_ _d9"> </span><span class="ff1a">2837<span class="_ _3a"> </span></span>5799<span class="_ _3a"> </span><span class="ff1a">2837 <span class="_"> </span>5799<span class="_"> </span>cat1</span></div><div class="t m0 x32 h26 y27ba ff19 fsf fc0 sc0 ls0 ws0">Both processes,<span class="_"> </span><span class="ff1a">ps<span class="_ _66"> </span></span>and<span class="_"> </span><span class="ff1a">cat1</span><span class="lsb51">,a<span class="_ _d"></span><span class="ls45">re <span class="_ _3"></span>p<span class="_ _2"></span><span class="ls0">laced into <span class="_ _2"></span>a new <span class="_ _2"></span>process group</span></span></span></div><div class="t m0 x16a h2a y27bb ff19 fsf fc0 sc0 ls0 ws0">(</div><div class="t m0 x12 h2a y27ba ff19 fsf fc0 sc0 ls0 ws0">5799</div><div class="t m0 x120 h2a y27bb ff19 fsf fc0 sc0 ls0 ws0">)</div><div class="t m0 x3a h2a y27ba ff19 fsf fc0 sc0 lsb51 ws0">,a<span class="_ _4f"></span><span class="ls0">nd <span class="_ _2"></span>this is <span class="_ _2"></span>the</span></div><div class="t m0 x32 h2a y27bc ff19 fsf fc0 sc0 ls0 ws0">foregr<span class="_ _0"></span>ound <span class="_ _42"> </span>process <span class="_ _42"> </span>group. <span class="_ _35"> </span>W<span class="_ _6"></span><span class="ls1ad">ec<span class="_ _43"></span><span class="ls0">an <span class="_ _42"> </span>also <span class="_ _42"> </span>see <span class="_ _42"> </span>another <span class="_ _53"> </span>differ<span class="_ _0"></span>ence <span class="_ _42"> </span>between <span class="_ _42"> </span>this <span class="_ _42"> </span>example</span></span></div><div class="t m0 x32 h2a y27bd ff19 fsf fc0 sc0 ls0 ws0">and <span class="_ _9"></span>the <span class="_ _9"></span>similar <span class="_ _9"></span>Bourne <span class="_ _9"></span>shell <span class="_ _9"></span>example.<span class="_ _16"> </span>The <span class="_ _9"></span>Bourne <span class="_ _9"></span>shell <span class="_ _9"></span>created <span class="_ _9"></span>the <span class="_ _9"></span>last <span class="_ _9"></span>process <span class="_ _3"></span>in <span class="_ _9"></span>the</div><div class="t m0 x32 h2a y27be ff19 fsf fc0 sc0 ls0 ws0">pipeline <span class="_"> </span>ﬁrst, <span class="_"> </span>and <span class="_ _66"> </span>this <span class="_ _66"> </span>ﬁnal <span class="_ _66"> </span>process <span class="_"> </span>was <span class="_"> </span>the <span class="_ _66"> </span>parent <span class="_"> </span>of <span class="_"> </span>the <span class="_ _66"> </span>ﬁrst <span class="_ _66"> </span>process. <span class="_ _46"> </span>Here, <span class="_"> </span>the</div><div class="t m0 x32 h2a y27bf ff19 fsf fc0 sc0 ls0 ws0">Bourne-again <span class="_ _42"> </span>shell <span class="_ _42"> </span>is <span class="_ _23"> </span>the <span class="_ _42"> </span>parent <span class="_ _42"> </span>of <span class="_ _42"> </span>both <span class="_ _23"> </span>processes. <span class="_ _35"> </span>If<span class="_ _44"> </span>we <span class="_ _42"> </span>execute <span class="_ _42"> </span>this <span class="_ _42"> </span>pipeline <span class="_ _42"> </span>in <span class="_ _23"> </span>the</div><div class="t m0 x32 h2a y27c0 ff19 fsf fc0 sc0 ls0 ws0">background,</div></div><div class="pi" data-data='{"ctm":[2.100000,0.000000,0.000000,2.100000,-115.668004,-156.491993]}'></div></div>
