<div id="pf1fa" class="pf w4 h1f" data-page-no="1fa"><div class="pc pc1fa w4 h1f"><img class="bi x0 y0 w3 h4" alt="" src="apue/bg1fa.png"/><div class="t m0 x31 h2 y8e ff1 fs0 fc0 sc0 ls0 ws0"><span class="fc1 sc0">ptg10805159</span></div><div class="t m0 x35 h24 ya4 ff18 fs0 fc0 sc0 ls0 ws0">472<span class="_ _1b"> </span><span class="ff19">Daemon <span class="_"> </span>Processes <span class="_ _20f"> </span>Chapter<span class="_ _4b"> </span>13</span></div><div class="t m0 x122 h76 y597 ff1b fs2a fc0 sc0 ls0 ws0">facility<span class="_ _171"> </span><span class="ff19">XSI <span class="_ _17f"> </span>Description</span></div><div class="t m0 x15 h5e y7b6 ff1a fs10 fc0 sc0 ls0 ws0">LOG_AUDIT<span class="_ _a0"> </span><span class="ff19">the audit facility</span></div><div class="t m0 x15 h5e y7b7 ff1a fs10 fc0 sc0 ls0 ws0">LOG_AUTH<span class="_ _295"> </span><span class="ff19">authorization programs:<span class="_"> </span></span>login<span class="ff19">,<span class="_"> </span></span>su<span class="ff19">,<span class="_"> </span></span>getty<span class="ff19 ls136">,.<span class="_ _5"></span><span class="ls0">..</span></span></div><div class="t m0 x15 h5e y7b8 ff1a fs10 fc0 sc0 ls0 ws0">LOG_AUTHPRIV<span class="_ _9f"> </span><span class="ff19">same as<span class="_"> </span></span>LOG_AUTH<span class="ff19 ls136">,b<span class="_ _a"></span><span class="ls0">ut logged to ﬁle with restricted permissions</span></span></div><div class="t m0 x15 h5e y7b9 ff1a fs10 fc0 sc0 ls0 ws0">LOG_CONSOLE<span class="_ _6f"> </span><span class="ff19">messages written to<span class="_"> </span></span>/dev/console</div><div class="t m0 x15 h5e y7ba ff1a fs10 fc0 sc0 ls0 ws0">LOG_CRON <span class="_ _a0"> </span>cron<span class="_ _e"> </span><span class="ff19">and<span class="_"> </span></span>at</div><div class="t m0 x15 h5e y7bb ff1a fs10 fc0 sc0 ls0 ws0">LOG_DAEMON<span class="_ _a1"> </span><span class="ff19">system daemons:<span class="_"> </span></span>inetd<span class="ff19">,<span class="_"> </span></span>routed<span class="ff19 ls136">,.<span class="_ _a"></span><span class="ls0">..</span></span></div><div class="t m0 x15 h5e y7bc ff1a fs10 fc0 sc0 ls0 ws0">LOG_FTP<span class="_ _a4"> </span><span class="ff19">the FTP daemon (</span>ftpd<span class="ff19">)</span></div><div class="t m0 x15 h5e y7bd ff1a fs10 fc0 sc0 ls0 ws0">LOG_KERN<span class="_ _295"> </span><span class="ff19">messages generated by the kernel</span></div><div class="t m0 x15 h5e y7be ff1a fs10 fc0 sc0 ls0 ws0">LOG_LOCAL0<span class="_ _1a8"> </span><span class="ff19 lsf87">•r<span class="_ _29b"></span><span class="ls0">eserved for local use</span></span></div><div class="t m0 x15 h5e y7bf ff1a fs10 fc0 sc0 ls0 ws0">LOG_LOCAL1<span class="_ _1a8"> </span><span class="ff19 lsf87">•r<span class="_ _29b"></span><span class="ls0">eserved for local use</span></span></div><div class="t m0 x15 h5e y7c0 ff1a fs10 fc0 sc0 ls0 ws0">LOG_LOCAL2<span class="_ _1a8"> </span><span class="ff19 lsf87">•r<span class="_ _29b"></span><span class="ls0">eserved for local use</span></span></div><div class="t m0 x15 h5e y7c1 ff1a fs10 fc0 sc0 ls0 ws0">LOG_LOCAL3<span class="_ _1a8"> </span><span class="ff19 lsf87">•r<span class="_ _29b"></span><span class="ls0">eserved for local use</span></span></div><div class="t m0 x15 h5e y7c2 ff1a fs10 fc0 sc0 ls0 ws0">LOG_LOCAL4<span class="_ _1a8"> </span><span class="ff19 lsf87">•r<span class="_ _29b"></span><span class="ls0">eserved for local use</span></span></div><div class="t m0 x15 h5e y7c3 ff1a fs10 fc0 sc0 ls0 ws0">LOG_LOCAL5<span class="_ _1a8"> </span><span class="ff19 lsf87">•r<span class="_ _29b"></span><span class="ls0">eserved for local use</span></span></div><div class="t m0 x15 h5e y7c4 ff1a fs10 fc0 sc0 ls0 ws0">LOG_LOCAL6<span class="_ _1a8"> </span><span class="ff19 lsf87">•r<span class="_ _29b"></span><span class="ls0">eserved for local use</span></span></div><div class="t m0 x15 h5e y7c5 ff1a fs10 fc0 sc0 ls0 ws0">LOG_LOCAL7<span class="_ _1a8"> </span><span class="ff19 lsf87">•r<span class="_ _29b"></span><span class="ls0">eserved for local use</span></span></div><div class="t m0 x15 h5e y7c6 ff1a fs10 fc0 sc0 ls0 ws0">LOG_LPR<span class="_ _a4"> </span><span class="ff19">line printer system:<span class="_"> </span></span>lpd<span class="ff19">,<span class="_"> </span></span>lpc<span class="ff19 ls136">,.<span class="_ _a"></span><span class="ls0">..</span></span></div><div class="t m0 x15 h5e y7c7 ff1a fs10 fc0 sc0 ls0 ws0">LOG_MAIL<span class="_ _295"> </span><span class="ff19">the mail system</span></div><div class="t m0 x15 h5e y7c8 ff1a fs10 fc0 sc0 ls0 ws0">LOG_NEWS<span class="_ _295"> </span><span class="ff19">the Usenet network news system</span></div><div class="t m0 x15 h5e y7c9 ff1a fs10 fc0 sc0 ls0 ws0">LOG_NTP<span class="_ _a4"> </span><span class="ff19">the network time protocol system</span></div><div class="t m0 x15 h5e y7ca ff1a fs10 fc0 sc0 ls0 ws0">LOG_SECURITY<span class="_ _9f"> </span><span class="ff19">the security subsystem</span></div><div class="t m0 x15 h5e y7cb ff1a fs10 fc0 sc0 ls0 ws0">LOG_SYSLOG<span class="_ _a1"> </span><span class="ff19">the<span class="_"> </span></span>syslogd<span class="_ _e"> </span><span class="ff19">daemon itself</span></div><div class="t m0 x15 h5e y7cc ff1a fs10 fc0 sc0 ls0 ws0">LOG_USER<span class="_ _1c7"> </span><span class="ff19 lsf87">•m<span class="_ _29b"></span><span class="ls0">essages from other user processes (default)</span></span></div><div class="t m0 x15 h5e y7cd ff1a fs10 fc0 sc0 ls0 ws0">LOG_UUCP<span class="_ _295"> </span><span class="ff19">the UUCP system</span></div><div class="t m0 xbe h4f y5f6 ff18 fs11 fc0 sc0 ls0 ws0">Figure 13.4<span class="_ _5a"> </span><span class="ff19">The<span class="_"> </span><span class="ff1b">facility<span class="_"> </span></span>argument for<span class="_"> </span><span class="ff1a">openlog</span></span></div><div class="t m0 xea hd1 y3a6b ff1b fs12 fc0 sc0 ls0 ws0">level<span class="_ _10d"> </span><span class="ff19">Description</span></div><div class="t m0 xdf h63 y3a6c ff1a fs13 fc0 sc0 ls0 ws0">LOG_EMERG<span class="_ _15"> </span><span class="ff19">emergency (system is unusable) (highest priority)</span></div><div class="t m0 xdf h63 y3a6d ff1a fs13 fc0 sc0 ls0 ws0">LOG_ALERT<span class="_ _15"> </span><span class="ff19">condition that must be ﬁxed immediately</span></div><div class="t m0 xdf h63 y3a6e ff1a fs13 fc0 sc0 ls0 ws0">LOG_CRIT<span class="_ _6c"> </span><span class="ff19">critical condition (e.g., har<span class="ls673">dd<span class="_ _5"></span><span class="ls0">evice error)</span></span></span></div><div class="t m0 xdf h63 y3a6f ff1a fs13 fc0 sc0 ls0 ws0">LOG_ERR<span class="_ _10b"> </span><span class="ff19">error condition</span></div><div class="t m0 xdf h63 y3a70 ff1a fs13 fc0 sc0 ls0 ws0">LOG_WARNING<span class="_ _6e"> </span><span class="ff19">warning condition</span></div><div class="t m0 xdf h63 y3a71 ff1a fs13 fc0 sc0 ls0 ws0">LOG_NOTICE<span class="_ _75"> </span><span class="ff19">normal, but signiﬁcant condition</span></div><div class="t m0 xdf h63 y3a72 ff1a fs13 fc0 sc0 ls0 ws0">LOG_INFO<span class="_ _6c"> </span><span class="ff19">informational message</span></div><div class="t m0 xdf h63 y3a73 ff1a fs13 fc0 sc0 ls0 ws0">LOG_DEBUG<span class="_ _15"> </span><span class="ff19">debug message (lowest priority)</span></div><div class="t m0 x7 h6f y3a74 ff18 fs14 fc0 sc0 ls0 ws0">Figure 13.5<span class="_ _5a"> </span><span class="ff19">The<span class="_"> </span><span class="ff1a">syslog<span class="_ _e"> </span><span class="ff1b">level</span></span><span class="ls56a">s(<span class="_ _84"></span><span class="ls0">ordered)</span></span></span></div><div class="t m0 x3f h9b y3a75 ff19 fs49 fc0 sc0 ls0 ws0">In <span class="_ _e"> </span>addition <span class="_ _e"> </span>to<span class="_ _59"> </span><span class="ff1a">syslog</span><span class="lsf88">,m<span class="_ _55"></span><span class="ls0">any <span class="_ _e"> </span>platforms <span class="_ _e"> </span>provide <span class="_ _53"> </span>a <span class="_"> </span>variant <span class="_ _53"> </span>that <span class="_ _e"> </span>handles <span class="_"> </span>variable</span></span></div><div class="t m0 x32 h96 y3a76 ff19 fs49 fc0 sc0 ls0 ws0">argument lists.</div><div class="t m0 x3f hc1 y3a77 ff1a fs69 fc0 sc0 ls0 ws0">#include &lt;syslog.h&gt;</div><div class="t m0 x3f hc1 y3a78 ff1a fs69 fc0 sc0 ls0 ws0">#include &lt;stdarg.h&gt;</div><div class="t m0 x3f hc1 y3a79 ff1a fs69 fc0 sc0 ls0 ws0">void vsyslog(int<span class="_"> </span><span class="ff1b">priority</span><span class="lsf89">,c<span class="_ _1d"></span><span class="ls0">onst char *<span class="ff1b">format</span><span class="lsf89">,v<span class="_ _5b"></span><span class="ls0">a_list<span class="_"> </span><span class="ff1b">arg</span>);</span></span></span></span></div><div class="t m0 x76 h66 y3a7a ff19 fs15 fc0 sc0 ls0 ws0">All four platforms described in this book provide<span class="_"> </span><span class="ff1a">vsyslog</span><span class="lsf8a">,b<span class="_ _84"></span><span class="ls0">ut this function is not included in</span></span></div><div class="t m0 x76 h32 y3a7b ff19 fs15 fc0 sc0 ls0 ws0">the <span class="_ _9"></span>Single <span class="_ _23"> </span>UNIX <span class="_ _9"></span>Speciﬁcation.<span class="_ _59"> </span>Note <span class="_ _23"> </span>that <span class="_ _9"></span>to <span class="_ _23"> </span>make <span class="_ _9"></span>its <span class="_ _9"> </span>declaration <span class="_ _23"> </span>visible <span class="_ _9"></span>to <span class="_ _23"> </span>your <span class="_ _9"></span>application,</div></div><div class="pi" data-data='{"ctm":[2.100000,0.000000,0.000000,2.100000,-115.668004,-156.491993]}'></div></div>
