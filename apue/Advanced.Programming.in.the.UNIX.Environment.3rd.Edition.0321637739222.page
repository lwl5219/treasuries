<div id="pfde" class="pf w4 h1f" data-page-no="de"><div class="pc pcde w4 h1f"><img class="bi x0 y0 w3 h4" alt="" src="apue/bgde.png"/><div class="t m0 x31 h2 y8e ff1 fs0 fc0 sc0 ls0 ws0"><span class="fc1 sc0">ptg10805159</span></div><div class="t m0 x35 h24 ya4 ff18 fs0 fc0 sc0 ls0 ws0">188<span class="_ _1b"> </span><span class="ff19">System <span class="_"> </span>Data <span class="_"> </span>Files <span class="_"> </span>and <span class="_"> </span>Information<span class="_ _114"> </span>Chapter <span class="_"> </span>6</span></div><div class="t m0 x3f h57 yf5f ff1a fs2d fc0 sc0 ls0 ws0">struct utsname {</div><div class="t m0 xf4 h57 yf60 ff1a fs2d fc0 sc0 ls0 ws0">char <span class="_"> </span>sysname[];<span class="_ _15"> </span>/* name of the operating system */</div><div class="t m0 xf4 h57 yf61 ff1a fs2d fc0 sc0 ls0 ws0">char <span class="_"> </span>nodename[];<span class="_ _68"> </span>/* name of this node */</div><div class="t m0 xf4 h57 yf62 ff1a fs2d fc0 sc0 ls0 ws0">char <span class="_"> </span>release[];<span class="_ _15"> </span>/* current release of operating system */</div><div class="t m0 xf4 h57 yf63 ff1a fs2d fc0 sc0 ls0 ws0">char <span class="_"> </span>version[];<span class="_ _15"> </span>/* current version of this release */</div><div class="t m0 xf4 h57 yf64 ff1a fs2d fc0 sc0 ls0 ws0">char <span class="_"> </span>machine[];<span class="_ _15"> </span>/* name of hardware type */</div><div class="t m0 x3f h57 yf65 ff1a fs2d fc0 sc0 ls0 ws0">};</div><div class="t m0 x32 h2a y11b4 ff19 fsf fc0 sc0 ls0 ws0">Each <span class="_ _3"></span>string <span class="_ _3"></span>is <span class="_ _3"></span>null <span class="_ _9"></span>terminated.<span class="_ _16"> </span>The <span class="_ _3"></span>maximum <span class="_ _3"></span>name <span class="_ _9"></span>lengths, <span class="_ _3"></span>including <span class="_ _3"></span>the <span class="_ _3"></span>terminating</div><div class="t m0 x32 h2a y11b5 ff19 fsf fc0 sc0 ls0 ws0">null byte, supported by the four platforms discussed in <span class="_ _2"></span>this book ar<span class="ls647">el<span class="_ _4f"></span><span class="ls0">isted in <span class="_ _2"></span>Figur<span class="ls647">e6<span class="_ _4f"></span><span class="ls0">.7.</span></span></span></span></div><div class="t m0 x32 h26 y11b6 ff19 fsf fc0 sc0 ls0 ws0">The <span class="_ _42"> </span>information <span class="_ _42"> </span>in <span class="_ _42"> </span>the<span class="_ _44"> </span><span class="ff1a">utsname<span class="_ _44"> </span></span>structur<span class="ls7e6">ec<span class="_ _c"></span><span class="ls0">an <span class="_ _42"> </span>usually <span class="_ _42"> </span>be <span class="_ _53"> </span>printed <span class="_ _42"> </span>with <span class="_ _42"> </span>the<span class="_ _44"> </span><span class="ff1a">uname</span></span></span></div><div class="t m0 x40 h2a y196c ff19 fsf fc0 sc0 ls0 ws0">(</div><div class="t m0 x1b2 h2a y11b6 ff19 fsf fc0 sc0 ls0 ws0">1</div><div class="t m0 x17e h2a y196c ff19 fsf fc0 sc0 ls0 ws0">)</div><div class="t m0 x32 h2a y11b7 ff19 fsf fc0 sc0 ls0 ws0">command.</div><div class="t m0 x76 h52 y196d ff19 fs2a fc0 sc0 ls0 ws0">POSIX.1 <span class="_ _23"> </span>warns <span class="_ _9"> </span>that <span class="_ _23"> </span>the<span class="_ _45"> </span><span class="ff1a">nodename<span class="_ _47"> </span></span>element <span class="_ _23"> </span>may <span class="_ _23"> </span>not <span class="_ _9"> </span>be <span class="_ _23"> </span>adequate <span class="_ _23"> </span>to <span class="_ _23"> </span>refer<span class="_ _0"></span>ence <span class="_ _23"> </span>the <span class="_ _23"> </span>host <span class="_ _9"> </span>on <span class="_ _23"> </span>a</div><div class="t m0 x76 h52 y196e ff19 fs2a fc0 sc0 ls0 ws0">communications <span class="_ _3"></span>network.<span class="_ _59"> </span>This <span class="_ _9"> </span>function <span class="_ _9"></span>is <span class="_ _9"></span>from <span class="_ _3"></span>System <span class="_ _9"></span>V<span class="_ _6"></span><span class="ls7e7">,a<span class="_ _4f"></span><span class="ls0">nd <span class="_ _9"></span>in <span class="_ _9"></span>older <span class="_ _3"></span>days, <span class="_ _9"></span>the<span class="_ _47"> </span><span class="ff1a">nodename</span></span></span></div><div class="t m0 x76 h51 y196f ff19 fs2a fc0 sc0 ls0 ws0">element was adequate for refer<span class="_ _0"></span>encing the host on a UUCP network.</div><div class="t m0 x76 h51 y1970 ff19 fs2a fc0 sc0 ls0 ws0">Realize <span class="_"> </span>also <span class="_ _80"> </span>that <span class="_"> </span>the <span class="_ _80"> </span>information <span class="_ _e"> </span>in <span class="_ _80"> </span>this <span class="_"> </span>structur<span class="ls7e8">ed<span class="_ _c"></span><span class="ls0">oes <span class="_ _80"> </span>not <span class="_"> </span>give <span class="_ _80"> </span>any <span class="_ _e"> </span>information <span class="_ _80"> </span>on <span class="_"> </span>the</span></span></div><div class="t m0 x76 h52 y1971 ff19 fs2a fc0 sc0 ls0 ws0">POSIX.1 level.<span class="_ _35"> </span>This should be obtained using<span class="_"> </span><span class="ff1a">_POSIX_VERSION</span>,<span class="_"> </span>as<span class="_"> </span>described in Section 2.6.</div><div class="t m0 x76 h51 y1972 ff19 fs2a fc0 sc0 ls0 ws0">Finally<span class="_ _6"></span><span class="ls7e9">,t<span class="_ _b"></span><span class="ls0">his <span class="_ _23"> </span>function <span class="_ _42"> </span>gives <span class="_ _23"> </span>us <span class="_ _23"> </span>a <span class="_ _42"> </span>way <span class="_ _23"> </span>only <span class="_ _23"> </span>to <span class="_ _42"> </span>fetch <span class="_ _23"> </span>the <span class="_ _23"> </span>information <span class="_ _42"> </span>in <span class="_ _23"> </span>the <span class="_ _23"> </span>structure; <span class="_ _23"> </span>ther<span class="ls7e9">ei<span class="_ _b"></span><span class="ls0">s</span></span></span></span></div><div class="t m0 x76 h51 y1973 ff19 fs2a fc0 sc0 ls0 ws0">nothing speciﬁed by POSIX.1 about initializing this information.</div><div class="t m0 x3f h26 y1974 ff19 fsf fc0 sc0 ls0 ws0">Historically<span class="_ _4"></span><span class="ls486">,B<span class="_ _43"></span><span class="ls0">SD-derived <span class="_ _42"> </span>systems <span class="_ _42"> </span>provided <span class="_ _42"> </span>the<span class="_ _35"> </span><span class="ff1a">gethostname<span class="_ _44"> </span></span>function <span class="_ _42"> </span>to <span class="_ _53"> </span>return</span></span></div><div class="t m0 x32 h2a y1975 ff19 fsf fc0 sc0 ls0 ws0">only <span class="_ _42"> </span>the <span class="_ _53"> </span>name <span class="_ _42"> </span>of <span class="_ _53"> </span>the <span class="_ _53"> </span>host.<span class="_ _54"> </span>This <span class="_ _42"> </span>name <span class="_ _53"> </span>is <span class="_ _53"> </span>usually <span class="_ _42"> </span>the <span class="_ _53"> </span>name <span class="_ _53"> </span>of <span class="_ _42"> </span>the <span class="_ _53"> </span>host <span class="_ _42"> </span>on <span class="_ _53"> </span>a <span class="_ _53"> </span>TCP/IP</div><div class="t m0 x32 h2a y1976 ff19 fsf fc0 sc0 ls0 ws0">network.</div><div class="t m0 x3f h57 y1977 ff1a fs2d fc0 sc0 ls0 ws0">#include &lt;unistd.h&gt;</div><div class="t m0 x3f h57 y1978 ff1a fs2d fc0 sc0 ls0 ws0">int gethostname(char *<span class="ff1b">name</span><span class="ls15c">,i<span class="_ _1d"></span><span class="ls0">nt<span class="_"> </span><span class="ff1b">namelen</span>);</span></span></div><div class="t m0 x153 h5f y1979 ff19 fs2d fc0 sc0 ls0 ws0">Returns: 0 if OK,<span class="_"> </span><span class="ff20">−</span>1<span class="_"> </span>on<span class="_"> </span>error</div><div class="t m0 x32 h4a y197a ff19 fs26 fc0 sc0 ls0 ws0">The<span class="_"> </span><span class="ff1b">namelen<span class="_ _66"> </span></span>argument speciﬁes <span class="_ _2"></span>the <span class="_ _2"></span>size of <span class="_ _2"></span>the<span class="_ _66"> </span><span class="ff1b">name<span class="_ _66"> </span></span>buffer<span class="_ _6"></span><span class="ls7ea">.I<span class="_ _4a"></span><span class="ls409">fe<span class="_ _4f"></span><span class="ls0">nough <span class="_ _2"></span>space <span class="_ _2"></span>is provided,</span></span></span></div><div class="t m0 x32 h4a y197b ff19 fs26 fc0 sc0 ls0 ws0">the <span class="_ _23"> </span>string <span class="_ _23"> </span>returned <span class="_ _23"> </span>through<span class="_ _35"> </span><span class="ff1b">name<span class="_ _35"> </span></span>is <span class="_ _23"> </span>null <span class="_ _42"> </span>terminated.<span class="_ _51"> </span>If <span class="_ _23"> </span>insufﬁcient <span class="_ _23"> </span>room <span class="_ _23"></span>is <span class="_ _23"> </span>provided,</div><div class="t m0 x32 h49 y197c ff19 fs26 fc0 sc0 ls0 ws0">however<span class="_ _6"></span>,<span class="_"> </span>it<span class="_"> </span>is<span class="_"> </span>unspeciﬁed whether the string is null terminated.</div><div class="t m0 x3f h4d y197d ff19 fs26 fc0 sc0 ls0 ws0">The<span class="_"> </span><span class="ff1a">gethostname<span class="_ _66"> </span></span>function, <span class="_ _2"></span>which is <span class="_ _2"></span>now deﬁned <span class="_ _2"></span>as part <span class="_ _2"></span>of POSIX.1, <span class="_ _2"></span>speciﬁes that</div><div class="t m0 x32 h4d y197e ff19 fs26 fc0 sc0 ls0 ws0">the <span class="_ _45"> </span>maximum <span class="_ _45"> </span>host <span class="_ _35"> </span>name <span class="_ _45"> </span>length <span class="_ _45"> </span>is<span class="_ _51"> </span><span class="ff1a">HOST_NAME_MAX</span><span class="ls7eb">.F<span class="_ _95"></span><span class="ls0">igur<span class="_ _0"></span><span class="ls7ec">e6<span class="_ _26"></span><span class="ls0">.7 <span class="_ _45"> </span>summarizes <span class="_ _35"> </span>the</span></span></span></span></div><div class="t m0 x32 h49 y197f ff19 fs26 fc0 sc0 ls0 ws0">maximum name lengths supported by the four implementations covered in this book.</div><div class="t m0 x1a4 h2e y1980 ff19 fs11 fc0 sc0 ls0 ws0">Maximum name length</div><div class="t m0 x17c h2f y1981 ff19 fs12 fc0 sc0 ls0 ws0">FreeBSD <span class="_ _72"> </span>Linux<span class="_ _17"> </span>Mac OS X<span class="_ _1fb"> </span>Solaris</div><div class="t m0 x157 h2f y1982 ff19 fs12 fc0 sc0 ls0 ws0">8.0 <span class="_ _12c"> </span>3.2.0<span class="_ _db"> </span>10.6.8 <span class="_ _10b"> </span>10</div><div class="t m0 x180 h2f y1983 ff19 fs12 fc0 sc0 ls0 ws0">Interface</div><div class="t m0 xdf h63 y1984 ff1a fs13 fc0 sc0 ls0 ws0">uname<span class="_ _bc"> </span><span class="ff19">256 <span class="_ _16d"> </span>65 <span class="_ _1c7"> </span>256<span class="_ _16d"> </span>257</span></div><div class="t m0 xdf h63 y1985 ff1a fs13 fc0 sc0 ls0 ws0">gethostname<span class="_ _1c4"> </span><span class="ff19">256 <span class="_ _1c7"> </span>64 <span class="_ _16d"> </span>256<span class="_ _1c7"> </span>256</span></div><div class="t m0 x199 h31 y1986 ff18 fs14 fc0 sc0 ls0 ws0">Figure 6.7<span class="_ _5a"> </span><span class="ff19">System identiﬁcation name limits</span></div><div class="t m0 x3f h96 y1987 ff19 fs49 fc0 sc0 ls0 ws0">If <span class="_ _9"></span>the <span class="_ _23"></span>host <span class="_ _9"></span>is <span class="_ _23"> </span>connected <span class="_ _23"></span>to <span class="_ _9"></span>a <span class="_ _23"></span>TCP/IP <span class="_ _9"></span>network, <span class="_ _23"></span>the <span class="_ _9"></span>host <span class="_ _23"> </span>name <span class="_ _23"></span>is <span class="_ _9"></span>normally <span class="_ _23"></span>the <span class="_ _9"></span>fully</div><div class="t m0 x32 h96 y1988 ff19 fs49 fc0 sc0 ls0 ws0">qualiﬁed domain name of the host.</div></div><div class="pi" data-data='{"ctm":[2.100000,0.000000,0.000000,2.100000,-115.668004,-156.491993]}'></div></div>
