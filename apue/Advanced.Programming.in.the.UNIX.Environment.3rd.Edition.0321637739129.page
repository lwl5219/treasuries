<div id="pf81" class="pf w4 h1f" data-page-no="81"><div class="pc pc81 w4 h1f"><img class="bi x0 y0 w3 h4" alt="" src="bg81.png"/><div class="t m0 x31 h2 y8e ff1 fs0 fc0 sc0 ls0 ws0"><span class="fc1 sc0">ptg10805159</span></div><div class="t m0 x35 h24 ya4 ff19 fs0 fc0 sc0 ls0 ws0">Section <span class="_"> </span>4.3<span class="_ _183"> </span>File <span class="_"> </span>T<span class="_ _6"></span>ypes<span class="_ _1b"> </span><span class="ff18">95</span></div><div class="t m0 x3f h26 y12f ff19 fsf fc0 sc0 ls0 ws0">Note <span class="_ _9"></span>that <span class="_ _3"></span>most <span class="_ _9"></span>members <span class="_ _9"></span>of <span class="_ _9"></span>the<span class="_ _45"> </span><span class="ff1a">stat<span class="_ _47"> </span></span>structur<span class="ls480">ea<span class="_ _b"></span><span class="ls45">re <span class="_ _23"></span>s<span class="ls0">peciﬁed <span class="_ _9"></span>by <span class="_ _9"></span>a <span class="_ _9"></span>primitive <span class="_ _9"></span>system</span></span></span></div><div class="t m0 x32 h2a y130 ff19 fsf fc0 sc0 ls0 ws0">data <span class="_ _3"></span>type <span class="_ _9"></span>(see <span class="_ _3"></span>Section <span class="_ _9"></span>2.8).<span class="_ _16"> </span><span class="ls5f">We<span class="_ _9"></span></span>’ll <span class="_ _9"></span>go <span class="_ _3"></span>through <span class="_ _3"></span>each <span class="_ _3"></span>member <span class="_ _9"></span>of <span class="_ _3"></span>this <span class="_ _9"></span>structure<span class="_ _47"> </span>to<span class="_ _47"> </span>examine</div><div class="t m0 x32 h2a y131 ff19 fsf fc0 sc0 ls0 ws0">the attributes of a ﬁle.</div><div class="t m0 x3f h26 y132 ff19 fsf fc0 sc0 ls0 ws0">The <span class="_ _2"></span>biggest <span class="_ _2"></span>user <span class="_ _2"></span>of <span class="_ _2"></span>the<span class="_ _47"> </span><span class="ff1a">stat<span class="_ _66"> </span></span>functions <span class="_ _2"></span>is <span class="_ _2"></span>probably <span class="_ _2"></span>the<span class="_ _47"> </span><span class="ff1a">ls <span class="_ _4f"></span>-l<span class="_ _47"> </span><span class="ff19">command, to <span class="_ _3"></span>learn <span class="_ _2"></span>all</span></span></div><div class="t m0 x32 h2a y133 ff19 fsf fc0 sc0 ls0 ws0">the information about a ﬁle.</div><div class="t m0 x35 h53 y689 ff16 fs2b fc0 sc0 ls0 ws0">4.3 <span class="_ _68"> </span>File<span class="_ _54"> </span><span class="ls1b9">Ty<span class="_ _3"></span></span>pes</div><div class="t m0 x32 h2a ye0c ff19 fsf fc0 sc0 ls5f ws0">We<span class="_ _9"></span><span class="ls0">’ve <span class="_ _2"></span>talked <span class="_ _2"></span>about <span class="_ _2"></span>two <span class="_ _2"></span>different types <span class="_ _2"></span>of <span class="_ _2"></span>ﬁles <span class="_ _2"></span>so <span class="_ _2"></span>far: <span class="_ _2"></span>regular ﬁles <span class="_ _3"></span>and <span class="_ _2"></span>directories. <span class="_"> </span>Most</span></div><div class="t m0 x32 h2a ye0d ff19 fsf fc0 sc0 ls0 ws0">ﬁles <span class="_ _23"> </span>on <span class="_ _42"> </span>a <span class="_ _42"> </span>UNIX <span class="_ _23"> </span>system <span class="_ _42"> </span>ar<span class="ls168">ee<span class="_ _43"></span><span class="ls0">ither <span class="_ _23"> </span>regular <span class="_ _23"> </span>ﬁles <span class="_ _42"> </span>or <span class="_ _23"> </span>directories, <span class="_ _23"> </span>but <span class="_ _42"> </span>ther<span class="ls3cc">ea<span class="_ _43"></span><span class="ls45">re <span class="_ _42"> </span>a<span class="_ _2"></span><span class="ls0">dditional</span></span></span></span></span></div><div class="t m0 x32 h2a ye0e ff19 fsf fc0 sc0 ls0 ws0">types of ﬁles.<span class="_ _59"> </span>The types are</div><div class="t m0 x3f h2a ye0f ff19 fsf fc0 sc0 ls0 ws0">1. <span class="_ _51"> </span>Regular<span class="_ _47"> </span>ﬁle. <span class="_ _45"> </span>The<span class="_ _47"> </span>most <span class="_ _3"></span>common <span class="_ _3"></span>type <span class="_ _3"></span>of <span class="_ _3"></span>ﬁle, <span class="_ _9"></span>which <span class="_ _3"></span>contains <span class="_ _3"></span>data <span class="_ _3"></span>of <span class="_ _3"></span>some <span class="_ _9"></span>form.</div><div class="t m0 x41 h2a ye10 ff19 fsf fc0 sc0 ls0 ws0">There<span class="_ _45"> </span>is<span class="_ _35"> </span>no<span class="_ _35"> </span>distinction <span class="_ _23"> </span>to <span class="_ _23"> </span>the <span class="_ _42"> </span>UNIX <span class="_ _23"></span>kernel <span class="_ _23"> </span>whether <span class="_ _23"> </span>this <span class="_ _23"> </span>data <span class="_ _42"> </span>is <span class="_ _23"></span>text <span class="_ _23"></span>or <span class="_ _23"> </span>binary<span class="_ _6"></span>.</div><div class="t m0 x41 h2a ye11 ff19 fsf fc0 sc0 ls0 ws0">Any <span class="_"> </span>interpr<span class="_ _1"></span>etation <span class="_"> </span>of <span class="_"> </span>the <span class="_ _e"> </span>contents <span class="_"> </span>of <span class="_ _e"> </span>a <span class="_"> </span>regular <span class="_ _53"> </span>ﬁle <span class="_"> </span>is <span class="_"> </span>left <span class="_ _e"> </span>to <span class="_"> </span>the <span class="_ _e"> </span>application</div><div class="t m0 x41 h2a ye12 ff19 fsf fc0 sc0 ls0 ws0">processing the ﬁle.</div><div class="t m0 xf6 h51 ye13 ff19 fs2a fc0 sc0 ls0 ws0">One <span class="_ _9"></span>notable <span class="_ _3"></span>exception <span class="_ _9"> </span>to <span class="_ _9"></span>this <span class="_ _9"></span>is <span class="_ _9"></span>with <span class="_ _9"></span>binary <span class="_ _9"></span>executable <span class="_ _3"></span>ﬁles.<span class="_ _59"> </span><span class="lsed">To <span class="_ _80"> </span>e<span class="_ _9"></span></span>xecute <span class="_ _9"></span>a <span class="_ _9"></span>program, <span class="_ _3"></span>the</div><div class="t m0 xf6 h51 ye14 ff19 fs2a fc0 sc0 ls0 ws0">kernel <span class="_ _9"></span>must <span class="_ _9"></span>understand <span class="_ _3"></span>its <span class="_ _9"> </span>format.<span class="_ _46"> </span>All <span class="_ _9"></span>binary <span class="_ _9"></span>executable <span class="_ _3"></span>ﬁles <span class="_ _9"> </span>conform <span class="_ _9"> </span>to <span class="_ _9"> </span>a <span class="_ _9"></span>format <span class="_ _9"></span>that</div><div class="t m0 xf6 h51 ye15 ff19 fs2a fc0 sc0 ls0 ws0">allows the kernel to identify where<span class="_"> </span>to<span class="_"> </span>load a pr<span class="_ _0"></span>ogram’s text and data.</div><div class="t m0 x3f h2a ye16 ff19 fsf fc0 sc0 ls0 ws0">2. <span class="_ _51"> </span>Directory <span class="_"> </span>ﬁle.<span class="_ _48"> </span><span class="ls481">Aﬁ<span class="_ _4a"></span><span class="ls0">le <span class="_"> </span>that <span class="_"> </span>contains <span class="_"> </span>the <span class="_"> </span>names <span class="_"> </span>of <span class="_"> </span>other <span class="_"> </span>ﬁles <span class="_"> </span>and <span class="_"> </span>pointers <span class="_"> </span>to</span></span></div><div class="t m0 x41 h2a ye17 ff19 fsf fc0 sc0 ls0 ws0">information <span class="_ _2"></span>on <span class="_ _2"></span>these <span class="_ _3"></span>ﬁles.<span class="_ _61"> </span>Any <span class="_ _2"></span>process <span class="_ _2"></span>that <span class="_ _3"></span>has <span class="_ _2"></span>read <span class="_ _2"></span>permission <span class="_ _2"></span>for <span class="_ _2"></span>a <span class="_ _3"></span>directory</div><div class="t m0 x41 h2a ye18 ff19 fsf fc0 sc0 ls0 ws0">ﬁle <span class="_ _3"></span>can <span class="_ _3"></span>read <span class="_ _3"></span>the <span class="_ _3"></span>contents <span class="_ _3"></span>of <span class="_ _3"></span>the <span class="_ _9"></span>dir<span class="_ _0"></span>ectory<span class="_ _4"></span><span class="ls216">,b<span class="_ _8"></span><span class="ls0">ut <span class="_ _9"></span>only <span class="_ _3"></span>the <span class="_ _3"></span>kernel <span class="_ _3"></span>can <span class="_ _3"></span>write <span class="_ _9"></span>directly</span></span></div><div class="t m0 x41 h2a ye19 ff19 fsf fc0 sc0 ls0 ws0">to <span class="_ _2"></span>a <span class="_ _3"></span>directory <span class="_ _2"></span>ﬁle.<span class="_ _16"> </span>Processes <span class="_ _2"></span>must <span class="_ _3"></span>use <span class="_ _2"></span>the <span class="_ _3"></span>functions <span class="_ _3"></span>described <span class="_ _3"></span>in <span class="_ _2"></span>this <span class="_ _3"></span>chapter <span class="_ _3"></span>to</div><div class="t m0 x41 h2a ye1a ff19 fsf fc0 sc0 ls0 ws0">make changes to a directory<span class="_ _4"></span>.</div><div class="t m0 x3f h2a ye1b ff19 fsf fc0 sc0 ls0 ws0">3. <span class="_ _51"> </span>Block<span class="_"> </span>special ﬁle.<span class="_ _46"> </span><span class="ls482">At<span class="_ _d"></span><span class="ls0">ype of ﬁle providing buffer<span class="_ _0"></span>ed I/O access in ﬁxed-size units</span></span></div><div class="t m0 x41 h2a ye1c ff19 fsf fc0 sc0 ls0 ws0">to devices such as disk drives.</div><div class="t m0 xf6 h51 ye1d ff19 fs2a fc0 sc0 ls0 ws0">Note that <span class="_ _2"></span>FreeBSD <span class="_ _2"></span>no longer <span class="_ _2"></span>supports <span class="_ _2"></span>block <span class="_ _2"></span>special <span class="_ _2"></span>ﬁles.<span class="_ _44"> </span>All <span class="_ _2"></span>access <span class="_ _2"></span>to <span class="_ _2"></span>devices is <span class="_ _2"></span>through</div><div class="t m0 xf6 h51 ye1e ff19 fs2a fc0 sc0 ls0 ws0">the character special interface.</div><div class="t m0 x3f h2a ye1f ff19 fsf fc0 sc0 ls0 ws0">4. <span class="_ _51"> </span>Character<span class="_ _51"> </span>special <span class="_ _45"> </span>ﬁle.<span class="_ _5c"> </span><span class="ls483">At<span class="_ _26"></span><span class="ls0">ype <span class="_ _45"> </span>of <span class="_ _35"> </span>ﬁle <span class="_ _45"> </span>providing <span class="_ _45"> </span>unbuffer<span class="_ _0"></span>ed <span class="_ _45"> </span>I/O <span class="_ _35"> </span>access <span class="_ _45"> </span>in</span></span></div><div class="t m0 x41 h2a ye20 ff19 fsf fc0 sc0 ls0 ws0">variable-sized <span class="_ _3"></span>units <span class="_ _3"></span>to <span class="_ _9"></span>devices.<span class="_ _16"> </span>All <span class="_ _3"></span>devices <span class="_ _9"></span>on <span class="_ _3"></span>a <span class="_ _3"></span>system <span class="_ _9"></span>ar<span class="ls321">ee<span class="_ _b"></span><span class="ls0">ither <span class="_ _3"></span>block <span class="_ _9"></span>special</span></span></div><div class="t m0 x41 h2a ye21 ff19 fsf fc0 sc0 ls0 ws0">ﬁles or character special ﬁles.</div><div class="t m0 x3f h2a ye22 ff19 fsf fc0 sc0 ls0 ws0">5. <span class="_ _51"> </span>FIFO.<span class="_ _46"> </span><span class="ls484">At<span class="_ _d"></span><span class="ls0">ype <span class="_ _2"></span>of <span class="_ _2"></span>ﬁle <span class="_ _2"></span>used for <span class="_ _2"></span>communication <span class="_ _2"></span>between <span class="_ _2"></span>processes. <span class="_"> </span>It’s<span class="_ _66"> </span>sometimes</span></span></div><div class="t m0 x41 h2a ye23 ff19 fsf fc0 sc0 ls0 ws0">called a named pipe.<span class="_ _59"> </span><span class="ls5f">We <span class="_ _e"> </span>d<span class="_ _9"></span></span>escribe FIFOs in Section 15.5.</div><div class="t m0 x3f h2a ye24 ff19 fsf fc0 sc0 ls0 ws0">6. <span class="_ _51"> </span>Socket.<span class="_ _51"> </span><span class="ls485">At<span class="_ _43"></span><span class="ls0">ype <span class="_ _23"> </span>of <span class="_ _23"></span>ﬁle <span class="_ _23"></span>used <span class="_ _9"></span>for <span class="_ _23"> </span>network <span class="_ _23"></span>communication <span class="_ _9"></span>between <span class="_ _23"> </span>processes. <span class="_ _45"> </span>A</span></span></div><div class="t m0 x41 h2a ye25 ff19 fsf fc0 sc0 ls0 ws0">socket can also be <span class="_ _2"></span>used for non-network <span class="_ _2"></span>communication between processes on a</div><div class="t m0 x41 h2a ye26 ff19 fsf fc0 sc0 ls0 ws0">single host.<span class="_ _59"> </span><span class="ls5f">We <span class="_ _e"> </span>u<span class="_ _9"></span></span>se sockets for interprocess communication in Chapter 16.</div><div class="t m0 x3f h2a ye27 ff19 fsf fc0 sc0 ls0 ws0">7. <span class="_ _51"> </span>Symbolic<span class="_ _44"> </span>link. <span class="_ _44"> </span>A<span class="_ _35"> </span>type <span class="_ _53"> </span>of <span class="_ _42"> </span>ﬁle <span class="_ _42"> </span>that <span class="_ _42"> </span>points <span class="_ _42"> </span>to <span class="_ _53"> </span>another <span class="_ _42"> </span>ﬁle.<span class="_ _54"> </span><span class="ls5f">We <span class="_ _45"> </span>t<span class="_ _9"></span></span>alk <span class="_ _42"> </span>mor<span class="ls486">ea<span class="_ _43"></span><span class="ls0">bout</span></span></div><div class="t m0 x41 h2a ye28 ff19 fsf fc0 sc0 ls0 ws0">symbolic links in Section 4.17.</div><div class="t m0 x32 h26 ye29 ff19 fsf fc0 sc0 ls0 ws0">The <span class="_ _23"></span>type <span class="_ _23"></span>of <span class="_ _23"> </span>a <span class="_ _23"> </span>ﬁle <span class="_ _23"> </span>is <span class="_ _23"> </span>encoded <span class="_ _23"> </span>in <span class="_ _42"> </span>the<span class="_ _45"> </span><span class="ff1a">st_mode<span class="_ _35"> </span></span>member <span class="_ _23"> </span>of <span class="_ _23"> </span>the<span class="_ _35"> </span><span class="ff1a">stat<span class="_ _35"> </span></span>structure. <span class="_ _45"> </span>W<span class="_ _6"></span><span class="ls12f">ec<span class="_ _b"></span><span class="ls0">an</span></span></div><div class="t m0 x32 h2a ye2a ff19 fsf fc0 sc0 ls0 ws0">determine <span class="_ _9"></span>the <span class="_ _9"></span>ﬁle <span class="_ _3"></span>type <span class="_ _9"></span>with <span class="_ _9"></span>the <span class="_ _9"></span>macros <span class="_ _9"></span>shown <span class="_ _3"></span>in <span class="_ _9"></span>Figur<span class="ls487">e4<span class="_ _b"></span><span class="ls0">.1. <span class="_ _45"> </span>The<span class="_ _45"> </span>argument <span class="_ _3"></span>to <span class="_ _9"></span>each <span class="_ _9"></span>of</span></span></div><div class="t m0 x32 h26 ye2b ff19 fsf fc0 sc0 ls0 ws0">these macros is the<span class="_"> </span><span class="ff1a">st_mode<span class="_ _80"> </span></span>member from the<span class="_"> </span><span class="ff1a">stat<span class="_ _e"> </span></span>structure.</div><a class="l" href="#pfd" data-dest-detail='[13,"XYZ",50,757,1]'><div class="d m1" style="border-style:none;position:absolute;left:80.890952px;bottom:1064.928966px;width:97.307495px;height:19.679993px;background-color:rgba(255,255,255,0.000001);"></div></a></div><div class="pi" data-data='{"ctm":[2.100000,0.000000,0.000000,2.100000,-115.668004,-156.491993]}'></div></div>
