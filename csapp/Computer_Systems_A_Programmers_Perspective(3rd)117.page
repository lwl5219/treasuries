<div id="pf75" class="pf w2 h11" data-page-no="75"><div class="pc pc75 w2 h11"><img class="bi x0 y0 w1 h1" alt="" src="csapp/bg75.png"/><div class="t m5 x14 h28 y9b ffe fs1e fc2 sc0 ls0 ws0">116<span class="_ _1b"> </span><span class="ff6 fs1f">Chapter<span class="_ _10"> </span>2<span class="_ _3d"> </span>Representing<span class="_ _10"> </span>and<span class="_ _10"> </span>Manipulating<span class="_ _10"> </span>Information</span></div><div class="t m5 x29 h26 ye7 ff7 fs19 fc2 sc0 ls0 ws0">One<span class="_ _14"> </span>point<span class="_ _14"> </span>worth<span class="_ _15"> </span>making<span class="_ _14"> </span>is<span class="_ _15"> </span>that<span class="_ _14"> </span>the<span class="_ _14"> </span>relative<span class="_ _15"> </span>order<span class="_ _14"> </span>of<span class="_ _14"> </span>conversion<span class="_ _15"> </span>from<span class="_ _14"> </span>one</div><div class="t m5 x1d h26 y2a7 ff7 fs19 fc2 sc0 ls0 ws0">data<span class="_"> </span>size<span class="_"> </span>to<span class="_ _11"> </span>another<span class="_"> </span>and<span class="_ _11"> </span>between<span class="_"> </span>unsigned<span class="_ _11"> </span>and<span class="_"> </span>signed<span class="_ _11"> </span>can<span class="_"> </span>affect<span class="_ _11"> </span>the<span class="_"> </span>behavior<span class="_"> </span>of</div><div class="t m5 x1d h26 y2a8 ff7 fs19 fc2 sc0 ls0 ws0">a<span class="_"> </span>program.<span class="_"> </span>Consider<span class="_"> </span>the<span class="_"> </span>following<span class="_"> </span>code:</div><div class="t m5 x1f h2d y10eb ff6 fs20 fc6 sc0 ls0 ws0">1<span class="_ _73"> </span><span class="ffd fs1e fc2">short<span class="_ _1f"> </span>sx<span class="_ _e"> </span>=<span class="_ _1f"> </span>-12345;<span class="_ _6f"> </span>/*<span class="_ _1f"> </span>-12345<span class="_ _3f"> </span>*/</span></div><div class="t m5 x1f h2d y10ec ff6 fs20 fc6 sc0 ls0 ws0">2<span class="_ _73"> </span><span class="ffd fs1e fc2">unsigned<span class="_ _1f"> </span>uy<span class="_ _e"> </span>=<span class="_ _1f"> </span>sx;<span class="_ _71"> </span>/*<span class="_ _1f"> </span>Mystery!<span class="_ _e"> </span>*/</span></div><div class="t m5 x1f h2e y10ed ff6 fs20 fc6 sc0 ls0 ws0">3</div><div class="t m5 x1f h2e y10ee ff6 fs20 fc6 sc0 ls0 ws0">4</div><div class="t m5 xc2 h2d y10ef ffd fs1e fc2 sc0 ls0 ws0">printf(&quot;uy<span class="_ _1a"> </span>=<span class="_ _e"> </span>%u:\t&quot;,<span class="_ _1f"> </span>uy);</div><div class="t m5 x1f h2d y10f0 ff6 fs20 fc6 sc0 ls0 ws0">5<span class="_ _73"> </span><span class="ffd fs1e fc2">show_bytes((byte_pointer)<span class="_ _1f"> </span>&amp;uy,<span class="_ _e"> </span>sizeof(unsigned));</span></div><div class="t m5 x1d h26 y10f1 ff7 fs19 fc2 sc0 ls0 ws0">When<span class="_ _11"> </span>run<span class="_ _16"> </span>on<span class="_ _11"> </span>a<span class="_ _16"> </span>big-endian<span class="_ _16"> </span>machine<span class="_ _1"></span>,<span class="_ _16"> </span>this<span class="_ _16"> </span>code<span class="_ _11"> </span>causes<span class="_ _16"> </span>the<span class="_ _16"> </span>following<span class="_ _11"> </span>output<span class="_ _16"> </span>to<span class="_ _16"> </span>be</div><div class="t m5 x1d h26 y10f2 ff7 fs19 fc2 sc0 ls0 ws0">printed:</div><div class="t m5 x1d h2d y10f3 ffd fs1e fc2 sc0 ls0 ws0">uy<span class="_ _e"> </span>=<span class="_ _1f"> </span>4294954951:<span class="_ _1a"> </span>ff<span class="_ _1f"> </span>ff<span class="_ _e"> </span>cf<span class="_ _1f"> </span>c7</div><div class="t m5 x1d h26 y10f4 ff7 fs19 fc2 sc0 ls0 ws0">T<span class="_ _1"></span>his<span class="_ _f"> </span>shows<span class="_ _21"> </span>that,<span class="_ _e"> </span>when<span class="_ _15"> </span>converting<span class="_ _21"> </span>from<span class="_ _f"> </span><span class="ffd">short<span class="_ _21"> </span></span>to<span class="_ _21"> </span><span class="ffd">unsigned</span>,<span class="_ _e"> </span>the<span class="_ _21"> </span>program<span class="_ _21"> </span>ﬁrst</div><div class="t m5 x1d h26 y10f5 ff7 fs19 fc2 sc0 ls0 ws0">changes<span class="_ _e"> </span>the<span class="_ _e"> </span>size<span class="_ _e"> </span>and<span class="_ _e"> </span>then<span class="_ _e"> </span>the<span class="_ _e"> </span>type<span class="_ _1"></span>.<span class="_ _e"> </span>T<span class="_ _1"></span>hat<span class="_ _e"> </span>is<span class="_ _1"></span>,<span class="_ _22"> </span><span class="ffd">(unsigned)<span class="_ _11"> </span>sx<span class="_ _e"> </span></span>is<span class="_ _e"> </span>equivalent<span class="_ _e"> </span>to</div><div class="t m5 x1d h26 y10f6 ffd fs19 fc2 sc0 ls0 ws0">(unsigned)<span class="_ _11"> </span>(int)<span class="_ _16"> </span>sx<span class="ff7">,<span class="_ _21"> </span>evaluating<span class="_ _15"> </span>to<span class="_ _15"> </span>4,294,954,951,<span class="_ _21"> </span>not<span class="_ _15"> </span></span>(unsigned)<span class="_ _11"> </span>(unsigned</div><div class="t m5 x1d h26 y10f7 ffd fs19 fc2 sc0 ls0 ws0">short)<span class="_ _11"> </span>sx<span class="ff7">,<span class="_ _16"> </span>which<span class="_"> </span>evaluates<span class="_ _11"> </span>to<span class="_ _11"> </span>53,191.<span class="_ _11"> </span>Indeed,<span class="_ _11"> </span>this<span class="_ _11"> </span>convention<span class="_"> </span>is<span class="_ _11"> </span>required<span class="_ _11"> </span>by<span class="_ _11"> </span>the</span></div><div class="t m5 x1d h26 y10f8 ff7 fs19 fc2 sc0 ls0 ws0">C<span class="_"> </span>standards<span class="_ _1"></span>.</div><div class="t m5 x1d h47 y10f9 ffe fs2b fc1 sc0 ls0 ws0">Practice<span class="_"> </span>Problem<span class="_"> </span>2.23<span class="_ _1f"> </span><span class="fs16">(solution<span class="_"> </span>page<span class="_"> </span>186)</span></div><div class="t m5 x1d h26 y10fa ff7 fs19 fc1 sc0 ls0 ws0">Consider<span class="_"> </span>the<span class="_"> </span>following<span class="_"> </span>C<span class="_"> </span>functions:</div><div class="t m5 x1d h2d y10fb ffd fs1e fc2 sc0 ls0 ws0">int<span class="_ _e"> </span>fun1(unsigned<span class="_ _1f"> </span>word)<span class="_ _1f"> </span>{</div><div class="t m5 x10c h2d y10fc ffd fs1e fc2 sc0 ls0 ws0">return<span class="_ _e"> </span>(int)<span class="_ _1f"> </span>((word<span class="_ _1f"> </span>&lt;&lt;<span class="_ _e"> </span>24)<span class="_ _1f"> </span>&gt;&gt;<span class="_ _e"> </span>24);</div><div class="t m5 x1d h2d y10fd ffd fs1e fc2 sc0 ls0 ws0">}</div><div class="t m5 x1d h2d y10fe ffd fs1e fc2 sc0 ls0 ws0">int<span class="_ _e"> </span>fun2(unsigned<span class="_ _1f"> </span>word)<span class="_ _1f"> </span>{</div><div class="t m5 x10c h2d y10ff ffd fs1e fc2 sc0 ls0 ws0">return<span class="_ _e"> </span>((int)<span class="_ _1f"> </span>word<span class="_ _1f"> </span>&lt;&lt;<span class="_ _e"> </span>24)<span class="_ _1f"> </span>&gt;&gt;<span class="_ _e"> </span>24;</div><div class="t m5 x1d h2d y1100 ffd fs1e fc2 sc0 ls0 ws0">}</div><div class="t m5 x29 h26 y1101 ff7 fs19 fc2 sc0 ls0 ws0">Assume<span class="_ _13"> </span>these<span class="_"> </span>are<span class="_ _13"> </span>executed<span class="_"> </span>as<span class="_ _13"> </span>a<span class="_"> </span>32-bit<span class="_ _13"> </span>program<span class="_"> </span>on<span class="_ _13"> </span>a<span class="_"> </span>machine<span class="_ _13"> </span>that<span class="_"> </span>uses<span class="_ _13"> </span>two’s-</div><div class="t m5 x1d h26 y1102 ff7 fs19 fc2 sc0 ls0 ws0">complement<span class="_ _14"> </span>arithmetic.<span class="_ _14"> </span>Assume<span class="_ _14"> </span>also<span class="_ _15"> </span>that<span class="_ _14"> </span>right<span class="_ _15"> </span>shifts<span class="_ _14"> </span>of<span class="_ _15"> </span>signed<span class="_ _14"> </span>values<span class="_ _15"> </span>are<span class="_ _14"> </span>per<span class="_ _1"></span>-</div><div class="t m5 x1d h26 y1103 ff7 fs19 fc2 sc0 ls0 ws0">formed<span class="_ _6"> </span>arithmetically<span class="_ _3"></span>,<span class="_ _6"> </span>while<span class="_ _6"> </span>right<span class="_ _6"> </span>shifts<span class="_ _6"> </span>of<span class="_ _6"> </span>unsigned<span class="_ _6"> </span>values<span class="_ _6"> </span>are<span class="_ _6"> </span>performed<span class="_ _6"> </span>logically<span class="_ _3"></span>.</div><div class="t m5 x124 h26 y1104 ff7 fs19 fc2 sc0 ls0 ws0">A.<span class="_ _1f"> </span>F<span class="_ _1"></span>ill<span class="_ _16"> </span>in<span class="_ _16"> </span>the<span class="_ _11"> </span>following<span class="_ _16"> </span>table<span class="_ _16"> </span>showing<span class="_ _16"> </span>the<span class="_ _11"> </span>effect<span class="_ _16"> </span>of<span class="_ _16"> </span>these<span class="_ _11"> </span>functions<span class="_ _16"> </span>for<span class="_ _16"> </span>several</div><div class="t m5 x4f h26 y1105 ff7 fs19 fc2 sc0 ls0 ws0">example<span class="_ _11"> </span>arguments<span class="_ _1"></span>.<span class="_ _11"> </span>Y<span class="_ _3"></span>ou<span class="_ _11"> </span>will<span class="_ _11"> </span>ﬁnd<span class="_ _16"> </span>it<span class="_ _11"> </span>more<span class="_ _11"> </span>convenient<span class="_ _11"> </span>to<span class="_ _11"> </span>work<span class="_ _16"> </span>with<span class="_"> </span>a<span class="_ _16"> </span>hexa-</div><div class="t m5 x4f h26 y1106 ff7 fs19 fc2 sc0 ls0 ws0">decimal<span class="_ _13"> </span>representation.<span class="_ _6"> </span>J<span class="_ _0"></span>ust<span class="_ _13"> </span>remember<span class="_ _6"> </span>that<span class="_ _13"> </span>hex<span class="_ _13"> </span>digits<span class="_ _6"> </span><span class="ffd">8<span class="_ _13"> </span></span>through<span class="_ _13"> </span><span class="ffd">F<span class="_ _13"> </span></span>have<span class="_ _6"> </span>their</div><div class="t m5 x4f h26 y1107 ff7 fs19 fc2 sc0 ls0 ws0">most<span class="_"> </span>signiﬁcant<span class="_"> </span>bits<span class="_"> </span>equal<span class="_"> </span>to<span class="_"> </span>1.</div><div class="t m5 x154 h2d y1108 ffd fs1e fc2 sc0 ls0 ws0">w<span class="_ _6d"> </span>fun1(w)<span class="_ _46"> </span>fun2(w)</div><div class="t m5 x4f h2d y1109 ffd fs1e fc2 sc0 ls0 ws0">0x00000076</div><div class="t m5 x4f h2d y110a ffd fs1e fc1 sc0 ls0 ws0">0x87654321</div><div class="t m5 x4f h2d y110b ffd fs1e fc1 sc0 ls0 ws0">0x000000C9</div><div class="t m5 x4f h2d y110c ffd fs1e fc1 sc0 ls0 ws0">0xEDCBA987</div><div class="t m5 x124 h26 y110d ff7 fs19 fc1 sc0 ls0 ws0">B<span class="_ _3"></span>.<span class="_ _1d"> </span>Describe<span class="_"> </span>in<span class="_ _13"> </span>words<span class="_"> </span>the<span class="_ _13"> </span>useful<span class="_"> </span>computation<span class="_ _13"> </span>each<span class="_"> </span>of<span class="_ _13"> </span>these<span class="_"> </span>functions<span class="_ _13"> </span>performs<span class="_ _1"></span>.</div></div><div class="pi" data-data='{"ctm":[2.000000,0.000000,0.000000,2.000000,0.000000,0.000000]}'></div></div>
