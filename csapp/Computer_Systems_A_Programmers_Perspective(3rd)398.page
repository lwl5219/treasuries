<div id="pf18e" class="pf w2 h11" data-page-no="18e"><div class="pc pc18e w2 h11"><img class="bi x0 y0 w1 h1" alt="" src="csapp/bg18e.png"/><div class="t m5 xfc h28 y9b ff6 fs1f fc2 sc0 ls0 ws0">Section<span class="_ _10"> </span>4.1<span class="_ _60"> </span>The<span class="_ _10"> </span>Y86-64<span class="_ _10"> </span>Instruction<span class="_ _10"> </span>Set<span class="_ _10"> </span>Architecture<span class="_ _1b"> </span><span class="ffe fs1e">397</span></div><div class="t m5 x34 h2a y548 fff fs1c fc2 sc0 ls0 ws0">Aside<span class="_ _1b"> </span><span class="ff6 fs19">RISC<span class="_ _11"> </span>and<span class="_ _11"> </span>CISC<span class="_ _11"> </span>instruction<span class="_ _16"> </span>sets</span></div><div class="t m5 x34 h2b y2d0 ff7 fs1e fc2 sc0 ls0 ws0">x86-64<span class="_ _14"> </span>is<span class="_ _15"> </span>sometimes<span class="_ _14"> </span>labeled<span class="_ _14"> </span>as<span class="_ _15"> </span>a<span class="_ _14"> </span>“complex<span class="_ _15"> </span>instruction<span class="_ _14"> </span>set<span class="_ _15"> </span>computer”<span class="_ _14"> </span>(CISC—pronounced<span class="_ _15"> </span>“sisk”),</div><div class="t m5 x34 h2b y2d1 ff7 fs1e fc2 sc0 ls0 ws0">and<span class="_ _16"> </span>is<span class="_ _11"> </span>deemed<span class="_ _16"> </span>to<span class="_ _16"> </span>be<span class="_ _11"> </span>the<span class="_ _16"> </span>opposite<span class="_ _16"> </span>of<span class="_ _11"> </span>ISAs<span class="_ _16"> </span>that<span class="_ _16"> </span>are<span class="_ _11"> </span>classiﬁed<span class="_ _16"> </span>as<span class="_ _16"> </span>“reduced<span class="_ _16"> </span>instruction<span class="_ _11"> </span>set<span class="_ _16"> </span>computers”</div><div class="t m5 x34 h2b y2d2 ff7 fs1e fc2 sc0 ls0 ws0">(RISC—pronounced<span class="_"> </span>“risk”).<span class="_"> </span>Historically<span class="_ _7"></span>,<span class="_"> </span>CISC<span class="_"> </span>machines<span class="_"> </span>came<span class="_"> </span>ﬁrst,<span class="_"> </span>having<span class="_"> </span>evolved<span class="_"> </span>from<span class="_ _13"> </span>the<span class="_"> </span>earliest</div><div class="t m5 x34 h2b y2d3 ff7 fs1e fc2 sc0 ls0 ws0">computers<span class="_ _1"></span>.<span class="_ _6"> </span>By<span class="_ _6"> </span>the<span class="_ _13"> </span>early<span class="_ _a"> </span>1980s<span class="_ _1"></span>,<span class="_ _13"> </span>instruction<span class="_ _6"> </span>sets<span class="_ _6"> </span>for<span class="_ _6"> </span>mainframe<span class="_ _6"> </span>and<span class="_ _13"> </span>minicomputers<span class="_ _a"> </span>had<span class="_ _6"> </span>grown<span class="_ _13"> </span>quite<span class="_ _a"> </span>large,</div><div class="t m5 x34 h2b y2d4 ff7 fs1e fc2 sc0 ls0 ws0">as<span class="_"> </span>machine<span class="_ _11"> </span>designers<span class="_ _10"> </span>incorporated<span class="_ _11"> </span>new<span class="_ _11"> </span>instructions<span class="_"> </span>to<span class="_ _11"> </span>support<span class="_ _10"> </span>high-level<span class="_ _11"> </span>tasks<span class="_ _1"></span>,<span class="_ _11"> </span>such<span class="_"> </span>as<span class="_ _11"> </span>manipulating</div><div class="t m5 x34 h2b y2d5 ff7 fs1e fc2 sc0 ls0 ws0">circular<span class="_"> </span>buffers<span class="_ _3"></span>,<span class="_"> </span>performing<span class="_"> </span>decimal<span class="_ _13"> </span>arithmetic,<span class="_ _13"> </span>and<span class="_"> </span>evaluating<span class="_ _13"> </span>polynomials<span class="_ _1"></span>.<span class="_"> </span>T<span class="_ _1"></span>he<span class="_"> </span>ﬁrst<span class="_ _13"> </span>microprocessors</div><div class="t m5 x34 h2b y2d6 ff7 fs1e fc2 sc0 ls0 ws0">appeared<span class="_"> </span>in<span class="_"> </span>the<span class="_ _13"> </span>early<span class="_"> </span>1970s<span class="_"> </span>and<span class="_ _13"> </span>had<span class="_"> </span>limited<span class="_"> </span>instruction<span class="_ _13"> </span>sets<span class="_ _1"></span>,<span class="_"> </span>because<span class="_"> </span>the<span class="_ _13"> </span>integrated-circuit<span class="_"> </span>technology</div><div class="t m5 x34 h2b y549 ff7 fs1e fc2 sc0 ls0 ws0">then<span class="_ _13"> </span>posed<span class="_ _6"> </span>severe<span class="_ _13"> </span>constraints<span class="_ _6"> </span>on<span class="_ _13"> </span>what<span class="_ _13"> </span>could<span class="_ _6"> </span>be<span class="_ _13"> </span>implemented<span class="_ _13"> </span>on<span class="_ _6"> </span>a<span class="_ _13"> </span>single<span class="_ _6"> </span>chip.<span class="_ _6"> </span>Microprocessors<span class="_ _13"> </span>evolved</div><div class="t m5 x34 h2b y54a ff7 fs1e fc2 sc0 ls0 ws0">quickly<span class="_"> </span>and,<span class="_"> </span>by<span class="_ _10"> </span>the<span class="_ _10"> </span>early<span class="_ _10"> </span>1980s<span class="_ _0"></span>,<span class="_"> </span>were<span class="_"> </span>following<span class="_ _10"> </span>the<span class="_ _10"> </span>same<span class="_ _10"> </span>path<span class="_ _10"> </span>of<span class="_ _10"> </span>increasing<span class="_ _10"> </span>instruction<span class="_ _11"> </span>set<span class="_"> </span>complexity</div><div class="t m5 x34 h2b y54b ff7 fs1e fc2 sc0 ls0 ws0">that<span class="_ _13"> </span>had<span class="_ _13"> </span>been<span class="_ _13"> </span>the<span class="_ _13"> </span>case<span class="_ _13"> </span>for<span class="_ _13"> </span>mainframes<span class="_ _13"> </span>and<span class="_ _13"> </span>minicomputers<span class="_ _1"></span>.<span class="_ _13"> </span>T<span class="_ _0"></span>he<span class="_ _13"> </span>x86<span class="_ _13"> </span>family<span class="_ _13"> </span>took<span class="_ _13"> </span>this<span class="_ _13"> </span>path,<span class="_ _13"> </span>evolving<span class="_ _13"> </span>into</div><div class="t m5 x34 h2b y54c ff7 fs1e fc2 sc0 ls0 ws0">IA32,<span class="_ _13"> </span>and<span class="_ _13"> </span>more<span class="_ _13"> </span>recently<span class="_ _13"> </span>into<span class="_ _13"> </span>x86-64.<span class="_ _13"> </span>T<span class="_ _1"></span>he<span class="_ _13"> </span>x86<span class="_ _13"> </span>line<span class="_ _13"> </span>continues<span class="_ _13"> </span>to<span class="_ _13"> </span>evolve<span class="_ _13"> </span>as<span class="_ _13"> </span>new<span class="_ _13"> </span>classes<span class="_ _13"> </span>of<span class="_ _13"> </span>instructions<span class="_ _13"> </span>are</div><div class="t m5 x34 h2b y54d ff7 fs1e fc2 sc0 ls0 ws0">added<span class="_"> </span>based<span class="_"> </span>on<span class="_"> </span>the<span class="_"> </span>needs<span class="_"> </span>of<span class="_"> </span>emerging<span class="_"> </span>applications<span class="_ _1"></span>.</div><div class="t m5 x35 h2b y54e ff7 fs1e fc2 sc0 ls0 ws0">T<span class="_ _1"></span>he<span class="_ _13"> </span>RISC<span class="_ _6"> </span>design<span class="_ _6"> </span>philosophy<span class="_ _13"> </span>developed<span class="_ _6"> </span>in<span class="_ _13"> </span>the<span class="_ _a"> </span>early<span class="_ _13"> </span>1980s<span class="_ _6"> </span>as<span class="_ _6"> </span>an<span class="_ _13"> </span>alternative<span class="_ _6"> </span>to<span class="_ _13"> </span>these<span class="_ _a"> </span>trends<span class="_ _0"></span>.<span class="_ _6"> </span>A<span class="_ _13"> </span>group</div><div class="t m5 x34 h2b y70b ff7 fs1e fc2 sc0 ls0 ws0">of<span class="_ _16"> </span>hardware<span class="_ _11"> </span>and<span class="_ _16"> </span>compiler<span class="_ _16"> </span>experts<span class="_ _11"> </span>at<span class="_ _16"> </span>IBM,<span class="_ _16"> </span>strongly<span class="_ _16"> </span>inﬂuenced<span class="_ _11"> </span>by<span class="_ _16"> </span>the<span class="_ _16"> </span>ideas<span class="_ _16"> </span>of<span class="_ _11"> </span>IBM<span class="_ _16"> </span>researcher<span class="_ _16"> </span>J<span class="_ _1"></span>ohn</div><div class="t m5 x34 h2b y70c ff7 fs1e fc2 sc0 ls0 ws0">Cocke<span class="_ _1"></span>,<span class="_"> </span>recognized<span class="_ _13"> </span>that<span class="_ _6"> </span>they<span class="_"> </span>could<span class="_ _6"> </span>generate<span class="_"> </span>efﬁcient<span class="_ _6"> </span>code<span class="_ _13"> </span>for<span class="_ _13"> </span>a<span class="_ _13"> </span>much<span class="_ _13"> </span>simpler<span class="_ _13"> </span>form<span class="_ _6"> </span>of<span class="_"> </span>instruction<span class="_ _6"> </span>set.<span class="_"> </span>In</div><div class="t m5 x34 h2b y70d ff7 fs1e fc2 sc0 ls0 ws0">fact,<span class="_"> </span>many<span class="_ _13"> </span>of<span class="_"> </span>the<span class="_ _13"> </span>high-level<span class="_ _13"> </span>instructions<span class="_"> </span>that<span class="_ _13"> </span>were<span class="_"> </span>being<span class="_ _13"> </span>added<span class="_ _13"> </span>to<span class="_"> </span>instruction<span class="_ _13"> </span>sets<span class="_"> </span>were<span class="_ _13"> </span>very<span class="_"> </span>difﬁcult<span class="_ _13"> </span>to</div><div class="t m5 x34 h2b y70e ff7 fs1e fc2 sc0 ls0 ws0">generate<span class="_"> </span>with<span class="_"> </span>a<span class="_"> </span>compiler<span class="_"> </span>and<span class="_"> </span>were<span class="_"> </span>seldom<span class="_ _13"> </span>used.<span class="_"> </span>A<span class="_"> </span>simpler<span class="_"> </span>instruction<span class="_"> </span>set<span class="_"> </span>could<span class="_"> </span>be<span class="_"> </span>implemented<span class="_"> </span>with</div><div class="t m5 x34 h2b y70f ff7 fs1e fc2 sc0 ls0 ws0">much<span class="_ _13"> </span>less<span class="_ _13"> </span>hardware<span class="_ _13"> </span>and<span class="_ _6"> </span>could<span class="_"> </span>be<span class="_ _6"> </span>organized<span class="_"> </span>in<span class="_ _6"> </span>an<span class="_"> </span>efﬁcient<span class="_ _6"> </span>pipeline<span class="_"> </span>structure<span class="_ _1"></span>,<span class="_ _13"> </span>similar<span class="_ _13"> </span>to<span class="_ _13"> </span>those<span class="_ _13"> </span>described</div><div class="t m5 x34 h2b y710 ff7 fs1e fc2 sc0 ls0 ws0">later<span class="_ _13"> </span>in<span class="_ _13"> </span>this<span class="_ _13"> </span>chapter.<span class="_ _13"> </span>IBM<span class="_ _13"> </span>did<span class="_ _13"> </span>not<span class="_ _13"> </span>commercialize<span class="_ _13"> </span>this<span class="_ _13"> </span>idea<span class="_ _13"> </span>until<span class="_ _13"> </span>many<span class="_ _13"> </span>years<span class="_ _13"> </span>later<span class="_ _0"></span>,<span class="_ _13"> </span>when<span class="_ _13"> </span>it<span class="_ _13"> </span>developed<span class="_ _13"> </span>the</div><div class="t m5 x34 h2b y711 ff7 fs1e fc2 sc0 ls0 ws0">P<span class="_ _1"></span>ower<span class="_"> </span>and<span class="_"> </span>P<span class="_ _0"></span>owerPC<span class="_"> </span>ISAs<span class="_ _1"></span>.</div><div class="t m5 x35 h2b y712 ff7 fs1e fc2 sc0 ls0 ws0">T<span class="_ _1"></span>he<span class="_ _15"> </span>RISC<span class="_ _14"> </span>concept<span class="_ _14"> </span>was<span class="_ _14"> </span>further<span class="_ _14"> </span>developed<span class="_ _15"> </span>by<span class="_ _14"> </span>Professors<span class="_ _14"> </span>David<span class="_ _14"> </span>Patterson,<span class="_ _21"> </span>of<span class="_ _14"> </span>the<span class="_ _14"> </span>University<span class="_ _14"> </span>of</div><div class="t m5 x34 h2b y713 ff7 fs1e fc2 sc0 ls0 ws0">California<span class="_"> </span>at<span class="_ _10"> </span>Berkeley<span class="_ _3"></span>,<span class="_ _11"> </span>and<span class="_"> </span>J<span class="_ _0"></span>ohn<span class="_"> </span>Hennessy<span class="_ _3"></span>,<span class="_ _11"> </span>of<span class="_"> </span>Stanford<span class="_ _10"> </span>University<span class="_ _3"></span>.<span class="_ _11"> </span>Patterson<span class="_"> </span>gave<span class="_ _11"> </span>the<span class="_"> </span>name<span class="_ _10"> </span>RISC<span class="_ _11"> </span>to</div><div class="t m5 x34 h2b y714 ff7 fs1e fc2 sc0 ls0 ws0">this<span class="_"> </span>new<span class="_"> </span>class<span class="_ _11"> </span>of<span class="_"> </span>machines<span class="_ _1"></span>,<span class="_ _10"> </span>and<span class="_ _10"> </span>CISC<span class="_ _11"> </span>to<span class="_"> </span>the<span class="_"> </span>existing<span class="_ _10"> </span>class<span class="_ _0"></span>,<span class="_"> </span>since<span class="_"> </span>there<span class="_ _11"> </span>had<span class="_"> </span>previously<span class="_"> </span>been<span class="_ _10"> </span>no<span class="_ _11"> </span>need<span class="_"> </span>to</div><div class="t m5 x34 h2b y715 ff7 fs1e fc2 sc0 ls0 ws0">have<span class="_"> </span>a<span class="_"> </span>special<span class="_"> </span>designation<span class="_"> </span>for<span class="_"> </span>a<span class="_"> </span>nearly<span class="_"> </span>universal<span class="_"> </span>form<span class="_"> </span>of<span class="_"> </span>instruction<span class="_"> </span>set.</div><div class="t m5 x35 h2b y716 ff7 fs1e fc2 sc0 ls0 ws0">When<span class="_ _14"> </span>comparing<span class="_ _15"> </span>CISC<span class="_ _15"> </span>with<span class="_ _21"> </span>the<span class="_ _15"> </span>original<span class="_ _15"> </span>RISC<span class="_ _15"> </span>instruction<span class="_ _15"> </span>sets<span class="_ _1"></span>,<span class="_ _f"> </span>we<span class="_ _15"> </span>ﬁnd<span class="_ _15"> </span>the<span class="_ _15"> </span>following<span class="_ _21"> </span>general</div><div class="t m5 x34 h2b y717 ff7 fs1e fc2 sc0 ls0 ws0">characteristics:</div><div class="t m5 x34 h31 y3749 ff7 fs21 fc2 sc0 ls0 ws0">CISC<span class="_ _1a2"> </span>Early<span class="_"> </span>RISC</div><div class="t m5 x34 h31 y374a ff7 fs21 fc2 sc0 ls0 ws0">A<span class="_ _16"> </span>large<span class="_ _16"> </span>number<span class="_ _16"> </span>of<span class="_ _16"> </span>instructions<span class="_ _1"></span>.<span class="_ _16"> </span>T<span class="_ _1"></span>he<span class="_ _16"> </span>Intel</div><div class="t m5 x20b h31 y374b ff7 fs21 fc2 sc0 ls0 ws0">document<span class="_ _16"> </span>describing<span class="_ _11"> </span>the<span class="_ _16"> </span>complete<span class="_ _11"> </span>set<span class="_ _16"> </span>of</div><div class="t m5 x20b h31 y374c ff7 fs21 fc2 sc0 ls0 ws0">instructions<span class="_"> </span>[51]<span class="_"> </span>is<span class="_"> </span>over<span class="_"> </span>1,200<span class="_"> </span>pages<span class="_"> </span>long.</div><div class="t m5 x39 h31 y374a ff7 fs21 fc2 sc0 ls0 ws0">Many<span class="_"> </span>fewer<span class="_"> </span>instructions—typically<span class="_"> </span>less<span class="_"> </span>than<span class="_"> </span>100.</div><div class="t m5 x34 h31 y374d ff7 fs21 fc2 sc0 ls0 ws0">Some<span class="_ _11"> </span>instructions<span class="_ _11"> </span>with<span class="_ _11"> </span>long<span class="_ _11"> </span>execution<span class="_ _11"> </span>times<span class="_ _0"></span>.</div><div class="t m5 x20b h31 y374e ff7 fs21 fc2 sc0 ls0 ws0">T<span class="_ _1"></span>hese<span class="_ _11"> </span>include<span class="_"> </span>instructions<span class="_ _10"> </span>that<span class="_ _11"> </span>copy<span class="_"> </span>an<span class="_ _10"> </span>entire</div><div class="t m5 x20b h31 y374f ff7 fs21 fc2 sc0 ls0 ws0">block<span class="_"> </span>from<span class="_"> </span>one<span class="_"> </span>part<span class="_"> </span>of<span class="_ _10"> </span>memory<span class="_"> </span>to<span class="_"> </span>another<span class="_ _10"> </span>and</div><div class="t m5 x20b h31 y3750 ff7 fs21 fc2 sc0 ls0 ws0">others<span class="_"> </span>that<span class="_"> </span>copy<span class="_ _10"> </span>multiple<span class="_"> </span>registers<span class="_ _10"> </span>to<span class="_ _10"> </span>and<span class="_"> </span>from</div><div class="t m5 x20b h31 y3751 ff7 fs21 fc2 sc0 ls0 ws0">memory<span class="_ _3"></span>.</div><div class="t m5 x39 h31 y3752 ff7 fs21 fc2 sc0 ls0 ws0">No<span class="_"> </span>instruction<span class="_"> </span>with<span class="_ _10"> </span>a<span class="_ _10"> </span>long<span class="_ _10"> </span>execution<span class="_ _10"> </span>time.<span class="_"> </span>Some</div><div class="t m5 x24 h31 y3753 ff7 fs21 fc2 sc0 ls0 ws0">early<span class="_ _11"> </span>RISC<span class="_ _11"> </span>machines<span class="_ _11"> </span>did<span class="_ _11"> </span>not<span class="_ _11"> </span>even<span class="_ _11"> </span>have<span class="_ _11"> </span>an</div><div class="t m5 x24 h31 y3754 ff7 fs21 fc2 sc0 ls0 ws0">integer<span class="_ _6"> </span>multiply<span class="_ _13"> </span>instruction,<span class="_ _6"> </span>requiring<span class="_ _6"> </span>compilers</div><div class="t m5 x24 h31 y3755 ff7 fs21 fc2 sc0 ls0 ws0">to<span class="_ _10"> </span>implement<span class="_ _10"> </span>multiplication<span class="_ _11"> </span>as<span class="_ _10"> </span>a<span class="_ _11"> </span>sequence<span class="_"> </span>of</div><div class="t m5 x24 h31 y3756 ff7 fs21 fc2 sc0 ls0 ws0">additions<span class="_ _1"></span>.</div><div class="t m5 x34 h31 y3757 ff7 fs21 fc2 sc0 ls0 ws0">V<span class="_ _7"></span>ariable-size<span class="_ _11"> </span>encodings<span class="_ _1"></span>.<span class="_"> </span>x86-64<span class="_ _11"> </span>instructions<span class="_"> </span>can</div><div class="t m5 x20b h31 y3758 ff7 fs21 fc2 sc0 ls0 ws0">range<span class="_"> </span>from<span class="_"> </span>1<span class="_"> </span>to<span class="_"> </span>15<span class="_"> </span>bytes<span class="_ _1"></span>.</div><div class="t m5 x39 h31 y3757 ff7 fs21 fc2 sc0 ls0 ws0">F<span class="_ _1"></span>ixed-length<span class="_ _10"> </span>encodings<span class="_ _0"></span>.<span class="_"> </span>T<span class="_ _3"></span>ypically<span class="_"> </span>all<span class="_"> </span>instructions</div><div class="t m5 x24 h31 y3758 ff7 fs21 fc2 sc0 ls0 ws0">are<span class="_"> </span>encoded<span class="_"> </span>as<span class="_"> </span>4<span class="_"> </span>bytes<span class="_ _1"></span>.</div></div><div class="pi" data-data='{"ctm":[2.000000,0.000000,0.000000,2.000000,0.000000,0.000000]}'></div></div>
