<div id="pf240" class="pf w2 h11" data-page-no="240"><div class="pc pc240 w2 h11"><img class="bi x0 y0 w1 h1" alt="" src="csapp/bg240.png"/><div class="t m5 x93 h28 y9b ff6 fs1f fc2 sc0 ls0 ws0">Section<span class="_ _10"> </span>5.9<span class="_ _60"> </span>Enhancing<span class="_ _10"> </span>Parallelism<span class="_ _3e"> </span><span class="ffe fs1e">575</span></div><div class="t m5 x17 h2f ye7 ffe fs16 fc6 sc0 ls0 ws0">Figure<span class="_"> </span>5.24</div><div class="t m5 x17 h2f y58a ffe fs16 fc1 sc0 ls0 ws0">Data-ﬂow<span class="_"> </span>representation</div><div class="t m5 x17 h2f y58b ffe fs16 fc1 sc0 ls0 ws0">of</div><div class="t m5 x1f5 h3a y609 ffd fs19 fc1 sc0 ls0 ws0">combine6<span class="_ _16"> </span><span class="ffe fs16">operating</span></div><div class="t m5 x17 h2f y60a ffe fs16 fc1 sc0 ls0 ws0">on<span class="_ _11"> </span>a<span class="_ _16"> </span>vector<span class="_ _11"> </span>of<span class="_ _16"> </span>length<span class="_"> </span><span class="ff11">n</span>.</div><div class="t m5 x17 h34 y2a12 ff6 fs16 fc1 sc0 ls0 ws0">W<span class="_ _1"></span>e<span class="_ _16"> </span>now<span class="_ _11"> </span>have<span class="_ _11"> </span>two<span class="_ _16"> </span>critical</div><div class="t m5 x17 h1c y2a13 ff6 fs16 fc1 sc0 ls0 ws0">paths,<span class="_ _10"> </span>each<span class="_ _11"> </span>containing<span class="_ _10"> </span><span class="ff11">n/<span class="ff7">2</span></span></div><div class="t m5 x17 h34 y2a14 ff6 fs16 fc1 sc0 ls0 ws0">operations.</div><div class="t m5 xf1 h40 y4df8 ff65 fs28 fc1 sc0 ls0 ws0">data[0]</div><div class="t m5 xf1 h40 y4df9 ff65 fs28 fc1 sc0 ls0 ws0">data[1]</div><div class="t m5 x87 h3f y4dfa ff66 fs27 fc1 sc0 ls214 ws0">load</div><div class="t m5 x9e h3f y4dfb ff66 fs27 fc1 sc0 ls214 ws0">mul</div><div class="t m5 x1b4 h3f y4dfc ff66 fs27 fc1 sc0 ls214 ws0">load</div><div class="t m5 x254 h3f y4dfd ff66 fs27 fc1 sc0 ls214 ws0">mul</div><div class="t m5 x163 h3f y4dfe ff66 fs27 fc1 sc0 ls214 ws0">add</div><div class="t m5 xf1 h40 y4dff ff65 fs28 fc1 sc0 ls0 ws0">data[2]</div><div class="t m5 xf1 h40 y4e00 ff65 fs28 fc1 sc0 ls0 ws0">data[3]</div><div class="t m5 x87 h3f y4e01 ff66 fs27 fc1 sc0 ls214 ws0">load</div><div class="t m5 x9e h3f y4e02 ff66 fs27 fc1 sc0 ls214 ws0">mul</div><div class="t m5 x1b4 h3f y4e03 ff66 fs27 fc1 sc0 ls214 ws0">load</div><div class="t m5 x254 h3f y4e04 ff66 fs27 fc1 sc0 ls214 ws0">mul</div><div class="t m5 x163 h3f y4e05 ff66 fs27 fc1 sc0 ls214 ws0">add</div><div class="t m5 xf1 h40 y4e06 ff65 fs28 fc1 sc0 ls0 ws0">data[<span class="ff67 fs27">n</span>-2]</div><div class="t m5 xf1 h40 y4e07 ff65 fs28 fc1 sc0 ls0 ws0">data[</div><div class="t m5 x157 h40 y4e08 ff67 fs27 fc1 sc0 ls0 ws0">n<span class="ff65 fs28">-1]</span></div><div class="t m5 x87 h3f y4e09 ff66 fs27 fc1 sc0 ls214 ws0">load</div><div class="t m5 x9e h3f y4e0a ff66 fs27 fc1 sc0 ls214 ws0">mul</div><div class="t m5 x1b4 h3f y4e0b ff66 fs27 fc1 sc0 ls214 ws0">load</div><div class="t m5 x254 h3f y4e0c ff66 fs27 fc1 sc0 ls214 ws0">mul</div><div class="t m5 x163 h3f y4e0d ff66 fs27 fc1 sc0 ls214 ws0">add</div><div class="t m5 x157 h3f y4e0e ff66 fs27 fc1 sc0 ls214 wsc">Critical paths</div><div class="t m5 x17 h26 ye4e ff7 fs19 fc1 sc0 ls0 ws0">one<span class="_"> </span>for<span class="_"> </span>the<span class="_"> </span>odd-numbered<span class="_ _13"> </span>elements<span class="_"> </span>(program<span class="_"> </span>value<span class="_"> </span><span class="ffd">acc1</span>).<span class="_"> </span>Each<span class="_"> </span>of<span class="_ _13"> </span>these<span class="_"> </span>critical</div><div class="t m5 x17 h46 ye4f ff7 fs19 fc1 sc0 ls0 ws0">paths<span class="_ _13"> </span>contains<span class="_ _6"> </span>only<span class="_ _13"> </span><span class="ff11">n/</span>2<span class="_ _13"> </span>operations<span class="_ _1"></span>,<span class="_ _13"> </span>thus<span class="_ _13"> </span>leading<span class="_ _6"> </span>to<span class="_ _13"> </span>a<span class="_ _13"> </span>CPE<span class="_ _6"> </span>of<span class="_ _13"> </span>around<span class="_ _13"> </span>5<span class="_ _1"></span><span class="ff11">.<span class="ff7">00</span>/<span class="ff7">2<span class="_"> </span><span class="ff12">=<span class="_ _13"></span></span>2</span>.<span class="ff7 ls24">50.</span></span></div><div class="t m5 x17 h26 ye50 ff7 fs19 fc1 sc0 ls0 ws0">A<span class="_"> </span>similar<span class="_"> </span>analysis<span class="_ _11"> </span>explains<span class="_"> </span>our<span class="_"> </span>observed<span class="_ _11"> </span>CPE<span class="_"> </span>of<span class="_ _11"> </span>around<span class="_"> </span><span class="ff11">L/</span>2<span class="_ _11"> </span>for<span class="_"> </span>operations<span class="_"> </span>with</div><div class="t m5 x17 h26 ye51 ff7 fs19 fc1 sc0 ls0 ws0">latency<span class="_ _11"> </span><span class="ff11">L<span class="_"> </span></span>for<span class="_ _16"> </span>the<span class="_ _16"> </span>different<span class="_ _16"> </span>combinations<span class="_ _11"> </span>of<span class="_ _16"> </span>data<span class="_ _16"> </span>type<span class="_ _16"> </span>and<span class="_ _16"> </span>combining<span class="_ _16"> </span>operation.</div><div class="t m5 x17 h26 ye52 ff7 fs19 fc1 sc0 ls0 ws0">Operationally<span class="_ _3"></span>,<span class="_"> </span>the<span class="_ _13"> </span>programs<span class="_"> </span>are<span class="_ _13"> </span>exploiting<span class="_"> </span>the<span class="_"> </span>capabilities<span class="_ _13"> </span>of<span class="_"> </span>the<span class="_ _13"> </span>functional<span class="_"> </span>units</div><div class="t m5 x17 h26 ye53 ff7 fs19 fc1 sc0 ls0 ws0">to<span class="_ _15"> </span>increase<span class="_ _15"> </span>their<span class="_ _21"> </span>utilization<span class="_ _15"> </span>by<span class="_ _15"> </span>a<span class="_ _21"> </span>factor<span class="_ _15"> </span>of<span class="_ _15"> </span>2.<span class="_ _21"> </span>T<span class="_ _1"></span>he<span class="_ _21"> </span>only<span class="_ _15"> </span>exception<span class="_ _15"> </span>is<span class="_ _21"> </span>for<span class="_ _15"> </span>integer</div><div class="t m5 x17 h26 ye54 ff7 fs19 fc1 sc0 ls0 ws0">addition.<span class="_"> </span>W<span class="_ _3"></span>e<span class="_"> </span>have<span class="_"> </span>reduced<span class="_"> </span>the<span class="_"> </span>CPE<span class="_"> </span>to<span class="_ _11"> </span>below<span class="_"> </span>1.0,<span class="_"> </span>but<span class="_"> </span>there<span class="_"> </span>is<span class="_"> </span>still<span class="_"> </span>too<span class="_"> </span>much<span class="_"> </span>loop</div><div class="t m5 x17 h26 ye55 ff7 fs19 fc1 sc0 ls0 ws0">overhead<span class="_"> </span>to<span class="_"> </span>achieve<span class="_"> </span>the<span class="_"> </span>theoretical<span class="_"> </span>limit<span class="_"> </span>of<span class="_"> </span>0.50.</div><div class="t m5 x26 h26 ye56 ff7 fs19 fc1 sc0 ls0 ws0">W<span class="_ _3"></span>e<span class="_ _13"> </span>can<span class="_ _13"> </span>generalize<span class="_ _13"> </span>the<span class="_ _6"> </span>multiple<span class="_ _13"> </span>accumulator<span class="_ _13"> </span>transformation<span class="_ _13"> </span>to<span class="_ _13"> </span>unroll<span class="_ _6"> </span>the<span class="_ _13"> </span>loop</div><div class="t m5 x17 h46 ye57 ff7 fs19 fc1 sc0 ls0 ws0">by<span class="_"> </span>a<span class="_"> </span>factor<span class="_ _13"> </span>of<span class="_"> </span><span class="ff11">k<span class="_ _11"> </span></span>and<span class="_"> </span>accumulate<span class="_"> </span><span class="ff11">k<span class="_ _10"> </span></span>values<span class="_"> </span>in<span class="_"> </span>parallel,<span class="_"> </span>yielding<span class="_"> </span><span class="ff11">k<span class="_ _10"> </span><span class="ff12">×<span class="_ _13"></span></span>k<span class="_ _11"> </span><span class="ffa">loop<span class="_"> </span>unrolling.</span></span></div><div class="t m5 x2c h26 ye58 ff7 fs19 fc1 sc0 ls0 ws0">F<span class="_ _1"></span>igure<span class="_ _15"> </span>5.25<span class="_ _14"> </span>demonstrates<span class="_ _14"> </span>the<span class="_ _15"> </span>effect<span class="_ _14"> </span>of<span class="_ _15"> </span>applying<span class="_ _14"> </span>this<span class="_ _14"> </span>transformation<span class="_ _15"> </span>for<span class="_ _14"> </span>values</div><div class="t m5 x17 h46 ye59 ff7 fs19 fc1 sc0 ls0 ws0">up<span class="_ _11"> </span>to<span class="_ _16"> </span><span class="ff11">k<span class="_ _10"> </span><span class="ff12">=<span class="_ _10"> </span></span></span><span class="ls20">10.<span class="_ _11"> </span>W<span class="_ _3"></span>e<span class="_ _16"> </span>can<span class="_ _11"> </span>see<span class="_ _11"> </span>that,<span class="_ _16"> </span>for<span class="_ _11"> </span>sufﬁciently<span class="_ _16"> </span>large<span class="_ _11"> </span>values<span class="_ _11"> </span>of<span class="_ _16"> </span><span class="ff11 ls0">k<span class="_ _2"></span><span class="ff7">,<span class="_ _16"> </span>the<span class="_ _11"> </span>program<span class="_ _11"> </span>can</span></span></span></div></div><div class="pi" data-data='{"ctm":[2.000000,0.000000,0.000000,2.000000,0.000000,0.000000]}'></div></div>
