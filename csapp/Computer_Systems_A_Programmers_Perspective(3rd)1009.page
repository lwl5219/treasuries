<div id="pf3f1" class="pf w2 h11" data-page-no="3f1"><div class="pc pc3f1 w2 h11"><img class="bi x0 y0 w1 h1" alt="" src="csapp/bg3f1.png"/><div class="t m5 x14 h28 y9b ffe fs1e fc2 sc0 ls0 ws0">1008<span class="_ _1b"> </span><span class="ff6 fs1f">Chapter<span class="_ _10"> </span>12<span class="_ _3d"> </span>Concurrent<span class="_ _10"> </span>Programming</span></div><div class="t m5 x1d h38 y4ac ff7 fs1b fc6 sc0 ls0 ws0">A</div><div class="t m5 x13 h26 ye7 ff7 fs19 fc1 sc0 ls0 ws0">s<span class="_ _13"> </span>we<span class="_ _13"> </span>learned<span class="_ _13"> </span>in<span class="_ _13"> </span>Chapter<span class="_ _13"> </span>8,<span class="_ _13"> </span>logical<span class="_ _13"> </span>control<span class="_ _13"> </span>ﬂows<span class="_ _13"> </span>are<span class="_ _13"> </span><span class="ffa">concurrent<span class="_"> </span></span>if<span class="_ _13"> </span>they<span class="_ _13"> </span>overlap</div><div class="t m5 x13 h26 y2a7 ff7 fs19 fc1 sc0 ls0 ws0">in<span class="_ _13"> </span>time<span class="_ _0"></span>.<span class="_ _13"> </span>T<span class="_ _1"></span>his<span class="_"> </span>general<span class="_ _13"> </span>phenomenon,<span class="_ _13"> </span>known<span class="_ _13"> </span>as<span class="_ _13"> </span><span class="ffa">concurrency</span>,<span class="_ _13"> </span>shows<span class="_ _13"> </span>up<span class="_"> </span>at<span class="_ _13"> </span>many</div><div class="t m5 x1d h26 y2a8 ff7 fs19 fc1 sc0 ls0 ws0">different<span class="_ _16"> </span>levels<span class="_ _14"> </span>of<span class="_ _16"> </span>a<span class="_ _14"> </span>computer<span class="_ _16"> </span>system.<span class="_ _14"> </span>Hardware<span class="_ _16"> </span>exception<span class="_ _14"> </span>handlers<span class="_ _1"></span>,<span class="_ _14"> </span>processes<span class="_ _1"></span>,</div><div class="t m5 x1d h26 y2f7 ff7 fs19 fc1 sc0 ls0 ws0">and<span class="_"> </span>Linux<span class="_"> </span>signal<span class="_"> </span>handlers<span class="_"> </span>are<span class="_"> </span>all<span class="_"> </span>familiar<span class="_"> </span>examples<span class="_ _1"></span>.</div><div class="t m5 x29 h26 y2f8 ff7 fs19 fc1 sc0 ls0 ws0">T<span class="_ _1"></span>hus<span class="_ _11"> </span>far,<span class="_"> </span>we<span class="_"> </span>have<span class="_"> </span>treated<span class="_"> </span>concurrency<span class="_"> </span>mainly<span class="_"> </span>as<span class="_"> </span>a<span class="_ _11"> </span>mechanism<span class="_"> </span>that<span class="_"> </span>the<span class="_ _11"> </span>oper<span class="_ _1"></span>-</div><div class="t m5 x1d h26 y2f9 ff7 fs19 fc1 sc0 ls0 ws0">ating<span class="_ _13"> </span>system<span class="_"> </span>kernel<span class="_ _13"> </span>uses<span class="_ _13"> </span>to<span class="_ _13"> </span>run<span class="_"> </span>multiple<span class="_ _13"> </span>application<span class="_ _13"> </span>programs<span class="_ _1"></span>.<span class="_ _13"> </span>But<span class="_"> </span>concurrenc<span class="_ _1"></span>y<span class="_"> </span>is</div><div class="t m5 x1d h26 y2fa ff7 fs19 fc1 sc0 ls0 ws0">not<span class="_ _13"> </span>just<span class="_ _6"> </span>limited<span class="_ _13"> </span>to<span class="_ _6"> </span>the<span class="_ _13"> </span>kernel.<span class="_ _6"> </span>It<span class="_ _13"> </span>can<span class="_ _6"> </span>play<span class="_ _13"> </span>an<span class="_ _13"> </span>important<span class="_ _6"> </span>role<span class="_ _13"> </span>in<span class="_ _6"> </span>application<span class="_ _13"> </span>programs</div><div class="t m5 x1d h26 y2fb ff7 fs19 fc1 sc0 ls0 ws0">as<span class="_"> </span>well.<span class="_"> </span>F<span class="_ _1"></span>or<span class="_ _11"> </span>example<span class="_ _1"></span>,<span class="_ _11"> </span>we<span class="_"> </span>have<span class="_ _11"> </span>seen<span class="_"> </span>how<span class="_"> </span>Linux<span class="_ _11"> </span>signal<span class="_"> </span>handlers<span class="_"> </span>allow<span class="_ _11"> </span>applications</div><div class="t m5 x1d h26 y2fc ff7 fs19 fc1 sc0 ls0 ws0">to<span class="_ _13"> </span>respond<span class="_"> </span>to<span class="_ _13"> </span>asynchronous<span class="_"> </span>events<span class="_ _13"> </span>such<span class="_"> </span>as<span class="_ _13"> </span>the<span class="_"> </span>user<span class="_ _13"> </span>typing<span class="_"> </span>Ctrl+C<span class="_ _13"> </span>or<span class="_"> </span>the<span class="_ _13"> </span>program</div><div class="t m5 x1d h26 y2fd ff7 fs19 fc1 sc0 ls0 ws0">accessing<span class="_ _11"> </span>an<span class="_ _11"> </span>undeﬁned<span class="_ _11"> </span>area<span class="_"> </span>of<span class="_ _11"> </span>virtual<span class="_ _11"> </span>memory<span class="_ _3"></span>.<span class="_ _11"> </span>Application-level<span class="_ _11"> </span>concurrency<span class="_ _11"> </span>is</div><div class="t m5 x1d h26 y2fe ff7 fs19 fc1 sc0 ls0 ws0">useful<span class="_"> </span>in<span class="_"> </span>other<span class="_"> </span>ways<span class="_"> </span>as<span class="_"> </span>well:</div><div class="t m5 x75 h3d y7ea9 ff14 fs26 fc6 sc0 ls0 ws0">.</div><div class="t m5 x29 h26 y26dd ffa fs19 fc1 sc0 ls0 ws0">Accessing<span class="_"> </span>slow<span class="_ _11"> </span>I/O<span class="_"> </span>devices<span class="_ _1"></span>.<span class="_ _13"> </span><span class="ff7">When<span class="_"> </span>an<span class="_ _11"> </span>application<span class="_ _11"> </span>is<span class="_"> </span>waiting<span class="_ _11"> </span>for<span class="_ _11"> </span>data<span class="_ _11"> </span>to<span class="_ _11"> </span>arrive</span></div><div class="t m5 x29 h26 y4345 ff7 fs19 fc1 sc0 ls0 ws0">from<span class="_ _14"> </span>a<span class="_ _15"> </span>slow<span class="_ _15"> </span>I/O<span class="_ _15"> </span>device<span class="_ _14"> </span>such<span class="_ _15"> </span>as<span class="_ _15"> </span>a<span class="_ _14"> </span>disk,<span class="_ _21"> </span>the<span class="_ _15"> </span>kernel<span class="_ _15"> </span>keeps<span class="_ _14"> </span>the<span class="_ _15"> </span>CPU<span class="_ _15"> </span>busy<span class="_ _14"> </span>by</div><div class="t m5 x29 h26 y4346 ff7 fs19 fc1 sc0 ls0 ws0">running<span class="_"> </span>other<span class="_"> </span>processes<span class="_ _3"></span>.<span class="_"> </span>Individual<span class="_"> </span>applications<span class="_ _13"> </span>can<span class="_"> </span>exploit<span class="_"> </span>concurrency<span class="_ _13"> </span>in<span class="_"> </span>a</div><div class="t m5 x29 h26 y4347 ff7 fs19 fc1 sc0 ls0 ws0">similar<span class="_"> </span>way<span class="_"> </span>by<span class="_"> </span>overlapping<span class="_"> </span>useful<span class="_"> </span>work<span class="_"> </span>with<span class="_"> </span>I/O<span class="_"> </span>requests<span class="_ _1"></span>.</div><div class="t m5 x75 h3d y7eaa ff14 fs26 fc6 sc0 ls0 ws0">.</div><div class="t m5 x29 h26 y5178 ffa fs19 fc1 sc0 ls0 ws0">Interacting<span class="_ _6"> </span>with<span class="_ _6"> </span>humans<span class="_ _1"></span>.<span class="_ _be"></span><span class="ff7">People<span class="_ _6"> </span>who<span class="_ _6"> </span>interact<span class="_ _13"> </span>with<span class="_ _a"> </span>computers<span class="_ _13"> </span>demand<span class="_ _a"> </span>the<span class="_ _13"> </span>abil-</span></div><div class="t m5 x29 h26 y5179 ff7 fs19 fc1 sc0 ls0 ws0">ity<span class="_"> </span>to<span class="_"> </span>perform<span class="_"> </span>multiple<span class="_"> </span>tasks<span class="_"> </span>at<span class="_ _13"> </span>the<span class="_"> </span>same<span class="_"> </span>time<span class="_ _0"></span>.<span class="_"> </span>F<span class="_ _1"></span>or<span class="_"> </span>example<span class="_ _1"></span>,<span class="_"> </span>they<span class="_"> </span>might<span class="_"> </span>want</div><div class="t m5 x29 h26 y517a ff7 fs19 fc1 sc0 ls0 ws0">to<span class="_ _16"> </span>resize<span class="_ _11"> </span>a<span class="_ _16"> </span>window<span class="_ _16"> </span>while<span class="_ _16"> </span>they<span class="_ _11"> </span>are<span class="_ _16"> </span>printing<span class="_ _16"> </span>a<span class="_ _16"> </span>document.<span class="_ _11"> </span>Modern<span class="_ _16"> </span>windowing</div><div class="t m5 x29 h26 y517b ff7 fs19 fc1 sc0 ls0 ws0">systems<span class="_ _6"> </span>use<span class="_ _6"> </span>concurrency<span class="_ _6"> </span>to<span class="_ _6"> </span>provide<span class="_ _6"> </span>this<span class="_ _13"> </span>capability<span class="_ _7"></span>.<span class="_ _6"> </span>Each<span class="_ _13"> </span>time<span class="_ _a"> </span>the<span class="_ _6"> </span>user<span class="_ _13"> </span>requests</div><div class="t m5 x29 h26 y517c ff7 fs19 fc1 sc0 ls0 ws0">some<span class="_ _13"> </span>action<span class="_"> </span>(say<span class="_ _7"></span>,<span class="_"> </span>by<span class="_ _13"> </span>clicking<span class="_"> </span>the<span class="_ _13"> </span>mouse),<span class="_ _13"> </span>a<span class="_"> </span>separate<span class="_ _13"> </span>concurrent<span class="_"> </span>logical<span class="_ _13"> </span>ﬂow<span class="_ _13"> </span>is</div><div class="t m5 x29 h26 y517d ff7 fs19 fc1 sc0 ls0 ws0">created<span class="_"> </span>to<span class="_"> </span>perform<span class="_"> </span>the<span class="_"> </span>action.</div><div class="t m5 x75 h3d y7eab ff14 fs26 fc6 sc0 ls0 ws0">.</div><div class="t m5 x29 h26 y47f3 ffa fs19 fc1 sc0 ls0 ws0">Reducing<span class="_"> </span>latency<span class="_"> </span>by<span class="_"> </span>deferring<span class="_"> </span>work.<span class="_ _6"> </span><span class="ff7">Sometimes<span class="_ _1"></span>,<span class="_"> </span>applications<span class="_"> </span>can<span class="_"> </span>use<span class="_"> </span>concur<span class="_ _1"></span>-</span></div><div class="t m5 x29 h26 y7eac ff7 fs19 fc1 sc0 ls0 ws0">rency<span class="_ _a"> </span>to<span class="_ _13"> </span>reduce<span class="_ _6"> </span>the<span class="_ _6"> </span>latency<span class="_ _6"> </span>of<span class="_ _6"> </span>certain<span class="_ _13"> </span>operations<span class="_ _6"> </span>by<span class="_ _6"> </span>deferring<span class="_ _13"> </span>other<span class="_ _a"> </span>operations</div><div class="t m5 x29 h26 y7ead ff7 fs19 fc1 sc0 ls0 ws0">and<span class="_"> </span>performing<span class="_ _13"> </span>them<span class="_"> </span>concurrently<span class="_ _7"></span>.<span class="_"> </span>F<span class="_ _1"></span>or<span class="_"> </span>example<span class="_ _1"></span>,<span class="_"> </span>a<span class="_ _13"> </span>dynamic<span class="_"> </span>storage<span class="_ _13"> </span>allocator</div><div class="t m5 x29 h26 y7eae ff7 fs19 fc1 sc0 ls0 ws0">might<span class="_"> </span>reduce<span class="_ _11"> </span>the<span class="_"> </span>latency<span class="_"> </span>of<span class="_"> </span>individual<span class="_ _11"> </span><span class="ffd">free<span class="_ _11"> </span></span>operations<span class="_"> </span>by<span class="_"> </span>deferring<span class="_ _11"> </span>coalesc-</div><div class="t m5 x29 h26 y7eaf ff7 fs19 fc1 sc0 ls0 ws0">ing<span class="_"> </span>to<span class="_ _13"> </span>a<span class="_"> </span>concurrent<span class="_ _13"> </span>“coalescing”<span class="_"> </span>ﬂow<span class="_"> </span>that<span class="_ _13"> </span>runs<span class="_"> </span>at<span class="_"> </span>a<span class="_ _13"> </span>lower<span class="_"> </span>priority<span class="_ _7"></span>,<span class="_"> </span>soaking<span class="_"> </span>up</div><div class="t m5 x29 h26 y7eb0 ff7 fs19 fc1 sc0 ls0 ws0">spare<span class="_"> </span>CPU<span class="_"> </span>cycles<span class="_"> </span>as<span class="_"> </span>they<span class="_"> </span>become<span class="_"> </span>available<span class="_ _1"></span>.</div><div class="t m5 x75 h3d y6bd6 ff14 fs26 fc6 sc0 ls0 ws0">.</div><div class="t m5 x29 h26 y3413 ffa fs19 fc1 sc0 ls0 ws0">Servicing<span class="_ _13"> </span>multiple<span class="_"> </span>network<span class="_ _13"> </span>clients<span class="_ _1"></span>.<span class="_ _a"> </span><span class="ff7">The<span class="_ _13"> </span>iterative<span class="_ _13"> </span>network<span class="_"> </span>servers<span class="_ _13"> </span>that<span class="_"> </span>we<span class="_ _13"> </span>stud-</span></div><div class="t m5 x29 h26 y7eb1 ff7 fs19 fc1 sc0 ls0 ws0">ied<span class="_ _11"> </span>in<span class="_ _16"> </span>Chapter<span class="_ _11"> </span>11<span class="_ _16"> </span>are<span class="_ _11"> </span>unrealistic<span class="_ _16"> </span>because<span class="_ _11"> </span>they<span class="_ _16"> </span>can<span class="_ _11"> </span>only<span class="_ _11"> </span>service<span class="_ _16"> </span>one<span class="_ _11"> </span>client<span class="_ _16"> </span>at</div><div class="t m5 x29 h26 y7eb2 ff7 fs19 fc1 sc0 ls0 ws0">a<span class="_"> </span>time<span class="_ _0"></span>.<span class="_"> </span>T<span class="_ _1"></span>hus<span class="_ _1"></span>,<span class="_ _11"> </span>a<span class="_"> </span>single<span class="_"> </span>slow<span class="_"> </span>client<span class="_"> </span>can<span class="_ _11"> </span>deny<span class="_"> </span>service<span class="_"> </span>to<span class="_"> </span>every<span class="_"> </span>other<span class="_ _11"> </span>client.<span class="_"> </span>F<span class="_ _1"></span>or<span class="_"> </span>a</div><div class="t m5 x29 h26 y7eb3 ff7 fs19 fc1 sc0 ls0 ws0">real<span class="_ _13"> </span>server<span class="_ _13"> </span>that<span class="_"> </span>might<span class="_ _13"> </span>be<span class="_ _13"> </span>expected<span class="_ _13"> </span>to<span class="_"> </span>service<span class="_ _13"> </span>hundreds<span class="_ _13"> </span>or<span class="_ _13"> </span>thousands<span class="_"> </span>of<span class="_ _13"> </span>clients</div><div class="t m5 x29 h26 y7eb4 ff7 fs19 fc1 sc0 ls0 ws0">per<span class="_"> </span>second,<span class="_ _13"> </span>it<span class="_"> </span>is<span class="_"> </span>not<span class="_"> </span>acceptable<span class="_ _13"> </span>to<span class="_"> </span>allow<span class="_"> </span>one<span class="_ _13"> </span>slow<span class="_"> </span>client<span class="_"> </span>to<span class="_ _13"> </span>deny<span class="_"> </span>service<span class="_"> </span>to<span class="_"> </span>the</div><div class="t m5 x29 h26 y7eb5 ff7 fs19 fc1 sc0 ls0 ws0">others<span class="_ _1"></span>.<span class="_ _6"> </span>A<span class="_ _13"> </span>better<span class="_ _a"> </span>approach<span class="_ _13"> </span>is<span class="_ _6"> </span>to<span class="_ _6"> </span>build<span class="_ _13"> </span>a<span class="_ _6"> </span><span class="ffa">concurrent<span class="_ _6"> </span>server<span class="_ _13"> </span></span>that<span class="_ _13"> </span>creates<span class="_ _a"> </span>a<span class="_ _13"> </span>separate</div><div class="t m5 x29 h26 y7eb6 ff7 fs19 fc1 sc0 ls0 ws0">logical<span class="_ _11"> </span>ﬂow<span class="_ _16"> </span>for<span class="_ _11"> </span>each<span class="_ _11"> </span>client.<span class="_ _16"> </span>T<span class="_ _1"></span>his<span class="_ _16"> </span>allows<span class="_ _11"> </span>the<span class="_ _16"> </span>server<span class="_ _11"> </span>to<span class="_ _11"> </span>service<span class="_ _16"> </span>multiple<span class="_ _11"> </span>clients</div><div class="t m5 x29 h26 y7eb7 ff7 fs19 fc1 sc0 ls0 ws0">concurrently<span class="_"> </span>and<span class="_"> </span>precludes<span class="_"> </span>slow<span class="_"> </span>clients<span class="_"> </span>from<span class="_"> </span>monopolizing<span class="_"> </span>the<span class="_"> </span>server.</div><div class="t m5 x75 h3d y7eb8 ff14 fs26 fc6 sc0 ls0 ws0">.</div><div class="t m5 x29 h26 y2594 ffa fs19 fc1 sc0 ls0 ws0">Computing<span class="_ _f"> </span>in<span class="_ _f"> </span>parallel<span class="_ _e"> </span>on<span class="_ _21"> </span>multi-core<span class="_ _f"> </span>machines<span class="_ _1"></span>.<span class="_ _14"> </span><span class="ff7">Many<span class="_ _f"> </span>modern<span class="_ _e"> </span>systems<span class="_ _21"> </span>are</span></div><div class="t m5 x29 h26 y7ae0 ff7 fs19 fc1 sc0 ls0 ws0">equipped<span class="_ _14"> </span>with<span class="_ _15"> </span>multi-core<span class="_ _14"> </span>processors<span class="_ _15"> </span>that<span class="_ _15"> </span>contain<span class="_ _14"> </span>multiple<span class="_ _15"> </span>CPUs<span class="_ _1"></span>.<span class="_ _15"> </span>Applica-</div><div class="t m5 x29 h26 y7ae1 ff7 fs19 fc1 sc0 ls0 ws0">tions<span class="_ _13"> </span>that<span class="_"> </span>are<span class="_ _13"> </span>partitioned<span class="_"> </span>into<span class="_ _13"> </span>concurrent<span class="_"> </span>ﬂows<span class="_ _13"> </span>often<span class="_"> </span>run<span class="_ _13"> </span>faster<span class="_ _13"> </span>on<span class="_"> </span>multi-core</div><div class="t m5 x29 h26 y7ae2 ff7 fs19 fc1 sc0 ls0 ws0">machines<span class="_ _13"> </span>than<span class="_ _6"> </span>on<span class="_ _13"> </span>uniprocessor<span class="_ _6"> </span>machines<span class="_ _13"> </span>because<span class="_ _6"> </span>the<span class="_ _13"> </span>ﬂows<span class="_ _6"> </span>execute<span class="_ _13"> </span>in<span class="_ _6"> </span>parallel</div><div class="t m5 x29 h26 y7ae3 ff7 fs19 fc1 sc0 ls0 ws0">rather<span class="_"> </span>than<span class="_"> </span>being<span class="_"> </span>interleaved.</div><div class="t m5 x29 h26 ycf2 ff7 fs19 fc1 sc0 ls0 ws0">Applications<span class="_"> </span>that<span class="_ _13"> </span>use<span class="_"> </span>application-level<span class="_"> </span>concurrency<span class="_ _13"> </span>are<span class="_"> </span>known<span class="_"> </span>as<span class="_"> </span><span class="ffa">concurrent</span></div><div class="t m5 x1d h26 ycf3 ffa fs19 fc1 sc0 ls0 ws0">programs<span class="ff7">.<span class="_ _13"> </span>Modern<span class="_ _13"> </span>operating<span class="_"> </span>systems<span class="_ _13"> </span>provide<span class="_ _13"> </span>three<span class="_ _13"> </span>basic<span class="_ _13"> </span>approaches<span class="_ _13"> </span>for<span class="_ _13"> </span>building</span></div><div class="t m5 x1d h26 ycf4 ff7 fs19 fc1 sc0 ls0 ws0">concurrent<span class="_"> </span>programs:</div></div><div class="pi" data-data='{"ctm":[2.000000,0.000000,0.000000,2.000000,0.000000,0.000000]}'></div></div>
