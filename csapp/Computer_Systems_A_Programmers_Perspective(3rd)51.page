<div id="pf33" class="pf w2 h11" data-page-no="33"><div class="pc pc33 w2 h11"><img class="bi x0 y0 w1 h1" alt="" src="csapp/bg33.png"/><div class="t m5 x14 h28 y9b ffe fs1e fc2 sc0 ls0 ws0">50<span class="_ _1b"> </span><span class="ff6 fs1f">Chapter<span class="_ _10"> </span>1<span class="_ _3d"> </span>A<span class="_ _10"> </span>T<span class="_ _3"></span>our<span class="_ _10"> </span>of<span class="_ _10"> </span>Computer<span class="_ _10"> </span>Systems</span></div><div class="t m5 xbe h3f y69f ff15 fs27 fc1 sc0 ls0 ws0">CPU registers hold words </div><div class="t m5 xbe h3f y6a0 ff15 fs27 fc1 sc0 ls0 ws0">retrieved from cache memory<span class="_ _1"></span>.</div><div class="t m5 x68 h3f y6a1 ff15 fs27 fc1 sc0 ls0 ws0">L1 cache holds cache lines </div><div class="t m5 x68 h3f y6a2 ff15 fs27 fc1 sc0 ls0 ws0">retrieved from L2 cache.</div><div class="t m5 xb8 h3f y6a3 ff15 fs27 fc1 sc0 ls0 ws0">L2 cache holds cache lines</div><div class="t m5 xb8 h3f y6a4 ff15 fs27 fc1 sc0 ls0 ws0">retrieved from L3 cache.</div><div class="t m5 xbf h3f y6a5 ff15 fs27 fc1 sc0 ls0 ws0">Main memory holds disk blocks </div><div class="t m5 xbf h3f y6a6 ff15 fs27 fc1 sc0 ls0 ws0">retrieved from local disks.</div><div class="t m5 xc0 h3f y6a7 ff15 fs27 fc1 sc0 ls0 ws0">Local disks hold files</div><div class="t m5 xc0 h3f y6a8 ff15 fs27 fc1 sc0 ls0 ws0">retrieved from disks on</div><div class="t m5 xc0 h3f y6a9 ff15 fs27 fc1 sc0 ls0 ws0">remote network server<span class="_ _1"></span>.</div><div class="t m5 x7a h3f y6aa ff15 fs27 fc1 sc0 ls0 ws0">Regs</div><div class="t m5 x59 h3f y6ab ff15 fs27 fc1 sc0 ls0 ws0">L3 cache</div><div class="t m5 xc1 h3f y6ac ff15 fs27 fc1 sc0 ls0 ws0">(SRAM)</div><div class="t m5 x59 h3f y6ad ff15 fs27 fc1 sc0 ls0 ws0">L2 cache</div><div class="t m5 xc1 h3f y6ae ff15 fs27 fc1 sc0 ls0 ws0">(SRAM)</div><div class="t m5 x59 h3f y6af ff15 fs27 fc1 sc0 ls0 ws0">L1 cache</div><div class="t m5 xc1 h3f y6b0 ff15 fs27 fc1 sc0 ls0 ws0">(SRAM)</div><div class="t m5 x78 h3f y6b1 ff15 fs27 fc1 sc0 ls0 ws0">Main memory</div><div class="t m5 xc1 h3f y6b2 ff15 fs27 fc1 sc0 ls0 ws0">(DRAM)</div><div class="t m5 xc2 h3f y6b3 ff15 fs27 fc1 sc0 ls0 ws0">Local secondary storage</div><div class="t m5 xc3 h3f y6b4 ff15 fs27 fc1 sc0 ls0 ws0">(local disks)</div><div class="t m5 xc4 h3f y6b5 ff15 fs27 fc1 sc0 ls0 ws0">Remote secondary storage</div><div class="t m5 xc5 h3f y6b6 ff15 fs27 fc1 sc0 ls0 ws0">(distributed file systems, Web servers)</div><div class="t m5 xc6 h3f y6b7 ff15 fs27 fc1 sc0 ls0 ws0">Smaller<span class="_ _1"></span>,</div><div class="t m5 xc7 h3f y6b8 ff15 fs27 fc1 sc0 ls0 ws0">faster<span class="_ _1"></span>,</div><div class="t m5 xc8 h3f y6b9 ff15 fs27 fc1 sc0 ls0 ws0">and</div><div class="t m5 xc9 h3f y6ba ff15 fs27 fc1 sc0 ls0 ws0">costlier</div><div class="t m5 x4a h3f y6bb ff15 fs27 fc1 sc0 ls0 ws0">(per byte)</div><div class="t m5 xca h3f y6bc ff15 fs27 fc1 sc0 ls0 ws0">storage</div><div class="t m5 xca h3f y6bd ff15 fs27 fc1 sc0 ls0 ws0">devices</div><div class="t m5 xca h3f y6be ff15 fs27 fc1 sc0 ls0 ws0">Larger<span class="_ _1"></span>,</div><div class="t m5 xca h3f y6bf ff15 fs27 fc1 sc0 ls0 ws0">slower<span class="_ _1"></span>,</div><div class="t m5 xcb h3f y6c0 ff15 fs27 fc1 sc0 ls0 ws0">and</div><div class="t m5 x55 h3f y6c1 ff15 fs27 fc1 sc0 ls0 ws0">cheaper</div><div class="t m5 x28 h3f y6c2 ff15 fs27 fc1 sc0 ls0 ws0">(per byte)</div><div class="t m5 xc6 h3f y6c3 ff15 fs27 fc1 sc0 ls0 ws0">storage</div><div class="t m5 xc6 h3f y6c4 ff15 fs27 fc1 sc0 ls0 ws0">devices</div><div class="t m5 xcc h3f y6c5 ff15 fs27 fc1 sc0 ls0 ws0">L0:</div><div class="t m5 xcd h3f y6c6 ff15 fs27 fc1 sc0 ls0 ws0">L1:</div><div class="t m5 xce h3f y6c7 ff15 fs27 fc1 sc0 ls0 ws0">L2:</div><div class="t m5 xcf h3f y6c8 ff15 fs27 fc1 sc0 ls0 ws0">L3:</div><div class="t m5 xd0 h3f y6c9 ff15 fs27 fc1 sc0 ls0 ws0">L4:</div><div class="t m5 xd1 h3f y6ca ff15 fs27 fc1 sc0 ls0 ws0">L5:</div><div class="t m5 x26 h3f y6cb ff15 fs27 fc1 sc0 ls0 ws0">L6:</div><div class="t m5 xd2 h3f y6cc ff15 fs27 fc1 sc0 ls0 ws0">L3 cache holds cache lines</div><div class="t m5 xd2 h3f y6cd ff15 fs27 fc1 sc0 ls0 ws0">retrieved from memory<span class="_ _1"></span>.</div><div class="t m5 x14 h2f y6ce ffe fs16 fc6 sc0 ls0 ws0">Figure<span class="_"> </span>1.9<span class="_ _c"> </span><span class="fc1">An<span class="_"> </span>example<span class="_"> </span>of<span class="_"> </span>a<span class="_"> </span>memory<span class="_"> </span>hierarchy<span class="_ _3"></span>.</span></div><div class="t m5 x1d h3b y6cf fff fs24 fc6 sc0 ls0 ws0">1.6<span class="_ _17"> </span><span class="ffe fs18">Storage<span class="_"> </span>Devices<span class="_"> </span>Form<span class="_"> </span>a<span class="_"> </span>Hierarchy</span></div><div class="t m5 x1d h26 y6d0 ff7 fs19 fc1 sc0 ls0 ws0">T<span class="_ _1"></span>his<span class="_ _f"> </span>notion<span class="_ _21"> </span>of<span class="_ _f"> </span>inserting<span class="_ _21"> </span>a<span class="_ _f"> </span>smaller,<span class="_ _f"> </span>faster<span class="_ _f"> </span>storage<span class="_ _f"> </span>device<span class="_ _21"> </span>(e.g<span class="_ _1"></span>.,<span class="_ _e"> </span>cache<span class="_ _21"> </span>memory)</div><div class="t m5 x1d h26 y6d1 ff7 fs19 fc1 sc0 ls0 ws0">between<span class="_"> </span>the<span class="_"> </span>processor<span class="_ _11"> </span>and<span class="_"> </span>a<span class="_ _11"> </span>larger,<span class="_"> </span>slower<span class="_"> </span>device<span class="_ _11"> </span>(e<span class="_ _1"></span>.g.,<span class="_"> </span>main<span class="_ _11"> </span>memory)<span class="_"> </span>turns<span class="_ _11"> </span>out</div><div class="t m5 x1d h26 y6d2 ff7 fs19 fc1 sc0 ls0 ws0">to<span class="_ _14"> </span>be<span class="_ _16"> </span>a<span class="_ _14"> </span>general<span class="_ _14"> </span>idea.<span class="_ _14"> </span>In<span class="_ _14"> </span>fact,<span class="_ _15"> </span>the<span class="_ _16"> </span>storage<span class="_ _14"> </span>devices<span class="_ _14"> </span>in<span class="_ _14"> </span>every<span class="_ _14"> </span>computer<span class="_ _14"> </span>system<span class="_ _14"> </span>are</div><div class="t m5 x1d h26 y6d3 ff7 fs19 fc1 sc0 ls0 ws0">organized<span class="_"> </span>as<span class="_"> </span>a<span class="_ _11"> </span><span class="ffa">memory<span class="_"> </span>hierarchy<span class="_"> </span></span>similar<span class="_"> </span>to<span class="_"> </span>Figure<span class="_"> </span>1.9.<span class="_"> </span>As<span class="_"> </span>we<span class="_"> </span>move<span class="_"> </span>from<span class="_ _11"> </span>the<span class="_"> </span>top</div><div class="t m5 x1d h26 y6d4 ff7 fs19 fc1 sc0 ls0 ws0">of<span class="_"> </span>the<span class="_"> </span>hierarchy<span class="_"> </span>to<span class="_"> </span>the<span class="_"> </span>bottom,<span class="_"> </span>the<span class="_"> </span>devices<span class="_"> </span>become<span class="_"> </span>slower,<span class="_"> </span>larger<span class="_ _1"></span>,<span class="_"> </span>and<span class="_"> </span>less<span class="_"> </span>costly</div><div class="t m5 x1d h26 y6d5 ff7 fs19 fc1 sc0 ls0 ws0">per<span class="_"> </span>byte.<span class="_"> </span>T<span class="_ _1"></span>he<span class="_"> </span>register<span class="_ _11"> </span>ﬁle<span class="_"> </span>occupies<span class="_ _11"> </span>the<span class="_"> </span>top<span class="_ _11"> </span>level<span class="_"> </span>in<span class="_ _11"> </span>the<span class="_"> </span>hierarchy<span class="_ _3"></span>,<span class="_ _11"> </span>which<span class="_"> </span>is<span class="_ _11"> </span>known</div><div class="t m5 x1d h26 y6d6 ff7 fs19 fc1 sc0 ls0 ws0">as<span class="_ _16"> </span>level<span class="_ _14"> </span>0<span class="_ _16"> </span>or<span class="_ _14"> </span>L0.<span class="_ _16"> </span>W<span class="_ _1"></span>e<span class="_ _16"> </span>show<span class="_ _14"> </span>three<span class="_ _16"> </span>levels<span class="_ _14"> </span>of<span class="_ _16"> </span>caching<span class="_ _14"> </span>L1<span class="_ _14"> </span>to<span class="_ _16"> </span>L3,<span class="_ _14"> </span>occupying<span class="_ _14"> </span>memory</div><div class="t m5 x1d h26 y6d7 ff7 fs19 fc1 sc0 ls0 ws0">hierarchy<span class="_"> </span>levels<span class="_"> </span>1<span class="_"> </span>to<span class="_"> </span>3.<span class="_"> </span>Main<span class="_"> </span>memory<span class="_"> </span>occupies<span class="_"> </span>level<span class="_"> </span>4,<span class="_"> </span>and<span class="_"> </span>so<span class="_"> </span>on.</div><div class="t m5 x29 h26 y6d8 ff7 fs19 fc1 sc0 ls0 ws0">T<span class="_ _1"></span>he<span class="_ _11"> </span>main<span class="_ _11"> </span>idea<span class="_ _11"> </span>of<span class="_ _11"> </span>a<span class="_ _11"> </span>memory<span class="_"> </span>hierarchy<span class="_ _11"> </span>is<span class="_ _11"> </span>that<span class="_ _11"> </span>storage<span class="_ _11"> </span>at<span class="_ _11"> </span>one<span class="_ _11"> </span>level<span class="_ _11"> </span>serves<span class="_"> </span>as<span class="_ _11"> </span>a</div><div class="t m5 x1d h26 y6d9 ff7 fs19 fc1 sc0 ls0 ws0">cache<span class="_ _11"> </span>for<span class="_ _11"> </span>storage<span class="_ _11"> </span>at<span class="_ _11"> </span>the<span class="_ _11"> </span>next<span class="_ _11"> </span>lower<span class="_ _11"> </span>level.<span class="_ _11"> </span>T<span class="_ _1"></span>hus<span class="_ _0"></span>,<span class="_ _11"> </span>the<span class="_ _11"> </span>register<span class="_ _11"> </span>ﬁle<span class="_ _11"> </span>is<span class="_ _11"> </span>a<span class="_ _11"> </span>cache<span class="_ _11"> </span>for<span class="_ _11"> </span>the</div><div class="t m5 x1d h26 y6da ff7 fs19 fc1 sc0 ls0 ws0">L1<span class="_"> </span>cache<span class="_ _1"></span>.<span class="_"> </span>Caches<span class="_"> </span>L1<span class="_"> </span>and<span class="_ _13"> </span>L2<span class="_"> </span>are<span class="_"> </span>caches<span class="_"> </span>for<span class="_"> </span>L2<span class="_ _13"> </span>and<span class="_"> </span>L3,<span class="_"> </span>respectively<span class="_ _3"></span>.<span class="_"> </span>T<span class="_ _1"></span>he<span class="_"> </span>L3<span class="_"> </span>cache</div><div class="t m5 x1d h26 y6db ff7 fs19 fc1 sc0 ls0 ws0">is<span class="_ _13"> </span>a<span class="_ _13"> </span>cache<span class="_"> </span>for<span class="_ _13"> </span>the<span class="_ _13"> </span>main<span class="_ _13"> </span>memory<span class="_ _3"></span>,<span class="_"> </span>which<span class="_ _13"> </span>is<span class="_ _13"> </span>a<span class="_ _13"> </span>cache<span class="_ _13"> </span>for<span class="_"> </span>the<span class="_ _13"> </span>disk.<span class="_ _13"> </span>On<span class="_ _13"> </span>some<span class="_"> </span>networked</div><div class="t m5 x1d h26 y6dc ff7 fs19 fc1 sc0 ls0 ws0">systems<span class="_ _6"> </span>with<span class="_ _13"> </span>distributed<span class="_ _6"> </span>ﬁle<span class="_ _6"> </span>systems<span class="_ _0"></span>,<span class="_ _13"> </span>the<span class="_ _6"> </span>local<span class="_ _6"> </span>disk<span class="_ _13"> </span>serves<span class="_ _6"> </span>as<span class="_ _6"> </span>a<span class="_ _13"> </span>cache<span class="_ _6"> </span>for<span class="_ _13"> </span>data<span class="_ _6"> </span>stored</div><div class="t m5 x1d h26 y6dd ff7 fs19 fc1 sc0 ls0 ws0">on<span class="_"> </span>the<span class="_"> </span>disks<span class="_"> </span>of<span class="_"> </span>other<span class="_"> </span>systems<span class="_ _1"></span>.</div><div class="t m5 x29 h26 y6de ff7 fs19 fc1 sc0 ls0 ws0">J<span class="_ _1"></span>ust<span class="_ _13"> </span>as<span class="_ _6"> </span>programmers<span class="_ _13"> </span>can<span class="_ _13"> </span>exploit<span class="_ _6"> </span>knowledge<span class="_ _13"> </span>of<span class="_ _6"> </span>the<span class="_ _13"> </span>different<span class="_ _13"> </span>caches<span class="_ _6"> </span>to<span class="_ _13"> </span>improve</div><div class="t m5 x1d h26 y6df ff7 fs19 fc1 sc0 ls0 ws0">performance<span class="_ _1"></span>,<span class="_"> </span>programmers<span class="_ _13"> </span>can<span class="_"> </span>exploit<span class="_ _13"> </span>their<span class="_ _13"> </span>understanding<span class="_"> </span>of<span class="_ _13"> </span>the<span class="_ _13"> </span>entire<span class="_"> </span>memory</div><div class="t m5 x1d h26 y6e0 ff7 fs19 fc1 sc0 ls0 ws0">hierarchy<span class="_ _3"></span>.<span class="_"> </span>Chapter<span class="_"> </span>6<span class="_"> </span>will<span class="_"> </span>have<span class="_"> </span>much<span class="_"> </span>more<span class="_"> </span>to<span class="_"> </span>say<span class="_"> </span>about<span class="_"> </span>this<span class="_ _1"></span>.</div><div class="t m5 x1d h3b y96 fff fs24 fc6 sc0 ls0 ws0">1.7<span class="_ _17"> </span><span class="ffe fs18">The<span class="_"> </span>Operating<span class="_"> </span>System<span class="_"> </span>Manages<span class="_"> </span>the<span class="_"> </span>Hardware</span></div><div class="t m5 x1d h26 y6e1 ff7 fs19 fc1 sc0 ls0 ws0">Back<span class="_ _11"> </span>to<span class="_ _11"> </span>our<span class="_ _16"> </span><span class="ffd">hello<span class="_ _11"> </span></span>example<span class="_ _1"></span>.<span class="_ _16"> </span>W<span class="_ _0"></span>hen<span class="_ _11"> </span>the<span class="_ _11"> </span>shell<span class="_ _11"> </span>loaded<span class="_ _16"> </span>and<span class="_ _11"> </span>ran<span class="_ _11"> </span>the<span class="_ _11"> </span><span class="ffd">hello<span class="_ _16"> </span></span>program,</div><div class="t m5 x1d h26 y6e2 ff7 fs19 fc1 sc0 ls0 ws0">and<span class="_ _11"> </span>when<span class="_ _11"> </span>the<span class="_ _16"> </span><span class="ffd">hello<span class="_ _11"> </span></span>program<span class="_ _11"> </span>printed<span class="_ _16"> </span>its<span class="_ _11"> </span>message<span class="_ _0"></span>,<span class="_ _11"> </span>neither<span class="_ _16"> </span>program<span class="_ _11"> </span>accessed<span class="_ _11"> </span>the</div></div><div class="pi" data-data='{"ctm":[2.000000,0.000000,0.000000,2.000000,0.000000,0.000000]}'></div></div>
