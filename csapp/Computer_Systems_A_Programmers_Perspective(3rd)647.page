<div id="pf287" class="pf w2 h11" data-page-no="287"><div class="pc pc287 w2 h11"><img class="bi x0 y0 w1 h1" alt="" src="csapp/bg287.png"/><div class="t m5 x14 h28 y9b ffe fs1e fc2 sc0 ls0 ws0">646<span class="_ _1b"> </span><span class="ff6 fs1f">Chapter<span class="_ _10"> </span>6<span class="_ _3d"> </span>The<span class="_ _10"> </span>Memory<span class="_ _10"> </span>Hierarchy</span></div><div class="t m5 xf4 h87 y5606 ff7e fs4c fc1 sc0 ls0 ws0">CPU registers hold words </div><div class="t m5 xf4 h87 y5607 ff7e fs4c fc1 sc0 ls0 ws0">retrieved from cache memory<span class="_ _1"></span>.</div><div class="t m5 x24f h87 y5608 ff7e fs4c fc1 sc0 ls0 ws0">L1 cache holds cache lines </div><div class="t m5 x24f h87 y5609 ff7e fs4c fc1 sc0 ls0 ws0">retrieved from L2 cache.</div><div class="t m5 x1aa h87 y560a ff7e fs4c fc1 sc0 ls0 ws0">L2 cache holds cache lines</div><div class="t m5 x1aa h87 y560b ff7e fs4c fc1 sc0 ls0 ws0">retrieved from L3 cache.</div><div class="t m5 x3b h87 y560c ff7e fs4c fc1 sc0 ls0 ws0">Main memory holds disk blocks </div><div class="t m5 x3b h87 y560d ff7e fs4c fc1 sc0 ls0 ws0">retrieved from local disks.</div><div class="t m5 x1f3 h87 y560e ff7e fs4c fc1 sc0 ls0 ws0">Local disks hold files</div><div class="t m5 x1f3 h87 y560f ff7e fs4c fc1 sc0 ls0 ws0">retrieved from disks on</div><div class="t m5 x1f3 h87 y5610 ff7e fs4c fc1 sc0 ls0 ws0">remote network servers.</div><div class="t m5 xb8 h87 y5611 ff7e fs4c fc1 sc0 ls0 ws0">Regs</div><div class="t m5 x200 h87 y5612 ff7e fs4c fc1 sc0 ls0 ws0">L3 cache</div><div class="t m5 x23d h87 y5613 ff7e fs4c fc1 sc0 ls0 ws0">(SRAM)</div><div class="t m5 x200 h87 y5614 ff7e fs4c fc1 sc0 ls0 ws0">L2 cache</div><div class="t m5 x23d h87 y5615 ff7e fs4c fc1 sc0 ls0 ws0">(SRAM)</div><div class="t m5 x200 h87 y5616 ff7e fs4c fc1 sc0 ls0 ws0">L1 cache</div><div class="t m5 x23d h87 y5617 ff7e fs4c fc1 sc0 ls0 ws0">(SRAM)</div><div class="t m5 x68 h87 y5618 ff7e fs4c fc1 sc0 ls0 ws0">Main memory</div><div class="t m5 x23d h87 y5619 ff7e fs4c fc1 sc0 ls0 ws0">(DRAM)</div><div class="t m5 x206 h87 y561a ff7e fs4c fc1 sc0 ls0 ws0">Local secondary storage</div><div class="t m5 x176 h87 y561b ff7e fs4c fc1 sc0 ls0 ws0">(local disks)</div><div class="t m5 x125 h87 y561c ff7e fs4c fc1 sc0 ls0 ws0">Remote secondary storage</div><div class="t m5 xb2 h87 y561d ff7e fs4c fc1 sc0 ls0 ws0">(distributed file systems, Web servers)</div><div class="t m5 x161 h87 y561e ff7e fs4c fc1 sc0 ls0 ws0">Smaller<span class="_ _1"></span>,</div><div class="t m5 x1ee h87 y561f ff7e fs4c fc1 sc0 ls0 ws0">faster<span class="_ _1"></span>,</div><div class="t m5 x178 h87 y5620 ff7e fs4c fc1 sc0 ls0 ws0">and</div><div class="t m5 x1cb h87 y5621 ff7e fs4c fc1 sc0 ls0 ws0">costlier</div><div class="t m5 x17e h87 y5622 ff7e fs4c fc1 sc0 ls0 ws0">(per byte)</div><div class="t m5 x140 h87 y5623 ff7e fs4c fc1 sc0 ls0 ws0">storage</div><div class="t m5 x140 h87 y5624 ff7e fs4c fc1 sc0 ls0 ws0">devices</div><div class="t m5 x140 h87 y5625 ff7e fs4c fc1 sc0 ls0 ws0">Larger<span class="_ _1"></span>,</div><div class="t m5 x140 h87 y5626 ff7e fs4c fc1 sc0 ls0 ws0">slower<span class="_ _1"></span>,</div><div class="t m5 xa6 h87 y5627 ff7e fs4c fc1 sc0 ls0 ws0">and</div><div class="t m5 x23a h87 y5628 ff7e fs4c fc1 sc0 ls0 ws0">cheaper</div><div class="t m5 x126 h87 y5629 ff7e fs4c fc1 sc0 ls0 ws0">(per byte)</div><div class="t m5 x161 h87 y562a ff7e fs4c fc1 sc0 ls0 ws0">storage</div><div class="t m5 x161 h87 y562b ff7e fs4c fc1 sc0 ls0 ws0">devices</div><div class="t m5 x186 h87 y562c ff7e fs4c fc1 sc0 ls0 ws0">L0:</div><div class="t m5 xa8 h87 y562d ff7e fs4c fc1 sc0 ls0 ws0">L1:</div><div class="t m5 x115 h87 y562e ff7e fs4c fc1 sc0 ls0 ws0">L2:</div><div class="t m5 x47 h87 y562f ff7e fs4c fc1 sc0 ls0 ws0">L3:</div><div class="t m5 x235 h87 y5630 ff7e fs4c fc1 sc0 ls0 ws0">L4:</div><div class="t m5 x15e h87 y5631 ff7e fs4c fc1 sc0 ls0 ws0">L5:</div><div class="t m5 x17f h87 y5632 ff7e fs4c fc1 sc0 ls0 ws0">L6:</div><div class="t m5 x1a1 h87 y5633 ff7e fs4c fc1 sc0 ls0 ws0">L3 cache holds cache lines</div><div class="t m5 x1a1 h87 y5634 ff7e fs4c fc1 sc0 ls0 ws0">retrieved from memory<span class="_ _1"></span>.</div><div class="t m5 x1d h2f y5635 ffe fs16 fc6 sc0 ls0 ws0">Figure<span class="_"> </span>6.21<span class="_ _66"> </span><span class="fc1">The<span class="_"> </span>memor<span class="_ _2"></span>y<span class="_"> </span>hierarchy<span class="_ _3"></span>.</span></div><div class="t m5 x1d h26 y5636 ff7 fs19 fc1 sc0 ls0 ws0">In<span class="_ _13"> </span>one<span class="_ _13"> </span>of<span class="_ _13"> </span>the<span class="_"> </span>happier<span class="_ _13"> </span>coincidences<span class="_ _13"> </span>of<span class="_ _13"> </span>computing,<span class="_ _13"> </span>these<span class="_ _13"> </span>fundamental<span class="_ _13"> </span>properties<span class="_ _13"> </span>of</div><div class="t m5 x1d h26 y5637 ff7 fs19 fc1 sc0 ls0 ws0">hardware<span class="_ _13"> </span>and<span class="_ _13"> </span>software<span class="_"> </span>complement<span class="_ _13"> </span>each<span class="_ _13"> </span>other<span class="_ _13"> </span>beautifully<span class="_ _3"></span>.<span class="_ _13"> </span>Their<span class="_ _13"> </span>complementary</div><div class="t m5 x1d h26 y5638 ff7 fs19 fc1 sc0 ls0 ws0">nature<span class="_"> </span>suggests<span class="_"> </span>an<span class="_ _13"> </span>approach<span class="_"> </span>for<span class="_"> </span>organizing<span class="_"> </span>memory<span class="_"> </span>systems<span class="_ _3"></span>,<span class="_"> </span>known<span class="_"> </span>as<span class="_"> </span>the<span class="_"> </span><span class="ffa">mem-</span></div><div class="t m5 x1d h26 y5639 ffa fs19 fc1 sc0 ls0 ws0">ory<span class="_ _16"> </span>hierarchy<span class="_ _0"></span><span class="ff7">,<span class="_ _16"> </span>that<span class="_ _16"> </span>is<span class="_ _16"> </span>used<span class="_ _16"> </span>in<span class="_ _16"> </span>all<span class="_ _16"> </span>modern<span class="_ _11"> </span>computer<span class="_ _16"> </span>systems<span class="_ _1"></span>.<span class="_ _16"> </span>Figure<span class="_ _11"> </span>6.21<span class="_ _16"> </span>shows<span class="_ _16"> </span>a</span></div><div class="t m5 x1d h26 y563a ff7 fs19 fc1 sc0 ls0 ws0">typical<span class="_"> </span>memory<span class="_"> </span>hierarchy<span class="_ _3"></span>.</div><div class="t m5 x29 h26 y563b ff7 fs19 fc1 sc0 ls0 ws0">In<span class="_ _16"> </span>general,<span class="_ _15"> </span>the<span class="_ _14"> </span>storage<span class="_ _16"> </span>devices<span class="_ _14"> </span>get<span class="_ _14"> </span>slower,<span class="_ _14"> </span>cheaper,<span class="_ _14"> </span>and<span class="_ _16"> </span>larger<span class="_ _14"> </span>as<span class="_ _14"> </span>we<span class="_ _16"> </span>move</div><div class="t m5 x1d h26 y563c ff7 fs19 fc1 sc0 ls0 ws0">from<span class="_ _11"> </span>higher<span class="_ _11"> </span>to<span class="_ _16"> </span>lower<span class="_ _11"> </span><span class="ffa">levels</span>.<span class="_ _11"> </span>At<span class="_ _16"> </span>the<span class="_ _11"> </span>highest<span class="_ _11"> </span>level<span class="_ _16"> </span>(L0)<span class="_ _11"> </span>are<span class="_ _11"> </span>a<span class="_ _11"> </span>small<span class="_ _16"> </span>number<span class="_ _11"> </span>of<span class="_ _11"> </span>fast</div><div class="t m5 x1d h26 y563d ff7 fs19 fc1 sc0 ls0 ws0">CPU<span class="_ _16"> </span>registers<span class="_ _14"> </span>that<span class="_ _16"> </span>the<span class="_ _14"> </span>CPU<span class="_ _14"> </span>can<span class="_ _16"> </span>access<span class="_ _14"> </span>in<span class="_ _16"> </span>a<span class="_ _14"> </span>single<span class="_ _14"> </span>clock<span class="_ _16"> </span>cycle<span class="_ _1"></span>.<span class="_ _14"> </span>Next<span class="_ _14"> </span>are<span class="_ _16"> </span>one<span class="_ _14"> </span>or</div><div class="t m5 x1d h26 y563e ff7 fs19 fc1 sc0 ls0 ws0">more<span class="_"> </span>small<span class="_"> </span>to<span class="_"> </span>moderate-size<span class="_ _11"> </span>SRAM-based<span class="_"> </span>cache<span class="_"> </span>memories<span class="_"> </span>that<span class="_ _11"> </span>can<span class="_"> </span>be<span class="_"> </span>accessed</div><div class="t m5 x1d h26 y563f ff7 fs19 fc1 sc0 ls0 ws0">in<span class="_ _15"> </span>a<span class="_ _15"> </span>few<span class="_ _15"> </span>CPU<span class="_ _15"> </span>clock<span class="_ _15"> </span>cycles<span class="_ _3"></span>.<span class="_ _15"> </span>These<span class="_ _14"> </span>are<span class="_ _15"> </span>followed<span class="_ _15"> </span>by<span class="_ _15"> </span>a<span class="_ _15"> </span>large<span class="_ _15"> </span>DRAM-based<span class="_ _15"> </span>main</div><div class="t m5 x1d h26 y5640 ff7 fs19 fc1 sc0 ls0 ws0">memory<span class="_ _16"> </span>that<span class="_ _11"> </span>can<span class="_ _16"> </span>be<span class="_ _16"> </span>accessed<span class="_ _16"> </span>in<span class="_ _11"> </span>tens<span class="_ _16"> </span>to<span class="_ _16"> </span>hundreds<span class="_ _16"> </span>of<span class="_ _16"> </span>clock<span class="_ _11"> </span>cycles<span class="_ _1"></span>.<span class="_ _16"> </span>Next<span class="_ _11"> </span>are<span class="_ _16"> </span>slow</div><div class="t m5 x1d h26 y5641 ff7 fs19 fc1 sc0 ls0 ws0">but<span class="_ _11"> </span>enormous<span class="_ _11"> </span>local<span class="_ _16"> </span>disks<span class="_ _3"></span>.<span class="_ _16"> </span>F<span class="_ _1"></span>inally<span class="_ _3"></span>,<span class="_ _11"> </span>some<span class="_ _16"> </span>systems<span class="_ _11"> </span>even<span class="_ _11"> </span>include<span class="_ _11"> </span>an<span class="_ _16"> </span>additional<span class="_"> </span>level</div><div class="t m5 x1d h26 y5642 ff7 fs19 fc1 sc0 ls0 ws0">of<span class="_ _14"> </span>disks<span class="_ _15"> </span>on<span class="_ _15"> </span>remote<span class="_ _15"> </span>servers<span class="_ _14"> </span>that<span class="_ _15"> </span>can<span class="_ _15"> </span>be<span class="_ _15"> </span>accessed<span class="_ _14"> </span>over<span class="_ _15"> </span>a<span class="_ _15"> </span>network.<span class="_ _15"> </span>F<span class="_ _1"></span>or<span class="_ _14"> </span>example,</div><div class="t m5 x1d h26 y5643 ff7 fs19 fc1 sc0 ls0 ws0">distributed<span class="_ _16"> </span>ﬁle<span class="_ _14"> </span>systems<span class="_ _16"> </span>such<span class="_ _16"> </span>as<span class="_ _14"> </span>the<span class="_ _16"> </span>Andrew<span class="_ _14"> </span>F<span class="_ _1"></span>ile<span class="_ _14"> </span>System<span class="_ _16"> </span>(AFS)<span class="_ _14"> </span>or<span class="_ _16"> </span>the<span class="_ _14"> </span>Network</div><div class="t m5 x1d h26 y5644 ff7 fs19 fc1 sc0 ls0 ws0">F<span class="_ _1"></span>ile<span class="_ _f"> </span>System<span class="_ _f"> </span>(NFS)<span class="_ _f"> </span>allow<span class="_ _21"> </span>a<span class="_ _f"> </span>program<span class="_ _f"> </span>to<span class="_ _f"> </span>access<span class="_ _21"> </span>ﬁles<span class="_ _f"> </span>that<span class="_ _f"> </span>are<span class="_ _f"> </span>stored<span class="_ _21"> </span>on<span class="_ _f"> </span>remote</div><div class="t m5 x1d h26 y5645 ff7 fs19 fc1 sc0 ls0 ws0">network-connected<span class="_ _16"> </span>servers<span class="_ _1"></span>.<span class="_ _14"> </span>Similarly<span class="_ _3"></span>,<span class="_ _14"> </span>the<span class="_ _14"> </span>W<span class="_ _3"></span>orld<span class="_ _14"> </span>W<span class="_ _1"></span>ide<span class="_ _14"> </span>W<span class="_ _3"></span>eb<span class="_ _14"> </span>allows<span class="_ _14"> </span>programs<span class="_ _16"> </span>to</div><div class="t m5 x1d h26 y5646 ff7 fs19 fc1 sc0 ls0 ws0">access<span class="_"> </span>remote<span class="_"> </span>ﬁles<span class="_"> </span>stored<span class="_"> </span>on<span class="_"> </span>W<span class="_ _3"></span>eb<span class="_"> </span>servers<span class="_"> </span>anywhere<span class="_"> </span>in<span class="_"> </span>the<span class="_"> </span>world.</div><div class="t m5 x1d h41 y5647 ffe fs29 fc1 sc0 ls0 ws0">6.3.1<span class="_ _48"> </span><span class="fs19">Caching<span class="_"> </span>in<span class="_"> </span>the<span class="_"> </span>Memory<span class="_"> </span>Hierarchy</span></div><div class="t m5 x1d h26 y2878 ff7 fs19 fc1 sc0 ls0 ws0">In<span class="_ _13"> </span>general,<span class="_"> </span>a<span class="_"> </span><span class="ffa">cac<span class="_ _1"></span>he<span class="_"> </span><span class="ff7">(pronounced<span class="_ _13"> </span>“cash”)<span class="_"> </span>is<span class="_ _13"> </span>a<span class="_"> </span>small,<span class="_ _13"> </span>fast<span class="_"> </span>storage<span class="_ _13"> </span>device<span class="_"> </span>that<span class="_ _13"> </span>acts<span class="_"> </span>as</span></span></div><div class="t m5 x1d h26 y2879 ff7 fs19 fc1 sc0 ls0 ws0">a<span class="_ _13"> </span>staging<span class="_"> </span>area<span class="_ _13"> </span>for<span class="_ _13"> </span>the<span class="_"> </span>data<span class="_ _13"> </span>objects<span class="_"> </span>stored<span class="_ _13"> </span>in<span class="_ _13"> </span>a<span class="_"> </span>larger<span class="_ _1"></span>,<span class="_"> </span>slower<span class="_ _13"> </span>device.<span class="_ _13"> </span>T<span class="_ _1"></span>he<span class="_"> </span>process<span class="_ _13"> </span>of</div><div class="t m5 x1d h26 y287a ff7 fs19 fc1 sc0 ls0 ws0">using<span class="_"> </span>a<span class="_"> </span>cache<span class="_"> </span>is<span class="_"> </span>known<span class="_"> </span>as<span class="_"> </span><span class="ffa">caching<span class="_"> </span></span>(pronounced<span class="_"> </span>“cashing”).</div><div class="t m5 x29 h26 y287b ff7 fs19 fc1 sc0 ls0 ws0">T<span class="_ _1"></span>he<span class="_ _6"> </span>central<span class="_ _13"> </span>idea<span class="_ _a"> </span>of<span class="_ _6"> </span>a<span class="_ _6"> </span>memory<span class="_ _6"> </span>hierarchy<span class="_ _13"> </span>is<span class="_ _a"> </span>that<span class="_ _6"> </span>for<span class="_ _6"> </span>each<span class="_ _6"> </span><span class="ff11">k<span class="_ _2"></span></span>,<span class="_ _13"> </span>the<span class="_ _a"> </span>faster<span class="_ _13"> </span>and<span class="_ _a"> </span>smaller</div><div class="t m5 x1d h26 y287c ff7 fs19 fc1 sc0 ls0 ws0">storage<span class="_ _13"> </span>device<span class="_"> </span>at<span class="_ _13"> </span>level<span class="_"> </span><span class="ff11">k<span class="_ _10"> </span></span>serves<span class="_"> </span>as<span class="_ _13"> </span>a<span class="_"> </span>cache<span class="_ _13"> </span>for<span class="_"> </span>the<span class="_ _13"> </span>larger<span class="_ _13"> </span>and<span class="_"> </span>slower<span class="_ _13"> </span>storage<span class="_"> </span>device</div></div><div class="pi" data-data='{"ctm":[2.000000,0.000000,0.000000,2.000000,0.000000,0.000000]}'></div></div>
