<div id="pf340" class="pf w2 h11" data-page-no="340"><div class="pc pc340 w2 h11"><img class="bi x0 y0 w1 h1" alt="" src="csapp/bg340.png"/><div class="t m5 x107 h28 y9b ff6 fs1f fc2 sc0 ls0 ws0">Solutions<span class="_ _10"> </span>to<span class="_ _10"> </span>Practice<span class="_ _10"> </span>Problems<span class="_ _1b"> </span><span class="ffe fs1e">831</span></div><div class="t m5 x26 h26 ye7 ff7 fs19 fc2 sc0 ls0 ws0">shell<span class="_ _13"> </span>handles<span class="_"> </span>it<span class="_ _13"> </span>immediately<span class="_"> </span>and<span class="_ _13"> </span>waits<span class="_"> </span>for<span class="_ _13"> </span>the<span class="_"> </span>next<span class="_ _13"> </span>command<span class="_"> </span>line<span class="_ _1"></span>.<span class="_ _13"> </span>Otherwise,</div><div class="t m5 x26 h26 y2a7 ff7 fs19 fc2 sc0 ls0 ws0">the<span class="_ _13"> </span>shell<span class="_ _13"> </span>assumes<span class="_ _13"> </span>that<span class="_"> </span><span class="ffd">name<span class="_ _13"> </span></span>is<span class="_ _13"> </span>an<span class="_ _13"> </span>executable<span class="_ _13"> </span>ﬁle,<span class="_ _13"> </span>which<span class="_ _13"> </span>it<span class="_ _13"> </span>loads<span class="_ _13"> </span>and<span class="_ _13"> </span>runs<span class="_"> </span>in<span class="_ _13"> </span>the</div><div class="t m5 x26 h26 y2a8 ff7 fs19 fc2 sc0 ls0 ws0">context<span class="_ _11"> </span>of<span class="_ _16"> </span>an<span class="_ _16"> </span>initial<span class="_ _11"> </span>child<span class="_ _16"> </span>process<span class="_ _11"> </span>(job).<span class="_ _16"> </span>T<span class="_ _1"></span>he<span class="_ _16"> </span>process<span class="_ _11"> </span>group<span class="_ _16"> </span>ID<span class="_ _11"> </span>for<span class="_ _16"> </span>the<span class="_ _16"> </span>job<span class="_ _11"> </span>is</div><div class="t m5 x26 h26 y2f7 ff7 fs19 fc2 sc0 ls0 ws0">identical<span class="_"> </span>to<span class="_"> </span>the<span class="_"> </span>PID<span class="_"> </span>of<span class="_"> </span>the<span class="_"> </span>child.</div><div class="t m5 x72 h3d y4689 ff14 fs26 fc6 sc0 ls0 ws0">.</div><div class="t m5 x26 h26 ye9a ff7 fs19 fc1 sc0 ls0 ws0">Each<span class="_"> </span>job<span class="_ _11"> </span>is<span class="_ _11"> </span>identiﬁed<span class="_ _11"> </span>by<span class="_ _11"> </span>either<span class="_ _11"> </span>a<span class="_ _11"> </span>process<span class="_ _11"> </span>ID<span class="_ _11"> </span>(PID)<span class="_ _11"> </span>or<span class="_ _11"> </span>a<span class="_ _11"> </span>job<span class="_ _11"> </span>ID<span class="_ _11"> </span>(JID),<span class="_ _11"> </span>which</div><div class="t m5 x26 h26 y468a ff7 fs19 fc1 sc0 ls0 ws0">is<span class="_ _13"> </span>a<span class="_"> </span>small<span class="_ _13"> </span>arbitrary<span class="_ _13"> </span>positive<span class="_"> </span>integer<span class="_ _13"> </span>assigned<span class="_ _13"> </span>by<span class="_ _13"> </span>the<span class="_"> </span>shell.<span class="_ _13"> </span>JIDs<span class="_ _13"> </span>are<span class="_"> </span>denoted<span class="_ _13"> </span>on</div><div class="t m5 x26 h26 y468b ff7 fs19 fc1 sc0 ls0 ws0">the<span class="_ _11"> </span>command<span class="_ _11"> </span>line<span class="_ _11"> </span>by<span class="_ _11"> </span>the<span class="_ _16"> </span>preﬁx<span class="_"> </span>‘<span class="ffd">%</span>’.<span class="_ _16"> </span>F<span class="_ _3"></span>or<span class="_ _16"> </span>example<span class="_ _1"></span>,<span class="_ _11"> </span>‘<span class="ffd">%5</span>’<span class="_ _16"> </span>denotes<span class="_"> </span>JID<span class="_ _16"> </span>5,<span class="_ _11"> </span>and<span class="_ _11"> </span>‘<span class="ffd">5</span>’</div><div class="t m5 x26 h26 y6b44 ff7 fs19 fc1 sc0 ls0 ws0">denotes<span class="_"> </span>PID<span class="_"> </span>5.</div><div class="t m5 x72 h3d y786 ff14 fs26 fc6 sc0 ls0 ws0">.</div><div class="t m5 x26 h26 y787 ff7 fs19 fc1 sc0 ls0 ws0">If<span class="_ _11"> </span>the<span class="_ _16"> </span>command<span class="_ _16"> </span>line<span class="_ _11"> </span>ends<span class="_ _16"> </span>with<span class="_ _11"> </span>an<span class="_ _16"> </span>ampersand,<span class="_ _16"> </span>then<span class="_ _11"> </span>the<span class="_ _16"> </span>shell<span class="_ _11"> </span>runs<span class="_ _16"> </span>the<span class="_ _11"> </span>job<span class="_ _16"> </span>in</div><div class="t m5 x26 h26 y788 ff7 fs19 fc1 sc0 ls0 ws0">the<span class="_"> </span>background.<span class="_"> </span>Otherwise<span class="_ _1"></span>,<span class="_"> </span>the<span class="_"> </span>shell<span class="_"> </span>runs<span class="_"> </span>the<span class="_"> </span>job<span class="_"> </span>in<span class="_"> </span>the<span class="_"> </span>foreground.</div><div class="t m5 x72 h3d y6425 ff14 fs26 fc6 sc0 ls0 ws0">.</div><div class="t m5 x26 h26 yea5 ff7 fs19 fc1 sc0 ls0 ws0">T<span class="_ _7"></span>yping<span class="_ _6"> </span>Ctrl+C<span class="_ _6"> </span>(Ctrl+Z)<span class="_ _6"> </span>causes<span class="_ _6"> </span>the<span class="_ _6"> </span>kernel<span class="_ _6"> </span>to<span class="_ _13"> </span>send<span class="_ _a"> </span>a<span class="_ _6"> </span>SIGINT<span class="_ _6"> </span>(SIGTSTP)<span class="_ _6"> </span>signal</div><div class="t m5 x26 h26 y6426 ff7 fs19 fc1 sc0 ls0 ws0">to<span class="_ _6"> </span>your<span class="_ _6"> </span>shell,<span class="_ _13"> </span>which<span class="_ _6"> </span>then<span class="_ _6"> </span>forwards<span class="_ _6"> </span>it<span class="_ _6"> </span>to<span class="_ _13"> </span>every<span class="_ _a"> </span>process<span class="_ _6"> </span>in<span class="_ _13"> </span>the<span class="_ _a"> </span>foreground<span class="_ _6"> </span>process</div><div class="t m5 x26 h26 y6b45 ff7 fs19 fc1 sc0 ls0 ws0">group<span class="_ _1"></span>.</div><div class="t m5 x12 h3c y6b46 ff7 fs25 fc1 sc0 ls0 ws0">2</div><div class="t m5 x72 h3d y6b47 ff14 fs26 fc6 sc0 ls0 ws0">.</div><div class="t m5 x26 h26 y6b48 ff7 fs19 fc1 sc0 lsd ws0">Th<span class="_ _2"></span>e<span class="_ _11"> </span><span class="ffd ls0">jobs<span class="_ _10"> </span><span class="ff7">built-in<span class="_"> </span>command<span class="_"> </span>lists<span class="_"> </span>all<span class="_"> </span>background<span class="_"> </span>jobs<span class="_ _1"></span>.</span></span></div><div class="t m5 x72 h3d y6b49 ff14 fs26 fc6 sc0 ls0 ws0">.</div><div class="t m5 x26 h26 y6b4a ff7 fs19 fc1 sc0 lsd ws0">Th<span class="_ _2"></span>e<span class="_ _15"> </span><span class="ffd ls0">bg<span class="_ _16"> </span><span class="ffa">job<span class="_ _16"> </span><span class="ff7">built-in<span class="_ _14"> </span>command<span class="_ _14"> </span>restarts<span class="_ _14"> </span></span>job<span class="_ _16"> </span><span class="ff7">by<span class="_ _14"> </span>sending<span class="_ _14"> </span>it<span class="_ _14"> </span>a<span class="_ _14"> </span>SIGCONT<span class="_ _14"> </span>signal</span></span></span></div><div class="t m5 x26 h26 y6b4b ff7 fs19 fc1 sc0 ls0 ws0">and<span class="_"> </span>then<span class="_"> </span>runs<span class="_"> </span>it<span class="_"> </span>in<span class="_"> </span>the<span class="_"> </span>background.<span class="_ _13"> </span>The<span class="_"> </span><span class="ffa">job<span class="_ _13"> </span></span>argument<span class="_"> </span>can<span class="_"> </span>be<span class="_"> </span>either<span class="_"> </span>a<span class="_"> </span>PID<span class="_"> </span>or</div><div class="t m5 x26 h26 y6b4c ff7 fs19 fc1 sc0 ls0 ws0">a<span class="_"> </span>JID<span class="_ _3"></span>.</div><div class="t m5 x72 h3d y6b4d ff14 fs26 fc6 sc0 ls0 ws0">.</div><div class="t m5 x26 h26 y6b4e ff7 fs19 fc1 sc0 lsd ws0">Th<span class="_ _2"></span>e<span class="_"> </span><span class="ffd ls0">fg<span class="_ _16"> </span><span class="ffa">job<span class="_ _6"> </span><span class="ff7">built-in<span class="_ _13"> </span>command<span class="_ _6"> </span>restarts<span class="_ _13"> </span></span>job<span class="_ _6"> </span><span class="ff7">by<span class="_ _13"> </span>sending<span class="_ _6"> </span>it<span class="_ _13"> </span>a<span class="_ _13"> </span>SIGCONT<span class="_ _6"> </span>signal<span class="_ _13"> </span>and</span></span></span></div><div class="t m5 x26 h26 y6b4f ff7 fs19 fc1 sc0 ls0 ws0">then<span class="_"> </span>runs<span class="_"> </span>it<span class="_"> </span>in<span class="_"> </span>the<span class="_"> </span>foreground.</div><div class="t m5 x72 h3d y6b50 ff14 fs26 fc6 sc0 ls0 ws0">.</div><div class="t m5 x26 h26 y6b51 ff7 fs19 fc1 sc0 ls0 ws0">T<span class="_ _1"></span>he<span class="_ _15"> </span>shell<span class="_ _15"> </span>reaps<span class="_ _14"> </span>all<span class="_ _15"> </span>of<span class="_ _14"> </span>its<span class="_ _15"> </span>zombie<span class="_ _15"> </span>children.<span class="_ _14"> </span>If<span class="_ _15"> </span>any<span class="_ _15"> </span>job<span class="_ _14"> </span>terminates<span class="_ _15"> </span>because<span class="_ _15"> </span>it</div><div class="t m5 x26 h26 y6b52 ff7 fs19 fc1 sc0 ls0 ws0">receives<span class="_ _16"> </span>a<span class="_ _16"> </span>signal<span class="_ _11"> </span>that<span class="_ _16"> </span>was<span class="_ _16"> </span>not<span class="_ _16"> </span>caught,<span class="_ _16"> </span>then<span class="_ _16"> </span>the<span class="_ _16"> </span>shell<span class="_ _16"> </span>prints<span class="_ _16"> </span>a<span class="_ _16"> </span>message<span class="_ _16"> </span>to<span class="_ _11"> </span>the</div><div class="t m5 x26 h26 y6b53 ff7 fs19 fc1 sc0 ls0 ws0">terminal<span class="_"> </span>with<span class="_"> </span>the<span class="_"> </span>job’s<span class="_"> </span>PID<span class="_"> </span>and<span class="_"> </span>a<span class="_"> </span>description<span class="_"> </span>of<span class="_"> </span>the<span class="_"> </span>offending<span class="_"> </span>signal.</div><div class="t m5 x17 h26 y6b54 ff7 fs19 fc1 sc0 ls0 ws0">F<span class="_ _1"></span>igure<span class="_"> </span>8.46<span class="_"> </span>shows<span class="_"> </span>an<span class="_"> </span>example<span class="_"> </span>shell<span class="_"> </span>session.</div><div class="t m5 x17 h29 y6b55 ffe fs14 fc1 sc0 ls0 ws0">Solutions<span class="_"> </span>to<span class="_"> </span>Practice<span class="_"> </span>Problems</div><div class="t m5 x17 h28 y6b56 ffe fs1e fc6 sc0 ls0 ws0">Solution<span class="_"> </span>to<span class="_"> </span>Problem<span class="_"> </span>8.1<span class="_ _e"> </span><span class="fs16">(page<span class="_"> </span>770)</span></div><div class="t m5 x17 h26 y6b57 ff7 fs19 fc1 sc0 ls0 ws0">Processes<span class="_ _14"> </span>A<span class="_ _14"> </span>and<span class="_ _15"> </span>B<span class="_ _14"> </span>are<span class="_ _14"> </span>concurrent<span class="_ _14"> </span>with<span class="_ _15"> </span>respect<span class="_ _14"> </span>to<span class="_ _14"> </span>each<span class="_ _15"> </span>other,<span class="_ _14"> </span>as<span class="_ _15"> </span>are<span class="_ _14"> </span>B<span class="_ _14"> </span>and<span class="_ _15"> </span>C<span class="_ _0"></span>,</div><div class="t m5 x17 h26 y6b58 ff7 fs19 fc1 sc0 ls0 ws0">because<span class="_ _13"> </span>their<span class="_ _13"> </span>respective<span class="_ _13"> </span>executions<span class="_ _13"> </span>overlap—that<span class="_ _13"> </span>is<span class="_ _1"></span>,<span class="_"> </span>one<span class="_ _13"> </span>process<span class="_ _13"> </span>starts<span class="_ _13"> </span>before<span class="_ _13"> </span>the</div><div class="t m5 x17 h26 y6b59 ff7 fs19 fc1 sc0 ls0 ws0">other<span class="_"> </span>ﬁnishes<span class="_ _1"></span>.<span class="_"> </span>Processes<span class="_"> </span>A<span class="_"> </span>and<span class="_ _13"> </span>C<span class="_"> </span>are<span class="_"> </span>not<span class="_"> </span>concurrent<span class="_"> </span>because<span class="_"> </span>their<span class="_"> </span>executions<span class="_"> </span>do</div><div class="t m5 x17 h26 y6b5a ff7 fs19 fc1 sc0 ls0 ws0">not<span class="_"> </span>overlap;<span class="_"> </span>A<span class="_"> </span>ﬁnishes<span class="_"> </span>before<span class="_"> </span>C<span class="_"> </span>begins<span class="_ _1"></span>.</div><div class="t m5 x17 h28 y6b5b ffe fs1e fc6 sc0 ls0 ws0">Solution<span class="_"> </span>to<span class="_"> </span>Problem<span class="_"> </span>8.2<span class="_ _e"> </span><span class="fs16">(page<span class="_"> </span>779)</span></div><div class="t m5 x17 h26 y6b5c ff7 fs19 fc1 sc0 ls0 ws0">In<span class="_"> </span>our<span class="_"> </span>example<span class="_"> </span>program<span class="_"> </span>in<span class="_"> </span>F<span class="_ _1"></span>igure<span class="_"> </span>8.15,<span class="_"> </span>the<span class="_"> </span>parent<span class="_"> </span>and<span class="_"> </span>child<span class="_"> </span>execute<span class="_"> </span>disjoint<span class="_"> </span>sets</div><div class="t m5 x17 h26 y6b5d ff7 fs19 fc1 sc0 ls0 ws0">of<span class="_ _6"> </span>instructions<span class="_ _1"></span>.<span class="_ _13"> </span>However<span class="_ _0"></span>,<span class="_ _13"> </span>in<span class="_ _6"> </span>this<span class="_ _6"> </span>program,<span class="_ _13"> </span>the<span class="_ _13"> </span>parent<span class="_ _a"> </span>and<span class="_ _13"> </span>child<span class="_ _6"> </span>execute<span class="_ _13"> </span>nondisjoint</div><div class="t m5 x17 h26 y6b5e ff7 fs19 fc1 sc0 ls0 ws0">sets<span class="_"> </span>of<span class="_"> </span>instructions<span class="_ _0"></span>,<span class="_"> </span>which<span class="_"> </span>is<span class="_ _11"> </span>possible<span class="_"> </span>because<span class="_ _11"> </span>the<span class="_"> </span>parent<span class="_ _11"> </span>and<span class="_"> </span>child<span class="_ _11"> </span>have<span class="_"> </span>identical</div><div class="t m5 x17 h26 y6b5f ff7 fs19 fc1 sc0 ls0 ws0">code<span class="_ _6"> </span>segments<span class="_ _1"></span>.<span class="_ _13"> </span>T<span class="_ _1"></span>his<span class="_ _6"> </span>can<span class="_ _13"> </span>be<span class="_ _6"> </span>a<span class="_ _13"> </span>difﬁcult<span class="_ _a"> </span>conceptual<span class="_ _13"> </span>hurdle<span class="_ _1"></span>,<span class="_ _13"> </span>so<span class="_ _6"> </span>be<span class="_ _13"> </span>sure<span class="_ _a"> </span>you<span class="_ _13"> </span>understand</div><div class="t m5 x17 h26 y6b60 ff7 fs19 fc1 sc0 ls0 ws0">the<span class="_"> </span>solution<span class="_"> </span>to<span class="_"> </span>this<span class="_"> </span>problem.<span class="_"> </span>F<span class="_ _1"></span>igure<span class="_"> </span>8.47<span class="_"> </span>shows<span class="_"> </span>the<span class="_"> </span>process<span class="_"> </span>graph.</div><div class="t m5 x17 h1d y4d53 ff7 fs17 fc2 sc0 ls0 ws0">2.<span class="_ _11"> </span>Note<span class="_ _6"> </span>that<span class="_ _6"> </span>this<span class="_ _a"> </span>is<span class="_ _6"> </span>a<span class="_ _6"> </span>simpliﬁcation<span class="_ _6"> </span>of<span class="_ _a"> </span>the<span class="_ _6"> </span>way<span class="_ _6"> </span>that<span class="_ _6"> </span>real<span class="_ _a"> </span>shells<span class="_ _6"> </span>work.<span class="_ _6"> </span>With<span class="_ _a"> </span>real<span class="_ _a"> </span>shells<span class="_ _0"></span>,<span class="_ _6"> </span>the<span class="_ _6"> </span>kernel<span class="_ _a"> </span>responds</div><div class="t m5 x17 h1d y4d54 ff7 fs17 fc2 sc0 ls0 ws0">to<span class="_ _a"> </span>Ctrl+C<span class="_ _6"> </span>(Ctrl+Z)<span class="_ _6"> </span>by<span class="_ _6"> </span>sending<span class="_ _a"> </span>SIGINT<span class="_ _6"> </span>(SIGTSTP)<span class="_ _6"> </span>directly<span class="_ _6"> </span>to<span class="_ _a"> </span>each<span class="_ _6"> </span>process<span class="_ _6"> </span>in<span class="_ _6"> </span>the<span class="_ _a"> </span>terminal<span class="_ _6"> </span>foreground</div><div class="t m5 x17 h1d y4d55 ff7 fs17 fc2 sc0 ls0 ws0">process<span class="_ _10"> </span>group<span class="_ _1"></span>.<span class="_ _10"> </span>The<span class="_ _10"> </span>shell<span class="_ _10"> </span>manages<span class="_ _10"> </span>the<span class="_"> </span>membership<span class="_ _10"> </span>of<span class="_ _10"> </span>this<span class="_ _10"> </span>group<span class="_ _10"> </span>using<span class="_ _10"> </span>the</div><div class="t m5 x19a h1d y97 ffd fs35 fc2 sc0 ls0 ws0">tcsetpgrp<span class="_ _10"> </span><span class="ff7 fs17">function,<span class="_ _10"> </span>and</span></div><div class="t m5 x17 h1d y6b61 ff7 fs17 fc2 sc0 ls0 ws0">manages<span class="_ _10"> </span>the<span class="_ _10"> </span>attributes<span class="_"> </span>of<span class="_ _10"> </span>the<span class="_ _10"> </span>terminal<span class="_ _10"> </span>using<span class="_"> </span>the</div><div class="t m5 x16d h1d y6b62 ffd fs35 fc2 sc0 ls0 ws0">tcsetattr<span class="_ _10"> </span><span class="ff7 fs17">function,<span class="_ _10"> </span>both<span class="_"> </span>of<span class="_ _10"> </span>which<span class="_ _10"> </span>are<span class="_ _10"> </span>outside<span class="_ _10"> </span>the</span></div><div class="t m5 x17 h1d y6b63 ff7 fs17 fc2 sc0 ls0 ws0">scope<span class="_"> </span>of<span class="_"> </span>this<span class="_"> </span>book.<span class="_"> </span>See<span class="_"> </span>[62]<span class="_"> </span>for<span class="_"> </span>details<span class="_ _1"></span>.</div></div><div class="pi" data-data='{"ctm":[2.000000,0.000000,0.000000,2.000000,0.000000,0.000000]}'></div></div>
