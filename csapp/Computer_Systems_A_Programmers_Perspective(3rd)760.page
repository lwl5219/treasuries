<div id="pf2f8" class="pf w2 h11" data-page-no="2f8"><div class="pc pc2f8 w2 h11"><img class="bi x0 y0 w1 h1" alt="" src="csapp/bg2f8.png"/><div class="t m5 x147 h28 y9b ff6 fs1f fc2 sc0 ls0 ws0">Section<span class="_ _10"> </span>8.1<span class="_ _60"> </span>Exceptions<span class="_ _3e"> </span><span class="ffe fs1e">759</span></div><div class="t m5 x26 h26 ye7 ff7 fs19 fc2 sc0 ls0 ws0">mechanisms<span class="_ _16"> </span>for<span class="_ _14"> </span>creating<span class="_ _16"> </span>new<span class="_ _14"> </span>processes<span class="_ _1"></span>,<span class="_ _14"> </span>waiting<span class="_ _16"> </span>for<span class="_ _14"> </span>processes<span class="_ _16"> </span>to<span class="_ _14"> </span>terminate<span class="_ _1"></span>,</div><div class="t m5 x26 h26 y2a7 ff7 fs19 fc2 sc0 ls0 ws0">notifying<span class="_ _11"> </span>other<span class="_ _16"> </span>processes<span class="_ _11"> </span>of<span class="_ _16"> </span>exceptional<span class="_ _11"> </span>events<span class="_ _16"> </span>in<span class="_ _11"> </span>the<span class="_ _16"> </span>system,<span class="_ _16"> </span>and<span class="_ _11"> </span>detecting</div><div class="t m5 x26 h26 y2a8 ff7 fs19 fc2 sc0 ls0 ws0">and<span class="_ _16"> </span>responding<span class="_ _14"> </span>to<span class="_ _14"> </span>these<span class="_ _14"> </span>events<span class="_ _1"></span>.<span class="_ _14"> </span>If<span class="_ _16"> </span>you<span class="_ _14"> </span>understand<span class="_ _14"> </span>these<span class="_ _14"> </span>ECF<span class="_ _16"> </span>mechanisms<span class="_ _0"></span>,</div><div class="t m5 x26 h26 y2f7 ff7 fs19 fc2 sc0 ls0 ws0">then<span class="_"> </span>you<span class="_ _11"> </span>can<span class="_"> </span>use<span class="_ _11"> </span>them<span class="_"> </span>to<span class="_ _11"> </span>write<span class="_"> </span>interesting<span class="_ _11"> </span>programs<span class="_"> </span>such<span class="_ _11"> </span>as<span class="_"> </span>Unix<span class="_ _11"> </span>shells<span class="_"> </span>and</div><div class="t m5 x26 h26 y2f8 ff7 fs19 fc2 sc0 ls0 ws0">W<span class="_ _3"></span>eb<span class="_"> </span>servers<span class="_ _1"></span>.</div><div class="t m5 x72 h3d y2d1b ff14 fs26 fc6 sc0 ls0 ws0">.</div><div class="t m5 x26 h26 y2d1c ffa fs19 fc1 sc0 ls0 ws0">Understanding<span class="_ _21"> </span>ECF<span class="_ _21"> </span>will<span class="_ _21"> </span>help<span class="_ _21"> </span>you<span class="_ _f"> </span>understand<span class="_ _21"> </span>concurrency<span class="_ _1"></span>.<span class="_ _16"> </span><span class="ff7">ECF<span class="_ _21"> </span>is<span class="_ _21"> </span>a<span class="_ _f"> </span>basic</span></div><div class="t m5 x26 h26 y2d1d ff7 fs19 fc1 sc0 ls0 ws0">mechanism<span class="_ _6"> </span>for<span class="_ _6"> </span>implementing<span class="_ _6"> </span>concurrency<span class="_ _6"> </span>in<span class="_ _6"> </span>computer<span class="_ _6"> </span>systems<span class="_ _1"></span>.<span class="_ _6"> </span>The<span class="_ _a"> </span>following</div><div class="t m5 x26 h26 y2d1e ff7 fs19 fc1 sc0 ls0 ws0">are<span class="_ _6"> </span>all<span class="_ _13"> </span>examples<span class="_ _6"> </span>of<span class="_ _13"> </span>concurrency<span class="_ _6"> </span>in<span class="_ _13"> </span>action:<span class="_ _6"> </span>an<span class="_ _13"> </span>exception<span class="_ _6"> </span>handler<span class="_ _13"> </span>that<span class="_ _6"> </span>interrupts</div><div class="t m5 x26 h26 y2d1f ff7 fs19 fc1 sc0 ls0 ws0">the<span class="_ _16"> </span>execution<span class="_ _16"> </span>of<span class="_ _11"> </span>an<span class="_ _16"> </span>application<span class="_ _16"> </span>program;<span class="_ _14"> </span>processes<span class="_ _16"> </span>and<span class="_ _16"> </span>threads<span class="_ _16"> </span>whose<span class="_ _16"> </span>exe-</div><div class="t m5 x26 h26 y63a1 ff7 fs19 fc1 sc0 ls0 ws0">cution<span class="_ _11"> </span>overlap<span class="_ _16"> </span>in<span class="_ _11"> </span>time;<span class="_ _16"> </span>and<span class="_ _11"> </span>a<span class="_ _16"> </span>signal<span class="_ _11"> </span>handler<span class="_ _16"> </span>that<span class="_ _11"> </span>interrupts<span class="_ _11"> </span>the<span class="_ _16"> </span>execution<span class="_ _11"> </span>of</div><div class="t m5 x26 h26 y63a2 ff7 fs19 fc1 sc0 ls0 ws0">an<span class="_ _11"> </span>application<span class="_ _11"> </span>program.<span class="_ _16"> </span>Understanding<span class="_"> </span>ECF<span class="_ _16"> </span>is<span class="_ _11"> </span>a<span class="_ _11"> </span>ﬁrst<span class="_ _11"> </span>step<span class="_ _16"> </span>to<span class="_"> </span>understanding</div><div class="t m5 x26 h26 y63a3 ff7 fs19 fc1 sc0 ls0 ws0">concurrency<span class="_ _7"></span>.<span class="_"> </span>W<span class="_ _3"></span>e<span class="_"> </span>will<span class="_"> </span>return<span class="_"> </span>to<span class="_"> </span>study<span class="_"> </span>it<span class="_"> </span>in<span class="_"> </span>more<span class="_"> </span>detail<span class="_"> </span>in<span class="_"> </span>Chapter<span class="_"> </span>12.</div><div class="t m5 x72 h3d y63a4 ff14 fs26 fc6 sc0 ls0 ws0">.</div><div class="t m5 x26 h30 y181d ffa fs19 fc1 sc0 ls0 ws0">Understanding<span class="_ _11"> </span>ECF<span class="_ _11"> </span>will<span class="_ _11"> </span>help<span class="_"> </span>you<span class="_ _11"> </span>understand<span class="_ _11"> </span>how<span class="_ _11"> </span>software<span class="_ _11"> </span>exceptions<span class="_ _11"> </span>work.</div><div class="t m5 x26 h26 y63a5 ff7 fs19 fc1 sc0 ls0 ws0">Languages<span class="_"> </span>such<span class="_ _13"> </span>as<span class="_"> </span>C++<span class="_ _13"> </span>and<span class="_"> </span>J<span class="_ _3"></span>ava<span class="_ _13"> </span>provide<span class="_"> </span>software<span class="_ _13"> </span>exception<span class="_"> </span>mechanisms<span class="_ _13"> </span>via</div><div class="t m5 x26 h26 y63a6 ffd fs19 fc1 sc0 ls0 ws0">try<span class="ff7">,<span class="_ _15"> </span></span>catch<span class="ff7">,<span class="_ _15"> </span>and<span class="_ _15"> </span></span>throw<span class="_ _14"> </span><span class="ff7">statements<span class="_ _1"></span>.<span class="_ _14"> </span>Software<span class="_ _15"> </span>exceptions<span class="_ _14"> </span>allow<span class="_ _15"> </span>the<span class="_ _14"> </span>program</span></div><div class="t m5 x26 h26 y63a7 ff7 fs19 fc1 sc0 ls0 ws0">to<span class="_ _14"> </span>make<span class="_ _14"> </span><span class="ffa">nonlocal<span class="_ _15"> </span></span>jumps<span class="_ _14"> </span>(i.e<span class="_ _0"></span>.,<span class="_ _14"> </span>jumps<span class="_ _14"> </span>that<span class="_ _14"> </span>violate<span class="_ _14"> </span>the<span class="_ _14"> </span>usual<span class="_ _14"> </span>call/return<span class="_ _14"> </span>stack</div><div class="t m5 x26 h26 y63a8 ff7 fs19 fc1 sc0 ls0 ws0">discipline)<span class="_ _21"> </span>in<span class="_ _f"> </span>response<span class="_ _21"> </span>to<span class="_ _f"> </span>error<span class="_ _f"> </span>conditions<span class="_ _1"></span>.<span class="_ _21"> </span>Nonlocal<span class="_ _f"> </span>jumps<span class="_ _f"> </span>are<span class="_ _21"> </span>a<span class="_ _f"> </span>form<span class="_ _f"> </span>of</div><div class="t m5 x26 h26 y63a9 ff7 fs19 fc1 sc0 ls0 ws0">application-level<span class="_ _15"> </span>ECF<span class="_ _15"> </span>and<span class="_ _15"> </span>are<span class="_ _15"> </span>provided<span class="_ _15"> </span>in<span class="_ _21"> </span>C<span class="_ _15"> </span>via<span class="_ _15"> </span>the<span class="_ _15"> </span><span class="ffd">setjmp<span class="_ _15"> </span></span>and<span class="_ _15"> </span><span class="ffd">longjmp</span></div><div class="t m5 x26 h26 y63aa ff7 fs19 fc1 sc0 ls0 ws0">functions<span class="_ _1"></span>.<span class="_"> </span>Understanding<span class="_ _11"> </span>these<span class="_"> </span>low-level<span class="_ _11"> </span>functions<span class="_ _11"> </span>will<span class="_"> </span>help<span class="_ _11"> </span>you<span class="_ _11"> </span>understand</div><div class="t m5 x26 h26 y63ab ff7 fs19 fc1 sc0 ls0 ws0">how<span class="_"> </span>higher<span class="_ _1"></span>-level<span class="_"> </span>software<span class="_"> </span>exceptions<span class="_"> </span>can<span class="_"> </span>be<span class="_"> </span>implemented.</div><div class="t m5 x26 h26 y63ac ff7 fs19 fc1 sc0 ls0 ws0">Up<span class="_"> </span>to<span class="_"> </span>this<span class="_"> </span>point<span class="_"> </span>in<span class="_"> </span>your<span class="_"> </span>study<span class="_"> </span>of<span class="_"> </span>systems<span class="_ _0"></span>,<span class="_"> </span>you<span class="_"> </span>have<span class="_"> </span>learned<span class="_"> </span>how<span class="_"> </span>applications</div><div class="t m5 x17 h26 y63ad ff7 fs19 fc1 sc0 ls0 ws0">interact<span class="_"> </span>with<span class="_ _13"> </span>the<span class="_"> </span>hardware<span class="_ _1"></span>.<span class="_"> </span>T<span class="_ _1"></span>his<span class="_"> </span>chapter<span class="_"> </span>is<span class="_ _13"> </span>pivotal<span class="_"> </span>in<span class="_ _13"> </span>the<span class="_"> </span>sense<span class="_"> </span>that<span class="_ _13"> </span>you<span class="_"> </span>will<span class="_ _13"> </span>begin</div><div class="t m5 x17 h26 y63ae ff7 fs19 fc1 sc0 ls0 ws0">to<span class="_ _11"> </span>learn<span class="_ _16"> </span>how<span class="_ _16"> </span>your<span class="_ _11"> </span>applications<span class="_ _16"> </span>interact<span class="_ _16"> </span>with<span class="_ _11"> </span>the<span class="_ _16"> </span>operating<span class="_ _11"> </span>system.<span class="_ _16"> </span>Interestingly<span class="_ _3"></span>,</div><div class="t m5 x17 h26 y63af ff7 fs19 fc1 sc0 ls0 ws0">these<span class="_"> </span>interactions<span class="_ _13"> </span>all<span class="_"> </span>revolve<span class="_"> </span>around<span class="_ _13"> </span>ECF<span class="_ _7"></span>.<span class="_"> </span>W<span class="_ _3"></span>e<span class="_"> </span>describe<span class="_"> </span>the<span class="_ _13"> </span>various<span class="_"> </span>forms<span class="_ _13"> </span>of<span class="_"> </span>ECF</div><div class="t m5 x17 h26 y63b0 ff7 fs19 fc1 sc0 ls0 ws0">that<span class="_"> </span>exist<span class="_ _13"> </span>at<span class="_"> </span>all<span class="_"> </span>levels<span class="_ _13"> </span>of<span class="_"> </span>a<span class="_ _13"> </span>computer<span class="_"> </span>system.<span class="_"> </span>W<span class="_ _3"></span>e<span class="_"> </span>start<span class="_ _13"> </span>with<span class="_"> </span>exceptions<span class="_ _1"></span>,<span class="_"> </span>which<span class="_ _13"> </span>lie<span class="_"> </span>at</div><div class="t m5 x17 h26 y63b1 ff7 fs19 fc1 sc0 ls0 ws0">the<span class="_ _13"> </span>intersection<span class="_ _13"> </span>of<span class="_ _13"> </span>the<span class="_ _13"> </span>hardware<span class="_ _13"> </span>and<span class="_ _13"> </span>the<span class="_"> </span>operating<span class="_ _13"> </span>system.<span class="_ _13"> </span>W<span class="_ _3"></span>e<span class="_ _13"> </span>also<span class="_ _13"> </span>discuss<span class="_ _13"> </span>system</div><div class="t m5 x17 h26 y63b2 ff7 fs19 fc1 sc0 ls0 ws0">calls<span class="_ _1"></span>,<span class="_ _15"> </span>which<span class="_ _14"> </span>are<span class="_ _15"> </span>exceptions<span class="_ _14"> </span>that<span class="_ _14"> </span>provide<span class="_ _15"> </span>applications<span class="_ _14"> </span>with<span class="_ _14"> </span>entry<span class="_ _15"> </span>points<span class="_ _14"> </span>into<span class="_ _14"> </span>the</div><div class="t m5 x17 h26 y63b3 ff7 fs19 fc1 sc0 ls0 ws0">operating<span class="_"> </span>system.<span class="_"> </span>W<span class="_ _3"></span>e<span class="_"> </span>then<span class="_"> </span>move<span class="_"> </span>up<span class="_"> </span>a<span class="_"> </span>level<span class="_"> </span>of<span class="_"> </span>abstraction<span class="_ _13"> </span>and<span class="_"> </span>describe<span class="_"> </span>processes</div><div class="t m5 x17 h26 y63b4 ff7 fs19 fc1 sc0 ls0 ws0">and<span class="_ _13"> </span>signals<span class="_ _0"></span>,<span class="_"> </span>which<span class="_ _13"> </span>lie<span class="_ _13"> </span>at<span class="_"> </span>the<span class="_ _13"> </span>intersection<span class="_"> </span>of<span class="_ _13"> </span>applications<span class="_"> </span>and<span class="_ _13"> </span>the<span class="_"> </span>operating<span class="_ _13"> </span>system.</div><div class="t m5 x17 h26 y63b5 ff7 fs19 fc1 sc0 ls0 ws0">F<span class="_ _1"></span>inally<span class="_ _3"></span>,<span class="_"> </span>we<span class="_"> </span>discuss<span class="_"> </span>nonlocal<span class="_"> </span>jumps<span class="_ _1"></span>,<span class="_"> </span>which<span class="_"> </span>are<span class="_"> </span>an<span class="_"> </span>application-level<span class="_"> </span>form<span class="_"> </span>of<span class="_"> </span>ECF<span class="_ _3"></span>.</div><div class="t m5 x17 h3b y63b6 fff fs24 fc6 sc0 ls0 ws0">8.1<span class="_ _17"> </span><span class="ffe fs18">Exceptions</span></div><div class="t m5 x17 h26 yb97 ff7 fs19 fc1 sc0 ls0 ws0">Exceptions<span class="_ _16"> </span>are<span class="_ _14"> </span>a<span class="_ _14"> </span>form<span class="_ _14"> </span>of<span class="_ _14"> </span>exceptional<span class="_ _14"> </span>control<span class="_ _14"> </span>ﬂow<span class="_ _16"> </span>that<span class="_ _14"> </span>are<span class="_ _14"> </span>implemented<span class="_ _14"> </span>partly</div><div class="t m5 x17 h26 yb98 ff7 fs19 fc1 sc0 ls0 ws0">by<span class="_ _21"> </span>the<span class="_ _21"> </span>hardware<span class="_ _21"> </span>and<span class="_ _21"> </span>partly<span class="_ _21"> </span>by<span class="_ _21"> </span>the<span class="_ _21"> </span>operating<span class="_ _21"> </span>system.<span class="_ _21"> </span>Because<span class="_ _21"> </span>they<span class="_ _21"> </span>are<span class="_ _f"> </span>partly</div><div class="t m5 x17 h26 yb99 ff7 fs19 fc1 sc0 ls0 ws0">implemented<span class="_ _11"> </span>in<span class="_ _11"> </span>hardware<span class="_ _1"></span>,<span class="_ _16"> </span>the<span class="_"> </span>details<span class="_ _11"> </span>vary<span class="_ _11"> </span>from<span class="_ _11"> </span>system<span class="_ _11"> </span>to<span class="_ _11"> </span>system.<span class="_ _11"> </span>However,<span class="_"> </span>the</div><div class="t m5 x17 h26 yb9a ff7 fs19 fc1 sc0 ls0 ws0">basic<span class="_"> </span>ideas<span class="_"> </span>are<span class="_"> </span>the<span class="_"> </span>same<span class="_"> </span>for<span class="_"> </span>every<span class="_"> </span>system.<span class="_"> </span>Our<span class="_"> </span>aim<span class="_"> </span>in<span class="_"> </span>this<span class="_"> </span>section<span class="_"> </span>is<span class="_"> </span>to<span class="_"> </span>give<span class="_"> </span>you<span class="_"> </span>a</div><div class="t m5 x17 h26 yb9b ff7 fs19 fc1 sc0 ls0 ws0">general<span class="_ _6"> </span>understanding<span class="_ _6"> </span>of<span class="_ _13"> </span>exceptions<span class="_ _a"> </span>and<span class="_ _13"> </span>exception<span class="_ _a"> </span>handling<span class="_ _13"> </span>and<span class="_ _a"> </span>to<span class="_ _13"> </span>help<span class="_ _6"> </span>demystify</div><div class="t m5 x17 h26 yb9c ff7 fs19 fc1 sc0 ls0 ws0">what<span class="_"> </span>is<span class="_"> </span>often<span class="_"> </span>a<span class="_"> </span>confusing<span class="_"> </span>aspect<span class="_"> </span>of<span class="_"> </span>modern<span class="_"> </span>computer<span class="_"> </span>systems<span class="_ _1"></span>.</div><div class="t m5 x26 h26 yb9d ff7 fs19 fc1 sc0 ls0 ws0">An<span class="_ _15"> </span><span class="ffa">exception<span class="_ _14"> </span></span>is<span class="_ _15"> </span>an<span class="_ _21"> </span>abrupt<span class="_ _15"> </span>change<span class="_ _15"> </span>in<span class="_ _15"> </span>the<span class="_ _15"> </span>control<span class="_ _15"> </span>ﬂow<span class="_ _15"> </span>in<span class="_ _15"> </span>response<span class="_ _15"> </span>to<span class="_ _15"> </span>some</div><div class="t m5 x17 h26 yb9e ff7 fs19 fc1 sc0 ls0 ws0">change<span class="_"> </span>in<span class="_"> </span>the<span class="_"> </span>processor’s<span class="_"> </span>state<span class="_ _1"></span>.<span class="_"> </span>F<span class="_ _1"></span>igure<span class="_"> </span>8.1<span class="_"> </span>shows<span class="_"> </span>the<span class="_"> </span>basic<span class="_"> </span>idea.</div><div class="t m5 x26 h26 yb9f ff7 fs19 fc1 sc0 ls0 ws0">In<span class="_"> </span>the<span class="_ _13"> </span>ﬁgure,<span class="_ _13"> </span>the<span class="_"> </span>processor<span class="_"> </span>is<span class="_"> </span>executing<span class="_ _13"> </span>some<span class="_"> </span>current<span class="_"> </span>instruction<span class="_ _13"> </span><span class="ff11">I</span></div><div class="t m5 x1c3 h3c y21ff ff7 fs25 fc1 sc0 ls0 ws0">curr</div><div class="t m5 x1f3 h26 y8d6 ff7 fs19 fc1 sc0 ls0 ws0">when<span class="_"> </span>a</div><div class="t m5 x17 h26 y8d7 ff7 fs19 fc1 sc0 ls0 ws0">signiﬁcant<span class="_ _11"> </span>change<span class="_ _11"> </span>in<span class="_ _11"> </span>the<span class="_ _11"> </span>processor’s<span class="_ _11"> </span><span class="ffa">state<span class="_ _11"> </span></span>occurs<span class="_ _1"></span>.<span class="_ _11"> </span>The<span class="_"> </span>state<span class="_ _11"> </span>is<span class="_ _11"> </span>encoded<span class="_ _16"> </span>in<span class="_"> </span>various</div><div class="t m5 x17 h26 y8d8 ff7 fs19 fc1 sc0 ls0 ws0">bits<span class="_ _16"> </span>and<span class="_ _14"> </span>signals<span class="_ _14"> </span>inside<span class="_ _16"> </span>the<span class="_ _14"> </span>processor.<span class="_ _16"> </span>T<span class="_ _0"></span>he<span class="_ _16"> </span>change<span class="_ _14"> </span>in<span class="_ _14"> </span>state<span class="_ _16"> </span>is<span class="_ _14"> </span>known<span class="_ _14"> </span>as<span class="_ _16"> </span>an<span class="_ _14"> </span><span class="ffa">event<span class="_ _2"></span></span>.</div></div><div class="pi" data-data='{"ctm":[2.000000,0.000000,0.000000,2.000000,0.000000,0.000000]}'></div></div>
