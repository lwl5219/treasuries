<div id="pf41f" class="pf w2 h11" data-page-no="41f"><div class="pc pc41f w2 h11"><img class="bi x0 y0 w1 h1" alt="" src="csapp/bg41f.png"/><div class="t m5 x14 h28 y9b ffe fs1e fc2 sc0 ls0 ws0">1054<span class="_ _1b"> </span><span class="ff6 fs1f">Chapter<span class="_ _10"> </span>12<span class="_ _3d"> </span>Concurrent<span class="_ _10"> </span>Programming</span></div><div class="t m5 x14 h2f ye7 ffe fs16 fc6 sc0 ls0 ws0">Figure<span class="_"> </span>12.35</div><div class="t m5 x14 h2f y58a ffe fs16 fc1 sc0 ls0 ws0">Performance<span class="_ _16"> </span>of</div><div class="t m5 x22a h3a y608 ffd fs19 fc1 sc0 ls0 ws0">psum-</div><div class="t m5 x14 h3a y833f ffd fs19 fc1 sc0 ls0 ws0">local</div><div class="t m5 x2c h2f y609 ffe fs16 fc1 sc0 ls0 ws0">(Figure<span class="_ _16"> </span>12.34).</div><div class="t m5 x14 h34 y60a ff6 fs16 fc1 sc0 ls0 ws0">Summing<span class="_ _16"> </span>a<span class="_ _11"> </span>sequence<span class="_ _16"> </span>of</div><div class="t m5 x14 h1c y2a12 ff7 fs16 fc1 sc0 ls0 ws0">2</div><div class="t m5 xb h5d y1322 ff7 fs32 fc1 sc0 ls0 ws0">31</div><div class="t m5 x28a h34 y1323 ff6 fs16 fc1 sc0 ls0 ws0">elements<span class="_ _16"> </span>using<span class="_ _16"> </span>four</div><div class="t m5 x14 h34 y1324 ff6 fs16 fc1 sc0 ls0 ws0">processor<span class="_ _10"> </span>cores.</div><div class="t m5 x25 h3f y8340 fff0 fs27 fc1 sc0 ls2fa ws0">1.2</div><div class="t m5 x25 h3f y8341 fff0 fs27 fc1 sc0 ls2fa ws0">1.0</div><div class="t m5 x25 h3f y8342 fff0 fs27 fc1 sc0 ls2fa ws0">0.8</div><div class="t m5 x25 h3f y8343 fff0 fs27 fc1 sc0 ls2fa ws0">0.6</div><div class="t m5 x25 h3f y8344 fff0 fs27 fc1 sc0 ls2fa ws0">0.4</div><div class="t m5 x25 h3f y8345 fff0 fs27 fc1 sc0 ls2fa ws0">0.2</div><div class="t m5 x1ba h3f y8346 fff0 fs27 fc1 sc0 ls0 ws0">0</div><div class="t m5 x228 h3f y8347 fff0 fs27 fc1 sc0 ls0 ws0">1</div><div class="t m5 x1e6 h3f y8348 fff0 fs27 fc1 sc0 ls1c6 ws0">1.06</div><div class="t m5 x82 h3f y8349 ffdf fs27 fc1 sc0 ls2fb ws0">Threads</div><div class="t m7 x129 h3f y834a ffdf fs27 fc1 sc0 ls2fc ws0">Elapsed time (s)</div><div class="t m5 x179 h3f y834b fff0 fs27 fc1 sc0 ls0 ws0">2</div><div class="t m5 x16 h3f y834c fff0 fs27 fc1 sc0 ls1c6 ws0">0.54</div><div class="t m5 x1fb h3f y834b fff0 fs27 fc1 sc0 ls0 ws0">4</div><div class="t m5 x7e h3f y834d fff0 fs27 fc1 sc0 ls1c6 ws0">0.28</div><div class="t m5 xa h3f y834e fff0 fs27 fc1 sc0 ls1c6 ws0">0.29</div><div class="t m5 x11c h3f y834b fff0 fs27 fc1 sc0 ls2fd ws0">81<span class="_ _120"></span>6</div><div class="t m5 x11d h3f y834e fff0 fs27 fc1 sc0 ls1c6 ws0">0.3</div><div class="t m5 x29 h26 y834f ff7 fs19 fc1 sc0 ls0 ws0">An<span class="_ _16"> </span>important<span class="_ _16"> </span>lesson<span class="_ _11"> </span>to<span class="_ _16"> </span>take<span class="_ _16"> </span>away<span class="_ _16"> </span>from<span class="_ _16"> </span>this<span class="_ _16"> </span>exercise<span class="_ _11"> </span>is<span class="_ _16"> </span>that<span class="_ _16"> </span>writing<span class="_ _16"> </span>parallel</div><div class="t m5 x1d h26 y8350 ff7 fs19 fc1 sc0 ls0 ws0">programs<span class="_"> </span>is<span class="_"> </span>tricky<span class="_ _7"></span>.<span class="_"> </span>Seemingly<span class="_"> </span>small<span class="_"> </span>changes<span class="_"> </span>to<span class="_"> </span>the<span class="_ _13"> </span>code<span class="_"> </span>have<span class="_"> </span>a<span class="_"> </span>signiﬁcant<span class="_"> </span>impact</div><div class="t m5 x1d h26 y8351 ff7 fs19 fc1 sc0 ls0 ws0">on<span class="_"> </span>performance<span class="_ _1"></span>.</div><div class="t m5 x1d h42 y8352 ff6 fs29 fc6 sc0 ls0 ws0">Characterizing<span class="_ _11"> </span>the<span class="_ _16"> </span>Performance<span class="_ _16"> </span>of<span class="_ _16"> </span>Parallel<span class="_ _11"> </span>Programs</div><div class="t m5 x1d h26 y8353 ff7 fs19 fc1 sc0 ls0 ws0">F<span class="_ _1"></span>igure<span class="_ _16"> </span>12.35<span class="_ _11"> </span>plots<span class="_ _16"> </span>the<span class="_ _11"> </span>total<span class="_ _16"> </span>elapsed<span class="_ _11"> </span>running<span class="_ _16"> </span>time<span class="_ _11"> </span>of<span class="_ _16"> </span>the<span class="_ _16"> </span><span class="ffd">psum-local<span class="_ _11"> </span></span>program<span class="_ _16"> </span>in</div><div class="t m5 x1d h26 y8354 ff7 fs19 fc1 sc0 ls0 ws0">F<span class="_ _1"></span>igure<span class="_ _14"> </span>12.34<span class="_ _16"> </span>as<span class="_ _14"> </span>a<span class="_ _14"> </span>function<span class="_ _16"> </span>of<span class="_ _14"> </span>the<span class="_ _16"> </span>number<span class="_ _14"> </span>of<span class="_ _16"> </span>threads<span class="_ _0"></span>.<span class="_ _16"> </span>In<span class="_ _14"> </span>each<span class="_ _16"> </span>case,<span class="_ _16"> </span>the<span class="_ _14"> </span>program</div><div class="t m5 x1d h46 y8355 ff7 fs19 fc1 sc0 ls0 ws0">runs<span class="_ _16"> </span>on<span class="_ _16"> </span>a<span class="_ _16"> </span>system<span class="_ _16"> </span>with<span class="_ _16"> </span>four<span class="_ _16"> </span>processor<span class="_ _11"> </span>cores<span class="_ _16"> </span>and<span class="_ _16"> </span>sums<span class="_ _16"> </span>a<span class="_ _16"> </span>sequence<span class="_ _16"> </span>of<span class="_ _16"> </span><span class="ff11">n<span class="_ _10"> </span><span class="ff12">=<span class="_ _13"> </span></span></span>2</div><div class="t m5 x1e h3c y8356 ff7 fs25 fc1 sc0 ls0 ws0">31</div><div class="t m5 x260 h26 y8357 ff7 fs19 fc1 sc0 ls0 ws0">ele-</div><div class="t m5 x1d h26 y8358 ff7 fs19 fc1 sc0 ls0 ws0">ments<span class="_ _1"></span>.<span class="_"> </span>W<span class="_ _3"></span>e<span class="_"> </span>see<span class="_"> </span>that<span class="_"> </span>running<span class="_"> </span>time<span class="_"> </span>decreases<span class="_"> </span>as<span class="_"> </span>we<span class="_"> </span>increase<span class="_"> </span>the<span class="_ _13"> </span>number<span class="_"> </span>of<span class="_"> </span>threads<span class="_ _1"></span>,</div><div class="t m5 x1d h26 y8359 ff7 fs19 fc1 sc0 ls0 ws0">up<span class="_ _f"> </span>to<span class="_ _e"> </span>four<span class="_ _21"> </span>threads<span class="_ _1"></span>,<span class="_ _1f"> </span>at<span class="_ _f"> </span>which<span class="_ _e"> </span>point<span class="_ _21"> </span>it<span class="_ _e"> </span>levels<span class="_ _21"> </span>off<span class="_ _e"> </span>and<span class="_ _f"> </span>even<span class="_ _f"> </span>starts<span class="_ _e"> </span>to<span class="_ _21"> </span>increase<span class="_ _e"> </span>a</div><div class="t m5 x1d h26 y835a ff7 fs19 fc1 sc0 ls0 ws0">little<span class="_ _1"></span>.</div><div class="t m5 x29 h26 y835b ff7 fs19 fc1 sc0 ls0 ws0">In<span class="_"> </span>the<span class="_"> </span>ideal<span class="_"> </span>case<span class="_ _1"></span>,<span class="_"> </span>we<span class="_"> </span>would<span class="_"> </span>expect<span class="_"> </span>the<span class="_"> </span>running<span class="_"> </span>time<span class="_"> </span>to<span class="_"> </span>decrease<span class="_"> </span>linearly<span class="_"> </span>with</div><div class="t m5 x1d h26 y835c ff7 fs19 fc1 sc0 ls0 ws0">the<span class="_"> </span>number<span class="_ _11"> </span>of<span class="_ _11"> </span>cores<span class="_ _1"></span>.<span class="_ _11"> </span>T<span class="_ _1"></span>hat<span class="_ _11"> </span>is<span class="_ _1"></span>,<span class="_ _11"> </span>we<span class="_ _11"> </span>would<span class="_ _11"> </span>expect<span class="_"> </span>running<span class="_ _11"> </span>time<span class="_ _11"> </span>to<span class="_ _11"> </span>drop<span class="_ _11"> </span>by<span class="_"> </span>half<span class="_ _11"> </span>each</div><div class="t m5 x1d h26 y835d ff7 fs19 fc1 sc0 ls0 ws0">time<span class="_ _15"> </span>we<span class="_ _15"> </span>double<span class="_ _15"> </span>the<span class="_ _15"> </span>number<span class="_ _15"> </span>of<span class="_ _15"> </span>threads<span class="_ _1"></span>.<span class="_ _15"> </span>T<span class="_ _0"></span>his<span class="_ _15"> </span>is<span class="_ _15"> </span>indeed<span class="_ _15"> </span>the<span class="_ _15"> </span>case<span class="_ _15"> </span>until<span class="_ _15"> </span>we<span class="_ _15"> </span>reach</div><div class="t m5 x1d h26 y835e ff7 fs19 fc1 sc0 ls0 ws0">the<span class="_"> </span>point<span class="_"> </span>(<span class="ff11 ls2fe">t&gt;<span class="_ _7"></span><span class="ff7 ls20">4)<span class="_"> </span>where<span class="_"> </span>each<span class="_"> </span>of<span class="_"> </span>the<span class="_ _13"> </span>four<span class="_"> </span>cores<span class="_"> </span>is<span class="_"> </span>busy<span class="_"> </span>running<span class="_ _13"> </span>at<span class="_"> </span>least<span class="_"> </span>one<span class="_"> </span>thread.</span></span></div><div class="t m5 x1d h26 y835f ff7 fs19 fc1 sc0 ls0 ws0">Running<span class="_ _6"> </span>time<span class="_ _6"> </span>actually<span class="_ _6"> </span>increases<span class="_ _13"> </span>a<span class="_ _a"> </span>bit<span class="_ _13"> </span>as<span class="_ _a"> </span>we<span class="_ _6"> </span>increase<span class="_ _13"> </span>the<span class="_ _a"> </span>number<span class="_ _13"> </span>of<span class="_ _a"> </span>threads<span class="_ _6"> </span>because</div><div class="t m5 x1d h26 y8360 ff7 fs19 fc1 sc0 ls0 ws0">of<span class="_"> </span>the<span class="_ _11"> </span>overhead<span class="_ _11"> </span>of<span class="_ _11"> </span>context<span class="_ _11"> </span>switching<span class="_ _11"> </span>multiple<span class="_ _11"> </span>threads<span class="_ _11"> </span>on<span class="_ _11"> </span>the<span class="_ _11"> </span>same<span class="_ _11"> </span>core<span class="_ _0"></span>.<span class="_ _11"> </span>F<span class="_ _1"></span>or<span class="_ _11"> </span>this</div><div class="t m5 x1d h26 y8361 ff7 fs19 fc1 sc0 ls0 ws0">reason,<span class="_ _15"> </span>parallel<span class="_ _15"> </span>programs<span class="_ _14"> </span>are<span class="_ _15"> </span>often<span class="_ _15"> </span>written<span class="_ _14"> </span>so<span class="_ _15"> </span>that<span class="_ _14"> </span>each<span class="_ _15"> </span>core<span class="_ _14"> </span>runs<span class="_ _15"> </span>exactly<span class="_ _15"> </span>one</div><div class="t m5 x1d h26 y8362 ff7 fs19 fc1 sc0 ls0 ws0">thread.</div><div class="t m5 x29 h26 y8363 ff7 fs19 fc1 sc0 ls0 ws0">Although<span class="_ _14"> </span>absolute<span class="_ _15"> </span>running<span class="_ _15"> </span>time<span class="_ _15"> </span>is<span class="_ _14"> </span>the<span class="_ _15"> </span>ultimate<span class="_ _15"> </span>measure<span class="_ _15"> </span>of<span class="_ _14"> </span>any<span class="_ _15"> </span>program’s</div><div class="t m5 x1d h26 y8364 ff7 fs19 fc1 sc0 ls0 ws0">performance<span class="_ _1"></span>,<span class="_ _21"> </span>there<span class="_ _15"> </span>are<span class="_ _15"> </span>some<span class="_ _14"> </span>useful<span class="_ _15"> </span>relative<span class="_ _15"> </span>measures<span class="_ _14"> </span>that<span class="_ _15"> </span>can<span class="_ _15"> </span>provide<span class="_ _15"> </span>insight</div><div class="t m5 x1d h26 y8365 ff7 fs19 fc1 sc0 ls0 ws0">into<span class="_"> </span>how<span class="_"> </span>well<span class="_ _11"> </span>a<span class="_"> </span>parallel<span class="_"> </span>program<span class="_ _11"> </span>is<span class="_"> </span>exploiting<span class="_ _11"> </span>potential<span class="_"> </span>parallelism.<span class="_"> </span>The<span class="_"> </span><span class="ffa">speedup</span></div><div class="t m5 x1d h26 y8366 ff7 fs19 fc1 sc0 ls0 ws0">of<span class="_"> </span>a<span class="_"> </span>parallel<span class="_"> </span>program<span class="_"> </span>is<span class="_"> </span>typically<span class="_"> </span>deﬁned<span class="_"> </span>as</div><div class="t m5 xfd h45 y8367 ff11 fs19 fc1 sc0 ls0 ws0">S</div><div class="t m5 x131 h50 y8368 ff11 fs25 fc1 sc0 ls0 ws0">p</div><div class="t m5 x17a h46 y8369 ff12 fs19 fc1 sc0 ls0 ws0">=</div><div class="t m5 x7e h45 y836a ff11 fs19 fc1 sc0 ls0 ws0">T</div><div class="t m5 x1c9 h3c y836b ff7 fs25 fc1 sc0 ls0 ws0">1</div><div class="t m5 x1e2 h45 y836c ff11 fs19 fc1 sc0 ls0 ws0">T</div><div class="t m5 xf5 h50 y836d ff11 fs25 fc1 sc0 ls0 ws0">p</div><div class="t m5 x1d h26 y77e ff7 fs19 fc1 sc0 ls0 ws0">where<span class="_ _6"> </span><span class="ff11">p<span class="_ _13"> </span></span>is<span class="_ _13"> </span>the<span class="_ _a"> </span>number<span class="_ _13"> </span>of<span class="_ _6"> </span>processor<span class="_ _6"> </span>cores<span class="_ _13"> </span>and<span class="_ _6"> </span><span class="ff11">T</span></div><div class="t m5 xfe h50 y197d ff11 fs25 fc1 sc0 ls0 ws0">k</div><div class="t m5 x194 h26 y77e ff7 fs19 fc1 sc0 ls0 ws0">is<span class="_ _6"> </span>the<span class="_ _13"> </span>running<span class="_ _a"> </span>time<span class="_ _13"> </span>on<span class="_ _6"> </span><span class="ff11">k<span class="_ _13"> </span></span>cores<span class="_ _1"></span>.<span class="_ _13"> </span>T<span class="_ _1"></span>his</div><div class="t m5 x1d h26 y77f ff7 fs19 fc1 sc0 ls0 ws0">formulation<span class="_ _11"> </span>is<span class="_ _11"> </span>sometimes<span class="_ _11"> </span>referred<span class="_ _11"> </span>to<span class="_ _11"> </span>as<span class="_ _11"> </span><span class="ffa">strong<span class="_ _11"> </span>scaling<span class="_ _2"></span></span>.<span class="_ _11"> </span>When<span class="_ _11"> </span><span class="ff11">T</span></div><div class="t m5 x1e9 h3c y1574 ff7 fs25 fc1 sc0 ls0 ws0">1</div><div class="t m5 x1f1 h26 ye95 ff7 fs19 fc1 sc0 ls0 ws0">is<span class="_ _11"> </span>the<span class="_ _11"> </span>execution</div></div><div class="pi" data-data='{"ctm":[2.000000,0.000000,0.000000,2.000000,0.000000,0.000000]}'></div></div>
