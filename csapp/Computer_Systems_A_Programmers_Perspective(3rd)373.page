<div id="pf175" class="pf w2 h11" data-page-no="175"><div class="pc pc175 w2 h11"><img class="bi x0 y0 w1 h1" alt="" src="csapp/bg175.png"/><div class="t m5 x14 h28 y9b ffe fs1e fc2 sc0 ls0 ws0">372<span class="_ _1b"> </span><span class="ff6 fs1f">Chapter<span class="_ _10"> </span>3<span class="_ _3d"> </span>Machine-Level<span class="_ _10"> </span>Representation<span class="_ _10"> </span>of<span class="_ _10"> </span>Programs</span></div><div class="t m5 x1d h28 ye7 ffe fs1e fc6 sc0 ls0 ws0">Solution<span class="_"> </span>to<span class="_"> </span>Problem<span class="_"> </span>3.26<span class="_ _e"> </span><span class="fs16">(page<span class="_"> </span>264)</span></div><div class="t m5 x1d h26 y1d16 ff7 fs19 fc1 sc0 ls0 ws0">Being<span class="_ _11"> </span>able<span class="_ _11"> </span>to<span class="_ _11"> </span>work<span class="_ _11"> </span>backward<span class="_ _11"> </span>from<span class="_ _11"> </span>assembly<span class="_ _11"> </span>code<span class="_ _11"> </span>to<span class="_ _11"> </span>C<span class="_ _16"> </span>code<span class="_"> </span>is<span class="_ _11"> </span>a<span class="_ _11"> </span>prime<span class="_ _11"> </span>example</div><div class="t m5 x1d h26 y1d17 ff7 fs19 fc1 sc0 ls0 ws0">of<span class="_"> </span>reverse<span class="_"> </span>engineering.</div><div class="t m5 x124 h26 y343a ff7 fs19 fc1 sc0 ls0 ws0">A.<span class="_ _1f"> </span>W<span class="_ _3"></span>e<span class="_"> </span>can<span class="_ _13"> </span>see<span class="_"> </span>that<span class="_"> </span>the<span class="_ _13"> </span>code<span class="_"> </span>uses<span class="_ _13"> </span>the<span class="_"> </span>jump-to-middle<span class="_ _13"> </span>translation,<span class="_"> </span>using<span class="_"> </span>the<span class="_ _13"> </span><span class="ffd">jmp</span></div><div class="t m5 x4f h26 y1d19 ff7 fs19 fc1 sc0 ls0 ws0">instruction<span class="_"> </span>on<span class="_"> </span>line<span class="_"> </span>3.</div><div class="t m5 x124 h26 y343b ff7 fs19 fc1 sc0 ls0 ws0">B<span class="_ _3"></span>.<span class="_ _1d"> </span>Here<span class="_"> </span>is<span class="_"> </span>the<span class="_"> </span>original<span class="_"> </span>C<span class="_"> </span>code:</div><div class="t m5 x4f h2d ybc3 ffd fs1e fc2 sc0 ls0 ws0">short<span class="_ _e"> </span>test_one(unsigned<span class="_ _1f"> </span>short<span class="_ _1f"> </span>x)<span class="_ _e"> </span>{</div><div class="t m5 x33 h2d y343c ffd fs1e fc2 sc0 ls0 ws0">short<span class="_ _e"> </span>val<span class="_ _1f"> </span>=<span class="_ _1f"> </span>1;</div><div class="t m5 x33 h2d y343d ffd fs1e fc2 sc0 ls0 ws0">while<span class="_ _e"> </span>(x)<span class="_ _1f"> </span>{</div><div class="t m5 xf7 h2d y343e ffd fs1e fc2 sc0 ls0 ws0">val<span class="_ _e"> </span>^=<span class="_ _1f"> </span>x;</div><div class="t m5 xf7 h2d y343f ffd fs1e fc2 sc0 ls0 ws0">x<span class="_ _e"> </span>&gt;&gt;=<span class="_ _1f"> </span>1;</div><div class="t m5 x33 h2d y3440 ffd fs1e fc2 sc0 ls0 ws0">}</div><div class="t m5 x33 h2d y3441 ffd fs1e fc2 sc0 ls0 ws0">return<span class="_ _e"> </span>val<span class="_ _1f"> </span>&amp;<span class="_ _1f"> </span>0;</div><div class="t m5 x4f h2d y3442 ffd fs1e fc2 sc0 ls0 ws0">}</div><div class="t m5 x124 h26 y3443 ff7 fs19 fc2 sc0 ls0 ws0">C.<span class="_ _25"> </span>T<span class="_ _1"></span>his<span class="_ _11"> </span>code<span class="_"> </span>computes<span class="_ _11"> </span>the<span class="_"> </span><span class="ffa">parity<span class="_"> </span></span>of<span class="_ _11"> </span>argument<span class="_"> </span><span class="ffd">x</span>.<span class="_ _11"> </span>T<span class="_ _0"></span>hat<span class="_"> </span>is<span class="_ _1"></span>,<span class="_ _11"> </span>it<span class="_"> </span>returns<span class="_ _11"> </span>1<span class="_"> </span>if<span class="_ _11"> </span>there<span class="_"> </span>is</div><div class="t m5 x4f h26 y3444 ff7 fs19 fc2 sc0 ls0 ws0">an<span class="_"> </span>odd<span class="_"> </span>number<span class="_"> </span>of<span class="_"> </span>ones<span class="_"> </span>in<span class="_"> </span><span class="ffd">x<span class="_ _10"> </span></span>and<span class="_"> </span>0<span class="_"> </span>if<span class="_"> </span>there<span class="_"> </span>is<span class="_"> </span>an<span class="_"> </span>even<span class="_"> </span>number.</div><div class="t m5 x1d h28 y3445 ffe fs1e fc6 sc0 ls0 ws0">Solution<span class="_"> </span>to<span class="_"> </span>Problem<span class="_"> </span>3.27<span class="_ _e"> </span><span class="fs16">(page<span class="_"> </span>267)</span></div><div class="t m5 x1d h26 y2c19 ff7 fs19 fc1 sc0 ls0 ws0">T<span class="_ _1"></span>his<span class="_"> </span>exercise<span class="_ _13"> </span>is<span class="_"> </span>intended<span class="_ _13"> </span>to<span class="_"> </span>reinforce<span class="_ _13"> </span>your<span class="_ _13"> </span>understanding<span class="_"> </span>of<span class="_ _13"> </span>how<span class="_"> </span>loops<span class="_ _13"> </span>are<span class="_"> </span>imple-</div><div class="t m5 x1d h26 y3446 ff7 fs19 fc1 sc0 ls0 ws0">mented.</div><div class="t m5 x1d h2d y3447 ffd fs1e fc2 sc0 ls0 ws0">long<span class="_ _e"> </span>fibonacci_gd_goto(long<span class="_ _1f"> </span>n)</div><div class="t m5 x1d h2d y3448 ffd fs1e fc2 sc0 ls0 ws0">{</div><div class="t m5 x10c h2d y3449 ffd fs1e fc2 sc0 ls33 ws0">l<span class="_ _41"></span>o<span class="_ _41"></span>n<span class="_ _41"></span>gi=2<span class="_ _41"></span>;</div><div class="t m5 x10c h2d y344a ffd fs1e fc2 sc0 ls0 ws0">long<span class="_ _e"> </span>next,<span class="_ _1f"> </span>first<span class="_ _1f"> </span>=<span class="_ _e"> </span>0,<span class="_ _1f"> </span>second<span class="_ _e"> </span>=<span class="_ _1f"> </span>1;</div><div class="t m5 x10c h2d y344b ffd fs1e fc2 sc0 ls0 ws0">if<span class="_ _e"> </span>(n<span class="_ _1f"> </span>&lt;=<span class="_ _1f"> </span>1)</div><div class="t m5 x22b h2d y344c ffd fs1e fc2 sc0 ls0 ws0">goto<span class="_ _e"> </span>done;</div><div class="t m5 xc5 h2d y344d ffd fs1e fc2 sc0 ls0 ws0">loop:</div><div class="t m5 x10c h2d y344e ffd fs1e fc2 sc0 ls0 ws0">next<span class="_ _e"> </span>=<span class="_ _1f"> </span>first<span class="_ _1f"> </span>+<span class="_ _e"> </span>second;</div><div class="t m5 x10c h2d y344f ffd fs1e fc2 sc0 ls0 ws0">first<span class="_ _e"> </span>=<span class="_ _1f"> </span>second;<span class="_ _1f"> </span>second<span class="_ _e"> </span>=<span class="_ _1f"> </span>next;</div><div class="t m5 x10c h2d y3450 ffd fs1e fc2 sc0 ls0 ws0">i++;</div><div class="t m5 x10c h2d y3451 ffd fs1e fc2 sc0 ls0 ws0">if<span class="_ _e"> </span>(i<span class="_ _1f"> </span>&lt;=<span class="_ _1f"> </span>n)</div><div class="t m5 x22b h2d y3452 ffd fs1e fc2 sc0 ls0 ws0">goto<span class="_ _e"> </span>loop;</div><div class="t m5 xc5 h2d y3453 ffd fs1e fc2 sc0 ls0 ws0">done:</div><div class="t m5 x10c h2d y3454 ffd fs1e fc2 sc0 ls0 ws0">return<span class="_ _e"> </span>n;</div><div class="t m5 x1d h2d y3455 ffd fs1e fc2 sc0 ls0 ws0">}</div><div class="t m5 x1d h28 y3456 ffe fs1e fc6 sc0 ls0 ws0">Solution<span class="_"> </span>to<span class="_"> </span>Problem<span class="_"> </span>3.28</div><div class="t m5 xe1 h2f y3457 ffe fs16 fc6 sc0 ls0 ws0">(page<span class="_"> </span>267)</div><div class="t m5 x1d h26 y3458 ff7 fs19 fc1 sc0 ls0 ws0">T<span class="_ _1"></span>his<span class="_"> </span>problem<span class="_ _13"> </span>is<span class="_"> </span>trickier<span class="_ _13"> </span>than<span class="_"> </span>Problem<span class="_ _13"> </span>3.26,<span class="_"> </span>since<span class="_"> </span>the<span class="_ _13"> </span>code<span class="_"> </span>within<span class="_ _13"> </span>the<span class="_"> </span>loop<span class="_ _13"> </span>is<span class="_"> </span>more</div><div class="t m5 x1d h26 y3459 ff7 fs19 fc1 sc0 ls0 ws0">complex<span class="_"> </span>and<span class="_"> </span>the<span class="_"> </span>overall<span class="_"> </span>operation<span class="_"> </span>is<span class="_"> </span>less<span class="_"> </span>familiar.</div><div class="t m5 x124 h26 y345a ff7 fs19 fc1 sc0 ls0 ws0">A.<span class="_ _1f"> </span>Here<span class="_"> </span>is<span class="_"> </span>the<span class="_"> </span>original<span class="_"> </span>C<span class="_"> </span>code:</div><div class="t m5 x4f h2d y345b ffd fs1e fc2 sc0 ls0 ws0">long<span class="_ _e"> </span>fun_b(unsigned<span class="_ _1f"> </span>long<span class="_ _1f"> </span>x)<span class="_ _e"> </span>{</div><div class="t m5 x33 h2d y345c ffd fs1e fc2 sc0 ls0 ws0">long<span class="_ _e"> </span>val<span class="_ _1f"> </span>=<span class="_ _1f"> </span>0;</div><div class="t m5 x33 h2d y345d ffd fs1e fc2 sc0 ls0 ws0">long<span class="_ _e"> </span>i;</div></div><div class="pi" data-data='{"ctm":[2.000000,0.000000,0.000000,2.000000,0.000000,0.000000]}'></div></div>
