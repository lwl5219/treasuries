<div id="pf185" class="pf w2 h11" data-page-no="185"><div class="pc pc185 w2 h11"><img class="bi x0 y0 w1 h1" alt="" src="csapp/bg185.png"/><div class="t m5 x14 h28 y9b ffe fs1e fc2 sc0 ls0 ws0">388<span class="_ _1b"> </span><span class="ff6 fs1f">Chapter<span class="_ _10"> </span>4<span class="_ _3d"> </span>Processor<span class="_ _10"> </span>Architecture</span></div><div class="t m5 x1d h38 y93a ff7 fs1b fc6 sc0 ls0 ws0">M</div><div class="t m5 xc4 h26 ye7 ff7 fs19 fc1 sc0 ls0 ws0">odern<span class="_ _16"> </span>microprocessors<span class="_ _16"> </span>are<span class="_ _11"> </span>among<span class="_ _16"> </span>the<span class="_ _16"> </span>most<span class="_ _16"> </span>complex<span class="_ _16"> </span>systems<span class="_ _16"> </span>ever<span class="_ _16"> </span>created</div><div class="t m5 xc4 h26 y2a7 ff7 fs19 fc1 sc0 ls0 ws0">by<span class="_ _16"> </span>humans<span class="_ _1"></span>.<span class="_ _16"> </span>A<span class="_ _16"> </span>single<span class="_ _11"> </span>silicon<span class="_ _16"> </span>chip,<span class="_ _16"> </span>roughly<span class="_ _11"> </span>the<span class="_ _16"> </span>size<span class="_ _16"> </span>of<span class="_ _16"> </span>a<span class="_ _16"> </span>ﬁngernail,<span class="_ _16"> </span>can<span class="_ _16"> </span>con-</div><div class="t m5 x1d h26 y2a8 ff7 fs19 fc1 sc0 ls0 ws0">tain<span class="_ _15"> </span>several<span class="_ _14"> </span>high-performance<span class="_ _15"> </span>processors<span class="_ _0"></span>,<span class="_ _15"> </span>large<span class="_ _15"> </span>cache<span class="_ _15"> </span>memories<span class="_ _1"></span>,<span class="_ _21"> </span>and<span class="_ _15"> </span>the<span class="_ _15"> </span>logic</div><div class="t m5 x1d h26 y2f7 ff7 fs19 fc1 sc0 ls0 ws0">required<span class="_"> </span>to<span class="_"> </span>interface<span class="_"> </span>them<span class="_"> </span>to<span class="_"> </span>external<span class="_"> </span>devices<span class="_ _0"></span>.<span class="_"> </span>In<span class="_"> </span>terms<span class="_"> </span>of<span class="_"> </span>performance,<span class="_"> </span>the<span class="_"> </span>pro-</div><div class="t m5 x1d h26 y2f8 ff7 fs19 fc1 sc0 ls0 ws0">cessors<span class="_"> </span>implemented<span class="_"> </span>on<span class="_"> </span>a<span class="_"> </span>single<span class="_"> </span>chip<span class="_"> </span>today<span class="_"> </span>dwarf<span class="_"> </span>the<span class="_"> </span>room-size<span class="_"> </span>supercomputers</div><div class="t m5 x1d h26 y2f9 ff7 fs19 fc1 sc0 ls0 ws0">that<span class="_ _13"> </span>cost<span class="_"> </span>over<span class="_ _13"> </span>$10<span class="_"> </span>million<span class="_ _13"> </span>just<span class="_"> </span>20<span class="_ _13"> </span>years<span class="_"> </span>ago<span class="_ _1"></span>.<span class="_"> </span>Even<span class="_ _13"> </span>the<span class="_"> </span>embedded<span class="_ _13"> </span>processors<span class="_"> </span>found</div><div class="t m5 x1d h26 y2fa ff7 fs19 fc1 sc0 ls0 ws0">in<span class="_ _6"> </span>everyday<span class="_ _13"> </span>appliances<span class="_ _6"> </span>such<span class="_ _13"> </span>as<span class="_ _6"> </span>cell<span class="_ _6"> </span>phones<span class="_ _1"></span>,<span class="_ _13"> </span>navigation<span class="_ _13"> </span>systems<span class="_ _3"></span>,<span class="_ _13"> </span>and<span class="_ _6"> </span>programmable</div><div class="t m5 x1d h26 y2fb ff7 fs19 fc1 sc0 ls0 ws0">thermostats<span class="_"> </span>are<span class="_"> </span>far<span class="_ _11"> </span>more<span class="_"> </span>powerful<span class="_"> </span>than<span class="_ _11"> </span>the<span class="_"> </span>early<span class="_"> </span>developers<span class="_ _11"> </span>of<span class="_"> </span>computers<span class="_"> </span>could</div><div class="t m5 x1d h26 y2fc ff7 fs19 fc1 sc0 ls0 ws0">ever<span class="_"> </span>have<span class="_"> </span>envisioned.</div><div class="t m5 x29 h26 y2fd ff7 fs19 fc1 sc0 ls0 ws0">So<span class="_"> </span>far<span class="_ _0"></span>,<span class="_"> </span>we<span class="_"> </span>have<span class="_ _13"> </span>only<span class="_"> </span>viewed<span class="_"> </span>computer<span class="_"> </span>systems<span class="_ _13"> </span>down<span class="_"> </span>to<span class="_"> </span>the<span class="_"> </span>level<span class="_ _13"> </span>of<span class="_"> </span>machine-</div><div class="t m5 x1d h26 y2fe ff7 fs19 fc1 sc0 ls0 ws0">language<span class="_ _16"> </span>programs<span class="_ _1"></span>.<span class="_ _14"> </span>W<span class="_ _3"></span>e<span class="_ _14"> </span>have<span class="_ _16"> </span>seen<span class="_ _14"> </span>that<span class="_ _16"> </span>a<span class="_ _16"> </span>processor<span class="_ _14"> </span>must<span class="_ _16"> </span>execute<span class="_ _14"> </span>a<span class="_ _16"> </span>sequence<span class="_ _14"> </span>of</div><div class="t m5 x1d h26 y2ff ff7 fs19 fc1 sc0 ls0 ws0">instructions<span class="_ _1"></span>,<span class="_ _16"> </span>where<span class="_ _16"> </span>each<span class="_ _11"> </span>instruction<span class="_ _16"> </span>performs<span class="_ _11"> </span>some<span class="_ _16"> </span>primitive<span class="_ _16"> </span>operation,<span class="_ _16"> </span>such<span class="_ _11"> </span>as</div><div class="t m5 x1d h26 y300 ff7 fs19 fc1 sc0 ls0 ws0">adding<span class="_ _11"> </span>two<span class="_ _16"> </span>numbers<span class="_ _1"></span>.<span class="_ _16"> </span>An<span class="_ _11"> </span>instruction<span class="_ _16"> </span>is<span class="_ _11"> </span>encoded<span class="_ _16"> </span>in<span class="_ _11"> </span>binary<span class="_ _16"> </span>form<span class="_ _16"> </span>as<span class="_ _11"> </span>a<span class="_ _16"> </span>sequence<span class="_ _11"> </span>of</div><div class="t m5 x1d h26 y21a ff7 fs19 fc1 sc0 ls0 ws0">1<span class="_ _16"> </span>or<span class="_ _16"> </span>more<span class="_ _16"> </span>bytes<span class="_ _1"></span>.<span class="_ _14"> </span>T<span class="_ _1"></span>he<span class="_ _16"> </span>instructions<span class="_ _14"> </span>supported<span class="_ _16"> </span>by<span class="_ _16"> </span>a<span class="_ _16"> </span>particular<span class="_ _16"> </span>processor<span class="_ _14"> </span>and<span class="_ _16"> </span>their</div><div class="t m5 x1d h26 y450 ff7 fs19 fc1 sc0 ls0 ws0">byte-level<span class="_"> </span>encodings<span class="_"> </span>are<span class="_"> </span>known<span class="_ _13"> </span>as<span class="_"> </span>its<span class="_"> </span><span class="ffa">instruction<span class="_"> </span>set<span class="_"> </span>architecture<span class="_"> </span></span>(ISA).<span class="_"> </span>Different</div><div class="t m5 x1d h26 y451 ff7 fs19 fc1 sc0 ls0 ws0">“families”<span class="_ _14"> </span>of<span class="_ _14"> </span>processors<span class="_ _1"></span>,<span class="_ _15"> </span>such<span class="_ _15"> </span>as<span class="_ _14"> </span>Intel<span class="_ _14"> </span>IA32<span class="_ _14"> </span>and<span class="_ _15"> </span>x86-64,<span class="_ _15"> </span>IBM/F<span class="_ _1"></span>reescale<span class="_ _15"> </span>P<span class="_ _1"></span>ower,</div><div class="t m5 x1d h26 y452 ff7 fs19 fc1 sc0 ls0 ws0">and<span class="_ _13"> </span>the<span class="_ _13"> </span>ARM<span class="_ _13"> </span>processor<span class="_ _13"> </span>family,<span class="_ _13"> </span>have<span class="_"> </span>different<span class="_ _13"> </span>ISAs<span class="_ _3"></span>.<span class="_ _13"> </span>A<span class="_ _13"> </span>program<span class="_ _13"> </span>compiled<span class="_ _13"> </span>for<span class="_"> </span>one</div><div class="t m5 x1d h26 y453 ff7 fs19 fc1 sc0 ls0 ws0">type<span class="_"> </span>of<span class="_ _11"> </span>machine<span class="_ _11"> </span>will<span class="_"> </span>not<span class="_ _11"> </span>run<span class="_ _11"> </span>on<span class="_ _11"> </span>another.<span class="_"> </span>On<span class="_"> </span>the<span class="_ _11"> </span>other<span class="_ _11"> </span>hand,<span class="_ _11"> </span>there<span class="_"> </span>are<span class="_ _11"> </span>many<span class="_ _11"> </span>dif-</div><div class="t m5 x1d h26 y454 ff7 fs19 fc1 sc0 ls0 ws0">ferent<span class="_ _11"> </span>models<span class="_ _16"> </span>of<span class="_ _11"> </span>processors<span class="_ _16"> </span>within<span class="_ _16"> </span>a<span class="_ _11"> </span>single<span class="_ _16"> </span>family<span class="_ _7"></span>.<span class="_ _16"> </span>Each<span class="_ _11"> </span>manufacturer<span class="_ _16"> </span>produces</div><div class="t m5 x1d h26 y455 ff7 fs19 fc1 sc0 ls0 ws0">processors<span class="_ _13"> </span>of<span class="_ _13"> </span>ever<span class="_ _1"></span>-growing<span class="_ _13"> </span>performance<span class="_ _13"> </span>and<span class="_"> </span>complexity<span class="_ _7"></span>,<span class="_ _13"> </span>but<span class="_"> </span>the<span class="_ _13"> </span>different<span class="_ _13"> </span>models</div><div class="t m5 x1d h26 y456 ff7 fs19 fc1 sc0 ls0 ws0">remain<span class="_ _16"> </span>compatible<span class="_ _16"> </span>at<span class="_ _16"> </span>the<span class="_ _16"> </span>ISA<span class="_ _16"> </span>level.<span class="_ _16"> </span>P<span class="_ _1"></span>opular<span class="_ _16"> </span>families<span class="_ _1"></span>,<span class="_ _14"> </span>such<span class="_ _16"> </span>as<span class="_ _16"> </span>x86-64,<span class="_ _16"> </span>have<span class="_ _16"> </span>pro-</div><div class="t m5 x1d h26 y457 ff7 fs19 fc1 sc0 ls0 ws0">cessors<span class="_"> </span>supplied<span class="_"> </span>by<span class="_"> </span>multiple<span class="_"> </span>manufacturers<span class="_ _1"></span>.<span class="_"> </span>T<span class="_ _1"></span>hus<span class="_ _1"></span>,<span class="_"> </span>the<span class="_"> </span>ISA<span class="_"> </span>provides<span class="_"> </span>a<span class="_"> </span>conceptual</div><div class="t m5 x1d h26 y458 ff7 fs19 fc1 sc0 ls0 ws0">layer<span class="_"> </span>of<span class="_ _13"> </span>abstraction<span class="_"> </span>between<span class="_"> </span>compiler<span class="_"> </span>writers<span class="_ _3"></span>,<span class="_"> </span>who<span class="_"> </span>need<span class="_ _13"> </span>only<span class="_"> </span>know<span class="_"> </span>what<span class="_"> </span>instruc-</div><div class="t m5 x1d h26 y459 ff7 fs19 fc1 sc0 ls0 ws0">tions<span class="_ _13"> </span>are<span class="_ _13"> </span>permitted<span class="_ _13"> </span>and<span class="_ _13"> </span>how<span class="_ _13"> </span>they<span class="_ _13"> </span>are<span class="_ _13"> </span>encoded,<span class="_ _13"> </span>and<span class="_ _13"> </span>processor<span class="_ _13"> </span>designers<span class="_ _3"></span>,<span class="_"> </span>who<span class="_ _13"> </span>must</div><div class="t m5 x1d h26 y45a ff7 fs19 fc1 sc0 ls0 ws0">build<span class="_"> </span>machines<span class="_"> </span>that<span class="_"> </span>execute<span class="_"> </span>those<span class="_"> </span>instructions<span class="_ _1"></span>.</div><div class="t m5 x29 h26 y45b ff7 fs19 fc1 sc0 ls0 ws0">In<span class="_"> </span>this<span class="_"> </span>chapter,<span class="_"> </span>we<span class="_"> </span>take<span class="_"> </span>a<span class="_"> </span>brief<span class="_"> </span>look<span class="_"> </span>at<span class="_ _11"> </span>the<span class="_"> </span>design<span class="_"> </span>of<span class="_"> </span>processor<span class="_"> </span>hardware.<span class="_"> </span>W<span class="_ _3"></span>e</div><div class="t m5 x1d h26 y45c ff7 fs19 fc1 sc0 ls0 ws0">study<span class="_ _13"> </span>the<span class="_"> </span>way<span class="_ _13"> </span>a<span class="_"> </span>hardware<span class="_ _13"> </span>system<span class="_"> </span>can<span class="_ _13"> </span>execute<span class="_ _13"> </span>the<span class="_"> </span>instructions<span class="_ _13"> </span>of<span class="_"> </span>a<span class="_ _13"> </span>particular<span class="_ _13"> </span>ISA.</div><div class="t m5 x1d h26 y227 ff7 fs19 fc1 sc0 ls0 ws0">T<span class="_ _1"></span>his<span class="_ _16"> </span>view<span class="_ _14"> </span>will<span class="_ _16"> </span>give<span class="_ _16"> </span>you<span class="_ _16"> </span>a<span class="_ _16"> </span>better<span class="_ _16"> </span>understanding<span class="_ _14"> </span>of<span class="_ _16"> </span>how<span class="_ _16"> </span>computers<span class="_ _16"> </span>work<span class="_ _16"> </span>and<span class="_ _16"> </span>the</div><div class="t m5 x1d h26 y45d ff7 fs19 fc1 sc0 ls0 ws0">technological<span class="_ _11"> </span>challenges<span class="_ _16"> </span>faced<span class="_ _11"> </span>by<span class="_ _16"> </span>computer<span class="_ _16"> </span>manufacturers<span class="_ _3"></span>.<span class="_ _16"> </span>One<span class="_ _11"> </span>important<span class="_ _16"> </span>con-</div><div class="t m5 x1d h26 y45e ff7 fs19 fc1 sc0 ls0 ws0">cept<span class="_ _14"> </span>is<span class="_ _14"> </span>that<span class="_ _14"> </span>the<span class="_ _14"> </span>actual<span class="_ _14"> </span>way<span class="_ _14"> </span>a<span class="_ _14"> </span>modern<span class="_ _14"> </span>processor<span class="_ _14"> </span>operates<span class="_ _14"> </span>can<span class="_ _14"> </span>be<span class="_ _14"> </span>quite<span class="_ _15"> </span>different</div><div class="t m5 x1d h26 y4ad ff7 fs19 fc1 sc0 ls0 ws0">from<span class="_"> </span>the<span class="_"> </span>model<span class="_"> </span>of<span class="_ _11"> </span>computation<span class="_"> </span>implied<span class="_"> </span>by<span class="_ _11"> </span>the<span class="_"> </span>ISA.<span class="_"> </span>The<span class="_"> </span>ISA<span class="_"> </span>model<span class="_"> </span>would<span class="_"> </span>seem</div><div class="t m5 x1d h26 y45f ff7 fs19 fc1 sc0 ls0 ws0">to<span class="_ _16"> </span>imply<span class="_ _16"> </span><span class="ffa">sequential<span class="_ _14"> </span></span>instruction<span class="_ _16"> </span>execution,<span class="_ _14"> </span>where<span class="_ _16"> </span>each<span class="_ _16"> </span>instruction<span class="_ _16"> </span>is<span class="_ _16"> </span>fetched<span class="_ _16"> </span>and</div><div class="t m5 x1d h26 y460 ff7 fs19 fc1 sc0 ls0 ws0">executed<span class="_ _11"> </span>to<span class="_ _11"> </span>completion<span class="_ _11"> </span>before<span class="_ _11"> </span>the<span class="_ _16"> </span>next<span class="_"> </span>one<span class="_ _16"> </span>begins<span class="_ _3"></span>.<span class="_ _16"> </span>By<span class="_"> </span>executing<span class="_ _11"> </span>different<span class="_ _16"> </span>parts</div><div class="t m5 x1d h26 y461 ff7 fs19 fc1 sc0 ls0 ws0">of<span class="_"> </span>multiple<span class="_ _11"> </span>instructions<span class="_ _11"> </span>simultaneously<span class="_ _3"></span>,<span class="_ _11"> </span>the<span class="_ _11"> </span>processor<span class="_ _11"> </span>can<span class="_ _11"> </span>achieve<span class="_ _11"> </span>higher<span class="_"> </span>perfor<span class="_ _0"></span>-</div><div class="t m5 x1d h26 y322 ff7 fs19 fc1 sc0 ls0 ws0">mance<span class="_ _11"> </span>than<span class="_ _16"> </span>if<span class="_ _11"> </span>it<span class="_ _16"> </span>executed<span class="_ _11"> </span>just<span class="_ _11"> </span>one<span class="_ _16"> </span>instruction<span class="_ _11"> </span>at<span class="_ _16"> </span>a<span class="_ _11"> </span>time<span class="_ _0"></span>.<span class="_ _11"> </span>Special<span class="_ _16"> </span>mechanisms<span class="_ _11"> </span>are</div><div class="t m5 x1d h26 y323 ff7 fs19 fc1 sc0 ls0 ws0">used<span class="_ _16"> </span>to<span class="_ _11"> </span>make<span class="_ _16"> </span>sure<span class="_ _16"> </span>the<span class="_ _11"> </span>processor<span class="_ _16"> </span>computes<span class="_ _16"> </span>the<span class="_ _11"> </span>same<span class="_ _16"> </span>results<span class="_ _16"> </span>as<span class="_ _11"> </span>it<span class="_ _16"> </span>would<span class="_ _16"> </span>with<span class="_ _16"> </span>se-</div><div class="t m5 x1d h26 y324 ff7 fs19 fc1 sc0 ls0 ws0">quential<span class="_"> </span>execution.<span class="_ _13"> </span>T<span class="_ _0"></span>his<span class="_"> </span>idea<span class="_ _13"> </span>of<span class="_"> </span>using<span class="_ _13"> </span>clever<span class="_"> </span>tricks<span class="_"> </span>to<span class="_ _13"> </span>improve<span class="_"> </span>performance<span class="_ _13"> </span>while</div><div class="t m5 x1d h26 y325 ff7 fs19 fc1 sc0 ls0 ws0">maintaining<span class="_ _13"> </span>the<span class="_"> </span>functionality<span class="_ _13"> </span>of<span class="_"> </span>a<span class="_ _13"> </span>simpler<span class="_"> </span>and<span class="_ _13"> </span>more<span class="_"> </span>abstract<span class="_ _13"> </span>model<span class="_"> </span>is<span class="_ _13"> </span>well<span class="_"> </span>known</div><div class="t m5 x1d h26 y326 ff7 fs19 fc1 sc0 ls0 ws0">in<span class="_ _16"> </span>computer<span class="_ _16"> </span>science<span class="_ _1"></span>.<span class="_ _16"> </span>Examples<span class="_ _16"> </span>include<span class="_ _16"> </span>the<span class="_ _11"> </span>use<span class="_ _16"> </span>of<span class="_ _16"> </span>caching<span class="_ _16"> </span>in<span class="_ _16"> </span>W<span class="_ _3"></span>eb<span class="_ _16"> </span>browsers<span class="_ _16"> </span>and</div><div class="t m5 x1d h26 y319 ff7 fs19 fc1 sc0 ls0 ws0">information<span class="_ _6"> </span>retrieval<span class="_ _13"> </span>data<span class="_ _a"> </span>structures<span class="_ _13"> </span>such<span class="_ _6"> </span>as<span class="_ _6"> </span>balanced<span class="_ _13"> </span>binary<span class="_ _a"> </span>trees<span class="_ _13"> </span>and<span class="_ _6"> </span>hash<span class="_ _6"> </span>tables<span class="_ _1"></span>.</div><div class="t m5 x29 h26 y31a ff7 fs19 fc1 sc0 ls0 ws0">Chances<span class="_ _21"> </span>are<span class="_ _21"> </span>you<span class="_ _21"> </span>will<span class="_ _21"> </span>never<span class="_ _21"> </span>design<span class="_ _21"> </span>your<span class="_ _21"> </span>own<span class="_ _f"> </span>processor.<span class="_ _15"> </span>T<span class="_ _0"></span>his<span class="_ _21"> </span>is<span class="_ _21"> </span>a<span class="_ _21"> </span>task<span class="_ _21"> </span>for</div><div class="t m5 x1d h26 y31b ff7 fs19 fc1 sc0 ls0 ws0">experts<span class="_ _11"> </span>working<span class="_ _11"> </span>at<span class="_ _11"> </span>fewer<span class="_ _11"> </span>than<span class="_ _11"> </span>100<span class="_ _11"> </span>companies<span class="_ _11"> </span>worldwide<span class="_ _0"></span>.<span class="_ _11"> </span>Why<span class="_ _7"></span>,<span class="_ _16"> </span>then,<span class="_"> </span>should<span class="_ _11"> </span>you</div><div class="t m5 x1d h26 y31c ff7 fs19 fc1 sc0 ls0 ws0">learn<span class="_"> </span>about<span class="_"> </span>processor<span class="_"> </span>design?</div><div class="t m5 x75 h3d y3660 ff14 fs26 fc6 sc0 ls0 ws0">.</div><div class="t m5 x29 h26 y15bf ffa fs19 fc1 sc0 ls0 ws0">It<span class="_ _13"> </span>is<span class="_ _13"> </span>intellectually<span class="_ _13"> </span>interesting<span class="_ _13"> </span>and<span class="_ _13"> </span>important.<span class="_ _be"></span><span class="ff7">T<span class="_ _1"></span>here<span class="_ _13"> </span>is<span class="_ _13"> </span>an<span class="_ _13"> </span>intrinsic<span class="_ _13"> </span>value<span class="_ _13"> </span>in<span class="_ _13"> </span>learn-</span></div><div class="t m5 x29 h26 y15c0 ff7 fs19 fc1 sc0 ls0 ws0">ing<span class="_ _13"> </span>how<span class="_"> </span>things<span class="_ _13"> </span>work.<span class="_"> </span>It<span class="_ _13"> </span>is<span class="_"> </span>especially<span class="_ _13"> </span>interesting<span class="_"> </span>to<span class="_ _13"> </span>learn<span class="_"> </span>the<span class="_ _13"> </span>inner<span class="_"> </span>workings<span class="_ _13"> </span>of</div></div><div class="pi" data-data='{"ctm":[2.000000,0.000000,0.000000,2.000000,0.000000,0.000000]}'></div></div>
