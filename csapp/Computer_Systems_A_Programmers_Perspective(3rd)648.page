<div id="pf288" class="pf w2 h11" data-page-no="288"><div class="pc pc288 w2 h11"><img class="bi x0 y0 w1 h1" alt="" src="csapp/bg288.png"/><div class="t m5 xe8 h28 y9b ff6 fs1f fc2 sc0 ls0 ws0">Section<span class="_ _10"> </span>6.3<span class="_ _60"> </span>The<span class="_ _10"> </span>Memor<span class="_"> </span>y<span class="_ _10"> </span>Hierarchy<span class="_ _3e"> </span><span class="ffe fs1e">647</span></div><div class="t m5 x34 h2a y257 fff fs1c fc2 sc0 ls0 ws0">Aside<span class="_ _1b"> </span><span class="ff6 fs19">Other<span class="_ _11"> </span>memory<span class="_ _11"> </span>hierarchies</span></div><div class="t m5 x34 h2b y2d0 ff7 fs1e fc2 sc0 ls0 ws0">W<span class="_ _3"></span>e<span class="_ _16"> </span>have<span class="_ _16"> </span>shown<span class="_ _16"> </span>you<span class="_ _16"> </span>one<span class="_ _16"> </span>example<span class="_ _16"> </span>of<span class="_ _14"> </span>a<span class="_ _16"> </span>memory<span class="_ _16"> </span>hierarchy<span class="_ _3"></span>,<span class="_ _16"> </span>but<span class="_ _16"> </span>other<span class="_ _16"> </span>combinations<span class="_ _16"> </span>are<span class="_ _14"> </span>possible<span class="_ _1"></span>,<span class="_ _14"> </span>and</div><div class="t m5 x34 h2b y2d1 ff7 fs1e fc2 sc0 ls0 ws0">indeed<span class="_ _14"> </span>common.<span class="_ _15"> </span>F<span class="_ _1"></span>or<span class="_ _15"> </span>example,<span class="_ _15"> </span>many<span class="_ _15"> </span>sites<span class="_ _1"></span>,<span class="_ _21"> </span>including<span class="_ _15"> </span>Google<span class="_ _15"> </span>datacenters<span class="_ _1"></span>,<span class="_ _21"> </span>back<span class="_ _15"> </span>up<span class="_ _15"> </span>local<span class="_ _14"> </span>disks<span class="_ _15"> </span>onto</div><div class="t m5 x34 h2b y2d2 ff7 fs1e fc2 sc0 ls0 ws0">archival<span class="_"> </span>magnetic<span class="_"> </span>tapes<span class="_ _3"></span>.<span class="_"> </span>At<span class="_"> </span>some<span class="_"> </span>of<span class="_"> </span>these<span class="_"> </span>sites<span class="_ _1"></span>,<span class="_"> </span>human<span class="_"> </span>operators<span class="_"> </span>manually<span class="_"> </span>mount<span class="_ _13"> </span>the<span class="_"> </span>tapes<span class="_"> </span>onto<span class="_"> </span>tape</div><div class="t m5 x34 h2b y2d3 ff7 fs1e fc2 sc0 ls0 ws0">drives<span class="_ _13"> </span>as<span class="_ _6"> </span>needed.<span class="_ _13"> </span>At<span class="_ _13"> </span>other<span class="_ _6"> </span>sites<span class="_ _0"></span>,<span class="_ _13"> </span>tape<span class="_ _6"> </span>robots<span class="_ _13"> </span>handle<span class="_ _13"> </span>this<span class="_ _13"> </span>task<span class="_ _6"> </span>automatically<span class="_ _3"></span>.<span class="_ _13"> </span>In<span class="_ _13"> </span>either<span class="_ _6"> </span>case,<span class="_ _6"> </span>the<span class="_ _13"> </span>collection</div><div class="t m5 x34 h2b y2d4 ff7 fs1e fc2 sc0 ls0 ws0">of<span class="_ _11"> </span>tapes<span class="_ _10"> </span>represents<span class="_ _11"> </span>a<span class="_ _11"> </span>level<span class="_ _11"> </span>in<span class="_ _11"> </span>the<span class="_ _11"> </span>memory<span class="_ _11"> </span>hierarchy<span class="_ _3"></span>,<span class="_ _11"> </span>below<span class="_ _10"> </span>the<span class="_ _11"> </span>local<span class="_ _11"> </span>disk<span class="_ _11"> </span>level,<span class="_ _11"> </span>and<span class="_ _11"> </span>the<span class="_ _11"> </span>same<span class="_ _11"> </span>general</div><div class="t m5 x34 h2b y2d5 ff7 fs1e fc2 sc0 ls0 ws0">principles<span class="_ _13"> </span>apply<span class="_ _7"></span>.<span class="_ _13"> </span>T<span class="_ _3"></span>apes<span class="_ _13"> </span>are<span class="_ _6"> </span>cheaper<span class="_ _13"> </span>per<span class="_ _13"> </span>byte<span class="_ _13"> </span>than<span class="_ _6"> </span>disks<span class="_ _0"></span>,<span class="_ _13"> </span>which<span class="_ _13"> </span>allows<span class="_ _6"> </span>sites<span class="_ _13"> </span>to<span class="_ _13"> </span>archive<span class="_ _13"> </span>multiple<span class="_ _6"> </span>snapshots</div><div class="t m5 x34 h2b y2d6 ff7 fs1e fc2 sc0 ls0 ws0">of<span class="_ _11"> </span>their<span class="_ _16"> </span>local<span class="_ _11"> </span>disks<span class="_ _1"></span>.<span class="_ _16"> </span>T<span class="_ _1"></span>he<span class="_ _11"> </span>trade-off<span class="_ _16"> </span>is<span class="_ _11"> </span>that<span class="_ _16"> </span>tapes<span class="_ _11"> </span>take<span class="_ _11"> </span>longer<span class="_ _16"> </span>to<span class="_ _11"> </span>access<span class="_ _16"> </span>than<span class="_ _11"> </span>disks<span class="_ _1"></span>.<span class="_ _16"> </span>As<span class="_ _11"> </span>another<span class="_ _11"> </span>example,</div><div class="t m5 x34 h2b y549 ff7 fs1e fc2 sc0 ls0 ws0">solid<span class="_"> </span>state<span class="_"> </span>disks<span class="_ _10"> </span>are<span class="_ _10"> </span>playing<span class="_ _10"> </span>an<span class="_ _11"> </span>increasingly<span class="_"> </span>important<span class="_"> </span>role<span class="_"> </span>in<span class="_ _11"> </span>the<span class="_"> </span>memory<span class="_"> </span>hierarchy<span class="_ _3"></span>,<span class="_"> </span>bridging<span class="_ _11"> </span>the<span class="_"> </span>gulf</div><div class="t m5 x34 h2b y54a ff7 fs1e fc2 sc0 ls0 ws0">between<span class="_"> </span>DRAM<span class="_"> </span>and<span class="_"> </span>rotating<span class="_"> </span>disk.</div><div class="t m5 x140 h3f y5648 ff7f fs27 fc1 sc0 ls0 ws0">4<span class="_ _94"> </span>9<span class="_ _74"> </span>14<span class="_ _93"> </span>3</div><div class="t m5 x1d5 h3f y5649 ff7f fs27 fc1 sc0 ls236 ws0">0123</div><div class="t m5 x1d5 h3f y564a ff7f fs27 fc1 sc0 ls236 ws0">4567</div><div class="t m5 x1d5 h3f y564b ff7f fs27 fc1 sc0 ls236 ws0">89<span class="_ _80"></span>1<span class="_ _1fa"></span>0<span class="_ _12"></span>1<span class="_ _1cd"></span>1</div><div class="t m5 x124 h3f y564c ff7f fs27 fc1 sc0 ls0 ws0">12<span class="_ _8b"> </span>13<span class="_ _85"> </span>14<span class="_ _8b"> </span>15</div><div class="t m5 x1ce h3f y564d ff7f fs27 fc1 sc0 ls0 ws0">Level <span class="ff80">k<span class="_ _5"></span></span>:</div><div class="t m5 x17 h3f y564e ff7f fs27 fc1 sc0 ls0 ws0">Level <span class="ff80">k</span></div><div class="t m5 x23e h3f y564f ff7f fs93 fc1 sc0 ls0 ws0"> <span class="fs27">+</span> <span class="fs27">1:</span></div><div class="t m5 xd4 h3f y5650 ff7f fs27 fc1 sc0 ls0 ws0">Smaller<span class="_ _1"></span>, faster<span class="_ _0"></span>, more expensive</div><div class="t m5 xd4 h3f y5651 ff7f fs27 fc1 sc0 ls0 ws0">device at level <span class="ff80">k</span> caches a</div><div class="t m5 xd4 h3f y5652 ff7f fs27 fc1 sc0 ls0 ws0">subset of the blocks from level <span class="ff80">k</span></div><div class="t m5 x1e1 h3f y5653 ff7f fs93 fc1 sc0 ls0 ws0"> <span class="fs27">+</span> <span class="fs27">1.</span></div><div class="t m5 x198 h3f y5654 ff7f fs27 fc1 sc0 ls0 ws0">Larger<span class="_ _1"></span>, slower<span class="_ _0"></span>, cheaper storage</div><div class="t m5 x198 h3f y5655 ff7f fs27 fc1 sc0 ls0 ws0">device at level <span class="ff80">k</span></div><div class="t m5 x12e h3f y5656 ff7f fs93 fc1 sc0 ls0 ws0"> <span class="fs27">+</span> <span class="fs27">1 is partitioned</span></div><div class="t m5 x198 h3f y5657 ff7f fs27 fc1 sc0 ls0 ws0">into blocks. </div><div class="t m5 x7c h3f y5658 ff7f fs27 fc1 sc0 ls0 ws0">Data are copied between</div><div class="t m5 x7c h3f y5659 ff7f fs27 fc1 sc0 ls0 ws0">levels in block-size transfer units.</div><div class="t m5 x17 h2f y565a ffe fs16 fc6 sc0 ls0 ws0">Figure<span class="_"> </span>6.22<span class="_ _66"> </span><span class="fc1">The<span class="_"> </span>basic<span class="_"> </span>principle<span class="_"> </span>of<span class="_"> </span>caching<span class="_"> </span>in<span class="_"> </span>a<span class="_"> </span>memor<span class="_ _2"></span>y<span class="_"> </span>hierarchy<span class="_ _3"></span>.</span></div><div class="t m5 x17 h46 y465b ff7 fs19 fc1 sc0 ls0 ws0">at<span class="_ _13"> </span>level<span class="_"> </span><span class="ff11">k<span class="_ _10"> </span><span class="ff12">+<span class="_ _13"> </span></span></span>1<span class="_ _0"></span>.<span class="_"> </span>In<span class="_ _13"> </span>other<span class="_ _13"> </span>words<span class="_ _1"></span>,<span class="_"> </span>each<span class="_"> </span>level<span class="_ _13"> </span>in<span class="_ _13"> </span>the<span class="_"> </span>hierarchy<span class="_ _13"> </span>caches<span class="_"> </span>data<span class="_ _13"> </span>objects<span class="_"> </span>from</div><div class="t m5 x17 h26 y465c ff7 fs19 fc1 sc0 ls0 ws0">the<span class="_ _11"> </span>next<span class="_ _11"> </span>lower<span class="_ _16"> </span>level.<span class="_ _11"> </span>F<span class="_ _1"></span>or<span class="_ _11"> </span>example,<span class="_ _11"> </span>the<span class="_ _11"> </span>local<span class="_ _16"> </span>disk<span class="_ _11"> </span>serves<span class="_ _11"> </span>as<span class="_ _16"> </span>a<span class="_ _11"> </span>cache<span class="_ _11"> </span>for<span class="_ _11"> </span>ﬁles<span class="_ _16"> </span>(such</div><div class="t m5 x17 h26 y465d ff7 fs19 fc1 sc0 ls0 ws0">as<span class="_ _11"> </span>W<span class="_ _3"></span>eb<span class="_ _11"> </span>pages)<span class="_ _16"> </span>retrieved<span class="_"> </span>from<span class="_ _16"> </span>remote<span class="_"> </span>disks<span class="_ _16"> </span>over<span class="_"> </span>the<span class="_ _16"> </span>network,<span class="_ _11"> </span>the<span class="_ _11"> </span>main<span class="_ _11"> </span>memory</div><div class="t m5 x17 h26 y465e ff7 fs19 fc1 sc0 ls0 ws0">serves<span class="_ _13"> </span>as<span class="_"> </span>a<span class="_ _13"> </span>cache<span class="_"> </span>for<span class="_ _13"> </span>data<span class="_ _13"> </span>on<span class="_"> </span>the<span class="_ _13"> </span>local<span class="_ _13"> </span>disks<span class="_ _1"></span>,<span class="_"> </span>and<span class="_ _13"> </span>so<span class="_"> </span>on,<span class="_ _13"> </span>until<span class="_"> </span>we<span class="_ _13"> </span>get<span class="_ _13"> </span>to<span class="_"> </span>the<span class="_ _13"> </span>smallest</div><div class="t m5 x17 h26 y465f ff7 fs19 fc1 sc0 ls0 ws0">cache<span class="_"> </span>of<span class="_"> </span>all,<span class="_"> </span>the<span class="_"> </span>set<span class="_"> </span>of<span class="_"> </span>CPU<span class="_"> </span>registers<span class="_ _1"></span>.</div><div class="t m5 x26 h26 y4660 ff7 fs19 fc1 sc0 ls0 ws0">F<span class="_ _1"></span>igure<span class="_"> </span>6.22<span class="_"> </span>shows<span class="_ _13"> </span>the<span class="_"> </span>general<span class="_"> </span>concept<span class="_ _13"> </span>of<span class="_"> </span>caching<span class="_ _13"> </span>in<span class="_"> </span>a<span class="_"> </span>memory<span class="_ _13"> </span>hierarchy<span class="_ _3"></span>.<span class="_"> </span>T<span class="_ _1"></span>he</div><div class="t m5 x17 h46 y4661 ff7 fs19 fc1 sc0 ls0 ws0">storage<span class="_"> </span>at<span class="_ _11"> </span>level<span class="_"> </span><span class="ff11">k<span class="_ _11"> </span><span class="ff12">+<span class="_ _10"> </span></span></span>1<span class="_ _13"> </span>is<span class="_"> </span>partitioned<span class="_ _11"> </span>into<span class="_"> </span>contiguous<span class="_ _11"> </span>chunks<span class="_"> </span>of<span class="_ _11"> </span>data<span class="_"> </span>objects<span class="_ _11"> </span>called</div><div class="t m5 x17 h26 y4662 ffa fs19 fc1 sc0 ls0 ws0">blocks<span class="ff7">.<span class="_"> </span>Each<span class="_"> </span>block<span class="_"> </span>has<span class="_"> </span>a<span class="_"> </span>unique<span class="_"> </span>address<span class="_"> </span>or<span class="_"> </span>name<span class="_"> </span>that<span class="_"> </span>distinguishes<span class="_"> </span>it<span class="_"> </span>from<span class="_"> </span>other</span></div><div class="t m5 x17 h26 y4663 ff7 fs19 fc1 sc0 ls0 ws0">blocks<span class="_ _1"></span>.<span class="_ _16"> </span>Blocks<span class="_ _11"> </span>can<span class="_ _16"> </span>be<span class="_ _16"> </span>either<span class="_ _11"> </span>ﬁxed<span class="_ _16"> </span>size<span class="_ _16"> </span>(the<span class="_ _11"> </span>usual<span class="_ _16"> </span>case)<span class="_ _16"> </span>or<span class="_ _11"> </span>variable<span class="_ _16"> </span>size<span class="_ _16"> </span>(e<span class="_ _1"></span>.g.,<span class="_ _16"> </span>the</div><div class="t m5 x17 h46 y4664 ff7 fs19 fc1 sc0 ls0 ws0">remote<span class="_"> </span>HTML<span class="_ _11"> </span>ﬁles<span class="_"> </span>stored<span class="_ _11"> </span>on<span class="_"> </span>W<span class="_ _1"></span>eb<span class="_"> </span>servers).<span class="_ _11"> </span>F<span class="_ _1"></span>or<span class="_"> </span>example,<span class="_"> </span>the<span class="_"> </span>level<span class="_"> </span><span class="ff11">k<span class="_ _11"> </span><span class="ff12">+<span class="_ _10"> </span></span></span>1<span class="_ _13"> </span>storage</div><div class="t m5 x17 h26 y4665 ff7 fs19 fc1 sc0 ls0 ws0">in<span class="_"> </span>F<span class="_ _1"></span>igure<span class="_"> </span>6.22<span class="_"> </span>is<span class="_"> </span>partitioned<span class="_"> </span>into<span class="_"> </span>16<span class="_"> </span>ﬁxed-size<span class="_"> </span>blocks<span class="_ _1"></span>,<span class="_"> </span>numbered<span class="_"> </span>0<span class="_"> </span>to<span class="_"> </span>15.</div><div class="t m5 x26 h26 y4666 ff7 fs19 fc1 sc0 ls0 ws0">Similarly<span class="_ _3"></span>,<span class="_"> </span>the<span class="_"> </span>storage<span class="_"> </span>at<span class="_"> </span>level<span class="_"> </span><span class="ff11">k<span class="_ _11"> </span></span>is<span class="_"> </span>partitioned<span class="_"> </span>into<span class="_"> </span>a<span class="_"> </span>smaller<span class="_"> </span>set<span class="_"> </span>of<span class="_"> </span>blocks<span class="_"> </span>that</div><div class="t m5 x17 h46 y4667 ff7 fs19 fc1 sc0 ls0 ws0">are<span class="_ _11"> </span>the<span class="_ _16"> </span>same<span class="_ _16"> </span>size<span class="_ _11"> </span>as<span class="_ _16"> </span>the<span class="_ _16"> </span>blocks<span class="_ _11"> </span>at<span class="_ _16"> </span>level<span class="_ _16"> </span><span class="ff11">k<span class="_ _10"> </span><span class="ff12">+<span class="_ _10"> </span></span></span>1<span class="_ _1"></span>.<span class="_ _16"> </span>At<span class="_ _11"> </span>any<span class="_ _16"> </span>point<span class="_ _16"> </span>in<span class="_ _11"> </span>time,<span class="_ _11"> </span>the<span class="_ _16"> </span>cache<span class="_ _16"> </span>at</div><div class="t m5 x17 h46 y565b ff7 fs19 fc1 sc0 ls0 ws0">level<span class="_"> </span><span class="ff11">k<span class="_"> </span></span>contains<span class="_"> </span>copies<span class="_"> </span>of<span class="_"> </span>a<span class="_"> </span>subset<span class="_ _11"> </span>of<span class="_"> </span>the<span class="_ _11"> </span>blocks<span class="_"> </span>from<span class="_ _11"> </span>level<span class="_"> </span><span class="ff11">k<span class="_ _11"> </span><span class="ff12">+<span class="_ _13"> </span></span></span>1<span class="_ _0"></span>.<span class="_"> </span>F<span class="_ _1"></span>or<span class="_ _11"> </span>example<span class="_ _1"></span>,<span class="_ _11"> </span>in</div></div><div class="pi" data-data='{"ctm":[2.000000,0.000000,0.000000,2.000000,0.000000,0.000000]}'></div></div>
