<div id="pf2dc" class="pf w2 h11" data-page-no="2dc"><div class="pc pc2dc w2 h11"><img class="bi x0 y0 w1 h1" alt="" src="csapp/bg2dc.png"/><div class="t m5 xe8 h28 y9b ff6 fs1f fc2 sc0 ls0 ws0">Section<span class="_ _10"> </span>7.8<span class="_ _60"> </span>Executable<span class="_ _10"> </span>Object<span class="_ _10"> </span>Files<span class="_ _3e"> </span><span class="ffe fs1e">731</span></div><div class="t m5 x34 h26 ye7 ff7 fs19 fc2 sc0 ls0 ws0">A.<span class="_ _1f"> </span>What<span class="_"> </span>is<span class="_"> </span>the<span class="_"> </span>hex<span class="_"> </span>address<span class="_"> </span>of<span class="_"> </span>the<span class="_"> </span>relocated<span class="_"> </span>reference<span class="_"> </span>to<span class="_"> </span><span class="ffd">sum<span class="_ _10"> </span></span>in<span class="_"> </span>line<span class="_"> </span>5?</div><div class="t m5 x34 h26 y10aa ff7 fs19 fc2 sc0 ls0 ws0">B<span class="_ _3"></span>.<span class="_ _1d"> </span>What<span class="_"> </span>is<span class="_"> </span>the<span class="_"> </span>hex<span class="_"> </span>value<span class="_"> </span>of<span class="_"> </span>the<span class="_"> </span>relocated<span class="_"> </span>reference<span class="_"> </span>to<span class="_"> </span><span class="ffd">sum<span class="_ _10"> </span></span>in<span class="_"> </span>line<span class="_"> </span>5?</div><div class="t m5 x17 h47 y60b3 ffe fs2b fc1 sc0 ls0 ws0">Practice<span class="_"> </span>Problem<span class="_"> </span>7.5<span class="_ _1f"> </span><span class="fs16">(solution<span class="_"> </span>page<span class="_"> </span>754)</span></div><div class="t m5 x17 h26 y60b4 ff7 fs19 fc1 sc0 ls0 ws0">Consider<span class="_"> </span>the<span class="_"> </span>call<span class="_"> </span>to<span class="_"> </span>function<span class="_"> </span><span class="ffd">swap<span class="_ _10"> </span></span>in<span class="_"> </span>object<span class="_"> </span>ﬁle<span class="_"> </span><span class="ffd">m.o<span class="_ _10"> </span></span>(F<span class="_ _0"></span>igure<span class="_"> </span>7.5).</div><div class="t m5 x245 h2d y60b5 ffd fs1e fc2 sc0 ls0 ws0">9:<span class="_ _3f"> </span>e8<span class="_ _e"> </span>00<span class="_ _1f"> </span>00<span class="_ _1f"> </span>00<span class="_ _e"> </span>00<span class="_ _86"> </span>callq<span class="_ _1a"> </span>e<span class="_ _1f"> </span>&lt;main+0xe&gt;<span class="_ _62"> </span><span class="ff13 fs35 fc6">swap()</span></div><div class="t m5 x17 h26 y60b6 ff7 fs19 fc2 sc0 ls0 ws0">with<span class="_"> </span>the<span class="_"> </span>following<span class="_"> </span>relocation<span class="_"> </span>entry:</div><div class="t m5 x17 h2d y60b7 ffd fs1e fc2 sc0 ls0 ws0">r.offset<span class="_ _e"> </span>=<span class="_ _1f"> </span>0xa</div><div class="t m5 x17 h2d y60b8 ffd fs1e fc2 sc0 ls0 ws0">r.symbol<span class="_ _e"> </span>=<span class="_ _1f"> </span>swap</div><div class="t m5 x17 h2d y60b9 ffd fs1e fc2 sc0 ls0 ws0">r.type<span class="_ _3f"> </span>=<span class="_ _e"> </span>R_X86_64_PC32</div><div class="t m5 x17 h2d y60ba ffd fs1e fc2 sc0 ls0 ws0">r.addend<span class="_ _e"> </span>=<span class="_ _1f"> </span>-4</div><div class="t m5 x17 h26 y60bb ff7 fs19 fc2 sc0 ls0 ws0">Now<span class="_ _13"> </span>suppose<span class="_ _13"> </span>that<span class="_ _13"> </span>the<span class="_ _13"> </span>linker<span class="_ _13"> </span>relocates<span class="_ _13"> </span><span class="ffd">.text<span class="_ _13"> </span></span>in<span class="_ _13"> </span><span class="ffd">m.o<span class="_ _13"> </span></span>to<span class="_ _13"> </span>address<span class="_ _13"> </span><span class="ffd">0x4004d0<span class="_ _6"> </span></span>and<span class="_ _13"> </span><span class="ffd">swap</span></div><div class="t m5 x17 h26 y60bc ff7 fs19 fc2 sc0 ls0 ws0">to<span class="_"> </span>address<span class="_ _13"> </span><span class="ffd">0x4004e8</span>.<span class="_"> </span>T<span class="_ _1"></span>hen<span class="_"> </span>what<span class="_ _13"> </span>is<span class="_"> </span>the<span class="_ _13"> </span>value<span class="_"> </span>of<span class="_ _13"> </span>the<span class="_"> </span>relocated<span class="_ _13"> </span>reference<span class="_"> </span>to<span class="_ _13"> </span><span class="ffd">swap<span class="_ _10"> </span></span>in</div><div class="t m5 x17 h26 y60bd ff7 fs19 fc2 sc0 ls0 ws0">the<span class="_"> </span><span class="ffd">callq<span class="_ _10"> </span></span>instruction?</div><div class="t m5 x17 h3b y60be fff fs24 fc6 sc0 ls0 ws0">7.8<span class="_ _17"> </span><span class="ffe fs18">Executable<span class="_"> </span>Object<span class="_"> </span>Files</span></div><div class="t m5 x17 h26 y60bf ff7 fs19 fc1 sc0 ls0 ws0">W<span class="_ _3"></span>e<span class="_"> </span>have<span class="_"> </span>seen<span class="_"> </span>how<span class="_ _13"> </span>the<span class="_"> </span>linker<span class="_"> </span>merges<span class="_"> </span>multiple<span class="_ _13"> </span>object<span class="_"> </span>ﬁles<span class="_"> </span>into<span class="_"> </span>a<span class="_ _13"> </span>single<span class="_"> </span>executable</div><div class="t m5 x17 h26 y60c0 ff7 fs19 fc1 sc0 ls0 ws0">object<span class="_ _14"> </span>ﬁle<span class="_ _1"></span>.<span class="_ _14"> </span>Our<span class="_ _14"> </span>example<span class="_ _14"> </span>C<span class="_ _14"> </span>program,<span class="_ _15"> </span>which<span class="_ _14"> </span>began<span class="_ _14"> </span>life<span class="_ _14"> </span>as<span class="_ _14"> </span>a<span class="_ _14"> </span>collection<span class="_ _14"> </span>of<span class="_ _14"> </span>ASCII</div><div class="t m5 x17 h26 y60c1 ff7 fs19 fc1 sc0 ls0 ws0">text<span class="_ _14"> </span>ﬁles<span class="_ _1"></span>,<span class="_ _14"> </span>has<span class="_ _14"> </span>been<span class="_ _14"> </span>transformed<span class="_ _14"> </span>into<span class="_ _14"> </span>a<span class="_ _14"> </span>single<span class="_ _14"> </span>binary<span class="_ _14"> </span>ﬁle<span class="_ _14"> </span>that<span class="_ _14"> </span>contains<span class="_ _14"> </span>all<span class="_ _14"> </span>of<span class="_ _14"> </span>the</div><div class="t m5 x17 h26 y60c2 ff7 fs19 fc1 sc0 ls0 ws0">information<span class="_ _15"> </span>needed<span class="_ _21"> </span>to<span class="_ _21"> </span>load<span class="_ _15"> </span>the<span class="_ _21"> </span>program<span class="_ _21"> </span>into<span class="_ _21"> </span>memory<span class="_ _15"> </span>and<span class="_ _21"> </span>run<span class="_ _21"> </span>it.<span class="_ _21"> </span>F<span class="_ _1"></span>igure<span class="_ _21"> </span>7.13</div><div class="t m5 x17 h26 y60c3 ff7 fs19 fc1 sc0 ls0 ws0">summarizes<span class="_"> </span>the<span class="_"> </span>kinds<span class="_"> </span>of<span class="_"> </span>information<span class="_"> </span>in<span class="_"> </span>a<span class="_"> </span>typical<span class="_"> </span>ELF<span class="_"> </span>executable<span class="_"> </span>ﬁle<span class="_ _1"></span>.</div><div class="t m5 x78 h3f y60c4 ff8e fs27 fc1 sc0 ls0 ws0">Section header table </div><div class="t m5 x1a9 h3f y60c5 ff8e fs27 fc1 sc0 ls0 ws0">Describes</div><div class="t m5 x123 h3f y60c6 ff8e fs27 fc1 sc0 ls0 ws0">object file</div><div class="t m5 x22a h3f y60c7 ff8e fs27 fc1 sc0 ls0 ws0">sections</div><div class="t m5 x17 h3f y60c8 ff8e fs27 fc1 sc0 ls0 ws0">Maps contiguous file</div><div class="t m5 x22d h3f y60c9 ff8e fs27 fc1 sc0 ls0 ws0">sections to run-time</div><div class="t m5 x31 h3f y60ca ff8e fs27 fc1 sc0 ls0 ws0">memory segments</div><div class="t m5 x1a6 h40 y60cb ff8d fs28 fc1 sc0 ls0 ws0">.strtab</div><div class="t m5 xe6 h40 y60cc ff8d fs28 fc1 sc0 ls0 ws0">.line</div><div class="t m5 xb3 h40 y60cd ff8d fs28 fc1 sc0 ls0 ws0">.debug</div><div class="t m5 x1a6 h40 y60ce ff8d fs28 fc1 sc0 ls0 ws0">.symtab</div><div class="t m5 xf0 h40 y60cf ff8d fs28 fc1 sc0 ls0 ws0">.bss</div><div class="t m5 xe6 h40 y60d0 ff8d fs28 fc1 sc0 ls0 ws0">.data</div><div class="t m5 x1a6 h40 y60d1 ff8d fs28 fc1 sc0 ls0 ws0">.rodata</div><div class="t m5 xe6 h40 y60d2 ff8d fs28 fc1 sc0 ls0 ws0">.text</div><div class="t m5 xe6 h40 y60d3 ff8d fs28 fc1 sc0 ls0 ws0">.init</div><div class="t m5 x1a8 h3f y60d4 ff8e fs27 fc1 sc0 ls0 ws0">Segment header table</div><div class="t m5 x15c h3f y60d5 ff8e fs27 fc1 sc0 ls0 ws0">ELF header</div><div class="t m5 x1ff h3f y60d6 ff8e fs27 fc1 sc0 ls0 ws0">0</div><div class="t m5 x99 h3f y60d7 ff8e fs27 fc1 sc0 ls0 ws0">Read-only memory segment </div><div class="t m5 x99 h3f y60d8 ff8e fs27 fc1 sc0 ls0 ws0">(code segment)</div><div class="t m5 x99 h3f y60d9 ff8e fs27 fc1 sc0 ls0 ws0">Read/write memory segment </div><div class="t m5 x99 h3f y60da ff8e fs27 fc1 sc0 ls0 ws0">(data segment)</div><div class="t m5 x99 h3f y60db ff8e fs27 fc1 sc0 ls0 ws0">Symbol table and</div><div class="t m5 x99 h3f y60dc ff8e fs27 fc1 sc0 ls0 ws0">debugging info are not</div><div class="t m5 x99 h3f y60dd ff8e fs27 fc1 sc0 ls0 ws0">loaded into memory</div><div class="t m5 x17 h2f y126e ffe fs16 fc6 sc0 ls0 ws0">Figure<span class="_"> </span>7.13<span class="_ _66"> </span><span class="fc1">Typical<span class="_"> </span>ELF<span class="_"> </span>executable<span class="_"> </span>object<span class="_"> </span>ﬁle.</span></div></div><div class="pi" data-data='{"ctm":[2.000000,0.000000,0.000000,2.000000,0.000000,0.000000]}'></div></div>
