<div id="pf1fe" class="pf w2 h11" data-page-no="1fe"><div class="pc pc1fe w2 h11"><img class="bi x0 y0 w1 h1" alt="" src="csapp/bg1fe.png"/><div class="t m5 x5f h28 y9b ff6 fs1f fc2 sc0 ls0 ws0">Homework<span class="_ _10"> </span>Problems<span class="_ _1b"> </span><span class="ffe fs1e">509</span></div><div class="t m5 x72 h3d y2d1a ff14 fs26 fc6 sc0 ls0 ws0">.</div><div class="t m5 x26 h26 ye7 ff7 fs19 fc1 sc0 ls0 ws0">T<span class="_ _1"></span>he<span class="_ _13"> </span>GUI<span class="_ _13"> </span>(graphic<span class="_ _6"> </span>user<span class="_ _13"> </span>interface)<span class="_ _13"> </span>version<span class="_ _6"> </span>displays<span class="_ _13"> </span>the<span class="_ _6"> </span>memory<span class="_ _3"></span>,<span class="_ _13"> </span>program<span class="_ _13"> </span>code<span class="_ _1"></span>,</div><div class="t m5 x26 h26 y2a7 ff7 fs19 fc1 sc0 ls0 ws0">and<span class="_ _6"> </span>processor<span class="_ _13"> </span>state<span class="_ _6"> </span>in<span class="_ _13"> </span>graphic<span class="_ _6"> </span>windows<span class="_ _1"></span>.<span class="_ _13"> </span>T<span class="_ _3"></span>his<span class="_ _13"> </span>provides<span class="_ _6"> </span>a<span class="_ _13"> </span>way<span class="_ _6"> </span>to<span class="_ _13"> </span>readily<span class="_ _a"> </span>see<span class="_ _13"> </span>how</div><div class="t m5 x26 h26 y2a8 ff7 fs19 fc1 sc0 ls0 ws0">the<span class="_ _6"> </span>instructions<span class="_ _13"> </span>ﬂow<span class="_ _6"> </span>through<span class="_ _13"> </span>the<span class="_ _6"> </span>processors<span class="_ _1"></span>.<span class="_ _13"> </span>T<span class="_ _1"></span>he<span class="_ _6"> </span>control<span class="_ _13"> </span>panel<span class="_ _6"> </span>also<span class="_ _13"> </span>allows<span class="_ _6"> </span>you</div><div class="t m5 x26 h26 y2f7 ff7 fs19 fc1 sc0 ls0 ws0">to<span class="_"> </span>reset,<span class="_"> </span>single-step<span class="_ _1"></span>,<span class="_"> </span>or<span class="_"> </span>run<span class="_"> </span>the<span class="_"> </span>simulator<span class="_"> </span>interactively<span class="_ _3"></span>.</div><div class="t m5 x72 h3d y4689 ff14 fs26 fc6 sc0 ls0 ws0">.</div><div class="t m5 x26 h26 ye9a ff7 fs19 fc1 sc0 ls0 ws0">T<span class="_ _1"></span>he<span class="_"> </span>text<span class="_"> </span>version<span class="_"> </span>runs<span class="_ _11"> </span>the<span class="_"> </span>same<span class="_"> </span>simulator,<span class="_"> </span>but<span class="_"> </span>it<span class="_"> </span>only<span class="_"> </span>displays<span class="_"> </span>information<span class="_"> </span>by</div><div class="t m5 x26 h26 y468a ff7 fs19 fc1 sc0 ls0 ws0">printing<span class="_ _14"> </span>to<span class="_ _14"> </span>the<span class="_ _15"> </span>terminal.<span class="_ _14"> </span>T<span class="_ _0"></span>his<span class="_ _14"> </span>version<span class="_ _15"> </span>is<span class="_ _14"> </span>not<span class="_ _14"> </span>as<span class="_ _15"> </span>useful<span class="_ _14"> </span>for<span class="_ _14"> </span>debugging,<span class="_ _15"> </span>but<span class="_ _14"> </span>it</div><div class="t m5 x26 h26 y468b ff7 fs19 fc1 sc0 ls0 ws0">allows<span class="_"> </span>automated<span class="_"> </span>testing<span class="_"> </span>of<span class="_"> </span>the<span class="_"> </span>processor.</div><div class="t m5 x26 h26 y468c ff7 fs19 fc1 sc0 ls0 ws0">T<span class="_ _1"></span>he<span class="_ _f"> </span>control<span class="_ _f"> </span>logic<span class="_ _f"> </span>for<span class="_ _e"> </span>the<span class="_ _21"> </span>simulators<span class="_ _f"> </span>is<span class="_ _f"> </span>generated<span class="_ _f"> </span>by<span class="_ _f"> </span>translating<span class="_ _f"> </span>the<span class="_ _f"> </span>HCL</div><div class="t m5 x17 h26 y468d ff7 fs19 fc1 sc0 ls0 ws0">declarations<span class="_ _13"> </span>of<span class="_ _13"> </span>the<span class="_ _13"> </span>logic<span class="_ _13"> </span>blocks<span class="_ _13"> </span>into<span class="_ _13"> </span>C<span class="_ _13"> </span>code.<span class="_ _13"> </span>T<span class="_ _1"></span>his<span class="_ _13"> </span>code<span class="_ _13"> </span>is<span class="_ _13"> </span>then<span class="_ _13"> </span>compiled<span class="_ _13"> </span>and<span class="_ _13"> </span>linked</div><div class="t m5 x17 h26 y468e ff7 fs19 fc1 sc0 ls0 ws0">with<span class="_ _11"> </span>the<span class="_ _11"> </span>rest<span class="_ _16"> </span>of<span class="_ _11"> </span>the<span class="_ _11"> </span>simulation<span class="_ _16"> </span>code<span class="_ _1"></span>.<span class="_ _11"> </span>This<span class="_"> </span>combination<span class="_ _16"> </span>makes<span class="_"> </span>it<span class="_ _16"> </span>possible<span class="_ _11"> </span>for<span class="_ _11"> </span>you</div><div class="t m5 x17 h26 y468f ff7 fs19 fc1 sc0 ls0 ws0">to<span class="_"> </span>test<span class="_ _13"> </span>out<span class="_"> </span>variants<span class="_"> </span>of<span class="_ _13"> </span>the<span class="_"> </span>original<span class="_"> </span>designs<span class="_ _13"> </span>using<span class="_"> </span>the<span class="_"> </span>simulators<span class="_ _3"></span>.<span class="_"> </span>T<span class="_ _7"></span>esting<span class="_"> </span>scripts<span class="_"> </span>are</div><div class="t m5 x17 h26 y4690 ff7 fs19 fc1 sc0 ls0 ws0">also<span class="_ _13"> </span>available<span class="_"> </span>that<span class="_ _13"> </span>thoroughly<span class="_ _13"> </span>exercise<span class="_"> </span>the<span class="_ _13"> </span>different<span class="_"> </span>instructions<span class="_ _13"> </span>and<span class="_ _13"> </span>the<span class="_"> </span>different</div><div class="t m5 x17 h26 y4691 ff7 fs19 fc1 sc0 ls0 ws0">hazard<span class="_"> </span>possibilities<span class="_ _1"></span>.</div><div class="t m5 x17 h29 y4692 ffe fs14 fc1 sc0 ls0 ws0">Bibliographic<span class="_"> </span>Notes</div><div class="t m5 x17 h26 y4693 ff7 fs19 fc1 sc0 ls0 ws0">F<span class="_ _1"></span>or<span class="_ _11"> </span>those<span class="_ _11"> </span>interested<span class="_ _11"> </span>in<span class="_ _11"> </span>learning<span class="_ _11"> </span>more<span class="_ _11"> </span>about<span class="_ _16"> </span>logic<span class="_"> </span>design,<span class="_ _16"> </span>the<span class="_"> </span>Katz<span class="_ _16"> </span>and<span class="_"> </span>Borriello</div><div class="t m5 x17 h26 y4694 ff7 fs19 fc1 sc0 ls0 ws0">logic<span class="_"> </span>design<span class="_"> </span>textbook<span class="_"> </span>[58]<span class="_"> </span>is<span class="_"> </span>a<span class="_"> </span>standard<span class="_"> </span>introductory<span class="_"> </span>text,<span class="_"> </span>emphasizing<span class="_"> </span>the<span class="_"> </span>use<span class="_"> </span>of</div><div class="t m5 x17 h26 y4695 ff7 fs19 fc1 sc0 ls0 ws0">hardware<span class="_ _13"> </span>description<span class="_ _13"> </span>languages<span class="_ _3"></span>.<span class="_ _13"> </span>Hennessy<span class="_ _13"> </span>and<span class="_ _13"> </span>Patterson’<span class="_ _0"></span>s<span class="_ _13"> </span>computer<span class="_ _13"> </span>architecture</div><div class="t m5 x17 h26 y4696 ff7 fs19 fc1 sc0 ls0 ws0">textbook<span class="_ _15"> </span>[46]<span class="_ _15"> </span>provides<span class="_ _21"> </span>extensive<span class="_ _15"> </span>coverage<span class="_ _15"> </span>of<span class="_ _21"> </span>processor<span class="_ _15"> </span>design,<span class="_ _f"> </span>including<span class="_ _15"> </span>both</div><div class="t m5 x17 h26 y4697 ff7 fs19 fc1 sc0 ls0 ws0">simple<span class="_ _6"> </span>pipelines<span class="_ _1"></span>,<span class="_ _13"> </span>such<span class="_ _6"> </span>as<span class="_ _13"> </span>the<span class="_ _6"> </span>one<span class="_ _6"> </span>we<span class="_ _13"> </span>have<span class="_ _6"> </span>presented<span class="_ _13"> </span>here<span class="_ _1"></span>,<span class="_ _13"> </span>and<span class="_ _6"> </span>advanced<span class="_ _6"> </span>processors</div><div class="t m5 x17 h26 y4698 ff7 fs19 fc1 sc0 ls0 ws0">that<span class="_ _14"> </span>execute<span class="_ _15"> </span>more<span class="_ _15"> </span>instructions<span class="_ _14"> </span>in<span class="_ _15"> </span>parallel.<span class="_ _15"> </span>Shriver<span class="_ _14"> </span>and<span class="_ _15"> </span>Smith<span class="_ _15"> </span>[101]<span class="_ _14"> </span>give<span class="_ _15"> </span>a<span class="_ _15"> </span>very</div><div class="t m5 x17 h26 y4699 ff7 fs19 fc1 sc0 ls0 ws0">thorough<span class="_ _f"> </span>presentation<span class="_ _e"> </span>of<span class="_ _f"> </span>an<span class="_ _e"> </span>Intel-compatible<span class="_ _f"> </span>x86-64<span class="_ _e"> </span>processor<span class="_ _f"> </span>manufactured</div><div class="t m5 x17 h26 y469a ff7 fs19 fc1 sc0 ls0 ws0">by<span class="_"> </span>AMD<span class="_ _3"></span>.</div><div class="t m5 x17 h29 y469b ffe fs14 fc1 sc0 ls0 ws0">Homework<span class="_"> </span>Problems</div><div class="t m5 x17 h73 y469c ffe fs1e fc6 sc0 ls0 ws0">4.45<span class="_ _23"> </span><span class="ff10 fs19">◆</span></div><div class="t m5 x17 h26 y469d ff7 fs19 fc1 sc0 ls0 ws0">In<span class="_"> </span>Section<span class="_"> </span>3.4.2,<span class="_ _11"> </span>the<span class="_"> </span>x86-64<span class="_ _11"> </span><span class="ffd">pushq<span class="_ _10"> </span></span>instruction<span class="_ _11"> </span>was<span class="_"> </span>described<span class="_"> </span>as<span class="_ _11"> </span>decrementing<span class="_"> </span>the</div><div class="t m5 x17 h26 y469e ff7 fs19 fc1 sc0 ls0 ws0">stack<span class="_"> </span>pointer<span class="_"> </span>and<span class="_ _11"> </span>then<span class="_"> </span>storing<span class="_ _11"> </span>the<span class="_"> </span>register<span class="_ _11"> </span>at<span class="_"> </span>the<span class="_ _11"> </span>stack<span class="_"> </span>pointer<span class="_ _11"> </span>location.<span class="_"> </span>So<span class="_ _0"></span>,<span class="_"> </span>if<span class="_ _11"> </span>we</div><div class="t m5 x17 h26 y469f ff7 fs19 fc1 sc0 ls0 ws0">had<span class="_ _14"> </span>an<span class="_ _14"> </span>instruction<span class="_ _14"> </span>of<span class="_ _15"> </span>the<span class="_ _14"> </span>form<span class="_ _14"> </span><span class="ffd">pushq<span class="_ _16"> </span><span class="ff13">REG</span></span>,<span class="_ _15"> </span>for<span class="_ _14"> </span>some<span class="_ _14"> </span>register<span class="_ _14"> </span><span class="ffa">REG<span class="_ _2"></span></span>,<span class="_ _14"> </span>it<span class="_ _15"> </span>would<span class="_ _14"> </span>be</div><div class="t m5 x17 h26 y46a0 ff7 fs19 fc1 sc0 ls0 ws0">equivalent<span class="_"> </span>to<span class="_"> </span>the<span class="_"> </span>code<span class="_"> </span>sequence</div><div class="t m5 x72 h2d y46a1 ffd fs1e fc2 sc0 ls0 ws0">subq<span class="_ _e"> </span>$8,%rsp<span class="_ _6b"> </span><span class="ff13 fs35 fc6">Decrement<span class="_ _f"> </span>stack<span class="_ _e"> </span>pointer</span></div><div class="t m5 x72 h2d y46a2 ffd fs1e fc2 sc0 ls0 ws0">movq<span class="_ _e"> </span><span class="ff13">REG</span>,<span class="_ _1f"> </span>(%rsp)<span class="_ _6f"> </span><span class="ff13 fs35 fc6">Store<span class="_ _f"> </span>REG<span class="_ _e"> </span>on<span class="_ _21"> </span>stack</span></div><div class="t m5 x34 h26 y46a3 ff7 fs19 fc2 sc0 ls0 ws0">A.<span class="_ _1f"> </span>In<span class="_ _16"> </span>light<span class="_ _16"> </span>of<span class="_ _16"> </span>analysis<span class="_ _14"> </span>done<span class="_ _16"> </span>in<span class="_ _16"> </span>Practice<span class="_ _16"> </span>Problem<span class="_ _14"> </span>4.7,<span class="_ _14"> </span>does<span class="_ _16"> </span>this<span class="_ _16"> </span>code<span class="_ _16"> </span>sequence</div><div class="t m5 x2d h26 y46a4 ff7 fs19 fc2 sc0 ls0 ws0">correctly<span class="_"> </span>describe<span class="_"> </span>the<span class="_"> </span>behavior<span class="_"> </span>of<span class="_"> </span>the<span class="_"> </span>instruction<span class="_"> </span><span class="ffd">pushq<span class="_ _11"> </span>%rsp</span>?<span class="_"> </span>Explain.</div><div class="t m5 x34 h26 y46a5 ff7 fs19 fc2 sc0 ls0 ws0">B<span class="_ _3"></span>.<span class="_ _1d"> </span>How<span class="_"> </span>could<span class="_ _13"> </span>you<span class="_ _13"> </span>rewrite<span class="_"> </span>the<span class="_ _13"> </span>code<span class="_ _13"> </span>sequence<span class="_"> </span>so<span class="_ _13"> </span>that<span class="_"> </span>it<span class="_ _13"> </span>correctly<span class="_ _13"> </span>describes<span class="_"> </span>both</div><div class="t m5 x2d h26 y46a6 ff7 fs19 fc2 sc0 ls0 ws0">the<span class="_"> </span>cases<span class="_"> </span>where<span class="_"> </span><span class="ff13">REG<span class="_ _10"> </span></span>is<span class="_"> </span><span class="ffd">%rsp<span class="_ _10"> </span></span>as<span class="_"> </span>well<span class="_"> </span>as<span class="_"> </span>any<span class="_"> </span>other<span class="_"> </span>register?</div><div class="t m5 x17 h73 y13c0 ffe fs1e fc6 sc0 ls0 ws0">4.46<span class="_ _23"> </span><span class="ff10 fs19">◆</span></div><div class="t m5 x17 h26 y13c1 ff7 fs19 fc1 sc0 ls0 ws0">In<span class="_ _11"> </span>Section<span class="_ _16"> </span>3.4.2,<span class="_ _11"> </span>the<span class="_ _16"> </span>x86-64<span class="_ _11"> </span><span class="ffd">popq<span class="_ _11"> </span></span>instruction<span class="_ _16"> </span>was<span class="_ _11"> </span>described<span class="_ _11"> </span>as<span class="_ _16"> </span>copying<span class="_ _11"> </span>the<span class="_ _16"> </span>result</div><div class="t m5 x17 h26 y13c2 ff7 fs19 fc1 sc0 ls0 ws0">from<span class="_ _16"> </span>the<span class="_ _14"> </span>top<span class="_ _16"> </span>of<span class="_ _14"> </span>the<span class="_ _16"> </span>stack<span class="_ _14"> </span>to<span class="_ _16"> </span>the<span class="_ _14"> </span>destination<span class="_ _16"> </span>register<span class="_ _14"> </span>and<span class="_ _16"> </span>then<span class="_ _14"> </span>incrementing<span class="_ _16"> </span>the</div><div class="t m5 x17 h26 y13c3 ff7 fs19 fc1 sc0 ls0 ws0">stack<span class="_ _21"> </span>pointer.<span class="_ _15"> </span>So,<span class="_ _21"> </span>if<span class="_ _21"> </span>we<span class="_ _f"> </span>had<span class="_ _21"> </span>an<span class="_ _21"> </span>instruction<span class="_ _21"> </span>of<span class="_ _21"> </span>the<span class="_ _21"> </span>form<span class="_ _f"> </span><span class="ffd">popq<span class="_ _16"> </span><span class="ff13">REG</span></span>,<span class="_ _f"> </span>it<span class="_ _21"> </span>would<span class="_ _21"> </span>be</div><div class="t m5 x17 h26 y1a80 ff7 fs19 fc1 sc0 ls0 ws0">equivalent<span class="_"> </span>to<span class="_"> </span>the<span class="_"> </span>code<span class="_"> </span>sequence</div></div><div class="pi" data-data='{"ctm":[2.000000,0.000000,0.000000,2.000000,0.000000,0.000000]}'></div></div>
