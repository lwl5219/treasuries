<div id="pf209" class="pf w2 h11" data-page-no="209"><div class="pc pc209 w2 h11"><img class="bi x0 y0 w1 h1" alt="" src="csapp/bg209.png"/><div class="t m5 x14 h28 y9b ffe fs1e fc2 sc0 ls0 ws0">520<span class="_ _1b"> </span><span class="ff6 fs1f">Chapter<span class="_ _10"> </span>4<span class="_ _3d"> </span>Processor<span class="_ _10"> </span>Architecture</span></div><div class="t m5 x1b0 h2d ye7 ff6 fs20 fc6 sc0 ls0 ws0">14<span class="_ _70"> </span><span class="ffd fs1e fc2">addq<span class="_ _e"> </span>%r10,%rax<span class="_ _86"> </span>#<span class="_ _1f"> </span>Add<span class="_ _1f"> </span>to<span class="_ _e"> </span>sum</span></div><div class="t m5 x1b0 h2d yc4d ff6 fs20 fc6 sc0 ls0 ws0">15<span class="_ _70"> </span><span class="ffd fs1e fc2">addq<span class="_ _e"> </span>%r8,%rdi<span class="_ _6b"> </span>#<span class="_ _1f"> </span>start++</span></div><div class="t m5 x1b0 h2d yecb ff6 fs20 fc6 sc0 ls0 ws0">16<span class="_ _70"> </span><span class="ffd fs1e fc2">subq<span class="_ _e"> </span>%r9,%rsi<span class="_ _6b"> </span>#<span class="_ _1f"> </span>count--</span></div><div class="t m5 x1b0 h2d yecc ff6 fs20 fc6 sc0 ls0 ws0">17<span class="_ _1c"> </span><span class="ffd fs1e fc2">test:</span></div><div class="t m5 x1b0 h2d yecd ff6 fs20 fc6 sc0 ls0 ws0">18<span class="_ _70"> </span><span class="ffd fs1e fc2">jne<span class="_ _46"> </span>loop<span class="_ _35"> </span>#<span class="_ _1f"> </span>Stop<span class="_ _e"> </span>when<span class="_ _1f"> </span>0</span></div><div class="t m5 x1d h28 y4801 ffe fs1e fc6 sc0 ls0 ws0">Solution<span class="_"> </span>to<span class="_"> </span>Problem<span class="_"> </span>4.7</div><div class="t m5 x1ed h2f y4802 ffe fs16 fc6 sc0 ls0 ws0">(page<span class="_"> </span>406)</div><div class="t m5 x1d h26 y4803 ff7 fs19 fc1 sc0 ls0 ws0">Although<span class="_ _13"> </span>it<span class="_"> </span>is<span class="_ _13"> </span>hard<span class="_ _13"> </span>to<span class="_"> </span>imagine<span class="_ _13"> </span>any<span class="_ _13"> </span>practical<span class="_"> </span>use<span class="_ _13"> </span>for<span class="_ _13"> </span>this<span class="_"> </span>particular<span class="_ _13"> </span>instruction,<span class="_ _13"> </span>it<span class="_"> </span>is</div><div class="t m5 x1d h26 y4804 ff7 fs19 fc1 sc0 ls0 ws0">important<span class="_"> </span>when<span class="_"> </span>designing<span class="_ _11"> </span>a<span class="_"> </span>system<span class="_ _11"> </span>to<span class="_"> </span>avoid<span class="_"> </span>any<span class="_ _11"> </span>ambiguities<span class="_"> </span>in<span class="_ _11"> </span>the<span class="_"> </span>speciﬁcation.</div><div class="t m5 x1d h26 y4805 ff7 fs19 fc1 sc0 ls0 ws0">W<span class="_ _3"></span>e<span class="_"> </span>want<span class="_ _13"> </span>to<span class="_"> </span>determine<span class="_ _13"> </span>a<span class="_ _13"> </span>reasonable<span class="_"> </span>convention<span class="_ _13"> </span>for<span class="_"> </span>the<span class="_ _13"> </span>instruction’s<span class="_ _13"> </span>behavior<span class="_"> </span>and</div><div class="t m5 x1d h26 y4806 ff7 fs19 fc1 sc0 ls0 ws0">to<span class="_"> </span>make<span class="_"> </span>sure<span class="_"> </span>each<span class="_"> </span>of<span class="_"> </span>our<span class="_"> </span>implementations<span class="_"> </span>adheres<span class="_"> </span>to<span class="_"> </span>this<span class="_"> </span>convention.</div><div class="t m5 x29 h26 y4807 ff7 fs19 fc1 sc0 lsd ws0">Th<span class="_ _2"></span>e<span class="_ _14"> </span><span class="ffd ls0">subq<span class="_ _16"> </span><span class="ff7">instruction<span class="_ _14"> </span>in<span class="_ _16"> </span>this<span class="_ _16"> </span>test<span class="_ _16"> </span>compares<span class="_ _16"> </span>the<span class="_ _14"> </span>starting<span class="_ _16"> </span>value<span class="_ _16"> </span>of<span class="_ _16"> </span></span>%rsp<span class="_ _16"> </span><span class="ff7">to<span class="_ _14"> </span>the</span></span></div><div class="t m5 x1d h26 y4808 ff7 fs19 fc1 sc0 ls0 ws0">value<span class="_ _16"> </span>pushed<span class="_ _14"> </span>onto<span class="_ _14"> </span>the<span class="_ _14"> </span>stack.<span class="_ _14"> </span>T<span class="_ _1"></span>he<span class="_ _14"> </span>fact<span class="_ _14"> </span>that<span class="_ _14"> </span>the<span class="_ _16"> </span>result<span class="_ _14"> </span>of<span class="_ _14"> </span>this<span class="_ _14"> </span>subtraction<span class="_ _14"> </span>is<span class="_ _16"> </span>zero</div><div class="t m5 x1d h26 y4809 ff7 fs19 fc1 sc0 ls0 ws0">implies<span class="_"> </span>that<span class="_"> </span>the<span class="_"> </span>old<span class="_"> </span>value<span class="_"> </span>of<span class="_"> </span><span class="ffd">%rsp<span class="_ _10"> </span></span>gets<span class="_"> </span>pushed.</div><div class="t m5 x1d h28 y480a ffe fs1e fc6 sc0 ls0 ws0">Solution<span class="_"> </span>to<span class="_"> </span>Problem<span class="_"> </span>4.8<span class="_ _e"> </span><span class="fs16">(page<span class="_"> </span>407)</span></div><div class="t m5 x1d h26 y480b ff7 fs19 fc1 sc0 ls0 ws0">It<span class="_ _16"> </span>is<span class="_ _11"> </span>even<span class="_ _16"> </span>more<span class="_ _16"> </span>difﬁcult<span class="_ _16"> </span>to<span class="_ _16"> </span>imagine<span class="_ _16"> </span>why<span class="_ _11"> </span>anyone<span class="_ _16"> </span>would<span class="_ _16"> </span>want<span class="_ _16"> </span>to<span class="_ _16"> </span>pop<span class="_ _11"> </span>to<span class="_ _16"> </span>the<span class="_ _16"> </span>stack</div><div class="t m5 x1d h26 y480c ff7 fs19 fc1 sc0 ls0 ws0">pointer.<span class="_ _21"> </span>Still,<span class="_ _1f"> </span>we<span class="_ _f"> </span>should<span class="_ _f"> </span>decide<span class="_ _e"> </span>on<span class="_ _f"> </span>a<span class="_ _f"> </span>convention<span class="_ _e"> </span>and<span class="_ _21"> </span>stick<span class="_ _e"> </span>with<span class="_ _f"> </span>it.<span class="_ _f"> </span>This<span class="_ _21"> </span>code</div><div class="t m5 x1d h26 y480d ff7 fs19 fc1 sc0 ls0 ws0">sequence<span class="_ _14"> </span>pushes<span class="_ _16"> </span><span class="ffd">0xabcd<span class="_ _14"> </span></span>onto<span class="_ _14"> </span>the<span class="_ _14"> </span>stack,<span class="_ _15"> </span>pops<span class="_ _14"> </span>to<span class="_ _14"> </span><span class="ffd">%rsp</span>,<span class="_ _14"> </span>and<span class="_ _14"> </span>returns<span class="_ _14"> </span>the<span class="_ _14"> </span>popped</div><div class="t m5 x1d h26 y480e ff7 fs19 fc1 sc0 ls0 ws0">value<span class="_ _1"></span>.<span class="_"> </span>Since<span class="_ _13"> </span>the<span class="_ _13"> </span>result<span class="_ _13"> </span>equals<span class="_ _13"> </span><span class="ffd">0xabcd</span>,<span class="_"> </span>we<span class="_ _13"> </span>can<span class="_ _13"> </span>deduce<span class="_ _13"> </span>that<span class="_ _13"> </span><span class="ffd">popq<span class="_ _13"> </span>%rsp<span class="_ _10"> </span></span>sets<span class="_ _13"> </span>the<span class="_ _13"> </span>stack</div><div class="t m5 x1d h26 y480f ff7 fs19 fc1 sc0 ls0 ws0">pointer<span class="_ _6"> </span>to<span class="_ _13"> </span>the<span class="_ _6"> </span>value<span class="_ _13"> </span>read<span class="_ _6"> </span>from<span class="_ _13"> </span>memory<span class="_ _7"></span>.<span class="_ _13"> </span>It<span class="_ _6"> </span>is<span class="_ _13"> </span>therefore<span class="_ _6"> </span>equivalent<span class="_ _13"> </span>to<span class="_ _6"> </span>the<span class="_ _6"> </span>instruction</div><div class="t m5 x1d h26 y4810 ffd fs19 fc1 sc0 ls0 ws0">mrmovq<span class="_ _11"> </span>(%rsp),%rsp<span class="ff7">.</span></div><div class="t m5 x1d h28 y4811 ffe fs1e fc6 sc0 ls0 ws0">Solution<span class="_"> </span>to<span class="_"> </span>Problem<span class="_"> </span>4.9<span class="_ _e"> </span><span class="fs16">(page<span class="_"> </span>410)</span></div><div class="t m5 x1d h26 y4812 ff7 fs19 fc1 sc0 lsd ws0">Th<span class="_ _2"></span>e<span class="_ _11"> </span><span class="ff9 ls0">exclusive-or<span class="_ _10"> </span><span class="ff7">function<span class="_"> </span>requires<span class="_"> </span>that<span class="_"> </span>the<span class="_"> </span>2<span class="_"> </span>bits<span class="_"> </span>have<span class="_"> </span>opposite<span class="_"> </span>values:</span></span></div><div class="t m5 x1d h2d y4813 ffd fs1e fc2 sc0 ls0 ws0">bool<span class="_ _e"> </span>xor<span class="_ _1f"> </span>=<span class="_ _1f"> </span>(!a<span class="_ _e"> </span>&amp;&amp;<span class="_ _1f"> </span>b)<span class="_ _e"> </span>||<span class="_ _1f"> </span>(a<span class="_ _1f"> </span>&amp;&amp;<span class="_ _e"> </span>!b);</div><div class="t m5 x29 h26 y2155 ff7 fs19 fc2 sc0 ls0 ws0">In<span class="_"> </span>general,<span class="_"> </span>the<span class="_ _13"> </span>signals<span class="_"> </span><span class="ffd">eq<span class="_ _10"> </span></span>and<span class="_"> </span><span class="ffd">xor<span class="_ _10"> </span></span>will<span class="_ _13"> </span>be<span class="_"> </span>complements<span class="_"> </span>of<span class="_"> </span>each<span class="_"> </span>other<span class="_ _1"></span>.<span class="_"> </span>T<span class="_ _0"></span>hat<span class="_"> </span>is<span class="_ _3"></span>,</div><div class="t m5 x1d h26 y4814 ff7 fs19 fc2 sc0 ls0 ws0">one<span class="_"> </span>will<span class="_"> </span>equal<span class="_"> </span>1<span class="_"> </span>whenever<span class="_"> </span>the<span class="_"> </span>other<span class="_"> </span>is<span class="_"> </span>0.</div><div class="t m5 x1d h28 y4815 ffe fs1e fc6 sc0 ls0 ws0">Solution<span class="_"> </span>to<span class="_"> </span>Problem<span class="_"> </span>4.10<span class="_ _e"> </span><span class="fs16">(page<span class="_"> </span>413)</span></div><div class="t m5 x1d h26 y4816 ff7 fs19 fc1 sc0 ls0 ws0">T<span class="_ _1"></span>he<span class="_"> </span>outputs<span class="_ _13"> </span>of<span class="_ _13"> </span>the<span class="_ _13"> </span><span class="ff9">exclusive-or<span class="_ _13"> </span></span>circuits<span class="_ _13"> </span>will<span class="_ _13"> </span>be<span class="_"> </span>the<span class="_ _13"> </span>complements<span class="_ _13"> </span>of<span class="_ _13"> </span>the<span class="_"> </span>bit<span class="_ _13"> </span>equal-</div><div class="t m5 x1d h26 y4817 ff7 fs19 fc1 sc0 ls0 ws0">ity<span class="_ _16"> </span>values<span class="_ _1"></span>.<span class="_ _14"> </span>Using<span class="_ _16"> </span>DeMorgan’s<span class="_ _16"> </span>laws<span class="_ _14"> </span>(W<span class="_ _3"></span>eb<span class="_ _14"> </span>Aside<span class="_ _14"> </span><span class="ff9">da<span class="_ _3"></span>ta:bool<span class="_ _16"> </span><span class="ff7">on<span class="_ _16"> </span>page<span class="_ _14"> </span>88),<span class="_ _14"> </span>we<span class="_ _14"> </span>can</span></span></div><div class="t m5 x1d h26 y4818 ff7 fs19 fc1 sc0 ls0 ws0">implement<span class="_"> </span><span class="ff9">and<span class="_ _10"> </span></span>using<span class="_"> </span><span class="ff9">or<span class="_ _10"> </span></span>and<span class="_"> </span><span class="ff9">not</span>,<span class="_"> </span>yielding<span class="_"> </span>the<span class="_"> </span>circuit<span class="_"> </span>shown<span class="_"> </span>in<span class="_"> </span>F<span class="_ _1"></span>igure<span class="_"> </span>4.71.</div><div class="t m5 x1d h28 y4819 ffe fs1e fc6 sc0 ls0 ws0">Solution<span class="_"> </span>to<span class="_"> </span>Problem<span class="_"> </span>4.11<span class="_ _e"> </span><span class="fs16">(page<span class="_"> </span>415)</span></div><div class="t m5 x1d h26 y481a ff7 fs19 fc1 sc0 ls0 ws0">W<span class="_ _3"></span>e<span class="_"> </span>can<span class="_"> </span>see<span class="_"> </span>that<span class="_"> </span>the<span class="_"> </span>second<span class="_"> </span>part<span class="_"> </span>of<span class="_"> </span>the<span class="_"> </span>case<span class="_"> </span>expression<span class="_"> </span>can<span class="_"> </span>be<span class="_"> </span>written<span class="_"> </span>as</div><div class="t m5 x22b h2d y481b ffd fs1e fc2 sc0 ls33 ws0">B&lt;<span class="_ _41"></span>=C<span class="_ _86"> </span>:B<span class="_ _41"></span>;</div><div class="t m5 x1d h26 y481c ff7 fs19 fc2 sc0 ls0 ws0">Since<span class="_ _13"> </span>the<span class="_ _6"> </span>ﬁrst<span class="_ _13"> </span>line<span class="_ _13"> </span>will<span class="_ _13"> </span>detect<span class="_ _6"> </span>the<span class="_ _13"> </span>case<span class="_ _13"> </span>where<span class="_ _6"> </span><span class="ffd">A<span class="_ _13"> </span></span>is<span class="_ _13"> </span>the<span class="_ _13"> </span>minimum<span class="_ _6"> </span>element,<span class="_ _13"> </span>the<span class="_ _13"> </span>second</div><div class="t m5 x1d h26 y481d ff7 fs19 fc2 sc0 ls0 ws0">line<span class="_"> </span>need<span class="_"> </span>only<span class="_"> </span>determine<span class="_"> </span>whether<span class="_"> </span><span class="ffd">B<span class="_ _10"> </span></span>or<span class="_"> </span><span class="ffd">C<span class="_ _10"> </span></span>is<span class="_"> </span>minimum.</div><div class="t m5 x1d h28 y481e ffe fs1e fc6 sc0 ls0 ws0">Solution<span class="_"> </span>to<span class="_"> </span>Problem<span class="_"> </span>4.12<span class="_ _e"> </span><span class="fs16">(page<span class="_"> </span>416)</span></div><div class="t m5 x1d h26 ye95 ff7 fs19 fc1 sc0 ls0 ws0">T<span class="_ _1"></span>his<span class="_"> </span>design<span class="_"> </span>is<span class="_"> </span>a<span class="_"> </span>variant<span class="_"> </span>of<span class="_"> </span>the<span class="_"> </span>one<span class="_"> </span>to<span class="_"> </span>ﬁnd<span class="_"> </span>the<span class="_"> </span>minimum<span class="_"> </span>of<span class="_"> </span>the<span class="_"> </span>three<span class="_"> </span>inputs:</div></div><div class="pi" data-data='{"ctm":[2.000000,0.000000,0.000000,2.000000,0.000000,0.000000]}'></div></div>
