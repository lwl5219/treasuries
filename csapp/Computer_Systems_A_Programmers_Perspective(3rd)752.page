<div id="pf2f0" class="pf w2 h11" data-page-no="2f0"><div class="pc pc2f0 w2 h11"><img class="bi x0 y0 w1 h1" alt="" src="csapp/bg2f0.png"/><div class="t m5 x5f h28 y9b ff6 fs1f fc2 sc0 ls0 ws0">Homework<span class="_ _10"> </span>Problems<span class="_ _1b"> </span><span class="ffe fs1e">751</span></div><div class="t m5 x17 h2d ye7 ff6 fs20 fc6 sc0 ls0 ws0">15<span class="_ _20"> </span><span class="ffd fs1e fc2">int<span class="_ _e"> </span>temp;</span></div><div class="t m5 x17 h2e yc4d ff6 fs20 fc6 sc0 ls0 ws0">16</div><div class="t m5 x17 h2e y5c27 ff6 fs20 fc6 sc0 ls0 ws0">17</div><div class="t m5 x142 h2d yecb ffd fs1e fc2 sc0 ls0 ws0">incr();</div><div class="t m5 x17 h2d yecc ff6 fs20 fc6 sc0 ls0 ws0">18<span class="_ _20"> </span><span class="ffd fs1e fc2">bufp1<span class="_ _e"> </span>=<span class="_ _1f"> </span>&amp;buf[1];</span></div><div class="t m5 x17 h2d yecd ff6 fs20 fc6 sc0 ls0 ws0">19<span class="_ _20"> </span><span class="ffd fs1e fc2">temp<span class="_ _e"> </span>=<span class="_ _1f"> </span>*bufp0;</span></div><div class="t m5 x17 h2d yece ff6 fs20 fc6 sc0 ls0 ws0">20<span class="_ _20"> </span><span class="ffd fs1e fc2">*bufp0<span class="_ _e"> </span>=<span class="_ _1f"> </span>*bufp1;</span></div><div class="t m5 x17 h2d yecf ff6 fs20 fc6 sc0 ls0 ws0">21<span class="_ _20"> </span><span class="ffd fs1e fc2">*bufp1<span class="_ _e"> </span>=<span class="_ _1f"> </span>temp;</span></div><div class="t m5 x17 h2d yed0 ff6 fs20 fc6 sc0 ls0 ws0">22<span class="_ _1c"> </span><span class="ffd fs1e fc2">}</span></div><div class="t m5 x26 h26 y62e6 ff7 fs19 fc2 sc0 ls0 ws0">F<span class="_ _1"></span>or<span class="_ _16"> </span>each<span class="_ _16"> </span>symbol<span class="_ _11"> </span>that<span class="_ _16"> </span>is<span class="_ _16"> </span>deﬁned<span class="_ _16"> </span>and<span class="_ _16"> </span>referenced<span class="_ _16"> </span>in<span class="_ _16"> </span><span class="ffd">swap.o</span>,<span class="_ _16"> </span>indicate<span class="_ _16"> </span>if<span class="_ _16"> </span>it<span class="_ _11"> </span>will</div><div class="t m5 x17 h26 y62e7 ff7 fs19 fc2 sc0 ls0 ws0">have<span class="_ _13"> </span>a<span class="_ _13"> </span>symbol<span class="_ _13"> </span>table<span class="_ _13"> </span>entry<span class="_"> </span>in<span class="_ _13"> </span>the<span class="_ _13"> </span><span class="ffd">.symtab<span class="_ _13"> </span></span>section<span class="_ _13"> </span>in<span class="_ _13"> </span>module<span class="_ _13"> </span><span class="ffd">swap.o</span>.<span class="_"> </span>If<span class="_ _13"> </span>so<span class="_ _1"></span>,<span class="_ _13"> </span>indicate</div><div class="t m5 x17 h26 y62e8 ff7 fs19 fc2 sc0 ls0 ws0">the<span class="_ _6"> </span>module<span class="_ _6"> </span>that<span class="_ _13"> </span>deﬁnes<span class="_ _6"> </span>the<span class="_ _6"> </span>symbol<span class="_ _6"> </span>(<span class="ffd">swap.o<span class="_ _13"> </span></span>or<span class="_ _6"> </span><span class="ffd">m.o</span>),<span class="_ _13"> </span>the<span class="_ _a"> </span>symbol<span class="_ _13"> </span>type<span class="_ _a"> </span>(local,<span class="_ _13"> </span>global,</div><div class="t m5 x17 h26 y62e9 ff7 fs19 fc2 sc0 ls0 ws0">or<span class="_"> </span>extern),<span class="_"> </span>and<span class="_"> </span>the<span class="_"> </span>section<span class="_"> </span>(<span class="ffd">.text</span>,<span class="_"> </span><span class="ffd">.data</span><span class="ls140">,o<span class="_ _4a"></span>r<span class="ffd ls0">.bss<span class="ff7">)<span class="_"> </span>it<span class="_"> </span>occupies<span class="_"> </span>in<span class="_"> </span>that<span class="_"> </span>module<span class="_ _1"></span>.</span></span></span></div><div class="t m5 x17 h31 y62ea ff7 fs21 fc2 sc0 ls0 ws0">Symbol<span class="_ _26"> </span><span class="ffd fs1e">swap.o<span class="_ _11"> </span>.symtab<span class="_ _10"> </span></span>entry?<span class="_ _26"> </span>Symbol<span class="_"> </span>type<span class="_ _26"> </span>Module<span class="_"> </span>where<span class="_"> </span>deﬁned<span class="_ _85"> </span>Section</div><div class="t m5 x17 h2d y62eb ffd fs1e fc2 sc0 ls0 ws0">buf</div><div class="t m5 x17 h2d y62ec ffd fs1e fc1 sc0 ls0 ws0">bufp0</div><div class="t m5 x17 h2d y62ed ffd fs1e fc1 sc0 ls0 ws0">bufp1</div><div class="t m5 x17 h2d y62ee ffd fs1e fc1 sc0 ls0 ws0">swap</div><div class="t m5 x17 h2d y62ef ffd fs1e fc1 sc0 ls0 ws0">temp</div><div class="t m5 x17 h2d y62f0 ffd fs1e fc1 sc0 ls0 ws0">incr</div><div class="t m5 x17 h2d y62f1 ffd fs1e fc1 sc0 ls0 ws0">count</div><div class="t m5 x17 h73 y62f2 ffe fs1e fc6 sc0 ls0 ws0">7.7<span class="_ _23"> </span><span class="ff10 fs19">◆</span></div><div class="t m5 x17 h26 y62f3 ff7 fs19 fc1 sc0 ls0 ws0">W<span class="_ _1"></span>ithout<span class="_"> </span>changing<span class="_ _13"> </span>any<span class="_ _13"> </span>variable<span class="_"> </span>names<span class="_ _3"></span>,<span class="_"> </span>modify<span class="_ _13"> </span><span class="ffd">bar5.c<span class="_ _10"> </span></span>on<span class="_ _13"> </span>page<span class="_ _13"> </span>719<span class="_"> </span>so<span class="_ _13"> </span>that<span class="_ _13"> </span><span class="ffd">foo5.c</span></div><div class="t m5 x17 h26 y62f4 ff7 fs19 fc1 sc0 ls0 ws0">prints<span class="_"> </span>the<span class="_ _13"> </span>correct<span class="_"> </span>values<span class="_ _13"> </span>of<span class="_"> </span><span class="ffd">x<span class="_ _13"> </span></span>and<span class="_"> </span><span class="ffd">y<span class="_ _13"> </span></span>(i.e.,<span class="_ _13"> </span>the<span class="_"> </span>hex<span class="_"> </span>representations<span class="_ _13"> </span>of<span class="_"> </span>integers<span class="_ _13"> </span>15213</div><div class="t m5 x17 h26 y62f5 ff7 fs19 fc1 sc0 ls0 ws0">and<span class="_"> </span>15212).</div><div class="t m5 x17 h73 y62f6 ffe fs1e fc6 sc0 ls0 ws0">7.8<span class="_ _23"> </span><span class="ff10 fs19">◆</span></div><div class="t m5 x17 h46 y62f7 ff7 fs19 fc1 sc0 ls0 ws0">In<span class="_ _11"> </span>this<span class="_ _16"> </span>problem,<span class="_ _16"> </span>let<span class="_ _11"> </span><span class="ffd">REF<span class="ff11">(</span>x<span class="ff11">.</span>i<span class="ff11">)<span class="_ _13"> </span><span class="ff12">→<span class="_ _10"> </span></span></span>DEF<span class="ff11">(</span>x<span class="ff11">.</span>k<span class="ff11">)<span class="_ _11"> </span></span></span>denote<span class="_ _16"> </span>that<span class="_ _11"> </span>the<span class="_ _16"> </span>linker<span class="_ _16"> </span>will<span class="_ _11"> </span>associate<span class="_ _16"> </span>an</div><div class="t m5 x17 h26 y62f8 ff7 fs19 fc1 sc0 ls0 ws0">arbitrary<span class="_ _13"> </span>reference<span class="_"> </span>to<span class="_ _13"> </span>symbol<span class="_ _13"> </span><span class="ffd">x<span class="_ _13"> </span></span>in<span class="_"> </span>module<span class="_ _13"> </span><span class="ffd">i<span class="_ _13"> </span></span>to<span class="_"> </span>the<span class="_ _13"> </span>deﬁnition<span class="_ _13"> </span>of<span class="_"> </span><span class="ffd">x<span class="_ _13"> </span></span>in<span class="_ _13"> </span>module<span class="_"> </span><span class="ffd">k</span><span class="ls279">.F<span class="_ _49"></span>o<span class="_ _80"></span>r</span></div><div class="t m5 x17 h26 y62f9 ff7 fs19 fc1 sc0 ls0 ws0">each<span class="_ _16"> </span>example<span class="_ _16"> </span>below<span class="_ _3"></span>,<span class="_ _16"> </span>use<span class="_ _16"> </span>this<span class="_ _16"> </span>notation<span class="_ _16"> </span>to<span class="_ _16"> </span>indicate<span class="_ _16"> </span>how<span class="_ _16"> </span>the<span class="_ _16"> </span>linker<span class="_ _16"> </span>would<span class="_ _16"> </span>resolve</div><div class="t m5 x17 h26 y62fa ff7 fs19 fc1 sc0 ls0 ws0">references<span class="_"> </span>to<span class="_ _11"> </span>the<span class="_ _11"> </span>multiply-deﬁned<span class="_ _11"> </span>symbol<span class="_ _11"> </span>in<span class="_ _11"> </span>each<span class="_ _11"> </span>module.<span class="_"> </span>If<span class="_ _11"> </span>there<span class="_ _11"> </span>is<span class="_ _11"> </span>a<span class="_ _11"> </span>link-time</div><div class="t m5 x17 h26 y62fb ff7 fs19 fc1 sc0 ls0 ws0">error<span class="_ _13"> </span>(rule<span class="_ _6"> </span>1),<span class="_ _13"> </span>write<span class="_ _13"> </span>“<span class="ff9">error</span>”.<span class="_ _13"> </span>If<span class="_ _6"> </span>the<span class="_ _13"> </span>linker<span class="_ _13"> </span>arbitrarily<span class="_ _6"> </span>chooses<span class="_ _13"> </span>one<span class="_ _13"> </span>of<span class="_ _6"> </span>the<span class="_ _13"> </span>deﬁnitions</div><div class="t m5 x17 h26 y62fc ff7 fs19 fc1 sc0 ls0 ws0">(rule<span class="_"> </span>3),<span class="_"> </span>write<span class="_"> </span>“<span class="ff9">unkno<span class="_ _0"></span>wn<span class="ff7">”.</span></span></div><div class="t m5 x34 h26 y62fd ff7 fs19 fc1 sc0 ls0 ws0">A.</div><div class="t m5 x2d h2d y62fe ffd fs1e fc2 sc0 ls0 ws0">/*<span class="_ _e"> </span>Module<span class="_ _1f"> </span>1<span class="_ _1f"> </span>*/<span class="_ _86"> </span>/*<span class="_ _e"> </span>Module<span class="_ _1f"> </span>2<span class="_ _e"> </span>*/</div><div class="t m5 x2d h2d y62ff ffd fs1e fc2 sc0 ls0 ws0">int<span class="_ _e"> </span>main()<span class="_ _16f"> </span>static<span class="_ _e"> </span>int<span class="_ _1f"> </span>main=1[</div><div class="t m5 x2d h2d y6300 ffd fs1e fc2 sc0 ls0 ws0">{<span class="_ _34"> </span>int<span class="_ _1f"> </span>p2()</div><div class="t m5 x2d h2d y6301 ffd fs1e fc2 sc0 ls274 ws0">}{</div><div class="t m5 x47 h2d y6302 ffd fs1e fc2 sc0 ls0 ws0">}</div><div class="t m5 x2d h46 y6303 ff7 fs19 fc2 sc0 ls0 ws0">(a)<span class="_ _1d"> </span><span class="ffd">REF<span class="ff11">(</span>main<span class="_ _2"></span><span class="ff11">.</span>1<span class="_ _1"></span><span class="ff11">)<span class="_ _13"> </span><span class="ff12">→<span class="_ _10"> </span><span class="ffd">DEF</span></span>(</span></span></div><div class="t m5 x49 h45 y6304 ff11 fs19 fc1 sc0 ls0 ws0">.<span class="_ _2c"> </span>)</div><div class="t m5 x2d h46 y6305 ff7 fs19 fc1 sc0 ls0 ws0">(b)<span class="_ _24"> </span><span class="ffd">REF<span class="ff11">(</span>main<span class="ff11">.</span>2<span class="ff11">)<span class="_ _13"> </span><span class="ff12">→<span class="_ _10"> </span></span></span>DEF<span class="ff11">(</span></span></div><div class="t m5 x49 h45 y6306 ff11 fs19 fc1 sc0 ls0 ws0">.<span class="_ _2c"> </span>)</div></div><div class="pi" data-data='{"ctm":[2.000000,0.000000,0.000000,2.000000,0.000000,0.000000]}'></div></div>
