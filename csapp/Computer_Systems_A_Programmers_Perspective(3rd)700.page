<div id="pf2bc" class="pf w2 h11" data-page-no="2bc"><div class="pc pc2bc w2 h11"><img class="bi x0 y0 w1 h1" alt="" src="csapp/bg2bc.png"/><div class="t m5 x107 h28 y9b ff6 fs1f fc2 sc0 ls0 ws0">Solutions<span class="_ _10"> </span>to<span class="_ _10"> </span>Practice<span class="_ _10"> </span>Problems<span class="_ _1b"> </span><span class="ffe fs1e">699</span></div><div class="t m5 x17 h28 y140c ffe fs1e fc6 sc0 ls0 ws0">Solution<span class="_"> </span>to<span class="_"> </span>Problem<span class="_"> </span>6.8</div><div class="t m5 xc3 h2f ye7 ffe fs16 fc6 sc0 ls0 ws0">(page<span class="_"> </span>645)</div><div class="t m5 x17 h26 y1d16 ff7 fs19 fc1 sc0 ls0 ws0">T<span class="_ _1"></span>he<span class="_"> </span>key<span class="_ _13"> </span>to<span class="_ _13"> </span>solving<span class="_"> </span>this<span class="_ _13"> </span>problem<span class="_ _13"> </span>is<span class="_ _13"> </span>to<span class="_"> </span>visualize<span class="_ _13"> </span>how<span class="_ _13"> </span>the<span class="_"> </span>array<span class="_ _13"> </span>is<span class="_ _13"> </span>laid<span class="_"> </span>out<span class="_ _13"> </span>in<span class="_ _13"> </span>memory</div><div class="t m5 x17 h26 y1d17 ff7 fs19 fc1 sc0 ls0 ws0">and<span class="_ _13"> </span>then<span class="_ _13"> </span>analyze<span class="_ _13"> </span>the<span class="_ _13"> </span>reference<span class="_ _13"> </span>patterns<span class="_ _3"></span>.<span class="_ _13"> </span>Function<span class="_ _13"> </span><span class="ffd">clear1<span class="_ _13"> </span></span>accesses<span class="_ _13"> </span>the<span class="_ _13"> </span>array<span class="_ _13"> </span>using</div><div class="t m5 x17 h26 y1d18 ff7 fs19 fc1 sc0 ls0 ws0">a<span class="_"> </span>stride-1<span class="_ _13"> </span>reference<span class="_"> </span>pattern<span class="_ _13"> </span>and<span class="_"> </span>thus<span class="_ _13"> </span>clearly<span class="_"> </span>has<span class="_"> </span>the<span class="_ _13"> </span>best<span class="_"> </span>spatial<span class="_ _13"> </span>locality<span class="_ _3"></span>.<span class="_"> </span>Function</div><div class="t m5 x17 h26 y1d88 ffd fs19 fc1 sc0 ls0 ws0">clear2<span class="_ _13"> </span><span class="ff7">scans<span class="_ _13"> </span>each<span class="_ _13"> </span>of<span class="_ _6"> </span>the<span class="_ _13"> </span><span class="ff11">N<span class="_ _11"> </span></span>structs<span class="_ _13"> </span>in<span class="_ _13"> </span>order,<span class="_ _13"> </span>which<span class="_ _13"> </span>is<span class="_ _13"> </span>good,<span class="_ _13"> </span>but<span class="_ _6"> </span>within<span class="_ _13"> </span>each<span class="_ _13"> </span>struct<span class="_ _13"> </span>it</span></div><div class="t m5 x17 h26 y1d89 ff7 fs19 fc1 sc0 ls0 ws0">hops<span class="_"> </span>around<span class="_"> </span>in<span class="_"> </span>a<span class="_"> </span>non-stride-1<span class="_"> </span>pattern<span class="_"> </span>at<span class="_ _13"> </span>the<span class="_"> </span>following<span class="_"> </span>offsets<span class="_"> </span>from<span class="_"> </span>the<span class="_"> </span>beginning</div><div class="t m5 x17 h26 y1d8a ff7 fs19 fc1 sc0 ls0 ws0">of<span class="_"> </span>the<span class="_"> </span>struct:<span class="_ _11"> </span>0,<span class="_"> </span>12<span class="_ _2"></span>,<span class="_"> </span>4,<span class="_"> </span>16,<span class="_ _11"> </span>8,<span class="_ _11"> </span>20.<span class="_"> </span>So<span class="_ _11"> </span><span class="ffd">clear2<span class="_ _10"> </span></span>has<span class="_ _11"> </span>worse<span class="_"> </span>spatial<span class="_ _11"> </span>locality<span class="_"> </span>than<span class="_ _11"> </span><span class="ffd">clear1</span>.</div><div class="t m5 x17 h26 y5d33 ff7 fs19 fc1 sc0 ls0 ws0">Function<span class="_ _6"> </span><span class="ffd">clear3<span class="_ _6"> </span></span>not<span class="_ _6"> </span>only<span class="_ _6"> </span>hops<span class="_ _13"> </span>around<span class="_ _a"> </span>within<span class="_ _6"> </span>each<span class="_ _13"> </span>struct,<span class="_ _6"> </span>but<span class="_ _6"> </span>also<span class="_ _6"> </span>hops<span class="_ _6"> </span>from<span class="_ _13"> </span>struct</div><div class="t m5 x17 h26 y5d34 ff7 fs19 fc1 sc0 ls0 ws0">to<span class="_"> </span>struct.<span class="_"> </span>So<span class="_"> </span><span class="ffd">clear3<span class="_ _10"> </span></span>exhibits<span class="_"> </span>worse<span class="_"> </span>spatial<span class="_"> </span>locality<span class="_"> </span>than<span class="_"> </span><span class="ffd">clear2<span class="_ _10"> </span></span>and<span class="_"> </span><span class="ffd">clear1</span>.</div><div class="t m5 x17 h28 y5d35 ffe fs1e fc6 sc0 ls0 ws0">Solution<span class="_"> </span>to<span class="_"> </span>Problem<span class="_"> </span>6.9<span class="_ _e"> </span><span class="fs16">(page<span class="_"> </span>652)</span></div><div class="t m5 x17 h26 y5d36 ff7 fs19 fc1 sc0 ls0 ws0">T<span class="_ _1"></span>he<span class="_ _13"> </span>solution<span class="_ _13"> </span>is<span class="_ _6"> </span>a<span class="_ _13"> </span>straightforward<span class="_ _6"> </span>application<span class="_ _13"> </span>of<span class="_ _13"> </span>the<span class="_ _6"> </span>deﬁnitions<span class="_ _13"> </span>of<span class="_ _6"> </span>the<span class="_ _13"> </span>various<span class="_ _6"> </span>cache</div><div class="t m5 x17 h26 y5d37 ff7 fs19 fc1 sc0 ls0 ws0">parameters<span class="_ _14"> </span>in<span class="_ _15"> </span>F<span class="_ _1"></span>igure<span class="_ _15"> </span>6.26.<span class="_ _14"> </span>Not<span class="_ _15"> </span>very<span class="_ _14"> </span>exciting,<span class="_ _15"> </span>but<span class="_ _14"> </span>you<span class="_ _15"> </span>need<span class="_ _14"> </span>to<span class="_ _15"> </span>understand<span class="_ _14"> </span>how</div><div class="t m5 x17 h26 y5d38 ff7 fs19 fc1 sc0 ls0 ws0">the<span class="_"> </span>cache<span class="_ _13"> </span>organization<span class="_"> </span>induces<span class="_"> </span>these<span class="_ _13"> </span>partitions<span class="_"> </span>in<span class="_"> </span>the<span class="_ _13"> </span>address<span class="_"> </span>bits<span class="_"> </span>before<span class="_ _13"> </span>you<span class="_"> </span>can</div><div class="t m5 x17 h26 y5d39 ff7 fs19 fc1 sc0 ls0 ws0">really<span class="_"> </span>understand<span class="_"> </span>how<span class="_"> </span>caches<span class="_"> </span>work.</div><div class="t m5 x17 h31 y5d3a ff7 fs21 fc2 sc0 ls0 ws0">Cache<span class="_ _f1"> </span><span class="ff11 ls23e">mC<span class="_ _be"> </span>B<span class="_ _12"></span>E<span class="_ _e"> </span>St<span class="_ _12"></span>s<span class="_ _32"></span>b</span></div><div class="t m5 x17 h31 y5d3b ff7 fs21 fc2 sc0 ls0 ws0">1.<span class="_ _7e"> </span>32<span class="_ _26"> </span>1,024<span class="_ _74"> </span>4<span class="_ _74"> </span>1<span class="_ _8c"> </span>256<span class="_ _26"> </span>22<span class="_ _26"> </span>8<span class="_ _26"> </span>2</div><div class="t m5 x17 h31 y5d3c ff7 fs21 fc2 sc0 ls0 ws0">2.<span class="_ _7e"> </span>32<span class="_ _26"> </span>1,024<span class="_ _74"> </span>8<span class="_ _74"> </span>4<span class="_ _28"> </span>32<span class="_ _26"> </span>24<span class="_ _26"> </span>5<span class="_ _26"> </span>3</div><div class="t m5 x17 h31 y5d3d ff7 fs21 fc2 sc0 ls0 ws0">3.<span class="_ _7e"> </span>32<span class="_ _26"> </span>1,024<span class="_ _95"> </span>32<span class="_ _f1"> </span>32<span class="_ _e2"> </span>1<span class="_ _26"> </span>27<span class="_ _26"> </span>0<span class="_ _26"> </span>5</div><div class="t m5 x17 h28 y5d3e ffe fs1e fc6 sc0 ls0 ws0">Solution<span class="_"> </span>to<span class="_"> </span>Problem<span class="_"> </span>6.10<span class="_ _e"> </span><span class="fs16">(page<span class="_"> </span>660)</span></div><div class="t m5 x17 h26 y5d3f ff7 fs19 fc1 sc0 ls0 ws0">T<span class="_ _1"></span>he<span class="_ _11"> </span>padding<span class="_ _16"> </span>eliminates<span class="_"> </span>the<span class="_ _11"> </span>conﬂict<span class="_ _16"> </span>misses<span class="_ _3"></span>.<span class="_ _16"> </span>T<span class="_ _1"></span>hus<span class="_ _1"></span>,<span class="_ _11"> </span>three-fourths<span class="_ _16"> </span>of<span class="_"> </span>the<span class="_ _11"> </span>references</div><div class="t m5 x17 h26 y5d40 ff7 fs19 fc1 sc0 ls0 ws0">are<span class="_"> </span>hits<span class="_ _1"></span>.</div><div class="t m5 x17 h28 y5d41 ffe fs1e fc6 sc0 ls0 ws0">Solution<span class="_"> </span>to<span class="_"> </span>Problem<span class="_"> </span>6.11<span class="_ _e"> </span><span class="fs16">(page<span class="_"> </span>660)</span></div><div class="t m5 x17 h26 y5d42 ff7 fs19 fc1 sc0 ls0 ws0">Sometimes<span class="_ _1"></span>,<span class="_ _13"> </span>understanding<span class="_ _13"> </span>why<span class="_ _13"> </span>something<span class="_ _13"> </span>is<span class="_ _13"> </span>a<span class="_ _13"> </span>bad<span class="_ _6"> </span>idea<span class="_ _13"> </span>helps<span class="_ _13"> </span>you<span class="_ _13"> </span>understand<span class="_ _13"> </span>why</div><div class="t m5 x17 h26 y5d43 ff7 fs19 fc1 sc0 ls0 ws0">the<span class="_ _13"> </span>alternative<span class="_"> </span>is<span class="_ _13"> </span>a<span class="_"> </span>good<span class="_ _13"> </span>idea.<span class="_"> </span>Here<span class="_ _1"></span>,<span class="_"> </span>the<span class="_ _13"> </span>bad<span class="_ _13"> </span>idea<span class="_"> </span>we<span class="_ _13"> </span>are<span class="_"> </span>looking<span class="_ _13"> </span>at<span class="_"> </span>is<span class="_ _13"> </span>indexing<span class="_"> </span>the</div><div class="t m5 x17 h26 y5d44 ff7 fs19 fc1 sc0 ls0 ws0">cache<span class="_"> </span>with<span class="_"> </span>the<span class="_"> </span>high-order<span class="_"> </span>bits<span class="_"> </span>instead<span class="_"> </span>of<span class="_"> </span>the<span class="_"> </span>middle<span class="_"> </span>bits<span class="_ _1"></span>.</div><div class="t m5 x34 h26 y5d45 ff7 fs19 fc1 sc0 ls0 ws0">A.<span class="_ _1f"> </span>W<span class="_ _1"></span>ith<span class="_ _15"> </span>high-order<span class="_ _21"> </span>bit<span class="_ _15"> </span>indexing,<span class="_ _21"> </span>each<span class="_ _15"> </span>contiguous<span class="_ _15"> </span>array<span class="_ _15"> </span>chunk<span class="_ _21"> </span>consists<span class="_ _15"> </span>of<span class="_ _15"> </span>2</div><div class="t m5 x16b h50 y5d46 ff11 fs25 fc1 sc0 ls0 ws0">t</div><div class="t m5 x2d h26 y5d47 ff7 fs19 fc1 sc0 ls0 ws0">blocks<span class="_ _1"></span>,<span class="_"> </span>where<span class="_ _13"> </span><span class="ff11">t<span class="_"> </span></span>is<span class="_"> </span>the<span class="_"> </span>number<span class="_ _13"> </span>of<span class="_"> </span>tag<span class="_"> </span>bits<span class="_ _3"></span>.<span class="_"> </span>T<span class="_ _1"></span>hus<span class="_ _1"></span>,<span class="_"> </span>the<span class="_"> </span>ﬁrst<span class="_"> </span>2</div><div class="t m5 x19c h50 y5d48 ff11 fs25 fc1 sc0 ls0 ws0">t</div><div class="t m5 x93 h26 y5d47 ff7 fs19 fc1 sc0 ls0 ws0">contiguous<span class="_"> </span>blocks</div><div class="t m5 x2d h26 y5d49 ff7 fs19 fc1 sc0 ls0 ws0">of<span class="_"> </span>the<span class="_ _11"> </span>array<span class="_"> </span>would<span class="_ _11"> </span>map<span class="_ _11"> </span>to<span class="_"> </span>set<span class="_ _11"> </span>0,<span class="_ _11"> </span>the<span class="_"> </span>next<span class="_ _11"> </span>2</div><div class="t m5 xd5 h50 y5d4a ff11 fs25 fc1 sc0 ls0 ws0">t</div><div class="t m5 xd2 h26 y5d4b ff7 fs19 fc1 sc0 ls0 ws0">blocks<span class="_"> </span>would<span class="_ _11"> </span>map<span class="_"> </span>to<span class="_ _11"> </span>set<span class="_ _11"> </span>1,<span class="_"> </span>and</div><div class="t m5 x2d h26 y5d4c ff7 fs19 fc1 sc0 ls0 ws0">so<span class="_"> </span>on.</div><div class="t m5 x34 h46 y5d4d ff7 fs19 fc1 sc0 ls0 ws0">B<span class="_ _3"></span>.<span class="_ _1d"> </span>F<span class="_ _1"></span>or<span class="_ _11"> </span>a<span class="_ _11"> </span>direct-mapped<span class="_ _11"> </span>cache<span class="_ _11"> </span>where<span class="_ _16"> </span><span class="ff11 ls185">(<span class="_ _4a"></span>S<span class="_ _4"></span>,E<span class="_ _8"></span>,B<span class="_ _4"></span>,m<span class="_ _80"></span>)<span class="ff12 ls0">=<span class="_ _13"> </span><span class="ff11">(<span class="ff7">512<span class="_ _2"></span></span>,<span class="_ _13"> </span><span class="ff7">1<span class="_ _0"></span><span class="ff11">,<span class="_ _13"> </span><span class="ff7">32<span class="_ _2"></span></span>,<span class="_ _13"> </span><span class="ff7">32</span>)<span class="ff7">,<span class="_ _16"> </span>the<span class="_"> </span>cache</span></span></span></span></span></span></div><div class="t m5 x2d h46 y5d4e ff7 fs19 fc1 sc0 ls0 ws0">capacity<span class="_ _13"> </span>is<span class="_ _6"> </span>512<span class="_ _13"> </span>32-byte<span class="_ _6"> </span>blocks<span class="_ _13"> </span>with<span class="_ _13"> </span><span class="ff11">t<span class="_ _11"> </span><span class="ff12">=<span class="_ _13"></span></span></span>18<span class="_ _6"> </span>tag<span class="_ _13"> </span>bits<span class="_ _13"> </span>in<span class="_ _6"> </span>each<span class="_ _13"> </span>cache<span class="_ _6"> </span>line.<span class="_ _6"> </span>T<span class="_ _0"></span>hus<span class="_ _1"></span>,<span class="_ _13"> </span>the</div><div class="t m5 x2d h26 y5d4f ff7 fs19 fc1 sc0 ls0 ws0">ﬁrst<span class="_"> </span>2</div><div class="t m5 xd0 h3c y5d50 ff7 fs25 fc1 sc0 ls0 ws0">18</div><div class="t m5 x1d h26 y5d51 ff7 fs19 fc1 sc0 ls0 ws0">blocks<span class="_"> </span>in<span class="_ _11"> </span>the<span class="_ _11"> </span>array<span class="_"> </span>would<span class="_ _11"> </span>map<span class="_ _11"> </span>to<span class="_"> </span>set<span class="_ _11"> </span>0,<span class="_ _11"> </span>the<span class="_ _11"> </span>next<span class="_"> </span>2</div><div class="t m5 x80 h3c y5d52 ff7 fs25 fc1 sc0 ls0 ws0">18</div><div class="t m5 xa9 h26 y5d51 ff7 fs19 fc1 sc0 ls0 ws0">blocks<span class="_"> </span>to<span class="_ _11"> </span>set<span class="_ _11"> </span>1.</div><div class="t m5 x2d h46 y5d53 ff7 fs19 fc1 sc0 ls0 ws0">Since<span class="_ _13"> </span>our<span class="_ _13"> </span>array<span class="_ _13"> </span>consists<span class="_ _6"> </span>of<span class="_ _13"> </span>only<span class="_ _13"> </span><span class="ff11">(</span>4<span class="ff11">,</span>096<span class="_ _13"> </span><span class="ff12">×<span class="_ _13"> </span></span>4<span class="ff11">)/</span>32<span class="_"> </span><span class="ff12">=<span class="_ _13"></span></span>512<span class="_ _13"> </span>blocks<span class="_ _3"></span>,<span class="_"> </span>all<span class="_ _6"> </span>of<span class="_ _13"> </span>the<span class="_ _13"> </span>blocks</div><div class="t m5 x2d h26 y5d54 ff7 fs19 fc1 sc0 ls0 ws0">in<span class="_"> </span>the<span class="_ _11"> </span>array<span class="_"> </span>map<span class="_ _11"> </span>to<span class="_ _11"> </span>set<span class="_"> </span>0.<span class="_ _11"> </span>T<span class="_ _0"></span>hus<span class="_ _1"></span>,<span class="_ _11"> </span>the<span class="_"> </span>cache<span class="_ _11"> </span>will<span class="_"> </span>hold<span class="_ _11"> </span>at<span class="_ _11"> </span>most<span class="_"> </span>1<span class="_ _11"> </span>array<span class="_ _11"> </span>block<span class="_"> </span>at</div><div class="t m5 x2d h26 y5d55 ff7 fs19 fc1 sc0 ls0 ws0">any<span class="_ _13"> </span>point<span class="_"> </span>in<span class="_ _13"> </span>time<span class="_ _0"></span>,<span class="_ _13"> </span>even<span class="_"> </span>though<span class="_ _13"> </span>the<span class="_"> </span>array<span class="_ _13"> </span>is<span class="_ _13"> </span>small<span class="_"> </span>enough<span class="_ _13"> </span>to<span class="_"> </span>ﬁt<span class="_ _13"> </span>entirely<span class="_ _13"> </span>in<span class="_"> </span>the</div><div class="t m5 x2d h26 y5d56 ff7 fs19 fc1 sc0 ls0 ws0">cache<span class="_ _1"></span>.<span class="_"> </span>Clearly<span class="_ _3"></span>,<span class="_"> </span>using<span class="_"> </span>high-order<span class="_"> </span>bit<span class="_"> </span>indexing<span class="_"> </span>makes<span class="_"> </span>poor<span class="_"> </span>use<span class="_"> </span>of<span class="_"> </span>the<span class="_"> </span>cache.</div><div class="t m5 x17 h28 y1cbf ffe fs1e fc6 sc0 ls0 ws0">Solution<span class="_"> </span>to<span class="_"> </span>Problem<span class="_"> </span>6.12<span class="_ _e"> </span><span class="fs16">(page<span class="_"> </span>664)</span></div><div class="t m5 x17 h26 y77e ff7 fs19 fc1 sc0 ls0 ws0">T<span class="_ _1"></span>he<span class="_ _13"> </span>2<span class="_ _13"> </span>low-order<span class="_ _13"> </span>bits<span class="_ _13"> </span>are<span class="_ _6"> </span>the<span class="_ _13"> </span>block<span class="_ _13"> </span>offset<span class="_ _13"> </span>(CO),<span class="_ _13"> </span>followed<span class="_ _13"> </span>by<span class="_ _6"> </span>3<span class="_ _13"> </span>bits<span class="_ _13"> </span>of<span class="_ _13"> </span>set<span class="_ _13"> </span>index<span class="_ _6"> </span>(CI),</div><div class="t m5 x17 h26 y77f ff7 fs19 fc1 sc0 ls0 ws0">with<span class="_"> </span>the<span class="_"> </span>remaining<span class="_"> </span>bits<span class="_"> </span>serving<span class="_"> </span>as<span class="_"> </span>the<span class="_"> </span>tag<span class="_"> </span>(CT):</div></div><div class="pi" data-data='{"ctm":[2.000000,0.000000,0.000000,2.000000,0.000000,0.000000]}'></div></div>
