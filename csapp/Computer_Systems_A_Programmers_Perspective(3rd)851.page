<div id="pf353" class="pf w2 h11" data-page-no="353"><div class="pc pc353 w2 h11"><img class="bi x0 y0 w1 h1" alt="" src="csapp/bg353.png"/><div class="t m5 x14 h28 y9b ffe fs1e fc2 sc0 ls0 ws0">850<span class="_ _1b"> </span><span class="ff6 fs1f">Chapter<span class="_ _10"> </span>9<span class="_ _3d"> </span>Virtual<span class="_ _10"> </span>Memory</span></div><div class="t m5 x1d h31 y390 ff7 fs21 fc2 sc0 ls0 ws0">Symbol<span class="_ _78"> </span>Description</div><div class="t m5 x1d h31 y56f4 ff7 fs21 fc2 sc0 ls0 ws0">Basic<span class="_"> </span>parameters</div><div class="t m5 x1d h32 y56f5 ff11 fs21 fc2 sc0 ls0 ws0">N<span class="_"> </span><span class="ff12">=<span class="_ _13"></span><span class="ff7">2</span></span></div><div class="t m5 xad h51 y56f6 ff11 fs20 fc2 sc0 ls0 ws0">n</div><div class="t m5 x135 h31 y2d53 ff7 fs21 fc2 sc0 ls0 ws0">Number<span class="_"> </span>of<span class="_"> </span>addresses<span class="_"> </span>in<span class="_"> </span>virtual<span class="_"> </span>address<span class="_"> </span>space</div><div class="t m5 x1d h32 y56f7 ff11 fs21 fc2 sc0 ls0 ws0">M<span class="_ _11"> </span><span class="ff12">=<span class="_ _13"> </span><span class="ff7">2</span></span></div><div class="t m5 xc4 h51 y6dd8 ff11 fs20 fc2 sc0 ls0 ws0">m</div><div class="t m5 x135 h31 y6dd9 ff7 fs21 fc2 sc0 ls0 ws0">Number<span class="_"> </span>of<span class="_"> </span>addresses<span class="_"> </span>in<span class="_"> </span>physical<span class="_"> </span>address<span class="_"> </span>space</div><div class="t m5 x1d h32 y6dda ff11 fs21 fc2 sc0 ls0 ws0">P<span class="_ _14"> </span><span class="ff12">=<span class="_ _13"> </span><span class="ff7">2</span></span></div><div class="t m5 x23 h51 y56f9 ff11 fs20 fc2 sc0 ls0 ws0">p</div><div class="t m5 x135 h31 y56fa ff7 fs21 fc2 sc0 ls0 ws0">Page<span class="_"> </span>size<span class="_"> </span>(bytes)</div><div class="t m5 x1d h31 y6ddb ff7 fs21 fc2 sc0 ls0 ws0">Components<span class="_"> </span>of<span class="_"> </span>a<span class="_"> </span>virtual<span class="_"> </span>address<span class="_"> </span>(V<span class="_ _7"></span>A)</div><div class="t m5 x1d h31 y6ddc ff7 fs21 fc2 sc0 ls0 ws0">VPO<span class="_ _7e"> </span>V<span class="_ _0"></span>irtual<span class="_"> </span>page<span class="_"> </span>offset<span class="_"> </span>(bytes)</div><div class="t m5 x1d h31 y6ddd ff7 fs21 fc2 sc0 ls0 ws0">VPN<span class="_ _7f"> </span>V<span class="_ _0"></span>irtual<span class="_"> </span>page<span class="_"> </span>number</div><div class="t m5 x1d h31 y6dde ff7 fs21 fc2 sc0 ls0 ws0">TLBI<span class="_ _88"> </span>TLB<span class="_"> </span>index</div><div class="t m5 x1d h31 y6ddf ff7 fs21 fc2 sc0 ls0 ws0">TLBT<span class="_ _2c"> </span>TLB<span class="_"> </span>tag</div><div class="t m5 x1d h31 y6de0 ff7 fs21 fc2 sc0 ls0 ws0">Components<span class="_"> </span>of<span class="_"> </span>a<span class="_"> </span>physical<span class="_"> </span>address<span class="_"> </span>(P<span class="_ _7"></span>A)</div><div class="t m5 x1d h31 y6de1 ff7 fs21 fc2 sc0 ls0 ws0">PPO<span class="_ _d0"> </span>Physical<span class="_"> </span>page<span class="_"> </span>offset<span class="_"> </span>(bytes)</div><div class="t m5 x1d h31 y6de2 ff7 fs21 fc2 sc0 ls0 ws0">PPN<span class="_ _64"> </span>Physical<span class="_"> </span>page<span class="_"> </span>number</div><div class="t m5 x1d h31 y6de3 ff7 fs21 fc2 sc0 ls0 ws0">CO<span class="_ _10d"> </span>Byte<span class="_"> </span>offset<span class="_"> </span>within<span class="_"> </span>cache<span class="_"> </span>block</div><div class="t m5 x1d h31 y6de4 ff7 fs21 fc2 sc0 ls0 ws0">CI<span class="_ _55"> </span>Cache<span class="_"> </span>index</div><div class="t m5 x1d h31 y6de5 ff7 fs21 fc2 sc0 ls0 ws0">CT<span class="_ _1b4"> </span>Cache<span class="_"> </span>tag</div><div class="t m5 x1d h2f y6de6 ffe fs16 fc6 sc0 ls0 ws0">Figure<span class="_"> </span>9.11<span class="_ _66"> </span><span class="fc1">Summar<span class="_ _2"></span>y<span class="_"> </span>of<span class="_"> </span>address<span class="_"> </span>translation<span class="_"> </span>symbols.</span></div><div class="t m5 x1d h26 y6de7 ff7 fs19 fc1 sc0 ls0 ws0">that<span class="_ _15"> </span>are<span class="_ _15"> </span>important<span class="_ _15"> </span>to<span class="_ _21"> </span>hardware<span class="_ _15"> </span>designers<span class="_ _15"> </span>but<span class="_ _15"> </span>are<span class="_ _21"> </span>beyond<span class="_ _15"> </span>our<span class="_ _15"> </span>scope.<span class="_ _14"> </span>F<span class="_ _1"></span>or<span class="_ _15"> </span>your</div><div class="t m5 x1d h26 y6de8 ff7 fs19 fc1 sc0 ls0 ws0">reference<span class="_ _1"></span>,<span class="_ _16"> </span>F<span class="_ _0"></span>igure<span class="_ _11"> </span>9.11<span class="_ _16"> </span>summarizes<span class="_ _11"> </span>the<span class="_ _11"> </span>symbols<span class="_ _16"> </span>that<span class="_ _11"> </span>we<span class="_ _11"> </span>will<span class="_ _16"> </span>be<span class="_ _11"> </span>using<span class="_ _11"> </span>throughout</div><div class="t m5 x1d h26 y6de9 ff7 fs19 fc1 sc0 ls0 ws0">this<span class="_"> </span>section.</div><div class="t m5 x29 h26 y6dea ff7 fs19 fc1 sc0 ls0 ws0">F<span class="_ _1"></span>ormally<span class="_ _3"></span>,<span class="_ _15"> </span>address<span class="_ _15"> </span>translation<span class="_ _14"> </span>is<span class="_ _15"> </span>a<span class="_ _14"> </span>mapping<span class="_ _15"> </span>between<span class="_ _14"> </span>the<span class="_ _15"> </span>elements<span class="_ _14"> </span>of<span class="_ _15"> </span>an<span class="_ _14"> </span><span class="ff11">N<span class="_ _be"> </span></span>-</div><div class="t m5 x1d h26 y6deb ff7 fs19 fc1 sc0 ls0 ws0">element<span class="_ _16"> </span>virtual<span class="_ _14"> </span>address<span class="_ _16"> </span>space<span class="_ _14"> </span>(V<span class="_ _7"></span>AS)<span class="_ _16"> </span>and<span class="_ _14"> </span>an<span class="_ _14"> </span><span class="ff11">M<span class="_ _5"></span></span>-element<span class="_ _14"> </span>physical<span class="_ _16"> </span>address<span class="_ _14"> </span>space</div><div class="t m5 x1d h26 y6dec ff7 fs19 fc1 sc0 ls0 ws0">(P<span class="_ _7"></span>AS),</div><div class="t m5 xe4 h46 y6ded ff7 fs19 fc1 sc0 ls0 ws0">MAP:<span class="_ _13"> </span>V<span class="_ _7"></span>AS<span class="_ _13"> </span><span class="ff12">→<span class="_ _10"> </span></span><span class="ls296">PA<span class="_ _5"></span>S<span class="_ _16"> </span><span class="ff12 ls42">∪∅</span></span></div><div class="t m5 x1d h26 y6dee ff7 fs19 fc1 sc0 ls0 ws0">where</div><div class="t m5 x1d h46 y6def ff7 fs19 fc1 sc0 ls0 ws0">MAP<span class="ff11">(A)<span class="_ _13"> </span><span class="ff12">=</span></span></div><div class="t m5 x1ac h5c y6df0 ff1e fs19 fc1 sc0 ls0 ws0"></div><div class="t m5 xc1 h45 y6df1 ff11 fs19 fc1 sc0 ls0 ws0">A</div><div class="t m5 x15c h4b y6df2 ff12 fs25 fc1 sc0 ls0 ws0"></div><div class="t m5 x1f2 h26 y6df3 ff7 fs19 fc1 sc0 ls0 ws0">if<span class="_"> </span>data<span class="_"> </span>at<span class="_"> </span>virtual<span class="_"> </span>addr.<span class="_"> </span><span class="ff11">A<span class="_ _10"> </span></span>are<span class="_"> </span>present<span class="_"> </span>at<span class="_"> </span>physical<span class="_"> </span>addr<span class="_ _0"></span>.<span class="_"> </span><span class="ff11">A</span></div><div class="t m5 x256 h4b y6df2 ff12 fs25 fc1 sc0 ls0 ws0"></div><div class="t m5 x1e h26 y6df3 ff7 fs19 fc1 sc0 ls0 ws0">in<span class="_"> </span>P<span class="_ _7"></span>AS</div><div class="t m5 xc1 h46 y6df4 ff12 fs19 fc1 sc0 ls0 ws0">∅<span class="_ _b2"> </span><span class="ff7">if<span class="_"> </span>data<span class="_"> </span>at<span class="_"> </span>virtual<span class="_"> </span>addr.<span class="_"> </span><span class="ff11">A<span class="_ _10"> </span></span>are<span class="_"> </span>not<span class="_"> </span>present<span class="_"> </span>in<span class="_"> </span>physical<span class="_"> </span>memory</span></div><div class="t m5 x29 h26 y6df5 ff7 fs19 fc1 sc0 ls0 ws0">F<span class="_ _1"></span>igure<span class="_ _13"> </span>9.12<span class="_ _13"> </span>shows<span class="_ _13"> </span>how<span class="_ _6"> </span>the<span class="_ _13"> </span>MMU<span class="_ _13"> </span>uses<span class="_ _13"> </span>the<span class="_ _6"> </span>page<span class="_ _13"> </span>table<span class="_ _13"> </span>to<span class="_ _13"> </span>perform<span class="_ _6"> </span>this<span class="_ _13"> </span>mapping.</div><div class="t m5 x1d h26 y6df6 ff7 fs19 fc1 sc0 ls0 ws0">A<span class="_ _11"> </span>control<span class="_ _16"> </span>register<span class="_ _11"> </span>in<span class="_ _16"> </span>the<span class="_ _11"> </span>CPU<span class="_ _3"></span>,<span class="_ _16"> </span>the<span class="_ _11"> </span><span class="ffa">page<span class="_ _16"> </span>table<span class="_ _11"> </span>base<span class="_ _16"> </span>register<span class="_ _11"> </span>(PTBR)<span class="_"> </span></span>points<span class="_ _11"> </span>to<span class="_ _16"> </span>the</div><div class="t m5 x1d h26 y6df7 ff7 fs19 fc1 sc0 ls0 ws0">current<span class="_ _11"> </span>page<span class="_ _11"> </span>table<span class="_ _0"></span>.<span class="_ _11"> </span>T<span class="_ _1"></span>he<span class="_ _11"> </span><span class="ff11">n</span>-bit<span class="_ _11"> </span>virtual<span class="_ _11"> </span>address<span class="_ _16"> </span>has<span class="_"> </span>two<span class="_ _11"> </span>components:<span class="_ _11"> </span>a<span class="_ _11"> </span><span class="ff11">p<span class="_ _2"></span></span>-bit<span class="_ _11"> </span><span class="ffa">virtual</span></div><div class="t m5 x1d h46 y6df8 ffa fs19 fc1 sc0 ls0 ws0">page<span class="_"> </span>offset<span class="_ _13"> </span>(VPO)<span class="_ _6"> </span><span class="ff7">and<span class="_"> </span>an<span class="_ _13"> </span><span class="ff11">(n<span class="_ _10"> </span><span class="ff12">−<span class="_ _13"></span></span><span class="ls10e">p)</span></span>-bit<span class="_ _13"> </span></span>virtual<span class="_"> </span>page<span class="_ _13"> </span>number<span class="_"> </span>(VPN)<span class="_ _3"></span><span class="ff7">.<span class="_"> </span>T<span class="_ _1"></span>he<span class="_"> </span>MMU<span class="_ _13"> </span>uses</span></div><div class="t m5 x1d h26 y6df9 ff7 fs19 fc1 sc0 ls0 ws0">the<span class="_ _13"> </span>VPN<span class="_ _13"> </span>to<span class="_ _6"> </span>select<span class="_ _13"> </span>the<span class="_ _13"> </span>appropriate<span class="_ _13"> </span>PTE.<span class="_ _6"> </span>F<span class="_ _1"></span>or<span class="_ _13"> </span>example,<span class="_ _13"> </span>VPN<span class="_ _6"> </span>0<span class="_ _13"> </span>selects<span class="_ _13"> </span>PTE<span class="_ _13"> </span>0,<span class="_ _13"> </span>VPN<span class="_ _6"> </span>1</div><div class="t m5 x1d h26 y6dfa ff7 fs19 fc1 sc0 ls0 ws0">selects<span class="_ _13"> </span>PTE<span class="_ _13"> </span>1,<span class="_ _13"> </span>and<span class="_ _13"> </span>so<span class="_ _13"> </span>on.<span class="_"> </span>T<span class="_ _3"></span>he<span class="_"> </span>corresponding<span class="_ _13"> </span>physical<span class="_ _13"> </span>address<span class="_ _13"> </span>is<span class="_ _13"> </span>the<span class="_ _13"> </span>concatenation</div><div class="t m5 x1d h26 y6dfb ff7 fs19 fc1 sc0 ls0 ws0">of<span class="_"> </span>the<span class="_"> </span><span class="ffa">physical<span class="_"> </span>page<span class="_"> </span>number<span class="_"> </span>(PPN)<span class="_ _13"> </span></span>from<span class="_"> </span>the<span class="_"> </span>page<span class="_"> </span>table<span class="_"> </span>entry<span class="_"> </span>and<span class="_"> </span>the<span class="_"> </span>VPO<span class="_"> </span>from</div><div class="t m5 x1d h26 y6dfc ff7 fs19 fc1 sc0 ls0 ws0">the<span class="_ _16"> </span>virtual<span class="_ _14"> </span>address<span class="_ _1"></span>.<span class="_ _14"> </span>Notice<span class="_ _14"> </span>that<span class="_ _16"> </span>since<span class="_ _14"> </span>the<span class="_ _14"> </span>physical<span class="_ _16"> </span>and<span class="_ _14"> </span>virtual<span class="_ _14"> </span>pages<span class="_ _16"> </span>are<span class="_ _14"> </span>both<span class="_ _14"> </span><span class="ff11">P</span></div><div class="t m5 x1d h26 y6dfd ff7 fs19 fc1 sc0 ls0 ws0">bytes<span class="_ _1"></span>,<span class="_"> </span>the<span class="_"> </span><span class="ffa">physical<span class="_"> </span>page<span class="_"> </span>offset<span class="_"> </span>(PPO)<span class="_ _13"> </span></span>is<span class="_"> </span>identical<span class="_"> </span>to<span class="_"> </span>the<span class="_"> </span>VPO<span class="_ _3"></span>.</div></div><div class="pi" data-data='{"ctm":[2.000000,0.000000,0.000000,2.000000,0.000000,0.000000]}'></div></div>
