<div id="pf6b" class="pf w2 h11" data-page-no="6b"><div class="pc pc6b w2 h11"><img class="bi x0 y0 w1 h1" alt="" src="csapp/bg6b.png"/><div class="t m5 x14 h28 y9b ffe fs1e fc2 sc0 ls0 ws0">106<span class="_ _1b"> </span><span class="ff6 fs1f">Chapter<span class="_ _10"> </span>2<span class="_ _3d"> </span>Representing<span class="_ _10"> </span>and<span class="_ _10"> </span>Manipulating<span class="_ _10"> </span>Information</span></div><div class="t m5 x1d h2d ye7 ffd fs1e fc2 sc0 ls0 ws0">4004d0:<span class="_ _1a"> </span>48<span class="_ _e"> </span>81<span class="_ _1f"> </span>ec<span class="_ _1f"> </span>e0<span class="_ _e"> </span>02<span class="_ _1f"> </span>00<span class="_ _e"> </span>00<span class="_ _46"> </span>sub<span class="_ _46"> </span>$0x2e0,%rsp<span class="_ _c1"> </span><span class="ff13 fs35 fc6">A.</span></div><div class="t m5 x1d h2d yc4d ffd fs1e fc2 sc0 ls0 ws0">4004d7:<span class="_ _1a"> </span>48<span class="_ _e"> </span>8b<span class="_ _1f"> </span>44<span class="_ _1f"> </span>24<span class="_ _e"> </span>a8<span class="_ _86"> </span>mov<span class="_ _46"> </span>-0x58(%rsp),%rax<span class="_ _81"> </span><span class="ff13 fs35 fc6">B.</span></div><div class="t m5 x1d h2d yecb ffd fs1e fc2 sc0 ls0 ws0">4004dc:<span class="_ _1a"> </span>48<span class="_ _e"> </span>03<span class="_ _1f"> </span>47<span class="_ _1f"> </span>28<span class="_ _35"> </span>add<span class="_ _46"> </span>0x28(%rdi),%rax<span class="_ _c2"> </span><span class="ff13 fs35 fc6">C.</span></div><div class="t m5 x1d h2d yecc ffd fs1e fc2 sc0 ls0 ws0">4004e0:<span class="_ _1a"> </span>48<span class="_ _e"> </span>89<span class="_ _1f"> </span>44<span class="_ _1f"> </span>24<span class="_ _e"> </span>d0<span class="_ _86"> </span>mov<span class="_ _46"> </span>%rax,-0x30(%rsp)<span class="_ _81"> </span><span class="ff13 fs35 fc6">D.</span></div><div class="t m5 x1d h2d yecd ffd fs1e fc2 sc0 ls0 ws0">4004e5:<span class="_ _1a"> </span>48<span class="_ _e"> </span>8b<span class="_ _1f"> </span>44<span class="_ _1f"> </span>24<span class="_ _e"> </span>78<span class="_ _86"> </span>mov<span class="_ _46"> </span>0x78(%rsp),%rax<span class="_ _c2"> </span><span class="ff13 fs35 fc6">E.</span></div><div class="t m5 x1d h2d yece ffd fs1e fc2 sc0 ls0 ws0">4004ea:<span class="_ _1a"> </span>48<span class="_ _e"> </span>89<span class="_ _1f"> </span>87<span class="_ _1f"> </span>88<span class="_ _e"> </span>00<span class="_ _1f"> </span>00<span class="_ _e"> </span>00<span class="_ _46"> </span>mov<span class="_ _46"> </span>%rax,0x88(%rdi)<span class="_ _c2"> </span><span class="ff13 fs35 fc6">F.</span></div><div class="t m5 x1d h2d yecf ffd fs1e fc2 sc0 ls0 ws0">4004f1:<span class="_ _1a"> </span>48<span class="_ _e"> </span>8b<span class="_ _1f"> </span>84<span class="_ _1f"> </span>24<span class="_ _e"> </span>f8<span class="_ _1f"> </span>01<span class="_ _e"> </span>00<span class="_ _46"> </span>mov<span class="_ _46"> </span>0x1f8(%rsp),%rax<span class="_ _9a"> </span><span class="ff13 fs35 fc6">G.</span></div><div class="t m5 x1d h2d yed0 ffd fs1e fc2 sc0 ls0 ws0">4004f8:<span class="_ _1a"> </span>00</div><div class="t m5 x1d h2d yed1 ffd fs1e fc2 sc0 ls0 ws0">4004f9:<span class="_ _1a"> </span>48<span class="_ _e"> </span>03<span class="_ _1f"> </span>44<span class="_ _1f"> </span>24<span class="_ _e"> </span>08<span class="_ _86"> </span>add<span class="_ _46"> </span>0x8(%rsp),%rax</div><div class="t m5 x1d h2d yed2 ffd fs1e fc2 sc0 ls0 ws0">4004fe:<span class="_ _1a"> </span>48<span class="_ _e"> </span>89<span class="_ _1f"> </span>84<span class="_ _1f"> </span>24<span class="_ _e"> </span>c0<span class="_ _1f"> </span>00<span class="_ _e"> </span>00<span class="_ _46"> </span>mov<span class="_ _46"> </span>%rax,0xc0(%rsp)</div><div class="t m5 x102 h61 yed3 ff13 fs35 fc6 sc0 ls0 ws0">H.</div><div class="t m5 x1d h2d yed4 ffd fs1e fc2 sc0 ls0 ws0">400505:<span class="_ _1a"> </span>00</div><div class="t m5 x1d h2d yed5 ffd fs1e fc2 sc0 ls0 ws0">400506:<span class="_ _1a"> </span>48<span class="_ _e"> </span>8b<span class="_ _1f"> </span>44<span class="_ _1f"> </span>d4<span class="_ _e"> </span>b8<span class="_ _86"> </span>mov<span class="_ _46"> </span>-0x48(%rsp,%rdx,8),%rax</div><div class="t m5 x102 h61 y462 ff13 fs35 fc6 sc0 ls0 ws0">I.</div><div class="t m5 x1d h41 yed6 ffe fs29 fc1 sc0 ls0 ws0">2.2.4<span class="_ _48"> </span><span class="fs19">Conversions<span class="_"> </span>between<span class="_"> </span>Signed<span class="_"> </span>and<span class="_"> </span>Unsigned</span></div><div class="t m5 x1d h26 yed7 ff7 fs19 fc1 sc0 ls0 ws0">C<span class="_ _21"> </span>allows<span class="_ _21"> </span>casting<span class="_ _21"> </span>between<span class="_ _f"> </span>different<span class="_ _21"> </span>numeric<span class="_ _21"> </span>data<span class="_ _21"> </span>types<span class="_ _0"></span>.<span class="_ _21"> </span>F<span class="_ _1"></span>or<span class="_ _21"> </span>example,<span class="_ _f"> </span>suppose</div><div class="t m5 x1d h26 yed8 ff7 fs19 fc1 sc0 ls0 ws0">variable<span class="_ _16"> </span><span class="ffd">x<span class="_ _14"> </span></span>is<span class="_ _14"> </span>declared<span class="_ _14"> </span>as<span class="_ _14"> </span><span class="ffd">int<span class="_ _14"> </span></span>and<span class="_ _16"> </span><span class="ffd">u<span class="_ _14"> </span></span>as<span class="_ _14"> </span><span class="ffd">unsigned</span>.<span class="_ _14"> </span>T<span class="_ _1"></span>he<span class="_ _14"> </span>expression<span class="_ _14"> </span><span class="ffd">(unsigned)<span class="_ _16"> </span>x</span></div><div class="t m5 x1b0 h26 yed9 ff7 fs19 fc1 sc0 ls0 ws0">converts<span class="_"> </span>the<span class="_"> </span>value<span class="_"> </span>of<span class="_"> </span><span class="ffd">x<span class="_ _10"> </span></span>to<span class="_"> </span>an<span class="_"> </span>unsigned<span class="_"> </span>value<span class="_ _1"></span>,<span class="_"> </span>and<span class="_"> </span><span class="ffd">(int)<span class="_ _16"> </span>u<span class="_ _10"> </span></span>converts<span class="_"> </span>the<span class="_"> </span>value<span class="_"> </span>of<span class="_"> </span><span class="ffd">u</span></div><div class="t m5 x1b0 h26 yeda ff7 fs19 fc1 sc0 ls0 ws0">to<span class="_"> </span>a<span class="_ _13"> </span>signed<span class="_"> </span>integer<span class="_ _1"></span>.<span class="_"> </span>What<span class="_ _13"> </span>should<span class="_"> </span>be<span class="_ _13"> </span>the<span class="_"> </span>effect<span class="_ _13"> </span>of<span class="_"> </span>casting<span class="_ _13"> </span>signed<span class="_"> </span>value<span class="_ _13"> </span>to<span class="_"> </span>unsigned,</div><div class="t m5 x1b0 h26 yedb ff7 fs19 fc1 sc0 ls0 ws0">or<span class="_ _13"> </span>vice<span class="_ _6"> </span>versa?<span class="_ _13"> </span>F<span class="_ _0"></span>rom<span class="_ _13"> </span>a<span class="_ _13"> </span>mathematical<span class="_ _6"> </span>perspective,<span class="_ _6"> </span>one<span class="_ _13"> </span>can<span class="_ _13"> </span>imagine<span class="_ _13"> </span>several<span class="_ _6"> </span>different</div><div class="t m5 x1b0 h26 yedc ff7 fs19 fc1 sc0 ls0 ws0">conventions<span class="_ _1"></span>.<span class="_ _16"> </span>Clearly<span class="_ _3"></span>,<span class="_ _14"> </span>we<span class="_ _16"> </span>want<span class="_ _14"> </span>to<span class="_ _16"> </span>preserve<span class="_ _14"> </span>any<span class="_ _16"> </span>value<span class="_ _16"> </span>that<span class="_ _14"> </span>can<span class="_ _16"> </span>be<span class="_ _14"> </span>represented<span class="_ _16"> </span>in</div><div class="t m5 x1b0 h26 yedd ff7 fs19 fc1 sc0 ls0 ws0">both<span class="_ _6"> </span>forms<span class="_ _1"></span>.<span class="_ _6"> </span>On<span class="_ _6"> </span>the<span class="_ _13"> </span>other<span class="_ _a"> </span>hand,<span class="_ _13"> </span>converting<span class="_ _6"> </span>a<span class="_ _6"> </span>negative<span class="_ _6"> </span>value<span class="_ _6"> </span>to<span class="_ _13"> </span>unsigned<span class="_ _a"> </span>might<span class="_ _6"> </span>yield</div><div class="t m5 x1b0 h26 yede ff7 fs19 fc1 sc0 ls0 ws0">zero<span class="_ _1"></span>.<span class="_ _16"> </span>Converting<span class="_ _16"> </span>an<span class="_ _16"> </span>unsigned<span class="_ _11"> </span>value<span class="_ _16"> </span>that<span class="_ _16"> </span>is<span class="_ _16"> </span>too<span class="_ _16"> </span>large<span class="_ _11"> </span>to<span class="_ _16"> </span>be<span class="_ _16"> </span>represented<span class="_ _16"> </span>in<span class="_ _16"> </span>twoâ€™<span class="_ _0"></span>s-</div><div class="t m5 x1b0 h26 yedf ff7 fs19 fc1 sc0 ls0 ws0">complement<span class="_ _16"> </span>form<span class="_ _16"> </span>might<span class="_ _16"> </span>yield<span class="_ _16"> </span><span class="ffa">TMax</span>.<span class="_ _16"> </span>F<span class="_ _3"></span>or<span class="_ _16"> </span>most<span class="_ _16"> </span>implementations<span class="_ _16"> </span>of<span class="_ _16"> </span>C,<span class="_ _16"> </span>however,</div><div class="t m5 x1b0 h26 yee0 ff7 fs19 fc1 sc0 ls0 ws0">the<span class="_ _16"> </span>answer<span class="_ _16"> </span>to<span class="_ _16"> </span>this<span class="_ _16"> </span>question<span class="_ _16"> </span>is<span class="_ _16"> </span>based<span class="_ _16"> </span>on<span class="_ _16"> </span>a<span class="_ _14"> </span>bit-level<span class="_ _16"> </span>perspective<span class="_ _1"></span>,<span class="_ _14"> </span>rather<span class="_ _16"> </span>than<span class="_ _16"> </span>on<span class="_ _16"> </span>a</div><div class="t m5 x1b0 h26 yee1 ff7 fs19 fc1 sc0 ls0 ws0">numeric<span class="_"> </span>one<span class="_ _1"></span>.</div><div class="t m5 x29 h26 yee2 ff7 fs19 fc1 sc0 ls0 ws0">F<span class="_ _1"></span>or<span class="_"> </span>example<span class="_ _1"></span>,<span class="_"> </span>consider<span class="_"> </span>the<span class="_"> </span>following<span class="_"> </span>code:</div><div class="t m5 x1f h2d yee3 ff6 fs20 fc6 sc0 ls0 ws0">1<span class="_ _20"> </span><span class="ffd fs1e fc2">short<span class="_ _46"> </span>int<span class="_ _46"> </span>v<span class="_ _1a"> </span>=<span class="_ _e"> </span>-12345;</span></div><div class="t m5 x1f h2d yee4 ff6 fs20 fc6 sc0 ls0 ws0">2<span class="_ _20"> </span><span class="ffd fs1e fc2">unsigned<span class="_ _e"> </span>short<span class="_ _1f"> </span>uv<span class="_ _1f"> </span>=<span class="_ _e"> </span>(unsigned<span class="_ _1f"> </span>short)<span class="_ _e"> </span>v;</span></div><div class="t m5 x1f h2e yee5 ff6 fs20 fc6 sc0 ls0 ws0">3</div><div class="t m5 x33 h2d yee6 ffd fs1e fc2 sc0 ls0 ws0">printf(&quot;v<span class="_ _e"> </span>=<span class="_ _1f"> </span>%d,<span class="_ _1f"> </span>uv<span class="_ _e"> </span>=<span class="_ _1f"> </span>%u\n&quot;,<span class="_ _e"> </span>v,<span class="_ _1f"> </span>uv);</div><div class="t m5 x1d h26 yee7 ff7 fs19 fc2 sc0 ls0 ws0">When<span class="_"> </span>run<span class="_"> </span>on<span class="_"> </span>a<span class="_"> </span>twoâ€™<span class="_ _1"></span>s-complement<span class="_"> </span>machine,<span class="_"> </span>it<span class="_"> </span>generates<span class="_"> </span>the<span class="_"> </span>following<span class="_"> </span>output:</div><div class="t m5 x1d h2d yee8 ffd fs1e fc2 sc0 ls0 ws0">v<span class="_ _e"> </span>=<span class="_ _1f"> </span>-12345,<span class="_ _1f"> </span>uv<span class="_ _e"> </span>=<span class="_ _1f"> </span>53191</div><div class="t m5 x1d h26 yee9 ff7 fs19 fc2 sc0 ls0 ws0">What<span class="_ _11"> </span>we<span class="_ _14"> </span>see<span class="_ _16"> </span>here<span class="_ _16"> </span>is<span class="_ _16"> </span>that<span class="_ _16"> </span>the<span class="_ _16"> </span>effect<span class="_ _16"> </span>of<span class="_ _16"> </span>casting<span class="_ _16"> </span>is<span class="_ _16"> </span>to<span class="_ _14"> </span>keep<span class="_ _16"> </span>the<span class="_ _16"> </span>bit<span class="_ _16"> </span>values<span class="_ _16"> </span>identical</div><div class="t m5 x1d h26 yeea ff7 fs19 fc2 sc0 ls0 ws0">but<span class="_ _11"> </span>change<span class="_ _16"> </span>how<span class="_ _11"> </span>these<span class="_ _11"> </span>bits<span class="_ _16"> </span>are<span class="_ _11"> </span>interpreted.<span class="_ _16"> </span>W<span class="_ _3"></span>e<span class="_ _11"> </span>saw<span class="_ _16"> </span>in<span class="_ _11"> </span>F<span class="_ _0"></span>igure<span class="_ _11"> </span>2.15<span class="_ _16"> </span>that<span class="_ _11"> </span>the<span class="_ _11"> </span>16-bit</div><div class="t m5 x1d h46 yeeb ff7 fs19 fc2 sc0 ls0 ws0">twoâ€™s-complement<span class="_ _16"> </span>representation<span class="_ _16"> </span>of<span class="_ _14"> </span><span class="ff12">âˆ’</span>12,345<span class="_ _14"> </span>is<span class="_ _16"> </span>identical<span class="_ _14"> </span>to<span class="_ _16"> </span>the<span class="_ _14"> </span>16-bit<span class="_ _14"> </span>unsigned</div><div class="t m5 x1d h26 yeec ff7 fs19 fc2 sc0 ls0 ws0">representation<span class="_ _15"> </span>of<span class="_ _21"> </span>53,191.<span class="_ _21"> </span>Casting<span class="_ _21"> </span>from<span class="_ _15"> </span><span class="ffd">short<span class="_ _21"> </span></span>to<span class="_ _21"> </span><span class="ffd">unsigned<span class="_ _16"> </span>short<span class="_ _15"> </span></span>changed<span class="_ _21"> </span>the</div><div class="t m5 x1d h26 yeed ff7 fs19 fc2 sc0 ls0 ws0">numeric<span class="_"> </span>value<span class="_ _1"></span>,<span class="_"> </span>but<span class="_"> </span>not<span class="_"> </span>the<span class="_"> </span>bit<span class="_"> </span>representation.</div><div class="t m5 x29 h26 yeee ff7 fs19 fc2 sc0 ls0 ws0">Similarly<span class="_ _3"></span>,<span class="_"> </span>consider<span class="_"> </span>the<span class="_"> </span>following<span class="_"> </span>code:</div><div class="t m5 x1f h2e y587 ff6 fs20 fc6 sc0 ls0 ws0">1</div><div class="t m5 x33 h2d ye14 ffd fs1e fc2 sc0 ls0 ws0">unsigned<span class="_ _e"> </span>u<span class="_ _1f"> </span>=<span class="_ _1f"> </span>4294967295u;<span class="_ _3f"> </span>/*<span class="_ _e"> </span>UMax<span class="_ _1f"> </span>*/</div><div class="t m5 x1f h2d yeef ff6 fs20 fc6 sc0 ls0 ws0">2<span class="_ _20"> </span><span class="ffd fs1e fc2">int<span class="_ _8c"> </span>tu<span class="_ _e"> </span>=<span class="_ _1f"> </span>(int)<span class="_ _1f"> </span>u;</span></div></div><div class="pi" data-data='{"ctm":[2.000000,0.000000,0.000000,2.000000,0.000000,0.000000]}'></div></div>
