<div id="pfdc" class="pf w2 h11" data-page-no="dc"><div class="pc pcdc w2 h11"><img class="bi x0 y0 w1 h1" alt="" src="csapp/bgdc.png"/><div class="t m5 x6a h28 y9b ff6 fs1f fc2 sc0 ls0 ws0">Section<span class="_ _10"> </span>3.4<span class="_ _60"> </span>Accessing<span class="_ _10"> </span>Information<span class="_ _3e"> </span><span class="ffe fs1e">219</span></div><div class="t m5 x17 h31 y390 ff7 fs21 fc2 sc0 ls0 ws0">Instruction<span class="_ _82"> </span>Effect<span class="_ _11a"> </span>Description</div><div class="t m5 x17 h32 yc94 ff9 fs21 fc2 sc0 ls0 ws0">mo<span class="_ _0"></span>v<span class="_ _bd"> </span><span class="ff11">S<span class="_ _5"></span><span class="ff7">,<span class="_"> </span></span><span class="ls149">DD<span class="_ _dd"></span><span class="ff12 ls0">←<span class="_ _25"> </span><span class="ff11">S<span class="_ _5e"> </span><span class="ff7">Move</span></span></span></span></span></div><div class="t m5 xee h31 yc98 ffd fs1e fc2 sc0 ls0 ws0">movb<span class="_ _139"> </span><span class="ff7 fs21">Move<span class="_"> </span>byte</span></div><div class="t m5 xee h31 yc9b ffd fs1e fc2 sc0 ls0 ws0">movw<span class="_ _139"> </span><span class="ff7 fs21">Move<span class="_"> </span>word</span></div><div class="t m5 xee h31 yc9e ffd fs1e fc2 sc0 ls0 ws0">movl<span class="_ _139"> </span><span class="ff7 fs21">Move<span class="_"> </span>double<span class="_"> </span>word</span></div><div class="t m5 xee h31 yca1 ffd fs1e fc2 sc0 ls0 ws0">movq<span class="_ _139"> </span><span class="ff7 fs21">Move<span class="_"> </span>quad<span class="_"> </span>word</span></div><div class="t m5 x17 h32 y221d ffd fs1e fc2 sc0 ls0 ws0">movabsq<span class="_ _26"> </span><span class="ff11 fs21">I<span class="_ _be"> </span><span class="ff7">,<span class="_"> </span></span><span class="ls14a">RR<span class="_ _13a"></span><span class="ff12 ls0">←<span class="_ _25"> </span><span class="ff11">I<span class="_ _61"> </span><span class="ff7">Move<span class="_"> </span>absolute<span class="_"> </span>quad<span class="_"> </span>word</span></span></span></span></span></div><div class="t m5 x17 h2f y221e ffe fs16 fc6 sc0 ls0 ws0">Figure<span class="_"> </span>3.4<span class="_ _66"> </span><span class="fc1">Simple<span class="_"> </span>data<span class="_"> </span>movement<span class="_"> </span>instructions.</span></div><div class="t m5 x26 h26 y221f ff7 fs19 fc1 sc0 ls0 ws0">T<span class="_ _1"></span>he<span class="_"> </span>source<span class="_"> </span>operand<span class="_ _13"> </span>designates<span class="_"> </span>a<span class="_ _13"> </span>value<span class="_"> </span>that<span class="_ _13"> </span>is<span class="_"> </span>immediate<span class="_ _1"></span>,<span class="_"> </span>stored<span class="_"> </span>in<span class="_ _13"> </span>a<span class="_"> </span>register<span class="_ _0"></span>,</div><div class="t m5 x17 h26 y2220 ff7 fs19 fc1 sc0 ls0 ws0">or<span class="_ _13"> </span>stored<span class="_ _13"> </span>in<span class="_ _6"> </span>memory<span class="_ _3"></span>.<span class="_ _13"> </span>T<span class="_ _1"></span>he<span class="_ _13"> </span>destination<span class="_ _13"> </span>operand<span class="_ _13"> </span>designates<span class="_ _6"> </span>a<span class="_ _13"> </span>location<span class="_ _13"> </span>that<span class="_ _13"> </span>is<span class="_ _6"> </span>either<span class="_ _13"> </span>a</div><div class="t m5 x17 h26 y2221 ff7 fs19 fc1 sc0 ls0 ws0">register<span class="_"> </span>or<span class="_"> </span>a<span class="_"> </span>memory<span class="_"> </span>address<span class="_ _3"></span>.<span class="_"> </span>x86-64<span class="_"> </span>imposes<span class="_"> </span>the<span class="_"> </span>restriction<span class="_"> </span>that<span class="_"> </span>a<span class="_"> </span>move<span class="_ _13"> </span>instruc-</div><div class="t m5 x17 h26 y2222 ff7 fs19 fc1 sc0 ls0 ws0">tion<span class="_"> </span>cannot<span class="_ _13"> </span>have<span class="_"> </span>both<span class="_ _13"> </span>operands<span class="_"> </span>refer<span class="_"> </span>to<span class="_ _13"> </span>memory<span class="_"> </span>locations<span class="_ _3"></span>.<span class="_"> </span>Copying<span class="_"> </span>a<span class="_ _13"> </span>value<span class="_"> </span>from</div><div class="t m5 x17 h26 y2223 ff7 fs19 fc1 sc0 ls0 ws0">one<span class="_ _16"> </span>memory<span class="_ _11"> </span>location<span class="_ _16"> </span>to<span class="_ _16"> </span>another<span class="_ _11"> </span>requires<span class="_ _16"> </span>two<span class="_ _16"> </span>instructions—the<span class="_ _16"> </span>ﬁrst<span class="_ _11"> </span>to<span class="_ _16"> </span>load<span class="_ _16"> </span>the</div><div class="t m5 x17 h26 y2224 ff7 fs19 fc1 sc0 ls0 ws0">source<span class="_"> </span>value<span class="_ _13"> </span>into<span class="_"> </span>a<span class="_"> </span>register,<span class="_ _13"> </span>and<span class="_"> </span>the<span class="_"> </span>second<span class="_"> </span>to<span class="_ _13"> </span>write<span class="_"> </span>this<span class="_"> </span>register<span class="_"> </span>value<span class="_ _13"> </span>to<span class="_"> </span>the<span class="_"> </span>des-</div><div class="t m5 x17 h26 y2225 ff7 fs19 fc1 sc0 ls0 ws0">tination.<span class="_ _11"> </span>Referring<span class="_ _16"> </span>to<span class="_ _16"> </span>F<span class="_ _1"></span>igure<span class="_ _16"> </span>3.2,<span class="_ _16"> </span>register<span class="_ _11"> </span>operands<span class="_ _16"> </span>for<span class="_ _11"> </span>these<span class="_ _16"> </span>instructions<span class="_ _16"> </span>can<span class="_ _11"> </span>be</div><div class="t m5 x17 h26 y2226 ff7 fs19 fc1 sc0 ls0 ws0">the<span class="_"> </span>labeled<span class="_"> </span>portions<span class="_"> </span>of<span class="_"> </span>any<span class="_"> </span>of<span class="_"> </span>the<span class="_"> </span>16<span class="_"> </span>registers<span class="_ _3"></span>,<span class="_"> </span>where<span class="_"> </span>the<span class="_"> </span>size<span class="_"> </span>of<span class="_"> </span>the<span class="_"> </span>register<span class="_"> </span>must</div><div class="t m5 x17 h26 y2227 ff7 fs19 fc1 sc0 ls0 ws0">match<span class="_ _11"> </span>the<span class="_ _16"> </span>size<span class="_ _11"> </span>designated<span class="_ _16"> </span>by<span class="_ _16"> </span>the<span class="_ _11"> </span>last<span class="_ _16"> </span>character<span class="_ _11"> </span>of<span class="_ _16"> </span>the<span class="_ _11"> </span>instruction<span class="_ _16"> </span>(‘<span class="ffd">b</span>’,<span class="_ _16"> </span>‘<span class="ffd">w</span>’,<span class="_ _11"> </span>‘<span class="ffd">l</span>’,<span class="_ _16"> </span>or</div><div class="t m5 x17 h26 y2228 ff7 fs19 fc1 sc0 ls0 ws0">‘<span class="ffd">q</span>’).<span class="_ _13"> </span>F<span class="_ _3"></span>or<span class="_ _13"> </span>most<span class="_ _6"> </span>cases<span class="_ _1"></span>,<span class="_ _13"> </span>the<span class="_ _13"> </span><span class="ff9">mo<span class="_ _0"></span>v<span class="_ _13"> </span><span class="ff7">instructions<span class="_ _6"> </span>will<span class="_ _13"> </span>only<span class="_ _6"> </span>update<span class="_ _13"> </span>the<span class="_ _6"> </span>speciﬁc<span class="_ _13"> </span>register<span class="_ _13"> </span>bytes</span></span></div><div class="t m5 x17 h26 y2229 ff7 fs19 fc1 sc0 ls0 ws0">or<span class="_"> </span>memory<span class="_"> </span>locations<span class="_"> </span>indicated<span class="_"> </span>by<span class="_"> </span>the<span class="_"> </span>destination<span class="_"> </span>operand.<span class="_"> </span>T<span class="_ _1"></span>he<span class="_"> </span>only<span class="_"> </span>exception<span class="_"> </span>is</div><div class="t m5 x17 h26 y222a ff7 fs19 fc1 sc0 ls0 ws0">that<span class="_ _11"> </span>when<span class="_ _16"> </span><span class="ffd">movl<span class="_ _11"> </span></span>has<span class="_ _16"> </span>a<span class="_ _11"> </span>register<span class="_ _16"> </span>as<span class="_ _11"> </span>the<span class="_ _16"> </span>destination,<span class="_ _16"> </span>it<span class="_ _11"> </span>will<span class="_ _16"> </span>also<span class="_ _11"> </span>set<span class="_ _11"> </span>the<span class="_ _16"> </span>high-order<span class="_ _11"> </span>4</div><div class="t m5 x17 h26 y222b ff7 fs19 fc1 sc0 ls0 ws0">bytes<span class="_ _11"> </span>of<span class="_ _16"> </span>the<span class="_ _11"> </span>register<span class="_ _16"> </span>to<span class="_ _11"> </span>0.<span class="_ _16"> </span>T<span class="_ _1"></span>his<span class="_ _16"> </span>exception<span class="_ _11"> </span>arises<span class="_ _11"> </span>from<span class="_ _16"> </span>the<span class="_ _11"> </span>convention,<span class="_ _16"> </span>adopted<span class="_ _16"> </span>in</div><div class="t m5 x17 h26 y222c ff7 fs19 fc1 sc0 ls0 ws0">x86-64,<span class="_ _13"> </span>that<span class="_ _13"> </span>any<span class="_ _13"> </span>instruction<span class="_ _13"> </span>that<span class="_ _13"> </span>generates<span class="_ _13"> </span>a<span class="_ _13"> </span>32-bit<span class="_ _13"> </span>value<span class="_ _13"> </span>for<span class="_ _13"> </span>a<span class="_ _13"> </span>register<span class="_ _6"> </span>also<span class="_ _13"> </span>sets<span class="_ _13"> </span>the</div><div class="t m5 x17 h26 y222d ff7 fs19 fc1 sc0 ls0 ws0">high-order<span class="_"> </span>portion<span class="_"> </span>of<span class="_"> </span>the<span class="_"> </span>register<span class="_"> </span>to<span class="_"> </span>0.</div><div class="t m5 x26 h26 y222e ff7 fs19 fc1 sc0 ls0 ws0">T<span class="_ _1"></span>he<span class="_ _11"> </span>following<span class="_"> </span><span class="ff9">mov<span class="_ _10"> </span></span>instruction<span class="_"> </span>examples<span class="_"> </span>show<span class="_ _11"> </span>the<span class="_"> </span>ﬁve<span class="_"> </span>possible<span class="_ _11"> </span>combinations</div><div class="t m5 x17 h26 y222f ff7 fs19 fc1 sc0 ls0 ws0">of<span class="_ _16"> </span>source<span class="_ _16"> </span>and<span class="_ _16"> </span>destination<span class="_ _16"> </span>types<span class="_ _1"></span>.<span class="_ _16"> </span>Recall<span class="_ _16"> </span>that<span class="_ _16"> </span>the<span class="_ _14"> </span>source<span class="_ _16"> </span>operand<span class="_ _16"> </span>comes<span class="_ _16"> </span>ﬁrst<span class="_ _16"> </span>and</div><div class="t m5 x17 h26 y2230 ff7 fs19 fc1 sc0 ls0 ws0">the<span class="_"> </span>destination<span class="_"> </span>second.</div><div class="t m5 x2c h2d y2231 ff6 fs20 fc6 sc0 ls0 ws0">1<span class="_ _45"> </span><span class="ffd fs1e fc2">movl<span class="_ _e"> </span>$0x4050,%eax<span class="_ _5d"> </span></span><span class="ff13 fs35">Immediate--Register,<span class="_ _f"> </span>4<span class="_ _e"> </span>bytes</span></div><div class="t m5 x2c h2e y2232 ff6 fs20 fc6 sc0 ls0 ws0">2</div><div class="t m5 xd1 h2d y2233 ffd fs1e fc2 sc0 ls0 ws0">movw<span class="_ _e"> </span>%bp,%sp<span class="_ _13b"> </span><span class="ff13 fs35 fc6">Register--Register,<span class="_ _3d"> </span>2<span class="_ _f"> </span>bytes</span></div><div class="t m5 x2c h2d y2234 ff6 fs20 fc6 sc0 ls0 ws0">3<span class="_ _45"> </span><span class="ffd fs1e fc2">movb<span class="_ _e"> </span>(%rdi,%rcx),%al<span class="_ _59"> </span></span><span class="ff13 fs35">Memory--Register,<span class="_ _19"> </span>1<span class="_ _f"> </span>byte</span></div><div class="t m5 x2c h2d y2235 ff6 fs20 fc6 sc0 ls0 ws0">4<span class="_ _45"> </span><span class="ffd fs1e fc2">movb<span class="_ _e"> </span>$-17,(%esp)<span class="_ _9a"> </span></span><span class="ff13 fs35">Immediate--Memory,<span class="_ _3e"> </span>1<span class="_ _f"> </span>byte</span></div><div class="t m5 x2c h2d y2236 ff6 fs20 fc6 sc0 ls0 ws0">5<span class="_ _45"> </span><span class="ffd fs1e fc2">movq<span class="_ _e"> </span>%rax,-12(%rbp)<span class="_ _88"> </span></span><span class="ff13 fs35">Register--Memory,<span class="_ _13c"> </span>8<span class="_ _f"> </span>bytes</span></div><div class="t m5 x26 h26 y211a ff7 fs19 fc2 sc0 ls0 ws0">A<span class="_"> </span>ﬁnal<span class="_"> </span>instruction<span class="_"> </span>documented<span class="_"> </span>in<span class="_"> </span>Figure<span class="_"> </span>3.4<span class="_"> </span>is<span class="_"> </span>for<span class="_"> </span>dealing<span class="_"> </span>with<span class="_"> </span>64-bit<span class="_"> </span>imme-</div><div class="t m5 x17 h26 y2237 ff7 fs19 fc2 sc0 ls0 ws0">diate<span class="_ _13"> </span>data.<span class="_ _6"> </span>The<span class="_ _6"> </span>regular<span class="_ _13"> </span><span class="ffd">movq<span class="_ _13"> </span></span>instruction<span class="_ _6"> </span>can<span class="_ _13"> </span>only<span class="_ _13"> </span>have<span class="_ _6"> </span>immediate<span class="_ _13"> </span>source<span class="_ _13"> </span>operands</div><div class="t m5 x17 h26 y2238 ff7 fs19 fc2 sc0 ls0 ws0">that<span class="_ _11"> </span>can<span class="_ _16"> </span>be<span class="_ _11"> </span>represented<span class="_ _11"> </span>as<span class="_ _16"> </span>32-bit<span class="_ _11"> </span>two’s-complement<span class="_ _11"> </span>numbers<span class="_ _1"></span>.<span class="_ _16"> </span>T<span class="_ _1"></span>his<span class="_ _16"> </span>value<span class="_ _11"> </span>is<span class="_ _11"> </span>then</div><div class="t m5 x17 h26 y2239 ff7 fs19 fc2 sc0 ls0 ws0">sign<span class="_ _14"> </span>extended<span class="_ _14"> </span>to<span class="_ _14"> </span>produce<span class="_ _14"> </span>the<span class="_ _16"> </span>64-bit<span class="_ _14"> </span>value<span class="_ _14"> </span>for<span class="_ _14"> </span>the<span class="_ _14"> </span>destination.<span class="_ _14"> </span>The<span class="_ _16"> </span><span class="ffd">movabsq<span class="_ _14"> </span></span>in-</div><div class="t m5 x17 h26 y223a ff7 fs19 fc2 sc0 ls0 ws0">struction<span class="_"> </span>can<span class="_"> </span>have<span class="_ _11"> </span>an<span class="_"> </span>arbitrary<span class="_ _11"> </span>64-bit<span class="_"> </span>immediate<span class="_"> </span>value<span class="_ _11"> </span>as<span class="_"> </span>its<span class="_ _11"> </span>source<span class="_"> </span>operand<span class="_ _11"> </span>and</div><div class="t m5 x17 h26 yd16 ff7 fs19 fc2 sc0 ls0 ws0">can<span class="_"> </span>only<span class="_"> </span>have<span class="_"> </span>a<span class="_"> </span>register<span class="_"> </span>as<span class="_"> </span>a<span class="_"> </span>destination.</div><div class="t m5 x26 h26 yd17 ff7 fs19 fc2 sc0 ls0 ws0">F<span class="_ _1"></span>igures<span class="_ _16"> </span>3.5<span class="_ _11"> </span>and<span class="_ _11"> </span>3.6<span class="_ _11"> </span>document<span class="_ _16"> </span>two<span class="_ _11"> </span>classes<span class="_ _11"> </span>of<span class="_ _11"> </span>data<span class="_ _16"> </span>movement<span class="_ _11"> </span>instructions<span class="_ _11"> </span>for</div><div class="t m5 x17 h26 y223b ff7 fs19 fc2 sc0 ls0 ws0">use<span class="_ _21"> </span>when<span class="_ _21"> </span>copying<span class="_ _21"> </span>a<span class="_ _21"> </span>smaller<span class="_ _21"> </span>source<span class="_ _21"> </span>value<span class="_ _21"> </span>to<span class="_ _21"> </span>a<span class="_ _21"> </span>larger<span class="_ _21"> </span>destination.<span class="_ _21"> </span>All<span class="_ _21"> </span>of<span class="_ _21"> </span>these</div><div class="t m5 x17 h26 y223c ff7 fs19 fc2 sc0 ls0 ws0">instructions<span class="_ _15"> </span>copy<span class="_ _15"> </span>data<span class="_ _21"> </span>from<span class="_ _15"> </span>a<span class="_ _15"> </span>source,<span class="_ _21"> </span>which<span class="_ _15"> </span>can<span class="_ _15"> </span>be<span class="_ _21"> </span>either<span class="_ _15"> </span>a<span class="_ _21"> </span>register<span class="_ _15"> </span>or<span class="_ _15"> </span>stored</div></div><div class="pi" data-data='{"ctm":[2.000000,0.000000,0.000000,2.000000,0.000000,0.000000]}'></div></div>
