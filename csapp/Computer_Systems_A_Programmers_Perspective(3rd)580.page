<div id="pf244" class="pf w2 h11" data-page-no="244"><div class="pc pc244 w2 h11"><img class="bi x0 y0 w1 h1" alt="" src="csapp/bg244.png"/><div class="t m5 x93 h28 y9b ff6 fs1f fc2 sc0 ls0 ws0">Section<span class="_ _10"> </span>5.9<span class="_ _60"> </span>Enhancing<span class="_ _10"> </span>Parallelism<span class="_ _3e"> </span><span class="ffe fs1e">579</span></div><div class="t m5 x52 haa y4e59 ff65 fs6a fc1 sc0 ls0 ws0">%rax<span class="_ _60"> </span>%rbp<span class="_ _3d"> </span>%rdx<span class="_ _1a"> </span>%xmm0</div><div class="t m5 x119 haa y4e5a ff65 fs6a fc1 sc0 ls0 ws0">vmulsd 8(%rax,%rdx,8), %xmm0, %xmm0</div><div class="t m5 x119 haa y4e5b ff65 fs6a fc1 sc0 ls0 ws0">vmulsd %xmm0, %xmm1, %xmm1</div><div class="t m5 x119 haa y4e5c ff65 fs6a fc1 sc0 ls0 ws0">vmovsd (%rax,%rdx,8), %xmm0</div><div class="t m5 x119 haa y4e5d ff65 fs6a fc1 sc0 ls0 ws0">addq $2,%rdx</div><div class="t m5 x119 haa y4e5e ff65 fs6a fc1 sc0 ls0 ws0">cmpq %rdx,%rbp</div><div class="t m5 x119 haa y4e5f ff65 fs6a fc1 sc0 ls0 ws0">jg loop </div><div class="t m5 x52 haa y4e60 ff65 fs6a fc1 sc0 ls0 ws0">%rax<span class="_ _60"> </span>%rbp<span class="_ _3d"> </span>%rdx<span class="_ _1a"> </span>%xmm0</div><div class="t m5 x15e haa y4e59 ff65 fs6a fc1 sc0 ls0 ws0">%xmm1</div><div class="t m5 x15e haa y4e60 ff65 fs6a fc1 sc0 ls0 ws0">%xmm1</div><div class="t m5 xdc hae y4e61 ff66 fs69 fc1 sc0 ls21d ws0">load</div><div class="t m5 xdc hae y4e62 ff66 fs69 fc1 sc0 ls21d ws0">load</div><div class="t m5 x1b2 hae y4e63 ff66 fs69 fc1 sc0 ls21d ws0">mul</div><div class="t m5 x1b2 hae y4e64 ff66 fs69 fc1 sc0 ls21d ws0">mul</div><div class="t m5 x1b2 hae y4e65 ff66 fs69 fc1 sc0 ls21d ws0">add</div><div class="t m5 xdc hae y4e66 ff66 fs69 fc1 sc0 ls21d ws0">cmp</div><div class="t m5 x1eb hae y4e67 ff66 fs69 fc1 sc0 ls21e ws0">jg</div><div class="t m5 x17 h3a y4e68 ffe fs16 fc6 sc0 ls0 ws0">Figure<span class="_ _21"> </span>5.27<span class="_ _c"> </span><span class="fc1">Graphical<span class="_ _21"> </span>representation<span class="_ _f"> </span>of<span class="_ _21"> </span>inner-loop<span class="_ _21"> </span>code<span class="_ _f"> </span>for<span class="_ _21"> </span><span class="ffd fs19">combine7</span>.<span class="_ _21"> </span><span class="ff6">Each</span></span></div><div class="t m5 x17 h34 y4e69 ff6 fs16 fc1 sc0 ls0 ws0">iteration<span class="_ _11"> </span>gets<span class="_ _11"> </span>decoded<span class="_ _11"> </span>into<span class="_ _11"> </span>similar<span class="_ _11"> </span>operations<span class="_ _16"> </span>as<span class="_ _10"> </span>for</div><div class="t m5 xd5 h3a y4e6a ffd fs19 fc1 sc0 ls0 ws0">combine5<span class="_ _11"> </span><span class="ff6 fs16">or<span class="_ _11"> </span></span>combine6<span class="ff6 fs16">,<span class="_ _11"> </span>but<span class="_ _11"> </span>with</span></div><div class="t m5 x17 h34 y4e6b ff6 fs16 fc1 sc0 ls0 ws0">different<span class="_ _10"> </span>data<span class="_ _11"> </span>dependencies.</div><div class="t m5 x142 hd7 y4e6c ff68 fs88 fc1 sc0 ls0 ws0">%rax<span class="_ _46"> </span>%rbp<span class="_ _46"> </span>%rdx<span class="_ _1c3"></span>%xmm1</div><div class="t m5 x22d hd7 y4e6d ff68 fs88 fc1 sc0 ls0 ws0">%xmm1<span class="_ _159"> </span>%rdx</div><div class="t m5 x68 hd7 y4e6e ff68 fs88 fc1 sc0 ls0 ws0">data[</div><div class="t m5 x121 hd7 y4e6f ff69 fs89 fc1 sc0 ls0 ws0">i<span class="_ _a"> </span><span class="ff68 fs88">]</span></div><div class="t m5 x68 hd7 y4e70 ff68 fs88 fc1 sc0 ls0 ws0">data[</div><div class="t m5 x121 hd7 y4e71 ff69 fs89 fc1 sc0 ls0 ws0">i<span class="_ _a"> </span><span class="ff68 fs88">+1]</span></div><div class="t m5 x35 hd8 y4e72 ff6a fs89 fc1 sc0 ls21f ws0">load</div><div class="t m5 x5c hd8 y4e73 ff6a fs89 fc1 sc0 ls21f ws0">load</div><div class="t m5 x1d4 hd8 y4e74 ff6a fs89 fc1 sc0 ls21f ws0">mul</div><div class="t m5 x253 hd8 y4e75 ff6a fs89 fc1 sc0 ls21f ws0">mul</div><div class="t m5 xf7 hd8 y4e76 ff6a fs89 fc1 sc0 ls21f ws0">add</div><div class="t m5 x4f hd8 y4e77 ff6a fs89 fc1 sc0 ls21f ws0">cmp</div><div class="t m5 x1d5 hd8 y4e78 ff6a fs89 fc1 sc0 ls21f ws0">(a)<span class="_ _1e7"> </span>(b)</div><div class="t m5 xc2 hd8 y4e79 ff6a fs89 fc1 sc0 ls21f ws0">jg</div><div class="t m5 x3c hd7 y4e6c ff68 fs88 fc1 sc0 ls0 ws0">%rdx<span class="_ _1e8"></span>%xmm1</div><div class="t m5 x99 hd7 y4e6d ff68 fs88 fc1 sc0 ls0 ws0">%xmm1<span class="_ _bf"> </span>%rdx</div><div class="t m5 x42 hd8 y4e72 ff6a fs89 fc1 sc0 ls21f ws0">load</div><div class="t m5 x163 hd8 y4e73 ff6a fs89 fc1 sc0 ls21f ws0">load</div><div class="t m5 xfe hd8 y4e74 ff6a fs89 fc1 sc0 ls21f ws0">mul</div><div class="t m5 x24 hd8 y4e75 ff6a fs89 fc1 sc0 ls21f ws0">mul<span class="_ _7a"> </span>add</div><div class="t m5 x17 h3a y4e7a ffe fs16 fc6 sc0 ls0 ws0">Figure<span class="_"> </span>5.28<span class="_ _c"> </span><span class="fc1">Abstracting<span class="_"> </span><span class="ffd fs19">combine7<span class="_ _11"> </span></span>operations<span class="_"> </span>as<span class="_"> </span>a<span class="_ _11"> </span>data-ï¬‚ow<span class="_"> </span>graph.<span class="_ _11"> </span><span class="ff6">W<span class="_ _0"></span>e<span class="_ _10"> </span>rearrange,</span></span></div><div class="t m5 x17 h34 y4e7b ff6 fs16 fc1 sc0 ls0 ws0">simplify<span class="_ _3"></span>,<span class="_ _11"> </span>and<span class="_ _11"> </span>abstract<span class="_ _11"> </span>the<span class="_ _11"> </span>representation<span class="_ _11"> </span>of<span class="_ _11"> </span>Figure<span class="_ _10"> </span>5.27<span class="_ _11"> </span>to<span class="_ _11"> </span>show<span class="_ _11"> </span>the<span class="_ _11"> </span>data<span class="_ _11"> </span>dependencies</div><div class="t m5 x17 h34 y4e7c ff6 fs16 fc1 sc0 ls0 ws0">between<span class="_ _13"> </span>successive<span class="_ _13"> </span>iterations.<span class="_ _13"> </span>The<span class="_ _13"> </span>upper<span class="_ _13"> </span>mul<span class="_ _13"> </span>operation<span class="_ _13"> </span>multiplies<span class="_ _13"> </span>two<span class="_ _13"> </span>2-vector<span class="_ _13"> </span>elements</div><div class="t m5 x17 h34 y4e7d ff6 fs16 fc1 sc0 ls0 ws0">with<span class="_ _10"> </span>each<span class="_ _11"> </span>other<span class="_ _1"></span>,<span class="_ _10"> </span>while<span class="_ _11"> </span>the<span class="_ _10"> </span>lower<span class="_ _11"> </span>one<span class="_ _10"> </span>multiplies<span class="_ _11"> </span>the<span class="_ _10"> </span>result<span class="_ _10"> </span>by<span class="_ _11"> </span>loop<span class="_ _10"> </span>variable</div><div class="t m5 x11a h3a y4e7e ffd fs19 fc1 sc0 ls0 ws0">acc<span class="ff6 fs16">.</span></div></div><div class="pi" data-data='{"ctm":[2.000000,0.000000,0.000000,2.000000,0.000000,0.000000]}'></div></div>
