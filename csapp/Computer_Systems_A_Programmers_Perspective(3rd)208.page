<div id="pfd0" class="pf w2 h11" data-page-no="d0"><div class="pc pcd0 w2 h11"><img class="bi x0 y0 w1 h1" alt="" src="csapp/bgd0.png"/><div class="t m5 x1e8 h28 y9b ff6 fs1f fc2 sc0 ls0 ws0">Section<span class="_ _10"> </span>3.2<span class="_ _60"> </span>Program<span class="_ _10"> </span>Encodings<span class="_ _3e"> </span><span class="ffe fs1e">207</span></div><div class="t m5 x17 h26 ye7 ff7 fs19 fc2 sc0 ls0 ws0">appears<span class="_ _14"> </span>to<span class="_ _14"> </span>be<span class="_ _15"> </span>a<span class="_ _14"> </span>very<span class="_ _15"> </span>large<span class="_ _14"> </span>byte<span class="_ _14"> </span>array<span class="_ _3"></span>.<span class="_ _14"> </span>The<span class="_ _14"> </span>actual<span class="_ _14"> </span>implementation<span class="_ _14"> </span>of<span class="_ _15"> </span>the<span class="_ _14"> </span>mem-</div><div class="t m5 x17 h26 y2a7 ff7 fs19 fc2 sc0 ls0 ws0">ory<span class="_ _13"> </span>system<span class="_"> </span>involves<span class="_ _13"> </span>a<span class="_"> </span>combination<span class="_ _13"> </span>of<span class="_"> </span>multiple<span class="_ _13"> </span>hardware<span class="_"> </span>memories<span class="_ _13"> </span>and<span class="_"> </span>operating</div><div class="t m5 x17 h26 y2a8 ff7 fs19 fc2 sc0 ls0 ws0">system<span class="_"> </span>software<span class="_ _1"></span>,<span class="_"> </span>as<span class="_"> </span>described<span class="_"> </span>in<span class="_"> </span>Chapter<span class="_"> </span>9.</div><div class="t m5 x26 h26 y2f7 ff7 fs19 fc2 sc0 ls0 ws0">T<span class="_ _1"></span>he<span class="_ _21"> </span>compiler<span class="_ _15"> </span>does<span class="_ _21"> </span>most<span class="_ _15"> </span>of<span class="_ _21"> </span>the<span class="_ _15"> </span>work<span class="_ _21"> </span>in<span class="_ _15"> </span>the<span class="_ _21"> </span>overall<span class="_ _21"> </span>compilation<span class="_ _15"> </span>sequence,</div><div class="t m5 x17 h26 y2f8 ff7 fs19 fc2 sc0 ls0 ws0">transforming<span class="_"> </span>programs<span class="_"> </span>expressed<span class="_"> </span>in<span class="_"> </span>the<span class="_"> </span>relatively<span class="_ _11"> </span>abstract<span class="_"> </span>execution<span class="_"> </span>model<span class="_"> </span>pro-</div><div class="t m5 x17 h26 y2f9 ff7 fs19 fc2 sc0 ls0 ws0">vided<span class="_"> </span>by<span class="_ _13"> </span>C<span class="_"> </span>into<span class="_"> </span>the<span class="_ _13"> </span>very<span class="_"> </span>elementary<span class="_"> </span>instructions<span class="_ _13"> </span>that<span class="_"> </span>the<span class="_"> </span>processor<span class="_ _13"> </span>executes<span class="_ _0"></span>.<span class="_"> </span>T<span class="_ _1"></span>he</div><div class="t m5 x17 h26 y2fa ff7 fs19 fc2 sc0 ls0 ws0">assembly-code<span class="_ _16"> </span>representation<span class="_ _16"> </span>is<span class="_ _16"> </span>very<span class="_ _16"> </span>close<span class="_ _14"> </span>to<span class="_ _16"> </span>machine<span class="_ _16"> </span>code.<span class="_ _11"> </span>Its<span class="_ _14"> </span>main<span class="_ _16"> </span>feature<span class="_ _16"> </span>is</div><div class="t m5 x17 h26 y2fb ff7 fs19 fc2 sc0 ls0 ws0">that<span class="_"> </span>it<span class="_ _11"> </span>is<span class="_ _11"> </span>in<span class="_ _11"> </span>a<span class="_ _11"> </span>more<span class="_ _11"> </span>readable<span class="_ _11"> </span>textual<span class="_ _11"> </span>format,<span class="_ _11"> </span>as<span class="_"> </span>compared<span class="_ _11"> </span>to<span class="_ _11"> </span>the<span class="_ _11"> </span>binary<span class="_ _11"> </span>format<span class="_ _11"> </span>of</div><div class="t m5 x17 h26 y2fc ff7 fs19 fc2 sc0 ls0 ws0">machine<span class="_"> </span>code.<span class="_"> </span>Being<span class="_"> </span>able<span class="_ _11"> </span>to<span class="_"> </span>understand<span class="_ _11"> </span>assembly<span class="_ _11"> </span>code<span class="_"> </span>and<span class="_ _11"> </span>how<span class="_ _11"> </span>it<span class="_"> </span>relates<span class="_ _11"> </span>to<span class="_ _11"> </span>the</div><div class="t m5 x17 h26 y2fd ff7 fs19 fc2 sc0 ls0 ws0">original<span class="_"> </span>C<span class="_"> </span>code<span class="_"> </span>is<span class="_"> </span>a<span class="_"> </span>key<span class="_"> </span>step<span class="_"> </span>in<span class="_"> </span>understanding<span class="_"> </span>how<span class="_"> </span>computers<span class="_"> </span>execute<span class="_"> </span>programs<span class="_ _1"></span>.</div><div class="t m5 x26 h26 y2fe ff7 fs19 fc2 sc0 ls0 ws0">T<span class="_ _1"></span>he<span class="_"> </span>machine<span class="_ _13"> </span>code<span class="_ _13"> </span>for<span class="_ _13"> </span>x86-64<span class="_"> </span>differs<span class="_ _13"> </span>greatly<span class="_ _13"> </span>from<span class="_ _13"> </span>the<span class="_"> </span>original<span class="_ _13"> </span>C<span class="_ _13"> </span>code<span class="_ _0"></span>.<span class="_ _13"> </span>Parts<span class="_"> </span>of</div><div class="t m5 x17 h26 y2ff ff7 fs19 fc2 sc0 ls0 ws0">the<span class="_"> </span>processor<span class="_"> </span>state<span class="_"> </span>are<span class="_"> </span>visible<span class="_"> </span>that<span class="_"> </span>normally<span class="_"> </span>are<span class="_"> </span>hidden<span class="_"> </span>from<span class="_"> </span>the<span class="_"> </span>C<span class="_"> </span>programmer:</div><div class="t m5 x72 h3d y20a9 ff14 fs26 fc6 sc0 ls0 ws0">.</div><div class="t m5 x26 h26 y20aa ff7 fs19 fc1 sc0 lsd ws0">Th<span class="_ _2"></span>e<span class="_"> </span><span class="ffa ls0">program<span class="_ _6"> </span>counter<span class="_ _13"> </span><span class="ff7">(commonly<span class="_ _13"> </span>referred<span class="_ _6"> </span>to<span class="_ _6"> </span>as<span class="_ _13"> </span>the<span class="_ _a"> </span>PC,<span class="_ _13"> </span>and<span class="_ _a"> </span>called<span class="_ _13"> </span><span class="ffd">%rip<span class="_ _6"> </span></span>in<span class="_ _6"> </span>x86-</span></span></div><div class="t m5 x26 h26 y20ab ff7 fs19 fc1 sc0 ls0 ws0">64)<span class="_"> </span>indicates<span class="_"> </span>the<span class="_"> </span>address<span class="_"> </span>in<span class="_"> </span>memory<span class="_"> </span>of<span class="_"> </span>the<span class="_"> </span>next<span class="_"> </span>instruction<span class="_"> </span>to<span class="_"> </span>be<span class="_"> </span>executed.</div><div class="t m5 x72 h3d y20ac ff14 fs26 fc6 sc0 ls0 ws0">.</div><div class="t m5 x26 h26 y20ad ff7 fs19 fc1 sc0 ls0 ws0">T<span class="_ _1"></span>he<span class="_ _21"> </span>integer<span class="_ _21"> </span><span class="ffa">register<span class="_ _21"> </span>ﬁle<span class="_ _21"> </span></span>contains<span class="_ _21"> </span>16<span class="_ _21"> </span>named<span class="_ _21"> </span>locations<span class="_ _21"> </span>storing<span class="_ _21"> </span>64-bit<span class="_ _21"> </span>values<span class="_ _0"></span>.</div><div class="t m5 x26 h26 y20ae ff7 fs19 fc1 sc0 ls0 ws0">T<span class="_ _1"></span>hese<span class="_ _16"> </span>registers<span class="_ _11"> </span>can<span class="_ _16"> </span>hold<span class="_ _11"> </span>addresses<span class="_ _16"> </span>(corresponding<span class="_ _16"> </span>to<span class="_ _11"> </span>C<span class="_ _16"> </span>pointers)<span class="_ _11"> </span>or<span class="_ _16"> </span>integer</div><div class="t m5 x26 h26 y20af ff7 fs19 fc1 sc0 ls0 ws0">data.<span class="_ _16"> </span>Some<span class="_ _16"> </span>registers<span class="_ _16"> </span>are<span class="_ _16"> </span>used<span class="_ _16"> </span>to<span class="_ _16"> </span>keep<span class="_ _16"> </span>track<span class="_ _16"> </span>of<span class="_ _14"> </span>critical<span class="_ _16"> </span>parts<span class="_ _16"> </span>of<span class="_ _16"> </span>the<span class="_ _16"> </span>program</div><div class="t m5 x26 h26 y20b0 ff7 fs19 fc1 sc0 ls0 ws0">state<span class="_ _1"></span>,<span class="_ _14"> </span>while<span class="_ _14"> </span>others<span class="_ _16"> </span>are<span class="_ _14"> </span>used<span class="_ _16"> </span>to<span class="_ _14"> </span>hold<span class="_ _16"> </span>temporary<span class="_ _14"> </span>data,<span class="_ _14"> </span>such<span class="_ _16"> </span>as<span class="_ _16"> </span>the<span class="_ _14"> </span>arguments</div><div class="t m5 x26 h26 y20b1 ff7 fs19 fc1 sc0 ls0 ws0">and<span class="_ _16"> </span>local<span class="_ _16"> </span>variables<span class="_ _16"> </span>of<span class="_ _16"> </span>a<span class="_ _14"> </span>procedure<span class="_ _1"></span>,<span class="_ _14"> </span>as<span class="_ _16"> </span>well<span class="_ _14"> </span>as<span class="_ _16"> </span>the<span class="_ _16"> </span>value<span class="_ _16"> </span>to<span class="_ _16"> </span>be<span class="_ _14"> </span>returned<span class="_ _16"> </span>by<span class="_ _16"> </span>a</div><div class="t m5 x26 h26 y20b2 ff7 fs19 fc1 sc0 ls0 ws0">function.</div><div class="t m5 x72 h3d y20b3 ff14 fs26 fc6 sc0 ls0 ws0">.</div><div class="t m5 x26 h26 y20b4 ff7 fs19 fc1 sc0 ls0 ws0">T<span class="_ _1"></span>he<span class="_"> </span>condition<span class="_"> </span>code<span class="_"> </span>registers<span class="_ _13"> </span>hold<span class="_"> </span>status<span class="_"> </span>information<span class="_"> </span>about<span class="_ _13"> </span>the<span class="_"> </span>most<span class="_"> </span>recently</div><div class="t m5 x26 h26 y20b5 ff7 fs19 fc1 sc0 ls0 ws0">executed<span class="_"> </span>arithmetic<span class="_"> </span>or<span class="_"> </span>logical<span class="_"> </span>instruction.<span class="_ _11"> </span>T<span class="_ _1"></span>hese<span class="_ _11"> </span>are<span class="_"> </span>used<span class="_"> </span>to<span class="_"> </span>implement<span class="_ _11"> </span>con-</div><div class="t m5 x26 h26 y20b6 ff7 fs19 fc1 sc0 ls0 ws0">ditional<span class="_"> </span>changes<span class="_"> </span>in<span class="_"> </span>the<span class="_"> </span>control<span class="_"> </span>or<span class="_"> </span>data<span class="_"> </span>ﬂow<span class="_ _3"></span>,<span class="_"> </span>such<span class="_"> </span>as<span class="_"> </span>is<span class="_"> </span>required<span class="_"> </span>to<span class="_"> </span>implement</div><div class="t m5 x26 h26 y20b7 ffd fs19 fc1 sc0 ls0 ws0">if<span class="_ _10"> </span><span class="ff7">and<span class="_"> </span></span>while<span class="_ _10"> </span><span class="ff7">statements<span class="_ _1"></span>.</span></div><div class="t m5 x72 h3d y20b8 ff14 fs26 fc6 sc0 ls0 ws0">.</div><div class="t m5 x26 h26 y20b9 ff7 fs19 fc1 sc0 ls0 ws0">A<span class="_"> </span>set<span class="_ _11"> </span>of<span class="_ _11"> </span>vector<span class="_"> </span>registers<span class="_ _11"> </span>can<span class="_ _11"> </span>each<span class="_"> </span>hold<span class="_ _11"> </span>one<span class="_ _11"> </span>or<span class="_"> </span>more<span class="_ _11"> </span>integer<span class="_ _11"> </span>or<span class="_"> </span>ﬂoating-point</div><div class="t m5 x26 h26 y20ba ff7 fs19 fc1 sc0 ls0 ws0">values<span class="_ _1"></span>.</div><div class="t m5 x26 h26 y20bb ff7 fs19 fc1 sc0 ls0 ws0">Whereas<span class="_"> </span>C<span class="_ _11"> </span>provides<span class="_ _16"> </span>a<span class="_"> </span>model<span class="_ _16"> </span>in<span class="_"> </span>which<span class="_ _16"> </span>objects<span class="_"> </span>of<span class="_ _16"> </span>different<span class="_ _11"> </span>data<span class="_ _11"> </span>types<span class="_ _11"> </span>can<span class="_ _11"> </span>be</div><div class="t m5 x17 h26 y20bc ff7 fs19 fc1 sc0 ls0 ws0">declared<span class="_ _14"> </span>and<span class="_ _15"> </span>allocated<span class="_ _15"> </span>in<span class="_ _15"> </span>memory<span class="_ _3"></span>,<span class="_ _15"> </span>machine<span class="_ _15"> </span>code<span class="_ _15"> </span>views<span class="_ _15"> </span>the<span class="_ _15"> </span>memory<span class="_ _14"> </span>as<span class="_ _15"> </span>simply</div><div class="t m5 x17 h26 y20bd ff7 fs19 fc1 sc0 ls0 ws0">a<span class="_ _21"> </span>large<span class="_ _f"> </span>byte-addressable<span class="_ _21"> </span>array<span class="_ _3"></span>.<span class="_ _f"> </span>Aggregate<span class="_ _21"> </span>data<span class="_ _f"> </span>types<span class="_ _21"> </span>in<span class="_ _f"> </span>C<span class="_ _21"> </span>such<span class="_ _f"> </span>as<span class="_ _21"> </span>arrays<span class="_ _f"> </span>and</div><div class="t m5 x17 h26 y20be ff7 fs19 fc1 sc0 ls0 ws0">structures<span class="_ _15"> </span>are<span class="_ _15"> </span>represented<span class="_ _15"> </span>in<span class="_ _21"> </span>machine<span class="_ _15"> </span>code<span class="_ _15"> </span>as<span class="_ _21"> </span>contiguous<span class="_ _15"> </span>collections<span class="_ _15"> </span>of<span class="_ _15"> </span>bytes<span class="_ _0"></span>.</div><div class="t m5 x17 h26 y20bf ff7 fs19 fc1 sc0 ls0 ws0">Even<span class="_ _13"> </span>for<span class="_ _6"> </span>scalar<span class="_ _13"> </span>data<span class="_ _6"> </span>types<span class="_ _1"></span>,<span class="_ _13"> </span>assembly<span class="_ _13"> </span>code<span class="_ _6"> </span>makes<span class="_ _13"> </span>no<span class="_ _6"> </span>distinctions<span class="_ _13"> </span>between<span class="_ _6"> </span>signed<span class="_ _13"> </span>or</div><div class="t m5 x17 h26 y20c0 ff7 fs19 fc1 sc0 ls0 ws0">unsigned<span class="_"> </span>integers<span class="_ _1"></span>,<span class="_ _11"> </span>between<span class="_ _11"> </span>different<span class="_"> </span>types<span class="_ _11"> </span>of<span class="_ _11"> </span>pointers<span class="_ _1"></span>,<span class="_ _11"> </span>or<span class="_"> </span>even<span class="_ _11"> </span>between<span class="_ _11"> </span>pointers</div><div class="t m5 x17 h26 y20c1 ff7 fs19 fc1 sc0 ls0 ws0">and<span class="_"> </span>integers<span class="_ _1"></span>.</div><div class="t m5 x26 h26 y20c2 ff7 fs19 fc1 sc0 ls0 ws0">T<span class="_ _1"></span>he<span class="_ _13"> </span>program<span class="_ _13"> </span>memory<span class="_ _13"> </span>contains<span class="_ _13"> </span>the<span class="_ _13"> </span>executable<span class="_ _13"> </span>machine<span class="_ _13"> </span>code<span class="_ _13"> </span>for<span class="_ _6"> </span>the<span class="_ _13"> </span>program,</div><div class="t m5 x17 h26 y20c3 ff7 fs19 fc1 sc0 ls0 ws0">some<span class="_ _6"> </span>information<span class="_ _13"> </span>required<span class="_ _a"> </span>by<span class="_ _13"> </span>the<span class="_ _a"> </span>operating<span class="_ _13"> </span>system,<span class="_ _6"> </span>a<span class="_ _13"> </span>run-time<span class="_ _a"> </span>stack<span class="_ _13"> </span>for<span class="_ _6"> </span>managing</div><div class="t m5 x17 h26 y20c4 ff7 fs19 fc1 sc0 ls0 ws0">procedure<span class="_"> </span>calls<span class="_"> </span>and<span class="_"> </span>returns<span class="_ _1"></span>,<span class="_"> </span>and<span class="_"> </span>blocks<span class="_"> </span>of<span class="_"> </span>memory<span class="_ _11"> </span>allocated<span class="_"> </span>by<span class="_"> </span>the<span class="_"> </span>user<span class="_"> </span>(e.g<span class="_ _1"></span>.,<span class="_"> </span>by</div><div class="t m5 x17 h26 y20c5 ff7 fs19 fc1 sc0 ls0 ws0">using<span class="_ _16"> </span>the<span class="_ _16"> </span><span class="ffd">malloc<span class="_ _16"> </span></span>library<span class="_ _16"> </span>function).<span class="_ _16"> </span>As<span class="_ _16"> </span>mentioned<span class="_ _16"> </span>earlier,<span class="_ _16"> </span>the<span class="_ _16"> </span>program<span class="_ _16"> </span>memory</div><div class="t m5 x17 h26 y20c6 ff7 fs19 fc1 sc0 ls0 ws0">is<span class="_"> </span>addressed<span class="_"> </span>using<span class="_"> </span>virtual<span class="_"> </span>addresses<span class="_ _3"></span>.<span class="_"> </span>At<span class="_"> </span>any<span class="_"> </span>given<span class="_"> </span>time<span class="_ _1"></span>,<span class="_"> </span>only<span class="_"> </span>limited<span class="_"> </span>subranges<span class="_"> </span>of</div><div class="t m5 x17 h26 y20c7 ff7 fs19 fc1 sc0 ls0 ws0">virtual<span class="_"> </span>addresses<span class="_ _11"> </span>are<span class="_ _11"> </span>considered<span class="_ _11"> </span>valid.<span class="_ _11"> </span>F<span class="_ _1"></span>or<span class="_"> </span>example,<span class="_"> </span>x86-64<span class="_ _11"> </span>virtual<span class="_ _11"> </span>addresses<span class="_"> </span>are</div><div class="t m5 x17 h26 y20c8 ff7 fs19 fc1 sc0 ls0 ws0">represented<span class="_ _16"> </span>by<span class="_ _11"> </span>64-bit<span class="_ _16"> </span>words<span class="_ _1"></span>.<span class="_ _16"> </span>In<span class="_ _16"> </span>current<span class="_ _16"> </span>implementations<span class="_ _11"> </span>of<span class="_ _16"> </span>these<span class="_ _16"> </span>machines<span class="_ _1"></span>,<span class="_ _16"> </span>the</div><div class="t m5 x17 h26 y20c9 ff7 fs19 fc1 sc0 ls0 ws0">upper<span class="_"> </span>16<span class="_"> </span>bits<span class="_ _13"> </span>must<span class="_"> </span>be<span class="_"> </span>set<span class="_"> </span>to<span class="_"> </span>zero<span class="_ _1"></span>,<span class="_"> </span>and<span class="_"> </span>so<span class="_"> </span>an<span class="_ _13"> </span>address<span class="_"> </span>can<span class="_"> </span>potentially<span class="_"> </span>specify<span class="_"> </span>a<span class="_"> </span>byte</div><div class="t m5 x17 h26 y20ca ff7 fs19 fc1 sc0 ls0 ws0">over<span class="_"> </span>a<span class="_ _11"> </span>range<span class="_ _11"> </span>of<span class="_ _11"> </span>2</div><div class="t m5 xa4 h3c ya06 ff7 fs25 fc1 sc0 ls0 ws0">48</div><div class="t m5 x23 h26 y15bf ff7 fs19 fc1 sc0 ls0 ws0">,<span class="_ _11"> </span>or<span class="_"> </span>64<span class="_ _11"> </span>terabytes<span class="_ _1"></span>.<span class="_ _11"> </span>More<span class="_ _11"> </span>typical<span class="_ _11"> </span>programs<span class="_"> </span>will<span class="_ _11"> </span>only<span class="_ _11"> </span>have<span class="_ _11"> </span>access</div><div class="t m5 x17 h26 y15c0 ff7 fs19 fc1 sc0 ls0 ws0">to<span class="_"> </span>a<span class="_"> </span>few<span class="_"> </span>megabytes<span class="_ _1"></span>,<span class="_"> </span>or<span class="_"> </span>perhaps<span class="_"> </span>several<span class="_"> </span>gigabytes<span class="_ _0"></span>.<span class="_"> </span>T<span class="_ _1"></span>he<span class="_"> </span>operating<span class="_"> </span>system<span class="_ _11"> </span>manages</div></div><div class="pi" data-data='{"ctm":[2.000000,0.000000,0.000000,2.000000,0.000000,0.000000]}'></div></div>
