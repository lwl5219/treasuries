<div id="pf23c" class="pf w2 h11" data-page-no="23c"><div class="pc pc23c w2 h11"><img class="bi x0 y0 w1 h1" alt="" src="csapp/bg23c.png"/><div class="t m5 x1fa h28 y9b ff6 fs1f fc2 sc0 ls0 ws0">Section<span class="_ _10"> </span>5.8<span class="_ _60"> </span>Loop<span class="_ _10"> </span>Unrolling<span class="_ _3e"> </span><span class="ffe fs1e">571</span></div><div class="t m5 x17 h2f ye7 ffe fs16 fc6 sc0 ls0 ws0">Figure<span class="_"> </span>5.20</div><div class="t m5 x17 h2f y58a ffe fs16 fc1 sc0 ls0 ws0">Data-ﬂow<span class="_"> </span>representation</div><div class="t m5 x17 h2f y58b ffe fs16 fc1 sc0 ls0 ws0">of</div><div class="t m5 x1f5 h3a y609 ffd fs19 fc1 sc0 ls0 ws0">combine5<span class="_ _16"> </span><span class="ffe fs16">operating</span></div><div class="t m5 x17 h2f y60a ffe fs16 fc1 sc0 ls0 ws0">on<span class="_ _16"> </span>a<span class="_ _14"> </span>vector<span class="_ _16"> </span>of<span class="_ _14"> </span>length</div><div class="t m5 x17 h34 y2a12 ff11 fs16 fc1 sc0 ls0 ws0">n<span class="ffe">.<span class="_ _16"> </span><span class="ff6">Even<span class="_ _11"> </span>though<span class="_ _16"> </span>the<span class="_ _16"> </span>loop</span></span></div><div class="t m5 x17 h34 y2a13 ff6 fs16 fc1 sc0 ls0 ws0">has<span class="_ _16"> </span>been<span class="_ _16"> </span>unrolled<span class="_ _14"> </span>by<span class="_ _16"> </span>a</div><div class="t m5 x17 h34 y2a14 ff6 fs16 fc1 sc0 ls0 ws0">factor<span class="_ _10"> </span>of<span class="_ _11"> </span>2,<span class="_ _11"> </span>there<span class="_ _11"> </span>are<span class="_ _11"> </span>still<span class="_ _11"> </span><span class="ff11">n</span></div><div class="t m5 x17 h34 y4c88 ff6 fs16 fc1 sc0 ls0 ws0">mul<span class="_ _11"> </span>operations<span class="_ _16"> </span>along<span class="_ _11"> </span>the</div><div class="t m5 x17 h34 y4c89 ff6 fs16 fc1 sc0 ls0 ws0">critical<span class="_ _10"> </span>path.</div><div class="t m5 xf1 hcb y4d8a ff5f fs7f fc1 sc0 ls0 ws0">data[0]</div><div class="t m5 x15 h4c y4d8b ff60 fs2d fc1 sc0 ls21b ws0">load</div><div class="t m5 x1d1 h4c y4d8c ff60 fs2d fc1 sc0 ls21b ws0">mul</div><div class="t m5 xf1 hcb y4d8d ff5f fs7f fc1 sc0 ls0 ws0">data[1]</div><div class="t m5 x15 h4c y4d8e ff60 fs2d fc1 sc0 ls21b ws0">load</div><div class="t m5 x1d1 h4c y4d8f ff60 fs2d fc1 sc0 ls21b ws0">mul<span class="_ _131"> </span>add</div><div class="t m5 xf1 hcb y4d90 ff5f fs7f fc1 sc0 ls0 ws0">data[2]</div><div class="t m5 x15 h4c y4d91 ff60 fs2d fc1 sc0 ls21b ws0">load</div><div class="t m5 x1d1 h4c y4d92 ff60 fs2d fc1 sc0 ls21b ws0">mul</div><div class="t m5 xf1 hcb y4d93 ff5f fs7f fc1 sc0 ls0 ws0">data[3]</div><div class="t m5 x15 h4c y4d94 ff60 fs2d fc1 sc0 ls21b ws0">load</div><div class="t m5 x1d1 h4c y4d95 ff60 fs2d fc1 sc0 ls21b ws0">mul<span class="_ _131"> </span>add</div><div class="t m5 xf1 hd4 y4d96 ff5f fs7f fc1 sc0 ls0 ws0">data[<span class="ff61">n<span class="_ _2"></span></span>-2]</div><div class="t m5 x15 h4c y4d97 ff60 fs2d fc1 sc0 ls21b ws0">load</div><div class="t m5 x1d1 h4c y4d98 ff60 fs2d fc1 sc0 ls21b ws0">mul</div><div class="t m5 xf1 hd4 y4d99 ff5f fs7f fc1 sc0 ls0 ws0">data[<span class="ff61">n<span class="_ _2"></span></span>-1]</div><div class="t m5 x15 h4c y4d9a ff60 fs2d fc1 sc0 ls21b ws0">load</div><div class="t m5 x1d1 h4c y4d9b ff60 fs2d fc1 sc0 ls21b ws0">mul<span class="_ _131"> </span>add</div><div class="t m5 x79 h4c y4d9c ff60 fs2d fc1 sc0 ls21b wsb">Critical path</div><div class="t m5 x17 h26 y4d9d ff7 fs19 fc1 sc0 ls0 ws0">shown<span class="_ _f"> </span>in<span class="_ _f"> </span>F<span class="_ _0"></span>igure<span class="_ _f"> </span>5.20.<span class="_ _f"> </span>W<span class="_ _3"></span>e<span class="_ _e"> </span>see<span class="_ _21"> </span>here<span class="_ _f"> </span>that<span class="_ _f"> </span>there<span class="_ _e"> </span>is<span class="_ _21"> </span>still<span class="_ _f"> </span>a<span class="_ _f"> </span>critical<span class="_ _f"> </span>path<span class="_ _e"> </span>of<span class="_ _21"> </span><span class="ff11">n<span class="_ _f"> </span><span class="ff6">mul</span></span></div><div class="t m5 x17 h26 y4d9e ff7 fs19 fc1 sc0 ls0 ws0">operations<span class="_"> </span>in<span class="_ _13"> </span>this<span class="_"> </span>graph—there<span class="_ _13"> </span>are<span class="_"> </span>half<span class="_"> </span>as<span class="_ _13"> </span>many<span class="_"> </span>iterations<span class="_ _3"></span>,<span class="_"> </span>but<span class="_"> </span>each<span class="_ _13"> </span>iteration<span class="_"> </span>has</div><div class="t m5 x17 h26 y4d9f ff7 fs19 fc1 sc0 ls0 ws0">two<span class="_"> </span>multiplication<span class="_ _13"> </span>operations<span class="_"> </span>in<span class="_ _13"> </span>sequence.<span class="_ _13"> </span>Since<span class="_"> </span>the<span class="_ _13"> </span>critical<span class="_"> </span>path<span class="_"> </span>was<span class="_ _13"> </span>the<span class="_"> </span>limiting</div><div class="t m5 x17 h26 y4da0 ff7 fs19 fc1 sc0 ls0 ws0">factor<span class="_"> </span>for<span class="_"> </span>the<span class="_"> </span>performance<span class="_ _11"> </span>of<span class="_"> </span>the<span class="_"> </span>code<span class="_"> </span>without<span class="_ _11"> </span>loop<span class="_"> </span>unrolling,<span class="_"> </span>it<span class="_"> </span>remains<span class="_"> </span>so<span class="_"> </span>with</div><div class="t m5 x17 h46 y4da1 ff11 fs19 fc1 sc0 ls0 ws0">k<span class="_ _10"> </span><span class="ff12">×<span class="_ _10"> </span><span class="ff7">1<span class="_ _13"> </span>loop<span class="_"> </span>unrolling.</span></span></div><div class="t m5 x34 h2a y4da2 fff fs1c fc2 sc0 ls0 ws0">Aside<span class="_ _1b"> </span><span class="ff6 fs19">Getting<span class="_ _11"> </span>the<span class="_ _11"> </span>compiler<span class="_ _11"> </span>to<span class="_ _16"> </span>unroll<span class="_ _11"> </span>loops</span></div><div class="t m5 x34 h2b y4da3 ff7 fs1e fc2 sc0 ls0 ws0">Loop<span class="_ _6"> </span>unrolling<span class="_ _13"> </span>can<span class="_ _6"> </span>easily<span class="_ _13"> </span>be<span class="_ _6"> </span>performed<span class="_ _6"> </span>by<span class="_ _13"> </span>a<span class="_ _6"> </span>compiler.<span class="_ _6"> </span>Many<span class="_ _13"> </span>compilers<span class="_ _6"> </span>do<span class="_ _6"> </span>this<span class="_ _13"> </span>as<span class="_ _6"> </span>part<span class="_ _13"> </span>of<span class="_ _a"> </span>their<span class="_ _13"> </span>collection</div><div class="t m5 x34 h2b y4da4 ff7 fs1e fc2 sc0 ls0 ws0">of<span class="_ _13"> </span>optimizations<span class="_ _3"></span>.<span class="_ _13"> </span><span class="ff9">gcc<span class="_ _6"> </span></span>will<span class="_ _13"> </span>perform<span class="_ _6"> </span>some<span class="_ _13"> </span>forms<span class="_ _13"> </span>of<span class="_ _6"> </span>loop<span class="_ _13"> </span>unrolling<span class="_ _6"> </span>when<span class="_ _13"> </span>invoked<span class="_ _6"> </span>with<span class="_ _13"> </span>optimization<span class="_ _6"> </span>level<span class="_ _13"> </span>3</div><div class="t m5 x34 h2b y4da5 ff7 fs1e fc2 sc0 ls0 ws0">or<span class="_"> </span>higher.</div></div><div class="pi" data-data='{"ctm":[2.000000,0.000000,0.000000,2.000000,0.000000,0.000000]}'></div></div>
