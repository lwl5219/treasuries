<div id="pf206" class="pf w2 h11" data-page-no="206"><div class="pc pc206 w2 h11"><img class="bi x0 y0 w1 h1" alt="" src="csapp/bg206.png"/><div class="t m5 x107 h28 y9b ff6 fs1f fc2 sc0 ls0 ws0">Solutions<span class="_ _10"> </span>to<span class="_ _10"> </span>Practice<span class="_ _10"> </span>Problems<span class="_ _1b"> </span><span class="ffe fs1e">517</span></div><div class="t m5 x72 h3d y2d1a ff14 fs26 fc6 sc0 ls0 ws0">.</div><div class="t m5 x26 h46 ye7 ff7 fs19 fc1 sc0 ls0 ws0">Decimal<span class="_ _14"> </span><span class="ff12">−</span>3<span class="_ _16"> </span>(line<span class="_ _15"> </span>5)<span class="_ _14"> </span>has<span class="_ _14"> </span>hex<span class="_ _14"> </span>representation<span class="_ _15"> </span><span class="ffd">0xfffffffffffffffd</span>.<span class="_ _14"> </span>Writing</div><div class="t m5 x26 h26 y2a7 ff7 fs19 fc1 sc0 ls0 ws0">the<span class="_"> </span>bytes<span class="_"> </span>in<span class="_"> </span>reverse<span class="_"> </span>order<span class="_"> </span>gives<span class="_"> </span><span class="ffd">fd<span class="_ _11"> </span>ff<span class="_ _16"> </span>ff<span class="_ _16"> </span>ff<span class="_ _11"> </span>ff<span class="_ _16"> </span>ff<span class="_ _16"> </span>ff<span class="_ _11"> </span>ff</span>.</div><div class="t m5 x72 h3d y35f0 ff14 fs26 fc6 sc0 ls0 ws0">.</div><div class="t m5 x26 h26 y35f1 ff7 fs19 fc1 sc0 ls0 ws0">T<span class="_ _1"></span>he<span class="_"> </span>code<span class="_ _13"> </span>starts<span class="_ _13"> </span>at<span class="_ _13"> </span>address<span class="_"> </span><span class="ffd">0x100</span>.<span class="_ _13"> </span>T<span class="_ _1"></span>he<span class="_"> </span>ﬁrst<span class="_ _13"> </span>instruction<span class="_ _13"> </span>requires<span class="_ _13"> </span>10<span class="_"> </span>bytes<span class="_ _3"></span>,<span class="_"> </span>while</div><div class="t m5 x26 h26 y35f2 ff7 fs19 fc1 sc0 ls0 ws0">the<span class="_ _13"> </span>second<span class="_ _13"> </span>requires<span class="_ _13"> </span>2.<span class="_ _13"> </span>T<span class="_ _1"></span>hus<span class="_ _1"></span>,<span class="_ _13"> </span>the<span class="_ _13"> </span>loop<span class="_ _13"> </span>target<span class="_ _13"> </span>will<span class="_ _13"> </span>be<span class="_ _13"> </span><span class="ffd">0x0000010c</span>.<span class="_ _13"> </span>Writing<span class="_ _13"> </span>these</div><div class="t m5 x26 h26 y47a6 ff7 fs19 fc1 sc0 ls0 ws0">bytes<span class="_"> </span>in<span class="_"> </span>reverse<span class="_"> </span>order<span class="_"> </span>gives<span class="_"> </span><span class="ffd">0c<span class="_ _11"> </span>01<span class="_ _16"> </span>00<span class="_ _16"> </span>00<span class="_ _11"> </span>00<span class="_ _16"> </span>00<span class="_ _16"> </span>00<span class="_ _11"> </span>00</span>.</div><div class="t m5 x17 h28 y47a7 ffe fs1e fc6 sc0 ls0 ws0">Solution<span class="_"> </span>to<span class="_"> </span>Problem<span class="_"> </span>4.2<span class="_ _e"> </span><span class="fs16">(page<span class="_"> </span>396)</span></div><div class="t m5 x17 h26 y47a8 ff7 fs19 fc1 sc0 ls0 ws0">Decoding<span class="_ _15"> </span>a<span class="_ _21"> </span>byte<span class="_ _21"> </span>sequence<span class="_ _21"> </span>by<span class="_ _15"> </span>hand<span class="_ _21"> </span>helps<span class="_ _21"> </span>you<span class="_ _21"> </span>understand<span class="_ _15"> </span>the<span class="_ _21"> </span>task<span class="_ _21"> </span>faced<span class="_ _21"> </span>by<span class="_ _21"> </span>a</div><div class="t m5 x17 h26 y47a9 ff7 fs19 fc1 sc0 ls0 ws0">processor.<span class="_ _16"> </span>It<span class="_ _14"> </span>must<span class="_ _14"> </span>read<span class="_ _15"> </span>byte<span class="_ _14"> </span>sequences<span class="_ _14"> </span>and<span class="_ _14"> </span>determine<span class="_ _14"> </span>what<span class="_ _14"> </span>instructions<span class="_ _14"> </span>are<span class="_ _15"> </span>to</div><div class="t m5 x17 h26 y47aa ff7 fs19 fc1 sc0 ls0 ws0">be<span class="_"> </span>executed.<span class="_ _11"> </span>In<span class="_"> </span>the<span class="_ _11"> </span>following,<span class="_"> </span>we<span class="_ _11"> </span>show<span class="_ _11"> </span>the<span class="_"> </span>assembly<span class="_ _11"> </span>code<span class="_ _11"> </span>used<span class="_"> </span>to<span class="_ _11"> </span>generate<span class="_"> </span>each</div><div class="t m5 x17 h26 y47ab ff7 fs19 fc1 sc0 ls0 ws0">of<span class="_ _11"> </span>the<span class="_ _16"> </span>byte<span class="_ _11"> </span>sequences<span class="_ _1"></span>.<span class="_ _16"> </span>T<span class="_ _7"></span>o<span class="_ _16"> </span>the<span class="_ _11"> </span>left<span class="_ _16"> </span>of<span class="_ _11"> </span>the<span class="_ _16"> </span>assembly<span class="_ _11"> </span>code,<span class="_ _11"> </span>you<span class="_ _16"> </span>can<span class="_ _11"> </span>see<span class="_ _16"> </span>the<span class="_ _11"> </span>address</div><div class="t m5 x17 h26 y47ac ff7 fs19 fc1 sc0 ls0 ws0">and<span class="_"> </span>byte<span class="_"> </span>sequence<span class="_"> </span>for<span class="_"> </span>each<span class="_"> </span>instruction.</div><div class="t m5 x34 h26 y47ad ff7 fs19 fc1 sc0 ls0 ws0">A.<span class="_ _1f"> </span>Some<span class="_"> </span>operations<span class="_"> </span>with<span class="_"> </span>immediate<span class="_"> </span>data<span class="_"> </span>and<span class="_"> </span>address<span class="_"> </span>displacements:</div><div class="t m5 x2d h2d y47ae ffd fs1e fc2 sc0 ls0 ws0">0x100:<span class="_ _e"> </span>30f3fcffffffffffffff<span class="_ _1f"> </span>|<span class="_ _8c"> </span>irmovq<span class="_ _1f"> </span>$-4,%rbx</div><div class="t m5 x2d h2d y47af ffd fs1e fc2 sc0 ls0 ws0">0x10a:<span class="_ _e"> </span>40630008000000000000<span class="_ _1f"> </span>|<span class="_ _8c"> </span>rmmovq<span class="_ _1f"> </span>%rsi,0x800(%rbx)</div><div class="t m5 x2d h2d y47b0 ffd fs1e fc2 sc0 ls0 ws0">0x114:<span class="_ _e"> </span>00<span class="_ _104"> </span>|<span class="_ _8c"> </span>halt</div><div class="t m5 x34 h26 y47b1 ff7 fs19 fc2 sc0 ls0 ws0">B<span class="_ _3"></span>.<span class="_ _1d"> </span>Code<span class="_"> </span>including<span class="_"> </span>a<span class="_"> </span>function<span class="_"> </span>call:</div><div class="t m5 x2d h2d y47b2 ffd fs1e fc2 sc0 ls0 ws0">0x200:<span class="_ _e"> </span>a06f<span class="_ _15a"> </span>|<span class="_ _8c"> </span>pushq<span class="_ _1f"> </span>%rsi</div><div class="t m5 x2d h2d y47b3 ffd fs1e fc2 sc0 ls0 ws0">0x202:<span class="_ _e"> </span>800c02000000000000<span class="_ _3f"> </span>|<span class="_ _8c"> </span>call<span class="_ _1f"> </span>proc</div><div class="t m5 x2d h2d y47b4 ffd fs1e fc2 sc0 ls0 ws0">0x20b:<span class="_ _e"> </span>00<span class="_ _104"> </span>|<span class="_ _8c"> </span>halt</div><div class="t m5 x2d h2d y47b5 ffd fs1e fc2 sc0 ls0 ws0">0x20c:<span class="_ _129"> </span>|<span class="_ _e"> </span>proc:</div><div class="t m5 x2d h2d y47b6 ffd fs1e fc2 sc0 ls0 ws0">0x20c:<span class="_ _e"> </span>30f30a00000000000000<span class="_ _1f"> </span>|<span class="_ _8c"> </span>irmovq<span class="_ _1f"> </span>$10,%rbx</div><div class="t m5 x2d h2d y47b7 ffd fs1e fc2 sc0 ls0 ws0">0x216:<span class="_ _e"> </span>90<span class="_ _104"> </span>|<span class="_ _8c"> </span>ret</div><div class="t m5 x34 h26 y256c ff7 fs19 fc2 sc0 ls0 ws0">C.<span class="_ _25"> </span>Code<span class="_"> </span>containing<span class="_"> </span>illegal<span class="_"> </span>instruction<span class="_"> </span>speciﬁer<span class="_"> </span>byte<span class="_"> </span><span class="ffd">0xf0</span>:</div><div class="t m5 x2d h2d y47b8 ffd fs1e fc2 sc0 ls0 ws0">0x300:<span class="_ _e"> </span>50540700000000000000<span class="_ _1f"> </span>|<span class="_ _8c"> </span>mrmovq<span class="_ _1f"> </span>7(%rsp),%rbp</div><div class="t m5 x2d h2d y47b9 ffd fs1e fc2 sc0 ls0 ws0">0x30a:<span class="_ _e"> </span>10<span class="_ _104"> </span>|<span class="_ _8c"> </span>nop</div><div class="t m5 x2d h2d y47ba ffd fs1e fc2 sc0 ls0 ws0">0x30b:<span class="_ _e"> </span>f0<span class="_ _104"> </span>|<span class="_ _1f"> </span>.byte<span class="_ _e"> </span>0xf0<span class="_ _1a"> </span>#<span class="_ _1f"> </span>Invalid<span class="_ _e"> </span>instruction<span class="_ _1f"> </span>code</div><div class="t m5 x2d h2d y47bb ffd fs1e fc2 sc0 ls0 ws0">0x30c:<span class="_ _e"> </span>b01f<span class="_ _15a"> </span>|<span class="_ _8c"> </span>popq<span class="_ _1f"> </span>%rcx</div><div class="t m5 x34 h26 y47bc ff7 fs19 fc2 sc0 ls0 ws0">D<span class="_ _3"></span>.<span class="_ _23"> </span>Code<span class="_"> </span>containing<span class="_"> </span>a<span class="_"> </span>jump<span class="_"> </span>operation:</div><div class="t m5 x2d h2d y47bd ffd fs1e fc2 sc0 ls0 ws0">0x400:<span class="_ _129"> </span>|<span class="_ _e"> </span>loop:</div><div class="t m5 x2d h2d y47be ffd fs1e fc2 sc0 ls0 ws0">0x400:<span class="_ _e"> </span>6113<span class="_ _15a"> </span>|<span class="_ _8c"> </span>subq<span class="_ _1f"> </span>%rcx,<span class="_ _e"> </span>%rbx</div><div class="t m5 x2d h2d y47bf ffd fs1e fc2 sc0 ls0 ws0">0x402:<span class="_ _e"> </span>730004000000000000<span class="_ _3f"> </span>|<span class="_ _8c"> </span>je<span class="_ _1f"> </span>loop</div><div class="t m5 x2d h2d y47c0 ffd fs1e fc2 sc0 ls0 ws0">0x40b:<span class="_ _e"> </span>00<span class="_ _104"> </span>|<span class="_ _8c"> </span>halt</div><div class="t m5 x34 h26 y47c1 ff7 fs19 fc2 sc0 ls0 ws0">E.<span class="_ _25"> </span>Code<span class="_"> </span>containing<span class="_"> </span>an<span class="_"> </span>invalid<span class="_"> </span>second<span class="_"> </span>byte<span class="_"> </span>in<span class="_"> </span>a<span class="_"> </span><span class="ffd">pushq<span class="_ _10"> </span></span>instruction:</div><div class="t m5 x2d h2d y543 ffd fs1e fc2 sc0 ls0 ws0">0x500:<span class="_ _e"> </span>6362<span class="_ _15a"> </span>|<span class="_ _8c"> </span>xorq<span class="_ _1f"> </span>%rsi,%rdx</div><div class="t m5 x2d h2d y1ec6 ffd fs1e fc2 sc0 ls0 ws0">0x502:<span class="_ _e"> </span>a0<span class="_ _104"> </span>|<span class="_ _8c"> </span>.byte<span class="_ _1f"> </span>0xa0<span class="_ _3b"> </span>#<span class="_ _1f"> </span>pushq<span class="_ _1f"> </span>instruction</div><div class="t m5 x2d h2d y1ec7 ffd fs1e fc2 sc0 ls0 ws0">code</div><div class="t m5 x2d h2d y1ec8 ffd fs1e fc2 sc0 ls0 ws0">0x503:<span class="_ _e"> </span>f0<span class="_ _104"> </span>|<span class="_ _8c"> </span>.byte<span class="_ _1f"> </span>0xf0<span class="_ _3b"> </span>#<span class="_ _1f"> </span>Invalid<span class="_ _1f"> </span>register</div><div class="t m5 x2d h2d y1ec9 ffd fs1e fc2 sc0 ls0 ws0">specifier<span class="_ _e"> </span>byte</div></div><div class="pi" data-data='{"ctm":[2.000000,0.000000,0.000000,2.000000,0.000000,0.000000]}'></div></div>
