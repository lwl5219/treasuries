<div id="pff1" class="pf w2 h11" data-page-no="f1"><div class="pc pcf1 w2 h11"><img class="bi x0 y0 w1 h1" alt="" src="csapp/bgf1.png"/><div class="t m5 x14 h28 y9b ffe fs1e fc2 sc0 ls0 ws0">240<span class="_ _1b"> </span><span class="ff6 fs1f">Chapter<span class="_ _10"> </span>3<span class="_ _3d"> </span>Machine-Level<span class="_ _10"> </span>Representation<span class="_ _10"> </span>of<span class="_ _10"> </span>Programs</span></div><div class="t m5 x29 h46 y9c ff7 fs19 fc2 sc0 ls0 ws0">Consider<span class="_ _15"> </span>the<span class="_ _21"> </span><span class="ffd">sete</span>,<span class="_ _21"> </span>or<span class="_ _21"> </span>“set<span class="_ _21"> </span>when<span class="_ _15"> </span>equal,<span class="_ _1"></span>”<span class="_ _f"> </span>instruction.<span class="_ _21"> </span>When<span class="_ _15"> </span><span class="ff11">a<span class="_ _11"> </span><span class="ff12">=<span class="_ _10"> </span></span>b</span>,<span class="_ _f"> </span>we<span class="_ _21"> </span>will</div><div class="t m5 x1d h46 y409 ff7 fs19 fc2 sc0 ls0 ws0">have<span class="_ _11"> </span><span class="ff11">t<span class="_"> </span><span class="ff12">=<span class="_ _10"> </span></span></span><span class="ls3b">0,<span class="_ _11"> </span>and<span class="_ _16"> </span>hence<span class="_ _11"> </span>the<span class="_ _16"> </span>zero<span class="_ _11"> </span>ﬂag<span class="_ _16"> </span>indicates<span class="_ _11"> </span>equality<span class="_ _3"></span>.<span class="_ _16"> </span>Similarly<span class="_ _7"></span>,<span class="_ _16"> </span>consider<span class="_ _16"> </span>testing</span></div><div class="t m5 x1d h26 y40a ff7 fs19 fc2 sc0 ls0 ws0">for<span class="_ _14"> </span>signed<span class="_ _14"> </span>comparison<span class="_ _14"> </span>with<span class="_ _14"> </span>the<span class="_ _14"> </span><span class="ffd">setl</span>,<span class="_ _15"> </span>or<span class="_ _14"> </span>“set<span class="_ _15"> </span>when<span class="_ _14"> </span>less<span class="_ _1"></span>,<span class="_ _1"></span>”<span class="_ _15"> </span>instruction.<span class="_ _14"> </span>When<span class="_ _14"> </span>no</div><div class="t m5 x1d h26 y40b ff7 fs19 fc2 sc0 ls0 ws0">overﬂow<span class="_ _13"> </span>occurs<span class="_ _6"> </span>(indicated<span class="_ _13"> </span>by<span class="_ _13"> </span>having<span class="_ _6"> </span><span class="ffd">OF<span class="_ _13"> </span></span>set<span class="_ _13"> </span>to<span class="_ _13"> </span>0),<span class="_ _13"> </span>we<span class="_ _6"> </span>will<span class="_ _13"> </span>have<span class="_ _13"> </span><span class="ff11 ls159">a&lt;<span class="_ _3"></span>b<span class="ff7 ls0">when<span class="_ _6"> </span><span class="ff11">a<span class="_ _10"> </span><span class="ffd">-</span></span></span></span></div><div class="t m5 x149 h69 y249a ff7 fs39 fc2 sc0 ls0 ws0">t</div><div class="t m5 x149 h50 y21d3 ff11 fs25 fc2 sc0 ls0 ws0">w</div><div class="t m5 x229 h45 y249b ff11 fs19 fc2 sc0 ls15a ws0">b&lt;</div><div class="t m5 x1d h46 y249c ff7 fs19 fc2 sc0 lsaa ws0">0,<span class="_"> </span>indicated<span class="_"> </span>by<span class="_"> </span>having<span class="_"> </span><span class="ffd ls0">SF<span class="_ _10"> </span><span class="ff7">set<span class="_"> </span>to<span class="_ _13"> </span>1,<span class="_"> </span>and<span class="_"> </span><span class="ff11">a<span class="_ _11"> </span><span class="ff12">≥<span class="_ _10"> </span></span>b<span class="_ _10"> </span></span>when<span class="_"> </span><span class="ff11">a<span class="_ _10"> </span></span></span>-</span></div><div class="t m5 x53 h69 y249d ff7 fs39 fc2 sc0 ls0 ws0">t</div><div class="t m5 x53 h50 y249e ff11 fs25 fc2 sc0 ls0 ws0">w</div><div class="t m5 x11a h46 yecd ff11 fs19 fc2 sc0 ls0 ws0">b<span class="_ _10"> </span><span class="ff12">≥<span class="_ _13"></span><span class="ff7 lsaa">0,<span class="_"> </span>indicated<span class="_"> </span>by<span class="_"> </span>having</span></span></div><div class="t m5 x1d h26 y1002 ffd fs19 fc2 sc0 ls0 ws0">SF<span class="_ _16"> </span><span class="ff7">set<span class="_ _16"> </span>to<span class="_ _16"> </span>0.<span class="_ _16"> </span>On<span class="_ _16"> </span>the<span class="_ _16"> </span>other<span class="_ _16"> </span>hand,<span class="_ _14"> </span>when<span class="_ _16"> </span>overﬂow<span class="_ _16"> </span>occurs<span class="_ _1"></span>,<span class="_ _14"> </span>we<span class="_ _16"> </span>will<span class="_ _16"> </span>have<span class="_ _16"> </span><span class="ff11 ls15b">a&lt;<span class="_ _0"></span>b<span class="_ _2"></span><span class="ff7 ls0">when</span></span></span></div><div class="t m5 x1d h3a y1003 ff11 fs19 fc2 sc0 ls0 ws0">a<span class="_ _10"> </span><span class="ffd">-</span></div><div class="t m5 x1cb h69 y249f ff7 fs39 fc2 sc0 ls0 ws0">t</div><div class="t m5 x1cb h50 y24a0 ff11 fs25 fc2 sc0 ls0 ws0">w</div><div class="t m5 xce h26 y24a1 ff11 fs19 fc2 sc0 ls15c ws0">b&gt;<span class="ff7 ls0">0<span class="_ _13"> </span>(negative<span class="_"> </span>overﬂow)<span class="_ _13"> </span>and<span class="_"> </span></span><span class="ls15d">a&gt;<span class="_ _1"></span>b<span class="ff7 ls0">when<span class="_ _13"> </span><span class="ff11">a<span class="_ _11"> </span><span class="ffd">-</span></span></span></span></div><div class="t m5 x80 h69 y249f ff7 fs39 fc2 sc0 ls0 ws0">t</div><div class="t m5 x80 h50 y24a0 ff11 fs25 fc2 sc0 ls0 ws0">w</div><div class="t m5 x12f h26 y24a1 ff11 fs19 fc2 sc0 ls15c ws0">b&lt;<span class="ff7 ls0">0<span class="_ _13"> </span>(positive<span class="_"> </span>overﬂow).<span class="_ _13"> </span>W<span class="_ _1"></span>e</span></div><div class="t m5 x1d h46 y24a2 ff7 fs19 fc2 sc0 ls0 ws0">cannot<span class="_"> </span>have<span class="_"> </span>overﬂow<span class="_ _11"> </span>when<span class="_"> </span><span class="ff11">a<span class="_ _11"> </span><span class="ff12">=<span class="_ _10"> </span></span>b</span>.<span class="_"> </span>Thus<span class="_ _3"></span>,<span class="_"> </span>when<span class="_ _11"> </span><span class="ffd">OF<span class="_ _10"> </span></span>is<span class="_ _11"> </span>set<span class="_"> </span>to<span class="_"> </span>1,<span class="_ _11"> </span>we<span class="_"> </span>will<span class="_ _11"> </span>have<span class="_"> </span><span class="ff11 ls15e">a&lt;<span class="_ _0"></span>b<span class="ff7 ls0">if</span></span></div><div class="t m5 x1d h26 y24a3 ff7 fs19 fc2 sc0 ls0 ws0">and<span class="_"> </span>only<span class="_ _13"> </span>if<span class="_"> </span><span class="ffd">SF<span class="_ _13"> </span></span>is<span class="_"> </span>set<span class="_ _13"> </span>to<span class="_"> </span>0.<span class="_ _13"> </span>Combining<span class="_"> </span>these<span class="_ _13"> </span>cases<span class="_ _1"></span>,<span class="_"> </span>the<span class="_ _13"> </span><span class="ff9">exclusive-or<span class="_ _13"> </span></span>of<span class="_"> </span>the<span class="_ _13"> </span>overﬂow</div><div class="t m5 x1d h26 y24a4 ff7 fs19 fc2 sc0 ls0 ws0">and<span class="_"> </span>sign<span class="_ _13"> </span>bits<span class="_"> </span>provides<span class="_ _13"> </span>a<span class="_"> </span>test<span class="_ _13"> </span>for<span class="_"> </span>whether<span class="_"> </span><span class="ff11 ls15f">a&lt;<span class="_ _3"></span>b<span class="_ _80"></span><span class="ff7 ls0">.<span class="_"> </span>T<span class="_ _1"></span>he<span class="_"> </span>other<span class="_ _13"> </span>signed<span class="_"> </span>comparison<span class="_ _13"> </span>tests</span></span></div><div class="t m5 x1d h26 y24a5 ff7 fs19 fc2 sc0 ls0 ws0">are<span class="_"> </span>based<span class="_"> </span>on<span class="_"> </span>other<span class="_"> </span>combinations<span class="_"> </span>of<span class="_"> </span><span class="ffd">SF<span class="_ _13"> </span>^<span class="_ _10"> </span>OF<span class="_ _10"> </span></span>and<span class="_"> </span><span class="ffd">ZF</span>.</div><div class="t m5 x29 h26 y24a6 ff7 fs19 fc2 sc0 ls0 ws0">F<span class="_ _1"></span>or<span class="_ _11"> </span>the<span class="_ _16"> </span>testing<span class="_ _11"> </span>of<span class="_ _11"> </span>unsigned<span class="_ _16"> </span>comparisons<span class="_ _1"></span>,<span class="_ _11"> </span>we<span class="_ _16"> </span>now<span class="_ _11"> </span>let<span class="_ _11"> </span><span class="ff11">a<span class="_"> </span></span>and<span class="_ _16"> </span><span class="ff11">b<span class="_ _16"> </span></span>be<span class="_ _11"> </span>the<span class="_ _11"> </span>integers</div><div class="t m5 x1d h26 y24a7 ff7 fs19 fc2 sc0 ls0 ws0">represented<span class="_ _13"> </span>in<span class="_ _6"> </span>unsigned<span class="_ _13"> </span>form<span class="_ _13"> </span>by<span class="_ _6"> </span>variables<span class="_ _13"> </span><span class="ffd">a<span class="_ _13"> </span></span>and<span class="_ _6"> </span><span class="ffd">b</span>.<span class="_ _13"> </span>In<span class="_ _13"> </span>performing<span class="_ _6"> </span>the<span class="_ _13"> </span>computation</div><div class="t m5 x1d h46 y24a8 ffd fs19 fc2 sc0 ls0 ws0">t<span class="_ _11"> </span>=<span class="_ _16"> </span>a-b<span class="ff7">,<span class="_ _13"> </span>the<span class="_"> </span>carry<span class="_ _13"> </span>ﬂag<span class="_ _13"> </span>will<span class="_ _13"> </span>be<span class="_ _13"> </span>set<span class="_ _13"> </span>by<span class="_ _13"> </span>the<span class="_ _13"> </span><span class="ff9">cmp<span class="_ _13"> </span></span>instruction<span class="_"> </span>when<span class="_ _13"> </span><span class="ff11">a<span class="_ _10"> </span><span class="ff12">−<span class="_ _13"></span></span><span class="ls160">b&lt;</span></span><span class="lsa0">0,<span class="_ _13"> </span>and<span class="_ _13"> </span>so<span class="_ _13"> </span>the</span></span></div><div class="t m5 x1d h26 y24a9 ff7 fs19 fc2 sc0 ls0 ws0">unsigned<span class="_"> </span>comparisons<span class="_"> </span>use<span class="_"> </span>combinations<span class="_"> </span>of<span class="_"> </span>the<span class="_"> </span>carry<span class="_"> </span>and<span class="_"> </span>zero<span class="_"> </span>ﬂags<span class="_ _1"></span>.</div><div class="t m5 x29 h26 y24aa ff7 fs19 fc2 sc0 ls0 ws0">It<span class="_ _14"> </span>is<span class="_ _16"> </span>important<span class="_ _14"> </span>to<span class="_ _14"> </span>note<span class="_ _14"> </span>how<span class="_ _14"> </span>machine<span class="_ _14"> </span>code<span class="_ _14"> </span>does<span class="_ _16"> </span>or<span class="_ _14"> </span>does<span class="_ _14"> </span>not<span class="_ _14"> </span>distinguish<span class="_ _14"> </span>be-</div><div class="t m5 x1d h26 y24ab ff7 fs19 fc2 sc0 ls0 ws0">tween<span class="_ _11"> </span>signed<span class="_ _11"> </span>and<span class="_ _11"> </span>unsigned<span class="_ _16"> </span>values<span class="_ _3"></span>.<span class="_ _16"> </span>Unlike<span class="_ _11"> </span>in<span class="_ _11"> </span>C,<span class="_"> </span>it<span class="_ _16"> </span>does<span class="_ _11"> </span>not<span class="_ _11"> </span>associate<span class="_ _11"> </span>a<span class="_ _11"> </span>data<span class="_ _16"> </span>type</div><div class="t m5 x1d h26 y24ac ff7 fs19 fc2 sc0 ls0 ws0">with<span class="_ _13"> </span>each<span class="_"> </span>program<span class="_ _13"> </span>value.<span class="_ _13"> </span>Instead,<span class="_"> </span>it<span class="_ _13"> </span>mostly<span class="_ _13"> </span>uses<span class="_"> </span>the<span class="_ _13"> </span>same<span class="_"> </span>instructions<span class="_ _13"> </span>for<span class="_"> </span>the<span class="_ _13"> </span>two</div><div class="t m5 x1d h26 y24ad ff7 fs19 fc2 sc0 ls0 ws0">cases<span class="_ _1"></span>,<span class="_ _16"> </span>because<span class="_ _16"> </span>many<span class="_ _16"> </span>arithmetic<span class="_ _16"> </span>operations<span class="_ _16"> </span>have<span class="_ _16"> </span>the<span class="_ _16"> </span>same<span class="_ _16"> </span>bit-level<span class="_ _16"> </span>behavior<span class="_ _16"> </span>for</div><div class="t m5 x1d h26 y24ae ff7 fs19 fc2 sc0 ls0 ws0">unsigned<span class="_ _6"> </span>and<span class="_ _13"> </span>two’<span class="_ _0"></span>s-complement<span class="_ _6"> </span>arithmetic.<span class="_ _6"> </span>Some<span class="_ _13"> </span>circumstances<span class="_ _6"> </span>require<span class="_ _13"> </span>different</div><div class="t m5 x1d h26 y24af ff7 fs19 fc2 sc0 ls0 ws0">instructions<span class="_ _e"> </span>to<span class="_ _1f"> </span>handle<span class="_ _1f"> </span>signed<span class="_ _e"> </span>and<span class="_ _1f"> </span>unsigned<span class="_ _e"> </span>operations<span class="_ _1"></span>,<span class="_ _23"> </span>such<span class="_ _e"> </span>as<span class="_ _1f"> </span>using<span class="_ _e"> </span>differ<span class="_ _0"></span>-</div><div class="t m5 x1d h26 y24b0 ff7 fs19 fc2 sc0 ls0 ws0">ent<span class="_"> </span>versions<span class="_ _11"> </span>of<span class="_ _11"> </span>right<span class="_ _11"> </span>shifts<span class="_ _1"></span>,<span class="_ _11"> </span>division<span class="_ _11"> </span>and<span class="_ _11"> </span>multiplication<span class="_ _11"> </span>instructions<span class="_ _1"></span>,<span class="_ _11"> </span>and<span class="_ _11"> </span>different</div><div class="t m5 x1d h26 y24b1 ff7 fs19 fc2 sc0 ls0 ws0">combinations<span class="_"> </span>of<span class="_"> </span>condition<span class="_"> </span>codes<span class="_ _1"></span>.</div><div class="t m5 x1d h47 y24b2 ffe fs2b fc1 sc0 ls0 ws0">Practice<span class="_"> </span>Problem<span class="_"> </span>3.13<span class="_ _1f"> </span><span class="fs16">(solution<span class="_"> </span>page<span class="_"> </span>366)</span></div><div class="t m5 x1d h26 y24b3 ff7 fs19 fc1 sc0 ls0 ws0">T<span class="_ _1"></span>he<span class="_"> </span>C<span class="_"> </span>code</div><div class="t m5 x1d h2d y24b4 ffd fs1e fc2 sc0 ls0 ws0">int<span class="_ _e"> </span>comp(data_t<span class="_ _1f"> </span>a,<span class="_ _1f"> </span>data_t<span class="_ _e"> </span>b)<span class="_ _1f"> </span>{</div><div class="t m5 x10c h2d y24b5 ffd fs1e fc2 sc0 ls0 ws0">return<span class="_ _e"> </span>a<span class="_ _1f"> </span>COMP<span class="_ _1f"> </span>b;</div><div class="t m5 x1d h2d y24b6 ffd fs1e fc2 sc0 ls0 ws0">}</div><div class="t m5 x1d h26 y24b7 ff7 fs19 fc2 sc0 ls0 ws0">shows<span class="_"> </span>a<span class="_"> </span>general<span class="_"> </span>comparison<span class="_"> </span>between<span class="_ _13"> </span>arguments<span class="_"> </span><span class="ffd">a<span class="_ _10"> </span></span>and<span class="_"> </span><span class="ffd">b</span>,<span class="_"> </span>where<span class="_"> </span><span class="ffd">data_t</span>,<span class="_"> </span>the<span class="_"> </span>data</div><div class="t m5 x1d h26 y24b8 ff7 fs19 fc2 sc0 ls0 ws0">type<span class="_ _13"> </span>of<span class="_"> </span>the<span class="_ _13"> </span>arguments<span class="_ _3"></span>,<span class="_"> </span>is<span class="_ _13"> </span>deﬁned<span class="_ _13"> </span>(via<span class="_"> </span><span class="ffd">typedef</span>)<span class="_ _13"> </span>to<span class="_ _13"> </span>be<span class="_ _13"> </span>one<span class="_"> </span>of<span class="_ _13"> </span>the<span class="_ _13"> </span>integer<span class="_ _13"> </span>data<span class="_"> </span>types</div><div class="t m5 x1d h26 y24b9 ff7 fs19 fc2 sc0 ls0 ws0">listed<span class="_ _13"> </span>in<span class="_"> </span>F<span class="_ _1"></span>igure<span class="_ _13"> </span>3.1<span class="_"> </span>and<span class="_ _13"> </span>either<span class="_ _13"> </span>signed<span class="_"> </span>or<span class="_ _13"> </span>unsigned.<span class="_ _13"> </span>The<span class="_ _13"> </span>comparison<span class="_ _13"> </span><span class="ffd">COMP<span class="_ _10"> </span></span>is<span class="_ _13"> </span>deﬁned</div><div class="t m5 x1d h26 y24ba ff7 fs19 fc2 sc0 ls0 ws0">via<span class="_"> </span><span class="ffd">#define</span>.</div><div class="t m5 x29 h26 y24bb ff7 fs19 fc2 sc0 ls0 ws0">Suppose<span class="_"> </span><span class="ffd">a<span class="_ _11"> </span></span>is<span class="_"> </span>in<span class="_ _11"> </span>some<span class="_"> </span>portion<span class="_ _11"> </span>of<span class="_"> </span><span class="ffd">%rdx<span class="_ _11"> </span></span>while<span class="_"> </span><span class="ffd">b<span class="_ _11"> </span></span>is<span class="_"> </span>in<span class="_ _11"> </span>some<span class="_"> </span>portion<span class="_"> </span>of<span class="_ _11"> </span><span class="ffd">%rsi</span><span class="ls161">.F<span class="_ _49"></span>o<span class="_ _49"></span>r</span></div><div class="t m5 x1b0 h26 y24bc ff7 fs19 fc2 sc0 ls0 ws0">each<span class="_ _11"> </span>of<span class="_ _11"> </span>the<span class="_ _16"> </span>following<span class="_ _11"> </span>instruction<span class="_ _11"> </span>sequences<span class="_ _1"></span>,<span class="_ _16"> </span>determine<span class="_ _11"> </span>which<span class="_ _16"> </span>data<span class="_ _11"> </span>types<span class="_ _11"> </span><span class="ffd">data_t</span></div><div class="t m5 x1b0 h26 y24bd ff7 fs19 fc2 sc0 ls0 ws0">and<span class="_ _21"> </span>which<span class="_ _f"> </span>comparisons<span class="_ _f"> </span><span class="ffd">COMP<span class="_ _21"> </span></span>could<span class="_ _f"> </span>cause<span class="_ _f"> </span>the<span class="_ _21"> </span>compiler<span class="_ _f"> </span>to<span class="_ _f"> </span>generate<span class="_ _21"> </span>this<span class="_ _f"> </span>code.</div><div class="t m5 x1d h26 y24be ff7 fs19 fc2 sc0 ls0 ws0">(T<span class="_ _1"></span>here<span class="_"> </span>can<span class="_"> </span>be<span class="_"> </span>multiple<span class="_"> </span>correct<span class="_"> </span>answers;<span class="_"> </span>you<span class="_"> </span>should<span class="_"> </span>list<span class="_"> </span>them<span class="_"> </span>all.)</div><div class="t m5 x124 h26 y24bf ff7 fs19 fc2 sc0 ls0 ws0">A.</div><div class="t m5 x10d h2d y24c0 ffd fs1e fc2 sc0 ls0 ws0">cmpl<span class="_ _46"> </span>%esi,<span class="_ _e"> </span>%edi</div><div class="t m5 x10d h2d y24c1 ffd fs1e fc2 sc0 ls0 ws0">setl<span class="_ _46"> </span>%al</div><div class="t m5 x124 h26 y8d6 ff7 fs19 fc2 sc0 ls2a ws0">B.<span class="_ _19"> </span><span class="ffd fs1e ls0">cmpw<span class="_ _46"> </span>%si,<span class="_ _1f"> </span>%di</span></div><div class="t m5 x10d h2d y140a ffd fs1e fc2 sc0 ls0 ws0">setge<span class="_ _3f"> </span>%al</div></div><div class="pi" data-data='{"ctm":[2.000000,0.000000,0.000000,2.000000,0.000000,0.000000]}'></div></div>
