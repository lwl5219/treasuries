<div id="pf1c5" class="pf w2 h11" data-page-no="1c5"><div class="pc pc1c5 w2 h11"><img class="bi x0 y0 w1 h1" alt="" src="csapp/bg1c5.png"/><div class="t m5 x14 h28 y9b ffe fs1e fc2 sc0 ls0 ws0">452<span class="_ _1b"> </span><span class="ff6 fs1f">Chapter<span class="_ _10"> </span>4<span class="_ _3d"> </span>Processor<span class="_ _10"> </span>Architecture</span></div><div class="t m5 x1d h26 ye7 ff7 fs19 fc2 sc0 ls0 ws0">propagates<span class="_ _6"> </span>through<span class="_ _13"> </span>stage<span class="_ _6"> </span>B<span class="_ _1"></span>,<span class="_ _13"> </span>and<span class="_ _6"> </span><span class="ffd">I3<span class="_ _13"> </span></span>(shown<span class="_ _6"> </span>in<span class="_ _13"> </span>light<span class="_ _6"> </span>gray)<span class="_ _13"> </span>propagates<span class="_ _6"> </span>through<span class="_ _13"> </span>stage</div><div class="t m5 x1d h26 y2a7 ff7 fs19 fc2 sc0 ls0 ws0">A.<span class="_ _6"> </span>J<span class="_ _0"></span>ust<span class="_ _6"> </span>before<span class="_ _13"> </span>the<span class="_ _6"> </span>rising<span class="_ _6"> </span>clock<span class="_ _13"> </span>at<span class="_ _6"> </span>time<span class="_ _13"> </span>240<span class="_ _a"> </span>(point<span class="_ _13"> </span>1),<span class="_ _13"> </span>the<span class="_ _a"> </span>values<span class="_ _13"> </span>computed<span class="_ _6"> </span>in<span class="_ _13"> </span>stage<span class="_ _a"> </span>A</div><div class="t m5 x1d h26 y2a8 ff7 fs19 fc2 sc0 ls0 ws0">for<span class="_"> </span>instruction<span class="_ _13"> </span><span class="ffd">I2<span class="_ _10"> </span></span>have<span class="_ _13"> </span>reached<span class="_"> </span>the<span class="_ _13"> </span>input<span class="_"> </span>of<span class="_ _13"> </span>the<span class="_"> </span>ﬁrst<span class="_ _13"> </span>pipeline<span class="_"> </span>register,<span class="_ _13"> </span>but<span class="_"> </span>its<span class="_ _13"> </span>state</div><div class="t m5 x1d h26 y2f7 ff7 fs19 fc2 sc0 ls0 ws0">and<span class="_ _11"> </span>output<span class="_ _11"> </span>remain<span class="_ _11"> </span>set<span class="_ _11"> </span>to<span class="_ _11"> </span>those<span class="_ _11"> </span>computed<span class="_ _16"> </span>during<span class="_"> </span>stage<span class="_ _11"> </span>A<span class="_ _11"> </span>for<span class="_ _16"> </span>instruction<span class="_"> </span><span class="ffd">I1</span><span class="ls1c2">.T<span class="_ _49"></span>h<span class="_ _49"></span>e</span></div><div class="t m5 x1d h26 y2f8 ff7 fs19 fc2 sc0 ls0 ws0">values<span class="_"> </span>computed<span class="_ _11"> </span>in<span class="_ _11"> </span>stage<span class="_ _11"> </span>B<span class="_ _11"> </span>for<span class="_ _11"> </span>instruction<span class="_ _11"> </span><span class="ffd">I1<span class="_ _11"> </span></span>have<span class="_ _11"> </span>reached<span class="_ _11"> </span>the<span class="_ _11"> </span>input<span class="_ _11"> </span>of<span class="_ _11"> </span>the<span class="_ _11"> </span>sec-</div><div class="t m5 x1d h26 y2f9 ff7 fs19 fc2 sc0 ls0 ws0">ond<span class="_"> </span>pipeline<span class="_"> </span>register<span class="_ _0"></span>.<span class="_"> </span>As<span class="_"> </span>the<span class="_"> </span>clock<span class="_"> </span>rises<span class="_ _3"></span>,<span class="_"> </span>these<span class="_"> </span>inputs<span class="_"> </span>are<span class="_"> </span>loaded<span class="_"> </span>into<span class="_"> </span>the<span class="_"> </span>pipeline</div><div class="t m5 x1d h26 y2fa ff7 fs19 fc2 sc0 ls0 ws0">registers<span class="_ _1"></span>,<span class="_ _11"> </span>becoming<span class="_ _11"> </span>the<span class="_ _11"> </span>register<span class="_ _11"> </span>outputs<span class="_ _16"> </span>(point<span class="_"> </span>2).<span class="_ _11"> </span>In<span class="_ _16"> </span>addition,<span class="_ _11"> </span>the<span class="_ _11"> </span>input<span class="_ _11"> </span>to<span class="_ _11"> </span>stage</div><div class="t m5 x1d h26 y2fb ff7 fs19 fc2 sc0 ls0 ws0">A<span class="_"> </span>is<span class="_ _11"> </span>set<span class="_"> </span>to<span class="_ _11"> </span>initiate<span class="_ _11"> </span>the<span class="_"> </span>computation<span class="_ _11"> </span>of<span class="_ _11"> </span>instruction<span class="_"> </span><span class="ffd">I3</span>.<span class="_ _11"> </span>T<span class="_ _0"></span>he<span class="_"> </span>signals<span class="_ _11"> </span>then<span class="_ _11"> </span>propagate</div><div class="t m5 x1d h26 y2fc ff7 fs19 fc2 sc0 ls0 ws0">through<span class="_"> </span>the<span class="_ _11"> </span>combinational<span class="_ _11"> </span>logic<span class="_ _11"> </span>for<span class="_ _11"> </span>the<span class="_ _11"> </span>different<span class="_"> </span>stages<span class="_ _11"> </span>(point<span class="_ _11"> </span>3).<span class="_ _11"> </span>As<span class="_ _11"> </span>the<span class="_ _11"> </span>curved</div><div class="t m5 x1d h26 y2fd ff7 fs19 fc2 sc0 ls0 ws0">wave<span class="_ _13"> </span>fronts<span class="_ _6"> </span>in<span class="_ _13"> </span>the<span class="_ _6"> </span>diagram<span class="_ _13"> </span>at<span class="_ _6"> </span>point<span class="_ _13"> </span>3<span class="_ _6"> </span>suggest,<span class="_ _13"> </span>signals<span class="_ _13"> </span>can<span class="_ _6"> </span>propagate<span class="_ _13"> </span>through<span class="_ _6"> </span>differ<span class="_ _1"></span>-</div><div class="t m5 x1d h26 y2fe ff7 fs19 fc2 sc0 ls0 ws0">ent<span class="_"> </span>sections<span class="_"> </span>at<span class="_"> </span>different<span class="_ _11"> </span>rates<span class="_ _1"></span>.<span class="_"> </span>Before<span class="_"> </span>time<span class="_ _11"> </span>360,<span class="_"> </span>the<span class="_"> </span>result<span class="_ _11"> </span>values<span class="_"> </span>reach<span class="_"> </span>the<span class="_ _11"> </span>inputs</div><div class="t m5 x1d h26 y2ff ff7 fs19 fc2 sc0 ls0 ws0">of<span class="_ _11"> </span>the<span class="_ _16"> </span>pipeline<span class="_ _16"> </span>registers<span class="_ _11"> </span>(point<span class="_ _16"> </span>4).<span class="_ _16"> </span>When<span class="_ _11"> </span>the<span class="_ _11"> </span>clock<span class="_ _16"> </span>rises<span class="_ _16"> </span>at<span class="_ _11"> </span>time<span class="_ _16"> </span>360,<span class="_ _16"> </span>each<span class="_ _16"> </span>of<span class="_ _11"> </span>the</div><div class="t m5 x1d h26 y300 ff7 fs19 fc2 sc0 ls0 ws0">instructions<span class="_"> </span>will<span class="_"> </span>have<span class="_"> </span>progressed<span class="_"> </span>through<span class="_"> </span>one<span class="_"> </span>pipeline<span class="_"> </span>stage<span class="_ _1"></span>.</div><div class="t m5 x29 h26 y21a ff7 fs19 fc2 sc0 ls0 ws0">W<span class="_ _3"></span>e<span class="_ _16"> </span>can<span class="_ _11"> </span>see<span class="_ _11"> </span>from<span class="_ _16"> </span>this<span class="_ _11"> </span>detailed<span class="_ _16"> </span>view<span class="_ _11"> </span>of<span class="_ _16"> </span>pipeline<span class="_ _11"> </span>operation<span class="_ _11"> </span>that<span class="_ _16"> </span>slowing<span class="_ _11"> </span>down</div><div class="t m5 x1d h26 y450 ff7 fs19 fc2 sc0 ls0 ws0">the<span class="_ _16"> </span>clock<span class="_ _16"> </span>would<span class="_ _16"> </span>not<span class="_ _16"> </span>change<span class="_ _16"> </span>the<span class="_ _16"> </span>pipeline<span class="_ _16"> </span>behavior.<span class="_ _11"> </span>T<span class="_ _0"></span>he<span class="_ _16"> </span>signals<span class="_ _16"> </span>propagate<span class="_ _16"> </span>to<span class="_ _16"> </span>the</div><div class="t m5 x1d h26 y451 ff7 fs19 fc2 sc0 ls0 ws0">pipeline<span class="_ _16"> </span>register<span class="_ _16"> </span>inputs<span class="_ _1"></span>,<span class="_ _15"> </span>but<span class="_ _16"> </span>no<span class="_ _16"> </span>change<span class="_ _14"> </span>in<span class="_ _16"> </span>the<span class="_ _16"> </span>register<span class="_ _14"> </span>states<span class="_ _16"> </span>will<span class="_ _16"> </span>occur<span class="_ _14"> </span>until<span class="_ _16"> </span>the</div><div class="t m5 x1d h26 y452 ff7 fs19 fc2 sc0 ls0 ws0">clock<span class="_ _f"> </span>rises<span class="_ _1"></span>.<span class="_ _e"> </span>On<span class="_ _21"> </span>the<span class="_ _e"> </span>other<span class="_ _21"> </span>hand,<span class="_ _1f"> </span>we<span class="_ _f"> </span>could<span class="_ _f"> </span>have<span class="_ _e"> </span>disastrous<span class="_ _21"> </span>effects<span class="_ _e"> </span>if<span class="_ _21"> </span>the<span class="_ _e"> </span>clock</div><div class="t m5 x1d h26 y453 ff7 fs19 fc2 sc0 ls0 ws0">were<span class="_ _21"> </span>run<span class="_ _21"> </span>too<span class="_ _21"> </span>fast.<span class="_ _f"> </span>T<span class="_ _0"></span>he<span class="_ _21"> </span>values<span class="_ _21"> </span>would<span class="_ _21"> </span>not<span class="_ _f"> </span>have<span class="_ _21"> </span>time<span class="_ _21"> </span>to<span class="_ _f"> </span>propagate<span class="_ _21"> </span>through<span class="_ _21"> </span>the</div><div class="t m5 x1d h26 y454 ff7 fs19 fc2 sc0 ls0 ws0">combinational<span class="_ _16"> </span>logic,<span class="_ _16"> </span>and<span class="_ _11"> </span>so<span class="_ _16"> </span>the<span class="_ _16"> </span>register<span class="_ _16"> </span>inputs<span class="_ _16"> </span>would<span class="_ _16"> </span>not<span class="_ _16"> </span>yet<span class="_ _16"> </span>be<span class="_ _16"> </span>valid<span class="_ _16"> </span>when<span class="_ _11"> </span>the</div><div class="t m5 x1d h26 y455 ff7 fs19 fc2 sc0 ls0 ws0">clock<span class="_"> </span>rises<span class="_ _1"></span>.</div><div class="t m5 x29 h26 y456 ff7 fs19 fc2 sc0 ls0 ws0">As<span class="_ _16"> </span>with<span class="_ _16"> </span>our<span class="_ _16"> </span>discussion<span class="_ _16"> </span>of<span class="_ _11"> </span>the<span class="_ _16"> </span>timing<span class="_ _16"> </span>for<span class="_ _16"> </span>the<span class="_ _16"> </span>SEQ<span class="_ _16"> </span>processor<span class="_ _16"> </span>(Section<span class="_ _16"> </span>4.3.3),</div><div class="t m5 x1d h26 y457 ff7 fs19 fc2 sc0 ls0 ws0">we<span class="_"> </span>see<span class="_ _11"> </span>that<span class="_ _11"> </span>the<span class="_ _11"> </span>simple<span class="_"> </span>mechanism<span class="_ _11"> </span>of<span class="_ _11"> </span>having<span class="_ _11"> </span>clocked<span class="_"> </span>registers<span class="_ _11"> </span>between<span class="_ _11"> </span>blocks<span class="_ _11"> </span>of</div><div class="t m5 x1d h26 y458 ff7 fs19 fc2 sc0 ls0 ws0">combinational<span class="_"> </span>logic<span class="_"> </span>sufﬁces<span class="_"> </span>to<span class="_"> </span>control<span class="_"> </span>the<span class="_"> </span>ﬂow<span class="_"> </span>of<span class="_"> </span>instructions<span class="_"> </span>in<span class="_"> </span>the<span class="_"> </span>pipeline<span class="_ _0"></span>.<span class="_"> </span>As</div><div class="t m5 x1d h26 y459 ff7 fs19 fc2 sc0 ls0 ws0">the<span class="_ _15"> </span>clock<span class="_ _15"> </span>rises<span class="_ _15"> </span>and<span class="_ _14"> </span>falls<span class="_ _15"> </span>repeatedly<span class="_ _3"></span>,<span class="_ _21"> </span>the<span class="_ _15"> </span>different<span class="_ _15"> </span>instructions<span class="_ _15"> </span>ﬂow<span class="_ _15"> </span>through<span class="_ _15"> </span>the</div><div class="t m5 x1d h26 y45a ff7 fs19 fc2 sc0 ls0 ws0">stages<span class="_"> </span>of<span class="_"> </span>the<span class="_"> </span>pipeline<span class="_"> </span>without<span class="_"> </span>interfering<span class="_"> </span>with<span class="_"> </span>one<span class="_"> </span>another.</div><div class="t m5 x1d h41 y3eaf ffe fs29 fc2 sc0 ls0 ws0">4.4.3<span class="_ _48"> </span><span class="fs19">Limitations<span class="_"> </span>of<span class="_"> </span>Pipelining</span></div><div class="t m5 x1d h26 y3eb0 ff7 fs19 fc2 sc0 ls0 ws0">T<span class="_ _1"></span>he<span class="_"> </span>example<span class="_"> </span>of<span class="_"> </span>F<span class="_ _1"></span>igure<span class="_"> </span>4.33<span class="_"> </span>shows<span class="_"> </span>an<span class="_"> </span>ideal<span class="_"> </span>pipelined<span class="_"> </span>system<span class="_ _13"> </span>in<span class="_"> </span>which<span class="_"> </span>we<span class="_"> </span>are<span class="_"> </span>able</div><div class="t m5 x1d h26 y3eb1 ff7 fs19 fc2 sc0 ls0 ws0">to<span class="_ _13"> </span>divide<span class="_ _13"> </span>the<span class="_ _13"> </span>computation<span class="_ _13"> </span>into<span class="_ _13"> </span>three<span class="_ _13"> </span>independent<span class="_ _13"> </span>stages<span class="_ _1"></span>,<span class="_"> </span>each<span class="_ _13"> </span>requiring<span class="_ _13"> </span>one-third</div><div class="t m5 x1d h26 y3eb2 ff7 fs19 fc2 sc0 ls0 ws0">of<span class="_"> </span>the<span class="_ _13"> </span>time<span class="_"> </span>required<span class="_"> </span>by<span class="_ _13"> </span>the<span class="_"> </span>original<span class="_ _13"> </span>logic.<span class="_"> </span>Unfortunately<span class="_ _7"></span>,<span class="_"> </span>other<span class="_"> </span>factors<span class="_ _13"> </span>often<span class="_"> </span>arise</div><div class="t m5 x1d h26 y3eb3 ff7 fs19 fc2 sc0 ls0 ws0">that<span class="_"> </span>diminish<span class="_"> </span>the<span class="_"> </span>effectiveness<span class="_"> </span>of<span class="_"> </span>pipelining.</div><div class="t m5 x1d h42 y3eb4 ff6 fs29 fc6 sc0 ls0 ws0">Nonuniform<span class="_ _11"> </span>Partitioning</div><div class="t m5 x1d h26 y8fa ff7 fs19 fc1 sc0 ls0 ws0">F<span class="_ _1"></span>igure<span class="_ _11"> </span>4.36<span class="_"> </span>shows<span class="_ _11"> </span>a<span class="_"> </span>system<span class="_ _11"> </span>in<span class="_"> </span>which<span class="_ _11"> </span>we<span class="_"> </span>divide<span class="_ _11"> </span>the<span class="_"> </span>computation<span class="_ _11"> </span>into<span class="_"> </span>three<span class="_ _11"> </span>stages</div><div class="t m5 x1d h26 y8fb ff7 fs19 fc1 sc0 ls0 ws0">as<span class="_ _11"> </span>before<span class="_ _0"></span>,<span class="_ _11"> </span>but<span class="_ _11"> </span>the<span class="_ _11"> </span>delays<span class="_ _11"> </span>through<span class="_ _16"> </span>the<span class="_"> </span>stages<span class="_ _11"> </span>range<span class="_ _16"> </span>from<span class="_"> </span>50<span class="_ _16"> </span>to<span class="_"> </span>150<span class="_ _13"> </span>ps<span class="_ _1"></span>.<span class="_ _16"> </span>T<span class="_ _1"></span>he<span class="_ _11"> </span>sum<span class="_ _11"> </span>of</div><div class="t m5 x1d h26 y8fc ff7 fs19 fc1 sc0 ls0 ws0">the<span class="_ _13"> </span>delays<span class="_"> </span>through<span class="_ _13"> </span>all<span class="_ _13"> </span>of<span class="_"> </span>the<span class="_ _13"> </span>stages<span class="_"> </span>remains<span class="_ _13"> </span>300<span class="_ _13"> </span>ps<span class="_ _1"></span>.<span class="_ _13"> </span>However,<span class="_ _13"> </span>the<span class="_"> </span>rate<span class="_ _13"> </span>at<span class="_"> </span>which<span class="_ _13"> </span>we</div><div class="t m5 x1d h26 y8fd ff7 fs19 fc1 sc0 ls0 ws0">can<span class="_"> </span>operate<span class="_"> </span>the<span class="_"> </span>clock<span class="_"> </span>is<span class="_"> </span>limited<span class="_"> </span>by<span class="_"> </span>the<span class="_"> </span>delay<span class="_ _11"> </span>of<span class="_"> </span>the<span class="_"> </span>slowest<span class="_"> </span>stage<span class="_ _0"></span>.<span class="_"> </span>As<span class="_"> </span>the<span class="_"> </span>pipeline</div><div class="t m5 x1d h26 y8fe ff7 fs19 fc1 sc0 ls0 ws0">diagram<span class="_ _21"> </span>in<span class="_ _21"> </span>this<span class="_ _21"> </span>ﬁgure<span class="_ _21"> </span>shows<span class="_ _1"></span>,<span class="_ _f"> </span>stage<span class="_ _21"> </span>A<span class="_ _21"> </span>will<span class="_ _21"> </span>be<span class="_ _21"> </span>idle<span class="_ _21"> </span>(shown<span class="_ _21"> </span>as<span class="_ _21"> </span>a<span class="_ _21"> </span>white<span class="_ _21"> </span>box)<span class="_ _21"> </span>for</div><div class="t m5 x1d h26 y8ff ff7 fs19 fc1 sc0 ls0 ws0">100<span class="_ _13"> </span>ps<span class="_ _13"> </span>every<span class="_ _13"> </span>clock<span class="_ _13"> </span>cycle<span class="_ _1"></span>,<span class="_ _13"> </span>while<span class="_ _13"> </span>stage<span class="_ _13"> </span>C<span class="_ _13"> </span>will<span class="_ _13"> </span>be<span class="_ _13"> </span>idle<span class="_ _13"> </span>for<span class="_ _13"> </span>50<span class="_ _13"> </span>ps<span class="_ _13"> </span>every<span class="_ _13"> </span>clock<span class="_ _13"> </span>cycle<span class="_ _1"></span>.<span class="_ _13"> </span>Only</div><div class="t m5 x1d h46 y900 ff7 fs19 fc1 sc0 ls0 ws0">stage<span class="_"> </span>B<span class="_ _13"> </span>will<span class="_"> </span>be<span class="_"> </span>continuously<span class="_ _13"> </span>active<span class="_ _0"></span>.<span class="_"> </span>W<span class="_ _3"></span>e<span class="_"> </span>must<span class="_ _13"> </span>set<span class="_"> </span>the<span class="_"> </span>clock<span class="_ _13"> </span>cycle<span class="_ _13"> </span>to<span class="_"> </span>150<span class="_ _13"> </span><span class="ff12">+<span class="_ _10"> </span></span>20<span class="_ _13"> </span><span class="ff12">=<span class="_ _10"> </span></span>170</div><div class="t m5 x1d h26 y901 ff7 fs19 fc1 sc0 ls0 ws0">picoseconds<span class="_ _1"></span>,<span class="_ _21"> </span>giving<span class="_ _15"> </span>a<span class="_ _15"> </span>throughput<span class="_ _15"> </span>of<span class="_ _15"> </span>5<span class="ff11">.</span>88<span class="_ _14"> </span>GIPS<span class="_ _1"></span>.<span class="_ _15"> </span>In<span class="_ _15"> </span>addition,<span class="_ _f"> </span>the<span class="_ _15"> </span>latency<span class="_ _14"> </span>would</div><div class="t m5 x1d h26 y902 ff7 fs19 fc1 sc0 ls0 ws0">increase<span class="_"> </span>to<span class="_"> </span>510<span class="_ _13"> </span>ps<span class="_"> </span>due<span class="_"> </span>to<span class="_"> </span>the<span class="_"> </span>slower<span class="_"> </span>clock<span class="_"> </span>rate<span class="_ _1"></span>.</div><div class="t m5 x29 h26 y903 ff7 fs19 fc1 sc0 ls0 ws0">Devising<span class="_ _21"> </span>a<span class="_ _f"> </span>partitioning<span class="_ _f"> </span>of<span class="_ _f"> </span>the<span class="_ _f"> </span>system<span class="_ _f"> </span>computation<span class="_ _f"> </span>into<span class="_ _f"> </span>a<span class="_ _f"> </span>series<span class="_ _f"> </span>of<span class="_ _f"> </span>stages</div><div class="t m5 x1d h26 y904 ff7 fs19 fc1 sc0 ls0 ws0">having<span class="_ _16"> </span>uniform<span class="_ _16"> </span>delays<span class="_ _16"> </span>can<span class="_ _16"> </span>be<span class="_ _16"> </span>a<span class="_ _14"> </span>major<span class="_ _16"> </span>challenge<span class="_ _16"> </span>for<span class="_ _16"> </span>hardware<span class="_ _16"> </span>designers<span class="_ _1"></span>.<span class="_ _14"> </span>Often,</div></div><div class="pi" data-data='{"ctm":[2.000000,0.000000,0.000000,2.000000,0.000000,0.000000]}'></div></div>
