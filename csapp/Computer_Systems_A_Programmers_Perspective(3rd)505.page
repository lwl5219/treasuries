<div id="pf1f9" class="pf w2 h11" data-page-no="1f9"><div class="pc pc1f9 w2 h11"><img class="bi x0 y0 w1 h1" alt="" src="csapp/bg1f9.png"/><div class="t m5 x14 h28 y9b ffe fs1e fc2 sc0 ls0 ws0">504<span class="_ _1b"> </span><span class="ff6 fs1f">Chapter<span class="_ _10"> </span>4<span class="_ _3d"> </span>Processor<span class="_ _10"> </span>Architecture</span></div><div class="t m5 x1d h26 ye7 ff7 fs19 fc2 sc0 ls0 ws0">T<span class="_ _1"></span>he<span class="_"> </span>sum<span class="_"> </span>of<span class="_"> </span>the<span class="_"> </span>three<span class="_"> </span>penalties<span class="_"> </span>is<span class="_"> </span>0<span class="ff11">.</span><span class="ls17">27,<span class="_"> </span>giving<span class="_"> </span>a<span class="_"> </span>CPI<span class="_"> </span>of<span class="_"> </span>1</span><span class="ff11">.</span><span class="ls202">27.</span></div><div class="t m5 x29 h26 y2a7 ff7 fs19 fc2 sc0 ls0 ws0">Our<span class="_ _14"> </span>goal<span class="_ _15"> </span>was<span class="_ _14"> </span>to<span class="_ _15"> </span>design<span class="_ _14"> </span>a<span class="_ _15"> </span>pipeline<span class="_ _14"> </span>that<span class="_ _15"> </span>can<span class="_ _14"> </span>issue<span class="_ _15"> </span>one<span class="_ _14"> </span>instruction<span class="_ _15"> </span>per<span class="_ _14"> </span>cycle<span class="_ _1"></span>,</div><div class="t m5 x1d h26 y2a8 ff7 fs19 fc2 sc0 ls0 ws0">giving<span class="_"> </span>a<span class="_"> </span>CPI<span class="_ _11"> </span>of<span class="_"> </span>1<span class="_ _0"></span><span class="ff11">.<span class="ff7 ls3b">0.<span class="_"> </span>W<span class="_ _3"></span>e<span class="_ _11"> </span>did<span class="_"> </span>not<span class="_ _11"> </span>quite<span class="_"> </span>meet<span class="_"> </span>this<span class="_ _11"> </span>goal,<span class="_"> </span>but<span class="_ _11"> </span>the<span class="_"> </span>overall<span class="_ _11"> </span>performance</span></span></div><div class="t m5 x1d h26 y2f7 ff7 fs19 fc2 sc0 ls0 ws0">is<span class="_ _13"> </span>still<span class="_ _13"> </span>quite<span class="_ _13"> </span>good.<span class="_ _13"> </span>W<span class="_ _1"></span>e<span class="_ _13"> </span>can<span class="_ _13"> </span>also<span class="_ _13"> </span>see<span class="_ _13"> </span>that<span class="_"> </span>any<span class="_ _13"> </span>effort<span class="_ _13"> </span>to<span class="_ _13"> </span>reduce<span class="_ _13"> </span>the<span class="_ _13"> </span>CPI<span class="_ _13"> </span>further<span class="_ _13"> </span>should</div><div class="t m5 x1d h26 y2f8 ff7 fs19 fc2 sc0 ls0 ws0">focus<span class="_ _13"> </span>on<span class="_ _13"> </span>mispredicted<span class="_ _13"> </span>branches<span class="_ _3"></span>.<span class="_ _13"> </span>They<span class="_ _13"> </span>account<span class="_ _6"> </span>for<span class="_ _13"> </span>0<span class="ff11">.</span>16<span class="_ _13"> </span>of<span class="_ _13"> </span>our<span class="_ _13"> </span>total<span class="_ _13"> </span>penalty<span class="_ _13"> </span>of<span class="_ _13"> </span>0<span class="ff11">.</span><span class="ls202">27,</span></div><div class="t m5 x1d h26 y2f9 ff7 fs19 fc2 sc0 ls0 ws0">because<span class="_ _13"> </span>conditional<span class="_ _13"> </span>branches<span class="_ _6"> </span>are<span class="_ _13"> </span>common,<span class="_ _13"> </span>our<span class="_ _13"> </span>prediction<span class="_ _13"> </span>strategy<span class="_ _6"> </span>often<span class="_ _13"> </span>fails<span class="_ _1"></span>,<span class="_ _13"> </span>and</div><div class="t m5 x1d h26 y2fa ff7 fs19 fc2 sc0 ls0 ws0">we<span class="_"> </span>cancel<span class="_"> </span>two<span class="_"> </span>instructions<span class="_"> </span>for<span class="_"> </span>every<span class="_"> </span>misprediction.</div><div class="t m5 x1d h47 y4634 ffe fs2b fc1 sc0 ls0 ws0">Practice<span class="_"> </span>Problem<span class="_"> </span>4.43<span class="_ _1f"> </span><span class="fs16">(solution<span class="_"> </span>page<span class="_"> </span>530)</span></div><div class="t m5 x1d h26 y4635 ff7 fs19 fc1 sc0 ls0 ws0">Suppose<span class="_"> </span>we<span class="_"> </span>use<span class="_"> </span>a<span class="_"> </span>branch<span class="_"> </span>prediction<span class="_"> </span>strategy<span class="_"> </span>that<span class="_"> </span>achieves<span class="_ _13"> </span>a<span class="_"> </span>success<span class="_"> </span>rate<span class="_"> </span>of<span class="_"> </span>65%,</div><div class="t m5 x1d h26 y4636 ff7 fs19 fc1 sc0 ls0 ws0">such<span class="_ _14"> </span>as<span class="_ _15"> </span>backward<span class="_ _15"> </span>taken,<span class="_ _21"> </span>forward<span class="_ _15"> </span>not<span class="_ _15"> </span>taken<span class="_ _15"> </span>(BTFNT),<span class="_ _21"> </span>as<span class="_ _15"> </span>described<span class="_ _14"> </span>in<span class="_ _15"> </span>Section</div><div class="t m5 x1d h26 y4637 ff7 fs19 fc1 sc0 ls0 ws0">4.5.4.<span class="_ _13"> </span>What<span class="_ _13"> </span>would<span class="_ _13"> </span>be<span class="_"> </span>the<span class="_ _13"> </span>impact<span class="_ _13"> </span>on<span class="_ _13"> </span>CPI,<span class="_"> </span>assuming<span class="_ _13"> </span>all<span class="_ _13"> </span>of<span class="_ _13"> </span>the<span class="_"> </span>other<span class="_ _13"> </span>frequencies<span class="_ _13"> </span>are</div><div class="t m5 x1d h26 y4638 ff7 fs19 fc1 sc0 ls0 ws0">not<span class="_"> </span>affected?</div><div class="t m5 x1d h47 y4639 ffe fs2b fc1 sc0 ls0 ws0">Practice<span class="_"> </span>Problem<span class="_"> </span>4.44<span class="_ _1f"> </span><span class="fs16">(solution<span class="_"> </span>page<span class="_"> </span>530)</span></div><div class="t m5 x1d h26 y463a ff7 fs19 fc1 sc0 ls0 ws0">Let<span class="_ _13"> </span>us<span class="_"> </span>analyze<span class="_ _13"> </span>the<span class="_"> </span>relative<span class="_ _13"> </span>performance<span class="_ _13"> </span>of<span class="_"> </span>using<span class="_ _13"> </span>conditional<span class="_ _13"> </span>data<span class="_"> </span>transfers<span class="_ _13"> </span>versus</div><div class="t m5 x1d h26 y463b ff7 fs19 fc1 sc0 ls0 ws0">conditional<span class="_ _13"> </span>control<span class="_ _13"> </span>transfers<span class="_ _13"> </span>for<span class="_ _13"> </span>the<span class="_ _13"> </span>programs<span class="_ _13"> </span>you<span class="_ _13"> </span>wrote<span class="_ _13"> </span>for<span class="_ _13"> </span>Problems<span class="_ _13"> </span>4.5<span class="_ _13"> </span>and<span class="_ _13"> </span>4.6.</div><div class="t m5 x1d h26 y463c ff7 fs19 fc1 sc0 ls0 ws0">Assume<span class="_ _14"> </span>that<span class="_ _14"> </span>we<span class="_ _14"> </span>are<span class="_ _14"> </span>using<span class="_ _14"> </span>these<span class="_ _14"> </span>programs<span class="_ _14"> </span>to<span class="_ _14"> </span>compute<span class="_ _14"> </span>the<span class="_ _14"> </span>sum<span class="_ _14"> </span>of<span class="_ _14"> </span>the<span class="_ _15"> </span>absolute</div><div class="t m5 x1d h26 y463d ff7 fs19 fc1 sc0 ls0 ws0">values<span class="_ _6"> </span>of<span class="_ _6"> </span>a<span class="_ _13"> </span>very<span class="_ _6"> </span>long<span class="_ _6"> </span>array<span class="_ _3"></span>,<span class="_ _13"> </span>and<span class="_ _6"> </span>so<span class="_ _6"> </span>the<span class="_ _6"> </span>overall<span class="_ _13"> </span>performance<span class="_ _6"> </span>is<span class="_ _6"> </span>determined<span class="_ _6"> </span>largely<span class="_ _13"> </span>by</div><div class="t m5 x1d h26 y463e ff7 fs19 fc1 sc0 ls0 ws0">the<span class="_ _6"> </span>number<span class="_ _6"> </span>of<span class="_ _6"> </span>cycles<span class="_ _a"> </span>required<span class="_ _6"> </span>by<span class="_ _6"> </span>the<span class="_ _6"> </span>inner<span class="_ _6"> </span>loop.<span class="_ _a"> </span>Assume<span class="_ _6"> </span>that<span class="_ _6"> </span>our<span class="_ _6"> </span>jump<span class="_ _6"> </span>instructions</div><div class="t m5 x1d h26 y463f ff7 fs19 fc1 sc0 ls0 ws0">are<span class="_ _13"> </span>predicted<span class="_ _6"> </span>as<span class="_ _13"> </span>being<span class="_ _13"> </span>taken,<span class="_ _13"> </span>and<span class="_ _6"> </span>that<span class="_ _13"> </span>around<span class="_ _13"> </span>50%<span class="_ _13"> </span>of<span class="_ _6"> </span>the<span class="_ _13"> </span>array<span class="_ _13"> </span>values<span class="_ _6"> </span>are<span class="_ _13"> </span>positive<span class="_ _1"></span>.</div><div class="t m5 x124 h26 y4640 ff7 fs19 fc1 sc0 ls0 ws0">A.<span class="_ _1f"> </span>On<span class="_ _16"> </span>average<span class="_ _1"></span>,<span class="_ _16"> </span>how<span class="_ _16"> </span>many<span class="_ _16"> </span>instructions<span class="_ _16"> </span>are<span class="_ _16"> </span>executed<span class="_ _16"> </span>in<span class="_ _16"> </span>the<span class="_ _16"> </span>inner<span class="_ _11"> </span>loops<span class="_ _16"> </span>of<span class="_ _16"> </span>the</div><div class="t m5 x4f h26 y4641 ff7 fs19 fc1 sc0 ls0 ws0">two<span class="_"> </span>programs?</div><div class="t m5 x124 h26 y4642 ff7 fs19 fc1 sc0 ls0 ws0">B<span class="_ _3"></span>.<span class="_ _1d"> </span>On<span class="_ _13"> </span>average,<span class="_ _13"> </span>how<span class="_ _13"> </span>many<span class="_ _13"> </span>bubbles<span class="_ _13"> </span>would<span class="_ _13"> </span>be<span class="_ _13"> </span>injected<span class="_ _13"> </span>into<span class="_ _13"> </span>the<span class="_ _13"> </span>inner<span class="_ _13"> </span>loops<span class="_ _13"> </span>of<span class="_ _13"> </span>the</div><div class="t m5 x4f h26 y4643 ff7 fs19 fc1 sc0 ls0 ws0">two<span class="_"> </span>programs?</div><div class="t m5 x124 h26 y4644 ff7 fs19 fc1 sc0 ls0 ws0">C.<span class="_ _25"> </span>What<span class="_"> </span>is<span class="_"> </span>the<span class="_ _11"> </span>average<span class="_ _11"> </span>number<span class="_ _11"> </span>of<span class="_ _11"> </span>clock<span class="_ _11"> </span>cycles<span class="_"> </span>required<span class="_ _11"> </span>per<span class="_"> </span>array<span class="_ _11"> </span>element<span class="_ _11"> </span>for</div><div class="t m5 x4f h26 y4645 ff7 fs19 fc1 sc0 ls0 ws0">the<span class="_"> </span>two<span class="_"> </span>programs?</div><div class="t m5 x1d h41 y4646 ffe fs29 fc1 sc0 ls0 ws0">4.5.10<span class="_ _48"> </span><span class="fs19">Unﬁnished<span class="_"> </span>Business</span></div><div class="t m5 x1d h26 y4647 ff7 fs19 fc1 sc0 ls0 ws0">W<span class="_ _3"></span>e<span class="_"> </span>have<span class="_ _13"> </span>created<span class="_"> </span>a<span class="_"> </span>structure<span class="_ _13"> </span>for<span class="_"> </span>the<span class="_ _13"> </span>PIPE<span class="_"> </span>pipelined<span class="_ _13"> </span>microprocessor,<span class="_"> </span>designed<span class="_ _13"> </span>the</div><div class="t m5 x1d h26 y4648 ff7 fs19 fc1 sc0 ls0 ws0">control<span class="_ _15"> </span>logic<span class="_ _15"> </span>blocks<span class="_ _1"></span>,<span class="_ _f"> </span>and<span class="_ _15"> </span>implemented<span class="_ _21"> </span>pipeline<span class="_ _15"> </span>control<span class="_ _21"> </span>logic<span class="_ _15"> </span>to<span class="_ _15"> </span>handle<span class="_ _21"> </span>special</div><div class="t m5 x1d h26 y4649 ff7 fs19 fc1 sc0 ls0 ws0">cases<span class="_ _16"> </span>where<span class="_ _16"> </span>normal<span class="_ _14"> </span>pipeline<span class="_ _16"> </span>ﬂow<span class="_ _14"> </span>does<span class="_ _16"> </span>not<span class="_ _16"> </span>sufﬁce.<span class="_ _16"> </span>Still,<span class="_ _14"> </span>PIPE<span class="_ _16"> </span>lacks<span class="_ _16"> </span>several<span class="_ _14"> </span>key</div><div class="t m5 x1d h26 y464a ff7 fs19 fc1 sc0 ls0 ws0">features<span class="_"> </span>that<span class="_"> </span>would<span class="_"> </span>be<span class="_ _13"> </span>required<span class="_"> </span>in<span class="_"> </span>an<span class="_"> </span>actual<span class="_"> </span>microprocessor<span class="_"> </span>design.<span class="_"> </span>W<span class="_ _3"></span>e<span class="_"> </span>highlight</div><div class="t m5 x1d h26 y464b ff7 fs19 fc1 sc0 ls0 ws0">a<span class="_"> </span>few<span class="_"> </span>of<span class="_"> </span>these<span class="_"> </span>and<span class="_"> </span>discuss<span class="_"> </span>what<span class="_"> </span>would<span class="_"> </span>be<span class="_"> </span>required<span class="_"> </span>to<span class="_"> </span>add<span class="_"> </span>them.</div><div class="t m5 x1d h42 y464c ff6 fs29 fc6 sc0 ls0 ws0">Multicycle<span class="_ _11"> </span>Instructions</div><div class="t m5 x1d h26 y832 ff7 fs19 fc1 sc0 ls0 ws0">All<span class="_ _13"> </span>of<span class="_ _13"> </span>the<span class="_ _6"> </span>instructions<span class="_ _13"> </span>in<span class="_ _13"> </span>the<span class="_ _13"> </span>Y86-64<span class="_ _13"> </span>instruction<span class="_ _13"> </span>set<span class="_ _6"> </span>involve<span class="_ _13"> </span>simple<span class="_ _13"> </span>operations<span class="_ _13"> </span>such</div><div class="t m5 x1d h26 y833 ff7 fs19 fc1 sc0 ls0 ws0">as<span class="_"> </span>adding<span class="_"> </span>numbers<span class="_ _3"></span>.<span class="_"> </span>T<span class="_ _1"></span>hese<span class="_"> </span>can<span class="_"> </span>be<span class="_"> </span>processed<span class="_"> </span>in<span class="_"> </span>a<span class="_ _13"> </span>single<span class="_"> </span>clock<span class="_"> </span>cycle<span class="_ _13"> </span>within<span class="_"> </span>the<span class="_"> </span>exe-</div><div class="t m5 x1d h26 y834 ff7 fs19 fc1 sc0 ls0 ws0">cute<span class="_"> </span>stage<span class="_ _0"></span>.<span class="_"> </span>In<span class="_"> </span>a<span class="_ _11"> </span>more<span class="_"> </span>complete<span class="_ _11"> </span>instruction<span class="_"> </span>set,<span class="_"> </span>we<span class="_ _11"> </span>would<span class="_"> </span>also<span class="_ _11"> </span>need<span class="_"> </span>to<span class="_"> </span>implement</div><div class="t m5 x1d h26 y835 ff7 fs19 fc1 sc0 ls0 ws0">instructions<span class="_ _13"> </span>requiring<span class="_ _6"> </span>more<span class="_ _13"> </span>complex<span class="_ _6"> </span>operations<span class="_ _13"> </span>such<span class="_ _13"> </span>as<span class="_ _6"> </span>integer<span class="_ _13"> </span>multiplication<span class="_ _6"> </span>and</div></div><div class="pi" data-data='{"ctm":[2.000000,0.000000,0.000000,2.000000,0.000000,0.000000]}'></div></div>
