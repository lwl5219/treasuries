<div id="pf60" class="pf w2 h11" data-page-no="60"><div class="pc pc60 w2 h11"><img class="bi x0 y0 w1 h1" alt="" src="csapp/bg60.png"/><div class="t m5 x6a h28 y9b ff6 fs1f fc2 sc0 ls0 ws0">Section<span class="_ _10"> </span>2.2<span class="_ _60"> </span>Integer<span class="_ _10"> </span>Representations<span class="_ _3e"> </span><span class="ffe fs1e">95</span></div><div class="t m5 x34 h2a y257 fff fs1c fc2 sc0 ls0 ws0">Aside<span class="_ _1b"> </span><span class="ff6 fs19">Shifting<span class="_ _11"> </span>by<span class="_ _11"> </span><span class="ff11">k<span class="_ _2"></span></span>,<span class="_ _11"> </span>for<span class="_ _16"> </span>large<span class="_ _11"> </span>values<span class="_ _11"> </span>of<span class="_ _11"> </span><span class="ff11">k</span></span></div><div class="t m5 x34 h4a y2d0 ff7 fs1e fc2 sc0 ls0 ws0">F<span class="_ _1"></span>or<span class="_ _16"> </span>a<span class="_ _16"> </span>data<span class="_ _11"> </span>type<span class="_ _16"> </span>consisting<span class="_ _16"> </span>of<span class="_ _16"> </span><span class="ff11">w<span class="_"> </span></span>bits<span class="_ _0"></span>,<span class="_ _16"> </span>what<span class="_ _16"> </span>should<span class="_ _16"> </span>be<span class="_ _11"> </span>the<span class="_ _16"> </span>effect<span class="_ _16"> </span>of<span class="_ _16"> </span>shifting<span class="_ _16"> </span>by<span class="_ _16"> </span>some<span class="_ _11"> </span>value<span class="_ _16"> </span><span class="ff11">k<span class="_ _10"> </span><span class="ff12">≥<span class="_ _10"> </span></span>w<span class="_ _2"></span></span><span class="ls53">?F<span class="_ _9"></span>o<span class="_ _49"></span>r</span></div><div class="t m5 x34 h2b y2d1 ff7 fs1e fc2 sc0 ls0 ws0">example<span class="_ _1"></span>,<span class="_"> </span>what<span class="_ _13"> </span>should<span class="_ _6"> </span>be<span class="_"> </span>the<span class="_ _6"> </span>effect<span class="_"> </span>of<span class="_ _6"> </span>computing<span class="_"> </span>the<span class="_ _6"> </span>following<span class="_"> </span>expressions<span class="_ _3"></span>,<span class="_"> </span>assuming<span class="_ _6"> </span>data<span class="_"> </span>type<span class="_ _6"> </span><span class="ffd">int<span class="_ _13"> </span></span>has</div><div class="t m5 x34 h4a y2d2 ff11 fs1e fc2 sc0 ls0 ws0">w<span class="_ _10"> </span><span class="ff12">=<span class="_ _13"></span><span class="ff7">32:</span></span></div><div class="t m5 x146 h2d y7aa ffd fs1e fc2 sc0 ls0 ws0">int<span class="_ _5a"> </span>lval<span class="_ _1f"> </span>=<span class="_ _e"> </span>0xFEDCBA98<span class="_ _1a"> </span>&lt;&lt;<span class="_ _1f"> </span>32;</div><div class="t m5 x146 h2d y7ab ffd fs1e fc2 sc0 ls0 ws0">int<span class="_ _5a"> </span>aval<span class="_ _1f"> </span>=<span class="_ _e"> </span>0xFEDCBA98<span class="_ _1a"> </span>&gt;&gt;<span class="_ _1f"> </span>36;</div><div class="t m5 x146 h2d y7ac ffd fs1e fc2 sc0 ls0 ws0">unsigned<span class="_ _e"> </span>uval<span class="_ _1f"> </span>=<span class="_ _1f"> </span>0xFEDCBA98u<span class="_ _e"> </span>&gt;&gt;<span class="_ _1f"> </span>40;</div><div class="t m5 x35 h2b yc77 ff7 fs1e fc2 sc0 ls0 ws0">T<span class="_ _1"></span>he<span class="_ _13"> </span>C<span class="_ _13"> </span>standards<span class="_ _6"> </span>carefully<span class="_ _13"> </span>avoid<span class="_ _13"> </span>stating<span class="_ _6"> </span>what<span class="_ _13"> </span>should<span class="_ _13"> </span>be<span class="_ _6"> </span>done<span class="_ _13"> </span>in<span class="_ _13"> </span>such<span class="_ _6"> </span>a<span class="_ _13"> </span>case<span class="_ _1"></span>.<span class="_ _13"> </span>On<span class="_ _13"> </span>many<span class="_ _6"> </span>machines<span class="_ _0"></span>,<span class="_ _13"> </span>the</div><div class="t m5 x34 h2b yc78 ff7 fs1e fc2 sc0 ls0 ws0">shift<span class="_ _13"> </span>instructions<span class="_ _6"> </span>consider<span class="_ _13"> </span>only<span class="_ _6"> </span>the<span class="_ _13"> </span>lower<span class="_ _6"> </span>log</div><div class="t m5 x176 h48 yc79 ff7 fs2c fc2 sc0 ls0 ws0">2</div><div class="t m5 x7b h2b yc7a ff11 fs1e fc2 sc0 ls0 ws0">w<span class="_ _13"> </span><span class="ff7">bits<span class="_ _13"> </span>of<span class="_ _6"> </span>the<span class="_ _13"> </span>shift<span class="_ _6"> </span>amount<span class="_ _13"> </span>when<span class="_ _6"> </span>shifting<span class="_ _13"> </span>a<span class="_ _6"> </span></span>w<span class="_ _2"></span><span class="ff7">-bit<span class="_ _13"> </span>value<span class="_ _1"></span>,<span class="_ _13"> </span>and</span></div><div class="t m5 x34 h4a yc7b ff7 fs1e fc2 sc0 ls0 ws0">so<span class="_ _11"> </span>the<span class="_ _11"> </span>shift<span class="_ _11"> </span>amount<span class="_ _11"> </span>is<span class="_ _11"> </span>computed<span class="_ _11"> </span>as<span class="_ _11"> </span><span class="ff11">k<span class="_ _10"> </span></span>mod<span class="_"> </span><span class="ff11">w</span>.<span class="_ _11"> </span>F<span class="_ _1"></span>or<span class="_ _11"> </span>example,<span class="_ _11"> </span>with<span class="_ _11"> </span><span class="ff11">w<span class="_ _10"> </span><span class="ff12">=<span class="_ _13"> </span></span></span>32,<span class="_ _16"> </span>the<span class="_ _10"> </span>above<span class="_ _11"> </span>three<span class="_ _11"> </span>shifts<span class="_ _11"> </span>would</div><div class="t m5 x34 h2b yc7c ff7 fs1e fc2 sc0 ls0 ws0">be<span class="_"> </span>computed<span class="_"> </span>as<span class="_"> </span>if<span class="_"> </span>they<span class="_"> </span>were<span class="_"> </span>by<span class="_"> </span>amounts<span class="_"> </span>0,<span class="_"> </span>4,<span class="_"> </span>and<span class="_"> </span>8,<span class="_"> </span>respectively<span class="_ _3"></span>,<span class="_"> </span>giving<span class="_"> </span>results</div><div class="t m5 x34 h2d yc7d ffd fs1e fc2 sc0 ls0 ws0">lval<span class="_ _26"> </span>0xFEDCBA98</div><div class="t m5 x34 h2d yc7e ffd fs1e fc2 sc0 ls0 ws0">aval<span class="_ _26"> </span>0xFFEDCBA9</div><div class="t m5 x34 h2d yc7f ffd fs1e fc2 sc0 ls0 ws0">uval<span class="_ _26"> </span>0x00FEDCBA</div><div class="t m5 x34 h2b yc80 ff7 fs1e fc2 sc0 ls0 ws0">T<span class="_ _1"></span>his<span class="_ _13"> </span>behavior<span class="_ _13"> </span>is<span class="_ _6"> </span>not<span class="_ _13"> </span>guaranteed<span class="_ _13"> </span>for<span class="_ _6"> </span>C<span class="_ _13"> </span>programs<span class="_ _3"></span>,<span class="_"> </span>however<span class="_ _1"></span>,<span class="_"> </span>and<span class="_ _6"> </span>so<span class="_ _13"> </span>shift<span class="_ _6"> </span>amounts<span class="_ _13"> </span>should<span class="_ _13"> </span>be<span class="_ _6"> </span>kept<span class="_ _13"> </span>less<span class="_ _6"> </span>than</div><div class="t m5 x34 h2b yc81 ff7 fs1e fc2 sc0 ls0 ws0">the<span class="_"> </span>word<span class="_"> </span>size<span class="_ _1"></span>.</div><div class="t m5 x35 h2b yc82 ff7 fs1e fc2 sc0 ls0 ws0">J<span class="_ _3"></span>ava,<span class="_ _13"> </span>on<span class="_ _6"> </span>the<span class="_ _13"> </span>other<span class="_ _6"> </span>hand,<span class="_ _13"> </span>speciﬁcally<span class="_ _6"> </span>requires<span class="_ _13"> </span>that<span class="_ _6"> </span>shift<span class="_ _13"> </span>amounts<span class="_ _6"> </span>should<span class="_ _6"> </span>be<span class="_ _13"> </span>computed<span class="_ _6"> </span>in<span class="_ _13"> </span>the<span class="_ _6"> </span>modular</div><div class="t m5 x34 h2b yc83 ff7 fs1e fc2 sc0 ls0 ws0">fashion<span class="_"> </span>we<span class="_"> </span>have<span class="_"> </span>shown.</div><div class="t m5 x34 h2a yc84 fff fs1c fc2 sc0 ls0 ws0">Aside<span class="_ _1b"> </span><span class="ff6 fs19">Operator<span class="_ _11"> </span>precedence<span class="_ _11"> </span>issues<span class="_ _11"> </span>with<span class="_ _16"> </span>shift<span class="_ _11"> </span>operations</span></div><div class="t m5 x34 h2b yc85 ff7 fs1e fc2 sc0 ls0 ws0">It<span class="_ _13"> </span>might<span class="_ _13"> </span>be<span class="_ _6"> </span>tempting<span class="_ _13"> </span>to<span class="_ _13"> </span>write<span class="_ _13"> </span>the<span class="_ _13"> </span>expression<span class="_ _6"> </span><span class="ffd">1&lt;&lt;2<span class="_ _16"> </span>+<span class="_ _11"> </span>3&lt;&lt;4</span>,<span class="_ _13"> </span>intending<span class="_ _13"> </span>it<span class="_ _13"> </span>to<span class="_ _6"> </span>mean<span class="_ _13"> </span><span class="ffd">(1&lt;&lt;2)<span class="_ _11"> </span>+<span class="_ _16"> </span>(3&lt;&lt;4)</span>.<span class="_ _13"> </span>How-</div><div class="t m5 x34 h2b yc86 ff7 fs1e fc2 sc0 ls0 ws0">ever,<span class="_ _6"> </span>in<span class="_ _13"> </span>C<span class="_ _13"> </span>the<span class="_ _6"> </span>former<span class="_ _13"> </span>expression<span class="_ _6"> </span>is<span class="_ _13"> </span>equivalent<span class="_ _6"> </span>to<span class="_ _13"> </span><span class="ffd">1<span class="_ _11"> </span>&lt;&lt;<span class="_ _11"> </span>(2+3)<span class="_ _16"> </span>&lt;&lt;<span class="_ _11"> </span>4</span>,<span class="_ _13"> </span>since<span class="_ _6"> </span>addition<span class="_ _13"> </span>(and<span class="_ _6"> </span>subtraction)<span class="_ _13"> </span>have</div><div class="t m5 x34 h2b yc87 ff7 fs1e fc2 sc0 ls0 ws0">higher<span class="_ _10"> </span>precedence<span class="_ _11"> </span>than<span class="_ _11"> </span>shifts<span class="_ _1"></span>.<span class="_ _10"> </span>The<span class="_"> </span>left-to-right<span class="_ _11"> </span>associativity<span class="_ _10"> </span>rule<span class="_ _11"> </span>then<span class="_ _11"> </span>causes<span class="_ _10"> </span>this<span class="_ _11"> </span>to<span class="_ _11"> </span>be<span class="_"> </span>parenthesized</div><div class="t m5 x34 h2b yc88 ff7 fs1e fc2 sc0 ls0 ws0">as<span class="_"> </span><span class="ffd">(1<span class="_ _11"> </span>&lt;&lt;<span class="_ _11"> </span>(2+3))<span class="_ _16"> </span>&lt;&lt;<span class="_ _11"> </span>4</span>,<span class="_"> </span>giving<span class="_"> </span>value<span class="_"> </span>512,<span class="_"> </span>rather<span class="_"> </span>than<span class="_"> </span>the<span class="_"> </span>intended<span class="_"> </span>52.</div><div class="t m5 x35 h2b yc89 ff7 fs1e fc2 sc0 ls0 ws0">Getting<span class="_"> </span>the<span class="_"> </span>precedence<span class="_"> </span>wrong<span class="_ _10"> </span>in<span class="_ _10"> </span>C<span class="_"> </span>expressions<span class="_ _10"> </span>is<span class="_ _10"> </span>a<span class="_ _10"> </span>common<span class="_ _10"> </span>source<span class="_ _10"> </span>of<span class="_ _10"> </span>program<span class="_ _10"> </span>errors<span class="_ _1"></span>,<span class="_ _11"> </span>and<span class="_"> </span>often</div><div class="t m5 x34 h2b yc8a ff7 fs1e fc2 sc0 ls0 ws0">these<span class="_"> </span>are<span class="_"> </span>difﬁcult<span class="_"> </span>to<span class="_"> </span>spot<span class="_"> </span>by<span class="_"> </span>inspection.<span class="_"> </span>When<span class="_"> </span>in<span class="_"> </span>doubt,<span class="_"> </span>put<span class="_"> </span>in<span class="_"> </span>parentheses!</div><div class="t m5 x17 h3b yc8b fff fs24 fc6 sc0 ls0 ws0">2.2<span class="_ _17"> </span><span class="ffe fs18">Integer<span class="_"> </span>Representations</span></div><div class="t m5 x17 h26 yc8c ff7 fs19 fc1 sc0 ls0 ws0">In<span class="_ _6"> </span>this<span class="_ _6"> </span>section,<span class="_ _6"> </span>we<span class="_ _6"> </span>describe<span class="_ _6"> </span>two<span class="_ _6"> </span>different<span class="_ _6"> </span>ways<span class="_ _6"> </span>bits<span class="_ _6"> </span>can<span class="_ _6"> </span>be<span class="_ _6"> </span>used<span class="_ _6"> </span>to<span class="_ _6"> </span>encode<span class="_ _6"> </span>integers—</div><div class="t m5 x17 h26 yc8d ff7 fs19 fc1 sc0 ls0 ws0">one<span class="_ _14"> </span>that<span class="_ _15"> </span>can<span class="_ _15"> </span>only<span class="_ _15"> </span>represent<span class="_ _15"> </span>nonnegative<span class="_ _15"> </span>numbers<span class="_ _1"></span>,<span class="_ _21"> </span>and<span class="_ _15"> </span>one<span class="_ _15"> </span>that<span class="_ _14"> </span>can<span class="_ _15"> </span>represent</div><div class="t m5 x17 h26 yc8e ff7 fs19 fc1 sc0 ls0 ws0">negative<span class="_ _1"></span>,<span class="_ _e"> </span>zero<span class="_ _1"></span>,<span class="_ _e"> </span>and<span class="_ _15"> </span>positive<span class="_ _21"> </span>numbers<span class="_ _0"></span>.<span class="_ _21"> </span>W<span class="_ _3"></span>e<span class="_ _f"> </span>will<span class="_ _21"> </span>see<span class="_ _21"> </span>later<span class="_ _f"> </span>that<span class="_ _21"> </span>they<span class="_ _21"> </span>are<span class="_ _f"> </span>strongly</div><div class="t m5 x17 h26 yc8f ff7 fs19 fc1 sc0 ls0 ws0">related<span class="_"> </span>both<span class="_ _13"> </span>in<span class="_"> </span>their<span class="_"> </span>mathematical<span class="_"> </span>properties<span class="_ _13"> </span>and<span class="_"> </span>their<span class="_"> </span>machine-level<span class="_ _13"> </span>implemen-</div><div class="t m5 x17 h26 yc90 ff7 fs19 fc1 sc0 ls0 ws0">tations<span class="_ _1"></span>.<span class="_ _6"> </span>W<span class="_ _3"></span>e<span class="_ _6"> </span>also<span class="_ _6"> </span>investigate<span class="_ _6"> </span>the<span class="_ _13"> </span>effect<span class="_ _a"> </span>of<span class="_ _6"> </span>expanding<span class="_ _6"> </span>or<span class="_ _6"> </span>shrinking<span class="_ _6"> </span>an<span class="_ _6"> </span>encoded<span class="_ _6"> </span>integer</div><div class="t m5 x17 h26 yc91 ff7 fs19 fc1 sc0 ls0 ws0">to<span class="_"> </span>ﬁt<span class="_"> </span>a<span class="_"> </span>representation<span class="_"> </span>with<span class="_"> </span>a<span class="_"> </span>different<span class="_"> </span>length.</div><div class="t m5 x26 h26 yc92 ff7 fs19 fc1 sc0 ls0 ws0">F<span class="_ _1"></span>igure<span class="_ _14"> </span>2.8<span class="_ _16"> </span>lists<span class="_ _16"> </span>the<span class="_ _16"> </span>mathematical<span class="_ _14"> </span>terminology<span class="_ _16"> </span>we<span class="_ _16"> </span>introduce<span class="_ _16"> </span>to<span class="_ _14"> </span>precisely<span class="_ _16"> </span>de-</div><div class="t m5 x17 h26 yc93 ff7 fs19 fc1 sc0 ls0 ws0">ﬁne<span class="_ _16"> </span>and<span class="_ _14"> </span>characterize<span class="_ _14"> </span>how<span class="_ _16"> </span>computers<span class="_ _14"> </span>encode<span class="_ _14"> </span>and<span class="_ _14"> </span>operate<span class="_ _16"> </span>on<span class="_ _14"> </span>integer<span class="_ _14"> </span>data.<span class="_ _16"> </span>This</div></div><div class="pi" data-data='{"ctm":[2.000000,0.000000,0.000000,2.000000,0.000000,0.000000]}'></div></div>
