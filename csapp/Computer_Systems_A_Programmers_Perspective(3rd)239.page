<div id="pfef" class="pf w2 h11" data-page-no="ef"><div class="pc pcef w2 h11"><img class="bi x0 y0 w1 h1" alt="" src="csapp/bgef.png"/><div class="t m5 x14 h28 y9b ffe fs1e fc2 sc0 ls0 ws0">238<span class="_ _1b"> </span><span class="ff6 fs1f">Chapter<span class="_ _10"> </span>3<span class="_ _3d"> </span>Machine-Level<span class="_ _10"> </span>Representation<span class="_ _10"> </span>of<span class="_ _10"> </span>Programs</span></div><div class="t m5 x1d h31 y1398 ff7 fs21 fc2 sc0 ls0 ws0">Instruction<span class="_ _71"> </span>Based<span class="_"> </span>on<span class="_ _26"> </span>Description</div><div class="t m5 x1d h7a yc94 ff9 fs21 fc2 sc0 ls0 ws0">cmp<span class="_ _28"> </span><span class="ff11">S</span></div><div class="t m5 x4d h33 yc95 ff7 fs20 fc2 sc0 ls0 ws0">1</div><div class="t m5 x141 h31 yc94 ff7 fs21 fc2 sc0 ls0 ws0">,<span class="_"> </span><span class="ff11">S</span></div><div class="t m5 x20 h33 y245a ff7 fs20 fc2 sc0 ls0 ws0">2</div><div class="t m5 xb2 h55 yc94 ff11 fs21 fc2 sc0 ls0 ws0">S</div><div class="t m5 x91 h33 y245a ff7 fs20 fc2 sc0 ls0 ws0">2</div><div class="t m5 x1b2 h32 yc94 ff12 fs21 fc2 sc0 ls0 ws0">−<span class="_ _13"> </span><span class="ff11">S</span></div><div class="t m5 xfa h33 y245a ff7 fs20 fc2 sc0 ls0 ws0">1</div><div class="t m5 xb8 h31 yc94 ff7 fs21 fc2 sc0 ls0 ws0">Compare</div><div class="t m5 x17e h31 yc98 ffd fs1e fc2 sc0 ls0 ws0">cmpb<span class="_ _129"> </span><span class="ff7 fs21">Compare<span class="_"> </span>byte</span></div><div class="t m5 x17e h2d yc9b ffd fs1e fc2 sc0 ls0 ws0">cmpw</div><div class="t m5 xb8 h31 y2253 ff7 fs21 fc2 sc0 ls0 ws0">Compare<span class="_"> </span>word</div><div class="t m5 x17e h31 yc9e ffd fs1e fc2 sc0 ls0 ws0">cmpl<span class="_ _129"> </span><span class="ff7 fs21">Compare<span class="_"> </span>double<span class="_"> </span>word</span></div><div class="t m5 x17e h31 y2254 ffd fs1e fc2 sc0 ls0 ws0">cmpq<span class="_ _129"> </span><span class="ff7 fs21">Compare<span class="_"> </span>quad<span class="_"> </span>word</span></div><div class="t m5 x1d h7a y245b ff9 fs21 fc2 sc0 ls0 ws0">test<span class="_ _5c"> </span><span class="ff11">S</span></div><div class="t m5 x4d h33 y245c ff7 fs20 fc2 sc0 ls0 ws0">1</div><div class="t m5 x141 h31 y221d ff7 fs21 fc2 sc0 ls0 ws0">,<span class="_"> </span><span class="ff11">S</span></div><div class="t m5 x20 h33 y245c ff7 fs20 fc2 sc0 ls0 ws0">2</div><div class="t m5 xb2 h55 y221d ff11 fs21 fc2 sc0 ls0 ws0">S</div><div class="t m5 x91 h33 y245c ff7 fs20 fc2 sc0 ls0 ws0">1</div><div class="t m5 x1b2 h31 y221d ff7 fs21 fc2 sc0 ls0 ws0">&amp;<span class="_ _13"> </span><span class="ff11">S</span></div><div class="t m5 xfa h33 y245d ff7 fs20 fc2 sc0 ls0 ws0">2</div><div class="t m5 xb8 h31 y221d ff7 fs21 fc2 sc0 ls0 ws0">T<span class="_ _7"></span>est</div><div class="t m5 x17e h31 yca7 ffd fs1e fc2 sc0 ls0 ws0">testb<span class="_ _12d"> </span><span class="ff7 fs21">T<span class="_ _7"></span>est<span class="_"> </span>byte</span></div><div class="t m5 x17e h31 ycaa ffd fs1e fc2 sc0 ls0 ws0">testw<span class="_ _12d"> </span><span class="ff7 fs21">T<span class="_ _7"></span>est<span class="_"> </span>word</span></div><div class="t m5 x17e h31 ycad ffd fs1e fc2 sc0 ls0 ws0">testl<span class="_ _12d"> </span><span class="ff7 fs21">T<span class="_ _7"></span>est<span class="_"> </span>double<span class="_"> </span>word</span></div><div class="t m5 x17e h31 y245e ffd fs1e fc2 sc0 ls0 ws0">testq<span class="_ _12d"> </span><span class="ff7 fs21">T<span class="_ _7"></span>est<span class="_"> </span>quad<span class="_"> </span>word</span></div><div class="t m5 x1d h34 ycb1 ffe fs16 fc6 sc0 ls0 ws0">Figure<span class="_ _11"> </span>3.13<span class="_ _c"> </span><span class="fc1">Comparison<span class="_ _16"> </span>and<span class="_ _16"> </span>test<span class="_ _11"> </span>instructions.<span class="_ _16"> </span><span class="ff6">These<span class="_ _11"> </span>instructions<span class="_ _16"> </span>set<span class="_ _11"> </span>the<span class="_ _16"> </span>condition</span></span></div><div class="t m5 x1d h34 y245f ff6 fs16 fc1 sc0 ls0 ws0">codes<span class="_ _10"> </span>without<span class="_ _11"> </span>updating<span class="_ _10"> </span>any<span class="_ _10"> </span>other<span class="_ _11"> </span>registers.</div><div class="t m5 x1d h26 y2460 ff7 fs19 fc1 sc0 ls0 ws0">the<span class="_"> </span>operands<span class="_"> </span>are<span class="_ _11"> </span>listed<span class="_"> </span>in<span class="_ _11"> </span>reverse<span class="_"> </span>order,<span class="_"> </span>making<span class="_ _11"> </span>the<span class="_"> </span>code<span class="_ _11"> </span>difﬁcult<span class="_"> </span>to<span class="_"> </span>read.<span class="_ _11"> </span>T<span class="_ _0"></span>hese</div><div class="t m5 x1d h26 y2461 ff7 fs19 fc1 sc0 ls0 ws0">instructions<span class="_ _16"> </span>set<span class="_ _16"> </span>the<span class="_ _14"> </span>zero<span class="_ _16"> </span>ﬂag<span class="_ _14"> </span>if<span class="_ _16"> </span>the<span class="_ _16"> </span>two<span class="_ _14"> </span>operands<span class="_ _16"> </span>are<span class="_ _14"> </span>equal.<span class="_ _16"> </span>T<span class="_ _0"></span>he<span class="_ _16"> </span>other<span class="_ _16"> </span>ﬂags<span class="_ _14"> </span>can</div><div class="t m5 x1d h26 y2462 ff7 fs19 fc1 sc0 ls0 ws0">be<span class="_ _21"> </span>used<span class="_ _21"> </span>to<span class="_ _f"> </span>determine<span class="_ _21"> </span>ordering<span class="_ _f"> </span>relations<span class="_ _21"> </span>between<span class="_ _f"> </span>the<span class="_ _21"> </span>two<span class="_ _f"> </span>operands<span class="_ _1"></span>.<span class="_ _21"> </span>The<span class="_ _15"> </span><span class="ff9">test</span></div><div class="t m5 x1d h26 y2463 ff7 fs19 fc1 sc0 ls0 ws0">instructions<span class="_"> </span>behave<span class="_"> </span>in<span class="_"> </span>the<span class="_ _11"> </span>same<span class="_"> </span>manner<span class="_"> </span>as<span class="_ _11"> </span>the<span class="_"> </span><span class="ff9">and<span class="_ _11"> </span></span>instructions<span class="_ _1"></span>,<span class="_"> </span>except<span class="_"> </span>that<span class="_"> </span>they</div><div class="t m5 x1d h26 y2464 ff7 fs19 fc1 sc0 ls0 ws0">set<span class="_ _15"> </span>the<span class="_ _15"> </span>condition<span class="_ _15"> </span>codes<span class="_ _15"> </span>without<span class="_ _21"> </span>altering<span class="_ _15"> </span>their<span class="_ _15"> </span>destinations<span class="_ _1"></span>.<span class="_ _15"> </span>T<span class="_ _3"></span>ypically<span class="_ _3"></span>,<span class="_ _21"> </span>the<span class="_ _15"> </span>same</div><div class="t m5 x1d h26 y2465 ff7 fs19 fc1 sc0 ls0 ws0">operand<span class="_ _13"> </span>is<span class="_"> </span>repeated<span class="_ _13"> </span>(e.g<span class="_ _1"></span>.,<span class="_"> </span><span class="ffd">testq<span class="_ _13"> </span>%rax,%rax<span class="_ _10"> </span></span>to<span class="_ _13"> </span>see<span class="_"> </span>whether<span class="_ _13"> </span><span class="ffd">%rax<span class="_ _10"> </span></span>is<span class="_ _13"> </span>negative<span class="_ _0"></span>,<span class="_"> </span>zero<span class="_ _3"></span>,</div><div class="t m5 x1d h26 y2466 ff7 fs19 fc1 sc0 ls0 ws0">or<span class="_ _6"> </span>positive),<span class="_ _13"> </span>or<span class="_ _a"> </span>one<span class="_ _6"> </span>of<span class="_ _6"> </span>the<span class="_ _6"> </span>operands<span class="_ _13"> </span>is<span class="_ _a"> </span>a<span class="_ _6"> </span>mask<span class="_ _6"> </span>indicating<span class="_ _6"> </span>which<span class="_ _13"> </span>bits<span class="_ _a"> </span>should<span class="_ _6"> </span>be<span class="_ _6"> </span>tested.</div><div class="t m5 x1d h41 y2467 ffe fs29 fc1 sc0 ls0 ws0">3.6.2<span class="_ _48"> </span><span class="fs19">Accessing<span class="_"> </span>the<span class="_"> </span>Condition<span class="_"> </span>Codes</span></div><div class="t m5 x1d h26 y2468 ff7 fs19 fc1 sc0 ls0 ws0">Rather<span class="_ _11"> </span>than<span class="_ _16"> </span>reading<span class="_ _16"> </span>the<span class="_ _11"> </span>condition<span class="_ _16"> </span>codes<span class="_ _11"> </span>directly<span class="_ _3"></span>,<span class="_ _16"> </span>there<span class="_ _16"> </span>are<span class="_ _11"> </span>three<span class="_ _16"> </span>common<span class="_ _11"> </span>ways</div><div class="t m5 x1d h26 y2469 ff7 fs19 fc1 sc0 ls0 ws0">of<span class="_ _15"> </span>using<span class="_ _14"> </span>the<span class="_ _15"> </span>condition<span class="_ _15"> </span>codes:<span class="_ _15"> </span>(1)<span class="_ _15"> </span>we<span class="_ _15"> </span>can<span class="_ _15"> </span>set<span class="_ _15"> </span>a<span class="_ _14"> </span>single<span class="_ _15"> </span>byte<span class="_ _15"> </span>to<span class="_ _15"> </span>0<span class="_ _15"> </span>or<span class="_ _15"> </span>1<span class="_ _15"> </span>depending</div><div class="t m5 x1d h26 y246a ff7 fs19 fc1 sc0 ls0 ws0">on<span class="_ _14"> </span>some<span class="_ _14"> </span>combination<span class="_ _14"> </span>of<span class="_ _14"> </span>the<span class="_ _16"> </span>condition<span class="_ _14"> </span>codes<span class="_ _0"></span>,<span class="_ _14"> </span>(2)<span class="_ _14"> </span>we<span class="_ _14"> </span>can<span class="_ _14"> </span>conditionally<span class="_ _14"> </span>jump<span class="_ _14"> </span>to</div><div class="t m5 x1d h26 y246b ff7 fs19 fc1 sc0 ls0 ws0">some<span class="_ _13"> </span>other<span class="_"> </span>part<span class="_ _13"> </span>of<span class="_"> </span>the<span class="_ _13"> </span>program,<span class="_"> </span>or<span class="_ _13"> </span>(3)<span class="_"> </span>we<span class="_ _13"> </span>can<span class="_"> </span>conditionally<span class="_ _13"> </span>transfer<span class="_"> </span>data.<span class="_ _13"> </span>F<span class="_ _1"></span>or<span class="_"> </span>the</div><div class="t m5 x1d h26 y246c ff7 fs19 fc1 sc0 ls0 ws0">ﬁrst<span class="_ _16"> </span>case,<span class="_ _16"> </span>the<span class="_ _16"> </span>instructions<span class="_ _14"> </span>described<span class="_ _16"> </span>in<span class="_ _16"> </span>Figure<span class="_ _16"> </span>3.14<span class="_ _16"> </span>set<span class="_ _16"> </span>a<span class="_ _14"> </span>single<span class="_ _16"> </span>byte<span class="_ _14"> </span>to<span class="_ _16"> </span>0<span class="_ _16"> </span>or<span class="_ _14"> </span>to<span class="_ _16"> </span>1</div><div class="t m5 x1d h26 y246d ff7 fs19 fc1 sc0 ls0 ws0">depending<span class="_ _16"> </span>on<span class="_ _16"> </span>some<span class="_ _16"> </span>combination<span class="_ _16"> </span>of<span class="_ _16"> </span>the<span class="_ _14"> </span>condition<span class="_ _16"> </span>codes<span class="_ _1"></span>.<span class="_ _16"> </span>W<span class="_ _1"></span>e<span class="_ _16"> </span>refer<span class="_ _16"> </span>to<span class="_ _16"> </span>this<span class="_ _16"> </span>entire</div><div class="t m5 x1d h26 y246e ff7 fs19 fc1 sc0 ls0 ws0">class<span class="_ _13"> </span>of<span class="_"> </span>instructions<span class="_ _13"> </span>as<span class="_"> </span>the<span class="_ _13"> </span><span class="ff9">set<span class="_ _13"> </span></span>instructions;<span class="_"> </span>they<span class="_"> </span>differ<span class="_ _13"> </span>from<span class="_ _13"> </span>one<span class="_"> </span>another<span class="_ _13"> </span>based<span class="_"> </span>on</div><div class="t m5 x1d h26 y246f ff7 fs19 fc1 sc0 ls0 ws0">which<span class="_ _13"> </span>combinations<span class="_ _6"> </span>of<span class="_ _13"> </span>condition<span class="_ _13"> </span>codes<span class="_ _13"> </span>they<span class="_ _6"> </span>consider,<span class="_ _13"> </span>as<span class="_ _13"> </span>indicated<span class="_ _6"> </span>by<span class="_ _13"> </span>the<span class="_ _13"> </span>different</div><div class="t m5 x1d h26 y2470 ff7 fs19 fc1 sc0 ls0 ws0">sufﬁxes<span class="_ _13"> </span>for<span class="_"> </span>the<span class="_ _13"> </span>instruction<span class="_"> </span>names<span class="_ _3"></span>.<span class="_"> </span>It<span class="_ _13"> </span>is<span class="_"> </span>important<span class="_ _13"> </span>to<span class="_ _13"> </span>recognize<span class="_"> </span>that<span class="_ _13"> </span>the<span class="_"> </span>sufﬁxes<span class="_ _13"> </span>for</div><div class="t m5 x1d h26 y2471 ff7 fs19 fc1 sc0 ls0 ws0">these<span class="_ _13"> </span>instructions<span class="_ _13"> </span>denote<span class="_ _13"> </span>different<span class="_ _13"> </span>conditions<span class="_ _13"> </span>and<span class="_ _13"> </span>not<span class="_"> </span>different<span class="_ _13"> </span>operand<span class="_ _13"> </span>sizes<span class="_ _3"></span>.<span class="_ _13"> </span>F<span class="_ _1"></span>or</div><div class="t m5 x1d h26 y2472 ff7 fs19 fc1 sc0 ls0 ws0">example<span class="_ _1"></span>,<span class="_ _16"> </span>instructions<span class="_ _16"> </span><span class="ffd">setl<span class="_ _11"> </span></span>and<span class="_ _16"> </span><span class="ffd">setb<span class="_ _11"> </span></span>denote<span class="_ _16"> </span>“set<span class="_ _11"> </span>less”<span class="_ _11"> </span>and<span class="_ _16"> </span>“set<span class="_ _11"> </span>below<span class="_ _3"></span>,<span class="_ _1"></span>”<span class="_ _16"> </span>not<span class="_ _16"> </span>“set</div><div class="t m5 x1d h26 y2473 ff7 fs19 fc1 sc0 ls0 ws0">long<span class="_"> </span>word”<span class="_"> </span>or<span class="_"> </span>“set<span class="_"> </span>byte<span class="_ _1"></span>.<span class="_ _1"></span>”</div><div class="t m5 x29 h26 y2474 ff7 fs19 fc1 sc0 ls0 ws0">A<span class="_ _13"> </span><span class="ff9">set<span class="_ _6"> </span></span>instruction<span class="_ _13"> </span>has<span class="_ _13"> </span>either<span class="_ _13"> </span>one<span class="_ _6"> </span>of<span class="_ _13"> </span>the<span class="_ _13"> </span>low-order<span class="_ _6"> </span>single-byte<span class="_ _13"> </span>register<span class="_ _13"> </span>elements</div><div class="t m5 x1d h26 y2475 ff7 fs19 fc1 sc0 ls0 ws0">(F<span class="_ _1"></span>igure<span class="_ _13"> </span>3.2)<span class="_ _13"> </span>or<span class="_ _13"> </span>a<span class="_ _13"> </span>single-byte<span class="_ _13"> </span>memory<span class="_ _6"> </span>location<span class="_ _13"> </span>as<span class="_ _13"> </span>its<span class="_ _13"> </span>destination,<span class="_ _13"> </span>setting<span class="_ _13"> </span>this<span class="_ _6"> </span>byte<span class="_ _13"> </span>to</div><div class="t m5 x1d h26 y2476 ff7 fs19 fc1 sc0 ls0 ws0">either<span class="_ _13"> </span>0<span class="_ _6"> </span>or<span class="_ _13"> </span>1.<span class="_ _6"> </span>T<span class="_ _7"></span>o<span class="_ _13"> </span>generate<span class="_ _6"> </span>a<span class="_ _13"> </span>32-bit<span class="_ _13"> </span>or<span class="_ _6"> </span>64-bit<span class="_ _13"> </span>result,<span class="_ _6"> </span>we<span class="_ _13"> </span>must<span class="_ _6"> </span>also<span class="_ _13"> </span>clear<span class="_ _6"> </span>the<span class="_ _13"> </span>high-order</div><div class="t m5 x1d h26 y2477 ff7 fs19 fc1 sc0 ls0 ws0">bits<span class="_ _1"></span>.<span class="_ _16"> </span>A<span class="_ _11"> </span>typical<span class="_ _16"> </span>instruction<span class="_ _16"> </span>sequence<span class="_ _11"> </span>to<span class="_ _16"> </span>compute<span class="_ _16"> </span>the<span class="_ _11"> </span>C<span class="_ _16"> </span>expression<span class="_ _16"> </span><span class="ffd ls4b">a&lt;b<span class="_ _49"></span><span class="ff7 ls0">,<span class="_ _11"> </span>where<span class="_ _16"> </span><span class="ffd">a</span></span></span></div><div class="t m5 x1d h26 y2478 ff7 fs19 fc1 sc0 ls0 ws0">and<span class="_"> </span><span class="ffd">b<span class="_ _10"> </span></span>are<span class="_"> </span>both<span class="_"> </span>of<span class="_"> </span>type<span class="_"> </span><span class="ffd">long</span>,<span class="_"> </span>proceeds<span class="_"> </span>as<span class="_"> </span>follows:</div></div><div class="pi" data-data='{"ctm":[2.000000,0.000000,0.000000,2.000000,0.000000,0.000000]}'></div></div>
