<div id="pf177" class="pf w2 h11" data-page-no="177"><div class="pc pc177 w2 h11"><img class="bi x0 y0 w1 h1" alt="" src="csapp/bg177.png"/><div class="t m5 x14 h28 y9b ffe fs1e fc2 sc0 ls0 ws0">374<span class="_ _1b"> </span><span class="ff6 fs1f">Chapter<span class="_ _10"> </span>3<span class="_ _3d"> </span>Machine-Level<span class="_ _10"> </span>Representation<span class="_ _10"> </span>of<span class="_ _10"> </span>Programs</span></div><div class="t m5 x1d h28 ye7 ffe fs1e fc6 sc0 ls0 ws0">Solution<span class="_"> </span>to<span class="_"> </span>Problem<span class="_"> </span>3.30<span class="_ _e"> </span><span class="fs16">(page<span class="_"> </span>272)</span></div><div class="t m5 x1d h26 y1d16 ff7 fs19 fc1 sc0 ls0 ws0">T<span class="_ _1"></span>his<span class="_ _14"> </span>problem<span class="_ _14"> </span>gives<span class="_ _14"> </span>you<span class="_ _14"> </span>a<span class="_ _14"> </span>chance<span class="_ _14"> </span>to<span class="_ _15"> </span>reason<span class="_ _14"> </span>about<span class="_ _14"> </span>the<span class="_ _14"> </span>control<span class="_ _14"> </span>ﬂow<span class="_ _14"> </span>of<span class="_ _14"> </span>a<span class="_ _14"> </span><span class="ffd">switch</span></div><div class="t m5 x1d h26 y1d17 ff7 fs19 fc1 sc0 ls0 ws0">statement.<span class="_ _16"> </span>Answering<span class="_ _14"> </span>the<span class="_ _16"> </span>questions<span class="_ _14"> </span>requires<span class="_ _16"> </span>you<span class="_ _14"> </span>to<span class="_ _16"> </span>combine<span class="_ _14"> </span>information<span class="_ _16"> </span>from</div><div class="t m5 x1d h26 y1d18 ff7 fs19 fc1 sc0 ls0 ws0">several<span class="_"> </span>places<span class="_"> </span>in<span class="_"> </span>the<span class="_"> </span>assembly<span class="_"> </span>code<span class="_ _1"></span>.</div><div class="t m5 x75 h3d y3482 ff14 fs26 fc6 sc0 ls0 ws0">.</div><div class="t m5 x29 h26 y3483 ff7 fs19 fc1 sc0 ls0 ws0">Line<span class="_"> </span>2<span class="_"> </span>of<span class="_"> </span>the<span class="_"> </span>assembly<span class="_"> </span>code<span class="_"> </span>adds<span class="_"> </span>2<span class="_"> </span>to<span class="_"> </span><span class="ff11">x<span class="_ _16"> </span></span>to<span class="_"> </span>set<span class="_"> </span>the<span class="_"> </span>lower<span class="_"> </span>range<span class="_"> </span>of<span class="_"> </span>the<span class="_"> </span>cases<span class="_"> </span>to</div><div class="t m5 x29 h46 y3484 ff7 fs19 fc1 sc0 ls0 ws0">zero<span class="_ _1"></span>.<span class="_"> </span>That<span class="_"> </span>means<span class="_"> </span>that<span class="_"> </span>the<span class="_"> </span>minimum<span class="_"> </span>case<span class="_"> </span>label<span class="_"> </span>is<span class="_"> </span><span class="ff12">−</span><span class="ls26">2.</span></div><div class="t m5 x75 h3d y3485 ff14 fs26 fc6 sc0 ls0 ws0">.</div><div class="t m5 x29 h26 yed0 ff7 fs19 fc1 sc0 ls0 ws0">Lines<span class="_ _13"> </span>3<span class="_ _13"> </span>and<span class="_ _6"> </span>4<span class="_ _13"> </span>cause<span class="_ _13"> </span>the<span class="_ _13"> </span>program<span class="_ _6"> </span>to<span class="_ _13"> </span>jump<span class="_ _13"> </span>to<span class="_ _13"> </span>the<span class="_ _6"> </span>default<span class="_ _13"> </span>case<span class="_ _13"> </span>when<span class="_ _13"> </span>the<span class="_ _6"> </span>adjusted</div><div class="t m5 x29 h26 y32bc ff7 fs19 fc1 sc0 ls0 ws0">case<span class="_ _21"> </span>value<span class="_ _21"> </span>is<span class="_ _f"> </span>greater<span class="_ _21"> </span>than<span class="_ _f"> </span>8.<span class="_ _21"> </span>This<span class="_ _15"> </span>implies<span class="_ _21"> </span>that<span class="_ _f"> </span>the<span class="_ _21"> </span>maximum<span class="_ _f"> </span>case<span class="_ _21"> </span>label<span class="_ _f"> </span>is</div><div class="t m5 x29 h46 y3486 ff12 fs19 fc1 sc0 ls0 ws0">−<span class="ff7">2<span class="_"> </span></span>+<span class="_ _13"></span><span class="ff7">8<span class="_ _13"> </span></span>=<span class="_ _10"> </span><span class="ff7 lsff">6.</span></div><div class="t m5 x75 h3d y3487 ff14 fs26 fc6 sc0 ls0 ws0">.</div><div class="t m5 x29 h26 y3488 ff7 fs19 fc1 sc0 ls0 ws0">In<span class="_"> </span>the<span class="_ _11"> </span>jump<span class="_ _11"> </span>table,<span class="_"> </span>we<span class="_ _11"> </span>see<span class="_ _11"> </span>that<span class="_ _11"> </span>the<span class="_ _11"> </span>entry<span class="_ _11"> </span>on<span class="_"> </span>lines<span class="_ _11"> </span>6<span class="_ _11"> </span>(case<span class="_ _11"> </span>value<span class="_ _11"> </span>2)<span class="_ _11"> </span>and<span class="_ _11"> </span>9<span class="_ _11"> </span>(case</div><div class="t m5 x29 h26 y3489 ff7 fs19 fc1 sc0 ls0 ws0">value<span class="_ _16"> </span>5)<span class="_ _16"> </span>have<span class="_ _14"> </span>the<span class="_ _16"> </span>same<span class="_ _14"> </span>destination<span class="_ _16"> </span>(<span class="ffd">.L2</span>)<span class="_ _14"> </span>as<span class="_ _16"> </span>the<span class="_ _14"> </span>jump<span class="_ _16"> </span>instruction<span class="_ _14"> </span>on<span class="_ _16"> </span>line<span class="_ _14"> </span>4,</div><div class="t m5 x29 h26 y348a ff7 fs19 fc1 sc0 ls0 ws0">indicating<span class="_ _11"> </span>the<span class="_ _11"> </span>default<span class="_ _11"> </span>case<span class="_ _11"> </span>behavior.<span class="_ _11"> </span>T<span class="_ _1"></span>hus<span class="_ _0"></span>,<span class="_ _11"> </span>case<span class="_ _11"> </span>labels<span class="_ _11"> </span>2<span class="_ _11"> </span>and<span class="_ _16"> </span>5<span class="_"> </span>are<span class="_ _16"> </span>missing<span class="_"> </span>in</div><div class="t m5 x29 h26 y348b ff7 fs19 fc1 sc0 ls0 ws0">the<span class="_"> </span><span class="ffd">switch<span class="_ _10"> </span></span>statement<span class="_"> </span>body<span class="_ _3"></span>.</div><div class="t m5 x75 h3d y348c ff14 fs26 fc6 sc0 ls0 ws0">.</div><div class="t m5 x29 h26 y32c7 ff7 fs19 fc1 sc0 ls0 ws0">In<span class="_ _14"> </span>the<span class="_ _14"> </span>jump<span class="_ _16"> </span>table,<span class="_ _14"> </span>we<span class="_ _14"> </span>see<span class="_ _14"> </span>that<span class="_ _14"> </span>the<span class="_ _14"> </span>entries<span class="_ _14"> </span>on<span class="_ _14"> </span>lines<span class="_ _16"> </span>3<span class="_ _14"> </span>and<span class="_ _14"> </span>10<span class="_ _14"> </span>have<span class="_ _14"> </span>the<span class="_ _14"> </span>same</div><div class="t m5 x29 h46 y348d ff7 fs19 fc1 sc0 ls0 ws0">destination.<span class="_"> </span>T<span class="_ _1"></span>hese<span class="_"> </span>correspond<span class="_"> </span>to<span class="_"> </span>cases<span class="_"> </span><span class="ff12">−</span>1<span class="_ _13"> </span>and<span class="_"> </span>6.</div><div class="t m5 x75 h3d y348e ff14 fs26 fc6 sc0 ls0 ws0">.</div><div class="t m5 x29 h26 y348f ff7 fs19 fc1 sc0 ls0 ws0">In<span class="_ _15"> </span>the<span class="_ _15"> </span>jump<span class="_ _15"> </span>table<span class="_ _1"></span>,<span class="_ _21"> </span>we<span class="_ _15"> </span>see<span class="_ _15"> </span>that<span class="_ _15"> </span>the<span class="_ _15"> </span>entries<span class="_ _15"> </span>on<span class="_ _15"> </span>lines<span class="_ _15"> </span>5<span class="_ _15"> </span>and<span class="_ _15"> </span>7<span class="_ _15"> </span>have<span class="_ _15"> </span>the<span class="_ _15"> </span>same</div><div class="t m5 x29 h26 y3490 ff7 fs19 fc1 sc0 ls0 ws0">destination.<span class="_"> </span>T<span class="_ _1"></span>hese<span class="_"> </span>correspond<span class="_"> </span>to<span class="_"> </span>cases<span class="_"> </span>1<span class="_"> </span>and<span class="_"> </span>3.</div><div class="t m5 x29 h26 y3491 ff7 fs19 fc1 sc0 ls0 ws0">F<span class="_ _1"></span>rom<span class="_"> </span>this<span class="_"> </span>reasoning,<span class="_"> </span>we<span class="_"> </span>draw<span class="_"> </span>the<span class="_"> </span>following<span class="_"> </span>conclusions:</div><div class="t m5 x124 h46 y3492 ff7 fs19 fc1 sc0 ls0 ws0">A.<span class="_ _1f"> </span>T<span class="_ _1"></span>he<span class="_"> </span>case<span class="_"> </span>labels<span class="_"> </span>in<span class="_"> </span>the<span class="_"> </span><span class="ffd">switch<span class="_ _11"> </span></span>statement<span class="_"> </span>body<span class="_"> </span>have<span class="_"> </span>values<span class="_"> </span><span class="ff12">−</span><span class="ls26">2,<span class="_"> </span></span><span class="ff12">−</span>1<span class="_ _3"></span>,<span class="_ _11"> </span>0,<span class="_"> </span>1,<span class="_"> </span>3,<span class="_"> </span>4,</div><div class="t m5 x4f h26 y3493 ff7 fs19 fc1 sc0 ls0 ws0">and<span class="_"> </span>6.</div><div class="t m5 x124 h46 y3494 ff7 fs19 fc1 sc0 ls0 ws0">B<span class="_ _3"></span>.<span class="_ _1d"> </span>The<span class="_"> </span>case<span class="_"> </span>with<span class="_"> </span>destination<span class="_"> </span><span class="ffd">.L5<span class="_ _13"> </span></span>has<span class="_"> </span>labels<span class="_"> </span><span class="ff12">−</span>1<span class="_"> </span>and<span class="_"> </span>6.</div><div class="t m5 x124 h26 y3495 ff7 fs19 fc1 sc0 ls0 ws0">C.<span class="_ _25"> </span>T<span class="_ _1"></span>he<span class="_"> </span>case<span class="_"> </span>with<span class="_"> </span>destination<span class="_"> </span><span class="ffd">.L7<span class="_ _10"> </span></span>has<span class="_"> </span>labels<span class="_"> </span>1<span class="_"> </span>and<span class="_"> </span>3.</div><div class="t m5 x1d h28 y2969 ffe fs1e fc6 sc0 ls0 ws0">Solution<span class="_"> </span>to<span class="_"> </span>Problem<span class="_"> </span>3.31<span class="_ _e"> </span><span class="fs16">(page<span class="_"> </span>273)</span></div><div class="t m5 x1d h26 y322b ff7 fs19 fc1 sc0 ls0 ws0">T<span class="_ _1"></span>he<span class="_ _15"> </span>key<span class="_ _14"> </span>to<span class="_ _14"> </span>reverse<span class="_ _15"> </span>engineering<span class="_ _14"> </span>compiled<span class="_ _14"> </span><span class="ffd">switch<span class="_ _15"> </span></span>statements<span class="_ _14"> </span>is<span class="_ _14"> </span>to<span class="_ _15"> </span>combine<span class="_ _14"> </span>the</div><div class="t m5 x1d h26 y3496 ff7 fs19 fc1 sc0 ls0 ws0">information<span class="_"> </span>from<span class="_ _11"> </span>the<span class="_ _11"> </span>assembly<span class="_ _11"> </span>code<span class="_ _11"> </span>and<span class="_ _11"> </span>the<span class="_ _11"> </span>jump<span class="_ _11"> </span>table<span class="_ _11"> </span>to<span class="_ _11"> </span>sort<span class="_ _11"> </span>out<span class="_ _11"> </span>the<span class="_ _11"> </span>different</div><div class="t m5 x1d h26 y3497 ff7 fs19 fc1 sc0 ls0 ws0">cases<span class="_ _1"></span>.<span class="_ _13"> </span>W<span class="_ _3"></span>e<span class="_ _13"> </span>can<span class="_ _13"> </span>see<span class="_ _13"> </span>from<span class="_"> </span>the<span class="_ _13"> </span><span class="ffd">ja<span class="_ _13"> </span></span>instruction<span class="_ _13"> </span>(line<span class="_ _13"> </span>3)<span class="_ _13"> </span>that<span class="_ _13"> </span>the<span class="_ _13"> </span>code<span class="_ _13"> </span>for<span class="_ _13"> </span>the<span class="_ _13"> </span>default<span class="_ _13"> </span>case</div><div class="t m5 x1d h26 y3498 ff7 fs19 fc1 sc0 ls0 ws0">has<span class="_ _11"> </span>label<span class="_ _11"> </span><span class="ffd">.L2</span>.<span class="_ _11"> </span>W<span class="_ _1"></span>e<span class="_ _11"> </span>can<span class="_ _11"> </span>see<span class="_ _16"> </span>that<span class="_ _11"> </span>the<span class="_ _11"> </span>only<span class="_ _11"> </span>other<span class="_ _11"> </span>repeated<span class="_ _16"> </span>label<span class="_"> </span>in<span class="_ _16"> </span>the<span class="_ _11"> </span>jump<span class="_ _11"> </span>table<span class="_ _11"> </span>is</div><div class="t m5 x1d h26 y3499 ffd fs19 fc1 sc0 ls0 ws0">.L5<span class="ff7">,<span class="_"> </span>and<span class="_"> </span>so<span class="_ _13"> </span>this<span class="_"> </span>must<span class="_"> </span>be<span class="_"> </span>the<span class="_"> </span>code<span class="_ _13"> </span>for<span class="_"> </span>the<span class="_"> </span>cases<span class="_"> </span>C<span class="_ _13"> </span>and<span class="_"> </span>D<span class="_ _3"></span>.<span class="_"> </span>W<span class="_ _3"></span>e<span class="_"> </span>can<span class="_"> </span>see<span class="_"> </span>that<span class="_"> </span>the<span class="_ _13"> </span>code</span></div><div class="t m5 x1d h26 y349a ff7 fs19 fc1 sc0 ls0 ws0">falls<span class="_ _16"> </span>through<span class="_ _14"> </span>at<span class="_ _16"> </span>line<span class="_ _14"> </span>8,<span class="_ _14"> </span>and<span class="_ _16"> </span>so<span class="_ _14"> </span>label<span class="_ _16"> </span><span class="ffd">.L7<span class="_ _16"> </span></span>must<span class="_ _14"> </span>match<span class="_ _16"> </span>case<span class="_ _14"> </span>A<span class="_ _16"> </span>and<span class="_ _14"> </span>label<span class="_ _16"> </span><span class="ffd">.L3<span class="_ _14"> </span></span>must</div><div class="t m5 x1d h26 y349b ff7 fs19 fc1 sc0 ls0 ws0">match<span class="_"> </span>case<span class="_"> </span>B<span class="_ _3"></span>.<span class="_"> </span>T<span class="_ _0"></span>hat<span class="_"> </span>leaves<span class="_"> </span>only<span class="_"> </span>label<span class="_"> </span><span class="ffd">.L6<span class="_ _10"> </span></span>to<span class="_"> </span>match<span class="_"> </span>case<span class="_"> </span>E.</div><div class="t m5 x29 h26 y349c ff7 fs19 fc1 sc0 ls0 ws0">T<span class="_ _1"></span>he<span class="_"> </span>original<span class="_"> </span>C<span class="_"> </span>code<span class="_"> </span>is<span class="_"> </span>as<span class="_"> </span>follows:</div><div class="t m5 x1d h2d y2972 ffd fs1e fc2 sc0 ls0 ws0">void<span class="_ _e"> </span>switcher(long<span class="_ _1f"> </span>a,<span class="_ _1f"> </span>long<span class="_ _e"> </span>b,<span class="_ _1f"> </span>long<span class="_ _e"> </span>c,<span class="_ _1f"> </span>long<span class="_ _1f"> </span>*dest)</div><div class="t m5 x1d h2d y349d ffd fs1e fc2 sc0 ls0 ws0">{</div><div class="t m5 x10c h2d y349e ffd fs1e fc2 sc0 ls0 ws0">long<span class="_ _e"> </span>val;</div><div class="t m5 x10c h2d y349f ffd fs1e fc2 sc0 ls0 ws0">switch(a)<span class="_ _e"> </span>{</div><div class="t m5 x10c h2d y34a0 ffd fs1e fc2 sc0 ls0 ws0">case<span class="_ _e"> </span>5:</div><div class="t m5 x22b h2d y34a1 ffd fs1e fc2 sc0 ls33 ws0">c=b^1<span class="_ _41"></span>5<span class="_ _41"></span>;</div><div class="t m5 x22b h2d y34a2 ffd fs1e fc2 sc0 ls0 ws0">/*<span class="_ _e"> </span>Fall<span class="_ _1f"> </span>through<span class="_ _1f"> </span>*/</div><div class="t m5 x10c h2d y34a3 ffd fs1e fc2 sc0 ls0 ws0">case<span class="_ _e"> </span>0:</div><div class="t m5 x22b h2d y34a4 ffd fs1e fc2 sc0 ls33 ws0">v<span class="_ _41"></span>a<span class="_ _41"></span>l=c+<span class="ls0">112;</span></div><div class="t m5 x22b h2d y34a5 ffd fs1e fc2 sc0 ls0 ws0">break;</div></div><div class="pi" data-data='{"ctm":[2.000000,0.000000,0.000000,2.000000,0.000000,0.000000]}'></div></div>
