<div id="pf2f" class="pf w2 h11" data-page-no="2f"><div class="pc pc2f w2 h11"><img class="bi x0 y0 w1 h1" alt="" src="csapp/bg2f.png"/><div class="t m5 x14 h28 y9b ffe fs1e fc2 sc0 ls0 ws0">46<span class="_ _1b"> </span><span class="ff6 fs1f">Chapter<span class="_ _10"> </span>1<span class="_ _3d"> </span>A<span class="_ _10"> </span>T<span class="_ _3"></span>our<span class="_ _10"> </span>of<span class="_ _10"> </span>Computer<span class="_ _10"> </span>Systems</span></div><div class="t m5 x1d h26 ye7 ff7 fs19 fc2 sc0 ls0 ws0">in<span class="_"> </span>strict<span class="_"> </span>sequence<span class="_ _1"></span>,<span class="_"> </span>and<span class="_"> </span>executing<span class="_"> </span>a<span class="_"> </span>single<span class="_"> </span>instruction<span class="_"> </span>involves<span class="_"> </span>performing<span class="_"> </span>a<span class="_"> </span>series</div><div class="t m5 x1d h26 y2a7 ff7 fs19 fc2 sc0 ls0 ws0">of<span class="_ _21"> </span>steps<span class="_ _1"></span>.<span class="_ _f"> </span>T<span class="_ _1"></span>he<span class="_ _f"> </span>processor<span class="_ _f"> </span>reads<span class="_ _21"> </span>the<span class="_ _f"> </span>instruction<span class="_ _21"> </span>from<span class="_ _f"> </span>memory<span class="_ _21"> </span>pointed<span class="_ _f"> </span>at<span class="_ _f"> </span>by<span class="_ _21"> </span>the</div><div class="t m5 x1d h26 y2a8 ff7 fs19 fc2 sc0 ls0 ws0">program<span class="_ _13"> </span>counter<span class="_ _6"> </span>(PC),<span class="_ _13"> </span>interprets<span class="_ _13"> </span>the<span class="_ _6"> </span>bits<span class="_ _13"> </span>in<span class="_ _13"> </span>the<span class="_ _6"> </span>instruction,<span class="_ _13"> </span>performs<span class="_ _13"> </span>some<span class="_ _6"> </span>simple</div><div class="t m5 x1d h26 y2f7 ff7 fs19 fc2 sc0 ls0 ws0">operation<span class="_ _13"> </span>dictated<span class="_ _13"> </span>by<span class="_ _13"> </span>the<span class="_ _6"> </span>instruction,<span class="_"> </span>and<span class="_ _6"> </span>then<span class="_ _13"> </span>updates<span class="_ _13"> </span>the<span class="_ _13"> </span>PC<span class="_ _13"> </span>to<span class="_ _13"> </span>point<span class="_ _6"> </span>to<span class="_ _13"> </span>the<span class="_ _13"> </span>next</div><div class="t m5 x1d h26 y2f8 ff7 fs19 fc2 sc0 ls0 ws0">instruction,<span class="_ _13"> </span>which<span class="_ _13"> </span>may<span class="_ _6"> </span>or<span class="_ _13"> </span>may<span class="_ _6"> </span>not<span class="_ _13"> </span>be<span class="_ _13"> </span>contiguous<span class="_ _6"> </span>in<span class="_ _13"> </span>memory<span class="_ _13"> </span>to<span class="_ _6"> </span>the<span class="_ _13"> </span>instruction<span class="_ _13"> </span>that</div><div class="t m5 x1d h26 y2f9 ff7 fs19 fc2 sc0 ls0 ws0">was<span class="_"> </span>just<span class="_"> </span>executed.</div><div class="t m5 x29 h26 y2fa ff7 fs19 fc2 sc0 ls0 ws0">T<span class="_ _1"></span>here<span class="_ _15"> </span>are<span class="_ _15"> </span>only<span class="_ _15"> </span>a<span class="_ _14"> </span>few<span class="_ _15"> </span>of<span class="_ _15"> </span>these<span class="_ _15"> </span>simple<span class="_ _15"> </span>operations<span class="_ _1"></span>,<span class="_ _15"> </span>and<span class="_ _15"> </span>they<span class="_ _15"> </span>revolve<span class="_ _15"> </span>around</div><div class="t m5 x1d h26 y2fb ff7 fs19 fc2 sc0 ls0 ws0">main<span class="_ _11"> </span>memory<span class="_ _3"></span>,<span class="_ _16"> </span>the<span class="_"> </span><span class="ffa">register<span class="_ _16"> </span>ﬁle</span>,<span class="_ _11"> </span>and<span class="_ _16"> </span>the<span class="_ _11"> </span><span class="ffa">arithmetic/logic<span class="_ _11"> </span>unit<span class="_ _14"> </span></span>(ALU).<span class="_ _11"> </span>The<span class="_"> </span>register</div><div class="t m5 x1d h26 y2fc ff7 fs19 fc2 sc0 ls0 ws0">ﬁle<span class="_ _13"> </span>is<span class="_ _6"> </span>a<span class="_ _13"> </span>small<span class="_ _6"> </span>storage<span class="_ _13"> </span>device<span class="_ _6"> </span>that<span class="_ _13"> </span>consists<span class="_ _6"> </span>of<span class="_ _13"> </span>a<span class="_ _6"> </span>collection<span class="_ _13"> </span>of<span class="_ _6"> </span>word-size<span class="_ _13"> </span>registers<span class="_ _1"></span>,<span class="_ _13"> </span>each</div><div class="t m5 x1d h26 y2fd ff7 fs19 fc2 sc0 ls0 ws0">with<span class="_ _13"> </span>its<span class="_ _13"> </span>own<span class="_ _13"> </span>unique<span class="_ _13"> </span>name<span class="_ _1"></span>.<span class="_ _13"> </span>The<span class="_ _6"> </span>ALU<span class="_ _13"> </span>computes<span class="_ _13"> </span>new<span class="_ _13"> </span>data<span class="_ _13"> </span>and<span class="_ _13"> </span>address<span class="_ _13"> </span>values<span class="_ _1"></span>.<span class="_ _13"> </span>Here</div><div class="t m5 x1d h26 y2fe ff7 fs19 fc2 sc0 ls0 ws0">are<span class="_"> </span>some<span class="_ _11"> </span>examples<span class="_"> </span>of<span class="_ _11"> </span>the<span class="_"> </span>simple<span class="_ _11"> </span>operations<span class="_"> </span>that<span class="_"> </span>the<span class="_ _11"> </span>CPU<span class="_"> </span>might<span class="_ _11"> </span>carry<span class="_"> </span>out<span class="_ _11"> </span>at<span class="_"> </span>the</div><div class="t m5 x1d h26 y2ff ff7 fs19 fc2 sc0 ls0 ws0">request<span class="_"> </span>of<span class="_"> </span>an<span class="_"> </span>instruction:</div><div class="t m5 x75 h3d y5e5 ff14 fs26 fc6 sc0 ls0 ws0">.</div><div class="t m5 x29 h26 y5e6 ffa fs19 fc1 sc0 ls0 ws0">Load:<span class="_"> </span><span class="ff7">Copy<span class="_ _11"> </span>a<span class="_"> </span>byte<span class="_"> </span>or<span class="_ _11"> </span>a<span class="_"> </span>word<span class="_ _11"> </span>from<span class="_"> </span>main<span class="_"> </span>memory<span class="_ _11"> </span>into<span class="_"> </span>a<span class="_ _11"> </span>register,<span class="_"> </span>overwriting</span></div><div class="t m5 x29 h26 y5e7 ff7 fs19 fc1 sc0 ls0 ws0">the<span class="_"> </span>previous<span class="_"> </span>contents<span class="_"> </span>of<span class="_"> </span>the<span class="_"> </span>register.</div><div class="t m5 x75 h3d y5e8 ff14 fs26 fc6 sc0 ls0 ws0">.</div><div class="t m5 x29 h26 y5e9 ffa fs19 fc1 sc0 ls0 ws0">Store:<span class="_ _16"> </span><span class="ff7">Copy<span class="_ _11"> </span>a<span class="_ _16"> </span>byte<span class="_ _16"> </span>or<span class="_ _16"> </span>a<span class="_ _11"> </span>word<span class="_ _16"> </span>from<span class="_ _16"> </span>a<span class="_ _16"> </span>register<span class="_ _11"> </span>to<span class="_ _16"> </span>a<span class="_ _16"> </span>location<span class="_ _16"> </span>in<span class="_ _11"> </span>main<span class="_ _16"> </span>memory<span class="_ _3"></span>,</span></div><div class="t m5 x29 h26 y5ea ff7 fs19 fc1 sc0 ls0 ws0">overwriting<span class="_"> </span>the<span class="_"> </span>previous<span class="_"> </span>contents<span class="_"> </span>of<span class="_"> </span>that<span class="_"> </span>location.</div><div class="t m5 x75 h3d y5eb ff14 fs26 fc6 sc0 ls0 ws0">.</div><div class="t m5 x29 h26 y5ec ffa fs19 fc1 sc0 ls0 ws0">Operate:<span class="_ _6"> </span><span class="ff7">Copy<span class="_ _6"> </span>the<span class="_ _13"> </span>contents<span class="_ _a"> </span>of<span class="_ _6"> </span>two<span class="_ _13"> </span>registers<span class="_ _a"> </span>to<span class="_ _6"> </span>the<span class="_ _13"> </span>ALU<span class="_ _7"></span>,<span class="_ _13"> </span>perform<span class="_ _a"> </span>an<span class="_ _6"> </span>arithmetic</span></div><div class="t m5 x29 h26 y5ed ff7 fs19 fc1 sc0 ls0 ws0">operation<span class="_"> </span>on<span class="_ _13"> </span>the<span class="_"> </span>two<span class="_ _13"> </span>words<span class="_ _0"></span>,<span class="_"> </span>and<span class="_ _13"> </span>store<span class="_"> </span>the<span class="_"> </span>result<span class="_ _13"> </span>in<span class="_"> </span>a<span class="_ _13"> </span>register,<span class="_"> </span>overwriting<span class="_ _13"> </span>the</div><div class="t m5 x29 h26 y5ee ff7 fs19 fc1 sc0 ls0 ws0">previous<span class="_"> </span>contents<span class="_"> </span>of<span class="_"> </span>that<span class="_"> </span>register.</div><div class="t m5 x75 h3d y5ef ff14 fs26 fc6 sc0 ls0 ws0">.</div><div class="t m5 x29 h26 y5f0 ffa fs19 fc1 sc0 ls0 ws0">J<span class="_ _1"></span>ump:<span class="_"> </span><span class="ff7">Extract<span class="_ _11"> </span>a<span class="_ _11"> </span>word<span class="_"> </span>from<span class="_ _11"> </span>the<span class="_"> </span>instruction<span class="_ _11"> </span>itself<span class="_ _11"> </span>and<span class="_"> </span>copy<span class="_ _11"> </span>that<span class="_ _11"> </span>word<span class="_"> </span>into<span class="_ _11"> </span>the</span></div><div class="t m5 x29 h26 y5f1 ff7 fs19 fc1 sc0 ls0 ws0">program<span class="_"> </span>counter<span class="_"> </span>(PC),<span class="_"> </span>overwriting<span class="_"> </span>the<span class="_"> </span>previous<span class="_"> </span>value<span class="_"> </span>of<span class="_"> </span>the<span class="_"> </span>PC.</div><div class="t m5 x29 h26 y5f2 ff7 fs19 fc1 sc0 ls0 ws0">W<span class="_ _3"></span>e<span class="_ _21"> </span>say<span class="_ _21"> </span>that<span class="_ _21"> </span>a<span class="_ _21"> </span>processor<span class="_ _21"> </span>appears<span class="_ _21"> </span>to<span class="_ _21"> </span>be<span class="_ _15"> </span>a<span class="_ _21"> </span>simple<span class="_ _21"> </span>implementation<span class="_ _21"> </span>of<span class="_ _21"> </span>its<span class="_ _21"> </span>in-</div><div class="t m5 x1d h26 y5f3 ff7 fs19 fc1 sc0 ls0 ws0">struction<span class="_ _14"> </span>set<span class="_ _14"> </span>architecture<span class="_ _0"></span>,<span class="_ _15"> </span>but<span class="_ _14"> </span>in<span class="_ _14"> </span>fact<span class="_ _14"> </span>modern<span class="_ _14"> </span>processors<span class="_ _14"> </span>use<span class="_ _14"> </span>far<span class="_ _15"> </span>more<span class="_ _14"> </span>complex</div><div class="t m5 x1d h26 y5f4 ff7 fs19 fc1 sc0 ls0 ws0">mechanisms<span class="_ _14"> </span>to<span class="_ _14"> </span>speed<span class="_ _14"> </span>up<span class="_ _14"> </span>program<span class="_ _15"> </span>execution.<span class="_ _14"> </span>T<span class="_ _1"></span>hus<span class="_ _0"></span>,<span class="_ _15"> </span>we<span class="_ _14"> </span>can<span class="_ _14"> </span>distinguish<span class="_ _14"> </span>the<span class="_ _14"> </span>pro-</div><div class="t m5 x1d h26 y5f5 ff7 fs19 fc1 sc0 ls0 ws0">cessor’s<span class="_ _16"> </span>instruction<span class="_ _16"> </span>set<span class="_ _16"> </span>architecture<span class="_ _0"></span>,<span class="_ _14"> </span>describing<span class="_ _16"> </span>the<span class="_ _16"> </span>effect<span class="_ _14"> </span>of<span class="_ _16"> </span>each<span class="_ _16"> </span>machine-code</div><div class="t m5 x1d h26 y5f6 ff7 fs19 fc1 sc0 ls0 ws0">instruction,<span class="_ _14"> </span>from<span class="_ _14"> </span>its<span class="_ _14"> </span><span class="ffa">microarchitecture</span>,<span class="_ _15"> </span>describing<span class="_ _14"> </span>how<span class="_ _14"> </span>the<span class="_ _14"> </span>processor<span class="_ _16"> </span>is<span class="_ _14"> </span>actually</div><div class="t m5 x1d h26 y5f7 ff7 fs19 fc1 sc0 ls0 ws0">implemented.<span class="_ _16"> </span>When<span class="_ _16"> </span>we<span class="_ _14"> </span>study<span class="_ _16"> </span>machine<span class="_ _14"> </span>code<span class="_ _16"> </span>in<span class="_ _14"> </span>Chapter<span class="_ _16"> </span>3,<span class="_ _14"> </span>we<span class="_ _14"> </span>will<span class="_ _16"> </span>consider<span class="_ _14"> </span>the</div><div class="t m5 x1d h26 y5f8 ff7 fs19 fc1 sc0 ls0 ws0">abstraction<span class="_"> </span>provided<span class="_"> </span>by<span class="_"> </span>the<span class="_"> </span>machine’s<span class="_"> </span>instruction<span class="_"> </span>set<span class="_"> </span>architecture<span class="_ _3"></span>.<span class="_"> </span>Chapter<span class="_"> </span>4<span class="_"> </span>has</div><div class="t m5 x1d h26 y5f9 ff7 fs19 fc1 sc0 ls0 ws0">more<span class="_"> </span>to<span class="_ _13"> </span>say<span class="_"> </span>about<span class="_ _13"> </span>how<span class="_"> </span>processors<span class="_"> </span>are<span class="_ _13"> </span>actually<span class="_"> </span>implemented.<span class="_"> </span>Chapter<span class="_ _13"> </span>5<span class="_"> </span>describes</div><div class="t m5 x1d h26 y5fa ff7 fs19 fc1 sc0 ls0 ws0">a<span class="_ _11"> </span>model<span class="_ _11"> </span>of<span class="_ _11"> </span>how<span class="_ _11"> </span>modern<span class="_ _11"> </span>processors<span class="_ _11"> </span>work<span class="_ _11"> </span>that<span class="_ _11"> </span>enables<span class="_ _11"> </span>predicting<span class="_ _16"> </span>and<span class="_"> </span>optimizing</div><div class="t m5 x1d h26 y5fb ff7 fs19 fc1 sc0 ls0 ws0">the<span class="_"> </span>performance<span class="_"> </span>of<span class="_"> </span>machine-language<span class="_"> </span>programs<span class="_ _1"></span>.</div><div class="t m5 x1d h41 y5fc ffe fs29 fc1 sc0 ls0 ws0">1.4.2</div><div class="t m5 x8c h43 y5fd ffe fs19 fc1 sc0 ls0 ws0">Running<span class="_"> </span>the<span class="_"> </span><span class="ffd fs1c">hello<span class="_ _11"> </span></span>Program</div><div class="t m5 x1d h26 y5fe ff7 fs19 fc1 sc0 ls0 ws0">Given<span class="_ _13"> </span>this<span class="_ _13"> </span>simple<span class="_ _13"> </span>view<span class="_ _13"> </span>of<span class="_ _13"> </span>a<span class="_ _13"> </span>system’s<span class="_ _6"> </span>hardware<span class="_ _13"> </span>organization<span class="_ _13"> </span>and<span class="_ _13"> </span>operation,<span class="_"> </span>we<span class="_ _13"> </span>can</div><div class="t m5 x1d h26 y5ff ff7 fs19 fc1 sc0 ls0 ws0">begin<span class="_"> </span>to<span class="_ _11"> </span>understand<span class="_"> </span>what<span class="_ _11"> </span>happens<span class="_"> </span>when<span class="_ _11"> </span>we<span class="_"> </span>run<span class="_ _11"> </span>our<span class="_"> </span>example<span class="_ _11"> </span>program.<span class="_"> </span>W<span class="_ _1"></span>e<span class="_"> </span>must</div><div class="t m5 x1d h26 y600 ff7 fs19 fc1 sc0 ls0 ws0">omit<span class="_"> </span>a<span class="_ _13"> </span>lot<span class="_"> </span>of<span class="_"> </span>details<span class="_"> </span>here<span class="_ _13"> </span>that<span class="_"> </span>will<span class="_"> </span>be<span class="_ _13"> </span>ﬁlled<span class="_"> </span>in<span class="_"> </span>later<span class="_ _1"></span>,<span class="_"> </span>but<span class="_"> </span>for<span class="_"> </span>now<span class="_ _13"> </span>we<span class="_"> </span>will<span class="_"> </span>be<span class="_ _13"> </span>content</div><div class="t m5 x1d h26 y601 ff7 fs19 fc1 sc0 ls0 ws0">with<span class="_"> </span>the<span class="_"> </span>big<span class="_"> </span>picture<span class="_ _1"></span>.</div><div class="t m5 x29 h26 y602 ff7 fs19 fc1 sc0 ls0 ws0">Initially<span class="_ _3"></span>,<span class="_ _13"> </span>the<span class="_ _13"> </span>shell<span class="_ _13"> </span>program<span class="_ _13"> </span>is<span class="_ _13"> </span>executing<span class="_ _13"> </span>its<span class="_ _13"> </span>instructions<span class="_ _3"></span>,<span class="_"> </span>waiting<span class="_ _6"> </span>for<span class="_ _13"> </span>us<span class="_ _13"> </span>to<span class="_ _13"> </span>type<span class="_ _13"> </span>a</div><div class="t m5 x1d h26 y603 ff7 fs19 fc1 sc0 ls0 ws0">command.<span class="_"> </span>As<span class="_ _13"> </span>we<span class="_"> </span>type<span class="_ _13"> </span>the<span class="_"> </span>characters<span class="_ _13"> </span><span class="ffd">./hello<span class="_ _10"> </span></span>at<span class="_ _13"> </span>the<span class="_"> </span>keyboard,<span class="_"> </span>the<span class="_ _13"> </span>shell<span class="_"> </span>program</div><div class="t m5 x1d h26 y604 ff7 fs19 fc1 sc0 ls0 ws0">reads<span class="_ _13"> </span>each<span class="_ _13"> </span>one<span class="_ _13"> </span>into<span class="_ _13"> </span>a<span class="_ _13"> </span>register<span class="_ _13"> </span>and<span class="_ _13"> </span>then<span class="_ _13"> </span>stores<span class="_ _13"> </span>it<span class="_ _13"> </span>in<span class="_ _13"> </span>memory<span class="_ _3"></span>,<span class="_ _13"> </span>as<span class="_ _13"> </span>shown<span class="_ _13"> </span>in<span class="_ _13"> </span>Figure<span class="_ _13"> </span>1.5.</div><div class="t m5 x29 h26 y605 ff7 fs19 fc1 sc0 ls0 ws0">When<span class="_ _11"> </span>we<span class="_ _16"> </span>hit<span class="_ _16"> </span>the<span class="_ _16"> </span><span class="ffd">enter<span class="_ _16"> </span></span>key<span class="_ _16"> </span>on<span class="_ _16"> </span>the<span class="_ _16"> </span>keyboard,<span class="_ _14"> </span>the<span class="_ _16"> </span>shell<span class="_ _16"> </span>knows<span class="_ _16"> </span>that<span class="_ _16"> </span>we<span class="_ _16"> </span>have</div><div class="t m5 x1d h26 y606 ff7 fs19 fc1 sc0 ls0 ws0">ﬁnished<span class="_ _16"> </span>typing<span class="_ _16"> </span>the<span class="_ _16"> </span>command.<span class="_ _16"> </span>T<span class="_ _1"></span>he<span class="_ _16"> </span>shell<span class="_ _16"> </span>then<span class="_ _16"> </span>loads<span class="_ _14"> </span>the<span class="_ _16"> </span>executable<span class="_ _16"> </span><span class="ffd">hello<span class="_ _16"> </span></span>ﬁle<span class="_ _16"> </span>by</div><div class="t m5 x1d h26 y607 ff7 fs19 fc1 sc0 ls0 ws0">executing<span class="_ _16"> </span>a<span class="_ _11"> </span>sequence<span class="_ _16"> </span>of<span class="_ _16"> </span>instructions<span class="_ _11"> </span>that<span class="_ _16"> </span>copies<span class="_ _16"> </span>the<span class="_ _16"> </span>code<span class="_ _11"> </span>and<span class="_ _16"> </span>data<span class="_ _16"> </span>in<span class="_ _11"> </span>the<span class="_ _16"> </span><span class="ffd">hello</span></div></div><div class="pi" data-data='{"ctm":[2.000000,0.000000,0.000000,2.000000,0.000000,0.000000]}'></div></div>
