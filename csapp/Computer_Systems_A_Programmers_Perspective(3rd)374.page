<div id="pf176" class="pf w2 h11" data-page-no="176"><div class="pc pc176 w2 h11"><img class="bi x0 y0 w1 h1" alt="" src="csapp/bg176.png"/><div class="t m5 x107 h28 y9b ff6 fs1f fc2 sc0 ls0 ws0">Solutions<span class="_ _10"> </span>to<span class="_ _10"> </span>Practice<span class="_ _10"> </span>Problems<span class="_ _1b"> </span><span class="ffe fs1e">373</span></div><div class="t m5 x142 h2d y140c ffd fs1e fc2 sc0 ls0 ws0">for<span class="_ _e"> </span>(i<span class="_ _1f"> </span>=<span class="_ _1f"> </span>64;<span class="_ _e"> </span>i<span class="_ _1f"> </span>!=<span class="_ _e"> </span>0;<span class="_ _1f"> </span>i--)<span class="_ _1f"> </span>{</div><div class="t m5 xc5 h2d y140d ffd fs1e fc2 sc0 ls0 ws0">val<span class="_ _e"> </span>=<span class="_ _1f"> </span>(val<span class="_ _1f"> </span>&lt;&lt;<span class="_ _e"> </span>1)<span class="_ _1f"> </span>|<span class="_ _e"> </span>(x<span class="_ _1f"> </span>&amp;<span class="_ _1f"> </span>0x1);</div><div class="t m5 xc5 h2d y1b95 ffd fs1e fc2 sc0 ls0 ws0">x<span class="_ _e"> </span>&gt;&gt;=<span class="_ _1f"> </span>1;</div><div class="t m5 x142 h2d y2122 ffd fs1e fc2 sc0 ls0 ws0">}</div><div class="t m5 x142 h2d y1b96 ffd fs1e fc2 sc0 ls0 ws0">return<span class="_ _e"> </span>val;</div><div class="t m5 x2d h2d y1b97 ffd fs1e fc2 sc0 ls0 ws0">}</div><div class="t m5 x34 h26 y345e ff7 fs19 fc2 sc0 ls0 ws0">B<span class="_ _3"></span>.<span class="_ _1d"> </span>The<span class="_ _13"> </span>code<span class="_"> </span>was<span class="_ _13"> </span>generated<span class="_"> </span>using<span class="_ _13"> </span>the<span class="_"> </span>guarded-do<span class="_"> </span>transformation,<span class="_ _13"> </span>but<span class="_"> </span>the<span class="_ _13"> </span>com-</div><div class="t m5 x2d h46 y345f ff7 fs19 fc2 sc0 ls0 ws0">piler<span class="_ _13"> </span>detected<span class="_"> </span>that,<span class="_ _13"> </span>since<span class="_"> </span><span class="ff11">i<span class="_ _10"> </span></span>is<span class="_"> </span>initialized<span class="_ _13"> </span>to<span class="_ _13"> </span>64,<span class="_"> </span>it<span class="_ _13"> </span>will<span class="_ _13"> </span>satisfy<span class="_"> </span>the<span class="_ _13"> </span>test<span class="_ _13"> </span><span class="ff11">i<span class="_ _11"> </span><span class="ff12"><span class="_ _2"></span>=<span class="_ _13"> </span></span></span><span class="lsb1">0,<span class="_"> </span>and</span></div><div class="t m5 x2d h26 y3460 ff7 fs19 fc2 sc0 ls0 ws0">therefore<span class="_"> </span>the<span class="_"> </span>initial<span class="_"> </span>test<span class="_"> </span>is<span class="_"> </span>not<span class="_"> </span>required.</div><div class="t m5 x34 h26 y3461 ff7 fs19 fc2 sc0 ls0 ws0">C.<span class="_ _25"> </span>T<span class="_ _1"></span>his<span class="_ _15"> </span>code<span class="_ _21"> </span>reverses<span class="_ _15"> </span>the<span class="_ _15"> </span>bits<span class="_ _21"> </span>in<span class="_ _15"> </span><span class="ffd">x</span>,<span class="_ _f"> </span>creating<span class="_ _15"> </span>a<span class="_ _15"> </span>mirror<span class="_ _21"> </span>image<span class="_ _0"></span>.<span class="_ _15"> </span>It<span class="_ _15"> </span>does<span class="_ _15"> </span>this<span class="_ _21"> </span>by</div><div class="t m5 x2d h26 y3462 ff7 fs19 fc2 sc0 ls0 ws0">shifting<span class="_ _14"> </span>the<span class="_ _15"> </span>bits<span class="_ _15"> </span>of<span class="_ _15"> </span><span class="ffd">x<span class="_ _14"> </span></span>from<span class="_ _15"> </span>left<span class="_ _15"> </span>to<span class="_ _15"> </span>right,<span class="_ _15"> </span>and<span class="_ _15"> </span>then<span class="_ _15"> </span>ﬁlling<span class="_ _15"> </span>these<span class="_ _14"> </span>bits<span class="_ _15"> </span>in<span class="_ _15"> </span>as<span class="_ _15"> </span>it</div><div class="t m5 x2d h26 y3463 ff7 fs19 fc2 sc0 ls0 ws0">shifts<span class="_"> </span><span class="ffd">val<span class="_ _10"> </span></span>from<span class="_"> </span>right<span class="_"> </span>to<span class="_"> </span>left.</div><div class="t m5 x17 h28 y3464 ffe fs1e fc6 sc0 ls0 ws0">Solution<span class="_"> </span>to<span class="_"> </span>Problem<span class="_"> </span>3.29<span class="_ _e"> </span><span class="fs16">(page<span class="_"> </span>268)</span></div><div class="t m5 x17 h26 y3465 ff7 fs19 fc1 sc0 ls0 ws0">Our<span class="_ _21"> </span>stated<span class="_ _f"> </span>rule<span class="_ _21"> </span>for<span class="_ _f"> </span>translating<span class="_ _f"> </span>a<span class="_ _21"> </span><span class="ffd">for<span class="_ _f"> </span></span>loop<span class="_ _21"> </span>into<span class="_ _f"> </span>a<span class="_ _f"> </span><span class="ffd">while<span class="_ _21"> </span></span>loop<span class="_ _f"> </span>is<span class="_ _f"> </span>just<span class="_ _21"> </span>a<span class="_ _f"> </span>bit<span class="_ _21"> </span>too</div><div class="t m5 x17 h26 y3466 ff7 fs19 fc1 sc0 ls0 ws0">simplistic—this<span class="_"> </span>is<span class="_"> </span>the<span class="_"> </span>only<span class="_"> </span>aspect<span class="_"> </span>that<span class="_"> </span>requires<span class="_"> </span>special<span class="_"> </span>consideration.</div><div class="t m5 x34 h26 y3467 ff7 fs19 fc1 sc0 ls0 ws0">A.<span class="_ _1f"> </span>Applying<span class="_"> </span>our<span class="_"> </span>translation<span class="_"> </span>rule<span class="_"> </span>would<span class="_"> </span>yield<span class="_"> </span>the<span class="_"> </span>following<span class="_"> </span>code:</div><div class="t m5 x142 h2d y3468 ffd fs1e fc2 sc0 ls0 ws0">/*<span class="_ _e"> </span>Naive<span class="_ _1f"> </span>translation<span class="_ _1f"> </span>of<span class="_ _e"> </span>for<span class="_ _1f"> </span>loop<span class="_ _e"> </span>into<span class="_ _1f"> </span>while<span class="_ _1f"> </span>loop<span class="_ _e"> </span>*/</div><div class="t m5 x142 h2d y3469 ffd fs1e fc2 sc0 ls0 ws0">/*<span class="_ _e"> </span>WARNING:<span class="_ _1f"> </span>This<span class="_ _1f"> </span>is<span class="_ _e"> </span>buggy<span class="_ _1f"> </span>code<span class="_ _e"> </span>*/</div><div class="t m5 x142 h2d y346a ffd fs1e fc2 sc0 ls0 ws0">long<span class="_ _e"> </span>sum<span class="_ _1f"> </span>=<span class="_ _1f"> </span>0;</div><div class="t m5 x142 h2d y346b ffd fs1e fc2 sc0 ls33 ws0">l<span class="_ _41"></span>o<span class="_ _41"></span>n<span class="_ _41"></span>gi=0<span class="_ _41"></span>;</div><div class="t m5 x142 h2d y346c ffd fs1e fc2 sc0 ls0 ws0">while<span class="_ _e"> </span>(i<span class="_ _1f"> </span>&lt;<span class="_ _1f"> </span>10)<span class="_ _e"> </span>{</div><div class="t m5 xc5 h2d y346d ffd fs1e fc2 sc0 ls0 ws0">if<span class="_ _e"> </span>(i<span class="_ _1f"> </span>&amp;<span class="_ _1f"> </span>1)</div><div class="t m5 x162 h2d y346e ffd fs1e fc2 sc0 ls0 ws0">/*<span class="_ _e"> </span>This<span class="_ _1f"> </span>will<span class="_ _1f"> </span>cause<span class="_ _e"> </span>an<span class="_ _1f"> </span>infinite<span class="_ _e"> </span>loop<span class="_ _1f"> </span>*/</div><div class="t m5 x162 h2d y346f ffd fs1e fc2 sc0 ls0 ws0">continue;</div><div class="t m5 xc5 h2d y3470 ffd fs1e fc2 sc0 ls0 ws0">sum<span class="_ _e"> </span>+=<span class="_ _1f"> </span>i;</div><div class="t m5 xc5 h2d y3471 ffd fs1e fc2 sc0 ls0 ws0">i++;</div><div class="t m5 x142 h2d y3472 ffd fs1e fc2 sc0 ls0 ws0">}</div><div class="t m5 x2d h26 y3473 ff7 fs19 fc2 sc0 ls0 ws0">T<span class="_ _1"></span>his<span class="_"> </span>code<span class="_"> </span>has<span class="_"> </span>an<span class="_"> </span>inﬁnite<span class="_"> </span>loop<span class="_ _0"></span>,<span class="_"> </span>since<span class="_"> </span>the<span class="_"> </span><span class="ffd">continue<span class="_ _10"> </span></span>statement<span class="_"> </span>would<span class="_"> </span>prevent</div><div class="t m5 x2d h26 y3474 ff7 fs19 fc2 sc0 ls0 ws0">index<span class="_"> </span>variable<span class="_"> </span><span class="ffd">i<span class="_ _10"> </span></span>from<span class="_"> </span>being<span class="_"> </span>updated.</div><div class="t m5 x34 h26 y3475 ff7 fs19 fc2 sc0 ls0 ws0">B<span class="_ _3"></span>.<span class="_ _1d"> </span>The<span class="_ _21"> </span>general<span class="_ _e"> </span>solution<span class="_ _f"> </span>is<span class="_ _e"> </span>to<span class="_ _f"> </span>replace<span class="_ _e"> </span>the<span class="_ _f"> </span><span class="ffd">continue<span class="_ _f"> </span></span>statement<span class="_ _e"> </span>with<span class="_ _f"> </span>a<span class="_ _e"> </span><span class="ffd">goto</span></div><div class="t m5 x2d h26 y3476 ff7 fs19 fc2 sc0 ls0 ws0">statement<span class="_ _13"> </span>that<span class="_ _13"> </span>skips<span class="_ _13"> </span>the<span class="_ _13"> </span>rest<span class="_ _6"> </span>of<span class="_ _13"> </span>the<span class="_ _13"> </span>loop<span class="_ _13"> </span>body<span class="_ _13"> </span>and<span class="_ _13"> </span>goes<span class="_ _13"> </span>directly<span class="_ _13"> </span>to<span class="_ _13"> </span>the<span class="_ _13"> </span>update</div><div class="t m5 x2d h26 y3477 ff7 fs19 fc2 sc0 ls0 ws0">portion:</div><div class="t m5 x142 h2d y3478 ffd fs1e fc2 sc0 ls0 ws0">/*<span class="_ _e"> </span>Correct<span class="_ _1f"> </span>translation<span class="_ _1f"> </span>of<span class="_ _e"> </span>for<span class="_ _1f"> </span>loop<span class="_ _e"> </span>into<span class="_ _1f"> </span>while<span class="_ _1f"> </span>loop<span class="_ _e"> </span>*/</div><div class="t m5 x142 h2d y3479 ffd fs1e fc2 sc0 ls0 ws0">long<span class="_ _e"> </span>sum<span class="_ _1f"> </span>=<span class="_ _1f"> </span>0;</div><div class="t m5 x142 h2d y347a ffd fs1e fc2 sc0 ls33 ws0">l<span class="_ _41"></span>o<span class="_ _41"></span>n<span class="_ _41"></span>gi=0<span class="_ _41"></span>;</div><div class="t m5 x142 h2d y347b ffd fs1e fc2 sc0 ls0 ws0">while<span class="_ _e"> </span>(i<span class="_ _1f"> </span>&lt;<span class="_ _1f"> </span>10)<span class="_ _e"> </span>{</div><div class="t m5 xc5 h2d y347c ffd fs1e fc2 sc0 ls0 ws0">if<span class="_ _e"> </span>(i<span class="_ _1f"> </span>&amp;<span class="_ _1f"> </span>1)</div><div class="t m5 x162 h2d y347d ffd fs1e fc2 sc0 ls0 ws0">goto<span class="_ _e"> </span>update;</div><div class="t m5 xc5 h2d y347e ffd fs1e fc2 sc0 ls0 ws0">sum<span class="_ _e"> </span>+=<span class="_ _1f"> </span>i;</div><div class="t m5 x142 h2d y347f ffd fs1e fc2 sc0 ls0 ws0">update:</div><div class="t m5 xc5 h2d y3480 ffd fs1e fc2 sc0 ls0 ws0">i++;</div><div class="t m5 x142 h2d y3481 ffd fs1e fc2 sc0 ls0 ws0">}</div></div><div class="pi" data-data='{"ctm":[2.000000,0.000000,0.000000,2.000000,0.000000,0.000000]}'></div></div>
