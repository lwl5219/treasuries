<div id="pff2" class="pf w2 h11" data-page-no="f2"><div class="pc pcf2 w2 h11"><img class="bi x0 y0 w1 h1" alt="" src="csapp/bgf2.png"/><div class="t m5 x1dc h28 y9b ff6 fs1f fc2 sc0 ls0 ws0">Section<span class="_ _10"> </span>3.6<span class="_ _60"> </span>Control<span class="_ _3e"> </span><span class="ffe fs1e">241</span></div><div class="t m5 x34 h26 y9c ff7 fs19 fc2 sc0 ls22 ws0">C.<span class="_ _52"> </span><span class="ffd fs1e ls0">cmpb<span class="_ _46"> </span>%sil,<span class="_ _1f"> </span>%dil</span></div><div class="t m5 xd1 h2d y24c2 ffd fs1e fc2 sc0 ls0 ws0">setbe<span class="_ _46"> </span>%al</div><div class="t m5 x34 h26 y24c3 ff7 fs19 fc2 sc0 ls2a ws0">D.<span class="_ _52"> </span><span class="ffd fs1e ls0">cmpq<span class="_ _46"> </span>%rsi,<span class="_ _e"> </span>%rdi</span></div><div class="t m5 xd1 h2d y24c4 ffd fs1e fc2 sc0 ls0 ws0">setne<span class="_ _3f"> </span>%a</div><div class="t m5 x17 h47 y24c5 ffe fs2b fc1 sc0 ls0 ws0">Practice<span class="_"> </span>Problem<span class="_"> </span>3.14<span class="_ _1f"> </span><span class="fs16">(solution<span class="_"> </span>page<span class="_"> </span>366)</span></div><div class="t m5 x17 h26 y24c6 ff7 fs19 fc1 sc0 ls0 ws0">T<span class="_ _1"></span>he<span class="_"> </span>C<span class="_"> </span>code</div><div class="t m5 x17 h2d y24c7 ffd fs1e fc2 sc0 ls0 ws0">int<span class="_ _e"> </span>test(data_t<span class="_ _1f"> </span>a)<span class="_ _1f"> </span>{</div><div class="t m5 x1b6 h2d y24c8 ffd fs1e fc2 sc0 ls0 ws0">return<span class="_ _e"> </span>a<span class="_ _1f"> </span>TEST<span class="_ _1f"> </span>0;</div><div class="t m5 x17 h2d y24c9 ffd fs1e fc2 sc0 ls0 ws0">}</div><div class="t m5 x17 h26 y24ca ff7 fs19 fc2 sc0 ls0 ws0">shows<span class="_ _14"> </span>a<span class="_ _15"> </span>general<span class="_ _14"> </span>comparison<span class="_ _14"> </span>between<span class="_ _15"> </span>argument<span class="_ _14"> </span><span class="ffd">a<span class="_ _15"> </span></span>and<span class="_ _14"> </span>0,<span class="_ _21"> </span>where<span class="_ _14"> </span>we<span class="_ _15"> </span>can<span class="_ _14"> </span>set<span class="_ _15"> </span>the</div><div class="t m5 x17 h26 y24cb ff7 fs19 fc2 sc0 ls0 ws0">data<span class="_ _16"> </span>type<span class="_ _16"> </span>of<span class="_ _16"> </span>the<span class="_ _14"> </span>argument<span class="_ _16"> </span>by<span class="_ _16"> </span>declaring<span class="_ _14"> </span><span class="ffd">data_t<span class="_ _16"> </span></span>with<span class="_ _16"> </span>a<span class="_ _16"> </span><span class="ffd">typedef</span>,<span class="_ _14"> </span>and<span class="_ _14"> </span>the<span class="_ _16"> </span>nature</div><div class="t m5 x17 h26 y24cc ff7 fs19 fc2 sc0 ls0 ws0">of<span class="_ _16"> </span>the<span class="_ _11"> </span>comparison<span class="_ _16"> </span>by<span class="_ _16"> </span>declaring<span class="_ _16"> </span><span class="ffd">TEST<span class="_ _11"> </span></span>with<span class="_ _16"> </span>a<span class="_ _16"> </span><span class="ffd">#define<span class="_ _16"> </span></span>declaration.<span class="_ _11"> </span>The<span class="_ _11"> </span>following</div><div class="t m5 x17 h26 y24cd ff7 fs19 fc2 sc0 ls0 ws0">instruction<span class="_ _13"> </span>sequences<span class="_ _13"> </span>implement<span class="_ _13"> </span>the<span class="_"> </span>comparison,<span class="_ _13"> </span>where<span class="_ _13"> </span><span class="ffd">a<span class="_ _13"> </span></span>is<span class="_ _13"> </span>held<span class="_"> </span>in<span class="_ _13"> </span>some<span class="_ _13"> </span>portion</div><div class="t m5 x17 h26 y24ce ff7 fs19 fc2 sc0 ls0 ws0">of<span class="_ _6"> </span>register<span class="_ _13"> </span><span class="ffd">%rdi</span>.<span class="_ _6"> </span>F<span class="_ _1"></span>or<span class="_ _13"> </span>each<span class="_ _6"> </span>sequence<span class="_ _0"></span>,<span class="_ _13"> </span>determine<span class="_ _6"> </span>which<span class="_ _13"> </span>data<span class="_ _6"> </span>types<span class="_ _13"> </span><span class="ffd">data_t<span class="_ _6"> </span></span>and<span class="_ _6"> </span>which</div><div class="t m5 x17 h26 y24cf ff7 fs19 fc2 sc0 ls0 ws0">comparisons<span class="_"> </span><span class="ffd">TEST<span class="_ _11"> </span></span>could<span class="_ _11"> </span>cause<span class="_ _11"> </span>the<span class="_"> </span>compiler<span class="_ _11"> </span>to<span class="_ _11"> </span>generate<span class="_ _11"> </span>this<span class="_"> </span>code.<span class="_"> </span>(T<span class="_ _1"></span>here<span class="_ _11"> </span>can<span class="_ _11"> </span>be</div><div class="t m5 x17 h26 y24d0 ff7 fs19 fc2 sc0 ls0 ws0">multiple<span class="_"> </span>correct<span class="_"> </span>answers;<span class="_"> </span>list<span class="_"> </span>all<span class="_"> </span>correct<span class="_"> </span>ones<span class="_ _1"></span>.)</div><div class="t m5 x34 h26 y24d1 ff7 fs19 fc2 sc0 ls0 ws0">A.</div><div class="t m5 xd1 h2d y24d2 ffd fs1e fc2 sc0 ls0 ws0">testq<span class="_ _1a"> </span>%rdi,<span class="_ _e"> </span>%rdi</div><div class="t m5 xd1 h2d y24d3 ffd fs1e fc2 sc0 ls0 ws0">setge<span class="_ _1a"> </span>%al</div><div class="t m5 x34 h26 y24d4 ff7 fs19 fc2 sc0 ls2a ws0">B.</div><div class="t m5 xd1 h2d y24d5 ffd fs1e fc2 sc0 ls0 ws0">testw<span class="_ _3f"> </span>%di,<span class="_ _e"> </span>%di</div><div class="t m5 xd1 h2d y24d6 ffd fs1e fc2 sc0 ls0 ws0">sete<span class="_ _46"> </span>%al</div><div class="t m5 x34 h26 y24d7 ff7 fs19 fc2 sc0 ls22 ws0">C.<span class="_ _52"> </span><span class="ffd fs1e ls0">testb<span class="_ _46"> </span>%dil,<span class="_ _1f"> </span>%dil</span></div><div class="t m5 xd1 h2d y24d8 ffd fs1e fc2 sc0 ls0 ws0">seta<span class="_ _8c"> </span>%al</div><div class="t m5 x34 h26 y24d9 ff7 fs19 fc2 sc0 ls2a ws0">D.<span class="_ _52"> </span><span class="ffd fs1e ls0">testl<span class="_ _46"> </span>%edi,<span class="_ _e"> </span>%edi</span></div><div class="t m5 xd1 h2d y24da ffd fs1e fc2 sc0 ls0 ws0">setle<span class="_ _46"> </span>%al</div><div class="t m5 x17 h41 y24db ffe fs29 fc1 sc0 ls0 ws0">3.6.3<span class="_ _48"> </span><span class="fs19">Jump<span class="_"> </span>Instructions</span></div><div class="t m5 x17 h26 y24dc ff7 fs19 fc1 sc0 ls0 ws0">Under<span class="_ _15"> </span>normal<span class="_ _21"> </span>execution,<span class="_ _f"> </span>instructions<span class="_ _21"> </span>follow<span class="_ _21"> </span>each<span class="_ _21"> </span>other<span class="_ _15"> </span>in<span class="_ _21"> </span>the<span class="_ _21"> </span>order<span class="_ _21"> </span>they<span class="_ _15"> </span>are</div><div class="t m5 x17 h26 y24dd ff7 fs19 fc1 sc0 ls0 ws0">listed.<span class="_ _f"> </span>A<span class="_ _f"> </span><span class="ffa">jump<span class="_ _f"> </span></span>instruction<span class="_ _f"> </span>can<span class="_ _e"> </span>cause<span class="_ _21"> </span>the<span class="_ _e"> </span>execution<span class="_ _21"> </span>to<span class="_ _f"> </span>switch<span class="_ _e"> </span>to<span class="_ _21"> </span>a<span class="_ _e"> </span>completely</div><div class="t m5 x17 h26 y24de ff7 fs19 fc1 sc0 ls0 ws0">new<span class="_ _11"> </span>position<span class="_ _11"> </span>in<span class="_ _11"> </span>the<span class="_ _11"> </span>program.<span class="_ _11"> </span>These<span class="_"> </span>jump<span class="_ _11"> </span>destinations<span class="_ _11"> </span>are<span class="_ _11"> </span>generally<span class="_ _11"> </span>indicated<span class="_ _16"> </span>in</div><div class="t m5 x17 h26 y24df ff7 fs19 fc1 sc0 ls0 ws0">assembly<span class="_"> </span>code<span class="_"> </span>by<span class="_ _13"> </span>a<span class="_"> </span><span class="ffa">label<span class="_ _2"></span></span>.<span class="_"> </span>Consider<span class="_"> </span>the<span class="_"> </span>following<span class="_ _13"> </span>(very<span class="_"> </span>contrived)<span class="_"> </span>assembly-code</div><div class="t m5 x17 h26 y24e0 ff7 fs19 fc1 sc0 ls0 ws0">sequence:</div><div class="t m5 x72 h2d y24e1 ffd fs1e fc2 sc0 ls0 ws0">movq<span class="_ _e"> </span>$0,%rax<span class="_ _13b"> </span><span class="ff13 fs35 fc6">Set<span class="_ _f"> </span>%rax<span class="_ _f"> </span>to<span class="_ _f"> </span>0</span></div><div class="t m5 x72 h2d y543 ffd fs1e fc2 sc0 ls0 ws0">jmp<span class="_ _e"> </span>.L1<span class="_ _141"> </span><span class="ff13 fs35 fc6">Goto<span class="_ _f"> </span>.L1</span></div><div class="t m5 x72 h2d ye14 ffd fs1e fc2 sc0 ls0 ws0">movq<span class="_ _e"> </span>(%rax),%rdx<span class="_ _9a"> </span><span class="ff13 fs35 fc6">Null<span class="_ _f"> </span>pointer<span class="_ _f"> </span>dereference<span class="_ _e"> </span>(skipped)</span></div><div class="t m5 x17 h2d yeef ffd fs1e fc2 sc0 ls0 ws0">.L1:</div><div class="t m5 x72 h2d y24e2 ffd fs1e fc2 sc0 ls0 ws0">popq<span class="_ _e"> </span>%rdx</div><div class="t m5 x89 h61 yd7a ff13 fs35 fc6 sc0 ls0 ws0">Jump<span class="_ _f"> </span>target</div></div><div class="pi" data-data='{"ctm":[2.000000,0.000000,0.000000,2.000000,0.000000,0.000000]}'></div></div>
