<div id="pf85" class="pf w2 h11" data-page-no="85"><div class="pc pc85 w2 h11"><img class="bi x0 y0 w1 h1" alt="" src="csapp/bg85.png"/><div class="t m5 x14 h28 y9b ffe fs1e fc2 sc0 ls0 ws0">132<span class="_ _1b"> </span><span class="ff6 fs1f">Chapter<span class="_ _10"> </span>2<span class="_ _3d"> </span>Representing<span class="_ _10"> </span>and<span class="_ _10"> </span>Manipulating<span class="_ _10"> </span>Information</span></div><div class="t m5 x28 h2a y257 fff fs1c fc2 sc0 ls0 ws0">W<span class="_ _1"></span>eb<span class="_ _16"> </span>Aside<span class="_ _14"> </span>DA<span class="_ _1"></span>T<span class="_ _1"></span>A:TNEG<span class="_ _1b"> </span><span class="ff6 fs19">Bit-level<span class="_ _11"> </span>representation<span class="_ _11"> </span>of<span class="_ _11"> </span>two’<span class="_ _0"></span>s-complement<span class="_ _11"> </span>negation</span></div><div class="t m5 x20d h2b y2d0 ff7 fs1e fc2 sc0 ls0 ws0">T<span class="_ _1"></span>here<span class="_ _16"> </span>are<span class="_ _16"> </span>several<span class="_ _14"> </span>clever<span class="_ _16"> </span>ways<span class="_ _16"> </span>to<span class="_ _16"> </span>determine<span class="_ _16"> </span>the<span class="_ _16"> </span>two’s-complement<span class="_ _16"> </span>negation<span class="_ _16"> </span>of<span class="_ _16"> </span>a<span class="_ _16"> </span>value<span class="_ _16"> </span>represented</div><div class="t m5 x28 h2b y2d1 ff7 fs1e fc2 sc0 ls0 ws0">at<span class="_"> </span>the<span class="_ _10"> </span>bit<span class="_ _11"> </span>level.<span class="_"> </span>The<span class="_"> </span>following<span class="_"> </span>two<span class="_ _10"> </span>techniques<span class="_ _11"> </span>are<span class="_"> </span>both<span class="_ _10"> </span>useful,<span class="_ _11"> </span>such<span class="_"> </span>as<span class="_ _11"> </span>when<span class="_"> </span>one<span class="_ _10"> </span>encounters<span class="_ _11"> </span>the<span class="_"> </span>value</div><div class="t m5 x28 h2b y2d2 ffd fs1e fc2 sc0 ls0 ws0">0xfffffffa<span class="_ _13"> </span><span class="ff7">when<span class="_ _6"> </span>debugging<span class="_ _13"> </span>a<span class="_ _13"> </span>program,<span class="_ _13"> </span>and<span class="_ _6"> </span>they<span class="_ _13"> </span>lend<span class="_ _13"> </span>insight<span class="_ _13"> </span>into<span class="_ _6"> </span>the<span class="_ _13"> </span>nature<span class="_ _13"> </span>of<span class="_ _6"> </span>the<span class="_ _13"> </span>two’s-complement</span></div><div class="t m5 x28 h2b y2d3 ff7 fs1e fc2 sc0 ls0 ws0">representation.</div><div class="t m5 x57 h2b y2d4 ff7 fs1e fc2 sc0 ls0 ws0">One<span class="_ _6"> </span>technique<span class="_ _13"> </span>for<span class="_ _6"> </span>performing<span class="_ _6"> </span>two’s-complement<span class="_ _6"> </span>negation<span class="_ _13"> </span>at<span class="_ _6"> </span>the<span class="_ _6"> </span>bit<span class="_ _13"> </span>level<span class="_ _6"> </span>is<span class="_ _6"> </span>to<span class="_ _13"> </span>complement<span class="_ _6"> </span>the<span class="_ _6"> </span>bits</div><div class="t m5 x28 h2b y2d5 ff7 fs1e fc2 sc0 ls0 ws0">and<span class="_ _13"> </span>then<span class="_ _6"> </span>increment<span class="_ _13"> </span>the<span class="_ _6"> </span>result.<span class="_ _13"> </span>In<span class="_ _6"> </span>C,<span class="_ _6"> </span>we<span class="_ _13"> </span>can<span class="_ _6"> </span>state<span class="_ _13"> </span>that<span class="_ _13"> </span>for<span class="_ _6"> </span>any<span class="_ _13"> </span>integer<span class="_ _6"> </span>value<span class="_ _13"> </span><span class="ffd">x</span>,<span class="_ _6"> </span>computing<span class="_ _13"> </span>the<span class="_ _6"> </span>expressions</div><div class="t m5 x28 h2b y2d6 ffd fs1e fc2 sc0 ls0 ws0">-x<span class="_ _10"> </span><span class="ff7">and<span class="_"> </span></span><span class="lsbf">~<span class="_ _49"></span>x+1<span class="_ _1"></span><span class="ff7 ls0">will<span class="_"> </span>give<span class="_"> </span>identical<span class="_"> </span>results<span class="_ _1"></span>.</span></span></div><div class="t m5 x57 h2b y549 ff7 fs1e fc2 sc0 ls0 ws0">Here<span class="_"> </span>are<span class="_"> </span>some<span class="_"> </span>examples<span class="_"> </span>with<span class="_"> </span>a<span class="_"> </span>4-bit<span class="_"> </span>word<span class="_"> </span>size:</div><div class="t m5 x31 h32 y144e ff12 fs21 fc2 sc0 ls0 ws0"><span class="_ _41"></span><span class="ff11">x<span class="_ _e3"> </span><span class="ffd fs1e">~<span class="_ _5"></span></span><span class="ff12"><span class="_ _41"></span><span class="ff11">x<span class="_ _e4"> </span><span class="ffa">incr<span class="_ _2"></span></span>(<span class="ffd fs1e">~<span class="_ _5"></span></span><span class="ff12"><span class="_ _41"></span><span class="ff11 ls68">x)</span></span></span></span></span></div><div class="t m5 x28 h32 y144f ff7 fs21 fc2 sc0 ls0 ws0">[0101]<span class="_ _58"> </span>5<span class="_ _20"> </span>[1010]<span class="_ _19"> </span><span class="ff12">−</span>6<span class="_ _20"> </span>[1011]<span class="_ _19"> </span><span class="ff12">−</span>5</div><div class="t m5 x28 h32 y1450 ff7 fs21 fc2 sc0 ls0 ws0">[0111]<span class="_ _58"> </span>7<span class="_ _20"> </span>[1000]<span class="_ _19"> </span><span class="ff12">−</span>8<span class="_ _20"> </span>[1001]<span class="_ _19"> </span><span class="ff12">−</span>7</div><div class="t m5 x28 h32 y1451 ff7 fs21 fc2 sc0 ls0 ws0">[1100]<span class="_ _19"> </span><span class="ff12">−</span>4<span class="_ _20"> </span>[0011]<span class="_ _58"> </span>3<span class="_ _20"> </span>[0100]<span class="_ _58"> </span>4</div><div class="t m5 x28 h32 y1452 ff7 fs21 fc2 sc0 ls0 ws0">[0000]<span class="_ _58"> </span>0<span class="_ _20"> </span>[1111]<span class="_ _19"> </span><span class="ff12">−</span>1<span class="_ _20"> </span>[0000]<span class="_ _58"> </span>0</div><div class="t m5 x28 h32 y1453 ff7 fs21 fc2 sc0 ls0 ws0">[1000]<span class="_ _19"> </span><span class="ff12">−</span>8<span class="_ _20"> </span>[0111]<span class="_ _58"> </span>7<span class="_ _20"> </span>[1000]<span class="_ _19"> </span><span class="ff12">−</span>8</div><div class="t m5 x57 h2b y1454 ff7 fs1e fc2 sc0 ls0 ws0">F<span class="_ _1"></span>or<span class="_"> </span>our<span class="_ _11"> </span>earlier<span class="_"> </span>example<span class="_ _0"></span>,<span class="_"> </span>we<span class="_ _11"> </span>know<span class="_"> </span>that<span class="_ _10"> </span>the<span class="_ _10"> </span>complement<span class="_ _11"> </span>of<span class="_"> </span><span class="ffd">0xf<span class="_ _10"> </span></span>is<span class="_ _11"> </span><span class="ffd">0x0<span class="_ _10"> </span></span>and<span class="_"> </span>the<span class="_ _10"> </span>complement<span class="_ _11"> </span>of<span class="_"> </span><span class="ffd">0xa</span></div><div class="t m5 x28 h4a y1455 ff7 fs1e fc2 sc0 ls0 ws0">is<span class="_"> </span><span class="ffd">0x5</span>,<span class="_"> </span>and<span class="_"> </span>so<span class="_"> </span><span class="ffd">0xfffffffa<span class="_ _10"> </span></span>is<span class="_"> </span>the<span class="_"> </span>two’s-complement<span class="_"> </span>representation<span class="_"> </span>of<span class="_"> </span><span class="ff12">−</span>6.</div><div class="t m5 x57 h2b y1456 ff7 fs1e fc2 sc0 ls0 ws0">A<span class="_ _10"> </span>second<span class="_ _11"> </span>way<span class="_ _11"> </span>to<span class="_"> </span>perform<span class="_ _11"> </span>two’s-complement<span class="_"> </span>negation<span class="_ _11"> </span>of<span class="_ _11"> </span>a<span class="_"> </span>number<span class="_ _11"> </span><span class="ff11">x<span class="_"> </span></span>is<span class="_ _11"> </span>based<span class="_ _10"> </span>on<span class="_ _11"> </span>splitting<span class="_ _11"> </span>the<span class="_"> </span>bit</div><div class="t m5 x28 h2b y1457 ff7 fs1e fc2 sc0 ls0 ws0">vector<span class="_ _6"> </span>into<span class="_ _13"> </span>two<span class="_ _13"> </span>parts<span class="_ _3"></span>.<span class="_ _13"> </span>Let<span class="_ _6"> </span><span class="ff11">k<span class="_ _10"> </span></span>be<span class="_ _6"> </span>the<span class="_ _13"> </span>position<span class="_ _6"> </span>of<span class="_ _13"> </span>the<span class="_ _6"> </span>rightmost<span class="_ _13"> </span>1,<span class="_ _6"> </span>so<span class="_ _13"> </span>the<span class="_ _6"> </span>bit-level<span class="_ _13"> </span>representation<span class="_ _6"> </span>of<span class="_ _13"> </span><span class="ff11">x<span class="_ _10"> </span></span>has<span class="_ _6"> </span>the</div><div class="t m5 x28 h2b y1458 ff7 fs1e fc2 sc0 ls0 ws0">form<span class="_"> </span>[<span class="ff11">x</span></div><div class="t m5 x3e h5e y1459 ff11 fs2c fc2 sc0 ls0 ws0">w<span class="ff12">−<span class="ff7">1</span></span></div><div class="t m5 x1b5 h49 y145a ff11 fs1e fc2 sc0 lsc0 ws0">,x</div><div class="t m5 x1a9 h5e y1459 ff11 fs2c fc2 sc0 ls0 ws0">w<span class="ff12">−<span class="ff7">2</span></span></div><div class="t m5 x74 h49 y145a ff11 fs1e fc2 sc0 lsc0 ws0">,...,x</div><div class="t m5 x23 h5e y1459 ff11 fs2c fc2 sc0 ls0 ws0">k<span class="_ _2"></span><span class="ff12">+<span class="ff7">1</span></span></div><div class="t m5 xcd h4a y145a ff11 fs1e fc2 sc0 ls0 ws0">,<span class="_ _13"> </span><span class="ff7">1<span class="_ _1"></span><span class="ff11">,<span class="_ _13"> </span><span class="ff7">0<span class="_ _2"></span></span><span class="ls6e">,...<span class="_ _0"></span><span class="ff7 ls0">0]<span class="_ _1"></span>.<span class="_"> </span>(T<span class="_ _1"></span>his<span class="_"> </span>is<span class="_ _13"> </span>possible<span class="_ _13"> </span>as<span class="_"> </span>long<span class="_ _13"> </span>as<span class="_ _13"> </span><span class="ff11">x<span class="_ _10"> </span><span class="ff12"><span class="_ _2"></span>=<span class="_ _13"> </span></span></span><span class="lsc1">0.)<span class="_"> </span>T<span class="_ _1"></span>he<span class="_"> </span>negation<span class="_ _13"> </span>is<span class="_"> </span>then<span class="_ _13"> </span>written</span></span></span></span></span></div><div class="t m5 x28 h2b y145b ff7 fs1e fc2 sc0 ls0 ws0">in<span class="_"> </span>binary<span class="_"> </span>form<span class="_"> </span>as<span class="_"> </span>[<span class="ffd">~<span class="ff11">x</span></span></div><div class="t m5 x17e h5e y145c ff11 fs2c fc2 sc0 ls0 ws0">w<span class="ff12">−<span class="ff7">1</span></span></div><div class="t m5 x4f h2d y145d ff11 fs1e fc2 sc0 ls0 ws0">,<span class="_ _13"> </span><span class="ffd">~</span>x</div><div class="t m5 x1c4 h5e y145c ff11 fs2c fc2 sc0 ls0 ws0">w<span class="ff12">−<span class="ff7">2</span></span></div><div class="t m5 x1c6 h2d y145d ff11 fs1e fc2 sc0 ls6e ws0">,...<span class="ffd ls0">~<span class="_ _13"> </span><span class="ff11">x</span></span></div><div class="t m5 x5d h5e y145c ff11 fs2c fc2 sc0 ls0 ws0">k<span class="_ _2"></span><span class="ff12">+<span class="ff7">1</span></span></div><div class="t m5 x1eb h2b y145d ff11 fs1e fc2 sc0 ls0 ws0">,<span class="_ _13"> </span><span class="ff7">1<span class="_ _1"></span><span class="ff11">,<span class="_ _10"> </span><span class="ff7">0</span><span class="ls6e">,...,</span><span class="ff7">0]<span class="_ _1"></span>.<span class="_"> </span>T<span class="_ _1"></span>hat<span class="_"> </span>is<span class="_ _1"></span>,<span class="_"> </span>we<span class="_"> </span>complement<span class="_"> </span>each<span class="_"> </span>bit<span class="_"> </span>to<span class="_"> </span>the<span class="_"> </span>left<span class="_"> </span>of</span></span></span></div><div class="t m5 x28 h2b y145e ff7 fs1e fc2 sc0 ls0 ws0">bit<span class="_"> </span>position<span class="_"> </span><span class="ff11">k<span class="_ _2"></span></span>.</div><div class="t m5 x57 h2b y145f ff7 fs1e fc2 sc0 ls0 ws0">W<span class="_ _3"></span>e<span class="_ _6"> </span>illustrate<span class="_ _6"> </span>this<span class="_ _6"> </span>idea<span class="_ _a"> </span>with<span class="_ _6"> </span>some<span class="_ _6"> </span>4-bit<span class="_ _6"> </span>numbers<span class="_ _1"></span>,<span class="_ _6"> </span>where<span class="_ _6"> </span>we<span class="_ _6"> </span>highlight<span class="_ _6"> </span>the<span class="_ _a"> </span>rightmost<span class="_ _6"> </span>pattern<span class="_ _6"> </span>1<span class="_ _1"></span><span class="ff11">,<span class="_ _13"> </span><span class="ff7">0</span><span class="ls6e">,...<span class="_ _1"></span>,<span class="ff7 ls0">0</span></span></span></div><div class="t m5 x28 h2b y1460 ff7 fs1e fc2 sc0 ls0 ws0">in<span class="_"> </span>italics:</div><div class="t m5 x31 h32 y1461 ff11 fs21 fc2 sc0 ls0 ws0">x<span class="_ _e5"> </span><span class="ff12">−</span>x</div><div class="t m5 x28 h32 y1462 ff7 fs21 fc2 sc0 ls0 ws0">[1<span class="_ _1"></span><span class="ffa">100<span class="_ _2"></span><span class="ff7">]<span class="_ _19"> </span><span class="ff12">−</span><span class="lsc2">4[<span class="_ _e6"></span>0<span class="_ _e6"></span><span class="ffa ls0">100<span class="_ _2"></span><span class="ff7 lsc3">]4</span></span></span></span></span></div><div class="t m5 x28 h32 y1463 ff7 fs21 fc2 sc0 ls0 ws0">[<span class="ffa">1000</span>]<span class="_ _19"> </span><span class="ff12">−</span><span class="lsc4">8[<span class="_ _e7"></span><span class="ffa ls0">1000<span class="ff7">]<span class="_ _19"> </span><span class="ff12">−</span>8</span></span></span></div><div class="t m5 x20e h32 y1464 ff7 fs21 fc2 sc0 ls0 ws0">[010<span class="ffa">1<span class="_ _1"></span><span class="ff7">]<span class="_ _8c"> </span>5<span class="_ _bd"> </span>[101<span class="_ _1"></span><span class="ffa">1<span class="_ _1"></span><span class="ff7">]<span class="_ _19"> </span><span class="ff12">−</span>5</span></span></span></span></div><div class="t m5 x20e h32 y1465 ff7 fs21 fc2 sc0 ls0 ws0">[011<span class="_ _1"></span><span class="ffa">1<span class="_ _1"></span><span class="ff7">]<span class="_ _58"> </span>7<span class="_ _bd"> </span>[100<span class="ffa">1<span class="_ _3"></span><span class="ff7">]<span class="_ _19"> </span><span class="ff12">−</span>7</span></span></span></span></div><div class="t m5 x1d h41 y1466 ffe fs29 fc2 sc0 ls0 ws0">2.3.4<span class="_ _48"> </span><span class="fs19">Unsigned<span class="_"> </span>Multiplication</span></div><div class="t m5 x1d h46 y1467 ff7 fs19 fc2 sc0 ls0 ws0">Integers<span class="_ _16"> </span><span class="ff11">x<span class="_ _15"> </span></span>and<span class="_ _16"> </span><span class="ff11">y<span class="_ _15"> </span></span>in<span class="_ _16"> </span>the<span class="_ _16"> </span>range<span class="_ _16"> </span>0<span class="_"> </span><span class="ff12">≤<span class="_ _13"> </span><span class="ff11 ls57">x,<span class="_ _13"> </span>y<span class="_ _13"> </span></span>≤<span class="_ _10"> </span></span>2</div><div class="t m5 x1e7 h50 y1468 ff11 fs25 fc2 sc0 ls0 ws0">w</div><div class="t m5 x51 h46 y1469 ff12 fs19 fc2 sc0 ls0 ws0">−<span class="_ _10"> </span><span class="ff7">1<span class="_"> </span>can<span class="_ _16"> </span>be<span class="_ _16"> </span>represented<span class="_ _16"> </span>as<span class="_ _16"> </span><span class="ff11">w<span class="_ _2"></span></span>-bit<span class="_ _16"> </span>un-</span></div><div class="t m5 x1d h26 y146a ff7 fs19 fc2 sc0 ls0 ws0">signed<span class="_ _21"> </span>numbers<span class="_ _1"></span>,<span class="_ _e"> </span>but<span class="_ _21"> </span>their<span class="_ _21"> </span>product<span class="_ _21"> </span><span class="ff11">x</span></div><div class="t m5 x39 h45 y146b ff11 fs19 fc2 sc0 ls0 ws0">.</div><div class="t m5 xd8 h26 y146a ff11 fs19 fc2 sc0 ls0 ws0">y<span class="_ _e"> </span><span class="ff7">can<span class="_ _21"> </span>range<span class="_ _21"> </span>between<span class="_ _f"> </span>0<span class="_ _21"> </span>and<span class="_ _f"> </span></span>(<span class="ff7">2</span></div><div class="t m5 x20f h50 y146c ff11 fs25 fc2 sc0 ls0 ws0">w</div><div class="t m5 x21 h46 y146d ff12 fs19 fc2 sc0 ls0 ws0">−<span class="_ _10"> </span><span class="ff7">1<span class="_ _1"></span><span class="ff11">)</span></span></div><div class="t m5 x210 h3c y146e ff7 fs25 fc2 sc0 ls0 ws0">2</div><div class="t m5 x211 h46 y146d ff12 fs19 fc2 sc0 ls0 ws0">=</div><div class="t m5 x1d h26 y146f ff7 fs19 fc2 sc0 ls0 ws0">2</div><div class="t m5 xc5 h3c y1470 ff7 fs25 fc2 sc0 ls0 ws0">2<span class="ff11">w</span></div><div class="t m5 xa6 h46 y603 ff12 fs19 fc2 sc0 ls0 ws0">−<span class="_ _10"> </span><span class="ff7">2</span></div><div class="t m5 x203 h4b y1470 ff11 fs25 fc2 sc0 ls0 ws0">w<span class="ff12">+<span class="ff7">1</span></span></div><div class="t m5 x4d h46 y603 ff12 fs19 fc2 sc0 ls0 ws0">+<span class="_ _10"> </span><span class="ff7">1<span class="_ _3"></span>.<span class="_ _16"> </span>T<span class="_ _1"></span>his<span class="_ _16"> </span>could<span class="_ _11"> </span>require<span class="_ _16"> </span>as<span class="_ _11"> </span>many<span class="_ _16"> </span>as<span class="_ _11"> </span>2<span class="ff11">w<span class="_"> </span></span>bits<span class="_ _11"> </span>to<span class="_ _16"> </span>represent.<span class="_ _11"> </span>Instead,<span class="_ _16"> </span>un-</span></div><div class="t m5 x1d h26 y604 ff7 fs19 fc2 sc0 ls0 ws0">signed<span class="_ _13"> </span>multiplication<span class="_ _6"> </span>in<span class="_ _13"> </span>C<span class="_ _6"> </span>is<span class="_ _13"> </span>deﬁned<span class="_ _6"> </span>to<span class="_ _13"> </span>yield<span class="_ _6"> </span>the<span class="_ _13"> </span><span class="ff11">w</span>-bit<span class="_ _13"> </span>value<span class="_ _6"> </span>given<span class="_ _13"> </span>by<span class="_ _6"> </span>the<span class="_ _13"> </span>low-order</div><div class="t m5 x1d h26 y605 ff11 fs19 fc2 sc0 ls0 ws0">w<span class="_ _11"> </span><span class="ff7">bits<span class="_"> </span>of<span class="_"> </span>the<span class="_"> </span>2</span>w<span class="_ _2"></span><span class="ff7">-bit<span class="_"> </span>integer<span class="_"> </span>product.<span class="_"> </span>Let<span class="_"> </span>us<span class="_"> </span>denote<span class="_"> </span>this<span class="_"> </span>value<span class="_"> </span>as<span class="_"> </span></span>x<span class="_ _11"> </span><span class="ffd">*</span></div><div class="t m5 x97 h69 y1471 ff7 fs39 fc2 sc0 ls0 ws0">u</div><div class="t m5 x97 h50 y1472 ff11 fs25 fc2 sc0 ls0 ws0">w</div><div class="t m5 x212 h26 y753 ff11 fs19 fc2 sc0 ls0 ws0">y<span class="_ _2"></span><span class="ff7">.</span></div><div class="t m5 x29 h26 y754 ff7 fs19 fc2 sc0 ls0 ws0">T<span class="_ _7"></span>runcating<span class="_"> </span>an<span class="_ _13"> </span>unsigned<span class="_"> </span>number<span class="_ _13"> </span>to<span class="_"> </span><span class="ff11">w<span class="_ _10"> </span></span>bits<span class="_"> </span>is<span class="_ _13"> </span>equivalent<span class="_"> </span>to<span class="_ _13"> </span>computing<span class="_"> </span>its<span class="_ _13"> </span>value</div><div class="t m5 x1d h26 y755 ff7 fs19 fc2 sc0 ls0 ws0">modulo<span class="_"> </span>2</div><div class="t m5 x17f h50 y1473 ff11 fs25 fc2 sc0 ls0 ws0">w</div><div class="t m5 x1a8 h26 yc04 ff7 fs19 fc2 sc0 ls0 ws0">,<span class="_"> </span>giving<span class="_"> </span>the<span class="_"> </span>following:</div></div><div class="pi" data-data='{"ctm":[2.000000,0.000000,0.000000,2.000000,0.000000,0.000000]}'></div></div>
