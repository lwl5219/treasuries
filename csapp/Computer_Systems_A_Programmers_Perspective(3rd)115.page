<div id="pf73" class="pf w2 h11" data-page-no="73"><div class="pc pc73 w2 h11"><img class="bi x0 y0 w1 h1" alt="" src="csapp/bg73.png"/><div class="t m5 x14 h28 y9b ffe fs1e fc2 sc0 ls0 ws0">114<span class="_ _1b"> </span><span class="ff6 fs1f">Chapter<span class="_ _10"> </span>2<span class="_ _3d"> </span>Representing<span class="_ _10"> </span>and<span class="_ _10"> </span>Manipulating<span class="_ _10"> </span>Information</span></div><div class="t m5 x1b0 h2d ye7 ff6 fs20 fc6 sc0 ls0 ws0">11<span class="_ _73"> </span><span class="ffd fs1e fc2">show_bytes((byte_pointer)<span class="_ _1f"> </span>&amp;x,<span class="_ _e"> </span>sizeof(int));</span></div><div class="t m5 x1b0 h2d yc4d ff6 fs20 fc6 sc0 ls0 ws0">12<span class="_ _73"> </span><span class="ffd fs1e fc2">printf(&quot;ux<span class="_ _1a"> </span>=<span class="_ _1f"> </span>%u:\t&quot;,<span class="_ _e"> </span>ux);</span></div><div class="t m5 x1b0 h2d yecb ff6 fs20 fc6 sc0 ls0 ws0">13<span class="_ _73"> </span><span class="ffd fs1e fc2">show_bytes((byte_pointer)<span class="_ _1f"> </span>&amp;ux,<span class="_ _e"> </span>sizeof(unsigned));</span></div><div class="t m5 x29 h26 y107d ff7 fs19 fc2 sc0 ls0 ws0">When<span class="_ _14"> </span>run<span class="_ _14"> </span>as<span class="_ _15"> </span>a<span class="_ _15"> </span>32-bit<span class="_ _14"> </span>program<span class="_ _15"> </span>on<span class="_ _15"> </span>a<span class="_ _14"> </span>big-endian<span class="_ _15"> </span>machine<span class="_ _15"> </span>that<span class="_ _15"> </span>uses<span class="_ _14"> </span>a<span class="_ _15"> </span>two’s-</div><div class="t m5 x1d h26 y107e ff7 fs19 fc2 sc0 ls0 ws0">complement<span class="_"> </span>representation,<span class="_"> </span>this<span class="_"> </span>code<span class="_"> </span>prints<span class="_"> </span>the<span class="_"> </span>output</div><div class="t m5 x1d h2d y107f ffd fs1e fc2 sc0 ls0 ws0">sx<span class="_ _1a"> </span>=<span class="_ _e"> </span>-12345:<span class="_ _1a"> </span>cf<span class="_ _1f"> </span>c7</div><div class="t m5 x1d h2d y1080 ffd fs1e fc2 sc0 ls0 ws0">usx<span class="_ _e"> </span>=<span class="_ _1f"> </span>53191:<span class="_ _3f"> </span>cf<span class="_ _1f"> </span>c7</div><div class="t m5 x1d h2d y1081 ffd fs1e fc2 sc0 ls0 ws0">x<span class="_ _3f"> </span>=<span class="_ _e"> </span>-12345:<span class="_ _1a"> </span>ff<span class="_ _1f"> </span>ff<span class="_ _1f"> </span>cf<span class="_ _e"> </span>c7</div><div class="t m5 x1d h2d y1082 ffd fs1e fc2 sc0 ls0 ws0">ux<span class="_ _1a"> </span>=<span class="_ _e"> </span>53191:<span class="_ _3f"> </span>00<span class="_ _1f"> </span>00<span class="_ _1f"> </span>cf<span class="_ _e"> </span>c7</div><div class="t m5 x1d h46 y1083 ff7 fs19 fc2 sc0 ls0 ws0">W<span class="_ _3"></span>e<span class="_ _16"> </span>see<span class="_ _16"> </span>that,<span class="_ _16"> </span>although<span class="_ _11"> </span>the<span class="_ _16"> </span>two’s-complement<span class="_ _11"> </span>representation<span class="_ _16"> </span>of<span class="_ _16"> </span><span class="ff12">−</span>12,345<span class="_ _11"> </span>and<span class="_ _16"> </span>the</div><div class="t m5 x1d h26 y1084 ff7 fs19 fc2 sc0 ls0 ws0">unsigned<span class="_ _16"> </span>representation<span class="_ _14"> </span>of<span class="_ _14"> </span>53,191<span class="_ _14"> </span>are<span class="_ _14"> </span>identical<span class="_ _14"> </span>for<span class="_ _14"> </span>a<span class="_ _16"> </span>16-bit<span class="_ _14"> </span>word<span class="_ _14"> </span>size<span class="_ _0"></span>,<span class="_ _14"> </span>they<span class="_ _14"> </span>dif-</div><div class="t m5 x1d h46 y1085 ff7 fs19 fc2 sc0 ls0 ws0">fer<span class="_ _11"> </span>for<span class="_ _11"> </span>a<span class="_ _11"> </span>32-bit<span class="_ _11"> </span>word<span class="_ _11"> </span>size.<span class="_"> </span>In<span class="_ _11"> </span>particular,<span class="_ _11"> </span><span class="ff12">−</span>12,345<span class="_ _11"> </span>has<span class="_ _11"> </span>hexadecimal<span class="_ _16"> </span>representation</div><div class="t m5 x1d h26 y1086 ffd fs19 fc2 sc0 ls0 ws0">0xFFFFCFC7<span class="ff7">,<span class="_ _11"> </span>while<span class="_ _11"> </span>53,191<span class="_ _11"> </span>has<span class="_ _16"> </span>hexadecimal<span class="_"> </span>representation<span class="_ _11"> </span></span>0x0000CFC7<span class="ff7">.<span class="_ _16"> </span>T<span class="_ _1"></span>he<span class="_ _11"> </span>for<span class="_ _1"></span>-</span></div><div class="t m5 x1d h26 y1087 ff7 fs19 fc2 sc0 ls0 ws0">mer<span class="_"> </span>has<span class="_"> </span>been<span class="_ _13"> </span>sign<span class="_"> </span>extended—16<span class="_"> </span>copies<span class="_"> </span>of<span class="_ _13"> </span>the<span class="_"> </span>most<span class="_"> </span>signiﬁcant<span class="_"> </span>bit<span class="_ _13"> </span>1,<span class="_"> </span>having<span class="_"> </span>hexa-</div><div class="t m5 x1d h26 y1088 ff7 fs19 fc2 sc0 ls0 ws0">decimal<span class="_ _16"> </span>representation<span class="_ _16"> </span><span class="ffd">0xFFFF</span>,<span class="_ _14"> </span>have<span class="_ _16"> </span>been<span class="_ _14"> </span>added<span class="_ _16"> </span>as<span class="_ _16"> </span>leading<span class="_ _16"> </span>bits<span class="_ _1"></span>.<span class="_ _14"> </span>T<span class="_ _1"></span>he<span class="_ _14"> </span>latter<span class="_ _16"> </span>has</div><div class="t m5 x1d h26 y1089 ff7 fs19 fc2 sc0 ls0 ws0">been<span class="_"> </span>extended<span class="_ _13"> </span>with<span class="_"> </span>16<span class="_ _13"> </span>leading<span class="_"> </span>zeros<span class="_ _1"></span>,<span class="_"> </span>having<span class="_ _13"> </span>hexadecimal<span class="_"> </span>representation<span class="_"> </span><span class="ffd">0x0000</span>.</div><div class="t m5 x29 h26 y108a ff7 fs19 fc2 sc0 ls0 ws0">As<span class="_ _11"> </span>an<span class="_ _11"> </span>illustration,<span class="_ _16"> </span>F<span class="_ _1"></span>igure<span class="_ _11"> </span>2.20<span class="_ _16"> </span>shows<span class="_"> </span>the<span class="_ _16"> </span>result<span class="_ _11"> </span>of<span class="_ _11"> </span>expanding<span class="_ _11"> </span>from<span class="_ _11"> </span>word<span class="_ _16"> </span>size</div><div class="t m5 x1d h46 y108b ff11 fs19 fc2 sc0 ls0 ws0">w<span class="_ _10"> </span><span class="ff12">=<span class="_ _13"></span><span class="ff7 ls86">3t<span class="_ _4"></span>o<span class="_ _2"></span><span class="ff11 ls0">w<span class="_ _13"> </span><span class="ff12">=<span class="_ _13"></span><span class="ff7">4<span class="_ _6"> </span>by<span class="_ _13"> </span>sign<span class="_ _a"> </span>extension.<span class="_ _6"> </span>Bit<span class="_ _13"> </span>vector<span class="_ _a"> </span>[101]<span class="_ _be"></span>represents<span class="_ _6"> </span>the<span class="_ _13"> </span>value<span class="_ _a"> </span></span>−<span class="ff7">4<span class="_ _13"> </span></span>+<span class="_ _13"></span><span class="ff7">1<span class="_ _6"> </span></span><span class="ls87">=−<span class="_ _8"></span><span class="ff7 ls23">3.</span></span></span></span></span></span></div><div class="t m5 x1b0 h46 y108c ff7 fs19 fc2 sc0 ls0 ws0">Applying<span class="_ _11"> </span>sign<span class="_ _16"> </span>extension<span class="_ _16"> </span>gives<span class="_ _11"> </span>bit<span class="_ _16"> </span>vector<span class="_ _11"> </span>[1101]<span class="_"> </span>representing<span class="_ _16"> </span>the<span class="_ _11"> </span>value<span class="_ _16"> </span><span class="ff12">−</span>8<span class="_"> </span><span class="ff12">+<span class="_ _13"></span></span>4<span class="_"> </span><span class="ff12">+</span></div><div class="t m5 x1b0 h46 y108d ff7 fs19 fc2 sc0 ls0 ws0">1<span class="_ _6"> </span><span class="ff12 ls88">=−<span class="_ _80"></span><span class="ff7 ls0">3.<span class="_ _13"> </span>W<span class="_ _3"></span>e<span class="_"> </span>can<span class="_ _13"> </span>see<span class="_ _13"> </span>that,<span class="_ _13"> </span>for<span class="_"> </span><span class="ff11">w<span class="_ _13"> </span><span class="ff12">=<span class="_ _10"> </span></span></span><span class="ls20">4,<span class="_ _13"> </span>the<span class="_ _13"> </span>combined<span class="_"> </span>value<span class="_ _13"> </span>of<span class="_ _13"> </span>the<span class="_ _13"> </span>two<span class="_ _13"> </span>most<span class="_"> </span>signiﬁcant</span></span></span></div><div class="t m5 x1b0 h46 y108e ff7 fs19 fc2 sc0 ls0 ws0">bits<span class="_ _1"></span>,<span class="_ _13"> </span><span class="ff12">−</span>8<span class="_ _13"> </span><span class="ff12">+<span class="_ _13"> </span></span>4<span class="_"> </span><span class="ff12 ls89">=−<span class="_ _80"></span><span class="ff7 ls20">4,<span class="_ _13"> </span>matches<span class="_ _13"> </span>the<span class="_ _13"> </span>value<span class="_ _13"> </span>of<span class="_ _13"> </span>the<span class="_ _13"> </span>sign<span class="_ _13"> </span>bit<span class="_ _13"> </span>for<span class="_ _13"> </span><span class="ff11 ls0">w<span class="_ _10"> </span><span class="ff12">=<span class="_ _13"></span><span class="ff7">3<span class="_ _0"></span>.<span class="_ _13"> </span>Similarly<span class="_ _3"></span>,<span class="_ _13"> </span>bit<span class="_ _13"> </span>vectors</span></span></span></span></span></div><div class="t m5 x1b0 h46 y108f ff7 fs19 fc2 sc0 ls0 ws0">[111]<span class="_ _13"> </span>and<span class="_"> </span>[1111]<span class="_ _13"> </span>both<span class="_"> </span>represent<span class="_"> </span>the<span class="_"> </span>value<span class="_"> </span><span class="ff12">−</span><span class="ls25">1.</span></div><div class="t m5 x29 h26 y1090 ff7 fs19 fc2 sc0 ls0 ws0">W<span class="_ _1"></span>ith<span class="_ _13"> </span>this<span class="_ _6"> </span>as<span class="_ _13"> </span>intuition,<span class="_ _6"> </span>we<span class="_ _13"> </span>can<span class="_ _6"> </span>now<span class="_ _6"> </span>show<span class="_ _13"> </span>that<span class="_ _6"> </span>sign<span class="_ _13"> </span>extension<span class="_ _6"> </span>preserves<span class="_ _6"> </span>the<span class="_ _13"> </span>value</div><div class="t m5 x1b0 h26 y1091 ff7 fs19 fc2 sc0 ls0 ws0">of<span class="_"> </span>a<span class="_"> </span>two’s-complement<span class="_"> </span>number<span class="_ _1"></span>.</div><div class="t m5 x14 h2f y1092 ffe fs16 fc6 sc0 ls0 ws0">Figure<span class="_"> </span>2.20</div><div class="t m5 x14 h2f y1093 ffe fs16 fc1 sc0 ls0 ws0">Examples<span class="_ _21"> </span>of<span class="_ _f"> </span>sign</div><div class="t m5 x14 h35 y1094 ffe fs16 fc1 sc0 ls0 ws0">extension<span class="_ _16"> </span>from<span class="_ _14"> </span><span class="ff11">w<span class="_ _10"> </span><span class="ff12">=<span class="_ _13"> </span><span class="ff7">3</span></span></span></div><div class="t m5 x14 h35 y1095 ffe fs16 fc1 sc0 ls0 ws0">to<span class="_ _16"> </span><span class="ff11">w<span class="_ _10"> </span><span class="ff12">=<span class="_ _13"></span><span class="ff7">4</span></span></span>.<span class="_ _11"> </span><span class="ff6">For<span class="_ _16"> </span><span class="ff11">w<span class="_ _10"> </span><span class="ff12">=<span class="_ _13"> </span><span class="ff7">4</span></span></span>,<span class="_ _16"> </span>the</span></div><div class="t m5 x14 h34 y1096 ff6 fs16 fc1 sc0 ls0 ws0">combined<span class="_ _16"> </span>weight<span class="_ _11"> </span>of<span class="_ _16"> </span>the</div><div class="t m5 x14 h35 y1097 ff6 fs16 fc1 sc0 ls0 ws0">upper<span class="_ _13"> </span>2<span class="_ _13"> </span>bits<span class="_ _13"> </span>is<span class="_ _13"> </span><span class="ff12">−<span class="ff7">8<span class="_ _6"> </span></span>+<span class="_ _13"> </span><span class="ff7">4<span class="_ _13"> </span></span><span class="ls8a">=−<span class="_ _8"></span><span class="ff7 ls0">4<span class="ff6">,</span></span></span></span></div><div class="t m5 x14 h34 y1098 ff6 fs16 fc1 sc0 ls0 ws0">matching<span class="_ _11"> </span>that<span class="_ _11"> </span>of<span class="_ _11"> </span>the<span class="_ _16"> </span>sign</div><div class="t m5 x14 h35 y1099 ff6 fs16 fc1 sc0 ls0 ws0">bit<span class="_ _10"> </span>for<span class="_ _11"> </span><span class="ff11">w<span class="_ _13"> </span><span class="ff12">=<span class="_ _13"> </span><span class="ff7">3</span></span></span>.</div><div class="t m5 x132 h3f y109a ff1c fs27 fc1 sc0 ls0 ws0">8<span class="_ _af"></span>7<span class="_ _af"></span>6<span class="_ _af"></span>5<span class="_ _af"></span>4<span class="_ _af"></span>3<span class="_ _af"></span>2<span class="_ _af"></span>1<span class="_ _af"></span>0<span class="_ _b7"></span><span class="ls61">–1<span class="_ _b8"></span>–2<span class="_ _b7"></span>–3<span class="_ _b7"></span>–4<span class="_ _b7"></span>–5<span class="_ _b7"></span>–6<span class="_ _b7"></span>–7<span class="_ _b7"></span>–8</span></div><div class="t m5 xfc h3f y109b ff1c fs27 fc1 sc0 ls0 ws0">2</div><div class="t m5 xd5 h59 y109c ff1c fs33 fc1 sc0 ls0 ws0">0</div><div class="t m5 x16f h3f y109d ff1c fs27 fc1 sc0 ls0 ws0"> = 1</div><div class="t m5 xfc h3f y109e ff1c fs27 fc1 sc0 ls0 ws0">2</div><div class="t m5 xd5 h59 y109f ff1c fs33 fc1 sc0 ls0 ws0">1</div><div class="t m5 x16f h3f y109e ff1c fs27 fc1 sc0 ls0 ws0"> = 2</div><div class="t m5 xfc h3f y10a0 ff1c fs27 fc1 sc0 ls0 ws0">2</div><div class="t m5 xd5 h59 y10a1 ff1c fs33 fc1 sc0 ls0 ws0">2</div><div class="t m5 x16f h3f y10a0 ff1c fs27 fc1 sc0 ls0 ws0"> = 4</div><div class="t m5 x40 h3f y10a2 ff1c fs27 fc1 sc0 ls62 ws0">–2</div><div class="t m5 xf4 h59 y10a3 ff1c fs33 fc1 sc0 ls0 ws0">3</div><div class="t m5 xf5 h3f y10a2 ff1c fs27 fc1 sc0 ls0 ws0"> = –<span class="_ _5"></span>8</div><div class="t m5 x141 h5a y10a4 ff1d fs27 fc1 sc0 ls0 ws0">[101]</div><div class="t m5 xe0 h5a y10a5 ff1d fs27 fc1 sc0 ls0 ws0">[1101]</div><div class="t m5 x141 h5a y10a6 ff1d fs27 fc1 sc0 ls0 ws0">[111]</div><div class="t m5 xe0 h5a y10a7 ff1d fs27 fc1 sc0 ls0 ws0">[1111]</div><div class="t m5 x40 h3f y10a8 ff1c fs27 fc1 sc0 ls62 ws0">–2</div><div class="t m5 xf4 h59 y10a9 ff1c fs33 fc1 sc0 ls0 ws0">2</div><div class="t m5 xf5 h3f y10a8 ff1c fs27 fc1 sc0 ls0 ws0"> = –<span class="_ _5"></span>4</div></div><div class="pi" data-data='{"ctm":[2.000000,0.000000,0.000000,2.000000,0.000000,0.000000]}'></div></div>
