<div id="pf3bb" class="pf w2 h11" data-page-no="3bb"><div class="pc pc3bb w2 h11"><img class="bi x0 y0 w1 h1" alt="" src="csapp/bg3bb.png"/><div class="t m5 x14 h28 y9b ffe fs1e fc2 sc0 ls0 ws0">954<span class="_ _1b"> </span><span class="ff6 fs1f">Chapter<span class="_ _10"> </span>11<span class="_ _3d"> </span>Network<span class="_ _10"> </span>Programming</span></div><div class="t m5 x1d h38 y5225 ff7 fs1b fc6 sc0 ls0 ws0">N</div><div class="t m5 x10c h26 y9c ff7 fs19 fc1 sc0 ls0 ws0">etwork<span class="_"> </span>applications<span class="_"> </span>are<span class="_ _13"> </span>everywhere.<span class="_ _13"> </span>Any<span class="_"> </span>time<span class="_"> </span>you<span class="_"> </span>browse<span class="_"> </span>the<span class="_ _13"> </span>W<span class="_ _1"></span>eb<span class="_ _1"></span>,<span class="_"> </span>send<span class="_"> </span>an</div><div class="t m5 x10c h26 y409 ff7 fs19 fc1 sc0 ls0 ws0">email<span class="_"> </span>message<span class="_ _1"></span>,<span class="_"> </span>or<span class="_"> </span>play<span class="_"> </span>an<span class="_"> </span>online<span class="_"> </span>game<span class="_ _0"></span>,<span class="_"> </span>you<span class="_"> </span>are<span class="_"> </span>using<span class="_"> </span>a<span class="_"> </span>network<span class="_"> </span>application.</div><div class="t m5 x1d h26 y40a ff7 fs19 fc1 sc0 ls0 ws0">Interestingly<span class="_ _3"></span>,<span class="_"> </span>all<span class="_"> </span>network<span class="_"> </span>applications<span class="_ _11"> </span>are<span class="_"> </span>based<span class="_"> </span>on<span class="_ _11"> </span>the<span class="_"> </span>same<span class="_"> </span>basic<span class="_"> </span>programming</div><div class="t m5 x1d h26 y40b ff7 fs19 fc1 sc0 ls0 ws0">model,<span class="_"> </span>have<span class="_"> </span>similar<span class="_ _13"> </span>overall<span class="_"> </span>logical<span class="_"> </span>structures<span class="_ _3"></span>,<span class="_"> </span>and<span class="_"> </span>rely<span class="_"> </span>on<span class="_"> </span>the<span class="_ _13"> </span>same<span class="_"> </span>programming</div><div class="t m5 x1d h26 y40c ff7 fs19 fc1 sc0 ls0 ws0">interface<span class="_ _1"></span>.</div><div class="t m5 x29 h26 y40d ff7 fs19 fc1 sc0 ls0 ws0">Network<span class="_ _15"> </span>applications<span class="_ _15"> </span>rely<span class="_ _15"> </span>on<span class="_ _14"> </span>many<span class="_ _15"> </span>of<span class="_ _15"> </span>the<span class="_ _15"> </span>concepts<span class="_ _15"> </span>that<span class="_ _15"> </span>you<span class="_ _15"> </span>have<span class="_ _15"> </span>already</div><div class="t m5 x1d h26 y40e ff7 fs19 fc1 sc0 ls0 ws0">learned<span class="_ _14"> </span>in<span class="_ _16"> </span>our<span class="_ _14"> </span>study<span class="_ _14"> </span>of<span class="_ _14"> </span>systems<span class="_ _1"></span>.<span class="_ _14"> </span>F<span class="_ _1"></span>or<span class="_ _14"> </span>example<span class="_ _0"></span>,<span class="_ _14"> </span>processes<span class="_ _1"></span>,<span class="_ _15"> </span>signals<span class="_ _1"></span>,<span class="_ _15"> </span>byte<span class="_ _14"> </span>ordering,</div><div class="t m5 x1d h26 y40f ff7 fs19 fc1 sc0 ls0 ws0">memory<span class="_"> </span>mapping<span class="_ _1"></span>,<span class="_"> </span>and<span class="_"> </span>dynamic<span class="_"> </span>storage<span class="_ _13"> </span>allocation<span class="_"> </span>all<span class="_"> </span>play<span class="_ _13"> </span>important<span class="_"> </span>roles<span class="_ _1"></span>.<span class="_"> </span>T<span class="_ _1"></span>here</div><div class="t m5 x1d h26 y410 ff7 fs19 fc1 sc0 ls0 ws0">are<span class="_"> </span>new<span class="_"> </span>concepts<span class="_"> </span>to<span class="_"> </span>master<span class="_ _11"> </span>as<span class="_"> </span>well.<span class="_"> </span>Y<span class="_ _3"></span>ou<span class="_"> </span>will<span class="_"> </span>need<span class="_ _11"> </span>to<span class="_"> </span>understand<span class="_"> </span>the<span class="_"> </span>basic<span class="_ _11"> </span>client-</div><div class="t m5 x1d h26 y411 ff7 fs19 fc1 sc0 ls0 ws0">server<span class="_"> </span>programming<span class="_ _11"> </span>model<span class="_"> </span>and<span class="_ _11"> </span>how<span class="_"> </span>to<span class="_ _11"> </span>write<span class="_"> </span>client-server<span class="_ _11"> </span>programs<span class="_"> </span>that<span class="_ _11"> </span>use<span class="_"> </span>the</div><div class="t m5 x1d h26 y412 ff7 fs19 fc1 sc0 ls0 ws0">services<span class="_ _13"> </span>provided<span class="_ _13"> </span>by<span class="_ _6"> </span>the<span class="_ _13"> </span>Internet.<span class="_ _13"> </span>At<span class="_ _13"> </span>the<span class="_ _6"> </span>end,<span class="_ _13"> </span>we<span class="_ _13"> </span>will<span class="_ _13"> </span>tie<span class="_ _13"> </span>all<span class="_ _13"> </span>of<span class="_ _6"> </span>these<span class="_ _13"> </span>ideas<span class="_ _13"> </span>together</div><div class="t m5 x1d h26 y413 ff7 fs19 fc1 sc0 ls0 ws0">by<span class="_ _15"> </span>developing<span class="_ _15"> </span>a<span class="_ _15"> </span>tiny<span class="_ _15"> </span>but<span class="_ _15"> </span>functional<span class="_ _21"> </span>W<span class="_ _3"></span>eb<span class="_ _15"> </span>server<span class="_ _15"> </span>that<span class="_ _21"> </span>can<span class="_ _15"> </span>serve<span class="_ _15"> </span>both<span class="_ _15"> </span>static<span class="_ _15"> </span>and</div><div class="t m5 x1d h26 y414 ff7 fs19 fc1 sc0 ls0 ws0">dynamic<span class="_"> </span>content<span class="_"> </span>with<span class="_"> </span>text<span class="_"> </span>and<span class="_"> </span>graphics<span class="_"> </span>to<span class="_"> </span>real<span class="_"> </span>W<span class="_ _3"></span>eb<span class="_"> </span>browsers<span class="_ _1"></span>.</div><div class="t m5 x1d h3b y79b4 fff fs24 fc6 sc0 ls0 ws0">11.1<span class="_ _17"> </span><span class="ffe fs18">The<span class="_"> </span>Client-Ser<span class="_ _2"></span>ver<span class="_"> </span>Programming<span class="_"> </span>Model</span></div><div class="t m5 x1d h26 y79b5 ff7 fs19 fc1 sc0 ls0 ws0">Every<span class="_ _13"> </span>network<span class="_ _6"> </span>application<span class="_ _13"> </span>is<span class="_ _13"> </span>based<span class="_ _6"> </span>on<span class="_ _13"> </span>the<span class="_ _13"> </span><span class="ffa">client-server<span class="_ _13"> </span>model</span>.<span class="_ _13"> </span>W<span class="_ _0"></span>ith<span class="_ _13"> </span>this<span class="_ _6"> </span>model,<span class="_ _13"> </span>an</div><div class="t m5 x1d h26 y79b6 ff7 fs19 fc1 sc0 ls0 ws0">application<span class="_ _13"> </span>consists<span class="_"> </span>of<span class="_ _13"> </span>a<span class="_ _13"> </span><span class="ffa">server<span class="_ _11"> </span></span>process<span class="_ _13"> </span>and<span class="_"> </span>one<span class="_ _13"> </span>or<span class="_"> </span>more<span class="_ _13"> </span><span class="ffa">client<span class="_"> </span></span>processes<span class="_ _1"></span>.<span class="_"> </span>A<span class="_ _13"> </span>server</div><div class="t m5 x1d h26 y79b7 ff7 fs19 fc1 sc0 ls0 ws0">manages<span class="_ _6"> </span>some<span class="_ _6"> </span><span class="ffa">resource</span>,<span class="_ _13"> </span>and<span class="_ _6"> </span>it<span class="_ _6"> </span>provides<span class="_ _6"> </span>some<span class="_ _13"> </span><span class="ffa">service<span class="_ _a"> </span></span>for<span class="_ _13"> </span>its<span class="_ _a"> </span>clients<span class="_ _6"> </span>by<span class="_ _13"> </span>manipulating</div><div class="t m5 x1d h26 y79b8 ff7 fs19 fc1 sc0 ls0 ws0">that<span class="_ _6"> </span>resource.<span class="_ _6"> </span>F<span class="_ _1"></span>or<span class="_ _13"> </span>example<span class="_ _1"></span>,<span class="_ _13"> </span>a<span class="_ _6"> </span>W<span class="_ _1"></span>eb<span class="_ _6"> </span>server<span class="_ _13"> </span>manages<span class="_ _6"> </span>a<span class="_ _13"> </span>set<span class="_ _6"> </span>of<span class="_ _13"> </span>disk<span class="_ _6"> </span>ﬁles<span class="_ _13"> </span>that<span class="_ _6"> </span>it<span class="_ _6"> </span>retrieves</div><div class="t m5 x1d h26 y79b9 ff7 fs19 fc1 sc0 ls0 ws0">and<span class="_"> </span>executes<span class="_ _13"> </span>on<span class="_"> </span>behalf<span class="_ _13"> </span>of<span class="_"> </span>clients<span class="_ _3"></span>.<span class="_"> </span>An<span class="_ _13"> </span>FTP<span class="_"> </span>server<span class="_ _13"> </span>manages<span class="_"> </span>a<span class="_ _13"> </span>set<span class="_"> </span>of<span class="_ _13"> </span>disk<span class="_"> </span>ﬁles<span class="_ _13"> </span>that<span class="_"> </span>it</div><div class="t m5 x1d h26 y79ba ff7 fs19 fc1 sc0 ls0 ws0">stores<span class="_ _13"> </span>and<span class="_"> </span>retrieves<span class="_ _13"> </span>for<span class="_ _13"> </span>clients<span class="_ _1"></span>.<span class="_ _13"> </span>Similarly<span class="_ _3"></span>,<span class="_"> </span>an<span class="_ _13"> </span>email<span class="_ _13"> </span>server<span class="_ _13"> </span>manages<span class="_"> </span>a<span class="_ _13"> </span>spool<span class="_ _13"> </span>ﬁle<span class="_ _13"> </span>that</div><div class="t m5 x1d h26 y79bb ff7 fs19 fc1 sc0 ls0 ws0">it<span class="_"> </span>reads<span class="_"> </span>and<span class="_"> </span>updates<span class="_"> </span>for<span class="_"> </span>clients<span class="_ _1"></span>.</div><div class="t m5 x29 h26 y79bc ff7 fs19 fc1 sc0 ls0 ws0">T<span class="_ _1"></span>he<span class="_"> </span>fundamental<span class="_"> </span>operation<span class="_"> </span>in<span class="_"> </span>the<span class="_ _13"> </span>client-server<span class="_"> </span>model<span class="_"> </span>is<span class="_"> </span>the<span class="_"> </span><span class="ffa">transaction<span class="_ _13"> </span></span>(Fig-</div><div class="t m5 x1d h26 y79bd ff7 fs19 fc1 sc0 ls0 ws0">ure<span class="_"> </span>11.1).<span class="_"> </span>A<span class="_"> </span>client-server<span class="_"> </span>transaction<span class="_"> </span>consists<span class="_"> </span>of<span class="_"> </span>four<span class="_"> </span>steps:</div><div class="t m5 xc5 h26 y79be ffc fs19 fc1 sc0 ls0 ws0">1.<span class="_ _e"> </span><span class="ff7">When<span class="_ _11"> </span>a<span class="_"> </span>client<span class="_ _11"> </span>needs<span class="_ _11"> </span>service<span class="_ _0"></span>,<span class="_ _11"> </span>it<span class="_"> </span>initiates<span class="_ _11"> </span>a<span class="_ _11"> </span>transaction<span class="_ _11"> </span>by<span class="_ _11"> </span>sending<span class="_"> </span>a<span class="_ _11"> </span><span class="ffa">request<span class="_ _16"> </span></span>to</span></div><div class="t m5 x29 h26 y79bf ff7 fs19 fc1 sc0 ls0 ws0">the<span class="_"> </span>server.<span class="_"> </span>F<span class="_ _1"></span>or<span class="_ _11"> </span>example<span class="_ _0"></span>,<span class="_"> </span>when<span class="_ _11"> </span>a<span class="_ _11"> </span>W<span class="_ _3"></span>eb<span class="_ _11"> </span>browser<span class="_"> </span>needs<span class="_ _11"> </span>a<span class="_ _11"> </span>ﬁle<span class="_ _0"></span>,<span class="_"> </span>it<span class="_ _11"> </span>sends<span class="_ _11"> </span>a<span class="_"> </span>request</div><div class="t m5 x29 h26 y79c0 ff7 fs19 fc1 sc0 ls0 ws0">to<span class="_"> </span>a<span class="_"> </span>W<span class="_ _3"></span>eb<span class="_"> </span>server.</div><div class="t m5 xc5 h26 y79c1 ffc fs19 fc1 sc0 ls0 ws0">2.<span class="_ _e"> </span><span class="ff7">The<span class="_ _13"> </span>server<span class="_ _13"> </span>receives<span class="_"> </span>the<span class="_ _13"> </span>request,<span class="_ _13"> </span>interprets<span class="_"> </span>it,<span class="_ _13"> </span>and<span class="_ _13"> </span>manipulates<span class="_"> </span>its<span class="_ _13"> </span>resources<span class="_ _13"> </span>in</span></div><div class="t m5 x29 h26 y79c2 ff7 fs19 fc1 sc0 ls0 ws0">the<span class="_ _13"> </span>appropriate<span class="_ _13"> </span>way<span class="_ _3"></span>.<span class="_ _13"> </span>F<span class="_ _1"></span>or<span class="_ _13"> </span>example<span class="_ _1"></span>,<span class="_"> </span>when<span class="_ _13"> </span>a<span class="_ _13"> </span>W<span class="_ _3"></span>eb<span class="_ _13"> </span>server<span class="_ _13"> </span>receives<span class="_ _13"> </span>a<span class="_ _13"> </span>request<span class="_ _13"> </span>from</div><div class="t m5 x29 h26 y79c3 ff7 fs19 fc1 sc0 ls0 ws0">a<span class="_"> </span>browser,<span class="_"> </span>it<span class="_"> </span>reads<span class="_"> </span>a<span class="_"> </span>disk<span class="_"> </span>ﬁle<span class="_ _1"></span>.</div><div class="t m5 xc5 h26 y79c4 ffc fs19 fc1 sc0 ls0 ws0">3.<span class="_ _e"> </span><span class="ff7">The<span class="_"> </span>server<span class="_"> </span>sends<span class="_"> </span>a<span class="_"> </span><span class="ffa">response<span class="_"> </span></span>to<span class="_"> </span>the<span class="_"> </span>client<span class="_"> </span>and<span class="_ _11"> </span>then<span class="_"> </span>waits<span class="_"> </span>for<span class="_"> </span>the<span class="_"> </span>next<span class="_"> </span>request.</span></div><div class="t m5 x29 h26 y79c5 ff7 fs19 fc1 sc0 ls0 ws0">F<span class="_ _1"></span>or<span class="_"> </span>example<span class="_ _1"></span>,<span class="_"> </span>a<span class="_"> </span>W<span class="_ _1"></span>eb<span class="_"> </span>server<span class="_"> </span>sends<span class="_"> </span>the<span class="_"> </span>ﬁle<span class="_"> </span>back<span class="_"> </span>to<span class="_"> </span>a<span class="_"> </span>client.</div><div class="t m5 x1f h3f y79c6 ffc8 fs27 fc1 sc0 ls0 ws0">4.<span class="_ _1"></span> Client</div><div class="t m5 x1d h3f y79c7 ffc8 fs27 fc1 sc0 ls0 ws0">processes</div><div class="t m5 x155 h3f y79c8 ffc8 fs27 fc1 sc0 ls0 ws0">response</div><div class="t m5 x189 h3f y79c9 ffc8 fs27 fc1 sc0 ls0 ws0">1.<span class="_ _1"></span> Client sends request </div><div class="t m5 x91 h3f y79c6 ffc8 fs27 fc1 sc0 ls0 ws0">3.<span class="_ _1"></span> Ser<span class="_ _2"></span>ver sends response<span class="_ _16d"> </span>2.<span class="_ _1"></span> Ser<span class="_ _2"></span>ver </div><div class="t m5 x11a h3f y79c7 ffc8 fs27 fc1 sc0 ls0 ws0">processes</div><div class="t m5 x18c h3f y79c8 ffc8 fs27 fc1 sc0 ls0 ws0">request</div><div class="t m5 x1cc h3f y79ca ffd4 fs27 fc1 sc0 ls0 ws0">Client</div><div class="t m5 x1b7 h3f y79cb ffd4 fs27 fc1 sc0 ls0 ws0">process</div><div class="t m5 x1ad h3f y79ca ffd4 fs27 fc1 sc0 ls0 ws0">Server</div><div class="t m5 x12e h3f y79cb ffd4 fs27 fc1 sc0 ls0 ws0">process</div><div class="t m5 x1f1 h3f y79cc ffd4 fs27 fc1 sc0 ls0 ws0">Resource</div><div class="t m5 x1d h2f y7956 ffe fs16 fc6 sc0 ls0 ws0">Figure<span class="_"> </span>11.1<span class="_ _66"> </span><span class="fc1">A<span class="_"> </span>client-ser<span class="_ _2"></span>ver<span class="_"> </span>transaction.</span></div></div><div class="pi" data-data='{"ctm":[2.000000,0.000000,0.000000,2.000000,0.000000,0.000000]}'></div></div>
