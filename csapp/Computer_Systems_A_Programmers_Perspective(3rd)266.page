<div id="pf10a" class="pf w2 h11" data-page-no="10a"><div class="pc pc10a w2 h11"><img class="bi x0 y0 w1 h1" alt="" src="csapp/bg10a.png"/><div class="t m5 x1dc h28 y9b ff6 fs1f fc2 sc0 ls0 ws0">Section<span class="_ _10"> </span>3.6<span class="_ _60"> </span>Control<span class="_ _3e"> </span><span class="ffe fs1e">265</span></div><div class="t m5 x17 h26 ye7 ff7 fs19 fc2 sc0 ls0 ws0">T<span class="_ _1"></span>he<span class="_"> </span>C<span class="_ _13"> </span>language<span class="_ _13"> </span>standard<span class="_ _13"> </span>states<span class="_ _13"> </span>(with<span class="_"> </span>one<span class="_ _13"> </span>exception,<span class="_ _13"> </span>highlighted<span class="_"> </span>in<span class="_ _13"> </span>Problem<span class="_ _13"> </span>3.29)</div><div class="t m5 x17 h26 y2a7 ff7 fs19 fc2 sc0 ls0 ws0">that<span class="_ _11"> </span>the<span class="_ _16"> </span>behavior<span class="_ _11"> </span>of<span class="_ _16"> </span>such<span class="_ _11"> </span>a<span class="_ _11"> </span>loop<span class="_ _16"> </span>is<span class="_ _11"> </span>identical<span class="_ _16"> </span>to<span class="_ _11"> </span>the<span class="_ _16"> </span>following<span class="_ _11"> </span>code<span class="_ _11"> </span>using<span class="_ _16"> </span>a<span class="_ _11"> </span><span class="ffd">while</span></div><div class="t m5 x17 h26 y2a8 ff7 fs19 fc2 sc0 ls0 ws0">loop:</div><div class="t m5 x17 h53 y27bf ffa fs1e fc2 sc0 ls0 ws0">init-expr<span class="_ _2"></span><span class="ffd">;</span></div><div class="t m5 x17 h53 y27c0 ffd fs1e fc2 sc0 ls0 ws0">while<span class="_ _e"> </span>(<span class="ffa">test-expr<span class="_ _2"></span></span><span class="ls33">){</span></div><div class="t m5 x1b6 h53 y27c1 ffa fs1e fc2 sc0 ls0 ws0">body-statement</div><div class="t m5 x1b6 h53 y27c2 ffa fs1e fc2 sc0 ls0 ws0">update-expr<span class="_ _2"></span><span class="ffd">;</span></div><div class="t m5 x17 h2d y27c3 ffd fs1e fc2 sc0 ls0 ws0">}</div><div class="t m5 x26 h26 y27c4 ff7 fs19 fc2 sc0 ls0 ws0">T<span class="_ _1"></span>he<span class="_ _11"> </span>program<span class="_"> </span>ﬁrst<span class="_ _11"> </span>evaluates<span class="_"> </span>the<span class="_ _11"> </span>initialization<span class="_"> </span>expression<span class="_ _11"> </span><span class="ffa">init-expr<span class="_ _2"></span></span>.<span class="_"> </span>It<span class="_ _11"> </span>enters<span class="_"> </span>a</div><div class="t m5 x17 h26 y27c5 ff7 fs19 fc2 sc0 ls0 ws0">loop<span class="_ _6"> </span>where<span class="_ _13"> </span>it<span class="_ _6"> </span>ﬁrst<span class="_ _13"> </span>evaluates<span class="_ _6"> </span>the<span class="_ _13"> </span>test<span class="_ _6"> </span>condition<span class="_ _13"> </span><span class="ffa">test-expr<span class="_ _2"></span></span>,<span class="_ _13"> </span>exiting<span class="_ _6"> </span>if<span class="_ _13"> </span>the<span class="_ _6"> </span>test<span class="_ _13"> </span>fails<span class="_ _3"></span>,<span class="_ _13"> </span>then</div><div class="t m5 x17 h26 y27c6 ff7 fs19 fc2 sc0 ls0 ws0">executes<span class="_ _14"> </span>the<span class="_ _16"> </span>body<span class="_ _14"> </span>of<span class="_ _14"> </span>the<span class="_ _14"> </span>loop<span class="_ _14"> </span><span class="ffa">body-statement<span class="_ _2"></span></span>,<span class="_ _15"> </span>and<span class="_ _14"> </span>ﬁnally<span class="_ _14"> </span>evaluates<span class="_ _16"> </span>the<span class="_ _14"> </span>update</div><div class="t m5 x17 h26 y27c7 ff7 fs19 fc2 sc0 ls0 ws0">expression<span class="_"> </span><span class="ffa">update-expr<span class="_ _2"></span></span>.</div><div class="t m5 x26 h26 y27c8 ff7 fs19 fc2 sc0 ls0 ws0">T<span class="_ _1"></span>he<span class="_"> </span>code<span class="_ _11"> </span>generated<span class="_"> </span>by<span class="_"> </span><span class="ff9">gcc<span class="_ _11"> </span></span>for<span class="_"> </span>a<span class="_"> </span><span class="ffd">for<span class="_ _10"> </span></span>loop<span class="_ _11"> </span>then<span class="_"> </span>follows<span class="_"> </span>one<span class="_"> </span>of<span class="_"> </span>our<span class="_ _11"> </span>two<span class="_"> </span>trans-</div><div class="t m5 x17 h26 y27c9 ff7 fs19 fc2 sc0 ls0 ws0">lation<span class="_ _13"> </span>strategies<span class="_"> </span>for<span class="_ _13"> </span><span class="ffd">while<span class="_ _13"> </span></span>loops<span class="_ _1"></span>,<span class="_"> </span>depending<span class="_ _13"> </span>on<span class="_"> </span>the<span class="_ _13"> </span>optimization<span class="_ _13"> </span>level.<span class="_"> </span>T<span class="_ _1"></span>hat<span class="_ _13"> </span>is<span class="_ _1"></span>,<span class="_"> </span>the</div><div class="t m5 x17 h26 y27ca ff7 fs19 fc2 sc0 ls0 ws0">jump-to-middle<span class="_"> </span>strategy<span class="_"> </span>yields<span class="_"> </span>the<span class="_"> </span>goto<span class="_"> </span>code</div><div class="t m5 x1b6 h53 y27cb ffa fs1e fc2 sc0 ls0 ws0">init-expr<span class="_ _2"></span><span class="ffd">;</span></div><div class="t m5 x1b6 h2d y27cc ffd fs1e fc2 sc0 ls0 ws0">goto<span class="_ _e"> </span>test;</div><div class="t m5 x17 h2d y27cd ffd fs1e fc2 sc0 ls0 ws0">loop:</div><div class="t m5 x1b6 h53 y27ce ffa fs1e fc2 sc0 ls0 ws0">body-statement</div><div class="t m5 x1b6 h53 y27cf ffa fs1e fc2 sc0 ls0 ws0">update-expr<span class="_ _2"></span><span class="ffd">;</span></div><div class="t m5 x17 h2d y27d0 ffd fs1e fc2 sc0 ls0 ws0">test:</div><div class="t m5 x1b6 h53 y27d1 ffd fs1e fc2 sc0 ls33 ws0">t=<span class="ffa ls0">test-expr<span class="_ _2"></span><span class="ffd">;</span></span></div><div class="t m5 x1b6 h2d y27d2 ffd fs1e fc2 sc0 ls0 ws0">if<span class="_ _e"> </span>(t)</div><div class="t m5 x21e h2d y27d3 ffd fs1e fc2 sc0 ls0 ws0">goto<span class="_ _e"> </span>loop;</div><div class="t m5 x17 h26 y27d4 ff7 fs19 fc2 sc0 ls0 ws0">while<span class="_"> </span>the<span class="_"> </span>guarded-do<span class="_"> </span>strategy<span class="_"> </span>yields</div><div class="t m5 x1b6 h53 y27d5 ffa fs1e fc2 sc0 ls0 ws0">init-expr<span class="_ _2"></span><span class="ffd">;</span></div><div class="t m5 x1b6 h53 y27d6 ffd fs1e fc2 sc0 ls33 ws0">t=<span class="ffa ls0">test-expr<span class="_ _2"></span><span class="ffd">;</span></span></div><div class="t m5 x1b6 h2d y27d7 ffd fs1e fc2 sc0 ls0 ws0">if<span class="_ _e"> </span>(!t)</div><div class="t m5 x21e h2d y27d8 ffd fs1e fc2 sc0 ls0 ws0">goto<span class="_ _e"> </span>done;</div><div class="t m5 x17 h2d y27d9 ffd fs1e fc2 sc0 ls0 ws0">loop:</div><div class="t m5 x1b6 h53 y27da ffa fs1e fc2 sc0 ls0 ws0">body-statement</div><div class="t m5 x1b6 h53 y27db ffa fs1e fc2 sc0 ls0 ws0">update-expr<span class="_ _2"></span><span class="ffd">;</span></div><div class="t m5 x1b6 h53 y27dc ffd fs1e fc2 sc0 ls33 ws0">t=<span class="ffa ls0">test-expr<span class="_ _2"></span><span class="ffd">;</span></span></div><div class="t m5 x1b6 h2d y27dd ffd fs1e fc2 sc0 ls0 ws0">if<span class="_ _e"> </span>(t)</div><div class="t m5 x21e h2d y27de ffd fs1e fc2 sc0 ls0 ws0">goto<span class="_ _e"> </span>loop;</div><div class="t m5 x17 h2d y27df ffd fs1e fc2 sc0 ls0 ws0">done:</div><div class="t m5 x26 h26 y27e0 ff7 fs19 fc2 sc0 ls0 ws0">As<span class="_"> </span>examples<span class="_ _1"></span>,<span class="_"> </span>consider<span class="_"> </span>a<span class="_"> </span>factorial<span class="_"> </span>function<span class="_"> </span>written<span class="_"> </span>with<span class="_"> </span>a<span class="_"> </span><span class="ffd">for<span class="_ _10"> </span></span>loop:</div><div class="t m5 x17 h2d y587 ffd fs1e fc2 sc0 ls0 ws0">long<span class="_ _e"> </span>fact_for(long<span class="_ _1f"> </span>n)</div><div class="t m5 x17 h2d y267f ffd fs1e fc2 sc0 ls0 ws0">{</div><div class="t m5 x1b6 h2d y2680 ffd fs1e fc2 sc0 ls0 ws0">long<span class="_ _e"> </span>i;</div><div class="t m5 x1b6 h2d y2681 ffd fs1e fc2 sc0 ls0 ws0">long<span class="_ _e"> </span>result<span class="_ _1f"> </span>=<span class="_ _1f"> </span>1;</div></div><div class="pi" data-data='{"ctm":[2.000000,0.000000,0.000000,2.000000,0.000000,0.000000]}'></div></div>
