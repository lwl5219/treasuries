<div id="pf33d" class="pf w2 h11" data-page-no="33d"><div class="pc pc33d w2 h11"><img class="bi x0 y0 w1 h1" alt="" src="csapp/bg33d.png"/><div class="t m5 x14 h28 y9b ffe fs1e fc2 sc0 ls0 ws0">828<span class="_ _1b"> </span><span class="ff6 fs1f">Chapter<span class="_ _10"> </span>8<span class="_ _3d"> </span>Exceptional<span class="_ _10"> </span>Control<span class="_ _10"> </span>Flow</span></div><div class="t m5 x124 h26 y9c ff7 fs19 fc2 sc0 ls0 ws0">C.<span class="_ _25"> </span>102120</div><div class="t m5 x124 h26 y12a4 ff7 fs19 fc2 sc0 ls0 ws0">D<span class="_ _3"></span>.<span class="_ _23"> </span>122001</div><div class="t m5 x124 h26 y328 ff7 fs19 fc2 sc0 ls0 ws0">E.<span class="_ _25"> </span>100212</div><div class="t m5 x1d h73 y6af6 ffe fs1e fc6 sc0 ls0 ws0">8.19<span class="_ _23"> </span><span class="ff10 fs19">◆◆</span></div><div class="t m5 x1d h26 y6af7 ff7 fs19 fc1 sc0 ls0 ws0">How<span class="_ _15"> </span>many<span class="_ _21"> </span>lines<span class="_ _21"> </span>of<span class="_ _21"> </span>output<span class="_ _21"> </span>does<span class="_ _21"> </span>the<span class="_ _21"> </span>following<span class="_ _21"> </span>function<span class="_ _21"> </span>print<span class="_ _21"> </span>if<span class="_ _21"> </span>the<span class="_ _21"> </span>value<span class="_ _21"> </span>of<span class="_ _21"> </span><span class="ff11">n</span></div><div class="t m5 x1d h26 y6af8 ff7 fs19 fc1 sc0 ls0 ws0">entered<span class="_"> </span>by<span class="_"> </span>the<span class="_"> </span>user<span class="_"> </span>is<span class="_"> </span>6?</div><div class="t m5 x98 h2c y6af9 ffa fs16 fc1 sc0 ls0 ws0">code/ecf/global-forkprob8.c</div><div class="t m5 x1f h2d y6afa ff6 fs20 fc6 sc0 ls0 ws0">1<span class="_ _1c"> </span><span class="ffd fs1e fc2">void<span class="_ _1f"> </span>foo(int<span class="_ _e"> </span>n)</span></div><div class="t m5 x1f h2d y6afb ff6 fs20 fc6 sc0 ls0 ws0">2<span class="_ _1c"> </span><span class="ffd fs1e fc2">{</span></div><div class="t m5 x1f h2d y6afc ff6 fs20 fc6 sc0 ls0 ws0">3<span class="_ _20"> </span><span class="ffd fs1e fc2">int<span class="_ _e"> </span>i;</span></div><div class="t m5 x1f h2e y6afd ff6 fs20 fc6 sc0 ls0 ws0">4</div><div class="t m5 x1f h2e y6afe ff6 fs20 fc6 sc0 ls0 ws0">5</div><div class="t m5 x33 h2d y6aff ffd fs1e fc2 sc0 ls33 ws0">f<span class="_ _41"></span>o<span class="_ _41"></span>r(<span class="_ _41"></span>i=n-1<span class="_ _41"></span>;i&gt;<span class="_ _41"></span>=0<span class="_ _41"></span>;i-<span class="_ _41"></span>=2<span class="_ _41"></span>)</div><div class="t m5 x1f h2d y6b00 ff6 fs20 fc6 sc0 ls0 ws0">6<span class="_ _70"> </span><span class="ffd fs1e fc2">Fork();</span></div><div class="t m5 x1f h2e y6b01 ff6 fs20 fc6 sc0 ls0 ws0">7</div><div class="t m5 x33 h2d y6b02 ffd fs1e fc2 sc0 ls0 ws0">printf(&quot;hello\n&quot;);</div><div class="t m5 x1f h2d y6b03 ff6 fs20 fc6 sc0 ls0 ws0">8<span class="_ _20"> </span><span class="ffd fs1e fc2">exit(0);</span></div><div class="t m5 x1f h2d y6b04 ff6 fs20 fc6 sc0 ls0 ws0">9<span class="_ _1c"> </span><span class="ffd fs1e fc2">}</span></div><div class="t m5 x98 h2c y6b05 ffa fs16 fc2 sc0 ls0 ws0">code/ecf/global-forkprob8.c</div><div class="t m5 x1d h73 y6b06 ffe fs1e fc6 sc0 ls0 ws0">8.20<span class="_ _23"> </span><span class="ff10 fs19">◆◆</span></div><div class="t m5 x1d h26 y6b07 ff7 fs19 fc1 sc0 ls0 ws0">Use<span class="_ _14"> </span><span class="ffd">execve<span class="_ _15"> </span></span>to<span class="_ _14"> </span>write<span class="_ _15"> </span>a<span class="_ _15"> </span>program<span class="_ _14"> </span>called<span class="_ _15"> </span><span class="ffd">myls<span class="_ _14"> </span></span>whose<span class="_ _15"> </span>behavior<span class="_ _15"> </span>is<span class="_ _14"> </span>identical<span class="_ _15"> </span>to<span class="_ _14"> </span>the</div><div class="t m5 x1d h26 y6b08 ffd fs19 fc1 sc0 ls0 ws0">/bin/ls<span class="_ _15"> </span><span class="ff7">program.<span class="_ _15"> </span>Y<span class="_ _3"></span>our<span class="_ _21"> </span>program<span class="_ _15"> </span>should<span class="_ _15"> </span>accept<span class="_ _21"> </span>the<span class="_ _15"> </span>same<span class="_ _21"> </span>command-line<span class="_ _15"> </span>argu-</span></div><div class="t m5 x1d h26 y6b09 ff7 fs19 fc1 sc0 ls0 ws0">ments<span class="_ _1"></span>,<span class="_ _14"> </span>interpret<span class="_ _14"> </span>the<span class="_ _14"> </span>identical<span class="_ _14"> </span>environment<span class="_ _14"> </span>variables<span class="_ _1"></span>,<span class="_ _15"> </span>and<span class="_ _14"> </span>produce<span class="_ _14"> </span>the<span class="_ _14"> </span>identical</div><div class="t m5 x1d h26 y6b0a ff7 fs19 fc1 sc0 ls0 ws0">output.</div><div class="t m5 x29 h26 y6b0b ff7 fs19 fc1 sc0 lsd ws0">Th<span class="_ _2"></span>e<span class="_ _16"> </span><span class="ffd ls0">ls<span class="_ _11"> </span><span class="ff7">program<span class="_ _16"> </span>gets<span class="_ _11"> </span>the<span class="_ _11"> </span>width<span class="_ _11"> </span>of<span class="_ _16"> </span>the<span class="_ _11"> </span>screen<span class="_ _11"> </span>from<span class="_ _11"> </span>the<span class="_ _16"> </span>COLUMNS<span class="_ _11"> </span>environ-</span></span></div><div class="t m5 x1d h26 y6b0c ff7 fs19 fc1 sc0 ls0 ws0">ment<span class="_ _21"> </span>variable.<span class="_ _15"> </span>If<span class="_ _f"> </span>COLUMNS<span class="_ _f"> </span>is<span class="_ _21"> </span>unset,<span class="_ _e"> </span>then<span class="_ _21"> </span><span class="ffd">ls<span class="_ _f"> </span></span>assumes<span class="_ _f"> </span>that<span class="_ _21"> </span>the<span class="_ _f"> </span>screen<span class="_ _21"> </span>is<span class="_ _f"> </span>80</div><div class="t m5 x1d h26 y6b0d ff7 fs19 fc1 sc0 ls0 ws0">columns<span class="_ _16"> </span>wide<span class="_ _1"></span>.<span class="_ _16"> </span>Thus<span class="_ _3"></span>,<span class="_ _14"> </span>you<span class="_ _16"> </span>can<span class="_ _16"> </span>check<span class="_ _16"> </span>your<span class="_ _16"> </span>handling<span class="_ _16"> </span>of<span class="_ _16"> </span>the<span class="_ _16"> </span>environment<span class="_ _16"> </span>variables</div><div class="t m5 x1d h26 y6b0e ff7 fs19 fc1 sc0 ls0 ws0">by<span class="_"> </span>setting<span class="_"> </span>the<span class="_"> </span>COLUMNS<span class="_"> </span>environment<span class="_"> </span>to<span class="_"> </span>something<span class="_"> </span>less<span class="_"> </span>than<span class="_"> </span>80:</div><div class="t m5 x1d h2d y6b0f ffd fs1e fc2 sc0 ls0 ws0">linux&gt;<span class="_ _e"> </span><span class="ff13">setenv<span class="_ _1f"> </span>COLUMNS<span class="_ _1f"> </span>40</span></div><div class="t m5 x1d h2d y6b10 ffd fs1e fc2 sc0 ls0 ws0">linux&gt;<span class="_ _e"> </span><span class="ff13">./myls</span></div><div class="t m5 x75 h2d y6b11 ffd fs1e fc2 sc0 ls0 ws0">.</div><div class="t m5 x75 h2d y6b12 ffd fs1e fc2 sc0 ls0 ws0">.</div><div class="t m5 x75 h2d y6b13 ffd fs1e fc2 sc0 ls0 ws0">.</div><div class="t m5 xc4 h53 y6b14 ffa fs1e fc2 sc0 ls0 ws0">//<span class="_"> </span>Output<span class="_"> </span>is<span class="_"> </span>40<span class="_"> </span>columns<span class="_"> </span>wide</div><div class="t m5 x1d h2d y6b15 ffd fs1e fc2 sc0 ls0 ws0">linux&gt;<span class="_ _e"> </span><span class="ff13">unsetenv<span class="_ _1f"> </span>COLUMNS</span></div><div class="t m5 x1d h2d y6b16 ffd fs1e fc2 sc0 ls0 ws0">linux&gt;<span class="_ _e"> </span><span class="ff13">./myls</span></div><div class="t m5 x75 h2d y6b17 ffd fs1e fc2 sc0 ls0 ws0">.</div><div class="t m5 x75 h2d y6b18 ffd fs1e fc2 sc0 ls0 ws0">.</div><div class="t m5 x75 h2d y6b19 ffd fs1e fc2 sc0 ls0 ws0">.</div><div class="t m5 xc4 h53 y6b1a ffa fs1e fc2 sc0 ls0 ws0">//<span class="_"> </span>Output<span class="_"> </span>is<span class="_"> </span>now<span class="_"> </span>80<span class="_"> </span>columns<span class="_"> </span>wide</div><div class="t m5 x1d h28 y6b1b ffe fs1e fc6 sc0 ls0 ws0">8.21</div><div class="t m5 xc4 h73 y6b1c ff10 fs19 fc6 sc0 ls0 ws0">◆◆</div><div class="t m5 x1d h26 y6b1d ff7 fs19 fc1 sc0 ls0 ws0">What<span class="_"> </span>are<span class="_"> </span>the<span class="_"> </span>possible<span class="_"> </span>output<span class="_"> </span>sequences<span class="_"> </span>from<span class="_"> </span>the<span class="_"> </span>following<span class="_"> </span>program?</div><div class="t m5 x18c h2c y6b1e ffa fs16 fc1 sc0 ls0 ws0">code/ecf/global-waitprob3.c</div><div class="t m5 x1f h2e y587 ff6 fs20 fc6 sc0 ls0 ws0">1</div><div class="t m5 x4f h2d ye14 ffd fs1e fc2 sc0 ls0 ws0">int<span class="_ _e"> </span>main()</div><div class="t m5 x1f h2d yeef ff6 fs20 fc6 sc0 ls0 ws0">2<span class="_ _1c"> </span><span class="ffd fs1e fc2">{</span></div><div class="t m5 x1f h2d yd7a ff6 fs20 fc6 sc0 ls0 ws0">3<span class="_ _20"> </span><span class="ffd fs1e fc2">printf(&quot;p&quot;);<span class="_ _e"> </span>fflush(stdout);</span></div></div><div class="pi" data-data='{"ctm":[2.000000,0.000000,0.000000,2.000000,0.000000,0.000000]}'></div></div>
