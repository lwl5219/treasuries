<div id="pf2ca" class="pf w2 h11" data-page-no="2ca"><div class="pc pc2ca w2 h11"><img class="bi x0 y0 w1 h1" alt="" src="csapp/bg2ca.png"/><div class="t m5 xfb h28 y9b ff6 fs1f fc2 sc0 ls0 ws0">Section<span class="_ _10"> </span>7.5<span class="_ _60"> </span>Symbols<span class="_ _10"> </span>and<span class="_ _10"> </span>Symbol<span class="_ _10"> </span>T<span class="_ _1"></span>ables<span class="_ _3e"> </span><span class="ffe fs1e">713</span></div><div class="t m5 x34 h2a y257 fff fs1c fc2 sc0 ls0 ws0">New<span class="_ _16"> </span>to<span class="_ _16"> </span>C?<span class="_ _1b"> </span><span class="ff6 fs19">Hiding<span class="_ _11"> </span>variable<span class="_ _11"> </span>and<span class="_ _16"> </span>function<span class="_ _11"> </span>names<span class="_ _11"> </span>with<span class="_ _16"> </span><span class="ffd fs2b">static</span></span></div><div class="t m5 x34 h2b y2d0 ff7 fs1e fc2 sc0 ls0 ws0">C<span class="_ _16"> </span>programmers<span class="_ _16"> </span>use<span class="_ _16"> </span>the<span class="_ _16"> </span><span class="ffd">static<span class="_ _11"> </span></span>attribute<span class="_ _16"> </span>to<span class="_ _16"> </span>hide<span class="_ _16"> </span>variable<span class="_ _16"> </span>and<span class="_ _16"> </span>function<span class="_ _16"> </span>declarations<span class="_ _16"> </span>inside<span class="_ _16"> </span>modules<span class="_ _1"></span>,</div><div class="t m5 x34 h2b y2d1 ff7 fs1e fc2 sc0 ls0 ws0">much<span class="_ _16"> </span>as<span class="_ _16"> </span>you<span class="_ _16"> </span>would<span class="_ _16"> </span>use<span class="_ _14"> </span><span class="ffa">public<span class="_ _16"> </span></span>and<span class="_ _16"> </span><span class="ffa">private<span class="_ _14"> </span></span>declarations<span class="_ _16"> </span>in<span class="_ _16"> </span>J<span class="_ _1"></span>ava<span class="_ _16"> </span>and<span class="_ _16"> </span>C++.<span class="_ _16"> </span>In<span class="_ _14"> </span>C,<span class="_ _16"> </span>source<span class="_ _16"> </span>ﬁles<span class="_ _16"> </span>play<span class="_ _16"> </span>the</div><div class="t m5 x34 h2b y2d2 ff7 fs1e fc2 sc0 ls0 ws0">role<span class="_ _10"> </span>of<span class="_ _11"> </span>modules<span class="_ _1"></span>.<span class="_ _11"> </span>Any<span class="_"> </span>global<span class="_ _11"> </span>variable<span class="_ _11"> </span>or<span class="_"> </span>function<span class="_ _11"> </span>declared<span class="_ _11"> </span>with<span class="_"> </span>the<span class="_ _11"> </span><span class="ffd">static<span class="_ _11"> </span></span>attribute<span class="_"> </span>is<span class="_ _11"> </span>private<span class="_ _11"> </span>to<span class="_"> </span>that</div><div class="t m5 x34 h2b y2d3 ff7 fs1e fc2 sc0 ls0 ws0">module<span class="_ _1"></span>.<span class="_ _10"> </span>Similarly<span class="_ _3"></span>,<span class="_ _11"> </span>any<span class="_"> </span>global<span class="_"> </span>variable<span class="_ _10"> </span>or<span class="_ _10"> </span>function<span class="_ _10"> </span>declared<span class="_ _10"> </span>without<span class="_ _11"> </span>the<span class="_"> </span><span class="ffd">static<span class="_ _10"> </span></span>attribute<span class="_"> </span>is<span class="_ _10"> </span>public<span class="_ _10"> </span>and</div><div class="t m5 x34 h2b y2d4 ff7 fs1e fc2 sc0 ls0 ws0">can<span class="_ _11"> </span>be<span class="_ _11"> </span>accessed<span class="_ _11"> </span>by<span class="_ _11"> </span>any<span class="_ _11"> </span>other<span class="_ _11"> </span>module<span class="_ _0"></span>.<span class="_ _11"> </span>It<span class="_ _11"> </span>is<span class="_ _11"> </span>good<span class="_ _11"> </span>programming<span class="_ _11"> </span>practice<span class="_ _11"> </span>to<span class="_ _11"> </span>protect<span class="_ _11"> </span>your<span class="_ _11"> </span>variables<span class="_ _11"> </span>and</div><div class="t m5 x34 h2b y2d5 ff7 fs1e fc2 sc0 ls0 ws0">functions<span class="_"> </span>with<span class="_"> </span>the<span class="_"> </span><span class="ffd">static<span class="_ _10"> </span></span>attribute<span class="_"> </span>wherever<span class="_"> </span>possible<span class="_ _1"></span>.</div><div class="t m5 x60 h2c y5eb6 ffa fs16 fc2 sc0 ls0 ws0">code/link/elfstructs<span class="_ _1"></span>.c</div><div class="t m5 x2c h2d y5eb7 ff6 fs20 fc6 sc0 ls0 ws0">1<span class="_ _1c"> </span><span class="ffd fs1e fc2">typedef<span class="_ _1f"> </span>struct<span class="_ _e"> </span>{</span></div><div class="t m5 x2c h2d y5eb8 ff6 fs20 fc6 sc0 ls0 ws0">2<span class="_ _20"> </span><span class="ffd fs1e fc2">int<span class="_ _3f"> </span>name;<span class="_ _5a"> </span>/*<span class="_ _1f"> </span>String<span class="_ _e"> </span>table<span class="_ _1f"> </span>offset<span class="_ _1f"> </span>*/</span></div><div class="t m5 x2c h2d y5eb9 ff6 fs20 fc6 sc0 ls0 ws0">3<span class="_ _20"> </span><span class="ffd fs1e fc2">char<span class="_ _1a"> </span>type:4,<span class="_ _7b"> </span>/*<span class="_ _1f"> </span>Function<span class="_ _1f"> </span>or<span class="_ _e"> </span>data<span class="_ _1f"> </span>(4<span class="_ _e"> </span>bits)<span class="_ _1f"> </span>*/</span></div><div class="t m5 x2c h2e y5eba ff6 fs20 fc6 sc0 ls0 ws0">4</div><div class="t m5 xa4 h2d y5ebb ffd fs1e fc2 sc0 ls0 ws0">binding:4;<span class="_ _e"> </span>/*<span class="_ _1f"> </span>Local<span class="_ _1f"> </span>or<span class="_ _e"> </span>global<span class="_ _1f"> </span>(4<span class="_ _e"> </span>bits)<span class="_ _1f"> </span>*/</div><div class="t m5 x2c h2d y5ebc ff6 fs20 fc6 sc0 ls0 ws0">5<span class="_ _20"> </span><span class="ffd fs1e fc2">char<span class="_ _1a"> </span>reserved;<span class="_ _1a"> </span>/*<span class="_ _e"> </span>Unused<span class="_ _1f"> </span>*/</span></div><div class="t m5 x2c h2d y5ebd ff6 fs20 fc6 sc0 ls0 ws0">6<span class="_ _20"> </span><span class="ffd fs1e fc2">short<span class="_ _e"> </span>section;<span class="_ _3f"> </span>/*<span class="_ _1f"> </span>Section<span class="_ _1f"> </span>header<span class="_ _e"> </span>index<span class="_ _1f"> </span>*/</span></div><div class="t m5 x2c h2d y5ebe ff6 fs20 fc6 sc0 ls0 ws0">7<span class="_ _20"> </span><span class="ffd fs1e fc2">long<span class="_ _1a"> </span>value;<span class="_ _58"> </span>/*<span class="_ _1f"> </span>Section<span class="_ _1f"> </span>offset<span class="_ _e"> </span>or<span class="_ _1f"> </span>absolute<span class="_ _e"> </span>address<span class="_ _1f"> </span>*/</span></div><div class="t m5 x2c h2e y5ebf ff6 fs20 fc6 sc0 ls0 ws0">8</div><div class="t m5 x142 h2d y5ec0 ffd fs1e fc2 sc0 ls0 ws0">long<span class="_ _1a"> </span>size;<span class="_ _5a"> </span>/*<span class="_ _1f"> </span>Object<span class="_ _e"> </span>size<span class="_ _1f"> </span>in<span class="_ _e"> </span>bytes<span class="_ _1f"> </span>*/</div><div class="t m5 x2c h2d y5ec1 ff6 fs20 fc6 sc0 ls0 ws0">9<span class="_ _1c"> </span><span class="ffd fs1e fc2">}<span class="_ _1f"> </span>Elf64_Symbol;</span></div><div class="t m5 x60 h2c y5ec2 ffa fs16 fc2 sc0 ls0 ws0">code/link/elfstructs<span class="_ _1"></span>.c</div><div class="t m5 x17 h34 y5ec3 ffe fs16 fc6 sc0 ls0 ws0">Figure<span class="_"> </span>7.4<span class="_ _66"> </span><span class="fc1">ELF<span class="_"> </span>symbol<span class="_"> </span>table<span class="_"> </span>entr<span class="_ _2"></span>y<span class="_ _3"></span>.<span class="_"> </span><span class="ff6">The</span></span></div><div class="t m5 xfa h3a y5ec4 ffd fs19 fc1 sc0 ls0 ws0">type<span class="_ _10"> </span><span class="ff6 fs16">and<span class="_ _11"> </span></span>binding<span class="_ _10"> </span><span class="ff6 fs16">ﬁelds<span class="_ _10"> </span>are<span class="_ _11"> </span>4<span class="_ _10"> </span>bits<span class="_ _11"> </span>each.</span></div><div class="t m5 x17 h26 y5ec5 ff7 fs19 fc1 sc0 ls0 ws0">and<span class="_ _16"> </span>for<span class="_ _16"> </span>the<span class="_ _16"> </span>path<span class="_ _16"> </span>name<span class="_ _16"> </span>of<span class="_ _16"> </span>the<span class="_ _11"> </span>original<span class="_ _16"> </span>source<span class="_ _16"> </span>ﬁle.<span class="_ _11"> </span>So<span class="_ _16"> </span>there<span class="_ _16"> </span>are<span class="_ _16"> </span>distinct<span class="_ _16"> </span>types<span class="_ _16"> </span>for</div><div class="t m5 x17 h26 y5ec6 ff7 fs19 fc1 sc0 ls0 ws0">these<span class="_ _11"> </span>objects<span class="_ _11"> </span>as<span class="_ _16"> </span>well.<span class="_ _11"> </span>T<span class="_ _0"></span>he<span class="_ _11"> </span><span class="ffd">binding<span class="_ _11"> </span></span>ﬁeld<span class="_ _16"> </span>indicates<span class="_ _11"> </span>whether<span class="_ _11"> </span>the<span class="_ _16"> </span>symbol<span class="_ _11"> </span>is<span class="_ _11"> </span>local<span class="_ _11"> </span>or</div><div class="t m5 x17 h26 y5ec7 ff7 fs19 fc1 sc0 ls0 ws0">global.</div><div class="t m5 x26 h26 y5ec8 ff7 fs19 fc1 sc0 ls0 ws0">Each<span class="_ _13"> </span>symbol<span class="_ _6"> </span>is<span class="_ _13"> </span>assigned<span class="_ _6"> </span>to<span class="_ _13"> </span>some<span class="_ _6"> </span>section<span class="_ _13"> </span>of<span class="_ _13"> </span>the<span class="_ _6"> </span>object<span class="_ _13"> </span>ﬁle<span class="_ _1"></span>,<span class="_ _13"> </span>denoted<span class="_ _13"> </span>by<span class="_ _6"> </span>the<span class="_ _13"> </span><span class="ffd">sec-</span></div><div class="t m5 x17 h26 y5ec9 ffd fs19 fc1 sc0 ls0 ws0">tion<span class="_ _13"> </span><span class="ff7">ﬁeld,<span class="_"> </span>which<span class="_"> </span>is<span class="_ _13"> </span>an<span class="_"> </span>index<span class="_ _13"> </span>into<span class="_"> </span>the<span class="_ _13"> </span>section<span class="_"> </span>header<span class="_ _13"> </span>table<span class="_ _0"></span>.<span class="_ _13"> </span>There<span class="_ _13"> </span>are<span class="_"> </span>three<span class="_ _13"> </span>special</span></div><div class="t m5 x17 h26 y5eca ff7 fs19 fc1 sc0 ls0 ws0">pseudosections<span class="_ _13"> </span>that<span class="_ _13"> </span>don’<span class="_ _1"></span>t<span class="_ _13"> </span>have<span class="_ _13"> </span>entries<span class="_ _13"> </span>in<span class="_ _6"> </span>the<span class="_ _13"> </span>section<span class="_ _13"> </span>header<span class="_ _13"> </span>table:<span class="_ _6"> </span>ABS<span class="_ _13"> </span>is<span class="_ _13"> </span>for<span class="_ _13"> </span>sym-</div><div class="t m5 x17 h26 y5ecb ff7 fs19 fc1 sc0 ls0 ws0">bols<span class="_ _13"> </span>that<span class="_ _13"> </span>should<span class="_ _13"> </span>not<span class="_ _13"> </span>be<span class="_ _13"> </span>relocated.<span class="_ _13"> </span>UNDEF<span class="_ _13"> </span>is<span class="_ _13"> </span>for<span class="_ _13"> </span>undeﬁned<span class="_ _13"> </span>symbols—that<span class="_ _13"> </span>is<span class="_ _3"></span>,<span class="_"> </span>sym-</div><div class="t m5 x17 h26 y5ecc ff7 fs19 fc1 sc0 ls0 ws0">bols<span class="_"> </span>that<span class="_"> </span>are<span class="_ _13"> </span>referenced<span class="_"> </span>in<span class="_"> </span>this<span class="_"> </span>object<span class="_"> </span>module<span class="_ _13"> </span>but<span class="_"> </span>deﬁned<span class="_"> </span>elsewhere<span class="_ _1"></span>.<span class="_"> </span>COMMON</div><div class="t m5 x17 h26 y5ecd ff7 fs19 fc1 sc0 ls0 ws0">is<span class="_ _13"> </span>for<span class="_ _6"> </span>uninitialized<span class="_ _13"> </span>data<span class="_ _13"> </span>objects<span class="_ _6"> </span>that<span class="_ _13"> </span>are<span class="_ _6"> </span>not<span class="_ _13"> </span>yet<span class="_ _13"> </span>allocated.<span class="_ _6"> </span>F<span class="_ _1"></span>or<span class="_ _13"> </span>COMMON<span class="_ _13"> </span>symbols<span class="_ _3"></span>,</div><div class="t m5 x17 h26 y5ece ff7 fs19 fc1 sc0 ls0 ws0">the<span class="_ _6"> </span><span class="ffd">value<span class="_ _13"> </span></span>ﬁeld<span class="_ _6"> </span>gives<span class="_ _13"> </span>the<span class="_ _6"> </span>alignment<span class="_ _13"> </span>requirement,<span class="_ _13"> </span>and<span class="_ _6"> </span><span class="ffd">size<span class="_ _13"> </span></span>gives<span class="_ _6"> </span>the<span class="_ _13"> </span>minimum<span class="_ _6"> </span>size<span class="_ _1"></span>.</div><div class="t m5 x17 h26 y5ecf ff7 fs19 fc1 sc0 ls0 ws0">Note<span class="_ _11"> </span>that<span class="_ _11"> </span>these<span class="_ _11"> </span>pseudosections<span class="_ _16"> </span>exist<span class="_ _11"> </span>only<span class="_ _11"> </span>in<span class="_ _11"> </span>relocatable<span class="_ _11"> </span>object<span class="_ _16"> </span>ﬁles;<span class="_ _11"> </span>they<span class="_ _11"> </span>do<span class="_ _16"> </span>not</div><div class="t m5 x17 h26 y5ed0 ff7 fs19 fc1 sc0 ls0 ws0">exist<span class="_"> </span>in<span class="_"> </span>executable<span class="_"> </span>object<span class="_"> </span>ﬁles<span class="_ _1"></span>.</div><div class="t m5 x26 h26 y5ed1 ff7 fs19 fc1 sc0 ls0 ws0">T<span class="_ _1"></span>he<span class="_ _16"> </span>distinction<span class="_ _11"> </span>between<span class="_ _11"> </span>COMMON<span class="_ _16"> </span>and<span class="_ _11"> </span><span class="ffd">.bss<span class="_ _11"> </span></span>is<span class="_ _16"> </span>subtle<span class="_ _1"></span>.<span class="_ _11"> </span>Modern<span class="_ _16"> </span>versions<span class="_ _11"> </span>of</div><div class="t m5 x17 h26 y5ed2 ff9 fs19 fc1 sc0 ls0 ws0">gcc<span class="_ _16"> </span><span class="ff7">assign<span class="_ _16"> </span>symbols<span class="_ _16"> </span>in<span class="_ _16"> </span>relocatable<span class="_ _11"> </span>object<span class="_ _16"> </span>ﬁles<span class="_ _16"> </span>to<span class="_ _16"> </span>COMMON<span class="_ _16"> </span>and<span class="_ _16"> </span><span class="ffd">.bss<span class="_ _16"> </span></span>using<span class="_ _16"> </span>the</span></div><div class="t m5 x17 h26 y5ed3 ff7 fs19 fc1 sc0 ls0 ws0">following<span class="_"> </span>convention:</div><div class="t m5 x17 h31 y5ed4 ff7 fs21 fc1 sc0 ls0 ws0">COMMON<span class="_ _26"> </span>Uninitialized<span class="_"> </span>global<span class="_"> </span>variables</div><div class="t m5 x17 h31 y5ed5 ffd fs1e fc1 sc0 ls0 ws0">.bss<span class="_ _82"> </span><span class="ff7 fs21">Uninitialized<span class="_ _11"> </span>static<span class="_ _11"> </span>variables<span class="_ _1"></span>,<span class="_ _16"> </span>and<span class="_ _11"> </span>global<span class="_ _11"> </span>or<span class="_ _11"> </span>static<span class="_ _11"> </span>variables<span class="_ _16"> </span>that<span class="_ _10"> </span>are</span></div><div class="t m5 x10b h31 y5ed6 ff7 fs21 fc1 sc0 ls0 ws0">initialized<span class="_"> </span>to<span class="_"> </span>zero</div></div><div class="pi" data-data='{"ctm":[2.000000,0.000000,0.000000,2.000000,0.000000,0.000000]}'></div></div>
