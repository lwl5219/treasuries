<div id="pf38" class="pf w2 h11" data-page-no="38"><div class="pc pc38 w2 h11"><img class="bi x0 y0 w1 h1" alt="" src="csapp/bg38.png"/><div class="t m5 xe6 h28 y9b ff6 fs1f fc2 sc0 ls0 ws0">Section<span class="_ _10"> </span>1.8<span class="_ _3d"> </span>Systems<span class="_ _13"> </span>Communicate<span class="_ _10"> </span>with<span class="_ _10"> </span>Other<span class="_ _10"> </span>Systems<span class="_ _10"> </span>Using<span class="_ _10"> </span>Networks<span class="_ _3e"> </span><span class="ffe fs1e">55</span></div><div class="t m5 x26 h26 ye7 ff7 fs19 fc2 sc0 ls0 ws0">running,<span class="_ _11"> </span>the<span class="_ _11"> </span>heap<span class="_ _11"> </span>expands<span class="_ _16"> </span>and<span class="_"> </span>contracts<span class="_ _16"> </span>dynamically<span class="_ _11"> </span>at<span class="_ _11"> </span>run<span class="_ _11"> </span>time<span class="_ _16"> </span>as<span class="_"> </span>a<span class="_ _16"> </span>result</div><div class="t m5 x26 h26 y2a7 ff7 fs19 fc2 sc0 ls0 ws0">of<span class="_ _13"> </span>calls<span class="_"> </span>to<span class="_ _13"> </span>C<span class="_"> </span>standard<span class="_ _13"> </span>library<span class="_"> </span>routines<span class="_ _13"> </span>such<span class="_"> </span>as<span class="_ _13"> </span><span class="ffd">malloc<span class="_ _10"> </span></span>and<span class="_ _13"> </span><span class="ffd">free</span>.<span class="_"> </span>W<span class="_ _3"></span>e<span class="_ _13"> </span>will<span class="_"> </span>study</div><div class="t m5 x26 h26 y2a8 ff7 fs19 fc2 sc0 ls0 ws0">heaps<span class="_"> </span>in<span class="_"> </span>detail<span class="_"> </span>when<span class="_"> </span>we<span class="_"> </span>learn<span class="_"> </span>about<span class="_"> </span>managing<span class="_"> </span>virtual<span class="_"> </span>memory<span class="_"> </span>in<span class="_"> </span>Chapter<span class="_"> </span>9.</div><div class="t m5 x72 h3d y780 ff14 fs26 fc6 sc0 ls0 ws0">.</div><div class="t m5 x26 h26 y781 ffa fs19 fc1 sc0 ls0 ws0">Shared<span class="_ _13"> </span>libraries<span class="_ _1"></span>.<span class="_ _a"></span><span class="ff7">Near<span class="_ _13"> </span>the<span class="_ _13"> </span>middle<span class="_ _13"> </span>of<span class="_ _13"> </span>the<span class="_ _13"> </span>address<span class="_ _13"> </span>space<span class="_ _13"> </span>is<span class="_ _13"> </span>an<span class="_ _13"> </span>area<span class="_ _13"> </span>that<span class="_ _13"> </span>holds<span class="_ _13"> </span>the</span></div><div class="t m5 x26 h26 y782 ff7 fs19 fc1 sc0 ls0 ws0">code<span class="_ _13"> </span>and<span class="_"> </span>data<span class="_ _13"> </span>for<span class="_ _13"> </span><span class="ffa">shared<span class="_ _13"> </span>libraries<span class="_"> </span></span>such<span class="_ _13"> </span>as<span class="_ _13"> </span>the<span class="_"> </span>C<span class="_ _13"> </span>standard<span class="_ _13"> </span>library<span class="_ _13"> </span>and<span class="_"> </span>the<span class="_ _13"> </span>math</div><div class="t m5 x26 h26 y783 ff7 fs19 fc1 sc0 ls0 ws0">library<span class="_ _3"></span>.<span class="_ _16"> </span>The<span class="_ _16"> </span>notion<span class="_ _16"> </span>of<span class="_ _14"> </span>a<span class="_ _14"> </span>shared<span class="_ _14"> </span>library<span class="_ _16"> </span>is<span class="_ _14"> </span>a<span class="_ _14"> </span>powerful<span class="_ _16"> </span>but<span class="_ _14"> </span>somewhat<span class="_ _14"> </span>difﬁcult</div><div class="t m5 x26 h26 y784 ff7 fs19 fc1 sc0 ls0 ws0">concept.<span class="_ _14"> </span>Y<span class="_ _3"></span>ou<span class="_ _15"> </span>will<span class="_ _15"> </span>learn<span class="_ _15"> </span>how<span class="_ _15"> </span>they<span class="_ _15"> </span>work<span class="_ _14"> </span>when<span class="_ _15"> </span>we<span class="_ _15"> </span>study<span class="_ _15"> </span>dynamic<span class="_ _15"> </span>linking<span class="_ _15"> </span>in</div><div class="t m5 x26 h26 y785 ff7 fs19 fc1 sc0 ls0 ws0">Chapter<span class="_"> </span>7.</div><div class="t m5 x72 h3d y786 ff14 fs26 fc6 sc0 ls0 ws0">.</div><div class="t m5 x26 h26 y787 ffa fs19 fc1 sc0 ls0 ws0">Stack.<span class="_ _11"> </span><span class="ff7">At<span class="_ _21"> </span>the<span class="_ _21"> </span>top<span class="_ _15"> </span>of<span class="_ _21"> </span>the<span class="_ _21"> </span>user’s<span class="_ _15"> </span>virtual<span class="_ _21"> </span>address<span class="_ _21"> </span>space<span class="_ _15"> </span>is<span class="_ _21"> </span>the<span class="_ _21"> </span></span>user<span class="_ _21"> </span>stack<span class="_ _21"> </span><span class="ff7">that</span></div><div class="t m5 x26 h26 y788 ff7 fs19 fc1 sc0 ls0 ws0">the<span class="_ _11"> </span>compiler<span class="_ _16"> </span>uses<span class="_ _11"> </span>to<span class="_ _16"> </span>implement<span class="_ _11"> </span>function<span class="_ _16"> </span>calls<span class="_ _3"></span>.<span class="_ _16"> </span>Like<span class="_ _11"> </span>the<span class="_ _16"> </span>heap<span class="_ _1"></span>,<span class="_ _16"> </span>the<span class="_ _11"> </span>user<span class="_ _16"> </span>stack</div><div class="t m5 x26 h26 y789 ff7 fs19 fc1 sc0 ls0 ws0">expands<span class="_ _16"> </span>and<span class="_ _11"> </span>contracts<span class="_ _16"> </span>dynamically<span class="_ _16"> </span>during<span class="_ _11"> </span>the<span class="_ _16"> </span>execution<span class="_ _11"> </span>of<span class="_ _16"> </span>the<span class="_ _16"> </span>program.<span class="_ _11"> </span>In</div><div class="t m5 x26 h26 y78a ff7 fs19 fc1 sc0 ls0 ws0">particular,<span class="_ _13"> </span>each<span class="_"> </span>time<span class="_"> </span>we<span class="_ _13"> </span>call<span class="_"> </span>a<span class="_"> </span>function,<span class="_"> </span>the<span class="_ _13"> </span>stack<span class="_"> </span>grows<span class="_ _1"></span>.<span class="_"> </span>Each<span class="_ _13"> </span>time<span class="_"> </span>we<span class="_"> </span>return</div><div class="t m5 x26 h26 y78b ff7 fs19 fc1 sc0 ls0 ws0">from<span class="_ _11"> </span>a<span class="_ _11"> </span>function,<span class="_ _16"> </span>it<span class="_ _11"> </span>contracts<span class="_ _1"></span>.<span class="_ _11"> </span>Y<span class="_ _3"></span>ou<span class="_ _11"> </span>will<span class="_ _11"> </span>learn<span class="_ _16"> </span>how<span class="_"> </span>the<span class="_ _16"> </span>compiler<span class="_ _11"> </span>uses<span class="_ _11"> </span>the<span class="_ _11"> </span>stack</div><div class="t m5 x26 h26 y78c ff7 fs19 fc1 sc0 ls0 ws0">in<span class="_"> </span>Chapter<span class="_"> </span>3.</div><div class="t m5 x72 h3d y78d ff14 fs26 fc6 sc0 ls0 ws0">.</div><div class="t m5 x26 h26 y78e ffa fs19 fc1 sc0 ls0 ws0">K<span class="_ _1"></span>ernel<span class="_ _13"> </span>virtual<span class="_"> </span>memory<span class="_ _3"></span>.<span class="_ _a"> </span><span class="ff7">The<span class="_ _13"> </span>top<span class="_ _13"> </span>region<span class="_"> </span>of<span class="_ _13"> </span>the<span class="_ _13"> </span>address<span class="_"> </span>space<span class="_ _13"> </span>is<span class="_ _13"> </span>reserved<span class="_"> </span>for<span class="_ _13"> </span>the</span></div><div class="t m5 x26 h26 y78f ff7 fs19 fc1 sc0 ls0 ws0">kernel.<span class="_ _13"> </span>Application<span class="_ _13"> </span>programs<span class="_"> </span>are<span class="_ _13"> </span>not<span class="_ _13"> </span>allowed<span class="_ _13"> </span>to<span class="_ _13"> </span>read<span class="_"> </span>or<span class="_ _13"> </span>write<span class="_ _13"> </span>the<span class="_ _13"> </span>contents<span class="_ _13"> </span>of</div><div class="t m5 x26 h26 y790 ff7 fs19 fc1 sc0 ls0 ws0">this<span class="_"> </span>area<span class="_ _13"> </span>or<span class="_"> </span>to<span class="_"> </span>directly<span class="_"> </span>call<span class="_ _13"> </span>functions<span class="_"> </span>deﬁned<span class="_"> </span>in<span class="_"> </span>the<span class="_ _13"> </span>kernel<span class="_"> </span>code<span class="_ _0"></span>.<span class="_"> </span>Instead,<span class="_"> </span>they</div><div class="t m5 x26 h26 y791 ff7 fs19 fc1 sc0 ls0 ws0">must<span class="_"> </span>invoke<span class="_"> </span>the<span class="_"> </span>kernel<span class="_"> </span>to<span class="_"> </span>perform<span class="_"> </span>these<span class="_"> </span>operations<span class="_ _1"></span>.</div><div class="t m5 x26 h26 y792 ff7 fs19 fc1 sc0 ls0 ws0">F<span class="_ _1"></span>or<span class="_ _11"> </span>virtual<span class="_"> </span>memory<span class="_ _11"> </span>to<span class="_ _11"> </span>work,<span class="_ _11"> </span>a<span class="_ _11"> </span>sophisticated<span class="_ _11"> </span>interaction<span class="_ _11"> </span>is<span class="_ _11"> </span>required<span class="_ _11"> </span>between</div><div class="t m5 x17 h26 y793 ff7 fs19 fc1 sc0 ls0 ws0">the<span class="_ _13"> </span>hardware<span class="_ _13"> </span>and<span class="_ _13"> </span>the<span class="_ _13"> </span>operating<span class="_ _13"> </span>system<span class="_ _13"> </span>software<span class="_ _1"></span>,<span class="_ _13"> </span>including<span class="_ _13"> </span>a<span class="_ _13"> </span>hardware<span class="_ _13"> </span>translation</div><div class="t m5 x17 h26 y794 ff7 fs19 fc1 sc0 ls0 ws0">of<span class="_ _13"> </span>every<span class="_ _6"> </span>address<span class="_ _13"> </span>generated<span class="_ _13"> </span>by<span class="_ _13"> </span>the<span class="_ _6"> </span>processor.<span class="_ _13"> </span>T<span class="_ _1"></span>he<span class="_ _13"> </span>basic<span class="_ _6"> </span>idea<span class="_ _13"> </span>is<span class="_ _13"> </span>to<span class="_ _13"> </span>store<span class="_ _6"> </span>the<span class="_ _13"> </span>contents</div><div class="t m5 x17 h26 y795 ff7 fs19 fc1 sc0 ls0 ws0">of<span class="_ _11"> </span>a<span class="_ _11"> </span>process’s<span class="_"> </span>virtual<span class="_ _11"> </span>memory<span class="_ _16"> </span>on<span class="_"> </span>disk<span class="_ _11"> </span>and<span class="_ _16"> </span>then<span class="_"> </span>use<span class="_ _11"> </span>the<span class="_ _11"> </span>main<span class="_ _16"> </span>memory<span class="_"> </span>as<span class="_ _11"> </span>a<span class="_ _16"> </span>cache</div><div class="t m5 x17 h26 y796 ff7 fs19 fc1 sc0 ls0 ws0">for<span class="_"> </span>the<span class="_ _11"> </span>disk.<span class="_"> </span>Chapter<span class="_ _11"> </span>9<span class="_ _11"> </span>explains<span class="_"> </span>how<span class="_ _11"> </span>this<span class="_"> </span>works<span class="_ _11"> </span>and<span class="_ _11"> </span>why<span class="_"> </span>it<span class="_ _11"> </span>is<span class="_"> </span>so<span class="_ _11"> </span>important<span class="_ _11"> </span>to<span class="_"> </span>the</div><div class="t m5 x17 h26 y797 ff7 fs19 fc1 sc0 ls0 ws0">operation<span class="_"> </span>of<span class="_"> </span>modern<span class="_"> </span>systems<span class="_ _1"></span>.</div><div class="t m5 x17 h41 y798 ffe fs29 fc1 sc0 ls0 ws0">1.7.4<span class="_ _48"> </span><span class="fs19">Files</span></div><div class="t m5 x17 h26 y799 ff7 fs19 fc1 sc0 ls0 ws0">A<span class="_ _16"> </span><span class="ffa">ﬁle<span class="_ _14"> </span></span>is<span class="_ _14"> </span>a<span class="_ _14"> </span>sequence<span class="_ _16"> </span>of<span class="_ _14"> </span>bytes<span class="_ _1"></span>,<span class="_ _15"> </span>nothing<span class="_ _14"> </span>more<span class="_ _16"> </span>and<span class="_ _14"> </span>nothing<span class="_ _14"> </span>less<span class="_ _1"></span>.<span class="_ _14"> </span>Every<span class="_ _16"> </span>I/O<span class="_ _14"> </span>device<span class="_ _0"></span>,</div><div class="t m5 x17 h26 y79a ff7 fs19 fc1 sc0 ls0 ws0">including<span class="_ _11"> </span>disks<span class="_ _1"></span>,<span class="_ _16"> </span>keyboards<span class="_ _3"></span>,<span class="_ _16"> </span>displays<span class="_ _1"></span>,<span class="_ _11"> </span>and<span class="_ _16"> </span>even<span class="_ _11"> </span>networks<span class="_ _1"></span>,<span class="_ _11"> </span>is<span class="_ _16"> </span>modeled<span class="_ _11"> </span>as<span class="_ _11"> </span>a<span class="_ _11"> </span>ﬁle.<span class="_"> </span>All</div><div class="t m5 x17 h26 y79b ff7 fs19 fc1 sc0 ls0 ws0">input<span class="_ _11"> </span>and<span class="_ _11"> </span>output<span class="_ _11"> </span>in<span class="_"> </span>the<span class="_ _11"> </span>system<span class="_ _11"> </span>is<span class="_ _11"> </span>performed<span class="_ _11"> </span>by<span class="_ _11"> </span>reading<span class="_ _11"> </span>and<span class="_ _11"> </span>writing<span class="_ _11"> </span>ﬁles<span class="_ _1"></span>,<span class="_ _16"> </span>using<span class="_"> </span>a</div><div class="t m5 x17 h26 y79c ff7 fs19 fc1 sc0 ls0 ws0">small<span class="_"> </span>set<span class="_"> </span>of<span class="_"> </span>system<span class="_"> </span>calls<span class="_"> </span>known<span class="_"> </span>as<span class="_"> </span><span class="ffa">Unix<span class="_"> </span>I/O</span>.</div><div class="t m5 x26 h26 y79d ff7 fs19 fc1 sc0 ls0 ws0">T<span class="_ _1"></span>his<span class="_"> </span>simple<span class="_"> </span>and<span class="_"> </span>elegant<span class="_"> </span>notion<span class="_"> </span>of<span class="_"> </span>a<span class="_"> </span>ﬁle<span class="_"> </span>is<span class="_"> </span>nonetheless<span class="_"> </span>very<span class="_"> </span>powerful<span class="_"> </span>because</div><div class="t m5 x17 h26 y79e ff7 fs19 fc1 sc0 ls0 ws0">it<span class="_ _15"> </span>provides<span class="_ _15"> </span>applications<span class="_ _15"> </span>with<span class="_ _15"> </span>a<span class="_ _15"> </span>uniform<span class="_ _15"> </span>view<span class="_ _15"> </span>of<span class="_ _15"> </span>all<span class="_ _15"> </span>the<span class="_ _21"> </span>varied<span class="_ _15"> </span>I/O<span class="_ _15"> </span>devices<span class="_ _15"> </span>that</div><div class="t m5 x17 h26 y79f ff7 fs19 fc1 sc0 ls0 ws0">might<span class="_ _14"> </span>be<span class="_ _15"> </span>contained<span class="_ _15"> </span>in<span class="_ _14"> </span>the<span class="_ _15"> </span>system.<span class="_ _15"> </span>F<span class="_ _1"></span>or<span class="_ _14"> </span>example,<span class="_ _15"> </span>application<span class="_ _14"> </span>programmers<span class="_ _15"> </span>who</div><div class="t m5 x17 h26 y7a0 ff7 fs19 fc1 sc0 ls0 ws0">manipulate<span class="_ _16"> </span>the<span class="_ _16"> </span>contents<span class="_ _16"> </span>of<span class="_ _14"> </span>a<span class="_ _16"> </span>disk<span class="_ _16"> </span>ﬁle<span class="_ _16"> </span>are<span class="_ _14"> </span>blissfully<span class="_ _16"> </span>unaware<span class="_ _16"> </span>of<span class="_ _16"> </span>the<span class="_ _16"> </span>speciﬁc<span class="_ _14"> </span>disk</div><div class="t m5 x17 h26 y7a1 ff7 fs19 fc1 sc0 ls0 ws0">technology<span class="_ _3"></span>.<span class="_ _21"> </span>Further,<span class="_ _f"> </span>the<span class="_ _21"> </span>same<span class="_ _21"> </span>program<span class="_ _f"> </span>will<span class="_ _21"> </span>run<span class="_ _21"> </span>on<span class="_ _21"> </span>different<span class="_ _f"> </span>systems<span class="_ _21"> </span>that<span class="_ _21"> </span>use</div><div class="t m5 x17 h26 y7a2 ff7 fs19 fc1 sc0 ls0 ws0">different<span class="_"> </span>disk<span class="_"> </span>technologies<span class="_ _1"></span>.<span class="_"> </span>Y<span class="_ _3"></span>ou<span class="_"> </span>will<span class="_"> </span>learn<span class="_"> </span>about<span class="_"> </span>Unix<span class="_"> </span>I/O<span class="_"> </span>in<span class="_"> </span>Chapter<span class="_"> </span>10.</div><div class="t m5 x17 h3b y7a3 fff fs24 fc6 sc0 ls0 ws0">1.8</div><div class="t m5 x77 h3e y7a4 ffe fs18 fc6 sc0 ls0 ws0">Systems<span class="_"> </span>Communicate<span class="_"> </span>with<span class="_"> </span>Other<span class="_"> </span>Systems</div><div class="t m5 x77 h3e y7a5 ffe fs18 fc6 sc0 ls0 ws0">Using<span class="_"> </span>Networks</div><div class="t m5 x17 h26 y7a6 ff7 fs19 fc1 sc0 ls0 ws0">Up<span class="_ _16"> </span>to<span class="_ _11"> </span>this<span class="_ _16"> </span>point<span class="_ _16"> </span>in<span class="_ _16"> </span>our<span class="_ _16"> </span>tour<span class="_ _11"> </span>of<span class="_ _16"> </span>systems<span class="_ _1"></span>,<span class="_ _16"> </span>we<span class="_ _16"> </span>have<span class="_ _16"> </span>treated<span class="_ _16"> </span>a<span class="_ _16"> </span>system<span class="_ _11"> </span>as<span class="_ _16"> </span>an<span class="_ _16"> </span>isolated</div><div class="t m5 x17 h26 y7a7 ff7 fs19 fc1 sc0 ls0 ws0">collection<span class="_ _13"> </span>of<span class="_ _13"> </span>hardware<span class="_"> </span>and<span class="_ _13"> </span>software<span class="_ _1"></span>.<span class="_ _13"> </span>In<span class="_"> </span>practice<span class="_ _3"></span>,<span class="_"> </span>modern<span class="_ _13"> </span>systems<span class="_ _13"> </span>are<span class="_ _13"> </span>often<span class="_"> </span>linked</div><div class="t m5 x17 h26 y7a8 ff7 fs19 fc1 sc0 ls0 ws0">to<span class="_"> </span>other<span class="_ _13"> </span>systems<span class="_"> </span>by<span class="_ _13"> </span>networks<span class="_ _1"></span>.<span class="_"> </span>F<span class="_ _1"></span>rom<span class="_"> </span>the<span class="_"> </span>point<span class="_ _13"> </span>of<span class="_"> </span>view<span class="_ _13"> </span>of<span class="_"> </span>an<span class="_"> </span>individual<span class="_ _13"> </span>system,<span class="_"> </span>the</div></div><div class="pi" data-data='{"ctm":[2.000000,0.000000,0.000000,2.000000,0.000000,0.000000]}'></div></div>
