<div id="pf18f" class="pf w2 h11" data-page-no="18f"><div class="pc pc18f w2 h11"><img class="bi x0 y0 w1 h1" alt="" src="csapp/bg18f.png"/><div class="t m5 x14 h28 y9b ffe fs1e fc2 sc0 ls0 ws0">398<span class="_ _1b"> </span><span class="ff6 fs1f">Chapter<span class="_ _10"> </span>4<span class="_ _3d"> </span>Processor<span class="_ _10"> </span>Architecture</span></div><div class="t m5 x28 h2a y257 fff fs1c fc2 sc0 ls0 ws0">Aside<span class="_ _1b"> </span><span class="ff6 fs19">RISC<span class="_ _11"> </span>and<span class="_ _11"> </span>CISC<span class="_ _11"> </span>instruction<span class="_ _16"> </span>sets<span class="_ _11"> </span><span class="ffb">(continued)</span></span></div><div class="t m5 x28 h31 y3759 ff7 fs21 fc2 sc0 ls0 ws0">CISC<span class="_ _1a2"> </span>Early<span class="_"> </span>RISC</div><div class="t m5 x28 h31 y375a ff7 fs21 fc2 sc0 ls0 ws0">Multiple<span class="_"> </span>formats<span class="_"> </span>for<span class="_"> </span>specifying<span class="_"> </span>operands<span class="_ _0"></span>.<span class="_"> </span>In<span class="_"> </span>x86-</div><div class="t m5 x251 h31 y375b ff7 fs21 fc2 sc0 ls0 ws0">64,<span class="_"> </span>a<span class="_"> </span>memory<span class="_"> </span>operand<span class="_"> </span>speciﬁer<span class="_ _10"> </span>can<span class="_"> </span>have<span class="_ _10"> </span>many</div><div class="t m5 x251 h31 y375c ff7 fs21 fc2 sc0 ls0 ws0">different<span class="_ _10"> </span>combinations<span class="_ _11"> </span>of<span class="_"> </span>displacement,<span class="_ _11"> </span>base</div><div class="t m5 x251 h31 y375d ff7 fs21 fc2 sc0 ls0 ws0">and<span class="_"> </span>index<span class="_"> </span>registers<span class="_ _1"></span>,<span class="_"> </span>and<span class="_"> </span>scale<span class="_"> </span>factors<span class="_ _1"></span>.</div><div class="t m5 x16 h31 y375e ff7 fs21 fc2 sc0 ls0 ws0">Simple<span class="_ _10"> </span>addressing<span class="_ _11"> </span>formats<span class="_ _1"></span>.<span class="_ _11"> </span>T<span class="_ _3"></span>ypically<span class="_ _11"> </span>just<span class="_ _10"> </span>base</div><div class="t m5 x121 h31 y375f ff7 fs21 fc2 sc0 ls0 ws0">and<span class="_"> </span>displacement<span class="_"> </span>addressing.</div><div class="t m5 x28 h31 y3760 ff7 fs21 fc2 sc0 ls0 ws0">Arithmetic<span class="_"> </span>and<span class="_"> </span>logical<span class="_"> </span>operations<span class="_ _10"> </span>can<span class="_"> </span>be<span class="_"> </span>applied</div><div class="t m5 x251 h31 y3761 ff7 fs21 fc2 sc0 ls0 ws0">to<span class="_"> </span>both<span class="_"> </span>memory<span class="_"> </span>and<span class="_"> </span>register<span class="_"> </span>operands<span class="_ _1"></span>.</div><div class="t m5 x16 h31 y3760 ff7 fs21 fc2 sc0 ls0 ws0">Arithmetic<span class="_ _11"> </span>and<span class="_ _16"> </span>logical<span class="_ _16"> </span>operations<span class="_ _11"> </span>only<span class="_ _16"> </span>use</div><div class="t m5 x121 h31 y3761 ff7 fs21 fc2 sc0 ls0 ws0">register<span class="_"> </span>operands<span class="_ _1"></span>.<span class="_ _10"> </span>Memory<span class="_ _10"> </span>referencing<span class="_ _10"> </span>is<span class="_ _10"> </span>only</div><div class="t m5 x121 h31 y3762 ff7 fs21 fc2 sc0 ls0 ws0">allowed<span class="_ _11"> </span>by<span class="_ _11"> </span><span class="ffa">load<span class="_ _16"> </span></span>instructions<span class="_ _1"></span>,<span class="_ _16"> </span>reading<span class="_ _11"> </span>from</div><div class="t m5 x121 h31 y3763 ff7 fs21 fc2 sc0 ls0 ws0">memory<span class="_"> </span>into<span class="_ _10"> </span>a<span class="_ _11"> </span>register,<span class="_"> </span>and<span class="_"> </span><span class="ffa">store<span class="_ _10"> </span></span>instructions<span class="_ _0"></span>,</div><div class="t m5 x121 h31 y3764 ff7 fs21 fc2 sc0 ls0 ws0">writing<span class="_ _16"> </span>from<span class="_ _16"> </span>a<span class="_ _16"> </span>register<span class="_ _16"> </span>to<span class="_ _16"> </span>memory<span class="_ _7"></span>.<span class="_ _16"> </span>This</div><div class="t m5 x121 h31 y3765 ff7 fs21 fc2 sc0 ls0 ws0">convention<span class="_ _16"> </span>is<span class="_ _16"> </span>referred<span class="_ _16"> </span>to<span class="_ _11"> </span>as<span class="_ _16"> </span>a<span class="_ _16"> </span><span class="ffa">load/store</span></div><div class="t m5 x121 h31 y3766 ffa fs21 fc2 sc0 ls0 ws0">architecture<span class="ff7">.</span></div><div class="t m5 x28 h31 y3767 ff7 fs21 fc2 sc0 ls0 ws0">Implementation<span class="_"> </span>artifacts<span class="_ _10"> </span>hidden<span class="_ _11"> </span>from<span class="_"> </span>machine-</div><div class="t m5 x251 h31 y3768 ff7 fs21 fc2 sc0 ls0 ws0">level<span class="_ _11"> </span>programs<span class="_ _1"></span>.<span class="_ _16"> </span>T<span class="_ _1"></span>he<span class="_ _16"> </span>ISA<span class="_ _11"> </span>provides<span class="_ _16"> </span>a<span class="_ _11"> </span>clean</div><div class="t m5 x251 h31 y3769 ff7 fs21 fc2 sc0 ls0 ws0">abstraction<span class="_ _10"> </span>between<span class="_ _11"> </span>programs<span class="_ _10"> </span>and<span class="_ _11"> </span>how<span class="_ _11"> </span>they</div><div class="t m5 x251 h31 y376a ff7 fs21 fc2 sc0 ls0 ws0">get<span class="_"> </span>executed.</div><div class="t m5 x16 h31 y376b ff7 fs21 fc2 sc0 ls0 ws0">Implementation<span class="_ _10"> </span>artifacts<span class="_ _11"> </span>exposed<span class="_ _11"> </span>to<span class="_ _10"> </span>machine-</div><div class="t m5 x121 h31 y376c ff7 fs21 fc2 sc0 ls0 ws0">level<span class="_"> </span>programs<span class="_ _1"></span>.<span class="_ _10"> </span>Some<span class="_ _10"> </span>RISC<span class="_"> </span>machines<span class="_ _10"> </span>prohibit</div><div class="t m5 x121 h31 y376d ff7 fs21 fc2 sc0 ls0 ws0">particular<span class="_ _11"> </span>instruction<span class="_ _16"> </span>sequences<span class="_ _11"> </span>and<span class="_ _16"> </span>have</div><div class="t m5 x121 h31 y376e ff7 fs21 fc2 sc0 ls0 ws0">jumps<span class="_"> </span>that<span class="_ _13"> </span>do<span class="_"> </span>not<span class="_ _13"> </span>take<span class="_"> </span>effect<span class="_ _13"> </span>until<span class="_"> </span>the<span class="_"> </span>following</div><div class="t m5 x121 h31 y376f ff7 fs21 fc2 sc0 ls0 ws0">instruction<span class="_"> </span>is<span class="_ _11"> </span>executed.<span class="_ _10"> </span>The<span class="_"> </span>compiler<span class="_"> </span>is<span class="_ _11"> </span>given</div><div class="t m5 x121 h31 y3770 ff7 fs21 fc2 sc0 ls0 ws0">the<span class="_ _13"> </span>task<span class="_ _13"> </span>of<span class="_"> </span>optimizing<span class="_ _13"> </span>performance<span class="_ _13"> </span>within<span class="_ _13"> </span>these</div><div class="t m5 x121 h31 y3771 ff7 fs21 fc2 sc0 ls0 ws0">constraints<span class="_ _1"></span>.</div><div class="t m5 x28 h31 y3772 ff7 fs21 fc2 sc0 ls0 ws0">Condition<span class="_ _16"> </span>codes<span class="_ _1"></span>.<span class="_ _16"> </span>Special<span class="_ _16"> </span>ﬂags<span class="_ _16"> </span>are<span class="_ _11"> </span>set<span class="_ _16"> </span>as<span class="_ _16"> </span>a</div><div class="t m5 x251 h31 y3773 ff7 fs21 fc2 sc0 ls0 ws0">side<span class="_ _11"> </span>effect<span class="_ _10"> </span>of<span class="_ _11"> </span>instructions<span class="_ _11"> </span>and<span class="_ _11"> </span>then<span class="_ _11"> </span>used<span class="_ _11"> </span>for</div><div class="t m5 x251 h31 y3774 ff7 fs21 fc2 sc0 ls0 ws0">conditional<span class="_"> </span>branch<span class="_"> </span>testing.</div><div class="t m5 x16 h31 y3772 ff7 fs21 fc2 sc0 ls0 ws0">No<span class="_ _16"> </span>condition<span class="_ _16"> </span>codes<span class="_ _1"></span>.<span class="_ _16"> </span>Instead,<span class="_ _14"> </span>explicit<span class="_ _14"> </span>test</div><div class="t m5 x121 h31 y3773 ff7 fs21 fc2 sc0 ls0 ws0">instructions<span class="_ _11"> </span>store<span class="_ _11"> </span>the<span class="_ _11"> </span>test<span class="_ _11"> </span>results<span class="_ _11"> </span>in<span class="_ _11"> </span>normal</div><div class="t m5 x121 h31 y3774 ff7 fs21 fc2 sc0 ls0 ws0">registers<span class="_"> </span>for<span class="_"> </span>use<span class="_"> </span>in<span class="_"> </span>conditional<span class="_"> </span>evaluation.</div><div class="t m5 x28 h31 y3775 ff7 fs21 fc2 sc0 ls0 ws0">Stack-intensive<span class="_ _11"> </span>procedure<span class="_ _11"> </span>linkage<span class="_ _0"></span>.<span class="_ _11"> </span>T<span class="_ _0"></span>he<span class="_ _11"> </span>stack</div><div class="t m5 x251 h31 y3776 ff7 fs21 fc2 sc0 ls0 ws0">is<span class="_ _11"> </span>used<span class="_ _10"> </span>for<span class="_ _11"> </span>procedure<span class="_ _11"> </span>arguments<span class="_ _11"> </span>and<span class="_ _11"> </span>return</div><div class="t m5 x251 h31 y3777 ff7 fs21 fc2 sc0 ls0 ws0">addresses<span class="_ _1"></span>.</div><div class="t m5 x16 h31 y3775 ff7 fs21 fc2 sc0 ls0 ws0">Register<span class="_ _1"></span>-intensive<span class="_ _10"> </span>procedure<span class="_ _11"> </span>linkage<span class="_ _1"></span>.<span class="_ _11"> </span>Registers</div><div class="t m5 x121 h31 y3776 ff7 fs21 fc2 sc0 ls0 ws0">are<span class="_"> </span>used<span class="_ _11"> </span>for<span class="_"> </span>procedure<span class="_ _11"> </span>arguments<span class="_ _10"> </span>and<span class="_ _10"> </span>return</div><div class="t m5 x121 h31 y3777 ff7 fs21 fc2 sc0 ls0 ws0">addresses<span class="_ _1"></span>.<span class="_"> </span>Some<span class="_ _10"> </span>procedures<span class="_"> </span>can<span class="_ _10"> </span>thereby<span class="_ _10"> </span>avoid</div><div class="t m5 x121 h31 y3778 ff7 fs21 fc2 sc0 ls0 ws0">any<span class="_ _13"> </span>memory<span class="_ _13"> </span>references<span class="_ _1"></span>.<span class="_ _13"> </span>T<span class="_ _7"></span>ypically<span class="_ _3"></span>,<span class="_"> </span>the<span class="_ _13"> </span>processor</div><div class="t m5 x121 h31 y3779 ff7 fs21 fc2 sc0 ls0 ws0">has<span class="_"> </span>many<span class="_"> </span>more<span class="_"> </span>(up<span class="_"> </span>to<span class="_"> </span>32)<span class="_"> </span>registers<span class="_ _1"></span>.</div><div class="t m5 x57 h2b y377a ff7 fs1e fc2 sc0 ls0 ws0">T<span class="_ _1"></span>he<span class="_ _14"> </span>Y86-64<span class="_ _16"> </span>instruction<span class="_ _14"> </span>set<span class="_ _14"> </span>includes<span class="_ _16"> </span>attributes<span class="_ _14"> </span>of<span class="_ _16"> </span>both<span class="_ _14"> </span>CISC<span class="_ _14"> </span>and<span class="_ _16"> </span>RISC<span class="_ _14"> </span>instruction<span class="_ _16"> </span>sets<span class="_ _0"></span>.<span class="_ _16"> </span>On<span class="_ _14"> </span>the</div><div class="t m5 x28 h2b y377b ff7 fs1e fc2 sc0 ls0 ws0">CISC<span class="_"> </span>side<span class="_ _1"></span>,<span class="_"> </span>it<span class="_"> </span>has<span class="_"> </span>condition<span class="_"> </span>codes<span class="_"> </span>and<span class="_"> </span>variable-length<span class="_"> </span>instructions<span class="_ _1"></span>,<span class="_"> </span>and<span class="_"> </span>it<span class="_"> </span>uses<span class="_"> </span>the<span class="_"> </span>stack<span class="_"> </span>to<span class="_"> </span>store<span class="_"> </span>return</div><div class="t m5 x28 h2b y377c ff7 fs1e fc2 sc0 ls0 ws0">addresses<span class="_ _1"></span>.<span class="_ _13"> </span>On<span class="_"> </span>the<span class="_ _13"> </span>RISC<span class="_ _13"> </span>side<span class="_ _1"></span>,<span class="_"> </span>it<span class="_ _13"> </span>uses<span class="_ _13"> </span>a<span class="_ _13"> </span>load/store<span class="_ _13"> </span>architecture<span class="_ _13"> </span>and<span class="_"> </span>a<span class="_ _13"> </span>regular<span class="_ _13"> </span>instruction<span class="_ _13"> </span>encoding,<span class="_ _13"> </span>and<span class="_ _13"> </span>it</div><div class="t m5 x28 h2b y377d ff7 fs1e fc2 sc0 ls0 ws0">passes<span class="_"> </span>procedure<span class="_"> </span>arguments<span class="_"> </span>through<span class="_"> </span>registers<span class="_ _1"></span>.<span class="_"> </span>It<span class="_"> </span>can<span class="_"> </span>be<span class="_"> </span>viewed<span class="_"> </span>as<span class="_"> </span>taking<span class="_"> </span>a<span class="_"> </span>CISC<span class="_"> </span>instruction<span class="_"> </span>set<span class="_"> </span>(x86)</div><div class="t m5 x28 h2b y377e ff7 fs1e fc2 sc0 ls0 ws0">and<span class="_"> </span>simplifying<span class="_"> </span>it<span class="_"> </span>by<span class="_"> </span>applying<span class="_"> </span>some<span class="_"> </span>of<span class="_"> </span>the<span class="_"> </span>principles<span class="_"> </span>of<span class="_"> </span>RISC.</div></div><div class="pi" data-data='{"ctm":[2.000000,0.000000,0.000000,2.000000,0.000000,0.000000]}'></div></div>
