<div id="pf3b1" class="pf w2 h11" data-page-no="3b1"><div class="pc pc3b1 w2 h11"><img class="bi x0 y0 w1 h1" alt="" src="csapp/bg3b1.png"/><div class="t m5 x14 h28 y9b ffe fs1e fc2 sc0 ls0 ws0">944<span class="_ _1b"> </span><span class="ff6 fs1f">Chapter<span class="_ _10"> </span>10<span class="_ _3d"> </span>System-Level<span class="_ _10"> </span>I/O</span></div><div class="t m5 x14 h2f ye7 ffe fs16 fc6 sc0 ls0 ws0">Figure<span class="_"> </span>10.14</div><div class="t m5 x14 h2f y58a ffe fs16 fc1 sc0 ls0 ws0">How<span class="_ _14"> </span>a<span class="_ _14"> </span>child<span class="_ _15"> </span>process</div><div class="t m5 x14 h2f y58b ffe fs16 fc1 sc0 ls0 ws0">inherits<span class="_ _13"> </span>the<span class="_"> </span>parent’<span class="_ _1"></span>s<span class="_ _10"> </span>open</div><div class="t m5 x14 h34 y58c ffe fs16 fc1 sc0 ls0 ws0">ﬁles.<span class="_"> </span><span class="ff6">The<span class="_ _11"> </span>initial<span class="_ _10"> </span>situation<span class="_ _11"> </span>is</span></div><div class="t m5 x14 h34 y58d ff6 fs16 fc1 sc0 ls0 ws0">in<span class="_ _10"> </span>Figure<span class="_ _11"> </span>10.12.</div><div class="t m5 x18e h3f y78b5 ffd0 fs27 fc1 sc0 ls0 ws0">Descriptor tables</div><div class="t m5 x215 h3f y78b6 ffd0 fs27 fc1 sc0 ls0 ws0">Open file table</div><div class="t m5 x1ae h3f y78b7 ffd0 fs27 fc1 sc0 ls0 ws0">(shared by</div><div class="t m5 x7f h3f y78b8 ffd0 fs27 fc1 sc0 ls0 ws0">all processes)</div><div class="t m5 xaf h3f y78b9 ffd0 fs27 fc1 sc0 ls0 ws0">v-node table</div><div class="t m5 x83 h3f y78ba ffd0 fs27 fc1 sc0 ls0 ws0">(shared by</div><div class="t m5 x8b h3f y78bb ffd0 fs27 fc1 sc0 ls0 ws0">all processes)</div><div class="t m5 xe0 h3f y78bc ffd0 fs27 fc1 sc0 ls0 ws0">   fd 0</div><div class="t m5 x129 h3f y78bd ffd0 fs27 fc1 sc0 ls0 ws0">fd 1</div><div class="t m5 xe0 h3f y78be ffd0 fs27 fc1 sc0 ls0 ws0">   fd 2</div><div class="t m5 x141 h3f y78bf ffd0 fs27 fc1 sc0 ls0 ws0"> fd 3</div><div class="t m5 x129 h3f y78c0 ffd0 fs27 fc1 sc0 ls0 ws0">fd 4</div><div class="t m5 x283 h3f y78c1 ffd0 fs27 fc1 sc0 ls0 ws0">File size</div><div class="t m5 xb4 h3f y78c2 ffd0 fs27 fc1 sc0 ls0 ws0">File access</div><div class="t m5 x1dc h3f y78c3 ffd0 fs27 fc1 sc0 ls0 ws0">File type</div><div class="t m5 x1d9 h3f y78c4 ffd0 fs27 fc1 sc0 ls0 ws0">File B</div><div class="t m5 x24 h3f y78c5 ffd0 fs27 fc1 sc0 ls0 ws0">File pos</div><div class="t m5 x208 h40 y78c6 ffd1 fs28 fc1 sc0 ls0 ws0">refcnt<span class="ff24"></span>2</div><div class="t m8 x13a h3f y78c7 ffd0 fs27 fc1 sc0 ls0 ws0">…</div><div class="t m5 x120 h3f y78c8 ffd0 fs27 fc1 sc0 ls0 ws5">File A<span class="_ _22b"></span><span class="ws0">Parent’s table</span></div><div class="t m5 xe0 h3f y78c9 ffd0 fs27 fc1 sc0 ls0 ws0">   fd 0</div><div class="t m5 x129 h3f y78ca ffd0 fs27 fc1 sc0 ls0 ws0">fd 1</div><div class="t m5 xe0 h3f y78cb ffd0 fs27 fc1 sc0 ls0 ws0">   fd 2</div><div class="t m5 x141 h3f y78cc ffd0 fs27 fc1 sc0 ls0 ws0"> fd 3</div><div class="t m5 x129 h3f y78cd ffd0 fs27 fc1 sc0 ls0 ws0">fd 4</div><div class="t m5 x25 h3f y78ce ffd0 fs27 fc1 sc0 ls0 ws0">Child’s table</div><div class="t m5 x24 h3f y78cf ffd0 fs27 fc1 sc0 ls0 ws0">File pos</div><div class="t m5 x208 h40 y78d0 ffd1 fs28 fc1 sc0 ls0 ws0">refcnt<span class="ff24"></span>2</div><div class="t m8 x13a h3f y78d1 ffd0 fs27 fc1 sc0 ls0 ws0">…</div><div class="t m8 x158 h3f y78d2 ffd0 fs27 fc1 sc0 ls0 ws0">…</div><div class="t m5 x283 h3f y78d3 ffd0 fs27 fc1 sc0 ls0 ws0">File size</div><div class="t m5 xb4 h3f y78d4 ffd0 fs27 fc1 sc0 ls0 ws0">File access</div><div class="t m5 x1dc h3f y78d5 ffd0 fs27 fc1 sc0 ls0 ws0">File type</div><div class="t m8 x158 h3f y78d6 ffd0 fs27 fc1 sc0 ls0 ws0">…</div><div class="t m5 x1d h47 y78d7 ffe fs2b fc1 sc0 ls0 ws0">Practice<span class="_"> </span>Problem<span class="_"> </span>10.2<span class="_ _1f"> </span><span class="fs16">(solution<span class="_"> </span>page<span class="_"> </span>951)</span></div><div class="t m5 x1d h26 y78d8 ff7 fs19 fc1 sc0 ls0 ws0">Suppose<span class="_ _14"> </span>the<span class="_ _14"> </span>disk<span class="_ _14"> </span>ﬁle<span class="_ _14"> </span><span class="ffd">foobar.txt<span class="_ _15"> </span></span>consists<span class="_ _14"> </span>of<span class="_ _14"> </span>the<span class="_ _14"> </span>six<span class="_ _15"> </span>ASCII<span class="_ _14"> </span>characters<span class="_ _14"> </span><span class="ffd">foobar</span>.</div><div class="t m5 x1d h26 y78d9 ff7 fs19 fc1 sc0 ls0 ws0">T<span class="_ _1"></span>hen<span class="_"> </span>what<span class="_"> </span>is<span class="_"> </span>the<span class="_"> </span>output<span class="_"> </span>of<span class="_"> </span>the<span class="_"> </span>following<span class="_"> </span>program?</div><div class="t m5 x1f h2d y78da ff6 fs20 fc6 sc0 ls0 ws0">1<span class="_ _1c"> </span><span class="ffd fs1e fc2">#include<span class="_ _1f"> </span>&quot;csapp.h&quot;</span></div><div class="t m5 x1f h2e y78db ff6 fs20 fc6 sc0 ls0 ws0">2</div><div class="t m5 x1f h2e y78dc ff6 fs20 fc6 sc0 ls0 ws0">3</div><div class="t m5 x4f h2d y78dd ffd fs1e fc2 sc0 ls0 ws0">int<span class="_ _e"> </span>main()</div><div class="t m5 x1f h2d y78de ff6 fs20 fc6 sc0 ls0 ws0">4<span class="_ _1c"> </span><span class="ffd fs1e fc2">{</span></div><div class="t m5 x1f h2d y78df ff6 fs20 fc6 sc0 ls0 ws0">5<span class="_ _20"> </span><span class="ffd fs1e fc2">int<span class="_ _e"> </span>fd1,<span class="_ _1f"> </span>fd2;</span></div><div class="t m5 x1f h2d y78e0 ff6 fs20 fc6 sc0 ls0 ws0">6<span class="_ _20"> </span><span class="ffd fs1e fc2">char<span class="_ _e"> </span>c;</span></div><div class="t m5 x1f h2e y78e1 ff6 fs20 fc6 sc0 ls0 ws0">7</div><div class="t m5 x1f h2e y78e2 ff6 fs20 fc6 sc0 ls0 ws0">8</div><div class="t m5 x33 h2d y78e3 ffd fs1e fc2 sc0 ls0 ws0">fd1<span class="_ _e"> </span>=<span class="_ _1f"> </span>Open(&quot;foobar.txt&quot;,<span class="_ _1f"> </span>O_RDONLY,<span class="_ _e"> </span>0);</div><div class="t m5 x1f h2d y78e4 ff6 fs20 fc6 sc0 ls0 ws0">9<span class="_ _20"> </span><span class="ffd fs1e fc2">fd2<span class="_ _e"> </span>=<span class="_ _1f"> </span>Open(&quot;foobar.txt&quot;,<span class="_ _1f"> </span>O_RDONLY,<span class="_ _e"> </span>0);</span></div><div class="t m5 x1b0 h2d y78e5 ff6 fs20 fc6 sc0 ls0 ws0">10<span class="_ _20"> </span><span class="ffd fs1e fc2">Read(fd1,<span class="_ _e"> </span>&amp;c,<span class="_ _1f"> </span>1);</span></div><div class="t m5 x1b0 h2d y78e6 ff6 fs20 fc6 sc0 ls0 ws0">11<span class="_ _20"> </span><span class="ffd fs1e fc2">Read(fd2,<span class="_ _e"> </span>&amp;c,<span class="_ _1f"> </span>1);</span></div><div class="t m5 x1b0 h2d y78e7 ff6 fs20 fc6 sc0 ls0 ws0">12<span class="_ _20"> </span><span class="ffd fs1e fc2">printf(&quot;c<span class="_ _e"> </span>=<span class="_ _1f"> </span>%c\n&quot;,<span class="_ _1f"> </span>c);</span></div><div class="t m5 x1b0 h2d y78e8 ff6 fs20 fc6 sc0 ls0 ws0">13<span class="_ _20"> </span><span class="ffd fs1e fc2">exit(0);</span></div><div class="t m5 x1b0 h2d y78e9 ff6 fs20 fc6 sc0 ls0 ws0">14<span class="_ _1c"> </span><span class="ffd fs1e fc2">}</span></div><div class="t m5 x1d h47 y78ea ffe fs2b fc1 sc0 ls0 ws0">Practice<span class="_"> </span>Problem<span class="_"> </span>10.3<span class="_ _1f"> </span><span class="fs16">(solution<span class="_"> </span>page<span class="_"> </span>951)</span></div><div class="t m5 x1d h26 y78eb ff7 fs19 fc1 sc0 ls0 ws0">As<span class="_"> </span>before,<span class="_"> </span>suppose<span class="_"> </span>the<span class="_"> </span>disk<span class="_ _11"> </span>ﬁle<span class="_"> </span><span class="ffd">foobar.txt<span class="_ _11"> </span></span>consists<span class="_"> </span>of<span class="_ _11"> </span>the<span class="_"> </span>six<span class="_ _11"> </span>ASCII<span class="_"> </span>characters</div><div class="t m5 x1d h26 y78ec ffd fs19 fc1 sc0 ls0 ws0">foobar<span class="ff7">.<span class="_"> </span>T<span class="_ _1"></span>hen<span class="_"> </span>what<span class="_"> </span>is<span class="_"> </span>the<span class="_"> </span>output<span class="_"> </span>of<span class="_"> </span>the<span class="_"> </span>following<span class="_"> </span>program?</span></div><div class="t m5 x1f h2d y107b ff6 fs20 fc6 sc0 ls0 ws0">1<span class="_ _1c"> </span><span class="ffd fs1e fc2">#include<span class="_ _1f"> </span>&quot;csapp.h&quot;</span></div><div class="t m5 x1f h2e y13c0 ff6 fs20 fc6 sc0 ls0 ws0">2</div><div class="t m5 x1f h2e y32df ff6 fs20 fc6 sc0 ls0 ws0">3</div><div class="t m5 x4f h2d y832 ffd fs1e fc2 sc0 ls0 ws0">int<span class="_ _e"> </span>main()</div><div class="t m5 x1f h2d y8d6 ff6 fs20 fc6 sc0 ls0 ws0">4<span class="_ _1c"> </span><span class="ffd fs1e fc2">{</span></div><div class="t m5 x1f h2d y77e ff6 fs20 fc6 sc0 ls0 ws0">5<span class="_ _20"> </span><span class="ffd fs1e fc2">int<span class="_ _e"> </span>fd;</span></div><div class="t m5 x1f h2d ye95 ff6 fs20 fc6 sc0 ls0 ws0">6<span class="_ _20"> </span><span class="ffd fs1e fc2">char<span class="_ _e"> </span>c;</span></div></div><div class="pi" data-data='{"ctm":[2.000000,0.000000,0.000000,2.000000,0.000000,0.000000]}'></div></div>
