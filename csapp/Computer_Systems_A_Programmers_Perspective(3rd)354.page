<div id="pf162" class="pf w2 h11" data-page-no="162"><div class="pc pc162 w2 h11"><img class="bi x0 y0 w1 h1" alt="" src="csapp/bg162.png"/><div class="t m5 x5f h28 y9b ff6 fs1f fc2 sc0 ls0 ws0">Homework<span class="_ _10"> </span>Problems<span class="_ _1b"> </span><span class="ffe fs1e">353</span></div><div class="t m5 x2c h2d ye7 ff6 fs20 fc6 sc0 ls0 ws0">8<span class="_ _45"> </span><span class="ffd fs1e fc2">addq<span class="_ _46"> </span>%rdi,<span class="_ _e"> </span>%rdx</span></div><div class="t m5 x2c h2d yc4d ff6 fs20 fc6 sc0 ls0 ws0">9<span class="_ _45"> </span><span class="ffd fs1e fc2">movq<span class="_ _46"> </span>A(,%rdx,8),<span class="_ _e"> </span>%rax</span></div><div class="t m5 x17 h2d yecb ff6 fs20 fc6 sc0 ls0 ws0">10<span class="_ _45"> </span><span class="ffd fs1e fc2">movq<span class="_ _46"> </span>%rax,<span class="_ _e"> </span>(%rcx)</span></div><div class="t m5 x17 h2d yecc ff6 fs20 fc6 sc0 ls0 ws0">11<span class="_ _45"> </span><span class="ffd fs1e fc2">movl<span class="_ _46"> </span>$3640,<span class="_ _e"> </span>%eax</span></div><div class="t m5 x17 h2d yecd ff6 fs20 fc6 sc0 ls0 ws0">12<span class="_ _45"> </span><span class="ffd fs1e fc2">ret</span></div><div class="t m5 x34 h26 y31e3 ff7 fs19 fc2 sc0 ls0 ws0">A.<span class="_ _1f"> </span>Extend<span class="_ _13"> </span>Equation<span class="_"> </span>3.1<span class="_ _13"> </span>from<span class="_"> </span>two<span class="_ _13"> </span>dimensions<span class="_"> </span>to<span class="_ _13"> </span>three<span class="_"> </span>to<span class="_ _13"> </span>provide<span class="_"> </span>a<span class="_ _13"> </span>formula<span class="_"> </span>for</div><div class="t m5 x2d h26 y31e4 ff7 fs19 fc2 sc0 ls0 ws0">the<span class="_"> </span>location<span class="_"> </span>of<span class="_"> </span>array<span class="_"> </span>element<span class="_"> </span><span class="ffd">A[i][j][k]</span>.</div><div class="t m5 x34 h26 y31e5 ff7 fs19 fc2 sc0 ls0 ws0">B<span class="_ _3"></span>.<span class="_ _1d"> </span>Use<span class="_ _11"> </span>your<span class="_ _16"> </span>reverse<span class="_ _11"> </span>engineering<span class="_ _11"> </span>skills<span class="_ _11"> </span>to<span class="_ _11"> </span>determine<span class="_ _16"> </span>the<span class="_"> </span>values<span class="_ _16"> </span>of<span class="_ _11"> </span><span class="ff11">R<span class="_ _2"></span></span>,<span class="_ _11"> </span><span class="ff11">S<span class="_ _5"></span></span>,<span class="_ _16"> </span>and<span class="_ _11"> </span><span class="ff11">T</span></div><div class="t m5 x2d h26 y31e6 ff7 fs19 fc2 sc0 ls0 ws0">based<span class="_"> </span>on<span class="_"> </span>the<span class="_"> </span>assembly<span class="_"> </span>code<span class="_ _1"></span>.</div><div class="t m5 x17 h73 y31e7 ffe fs1e fc6 sc0 ls0 ws0">3.65<span class="_ _23"> </span><span class="ff10 fs19">◆</span></div><div class="t m5 x17 h46 y31e8 ff7 fs19 fc1 sc0 ls0 ws0">T<span class="_ _1"></span>he<span class="_ _15"> </span>following<span class="_ _14"> </span>code<span class="_ _15"> </span>transposes<span class="_ _15"> </span>the<span class="_ _14"> </span>elements<span class="_ _15"> </span>of<span class="_ _15"> </span>an<span class="_ _14"> </span><span class="ff11">M<span class="_"> </span><span class="ff12">×<span class="_ _10"> </span></span>M<span class="_ _f"> </span></span>array<span class="_ _3"></span>,<span class="_ _15"> </span>where<span class="_ _15"> </span><span class="ff11">M<span class="_ _f"> </span></span>is<span class="_ _15"> </span>a</div><div class="t m5 x17 h26 y31e9 ff7 fs19 fc1 sc0 ls0 ws0">constant<span class="_"> </span>deﬁned<span class="_"> </span>by<span class="_"> </span><span class="ffd">#define</span>:</div><div class="t m5 x2c h2d y31ea ff6 fs20 fc6 sc0 ls0 ws0">1<span class="_ _1c"> </span><span class="ffd fs1e fc2">void<span class="_ _1f"> </span>transpose(long<span class="_ _e"> </span>A[M][M])<span class="_ _1f"> </span>{</span></div><div class="t m5 x2c h2d y31eb ff6 fs20 fc6 sc0 ls0 ws0">2<span class="_ _20"> </span><span class="ffd fs1e fc2">long<span class="_ _e"> </span>i,<span class="_ _1f"> </span>j;</span></div><div class="t m5 x2c h2e y31ec ff6 fs20 fc6 sc0 ls0 ws0">3</div><div class="t m5 x142 h2d y31ed ffd fs1e fc2 sc0 ls33 ws0">f<span class="_ _41"></span>o<span class="_ _41"></span>r(<span class="_ _41"></span>i=0<span class="_ _41"></span>;i&lt;M<span class="_ _41"></span>;<span class="ls0">i++)</span></div><div class="t m5 x2c h2e y31ee ff6 fs20 fc6 sc0 ls0 ws0">4</div><div class="t m5 xc5 h2d y31ef ffd fs1e fc2 sc0 ls33 ws0">f<span class="_ _41"></span>o<span class="_ _41"></span>r(<span class="_ _41"></span>j=0<span class="_ _41"></span>;j&lt;i<span class="_ _41"></span>;<span class="ls0">j++)<span class="_ _e"> </span>{</span></div><div class="t m5 x2c h2d y31f0 ff6 fs20 fc6 sc0 ls0 ws0">5<span class="_ _d1"> </span><span class="ffd fs1e fc2">long<span class="_ _1f"> </span>t<span class="_ _e"> </span>=<span class="_ _1f"> </span>A[i][j];</span></div><div class="t m5 x2c h2d y31f1 ff6 fs20 fc6 sc0 ls0 ws0">6<span class="_ _d1"> </span><span class="ffd fs1e fc2">A[i][j]<span class="_ _1f"> </span>=<span class="_ _e"> </span>A[j][i];</span></div><div class="t m5 x2c h2d y31f2 ff6 fs20 fc6 sc0 ls0 ws0">7<span class="_ _d1"> </span><span class="ffd fs1e fc2">A[j][i]<span class="_ _1f"> </span>=<span class="_ _e"> </span>t;</span></div><div class="t m5 x2c h2d y31f3 ff6 fs20 fc6 sc0 ls0 ws0">8<span class="_ _70"> </span><span class="ffd fs1e fc2">}</span></div><div class="t m5 x2c h2d y31f4 ff6 fs20 fc6 sc0 ls0 ws0">9<span class="_ _1c"> </span><span class="ffd fs1e fc2">}</span></div><div class="t m5 x26 h26 y31f5 ff7 fs19 fc2 sc0 ls0 ws0">When<span class="_ _6"> </span>compiled<span class="_ _13"> </span>with<span class="_ _13"> </span>optimization<span class="_ _13"> </span>level<span class="_ _13"> </span><span class="ffd">-O1</span>,<span class="_ _13"> </span><span class="ff9">gcc<span class="_ _6"> </span></span>generates<span class="_ _13"> </span>the<span class="_ _13"> </span>following<span class="_ _13"> </span>code</div><div class="t m5 x17 h26 y31f6 ff7 fs19 fc2 sc0 ls0 ws0">for<span class="_"> </span>the<span class="_"> </span>inner<span class="_"> </span>loop<span class="_"> </span>of<span class="_"> </span>the<span class="_"> </span>function:</div><div class="t m5 x2c h2d y31f7 ff6 fs20 fc6 sc0 ls0 ws0">1<span class="_ _1c"> </span><span class="ffd fs1e fc2">.L6:</span></div><div class="t m5 x2c h2d y31f8 ff6 fs20 fc6 sc0 ls0 ws0">2<span class="_ _45"> </span><span class="ffd fs1e fc2">movq<span class="_ _46"> </span>(%rdx),<span class="_ _e"> </span>%rcx</span></div><div class="t m5 x2c h2d y31f9 ff6 fs20 fc6 sc0 ls0 ws0">3<span class="_ _45"> </span><span class="ffd fs1e fc2">movq<span class="_ _46"> </span>(%rax),<span class="_ _e"> </span>%rsi</span></div><div class="t m5 x2c h2e y31fa ff6 fs20 fc6 sc0 ls0 ws0">4</div><div class="t m5 xd1 h2d y31fb ffd fs1e fc2 sc0 ls0 ws0">movq<span class="_ _46"> </span>%rsi,<span class="_ _e"> </span>(%rdx)</div><div class="t m5 x2c h2e y31fc ff6 fs20 fc6 sc0 ls0 ws0">5</div><div class="t m5 xd1 h2d y31fd ffd fs1e fc2 sc0 ls0 ws0">movq<span class="_ _46"> </span>%rcx,<span class="_ _e"> </span>(%rax)</div><div class="t m5 x2c h2e y31fe ff6 fs20 fc6 sc0 ls0 ws0">6</div><div class="t m5 xd1 h2d y31ff ffd fs1e fc2 sc0 ls0 ws0">addq<span class="_ _46"> </span>$8,<span class="_ _e"> </span>%rdx</div><div class="t m5 x2c h2d y3200 ff6 fs20 fc6 sc0 ls0 ws0">7<span class="_ _45"> </span><span class="ffd fs1e fc2">addq<span class="_ _46"> </span>$120,<span class="_ _e"> </span>%rax</span></div><div class="t m5 x2c h2d y3201 ff6 fs20 fc6 sc0 ls0 ws0">8<span class="_ _45"> </span><span class="ffd fs1e fc2">cmpq<span class="_ _46"> </span>%rdi,<span class="_ _e"> </span>%rax</span></div><div class="t m5 x2c h2d y3202 ff6 fs20 fc6 sc0 ls0 ws0">9<span class="_ _45"> </span><span class="ffd fs1e fc2">jne<span class="_ _8c"> </span>.L6</span></div><div class="t m5 x17 h26 y3203 ff7 fs19 fc2 sc0 ls0 ws0">W<span class="_ _3"></span>e<span class="_"> </span>can<span class="_"> </span>see<span class="_"> </span>that<span class="_"> </span><span class="ff9">gcc<span class="_ _10"> </span></span>has<span class="_"> </span>converted<span class="_"> </span>the<span class="_"> </span>array<span class="_"> </span>indexing<span class="_"> </span>to<span class="_"> </span>pointer<span class="_"> </span>code.</div><div class="t m5 x34 h26 y3204 ff7 fs19 fc2 sc0 ls0 ws0">A.<span class="_ _1f"> </span>Which<span class="_"> </span>register<span class="_"> </span>holds<span class="_"> </span>a<span class="_"> </span>pointer<span class="_"> </span>to<span class="_"> </span>array<span class="_"> </span>element<span class="_"> </span><span class="ffd">A[i][j]</span>?</div><div class="t m5 x34 h26 y3205 ff7 fs19 fc2 sc0 ls0 ws0">B<span class="_ _3"></span>.<span class="_ _1d"> </span>Which<span class="_"> </span>register<span class="_"> </span>holds<span class="_"> </span>a<span class="_"> </span>pointer<span class="_"> </span>to<span class="_"> </span>array<span class="_"> </span>element<span class="_"> </span><span class="ffd">A[j][i]</span>?</div><div class="t m5 x34 h26 y3206 ff7 fs19 fc2 sc0 ls0 ws0">C.<span class="_ _25"> </span>What<span class="_"> </span>is<span class="_"> </span>the<span class="_"> </span>value<span class="_"> </span>of<span class="_"> </span><span class="ff11">M<span class="_ _2"></span></span>?</div><div class="t m5 x17 h73 ye14 ffe fs1e fc6 sc0 ls0 ws0">3.66<span class="_ _23"> </span><span class="ff10 fs19">◆</span></div><div class="t m5 x17 h26 ye15 ff7 fs19 fc1 sc0 ls0 ws0">Consider<span class="_ _11"> </span>the<span class="_ _11"> </span>following<span class="_ _16"> </span>source<span class="_"> </span>code,<span class="_ _11"> </span>where<span class="_ _11"> </span><span class="ffd">NR<span class="_ _11"> </span></span>and<span class="_ _16"> </span><span class="ffd">NC<span class="_ _11"> </span></span>are<span class="_ _11"> </span>macro<span class="_ _11"> </span>expressions<span class="_ _11"> </span>de-</div><div class="t m5 x17 h26 ye16 ff7 fs19 fc1 sc0 ls0 ws0">clared<span class="_"> </span>with<span class="_"> </span><span class="ffd">#define<span class="_ _10"> </span></span>that<span class="_ _11"> </span>compute<span class="_"> </span>the<span class="_"> </span>dimensions<span class="_"> </span>of<span class="_"> </span>array<span class="_ _11"> </span><span class="ffd">A<span class="_ _10"> </span></span>in<span class="_"> </span>terms<span class="_"> </span>of<span class="_ _11"> </span>parame-</div><div class="t m5 x17 h26 ye17 ff7 fs19 fc1 sc0 ls0 ws0">ter<span class="_"> </span><span class="ff11">n</span>.<span class="_"> </span>T<span class="_ _1"></span>his<span class="_"> </span>code<span class="_"> </span>computes<span class="_"> </span>the<span class="_"> </span>sum<span class="_"> </span>of<span class="_"> </span>the<span class="_"> </span>elements<span class="_"> </span>of<span class="_"> </span>column<span class="_"> </span><span class="ff11">j<span class="_ _15"> </span></span>of<span class="_"> </span>the<span class="_"> </span>array<span class="_ _3"></span>.</div></div><div class="pi" data-data='{"ctm":[2.000000,0.000000,0.000000,2.000000,0.000000,0.000000]}'></div></div>
