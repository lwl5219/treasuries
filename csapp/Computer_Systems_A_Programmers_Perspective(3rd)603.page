<div id="pf25b" class="pf w2 h11" data-page-no="25b"><div class="pc pc25b w2 h11"><img class="bi x0 y0 w1 h1" alt="" src="csapp/bg25b.png"/><div class="t m5 x14 h28 y9b ffe fs1e fc2 sc0 ls0 ws0">602<span class="_ _1b"> </span><span class="ff6 fs1f">Chapter<span class="_ _10"> </span>5<span class="_ _3d"> </span>Optimizing<span class="_ _10"> </span>Program<span class="_ _10"> </span>Performance</span></div><div class="t m5 x15d hd9 y510c ff72 fs8b fc1 sc0 ls0 ws0">Initial<span class="_ _72"> </span>Quicksort<span class="_ _76"> </span>Iter first<span class="_ _72"> </span>Iter last</div><div class="t m5 x115 hd9 y510d ff72 fs8b fc1 sc0 ls0 wsd">(a) All <span class="_ _2"></span>versions</div><div class="t m5 x8f hd9 y510e ff72 fs8b fc1 sc0 ls0 ws0">(b) <span class="_ _1"></span>All but the slowest version</div><div class="t m5 x99 hd9 y510f ff72 fs8b fc1 sc0 ls0 ws0">Big table <span class="_ _3f"> </span>Better hash<span class="_ _3b"> </span>Linear lower</div><div class="t m5 x55 hd9 y5110 ff72 fs8b fc1 sc0 ls0 ws0">250</div><div class="t m5 x55 hd9 y5111 ff72 fs8b fc1 sc0 ls0 ws0">200</div><div class="t m5 x55 hd9 y5112 ff72 fs8b fc1 sc0 ls0 ws0">150</div><div class="t m5 x55 hd9 y5113 ff72 fs8b fc1 sc0 ls0 ws0">100</div><div class="t m5 xc7 hd9 y5114 ff72 fs8b fc1 sc0 ls0 ws0">50</div><div class="t m5 xc8 hd9 y5115 ff72 fs8b fc1 sc0 ls0 ws0">0</div><div class="t m5 xc8 hd9 y5116 ff72 fs8b fc1 sc0 ls0 ws0">6</div><div class="t m5 xc8 hd9 y5117 ff72 fs8b fc1 sc0 ls0 ws0">5</div><div class="t m5 xc8 hd9 y5118 ff72 fs8b fc1 sc0 ls0 ws0">4</div><div class="t m5 xc8 hd9 y5119 ff72 fs8b fc1 sc0 ls0 ws0">3</div><div class="t m5 xc8 hd9 y511a ff72 fs8b fc1 sc0 ls0 ws0">2</div><div class="t m5 xc8 hd9 y511b ff72 fs8b fc1 sc0 ls0 ws0">1</div><div class="t m5 xc8 hd9 y511c ff72 fs8b fc1 sc0 ls0 ws0">0</div><div class="t m7 x263 hd9 y511d ff72 fs8b fc1 sc0 ls0 ws0">CPU seconds</div><div class="t m5 x1e hd9 y511e ff72 fs8b fc1 sc0 ls0 ws0">Sort</div><div class="t m5 x1e hd9 y511f ff72 fs8b fc1 sc0 ls0 ws0">List</div><div class="t m5 x1e hd9 y5120 ff72 fs8b fc1 sc0 ls0 ws0">Lower</div><div class="t m5 x1e hd9 y5121 ff72 fs8b fc1 sc0 ls0 ws0">Strlen</div><div class="t m5 x1e hd9 y5122 ff72 fs8b fc1 sc0 ls0 ws0">Hash</div><div class="t m5 x1e hd9 y5123 ff72 fs8b fc1 sc0 ls0 ws0">Rest</div><div class="t m5 x51 hd9 y5124 ff72 fs8b fc1 sc0 ls0 ws0">Better hash<span class="_ _1ef"></span>Quicksort<span class="_ _5a"> </span>Iter first<span class="_ _18c"> </span>Iter last<span class="_ _5a"> </span>Big table <span class="_ _e5"> </span>Linear lower</div><div class="t m7 x263 hd9 y5125 ff72 fs8b fc1 sc0 ls0 ws0">CPU seconds</div><div class="t m5 x1e hd9 y5126 ff72 fs8b fc1 sc0 ls0 ws0">Sort</div><div class="t m5 x1e hd9 y5127 ff72 fs8b fc1 sc0 ls0 ws0">List</div><div class="t m5 x1e hd9 y5128 ff72 fs8b fc1 sc0 ls0 ws0">Lower</div><div class="t m5 x1e hd9 y5129 ff72 fs8b fc1 sc0 ls0 ws0">Strlen</div><div class="t m5 x1e hd9 y512a ff72 fs8b fc1 sc0 ls0 ws0">Hash</div><div class="t m5 x1e hd9 y512b ff72 fs8b fc1 sc0 ls0 ws0">Rest</div><div class="t m5 x14 h34 y512c ffe fs16 fc6 sc0 ls0 ws0">Figure<span class="_ _13"> </span>5.38<span class="_ _c"> </span><span class="fc1">Proﬁle<span class="_ _13"> </span>results<span class="_ _10"> </span>for<span class="_ _13"> </span>different<span class="_ _13"> </span>versions<span class="_ _13"> </span>of<span class="_ _10"> </span>bigram-frequency<span class="_ _13"> </span>counting<span class="_ _13"> </span>program.<span class="_ _13"> </span><span class="ff6">Time<span class="_ _13"> </span>is<span class="_ _10"> </span>divided</span></span></div><div class="t m5 x14 h34 y512d ff6 fs16 fc1 sc0 ls0 ws0">according<span class="_ _10"> </span>to<span class="_ _11"> </span>the<span class="_ _10"> </span>different<span class="_ _10"> </span>major<span class="_ _11"> </span>operations<span class="_ _10"> </span>in<span class="_ _11"> </span>the<span class="_ _10"> </span>program.</div><div class="t m5 x75 h26 y512e ff7 fs19 fc1 sc0 ls0 ws0">Hash.<span class="_ _e"> </span>Computing<span class="_"> </span>the<span class="_"> </span>hash<span class="_"> </span>function</div><div class="t m5 x75 h26 y512f ff7 fs19 fc1 sc0 ls0 ws0">Rest.<span class="_ _e"> </span>The<span class="_"> </span>sum<span class="_"> </span>of<span class="_"> </span>all<span class="_"> </span>other<span class="_"> </span>functions</div><div class="t m5 x1d h26 y5130 ff7 fs19 fc1 sc0 ls0 ws0">As<span class="_ _13"> </span>part<span class="_"> </span>(a)<span class="_ _13"> </span>of<span class="_"> </span>the<span class="_ _13"> </span>ﬁgure<span class="_"> </span>shows<span class="_ _1"></span>,<span class="_"> </span>our<span class="_ _13"> </span>initial<span class="_ _13"> </span>version<span class="_"> </span>required<span class="_ _13"> </span>3.5<span class="_"> </span>minutes<span class="_ _1"></span>,<span class="_"> </span>with<span class="_ _13"> </span>most</div><div class="t m5 x1d h26 y5131 ff7 fs19 fc1 sc0 ls0 ws0">of<span class="_"> </span>the<span class="_"> </span>time<span class="_"> </span>spent<span class="_"> </span>sorting.<span class="_"> </span>T<span class="_ _1"></span>his<span class="_ _11"> </span>is<span class="_"> </span>not<span class="_"> </span>surprising,<span class="_"> </span>since<span class="_"> </span>insertion<span class="_"> </span>sort<span class="_"> </span>has<span class="_"> </span>quadratic</div><div class="t m5 x1d h26 y5132 ff7 fs19 fc1 sc0 ls0 ws0">run<span class="_"> </span>time<span class="_"> </span>and<span class="_"> </span>the<span class="_"> </span>program<span class="_"> </span>sorted<span class="_"> </span>363,039<span class="_"> </span>values<span class="_ _1"></span>.</div><div class="t m5 x29 h26 y5133 ff7 fs19 fc1 sc0 ls0 ws0">In<span class="_ _16"> </span>our<span class="_ _11"> </span>next<span class="_ _16"> </span>version,<span class="_ _16"> </span>we<span class="_ _16"> </span>performed<span class="_ _16"> </span>sorting<span class="_ _11"> </span>using<span class="_ _16"> </span>the<span class="_ _16"> </span>library<span class="_ _16"> </span>function<span class="_ _11"> </span><span class="ffd">qsort</span>,</div><div class="t m5 x1d h26 y5134 ff7 fs19 fc1 sc0 ls0 ws0">which<span class="_ _14"> </span>is<span class="_ _14"> </span>based<span class="_ _14"> </span>on<span class="_ _15"> </span>the<span class="_ _14"> </span>quicksort<span class="_ _14"> </span>algorithm<span class="_ _14"> </span>[98].<span class="_ _15"> </span>It<span class="_ _14"> </span>has<span class="_ _14"> </span>an<span class="_ _14"> </span>expected<span class="_ _15"> </span>run<span class="_ _14"> </span>time<span class="_ _14"> </span>of</div><div class="t m5 x1d h26 y5135 ff11 fs19 fc1 sc0 ls12 ws0">O(<span class="_ _3"></span>n<span class="_ _6"> </span><span class="ff7 ls0">log<span class="_"> </span><span class="ff11">n)</span>.<span class="_ _16"> </span>T<span class="_ _1"></span>his<span class="_ _16"> </span>version<span class="_ _16"> </span>is<span class="_ _16"> </span>labeled<span class="_ _16"> </span>“Quicksort”<span class="_ _16"> </span>in<span class="_ _16"> </span>the<span class="_ _16"> </span>ﬁgure.<span class="_ _16"> </span>T<span class="_ _1"></span>he<span class="_ _16"> </span>more<span class="_ _16"> </span>efﬁcient</span></div><div class="t m5 x1d h26 y5136 ff7 fs19 fc1 sc0 ls0 ws0">sorting<span class="_ _14"> </span>algorithm<span class="_ _14"> </span>reduces<span class="_ _14"> </span>the<span class="_ _14"> </span>time<span class="_ _14"> </span>spent<span class="_ _14"> </span>sorting<span class="_ _14"> </span>to<span class="_ _14"> </span>become<span class="_ _15"> </span>negligible<span class="_ _1"></span>,<span class="_ _15"> </span>and<span class="_ _14"> </span>the</div><div class="t m5 x1d h26 y5137 ff7 fs19 fc1 sc0 ls0 ws0">overall<span class="_"> </span>run<span class="_ _11"> </span>time<span class="_"> </span>to<span class="_ _11"> </span>around<span class="_"> </span>5.4<span class="_ _11"> </span>seconds<span class="_ _1"></span>.<span class="_"> </span>Part<span class="_ _11"> </span>(b)<span class="_"> </span>of<span class="_ _11"> </span>the<span class="_ _11"> </span>ﬁgure<span class="_"> </span>shows<span class="_ _11"> </span>the<span class="_"> </span>times<span class="_ _11"> </span>for</div><div class="t m5 x1d h26 y5138 ff7 fs19 fc1 sc0 ls0 ws0">the<span class="_"> </span>remaining<span class="_"> </span>version<span class="_"> </span>on<span class="_"> </span>a<span class="_"> </span>scale<span class="_"> </span>where<span class="_"> </span>we<span class="_"> </span>can<span class="_"> </span>see<span class="_"> </span>them<span class="_"> </span>more<span class="_"> </span>clearly<span class="_ _3"></span>.</div></div><div class="pi" data-data='{"ctm":[2.000000,0.000000,0.000000,2.000000,0.000000,0.000000]}'></div></div>
