<div id="pfa1" class="pf w2 h11" data-page-no="a1"><div class="pc pca1 w2 h11"><img class="bi x0 y0 w1 h1" alt="" src="csapp/bga1.png"/><div class="t m5 x14 h28 y9b ffe fs1e fc2 sc0 ls0 ws0">160<span class="_ _1b"> </span><span class="ff6 fs1f">Chapter<span class="_ _10"> </span>2<span class="_ _3d"> </span>Representing<span class="_ _10"> </span>and<span class="_ _10"> </span>Manipulating<span class="_ _10"> </span>Information</span></div><div class="t m5 x29 h26 ye7 ff7 fs19 fc2 sc0 ls0 ws0">On<span class="_ _6"> </span>the<span class="_ _6"> </span>other<span class="_ _6"> </span>hand,<span class="_ _13"> </span>ﬂoating-point<span class="_ _a"> </span>addition<span class="_ _6"> </span>satisﬁes<span class="_ _6"> </span>the<span class="_ _6"> </span>following<span class="_ _13"> </span>monotonicity</div><div class="t m5 x1d h46 y2a7 ff7 fs19 fc2 sc0 ls0 ws0">property:<span class="_ _13"> </span>if<span class="_ _13"> </span><span class="ff11">a<span class="_ _10"> </span><span class="ff12">≥<span class="_ _10"> </span></span>b</span>,<span class="_ _13"> </span>then<span class="_"> </span><span class="ff11">x<span class="_ _10"> </span><span class="ffd">+</span></span></div><div class="t m5 x16d h69 y1940 ff7 fs39 fc2 sc0 ls0 ws0">f</div><div class="t m5 xdd h46 yc4d ff11 fs19 fc2 sc0 ls0 ws0">a<span class="_ _10"> </span><span class="ff12">≥<span class="_ _13"> </span></span>x<span class="_ _11"> </span><span class="ffd">+</span></div><div class="t m5 x1b3 h69 y1940 ff7 fs39 fc2 sc0 ls0 ws0">f</div><div class="t m5 x122 h26 yc4d ff11 fs19 fc2 sc0 ls0 ws0">b<span class="_ _10"> </span><span class="ff7">for<span class="_ _13"> </span>any<span class="_ _13"> </span>values<span class="_ _13"> </span>of<span class="_ _13"> </span></span>a<span class="_ _2"></span><span class="ff7">,<span class="_"> </span></span>b<span class="ff7">,<span class="_ _13"> </span>and<span class="_ _13"> </span></span>x<span class="_ _11"> </span><span class="ff7">other<span class="_ _13"> </span>than<span class="_ _13"> </span><span class="ffa">NaN<span class="_ _be"></span></span>.</span></div><div class="t m5 x1d h26 y1941 ff7 fs19 fc2 sc0 ls0 ws0">T<span class="_ _1"></span>his<span class="_ _16"> </span>property<span class="_ _11"> </span>of<span class="_ _16"> </span>real<span class="_ _11"> </span>(and<span class="_ _11"> </span>integer)<span class="_ _16"> </span>addition<span class="_ _11"> </span>is<span class="_ _16"> </span>not<span class="_ _11"> </span>obeyed<span class="_ _11"> </span>by<span class="_ _16"> </span>unsigned<span class="_ _11"> </span>or<span class="_ _16"> </span>two’<span class="_ _0"></span>s-</div><div class="t m5 x1d h26 y19be ff7 fs19 fc2 sc0 ls0 ws0">complement<span class="_"> </span>addition.</div><div class="t m5 x29 h26 y19bf ff7 fs19 fc2 sc0 ls0 ws0">Floating-point<span class="_ _13"> </span>multiplication<span class="_ _13"> </span>also<span class="_"> </span>obeys<span class="_ _13"> </span>many<span class="_ _13"> </span>of<span class="_ _13"> </span>the<span class="_ _13"> </span>properties<span class="_ _13"> </span>one<span class="_"> </span>normally</div><div class="t m5 x1d h26 y19c0 ff7 fs19 fc2 sc0 ls0 ws0">associates<span class="_"> </span>with<span class="_ _13"> </span>multiplication.<span class="_"> </span>Let<span class="_ _13"> </span>us<span class="_"> </span>deﬁne<span class="_ _13"> </span><span class="ff11">x<span class="_ _11"> </span><span class="ffd">*</span></span></div><div class="t m5 xf9 h69 y19c1 ff7 fs39 fc2 sc0 ls0 ws0">f</div><div class="t m5 xe8 h46 yece ff11 fs19 fc2 sc0 ls0 ws0">y<span class="_ _11"> </span><span class="ff7">to<span class="_"> </span>be<span class="_ _13"> </span><span class="ffa">Round<span class="_ _2"></span></span></span>(x<span class="_ _11"> </span><span class="ff12">×<span class="_ _13"></span></span><span class="ls57">y)<span class="_ _1"></span><span class="ff7 ls0">.<span class="_"> </span>T<span class="_ _1"></span>his<span class="_"> </span>oper<span class="_ _3"></span>-</span></span></div><div class="t m5 x1d h26 y19c2 ff7 fs19 fc2 sc0 ls0 ws0">ation<span class="_"> </span>is<span class="_"> </span>closed<span class="_ _11"> </span>under<span class="_"> </span>multiplication<span class="_ _11"> </span>(although<span class="_"> </span>possibly<span class="_ _11"> </span>yielding<span class="_"> </span>inﬁnity<span class="_ _11"> </span>or<span class="_"> </span><span class="ffa">NaN<span class="_ _be"></span></span>),</div><div class="t m5 x1d h26 y19c3 ff7 fs19 fc2 sc0 ls0 ws0">it<span class="_ _16"> </span>is<span class="_ _16"> </span>commutative<span class="_ _1"></span>,<span class="_ _16"> </span>and<span class="_ _16"> </span>it<span class="_ _16"> </span>has<span class="_ _16"> </span>1.0<span class="_ _16"> </span>as<span class="_ _16"> </span>a<span class="_ _16"> </span>multiplicative<span class="_ _16"> </span>identity<span class="_ _7"></span>.<span class="_ _16"> </span>On<span class="_ _16"> </span>the<span class="_ _16"> </span>other<span class="_ _16"> </span>hand,</div><div class="t m5 x1d h26 y19c4 ff7 fs19 fc2 sc0 ls0 ws0">it<span class="_ _15"> </span>is<span class="_ _21"> </span>not<span class="_ _15"> </span>associative,<span class="_ _21"> </span>due<span class="_ _15"> </span>to<span class="_ _21"> </span>the<span class="_ _15"> </span>possibility<span class="_ _21"> </span>of<span class="_ _15"> </span>overﬂow<span class="_ _21"> </span>or<span class="_ _15"> </span>the<span class="_ _21"> </span>loss<span class="_ _15"> </span>of<span class="_ _21"> </span>precision</div><div class="t m5 x1d h26 y19c5 ff7 fs19 fc2 sc0 ls0 ws0">due<span class="_"> </span>to<span class="_ _13"> </span>rounding.<span class="_ _13"> </span>F<span class="_ _1"></span>or<span class="_"> </span>example<span class="_ _1"></span>,<span class="_"> </span>with<span class="_ _13"> </span>single-precision<span class="_"> </span>ﬂoating<span class="_ _13"> </span>point,<span class="_"> </span>the<span class="_ _13"> </span>expression</div><div class="t m5 x1d h46 y19c6 ffd fs19 fc2 sc0 ls0 ws0">(1e20*1e20)*1e-20<span class="_ _15"> </span><span class="ff7">evaluates<span class="_ _15"> </span>to<span class="_ _15"> </span><span class="ff12">+∞</span>,<span class="_ _21"> </span>while<span class="_ _15"> </span></span>1e20*(1e20*1e-20)<span class="_ _21"> </span><span class="ff7">evaluates<span class="_ _15"> </span>to</span></div><div class="t m5 x1d h26 y19c7 ffd fs19 fc2 sc0 ls0 ws0">1e20<span class="ff7">.<span class="_"> </span>In<span class="_"> </span>addition,<span class="_"> </span>ﬂoating-point<span class="_"> </span>multiplication<span class="_"> </span>does<span class="_"> </span>not<span class="_"> </span>distribute<span class="_"> </span>over<span class="_"> </span>addition.</span></div><div class="t m5 x1d h26 y19c8 ff7 fs19 fc2 sc0 ls0 ws0">F<span class="_ _1"></span>or<span class="_ _15"> </span>example,<span class="_ _21"> </span>with<span class="_ _15"> </span>single-precision<span class="_ _15"> </span>ﬂoating<span class="_ _21"> </span>point,<span class="_ _f"> </span>the<span class="_ _15"> </span>expression<span class="_ _21"> </span><span class="ffd">1e20*(1e20-</span></div><div class="t m5 x1d h26 y19c9 ffd fs19 fc2 sc0 ls0 ws0">1e20)<span class="_ _10"> </span><span class="ff7">evaluates<span class="_"> </span>to<span class="_"> </span></span>0.0<span class="ff7">,<span class="_"> </span>while<span class="_"> </span></span>1e20*1e20-1e20*1e20<span class="_ _10"> </span><span class="ff7">evaluates<span class="_"> </span>to<span class="_"> </span></span>NaN<span class="ff7">.</span></div><div class="t m5 x29 h26 y19ca ff7 fs19 fc2 sc0 ls0 ws0">On<span class="_ _13"> </span>the<span class="_ _13"> </span>other<span class="_"> </span>hand,<span class="_ _13"> </span>ﬂoating-point<span class="_ _13"> </span>multiplication<span class="_ _13"> </span>satisﬁes<span class="_"> </span>the<span class="_ _13"> </span>following<span class="_ _13"> </span>mono-</div><div class="t m5 x1d h26 y19cb ff7 fs19 fc2 sc0 ls0 ws0">tonicity<span class="_"> </span>properties<span class="_"> </span>for<span class="_"> </span>any<span class="_"> </span>values<span class="_"> </span>of<span class="_"> </span><span class="ff11">a<span class="_ _2"></span></span>,<span class="_"> </span><span class="ff11">b<span class="_ _2"></span></span>,<span class="_"> </span>and<span class="_"> </span><span class="ff11">c<span class="_ _10"> </span></span>other<span class="_"> </span>than<span class="_"> </span><span class="ffa">NaN<span class="_ _be"></span></span>:</div><div class="t m5 x1eb h46 y19cc ff11 fs19 fc2 sc0 ls0 ws0">a<span class="_ _10"> </span><span class="ff12">≥<span class="_ _10"> </span></span>b<span class="_ _1a"> </span><span class="ff7">and<span class="_ _1a"> </span></span>c<span class="_ _10"> </span><span class="ff12">≥<span class="_ _10"> </span><span class="ff7">0<span class="_ _13"> </span></span>⇒<span class="_ _10"> </span></span>a<span class="_ _10"> </span><span class="ffd">*</span></div><div class="t m5 x19c h69 y19cd ff7 fs39 fc2 sc0 ls0 ws0">f</div><div class="t m5 x6a h46 y19ce ff11 fs19 fc2 sc0 ls0 ws0">c<span class="_ _10"> </span><span class="ff12">≥<span class="_ _13"> </span></span>b<span class="_ _10"> </span><span class="ffd">*</span></div><div class="t m5 x3b h69 y19cd ff7 fs39 fc2 sc0 ls0 ws0">f</div><div class="t m5 x1dd h45 y19ce ff11 fs19 fc2 sc0 ls0 ws0">c</div><div class="t m5 x1eb h46 y19cf ff11 fs19 fc2 sc0 ls0 ws0">a<span class="_ _10"> </span><span class="ff12">≥<span class="_ _10"> </span></span>b<span class="_ _1a"> </span><span class="ff7">and<span class="_ _1a"> </span></span>c<span class="_ _10"> </span><span class="ff12">≤<span class="_ _10"> </span><span class="ff7">0<span class="_ _13"> </span></span>⇒<span class="_ _10"> </span></span>a<span class="_ _10"> </span><span class="ffd">*</span></div><div class="t m5 x19c h69 y19d0 ff7 fs39 fc2 sc0 ls0 ws0">f</div><div class="t m5 x6a h46 y19d1 ff11 fs19 fc2 sc0 ls0 ws0">c<span class="_ _10"> </span><span class="ff12">≤<span class="_ _13"> </span></span>b<span class="_ _10"> </span><span class="ffd">*</span></div><div class="t m5 x3b h69 y19d0 ff7 fs39 fc2 sc0 ls0 ws0">f</div><div class="t m5 x1dd h45 y19d1 ff11 fs19 fc2 sc0 ls0 ws0">c</div><div class="t m5 x1d h26 y19d2 ff7 fs19 fc2 sc0 ls0 ws0">In<span class="_ _16"> </span>addition,<span class="_ _15"> </span>we<span class="_ _14"> </span>are<span class="_ _16"> </span>also<span class="_ _14"> </span>guaranteed<span class="_ _14"> </span>that<span class="_ _16"> </span><span class="ff11">a<span class="_ _11"> </span><span class="ffd">*</span></span></div><div class="t m5 x1fc h69 y19d3 ff7 fs39 fc2 sc0 ls0 ws0">f</div><div class="t m5 x170 h46 y19d4 ff11 fs19 fc2 sc0 ls0 ws0">a<span class="_ _11"> </span><span class="ff12">≥<span class="_ _10"> </span><span class="ff7 lsa0">0,<span class="_ _14"> </span>as<span class="_ _16"> </span>long<span class="_ _14"> </span>as<span class="_ _14"> </span></span></span>a<span class="_ _11"> </span><span class="ff12"><span class="_ _2"></span>=<span class="_ _13"> </span><span class="ffa">NaN<span class="_ _be"></span><span class="ff7 ls114">.A<span class="_ _42"></span>sw<span class="_ _42"></span>e</span></span></span></div><div class="t m5 x1d h26 y19d5 ff7 fs19 fc2 sc0 ls0 ws0">saw<span class="_ _14"> </span>earlier,<span class="_ _14"> </span>none<span class="_ _15"> </span>of<span class="_ _14"> </span>these<span class="_ _14"> </span>monotonicity<span class="_ _15"> </span>properties<span class="_ _14"> </span>hold<span class="_ _14"> </span>for<span class="_ _14"> </span>unsigned<span class="_ _15"> </span>or<span class="_ _14"> </span>two’s-</div><div class="t m5 x1d h26 y19d6 ff7 fs19 fc2 sc0 ls0 ws0">complement<span class="_"> </span>multiplication.</div><div class="t m5 x29 h26 y19d7 ff7 fs19 fc2 sc0 ls0 ws0">T<span class="_ _1"></span>his<span class="_ _16"> </span>lack<span class="_ _16"> </span>of<span class="_ _11"> </span>associativity<span class="_ _16"> </span>and<span class="_ _16"> </span>distributivity<span class="_ _11"> </span>is<span class="_ _16"> </span>of<span class="_ _11"> </span>serious<span class="_ _16"> </span>concern<span class="_ _16"> </span>to<span class="_ _11"> </span>scientiﬁc</div><div class="t m5 x1d h26 y19d8 ff7 fs19 fc2 sc0 ls0 ws0">programmers<span class="_ _6"> </span>and<span class="_ _6"> </span>to<span class="_ _6"> </span>compiler<span class="_ _6"> </span>writers<span class="_ _1"></span>.<span class="_ _6"> </span>Even<span class="_ _6"> </span>such<span class="_ _6"> </span>a<span class="_ _6"> </span>seemingly<span class="_ _6"> </span>simple<span class="_ _6"> </span>task<span class="_ _6"> </span>as<span class="_ _6"> </span>writing</div><div class="t m5 x1d h26 y19d9 ff7 fs19 fc2 sc0 ls0 ws0">code<span class="_"> </span>to<span class="_"> </span>determine<span class="_ _11"> </span>whether<span class="_"> </span>two<span class="_"> </span>lines<span class="_ _11"> </span>intersect<span class="_"> </span>in<span class="_"> </span>three-dimensional<span class="_ _11"> </span>space<span class="_"> </span>can<span class="_"> </span>be</div><div class="t m5 x1d h26 y19da ff7 fs19 fc2 sc0 ls0 ws0">a<span class="_"> </span>major<span class="_"> </span>challenge<span class="_ _1"></span>.</div><div class="t m5 x1d h41 y19db ffe fs29 fc2 sc0 ls0 ws0">2.4.6<span class="_ _48"> </span><span class="fs19">Floating<span class="_"> </span>Point<span class="_"> </span>in<span class="_"> </span>C</span></div><div class="t m5 x1d h26 y19dc ff7 fs19 fc2 sc0 ls0 ws0">All<span class="_"> </span>versions<span class="_"> </span>of<span class="_ _13"> </span>C<span class="_"> </span>provide<span class="_"> </span>two<span class="_"> </span>different<span class="_ _13"> </span>ﬂoating-point<span class="_"> </span>data<span class="_"> </span>types:<span class="_"> </span><span class="ffd">float<span class="_ _10"> </span></span>and<span class="_ _13"> </span><span class="ffd">dou-</span></div><div class="t m5 x1d h26 y19dd ffd fs19 fc2 sc0 ls0 ws0">ble<span class="ff7">.<span class="_"> </span>On<span class="_"> </span>machines<span class="_"> </span>that<span class="_"> </span>support<span class="_"> </span>IEEE<span class="_"> </span>ﬂoating<span class="_"> </span>point,<span class="_"> </span>these<span class="_"> </span>data<span class="_"> </span>types<span class="_"> </span>correspond</span></div><div class="t m5 x1d h26 y19de ff7 fs19 fc2 sc0 ls0 ws0">to<span class="_ _11"> </span>single-<span class="_ _16"> </span>and<span class="_ _16"> </span>double-precision<span class="_ _11"> </span>ﬂoating<span class="_ _16"> </span>point.<span class="_ _11"> </span>In<span class="_ _16"> </span>addition,<span class="_ _16"> </span>the<span class="_ _11"> </span>machines<span class="_ _16"> </span>use<span class="_ _11"> </span>the</div><div class="t m5 x1d h26 y19df ff7 fs19 fc2 sc0 ls0 ws0">round-to-even<span class="_ _16"> </span>rounding<span class="_ _14"> </span>mode<span class="_ _0"></span>.<span class="_ _16"> </span>Unfortunately<span class="_ _3"></span>,<span class="_ _14"> </span>since<span class="_ _14"> </span>the<span class="_ _14"> </span>C<span class="_ _16"> </span>standards<span class="_ _14"> </span>do<span class="_ _14"> </span>not<span class="_ _16"> </span>re-</div><div class="t m5 x1d h26 y19e0 ff7 fs19 fc2 sc0 ls0 ws0">quire<span class="_ _11"> </span>the<span class="_ _11"> </span>machine<span class="_ _11"> </span>to<span class="_"> </span>use<span class="_ _11"> </span>IEEE<span class="_ _11"> </span>ﬂoating<span class="_ _11"> </span>point,<span class="_ _16"> </span>there<span class="_"> </span>are<span class="_ _11"> </span>no<span class="_ _11"> </span>standard<span class="_ _11"> </span>methods<span class="_ _11"> </span>to</div><div class="t m5 x1d h46 y19e1 ff7 fs19 fc2 sc0 ls0 ws0">change<span class="_ _13"> </span>the<span class="_"> </span>rounding<span class="_ _13"> </span>mode<span class="_"> </span>or<span class="_ _13"> </span>to<span class="_"> </span>get<span class="_ _13"> </span>special<span class="_ _13"> </span>values<span class="_"> </span>such<span class="_ _13"> </span>as<span class="_"> </span><span class="ff12">−</span><span class="ls93">0,<span class="_ _13"> </span></span><span class="ff12">+∞</span>,<span class="_"> </span><span class="ff12">−∞</span><span class="ls115">,o<span class="_ _4a"></span>r<span class="ffa ls0">NaN<span class="_ _5"></span><span class="ff7">.</span></span></span></div><div class="t m5 x1d h26 y19e2 ff7 fs19 fc2 sc0 ls0 ws0">Most<span class="_"> </span>systems<span class="_"> </span>provide<span class="_"> </span>a<span class="_"> </span>combination<span class="_"> </span>of<span class="_"> </span>include<span class="_"> </span>(<span class="ffd">.h</span>)<span class="_"> </span>ﬁles<span class="_"> </span>and<span class="_"> </span>procedure<span class="_"> </span>libraries</div><div class="t m5 x1d h26 y19e3 ff7 fs19 fc2 sc0 ls0 ws0">to<span class="_ _16"> </span>provide<span class="_ _16"> </span>access<span class="_ _16"> </span>to<span class="_ _14"> </span>these<span class="_ _16"> </span>features<span class="_ _1"></span>,<span class="_ _14"> </span>but<span class="_ _16"> </span>the<span class="_ _14"> </span>details<span class="_ _16"> </span>vary<span class="_ _16"> </span>from<span class="_ _16"> </span>one<span class="_ _14"> </span>system<span class="_ _16"> </span>to<span class="_ _16"> </span>an-</div><div class="t m5 x1d h26 y19e4 ff7 fs19 fc2 sc0 ls0 ws0">other.<span class="_"> </span>F<span class="_ _3"></span>or<span class="_ _11"> </span>example<span class="_ _0"></span>,<span class="_"> </span>the<span class="_"> </span>GNU<span class="_ _11"> </span>compiler<span class="_"> </span><span class="ff9">gcc<span class="_ _11"> </span></span>deﬁnes<span class="_"> </span>program<span class="_"> </span>constants<span class="_"> </span><span class="ffd">INFINITY</span></div><div class="t m5 x1d h46 y19e5 ff7 fs19 fc2 sc0 ls0 ws0">(for<span class="_"> </span><span class="ff12">+∞</span>)<span class="_ _13"> </span>and<span class="_"> </span><span class="ffd">NAN<span class="_ _10"> </span></span>(for<span class="_"> </span><span class="ffa">NaN<span class="_ _2"></span></span>)<span class="_"> </span>when<span class="_"> </span>the<span class="_"> </span>following<span class="_ _13"> </span>sequence<span class="_"> </span>occurs<span class="_"> </span>in<span class="_ _13"> </span>the<span class="_"> </span>program</div><div class="t m5 x1d h26 y19e6 ff7 fs19 fc2 sc0 ls0 ws0">ﬁle:</div><div class="t m5 x1d h2d y77e ffd fs1e fc2 sc0 ls0 ws0">#define<span class="_ _e"> </span>_GNU_SOURCE<span class="_ _1f"> </span>1</div><div class="t m5 x1d h2d y19e7 ffd fs1e fc2 sc0 ls0 ws0">#include<span class="_ _e"> </span>&lt;math.h&gt;</div></div><div class="pi" data-data='{"ctm":[2.000000,0.000000,0.000000,2.000000,0.000000,0.000000]}'></div></div>
