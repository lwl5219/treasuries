<div id="pf2fe" class="pf w2 h11" data-page-no="2fe"><div class="pc pc2fe w2 h11"><img class="bi x0 y0 w1 h1" alt="" src="csapp/bg2fe.png"/><div class="t m5 x147 h28 y9b ff6 fs1f fc2 sc0 ls0 ws0">Section<span class="_ _10"> </span>8.1<span class="_ _60"> </span>Exceptions<span class="_ _3e"> </span><span class="ffe fs1e">765</span></div><div class="t m5 x17 h31 y390 ff7 fs21 fc2 sc0 ls0 ws0">Exception<span class="_"> </span>number<span class="_ _26"> </span>Description<span class="_ _17c"> </span>Exception<span class="_"> </span>class</div><div class="t m5 x188 h31 yc94 ff7 fs21 fc2 sc0 ls0 ws0">0<span class="_ _d6"> </span>Divide<span class="_"> </span>error<span class="_ _da"> </span>F<span class="_ _1"></span>ault</div><div class="t m5 x19f h31 yc96 ff7 fs21 fc2 sc0 ls0 ws0">13<span class="_ _20b"> </span>General<span class="_"> </span>protection<span class="_"> </span>fault<span class="_ _26"> </span>F<span class="_ _3"></span>ault</div><div class="t m5 x19f h31 y5521 ff7 fs21 fc2 sc0 ls0 ws0">14<span class="_ _20b"> </span>Page<span class="_"> </span>fault<span class="_ _20c"> </span>F<span class="_ _3"></span>ault</div><div class="t m5 x19f h31 y5522 ff7 fs21 fc2 sc0 ls0 ws0">18<span class="_ _20b"> </span>Machine<span class="_"> </span>check<span class="_ _bb"> </span>Abort</div><div class="t m5 x2e h31 y5683 ff7 fs21 fc2 sc0 ls0 ws0">32–255<span class="_ _6d"> </span>OS-deﬁned<span class="_"> </span>exceptions<span class="_ _8c"> </span>Interrupt<span class="_"> </span>or<span class="_"> </span>trap</div><div class="t m5 x17 h2f y13f3 ffe fs16 fc6 sc0 ls0 ws0">Figure<span class="_"> </span>8.9<span class="_ _66"> </span><span class="fc1">Examples<span class="_"> </span>of<span class="_"> </span>exceptions<span class="_"> </span>in<span class="_"> </span>x86-64<span class="_"> </span>systems.</span></div><div class="t m5 x17 h41 y64a1 ffe fs29 fc1 sc0 ls0 ws0">8.1.3<span class="_ _48"> </span><span class="fs19">Exceptions<span class="_"> </span>in<span class="_"> </span>Linux/x86-64<span class="_"> </span>Systems</span></div><div class="t m5 x17 h26 y64a2 ff7 fs19 fc1 sc0 ls0 ws0">T<span class="_ _7"></span>o<span class="_ _11"> </span>help<span class="_ _16"> </span>make<span class="_"> </span>things<span class="_ _11"> </span>more<span class="_ _16"> </span>concrete<span class="_ _1"></span>,<span class="_ _11"> </span>let’s<span class="_ _11"> </span>look<span class="_ _11"> </span>at<span class="_ _11"> </span>some<span class="_ _11"> </span>of<span class="_ _11"> </span>the<span class="_ _11"> </span>exceptions<span class="_ _16"> </span>deﬁned</div><div class="t m5 x17 h26 y64a3 ff7 fs19 fc1 sc0 ls0 ws0">for<span class="_ _11"> </span>x86-64<span class="_ _16"> </span>systems<span class="_ _3"></span>.<span class="_ _16"> </span>T<span class="_ _1"></span>here<span class="_ _16"> </span>are<span class="_ _11"> </span>up<span class="_ _16"> </span>to<span class="_ _11"> </span>256<span class="_ _11"> </span>different<span class="_ _16"> </span>exception<span class="_ _11"> </span>types<span class="_ _16"> </span>[50].<span class="_ _11"> </span>Numbers</div><div class="t m5 x17 h26 y64a4 ff7 fs19 fc1 sc0 ls0 ws0">in<span class="_ _11"> </span>the<span class="_ _16"> </span>range<span class="_ _11"> </span>from<span class="_ _16"> </span>0<span class="_ _11"> </span>to<span class="_ _16"> </span>31<span class="_ _11"> </span>correspond<span class="_ _16"> </span>to<span class="_ _11"> </span>exceptions<span class="_ _11"> </span>that<span class="_ _16"> </span>are<span class="_ _11"> </span>deﬁned<span class="_ _16"> </span>by<span class="_ _11"> </span>the<span class="_ _16"> </span>Intel</div><div class="t m5 x17 h26 y64a5 ff7 fs19 fc1 sc0 ls0 ws0">architects<span class="_ _13"> </span>and<span class="_ _6"> </span>thus<span class="_ _13"> </span>are<span class="_ _13"> </span>identical<span class="_ _13"> </span>for<span class="_ _6"> </span>any<span class="_ _13"> </span>x86-64<span class="_ _13"> </span>system.<span class="_ _13"> </span>Numbers<span class="_ _6"> </span>in<span class="_ _13"> </span>the<span class="_ _13"> </span>range<span class="_ _13"> </span>from</div><div class="t m5 x17 h26 y64a6 ff7 fs19 fc1 sc0 ls0 ws0">32<span class="_ _14"> </span>to<span class="_ _14"> </span>255<span class="_ _15"> </span>correspond<span class="_ _14"> </span>to<span class="_ _15"> </span>interrupts<span class="_ _14"> </span>and<span class="_ _14"> </span>traps<span class="_ _15"> </span>that<span class="_ _14"> </span>are<span class="_ _14"> </span>deﬁned<span class="_ _15"> </span>by<span class="_ _14"> </span>the<span class="_ _15"> </span>operating</div><div class="t m5 x17 h26 y64a7 ff7 fs19 fc1 sc0 ls0 ws0">system.<span class="_"> </span>F<span class="_ _1"></span>igure<span class="_"> </span>8.9<span class="_"> </span>shows<span class="_"> </span>a<span class="_"> </span>few<span class="_"> </span>examples<span class="_ _1"></span>.</div><div class="t m5 x17 h42 y64a8 ff6 fs29 fc6 sc0 ls0 ws0">Linux/x86-64<span class="_ _11"> </span>Faults<span class="_ _16"> </span>and<span class="_ _16"> </span>Aborts</div><div class="t m5 x72 h26 y64a9 ffa fs19 fc1 sc0 ls0 ws0">Divide<span class="_ _13"> </span>error<span class="_ _1"></span>.<span class="_ _21"> </span><span class="ff7">A<span class="_ _13"> </span>divide<span class="_"> </span>error<span class="_ _13"> </span>(exception<span class="_ _13"> </span>0)<span class="_"> </span>occurs<span class="_ _13"> </span>when<span class="_ _13"> </span>an<span class="_"> </span>application<span class="_ _13"> </span>attempts</span></div><div class="t m5 x30 h26 y64aa ff7 fs19 fc1 sc0 ls0 ws0">to<span class="_ _11"> </span>divide<span class="_ _11"> </span>by<span class="_ _11"> </span>zero<span class="_"> </span>or<span class="_ _11"> </span>when<span class="_ _11"> </span>the<span class="_ _11"> </span>result<span class="_ _11"> </span>of<span class="_ _11"> </span>a<span class="_ _11"> </span>divide<span class="_ _11"> </span>instruction<span class="_ _11"> </span>is<span class="_ _11"> </span>too<span class="_ _11"> </span>big<span class="_ _11"> </span>for</div><div class="t m5 x30 h26 y64ab ff7 fs19 fc1 sc0 ls0 ws0">the<span class="_ _16"> </span>destination<span class="_ _16"> </span>operand.<span class="_ _16"> </span>Unix<span class="_ _16"> </span>does<span class="_ _16"> </span>not<span class="_ _16"> </span>attempt<span class="_ _16"> </span>to<span class="_ _16"> </span>recover<span class="_ _16"> </span>from<span class="_ _16"> </span>divide</div><div class="t m5 x30 h26 y64ac ff7 fs19 fc1 sc0 ls0 ws0">errors<span class="_ _1"></span>,<span class="_"> </span>opting<span class="_"> </span>instead<span class="_ _11"> </span>to<span class="_"> </span>abort<span class="_"> </span>the<span class="_ _11"> </span>program.<span class="_"> </span>Linux<span class="_"> </span>shells<span class="_"> </span>typically<span class="_ _11"> </span>report</div><div class="t m5 x30 h26 y64ad ff7 fs19 fc1 sc0 ls0 ws0">divide<span class="_"> </span>errors<span class="_"> </span>as<span class="_"> </span>“Floating<span class="_"> </span>exceptions<span class="_ _1"></span>.<span class="_ _1"></span>”</div><div class="t m5 x72 h26 y64ae ffa fs19 fc1 sc0 ls0 ws0">General<span class="_"> </span>protection<span class="_"> </span>fault.<span class="_ _21"> </span><span class="ff7">T<span class="_ _0"></span>he<span class="_"> </span>infamous<span class="_"> </span>general<span class="_"> </span>protection<span class="_"> </span>fault<span class="_"> </span>(exception<span class="_"> </span>13)</span></div><div class="t m5 x30 h26 y64af ff7 fs19 fc1 sc0 ls0 ws0">occurs<span class="_"> </span>for<span class="_"> </span>many<span class="_"> </span>reasons<span class="_ _1"></span>,<span class="_"> </span>usually<span class="_"> </span>because<span class="_"> </span>a<span class="_"> </span>program<span class="_"> </span>references<span class="_"> </span>an<span class="_"> </span>unde-</div><div class="t m5 x30 h26 y64b0 ff7 fs19 fc1 sc0 ls0 ws0">ﬁned<span class="_ _6"> </span>area<span class="_ _6"> </span>of<span class="_ _6"> </span>virtual<span class="_ _6"> </span>memory<span class="_ _13"> </span>or<span class="_ _a"> </span>because<span class="_ _6"> </span>the<span class="_ _6"> </span>program<span class="_ _13"> </span>attempts<span class="_ _a"> </span>to<span class="_ _6"> </span>write<span class="_ _6"> </span>to<span class="_ _6"> </span>a</div><div class="t m5 x30 h26 y64b1 ff7 fs19 fc1 sc0 ls0 ws0">read-only<span class="_ _13"> </span>text<span class="_ _6"> </span>segment.<span class="_ _13"> </span>Linux<span class="_ _13"> </span>does<span class="_ _6"> </span>not<span class="_ _13"> </span>attempt<span class="_ _13"> </span>to<span class="_ _13"> </span>recover<span class="_ _6"> </span>from<span class="_ _13"> </span>this<span class="_ _13"> </span>fault.</div><div class="t m5 x30 h26 y64b2 ff7 fs19 fc1 sc0 ls0 ws0">Linux<span class="_ _11"> </span>shells<span class="_ _16"> </span>typically<span class="_ _11"> </span>report<span class="_ _16"> </span>general<span class="_ _11"> </span>protection<span class="_ _16"> </span>faults<span class="_ _11"> </span>as<span class="_ _16"> </span>“Segmentation</div><div class="t m5 x30 h26 y64b3 ff7 fs19 fc1 sc0 ls0 ws0">faults<span class="_ _1"></span>.<span class="_ _1"></span>”</div><div class="t m5 x72 h26 y64b4 ffa fs19 fc1 sc0 ls0 ws0">P<span class="_ _1"></span>age<span class="_ _16"> </span>fault.<span class="_ _f"> </span><span class="ff7">A<span class="_ _14"> </span>page<span class="_ _16"> </span>fault<span class="_ _14"> </span>(exception<span class="_ _14"> </span>14)<span class="_ _16"> </span>is<span class="_ _14"> </span>an<span class="_ _14"> </span>example<span class="_ _16"> </span>of<span class="_ _14"> </span>an<span class="_ _14"> </span>exception<span class="_ _16"> </span>where</span></div><div class="t m5 x30 h26 y64b5 ff7 fs19 fc1 sc0 ls0 ws0">the<span class="_ _14"> </span>faulting<span class="_ _14"> </span>instruction<span class="_ _15"> </span>is<span class="_ _14"> </span>restarted.<span class="_ _15"> </span>T<span class="_ _1"></span>he<span class="_ _15"> </span>handler<span class="_ _14"> </span>maps<span class="_ _14"> </span>the<span class="_ _15"> </span>appropriate</div><div class="t m5 x30 h26 y64b6 ff7 fs19 fc1 sc0 ls0 ws0">page<span class="_"> </span>of<span class="_ _13"> </span>virtual<span class="_"> </span>memory<span class="_"> </span>on<span class="_"> </span>disk<span class="_ _13"> </span>into<span class="_"> </span>a<span class="_"> </span>page<span class="_"> </span>of<span class="_ _13"> </span>physical<span class="_"> </span>memory<span class="_"> </span>and<span class="_"> </span>then</div><div class="t m5 x30 h26 y64b7 ff7 fs19 fc1 sc0 ls0 ws0">restarts<span class="_ _13"> </span>the<span class="_ _6"> </span>faulting<span class="_ _13"> </span>instruction.<span class="_ _13"> </span>W<span class="_ _7"></span>e<span class="_ _13"> </span>will<span class="_ _13"> </span>see<span class="_ _6"> </span>how<span class="_ _13"> </span>page<span class="_ _13"> </span>faults<span class="_ _6"> </span>work<span class="_ _13"> </span>in<span class="_ _13"> </span>detail</div><div class="t m5 x30 h26 y64b8 ff7 fs19 fc1 sc0 ls0 ws0">in<span class="_"> </span>Chapter<span class="_"> </span>9.</div><div class="t m5 x72 h26 y64b9 ffa fs19 fc1 sc0 ls0 ws0">Machine<span class="_ _16"> </span>check.<span class="_ _15"> </span><span class="ff7">A<span class="_ _14"> </span>machine<span class="_ _14"> </span>check<span class="_ _14"> </span>(exception<span class="_ _16"> </span>18)<span class="_ _14"> </span>occurs<span class="_ _14"> </span>as<span class="_ _14"> </span>a<span class="_ _16"> </span>result<span class="_ _14"> </span>of<span class="_ _14"> </span>a<span class="_ _14"> </span>fatal</span></div><div class="t m5 x30 h26 y64ba ff7 fs19 fc1 sc0 ls0 ws0">hardware<span class="_ _16"> </span>error<span class="_ _16"> </span>that<span class="_ _16"> </span>is<span class="_ _16"> </span>detected<span class="_ _14"> </span>during<span class="_ _16"> </span>the<span class="_ _16"> </span>execution<span class="_ _16"> </span>of<span class="_ _16"> </span>the<span class="_ _14"> </span>faulting<span class="_ _16"> </span>in-</div><div class="t m5 x30 h26 y64bb ff7 fs19 fc1 sc0 ls0 ws0">struction.<span class="_ _13"> </span>Machine<span class="_ _13"> </span>check<span class="_ _6"> </span>handlers<span class="_ _13"> </span>never<span class="_ _13"> </span>return<span class="_ _13"> </span>control<span class="_ _13"> </span>to<span class="_ _13"> </span>the<span class="_ _6"> </span>application</div><div class="t m5 x30 h26 y64bc ff7 fs19 fc1 sc0 ls0 ws0">program.</div><div class="t m5 x17 h42 y8d6 ff6 fs29 fc6 sc0 ls0 ws0">Linux/x86-64<span class="_ _11"> </span>System<span class="_ _16"> </span>Calls</div><div class="t m5 x17 h26 y4af6 ff7 fs19 fc1 sc0 ls0 ws0">Linux<span class="_ _13"> </span>provides<span class="_"> </span>hundreds<span class="_ _13"> </span>of<span class="_ _13"> </span>system<span class="_"> </span>calls<span class="_ _13"> </span>that<span class="_"> </span>application<span class="_ _13"> </span>programs<span class="_ _13"> </span>use<span class="_"> </span>when<span class="_ _13"> </span>they</div><div class="t m5 x17 h26 y59b0 ff7 fs19 fc1 sc0 ls0 ws0">want<span class="_"> </span>to<span class="_"> </span>request<span class="_"> </span>services<span class="_"> </span>from<span class="_"> </span>the<span class="_"> </span>kernel,<span class="_"> </span>such<span class="_"> </span>as<span class="_"> </span>reading<span class="_"> </span>a<span class="_"> </span>ﬁle,<span class="_"> </span>writing<span class="_"> </span>a<span class="_"> </span>ﬁle<span class="_ _1"></span>,<span class="_"> </span>and</div></div><div class="pi" data-data='{"ctm":[2.000000,0.000000,0.000000,2.000000,0.000000,0.000000]}'></div></div>
