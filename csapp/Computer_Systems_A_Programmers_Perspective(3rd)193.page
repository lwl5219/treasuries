<div id="pfc1" class="pf w2 h11" data-page-no="c1"><div class="pc pcc1 w2 h11"><img class="bi x0 y0 w1 h1" alt="" src="csapp/bgc1.png"/><div class="t m5 x14 h28 y9b ffe fs1e fc2 sc0 ls0 ws0">192<span class="_ _1b"> </span><span class="ff6 fs1f">Chapter<span class="_ _10"> </span>2<span class="_ _3d"> </span>Representing<span class="_ _10"> </span>and<span class="_ _10"> </span>Manipulating<span class="_ _10"> </span>Information</span></div><div class="t m5 x1d h28 ye7 ffe fs1e fc6 sc0 ls0 ws0">Solution<span class="_"> </span>to<span class="_"> </span>Problem<span class="_"> </span>2.39<span class="_ _e"> </span><span class="fs16">(page<span class="_"> </span>139)</span></div><div class="t m5 x1d h26 y1d16 ff7 fs19 fc1 sc0 ls0 ws0">T<span class="_ _1"></span>he<span class="_ _13"> </span>expression<span class="_ _6"> </span>simply<span class="_ _13"> </span>becomes<span class="_ _6"> </span><span class="ffd">-(x&lt;&lt;<span class="ff11">m</span>)</span>.<span class="_ _13"> </span>T<span class="_ _7"></span>o<span class="_ _13"> </span>see<span class="_ _6"> </span>this<span class="_ _1"></span>,<span class="_ _13"> </span>let<span class="_ _6"> </span>the<span class="_ _13"> </span>word<span class="_ _6"> </span>size<span class="_ _13"> </span>be<span class="_ _6"> </span><span class="ff11">w<span class="_ _13"> </span></span>so<span class="_ _13"> </span>that</div><div class="t m5 x1d h46 y1d17 ff11 fs19 fc1 sc0 ls0 ws0">n<span class="_ _13"> </span><span class="ff12">=<span class="_ _10"> </span></span>w<span class="_ _10"> </span><span class="ff12">−<span class="_ _13"></span><span class="ff7">1<span class="_ _0"></span>.<span class="_"> </span>F<span class="_ _3"></span>orm<span class="_"> </span>B<span class="_"> </span>states<span class="_"> </span>that<span class="_"> </span>we<span class="_ _13"> </span>should<span class="_"> </span>compute<span class="_"> </span><span class="ffd">(x&lt;&lt;<span class="ff11">w<span class="_ _2"></span></span>)<span class="_ _11"> </span>-<span class="_ _16"> </span>(x&lt;&lt;<span class="ff11">m</span>)</span>,<span class="_"> </span>but<span class="_"> </span>shifting</span></span></div><div class="t m5 x1d h26 y1d18 ffd fs19 fc1 sc0 ls0 ws0">x<span class="_ _10"> </span><span class="ff7">to<span class="_"> </span>the<span class="_"> </span>left<span class="_"> </span>by<span class="_"> </span><span class="ff11">w<span class="_ _11"> </span></span>will<span class="_"> </span>yield<span class="_"> </span>the<span class="_"> </span>value<span class="_"> </span></span>0<span class="ff7">.</span></div><div class="t m5 x1d h28 y1eaa ffe fs1e fc6 sc0 ls0 ws0">Solution<span class="_"> </span>to<span class="_"> </span>Problem<span class="_"> </span>2.40<span class="_ _e"> </span><span class="fs16">(page<span class="_"> </span>139)</span></div><div class="t m5 x1d h26 y1eab ff7 fs19 fc1 sc0 ls0 ws0">T<span class="_ _1"></span>his<span class="_"> </span>problem<span class="_ _13"> </span>requires<span class="_ _13"> </span>you<span class="_ _13"> </span>to<span class="_"> </span>try<span class="_ _13"> </span>out<span class="_ _13"> </span>the<span class="_ _13"> </span>optimizations<span class="_"> </span>already<span class="_ _13"> </span>described<span class="_ _13"> </span>and<span class="_ _13"> </span>also</div><div class="t m5 x1d h26 y1eac ff7 fs19 fc1 sc0 ls0 ws0">to<span class="_"> </span>supply<span class="_"> </span>a<span class="_"> </span>bit<span class="_"> </span>of<span class="_"> </span>your<span class="_"> </span>own<span class="_"> </span>ingenuity<span class="_ _3"></span>.</div><div class="t m5 x5a h31 y1ead ff11 fs21 fc2 sc0 ls0 ws0">K<span class="_ _8b"> </span><span class="ff7">Shifts<span class="_ _26"> </span>Add/Subs<span class="_ _26"> </span>Expression</span></div><div class="t m5 x124 h31 y1eae ff7 fs21 fc2 sc0 lscb ws0">71<span class="_ _19"> </span>1<span class="_ _60"> </span><span class="ffd fs1e ls0">(x&lt;&lt;3)<span class="_ _11"> </span>-<span class="_ _11"> </span>x</span></div><div class="t m5 x1f h31 y1eaf ff7 fs21 fc2 sc0 ls0 ws0">30<span class="_ _d3"> </span>4<span class="_ _82"> </span>3<span class="_ _2b"> </span><span class="ffd fs1e">(x&lt;&lt;4)<span class="_ _11"> </span>+<span class="_ _11"> </span>(x&lt;&lt;3)<span class="_ _11"> </span>+<span class="_ _11"> </span>(x&lt;&lt;2)<span class="_ _16"> </span>+<span class="_ _10"> </span>(x&lt;&lt;1)</span></div><div class="t m5 x1f h31 y1eb0 ff7 fs21 fc2 sc0 ls0 ws0">28<span class="_ _d3"> </span>2<span class="_ _82"> </span>1<span class="_ _2b"> </span><span class="ffd fs1e">(x&lt;&lt;5)<span class="_ _11"> </span>-<span class="_ _11"> </span>(x&lt;&lt;2)</span></div><div class="t m5 x1f h31 y1eb1 ff7 fs21 fc2 sc0 ls0 ws0">55<span class="_ _d3"> </span>2<span class="_ _82"> </span>2<span class="_ _2b"> </span><span class="ffd fs1e">(x&lt;&lt;6)<span class="_ _11"> </span>-<span class="_ _11"> </span>(x&lt;&lt;3)<span class="_ _11"> </span>-<span class="_ _11"> </span>x</span></div><div class="t m5 x29 h26 y1eb2 ff7 fs19 fc2 sc0 ls0 ws0">Observe<span class="_"> </span>that<span class="_"> </span>the<span class="_"> </span>fourth<span class="_"> </span>case<span class="_"> </span>uses<span class="_"> </span>a<span class="_"> </span>modiﬁed<span class="_"> </span>version<span class="_"> </span>of<span class="_"> </span>form<span class="_"> </span>B<span class="_ _3"></span>.<span class="_"> </span>W<span class="_ _1"></span>e<span class="_"> </span>can<span class="_"> </span>view</div><div class="t m5 x1d h26 y1eb3 ff7 fs19 fc2 sc0 ls0 ws0">the<span class="_"> </span>bit<span class="_"> </span>pattern<span class="_"> </span>[11011]<span class="_ _13"> </span>as<span class="_"> </span>having<span class="_"> </span>a<span class="_"> </span>run<span class="_"> </span>of<span class="_"> </span>6<span class="_"> </span>ones<span class="_"> </span>with<span class="_"> </span>a<span class="_"> </span>zero<span class="_"> </span>in<span class="_"> </span>the<span class="_"> </span>middle<span class="_ _0"></span>,<span class="_"> </span>and<span class="_"> </span>so</div><div class="t m5 x1d h26 y1eb4 ff7 fs19 fc2 sc0 ls0 ws0">we<span class="_"> </span>apply<span class="_"> </span>the<span class="_"> </span>rule<span class="_"> </span>for<span class="_"> </span>form<span class="_"> </span>B<span class="_ _3"></span>,<span class="_"> </span>but<span class="_"> </span>then<span class="_"> </span>we<span class="_"> </span>subtract<span class="_"> </span>the<span class="_"> </span>term<span class="_"> </span>corresponding<span class="_"> </span>to<span class="_"> </span>the</div><div class="t m5 x1d h26 y1eb5 ff7 fs19 fc2 sc0 ls0 ws0">middle<span class="_"> </span>zero<span class="_"> </span>bit.</div><div class="t m5 x1d h28 y1eb6 ffe fs1e fc6 sc0 ls0 ws0">Solution<span class="_"> </span>to<span class="_"> </span>Problem<span class="_"> </span>2.41<span class="_ _e"> </span><span class="fs16">(page<span class="_"> </span>139)</span></div><div class="t m5 x1d h26 y1eb7 ff7 fs19 fc1 sc0 ls0 ws0">Assuming<span class="_ _16"> </span>that<span class="_ _16"> </span>addition<span class="_ _11"> </span>and<span class="_ _16"> </span>subtraction<span class="_ _16"> </span>have<span class="_ _16"> </span>the<span class="_ _16"> </span>same<span class="_ _16"> </span>performance<span class="_ _1"></span>,<span class="_ _16"> </span>the<span class="_ _16"> </span>rule<span class="_ _16"> </span>is</div><div class="t m5 x1d h46 y1eb8 ff7 fs19 fc1 sc0 ls0 ws0">to<span class="_ _14"> </span>choose<span class="_ _14"> </span>form<span class="_ _16"> </span>A<span class="_ _14"> </span>when<span class="_ _14"> </span><span class="ff11">n<span class="_ _10"> </span><span class="ff12">=<span class="_ _10"> </span></span>m</span>,<span class="_ _14"> </span>either<span class="_ _14"> </span>form<span class="_ _14"> </span>when<span class="_ _14"> </span><span class="ff11">n<span class="_ _10"> </span><span class="ff12">=<span class="_ _10"> </span></span>m<span class="_ _13"> </span><span class="ff12">+<span class="_ _10"> </span></span></span>1<span class="_ _1"></span>,<span class="_ _15"> </span>and<span class="_ _14"> </span>form<span class="_ _14"> </span>B<span class="_ _14"> </span>when</div><div class="t m5 x1d h46 y1eb9 ff11 fs19 fc1 sc0 ls42 ws0">n&gt;m<span class="ff12 ls0">+<span class="_ _13"> </span><span class="ff7 ls25">1.</span></span></div><div class="t m5 x29 h26 y1eba ff7 fs19 fc1 sc0 ls0 ws0">T<span class="_ _1"></span>he<span class="_ _15"> </span>justiﬁcation<span class="_ _21"> </span>for<span class="_ _15"> </span>this<span class="_ _15"> </span>rule<span class="_ _15"> </span>is<span class="_ _21"> </span>as<span class="_ _15"> </span>follows<span class="_ _1"></span>.<span class="_ _15"> </span>Assume<span class="_ _15"> </span>ﬁrst<span class="_ _21"> </span>that<span class="_ _15"> </span><span class="ff11 ls13d">m&gt;</span><span class="lsb1">0.<span class="_ _15"> </span>When</span></div><div class="t m5 x1d h46 y1ebb ff11 fs19 fc1 sc0 ls0 ws0">n<span class="_ _10"> </span><span class="ff12">=<span class="_ _10"> </span></span>m<span class="ff7">,<span class="_ _e"> </span>form<span class="_ _f"> </span>A<span class="_ _e"> </span>requires<span class="_ _f"> </span>only<span class="_ _f"> </span>a<span class="_ _e"> </span>single<span class="_ _21"> </span>shift,<span class="_ _1f"> </span>while<span class="_ _f"> </span>form<span class="_ _f"> </span>B<span class="_ _e"> </span>requires<span class="_ _21"> </span>two<span class="_ _e"> </span>shifts</span></div><div class="t m5 x1d h46 y1ebc ff7 fs19 fc1 sc0 ls0 ws0">and<span class="_ _16"> </span>a<span class="_ _11"> </span>subtraction.<span class="_ _16"> </span>When<span class="_ _11"> </span><span class="ff11">n<span class="_ _10"> </span><span class="ff12">=<span class="_ _10"> </span></span>m<span class="_ _13"> </span><span class="ff12">+<span class="_ _10"> </span></span></span>1<span class="_ _1"></span>,<span class="_ _16"> </span>both<span class="_ _16"> </span>forms<span class="_ _16"> </span>require<span class="_ _11"> </span>two<span class="_ _16"> </span>shifts<span class="_ _16"> </span>and<span class="_ _16"> </span>either<span class="_ _11"> </span>an</div><div class="t m5 x1d h46 y1ebd ff7 fs19 fc1 sc0 ls0 ws0">addition<span class="_ _6"> </span>or<span class="_ _13"> </span>a<span class="_ _6"> </span>subtraction.<span class="_ _13"> </span>W<span class="_ _1"></span>hen<span class="_ _13"> </span><span class="ff11 ls13e">n&gt;m</span><span class="ff12">+<span class="_ _13"></span></span>1<span class="_ _1"></span>,<span class="_ _13"> </span>form<span class="_ _6"> </span>B<span class="_ _6"> </span>requires<span class="_ _13"> </span>only<span class="_ _6"> </span>two<span class="_ _13"> </span>shifts<span class="_ _6"> </span>and<span class="_ _6"> </span>one</div><div class="t m5 x1d h46 y1ebe ff7 fs19 fc1 sc0 ls0 ws0">subtraction,<span class="_ _11"> </span>while<span class="_ _11"> </span>form<span class="_ _11"> </span>A<span class="_ _11"> </span>requires<span class="_ _11"> </span><span class="ff11">n<span class="_ _10"> </span><span class="ff12">−<span class="_ _13"> </span></span>m<span class="_ _10"> </span><span class="ff12">+<span class="_ _10"> </span></span></span>1<span class="_ _6"> </span><span class="ff11">&gt;<span class="_ _10"> </span></span>2<span class="_ _11"> </span>shifts<span class="_ _11"> </span>and<span class="_ _11"> </span><span class="ff11">n<span class="_ _10"> </span><span class="ff12">−<span class="_ _13"></span></span><span class="ls82">m&gt;</span></span>1<span class="_"> </span>additions<span class="_ _3"></span>.</div><div class="t m5 x1b0 h46 y1ebf ff7 fs19 fc1 sc0 ls0 ws0">F<span class="_ _1"></span>or<span class="_"> </span>the<span class="_ _11"> </span>case<span class="_ _11"> </span>of<span class="_ _11"> </span><span class="ff11">m<span class="_ _13"> </span><span class="ff12">=<span class="_ _10"> </span></span></span><span class="ls3b">0,<span class="_ _11"> </span>we<span class="_"> </span>get<span class="_ _11"> </span>one<span class="_ _11"> </span>fewer<span class="_"> </span>shift<span class="_ _11"> </span>for<span class="_ _11"> </span>both<span class="_ _11"> </span>forms<span class="_"> </span>A<span class="_ _11"> </span>and<span class="_ _11"> </span>B<span class="_ _3"></span>,<span class="_ _11"> </span>and<span class="_ _11"> </span>so<span class="_ _11"> </span>the</span></div><div class="t m5 x1b0 h26 y1ec0 ff7 fs19 fc1 sc0 ls0 ws0">same<span class="_"> </span>rules<span class="_"> </span>apply<span class="_"> </span>for<span class="_"> </span>choosing<span class="_"> </span>between<span class="_"> </span>the<span class="_"> </span>two<span class="_ _1"></span>.</div><div class="t m5 x1d h28 y1ec1 ffe fs1e fc6 sc0 ls0 ws0">Solution<span class="_"> </span>to<span class="_"> </span>Problem<span class="_"> </span>2.42<span class="_ _e"> </span><span class="fs16">(page<span class="_"> </span>143)</span></div><div class="t m5 x1d h26 y1ec2 ff7 fs19 fc1 sc0 ls0 ws0">T<span class="_ _1"></span>he<span class="_"> </span>only<span class="_"> </span>challenge<span class="_"> </span>here<span class="_ _13"> </span>is<span class="_"> </span>to<span class="_"> </span>compute<span class="_"> </span>the<span class="_"> </span>bias<span class="_ _13"> </span>without<span class="_"> </span>any<span class="_"> </span>testing<span class="_"> </span>or<span class="_"> </span>conditional</div><div class="t m5 x1d h26 y1ec3 ff7 fs19 fc1 sc0 ls0 ws0">operations<span class="_ _1"></span>.<span class="_"> </span>W<span class="_ _3"></span>e<span class="_ _13"> </span>use<span class="_"> </span>the<span class="_ _13"> </span>trick<span class="_"> </span>that<span class="_"> </span>the<span class="_ _13"> </span>expression<span class="_"> </span><span class="ffd ls4b">x&gt;<span class="_ _42"></span>&gt;3<span class="_ _49"></span>1<span class="_ _3"></span><span class="ff7 ls0">generates<span class="_"> </span>a<span class="_ _13"> </span>word<span class="_"> </span>with<span class="_"> </span>all</span></span></div><div class="t m5 x1d h26 y1ec4 ff7 fs19 fc1 sc0 ls0 ws0">ones<span class="_"> </span>if<span class="_"> </span><span class="ffd">x<span class="_ _10"> </span></span>is<span class="_"> </span>negative<span class="_ _1"></span>,<span class="_"> </span>and<span class="_"> </span>all<span class="_"> </span>zeros<span class="_"> </span>otherwise<span class="_ _1"></span>.<span class="_"> </span>By<span class="_"> </span>masking<span class="_"> </span>off<span class="_"> </span>the<span class="_"> </span>appropriate<span class="_"> </span>bits<span class="_ _3"></span>,</div><div class="t m5 x1d h26 y1ec5 ff7 fs19 fc1 sc0 ls0 ws0">we<span class="_"> </span>get<span class="_"> </span>the<span class="_"> </span>desired<span class="_"> </span>bias<span class="_"> </span>value<span class="_ _1"></span>.</div><div class="t m5 x1d h2d y543 ffd fs1e fc2 sc0 ls0 ws0">int<span class="_ _e"> </span>div16(int<span class="_ _1f"> </span>x)<span class="_ _1f"> </span>{</div><div class="t m5 x10c h2d y1ec6 ffd fs1e fc2 sc0 ls0 ws0">/*<span class="_ _e"> </span>Compute<span class="_ _1f"> </span>bias<span class="_ _1f"> </span>to<span class="_ _e"> </span>be<span class="_ _1f"> </span>either<span class="_ _e"> </span>0<span class="_ _1f"> </span>(x<span class="_ _1f"> </span>&gt;=<span class="_ _e"> </span>0)<span class="_ _1f"> </span>or<span class="_ _e"> </span>15<span class="_ _1f"> </span>(x<span class="_ _1f"> </span>&lt;<span class="_ _e"> </span>0)<span class="_ _1f"> </span>*/</div><div class="t m5 x10c h2d y1ec7 ffd fs1e fc2 sc0 ls0 ws0">int<span class="_ _e"> </span>bias<span class="_ _1f"> </span>=<span class="_ _1f"> </span>(x<span class="_ _e"> </span>&gt;&gt;<span class="_ _1f"> </span>31)<span class="_ _e"> </span>&amp;<span class="_ _1f"> </span>0xF;</div><div class="t m5 x10c h2d y1ec8 ffd fs1e fc2 sc0 ls0 ws0">return<span class="_ _e"> </span>(x<span class="_ _1f"> </span>+<span class="_ _1f"> </span>bias)<span class="_ _e"> </span>&gt;&gt;<span class="_ _1f"> </span>4;</div><div class="t m5 x1d h2d y1ec9 ffd fs1e fc2 sc0 ls0 ws0">}</div></div><div class="pi" data-data='{"ctm":[2.000000,0.000000,0.000000,2.000000,0.000000,0.000000]}'></div></div>
