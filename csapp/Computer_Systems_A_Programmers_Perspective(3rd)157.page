<div id="pf9d" class="pf w2 h11" data-page-no="9d"><div class="pc pc9d w2 h11"><img class="bi x0 y0 w1 h1" alt="" src="csapp/bg9d.png"/><div class="t m5 x14 h28 y9b ffe fs1e fc2 sc0 ls0 ws0">156<span class="_ _1b"> </span><span class="ff6 fs1f">Chapter<span class="_ _10"> </span>2<span class="_ _3d"> </span>Representing<span class="_ _10"> </span>and<span class="_ _10"> </span>Manipulating<span class="_ _10"> </span>Information</span></div><div class="t m5 x1d h47 yb1f ffe fs2b fc1 sc0 ls0 ws0">Practice<span class="_"> </span>Problem<span class="_"> </span>2.49<span class="_ _1f"> </span><span class="fs16">(solution<span class="_"> </span>page<span class="_"> </span>195)</span></div><div class="t m5 x124 h26 yb20 ff7 fs19 fc1 sc0 ls0 ws0">A.<span class="_ _1f"> </span>F<span class="_ _1"></span>or<span class="_ _15"> </span>a<span class="_ _15"> </span>ﬂoating-point<span class="_ _15"> </span>format<span class="_ _15"> </span>with<span class="_ _15"> </span>an<span class="_ _15"> </span><span class="ff11">n</span>-bit<span class="_ _15"> </span>fraction,<span class="_ _21"> </span>give<span class="_ _15"> </span>a<span class="_ _15"> </span>formula<span class="_ _21"> </span>for<span class="_ _15"> </span>the</div><div class="t m5 x4f h26 yb21 ff7 fs19 fc1 sc0 ls0 ws0">smallest<span class="_ _e"> </span>positive<span class="_ _f"> </span>integer<span class="_ _e"> </span>that<span class="_ _f"> </span>cannot<span class="_ _e"> </span>be<span class="_ _f"> </span>represented<span class="_ _e"> </span>exactly<span class="_ _f"> </span>(because<span class="_ _e"> </span>it</div><div class="t m5 x4f h46 yb22 ff7 fs19 fc1 sc0 ls0 ws0">would<span class="_ _15"> </span>require<span class="_ _15"> </span>an<span class="_ _15"> </span>(<span class="ff11">n<span class="_ _10"> </span><span class="ff12">+<span class="_ _10"> </span></span></span>1<span class="_ _1"></span>)-bit<span class="_ _15"> </span>fraction<span class="_ _15"> </span>to<span class="_ _15"> </span>be<span class="_ _15"> </span>exact).<span class="_ _15"> </span>Assume<span class="_ _15"> </span>the<span class="_ _21"> </span>exponent</div><div class="t m5 x4f h26 yba3 ff7 fs19 fc1 sc0 ls0 ws0">ﬁeld<span class="_ _11"> </span>size<span class="_ _16"> </span><span class="ff11">k<span class="_"> </span></span>is<span class="_ _11"> </span>large<span class="_ _11"> </span>enough<span class="_ _16"> </span>that<span class="_ _11"> </span>the<span class="_ _16"> </span>range<span class="_ _11"> </span>of<span class="_ _11"> </span>representable<span class="_ _16"> </span>exponents<span class="_ _11"> </span>does</div><div class="t m5 x4f h26 y1656 ff7 fs19 fc1 sc0 ls0 ws0">not<span class="_"> </span>provide<span class="_"> </span>a<span class="_"> </span>limitation<span class="_"> </span>for<span class="_"> </span>this<span class="_"> </span>problem.</div><div class="t m5 x124 h46 y1918 ff7 fs19 fc1 sc0 ls0 ws0">B<span class="_ _3"></span>.<span class="_ _1d"> </span>What<span class="_ _16"> </span>is<span class="_ _14"> </span>the<span class="_ _16"> </span>numeric<span class="_ _14"> </span>value<span class="_ _16"> </span>of<span class="_ _14"> </span>this<span class="_ _16"> </span>integer<span class="_ _14"> </span>for<span class="_ _16"> </span>single-precision<span class="_ _14"> </span>format<span class="_ _16"> </span>(<span class="ff11">n<span class="_ _10"> </span><span class="ff12">=</span></span></div><div class="t m5 x4f h26 y1919 ff7 fs19 fc1 sc0 ls0 ws0">23<span class="_ _0"></span>)?</div><div class="t m5 x1d h41 y191a ffe fs29 fc1 sc0 ls0 ws0">2.4.4<span class="_ _48"> </span><span class="fs19">Rounding</span></div><div class="t m5 x1d h26 y191b ff7 fs19 fc1 sc0 ls0 ws0">Floating-point<span class="_ _11"> </span>arithmetic<span class="_ _16"> </span>can<span class="_ _11"> </span>only<span class="_ _16"> </span>approximate<span class="_ _11"> </span>real<span class="_ _16"> </span>arithmetic,<span class="_ _11"> </span>since<span class="_ _16"> </span>the<span class="_ _11"> </span>repre-</div><div class="t m5 x1d h26 y191c ff7 fs19 fc1 sc0 ls0 ws0">sentation<span class="_"> </span>has<span class="_ _11"> </span>limited<span class="_"> </span>range<span class="_ _11"> </span>and<span class="_ _11"> </span>precision.<span class="_"> </span>Thus<span class="_ _3"></span>,<span class="_ _11"> </span>for<span class="_"> </span>a<span class="_ _11"> </span>value<span class="_"> </span><span class="ff11">x<span class="_ _5"></span></span>,<span class="_ _11"> </span>we<span class="_ _11"> </span>generally<span class="_"> </span>want</div><div class="t m5 x1d h26 y191d ff7 fs19 fc1 sc0 ls0 ws0">a<span class="_ _16"> </span>systematic<span class="_ _16"> </span>method<span class="_ _16"> </span>of<span class="_ _16"> </span>ﬁnding<span class="_ _16"> </span>the<span class="_ _16"> </span>“closest”<span class="_ _16"> </span>matching<span class="_ _16"> </span>value<span class="_ _16"> </span><span class="ff11">x</span></div><div class="t m5 x81 h4b y191e ff12 fs25 fc1 sc0 ls0 ws0"></div><div class="t m5 x1c0 h26 y191f ff7 fs19 fc1 sc0 ls0 ws0">that<span class="_ _16"> </span>can<span class="_ _16"> </span>be<span class="_ _16"> </span>rep-</div><div class="t m5 x1d h26 y1920 ff7 fs19 fc1 sc0 ls0 ws0">resented<span class="_ _15"> </span>in<span class="_ _21"> </span>the<span class="_ _15"> </span>desired<span class="_ _21"> </span>ﬂoating-point<span class="_ _21"> </span>format.<span class="_ _15"> </span>This<span class="_ _15"> </span>is<span class="_ _15"> </span>the<span class="_ _21"> </span>task<span class="_ _15"> </span>of<span class="_ _21"> </span>the<span class="_ _21"> </span><span class="ffa">rounding</span></div><div class="t m5 x1d h26 y1921 ff7 fs19 fc1 sc0 ls0 ws0">operation.<span class="_ _14"> </span>One<span class="_ _14"> </span>key<span class="_ _15"> </span>problem<span class="_ _14"> </span>is<span class="_ _15"> </span>to<span class="_ _14"> </span>deﬁne<span class="_ _14"> </span>the<span class="_ _15"> </span>direction<span class="_ _14"> </span>to<span class="_ _14"> </span>round<span class="_ _15"> </span>a<span class="_ _14"> </span>value<span class="_ _15"> </span>that<span class="_ _14"> </span>is</div><div class="t m5 x1d h26 y1922 ff7 fs19 fc1 sc0 ls0 ws0">halfway<span class="_"> </span>between<span class="_ _13"> </span>two<span class="_"> </span>possibilities<span class="_ _3"></span>.<span class="_"> </span>F<span class="_ _1"></span>or<span class="_"> </span>example<span class="_ _3"></span>,<span class="_"> </span>if<span class="_"> </span>I<span class="_ _13"> </span>have<span class="_"> </span>$1.50<span class="_ _13"> </span>and<span class="_"> </span>want<span class="_"> </span>to<span class="_ _13"> </span>round</div><div class="t m5 x1d h26 y1923 ff7 fs19 fc1 sc0 ls0 ws0">it<span class="_"> </span>to<span class="_ _11"> </span>the<span class="_"> </span>nearest<span class="_ _11"> </span>dollar,<span class="_"> </span>should<span class="_"> </span>the<span class="_"> </span>result<span class="_ _11"> </span>be<span class="_"> </span>$1<span class="_ _11"> </span>or<span class="_"> </span>$2?<span class="_ _11"> </span>An<span class="_"> </span>alternative<span class="_ _11"> </span>approach<span class="_"> </span>is</div><div class="t m5 x1d h26 y1924 ff7 fs19 fc1 sc0 ls0 ws0">to<span class="_"> </span>maintain<span class="_ _11"> </span>a<span class="_ _11"> </span>lower<span class="_ _11"> </span>and<span class="_"> </span>an<span class="_ _11"> </span>upper<span class="_ _11"> </span>bound<span class="_ _11"> </span>on<span class="_"> </span>the<span class="_ _11"> </span>actual<span class="_ _11"> </span>number.<span class="_"> </span>F<span class="_ _1"></span>or<span class="_ _11"> </span>example<span class="_ _0"></span>,<span class="_"> </span>we</div><div class="t m5 x1d h26 y1925 ff7 fs19 fc1 sc0 ls0 ws0">could<span class="_"> </span>determine<span class="_"> </span>representable<span class="_ _11"> </span>values<span class="_"> </span><span class="ff11">x</span></div><div class="t m5 xbf h4b y1926 ff12 fs25 fc1 sc0 ls0 ws0">−</div><div class="t m5 x1e2 h26 y1927 ff7 fs19 fc1 sc0 ls0 ws0">and<span class="_"> </span><span class="ff11">x</span></div><div class="t m5 xb0 h4b y1926 ff12 fs25 fc1 sc0 ls0 ws0">+</div><div class="t m5 x3a h26 y1927 ff7 fs19 fc1 sc0 ls0 ws0">such<span class="_"> </span>that<span class="_"> </span>the<span class="_ _11"> </span>value<span class="_"> </span><span class="ff11">x<span class="_"> </span></span>is<span class="_"> </span>guaran-</div><div class="t m5 x1d h26 y1928 ff7 fs19 fc1 sc0 ls0 ws0">teed<span class="_ _16"> </span>to<span class="_ _16"> </span>lie<span class="_ _16"> </span>between<span class="_ _16"> </span>them:<span class="_ _11"> </span><span class="ff11">x</span></div><div class="t m5 x9f h4b y1929 ff12 fs25 fc1 sc0 ls0 ws0">−</div><div class="t m5 x1c8 h46 y192a ff12 fs19 fc1 sc0 ls0 ws0">≤<span class="_ _10"> </span><span class="ff11">x<span class="_ _11"> </span></span>≤<span class="_ _10"> </span><span class="ff11">x</span></div><div class="t m5 x118 h4b y1929 ff12 fs25 fc1 sc0 ls0 ws0">+</div><div class="t m5 x17a h26 y192a ff7 fs19 fc1 sc0 ls0 ws0">.<span class="_ _16"> </span>T<span class="_ _1"></span>he<span class="_ _16"> </span>IEEE<span class="_ _16"> </span>ﬂoating-point<span class="_ _16"> </span>format<span class="_ _16"> </span>deﬁnes</div><div class="t m5 x1d h26 y192b ff7 fs19 fc1 sc0 ls0 ws0">four<span class="_ _16"> </span>different<span class="_ _16"> </span><span class="ffa">rounding<span class="_ _16"> </span>modes</span>.<span class="_ _16"> </span>T<span class="_ _1"></span>he<span class="_ _16"> </span>default<span class="_ _16"> </span>method<span class="_ _16"> </span>ﬁnds<span class="_ _16"> </span>a<span class="_ _11"> </span>closest<span class="_ _16"> </span>match,<span class="_ _14"> </span>while</div><div class="t m5 x1d h26 y192c ff7 fs19 fc1 sc0 ls0 ws0">the<span class="_"> </span>other<span class="_"> </span>three<span class="_"> </span>can<span class="_"> </span>be<span class="_"> </span>used<span class="_"> </span>for<span class="_"> </span>computing<span class="_"> </span>upper<span class="_"> </span>and<span class="_"> </span>lower<span class="_"> </span>bounds<span class="_ _1"></span>.</div><div class="t m5 x29 h26 y192d ff7 fs19 fc1 sc0 ls0 ws0">F<span class="_ _1"></span>igure<span class="_ _21"> </span>2.37<span class="_ _15"> </span>illustrates<span class="_ _15"> </span>the<span class="_ _15"> </span>four<span class="_ _15"> </span>rounding<span class="_ _15"> </span>modes<span class="_ _21"> </span>applied<span class="_ _15"> </span>to<span class="_ _15"> </span>the<span class="_ _15"> </span>problem<span class="_ _15"> </span>of</div><div class="t m5 x1d h26 y192e ff7 fs19 fc1 sc0 ls0 ws0">rounding<span class="_ _16"> </span>a<span class="_ _14"> </span>monetary<span class="_ _16"> </span>amount<span class="_ _16"> </span>to<span class="_ _14"> </span>the<span class="_ _16"> </span>nearest<span class="_ _14"> </span>whole<span class="_ _16"> </span>dollar.<span class="_ _16"> </span>Round-to-even<span class="_ _16"> </span>(also</div><div class="t m5 x1d h26 y192f ff7 fs19 fc1 sc0 ls0 ws0">called<span class="_ _11"> </span>round-to-nearest)<span class="_ _11"> </span>is<span class="_ _11"> </span>the<span class="_ _11"> </span>default<span class="_ _16"> </span>mode<span class="_ _1"></span>.<span class="_ _11"> </span>It<span class="_ _11"> </span>attempts<span class="_ _16"> </span>to<span class="_"> </span>ﬁnd<span class="_ _16"> </span>a<span class="_"> </span>closest<span class="_ _16"> </span>match.</div><div class="t m5 x1d h26 y1930 ff7 fs19 fc1 sc0 ls0 ws0">T<span class="_ _1"></span>hus<span class="_ _1"></span>,<span class="_"> </span>it<span class="_ _13"> </span>rounds<span class="_ _13"> </span>$1.40<span class="_"> </span>to<span class="_ _13"> </span>$1<span class="_ _13"> </span>and<span class="_"> </span>$1.60<span class="_ _13"> </span>to<span class="_ _13"> </span>$2,<span class="_"> </span>since<span class="_ _13"> </span>these<span class="_ _13"> </span>are<span class="_ _13"> </span>the<span class="_"> </span>closest<span class="_ _13"> </span>whole<span class="_ _13"> </span>dollar</div><div class="t m5 x1d h26 y1931 ff7 fs19 fc1 sc0 ls0 ws0">values<span class="_ _1"></span>.<span class="_ _15"> </span>T<span class="_ _0"></span>he<span class="_ _15"> </span>only<span class="_ _15"> </span>design<span class="_ _15"> </span>decision<span class="_ _21"> </span>is<span class="_ _15"> </span>to<span class="_ _15"> </span>determine<span class="_ _21"> </span>the<span class="_ _15"> </span>effect<span class="_ _15"> </span>of<span class="_ _15"> </span>rounding<span class="_ _21"> </span>values</div><div class="t m5 x1d h26 y1932 ff7 fs19 fc1 sc0 ls0 ws0">that<span class="_ _16"> </span>are<span class="_ _16"> </span>halfway<span class="_ _16"> </span>between<span class="_ _16"> </span>two<span class="_ _16"> </span>possible<span class="_ _16"> </span>results<span class="_ _1"></span>.<span class="_ _16"> </span>Round-to-even<span class="_ _16"> </span>mode<span class="_ _16"> </span>adopts<span class="_ _16"> </span>the</div><div class="t m5 x1d h26 y1933 ff7 fs19 fc1 sc0 ls0 ws0">convention<span class="_ _11"> </span>that<span class="_ _11"> </span>it<span class="_ _16"> </span>rounds<span class="_ _11"> </span>the<span class="_ _11"> </span>number<span class="_ _16"> </span>either<span class="_ _11"> </span>upward<span class="_ _11"> </span>or<span class="_ _16"> </span>downward<span class="_ _11"> </span>such<span class="_ _11"> </span>that<span class="_ _11"> </span>the</div><div class="t m5 x1d h26 y1934 ff7 fs19 fc1 sc0 ls0 ws0">least<span class="_ _16"> </span>signiﬁcant<span class="_ _14"> </span>digit<span class="_ _14"> </span>of<span class="_ _16"> </span>the<span class="_ _14"> </span>result<span class="_ _14"> </span>is<span class="_ _14"> </span>even.<span class="_ _16"> </span>Thus<span class="_ _3"></span>,<span class="_ _14"> </span>it<span class="_ _14"> </span>rounds<span class="_ _14"> </span>both<span class="_ _14"> </span>$1.50<span class="_ _16"> </span>and<span class="_ _14"> </span>$2.50</div><div class="t m5 x1d h26 y1935 ff7 fs19 fc1 sc0 ls0 ws0">to<span class="_"> </span>$2.</div><div class="t m5 x29 h26 y1936 ff7 fs19 fc1 sc0 ls0 ws0">T<span class="_ _1"></span>he<span class="_ _13"> </span>other<span class="_ _13"> </span>three<span class="_ _6"> </span>modes<span class="_ _13"> </span>produce<span class="_ _13"> </span>guaranteed<span class="_ _6"> </span>bounds<span class="_ _13"> </span>on<span class="_ _13"> </span>the<span class="_ _6"> </span>actual<span class="_ _13"> </span>value<span class="_ _0"></span>.<span class="_ _13"> </span>T<span class="_ _1"></span>hese</div><div class="t m5 x1d h26 y1937 ff7 fs19 fc1 sc0 ls0 ws0">can<span class="_ _11"> </span>be<span class="_ _16"> </span>useful<span class="_ _16"> </span>in<span class="_ _11"> </span>some<span class="_ _16"> </span>numerical<span class="_ _16"> </span>applications<span class="_ _1"></span>.<span class="_ _11"> </span>Round-toward-zero<span class="_ _16"> </span>mode<span class="_ _16"> </span>rounds</div><div class="t m5 x1d h46 y1938 ff7 fs19 fc1 sc0 ls0 ws0">positive<span class="_"> </span>numbers<span class="_ _13"> </span>downward<span class="_"> </span>and<span class="_ _13"> </span>negative<span class="_"> </span>numbers<span class="_"> </span>upward,<span class="_ _13"> </span>giving<span class="_"> </span>a<span class="_ _13"> </span>value<span class="_ _21"> </span><span class="ff12">ˆ<span class="_ _41"></span><span class="ff11">x<span class="_"> </span><span class="ff7">such</span></span></span></div><div class="t m5 x1d h31 y1939 ff7 fs21 fc2 sc0 ls0 ws0">Mode<span class="_ _10c"> </span>$1.40<span class="_ _26"> </span>$1.60<span class="_ _26"> </span>$1.50<span class="_ _26"> </span>$2.50<span class="_ _26"> </span>$–1.50</div><div class="t m5 x1d h31 y193a ff7 fs21 fc2 sc0 ls0 ws0">Round-to-even<span class="_ _10d"> </span>$1<span class="_ _28"> </span>$2<span class="_ _28"> </span>$2<span class="_ _5a"> </span>$2<span class="_ _28"> </span>$–2</div><div class="t m5 x1d h31 y193b ff7 fs21 fc2 sc0 ls0 ws0">Round-toward-zero<span class="_ _93"> </span>$1<span class="_ _28"> </span>$1<span class="_ _5a"> </span>$1<span class="_ _28"> </span>$2<span class="_ _28"> </span>$–1</div><div class="t m5 x1d h31 y193c ff7 fs21 fc2 sc0 ls0 ws0">Round-down<span class="_ _84"> </span>$1<span class="_ _28"> </span>$1<span class="_ _28"> </span>$1<span class="_ _5a"> </span>$2<span class="_ _28"> </span>$–2</div><div class="t m5 x1d h31 y193d ff7 fs21 fc2 sc0 ls0 ws0">Round-up<span class="_ _10e"> </span>$2<span class="_ _28"> </span>$2<span class="_ _28"> </span>$2<span class="_ _5a"> </span>$3<span class="_ _28"> </span>$–1</div><div class="t m5 x1d h34 y193e ffe fs16 fc6 sc0 ls0 ws0">Figure<span class="_"> </span>2.37<span class="_ _c"> </span><span class="fc1">Illustration<span class="_"> </span>of<span class="_ _11"> </span>rounding<span class="_"> </span>modes<span class="_ _11"> </span>for<span class="_ _11"> </span>dollar<span class="_"> </span>rounding.<span class="_ _11"> </span><span class="ff6">The<span class="_ _11"> </span>ﬁrst<span class="_ _11"> </span>rounds<span class="_ _10"> </span>to</span></span></div><div class="t m5 x1d h34 y193f ff6 fs16 fc1 sc0 ls0 ws0">a<span class="_ _10"> </span>nearest<span class="_ _11"> </span>value,<span class="_ _10"> </span>while<span class="_ _10"> </span>the<span class="_ _11"> </span>other<span class="_ _10"> </span>three<span class="_ _11"> </span>bound<span class="_ _10"> </span>the<span class="_ _11"> </span>result<span class="_ _10"> </span>above<span class="_ _10"> </span>or<span class="_ _11"> </span>below<span class="_ _3"></span>.</div></div><div class="pi" data-data='{"ctm":[2.000000,0.000000,0.000000,2.000000,0.000000,0.000000]}'></div></div>
