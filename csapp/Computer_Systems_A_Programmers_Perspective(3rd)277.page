<div id="pf115" class="pf w2 h11" data-page-no="115"><div class="pc pc115 w2 h11"><img class="bi x0 y0 w1 h1" alt="" src="csapp/bg115.png"/><div class="t m5 x14 h28 y9b ffe fs1e fc2 sc0 ls0 ws0">276<span class="_ _1b"> </span><span class="ff6 fs1f">Chapter<span class="_ _10"> </span>3<span class="_ _3d"> </span>Machine-Level<span class="_ _10"> </span>Representation<span class="_ _10"> </span>of<span class="_ _10"> </span>Programs</span></div><div class="t m5 x14 h2f ye7 ffe fs16 fc6 sc0 ls0 ws0">Figure<span class="_"> </span>3.25</div><div class="t m5 x14 h2f y58a ffe fs16 fc1 sc0 ls0 ws0">General<span class="_ _14"> </span>stack<span class="_ _15"> </span>frame</div><div class="t m5 x14 h34 y58b ffe fs16 fc1 sc0 ls0 ws0">structure.<span class="_ _15"> </span><span class="ff6">The<span class="_ _15"> </span>stack</span></div><div class="t m5 x14 h34 y58c ff6 fs16 fc1 sc0 ls0 ws0">can<span class="_ _16"> </span>be<span class="_ _16"> </span>used<span class="_ _16"> </span>for<span class="_ _16"> </span>passing</div><div class="t m5 x14 h34 y58d ff6 fs16 fc1 sc0 ls0 ws0">arguments,<span class="_ _14"> </span>for<span class="_ _14"> </span>storing</div><div class="t m5 x14 h34 y58e ff6 fs16 fc1 sc0 ls0 ws0">return<span class="_ _16"> </span>information,<span class="_ _15"> </span>for</div><div class="t m5 x14 h34 y58f ff6 fs16 fc1 sc0 ls0 ws0">saving<span class="_ _16"> </span>registers,<span class="_ _16"> </span>and<span class="_ _16"> </span>for</div><div class="t m5 x14 h34 y8d9 ff6 fs16 fc1 sc0 ls0 ws0">local<span class="_ _14"> </span>storage.<span class="_ _14"> </span>Portions</div><div class="t m5 x14 h34 y8da ff6 fs16 fc1 sc0 ls0 ws0">may<span class="_ _11"> </span>be<span class="_ _10"> </span>omitted<span class="_ _11"> </span>when<span class="_ _11"> </span>not</div><div class="t m5 x14 h34 y8db ff6 fs16 fc1 sc0 ls0 ws0">needed.</div><div class="t m8 x208 h7b y2927 ff26 fs43 fc1 sc0 ls0 ws0">. . .<span class="_ _148"> </span>. . .</div><div class="t m5 x180 h3f y2928 ff26 fs27 fc1 sc0 ls0 ws0">Stack “bottom”</div><div class="t m5 x187 h3f y2929 ff26 fs27 fc1 sc0 ls0 ws0">Stack “top”</div><div class="t m5 x181 h3f y292a ff26 fs27 fc1 sc0 ls0 ws0">Argument <span class="ff1f">n</span></div><div class="t m5 x181 h3f y292b ff26 fs27 fc1 sc0 ls0 ws0">Argument 7</div><div class="t m5 x20c h3f y292c ff26 fs27 fc1 sc0 ls0 ws0">Argument</div><div class="t m5 xd5 h3f y292d ff26 fs27 fc1 sc0 ls0 ws0">build area</div><div class="t m5 x198 h3f y292e ff26 fs27 fc1 sc0 ls0 ws0">Return address</div><div class="t m5 x1b1 h3f y292f ff26 fs27 fc1 sc0 ls0 ws0">Local variables</div><div class="t m5 x16 h3f y2930 ff26 fs27 fc1 sc0 ls0 ws0">Saved registers</div><div class="t m5 xcc h3f y2931 ff26 fs27 fc1 sc0 ls0 ws0">Stack pointer</div><div class="t m5 x89 h40 y2932 ff22 fs28 fc1 sc0 ls0 ws0">%rsp</div><div class="t m5 x247 h3f y2933 ff26 fs27 fc1 sc0 ls0 ws0">Earlier frames</div><div class="t m5 xe0 h3f y2934 ff26 fs27 fc1 sc0 ls0 ws0">Increasing</div><div class="t m5 xc3 h3f y2935 ff26 fs27 fc1 sc0 ls0 ws0">address</div><div class="t m5 x247 h3f y2936 ff26 fs27 fc1 sc0 ls0 ws0">Frame for calling</div><div class="t m5 x247 h40 y2937 ff26 fs27 fc1 sc0 ls0 ws0">function <span class="ff22 fs28">P</span></div><div class="t m5 x247 h3f y2938 ff26 fs27 fc1 sc0 ls0 ws0">Frame for executing</div><div class="t m5 x247 h40 y2939 ff26 fs27 fc1 sc0 ls0 ws0">function <span class="ff22 fs28">Q</span></div><div class="t m5 x1d h26 y561 ffa fs19 fc1 sc0 ls0 ws0">stack<span class="_"> </span>frame<span class="ff7">.<span class="_"> </span>F<span class="_ _1"></span>igure<span class="_"> </span>3.25<span class="_"> </span>shows<span class="_"> </span>the<span class="_"> </span>overall<span class="_ _13"> </span>structure<span class="_"> </span>of<span class="_"> </span>the<span class="_"> </span>run-time<span class="_"> </span>stack,<span class="_"> </span>includ-</span></div><div class="t m5 x1d h26 y562 ff7 fs19 fc1 sc0 ls0 ws0">ing<span class="_"> </span>its<span class="_ _11"> </span>partitioning<span class="_ _11"> </span>into<span class="_ _11"> </span>stack<span class="_ _11"> </span>frames<span class="_ _1"></span>,<span class="_ _11"> </span>in<span class="_ _11"> </span>its<span class="_ _11"> </span>most<span class="_ _11"> </span>general<span class="_ _11"> </span>form.<span class="_"> </span>The<span class="_"> </span>frame<span class="_ _11"> </span>for<span class="_ _11"> </span>the</div><div class="t m5 x1d h26 y563 ff7 fs19 fc1 sc0 ls0 ws0">currently<span class="_ _13"> </span>executing<span class="_ _13"> </span>procedure<span class="_ _13"> </span>is<span class="_"> </span>always<span class="_ _13"> </span>at<span class="_ _13"> </span>the<span class="_ _13"> </span>top<span class="_ _13"> </span>of<span class="_ _13"> </span>the<span class="_"> </span>stack.<span class="_ _13"> </span>W<span class="_ _0"></span>hen<span class="_ _13"> </span>procedure<span class="_ _13"> </span><span class="ffd">P</span></div><div class="t m5 x1d h26 y564 ff7 fs19 fc1 sc0 ls0 ws0">calls<span class="_"> </span>procedure<span class="_ _11"> </span><span class="ffd">Q</span>,<span class="_"> </span>it<span class="_ _11"> </span>will<span class="_"> </span>push<span class="_ _11"> </span>the<span class="_"> </span><span class="ffa">return<span class="_ _11"> </span>address<span class="_"> </span></span>onto<span class="_ _11"> </span>the<span class="_"> </span>stack,<span class="_ _11"> </span>indicating<span class="_"> </span>where</div><div class="t m5 x1d h26 y565 ff7 fs19 fc1 sc0 ls0 ws0">within<span class="_ _16"> </span><span class="ffd">P<span class="_ _16"> </span></span>the<span class="_ _16"> </span>program<span class="_ _16"> </span>should<span class="_ _16"> </span>resume<span class="_ _16"> </span>execution<span class="_ _16"> </span>once<span class="_ _16"> </span><span class="ffd">Q<span class="_ _16"> </span></span>returns<span class="_ _1"></span>.<span class="_ _16"> </span>W<span class="_ _3"></span>e<span class="_ _16"> </span>consider<span class="_ _14"> </span>the</div><div class="t m5 x1d h26 y566 ff7 fs19 fc1 sc0 ls0 ws0">return<span class="_"> </span>address<span class="_"> </span>to<span class="_"> </span>be<span class="_"> </span>part<span class="_"> </span>of<span class="_"> </span><span class="ffd">P</span>’<span class="_ _1"></span>s<span class="_"> </span>stack<span class="_"> </span>frame,<span class="_"> </span>since<span class="_ _13"> </span>it<span class="_"> </span>holds<span class="_"> </span>state<span class="_"> </span>relevant<span class="_"> </span>to<span class="_"> </span><span class="ffd">P</span><span class="ls16b">.T<span class="_ _49"></span>h<span class="_ _4a"></span>e</span></div><div class="t m5 x1d h26 y567 ff7 fs19 fc1 sc0 ls0 ws0">code<span class="_ _11"> </span>for<span class="_ _16"> </span><span class="ffd">Q<span class="_ _16"> </span></span>allocates<span class="_ _11"> </span>the<span class="_ _16"> </span>space<span class="_ _16"> </span>required<span class="_ _11"> </span>for<span class="_ _16"> </span>its<span class="_ _16"> </span>stack<span class="_ _11"> </span>frame<span class="_ _16"> </span>by<span class="_ _16"> </span>extending<span class="_ _11"> </span>the<span class="_ _16"> </span>cur<span class="_ _1"></span>-</div><div class="t m5 x1d h26 y216d ff7 fs19 fc1 sc0 ls0 ws0">rent<span class="_"> </span>stack<span class="_ _13"> </span>boundary<span class="_ _3"></span>.<span class="_ _13"> </span>Within<span class="_ _13"> </span>that<span class="_"> </span>space<span class="_ _1"></span>,<span class="_"> </span>it<span class="_ _13"> </span>can<span class="_"> </span>save<span class="_ _13"> </span>the<span class="_"> </span>values<span class="_ _13"> </span>of<span class="_"> </span>registers<span class="_ _3"></span>,<span class="_"> </span>allocate</div></div><div class="pi" data-data='{"ctm":[2.000000,0.000000,0.000000,2.000000,0.000000,0.000000]}'></div></div>
