<div id="pf236" class="pf w2 h11" data-page-no="236"><div class="pc pc236 w2 h11"><img class="bi x0 y0 w1 h1" alt="" src="csapp/bg236.png"/><div class="t m5 x23b h28 y9b ff6 fs1f fc2 sc0 ls0 ws0">Section<span class="_ _10"> </span>5.7<span class="_ _60"> </span>Understanding<span class="_ _10"> </span>Modern<span class="_ _10"> </span>Processors<span class="_ _3e"> </span><span class="ffe fs1e">565</span></div><div class="t m5 x17 h26 y9c ff7 fs19 fc2 sc0 ls0 ws0">dependencies<span class="_ _1"></span>,<span class="_ _11"> </span>corresponding<span class="_"> </span>to<span class="_ _11"> </span>the<span class="_ _11"> </span>updating<span class="_ _11"> </span>of<span class="_"> </span>program<span class="_ _11"> </span>values<span class="_ _11"> </span><span class="ffd">acc<span class="_ _11"> </span></span>and<span class="_"> </span><span class="ffd">data+i</span></div><div class="t m5 x17 h26 y409 ff7 fs19 fc2 sc0 ls0 ws0">with<span class="_ _6"> </span>operations<span class="_ _6"> </span><span class="ff6">mul<span class="_ _6"> </span></span>and<span class="_ _6"> </span><span class="ff6">add</span>,<span class="_ _6"> </span>respectively<span class="_ _3"></span>.<span class="_ _6"> </span>Given<span class="_ _6"> </span>that<span class="_ _6"> </span>ﬂoating-point<span class="_ _6"> </span>multiplication</div><div class="t m5 x17 h26 y40a ff7 fs19 fc2 sc0 ls0 ws0">has<span class="_ _13"> </span>a<span class="_"> </span>latenc<span class="_ _0"></span>y<span class="_ _13"> </span>of<span class="_"> </span>5<span class="_ _13"> </span>cycles<span class="_ _3"></span>,<span class="_"> </span>while<span class="_ _13"> </span>integer<span class="_"> </span>addition<span class="_ _13"> </span>has<span class="_ _13"> </span>a<span class="_"> </span>latenc<span class="_ _0"></span>y<span class="_ _13"> </span>of<span class="_"> </span>1<span class="_ _13"> </span>cycle<span class="_ _1"></span>,<span class="_"> </span>we<span class="_ _13"> </span>can<span class="_ _13"> </span>see</div><div class="t m5 x17 h26 y40b ff7 fs19 fc2 sc0 ls0 ws0">that<span class="_ _11"> </span>the<span class="_ _11"> </span>chain<span class="_ _11"> </span>on<span class="_ _11"> </span>the<span class="_ _11"> </span>left<span class="_ _16"> </span>will<span class="_"> </span>form<span class="_ _11"> </span>a<span class="_ _16"> </span><span class="ffa">critical<span class="_"> </span>path</span>,<span class="_ _16"> </span>requiring<span class="_"> </span>5<span class="ff11">n<span class="_ _11"> </span></span>cycles<span class="_"> </span>to<span class="_ _11"> </span>execute.</div><div class="t m5 x17 h26 y40c ff7 fs19 fc2 sc0 ls0 ws0">T<span class="_ _1"></span>he<span class="_ _11"> </span>chain<span class="_ _11"> </span>on<span class="_ _11"> </span>the<span class="_ _11"> </span>right<span class="_ _11"> </span>would<span class="_"> </span>require<span class="_ _11"> </span>only<span class="_ _11"> </span><span class="ff11">n<span class="_ _11"> </span></span>cycles<span class="_"> </span>to<span class="_ _11"> </span>execute,<span class="_"> </span>and<span class="_ _11"> </span>so<span class="_"> </span>it<span class="_ _11"> </span>does<span class="_ _11"> </span>not</div><div class="t m5 x17 h26 y40d ff7 fs19 fc2 sc0 ls0 ws0">limit<span class="_"> </span>the<span class="_"> </span>program<span class="_"> </span>performance<span class="_ _1"></span>.</div><div class="t m5 x26 h26 y40e ff7 fs19 fc2 sc0 ls0 ws0">F<span class="_ _1"></span>igure<span class="_"> </span>5.15<span class="_ _13"> </span>demonstrates<span class="_"> </span>why<span class="_ _13"> </span>we<span class="_"> </span>achieved<span class="_ _13"> </span>a<span class="_"> </span>CPE<span class="_ _13"> </span>equal<span class="_"> </span>to<span class="_ _13"> </span>the<span class="_"> </span>latenc<span class="_ _1"></span>y<span class="_"> </span>bound</div><div class="t m5 x17 h26 y40f ff7 fs19 fc2 sc0 ls0 ws0">of<span class="_ _13"> </span>5<span class="_ _6"> </span>cycles<span class="_ _6"> </span>for<span class="_ _13"> </span><span class="ffd">combine4</span>,<span class="_ _13"> </span>when<span class="_ _6"> </span>performing<span class="_ _13"> </span>ﬂoating-point<span class="_ _6"> </span>multiplication.<span class="_ _13"> </span>When<span class="_ _6"> </span>ex-</div><div class="t m5 x17 h26 y410 ff7 fs19 fc2 sc0 ls0 ws0">ecuting<span class="_"> </span>the<span class="_ _11"> </span>function,<span class="_"> </span>the<span class="_ _11"> </span>ﬂoating-point<span class="_ _11"> </span>multiplier<span class="_"> </span>becomes<span class="_ _11"> </span>the<span class="_"> </span>limiting<span class="_ _11"> </span>resource<span class="_ _0"></span>.</div><div class="t m5 x17 h26 y411 ff7 fs19 fc2 sc0 ls0 ws0">T<span class="_ _1"></span>he<span class="_"> </span>other<span class="_ _13"> </span>operations<span class="_ _13"> </span>required<span class="_ _13"> </span>during<span class="_ _13"> </span>the<span class="_ _13"> </span>loop—manipulating<span class="_"> </span>and<span class="_ _13"> </span>testing<span class="_ _13"> </span>pointer</div><div class="t m5 x17 h26 y412 ff7 fs19 fc2 sc0 ls0 ws0">value<span class="_"> </span><span class="ffd">data+i<span class="_ _11"> </span></span>and<span class="_"> </span>reading<span class="_ _11"> </span>data<span class="_ _11"> </span>from<span class="_"> </span>memory—proceed<span class="_ _11"> </span>in<span class="_"> </span>parallel<span class="_ _11"> </span>with<span class="_ _11"> </span>the<span class="_"> </span>mul-</div><div class="t m5 x17 h26 y413 ff7 fs19 fc2 sc0 ls0 ws0">tiplication.<span class="_"> </span>As<span class="_ _11"> </span>each<span class="_ _11"> </span>successive<span class="_"> </span>value<span class="_ _11"> </span>of<span class="_ _11"> </span><span class="ffd">acc<span class="_ _11"> </span></span>is<span class="_"> </span>computed,<span class="_ _11"> </span>it<span class="_ _11"> </span>is<span class="_ _11"> </span>fed<span class="_"> </span>back<span class="_ _11"> </span>around<span class="_ _11"> </span>to</div><div class="t m5 x17 h26 y414 ff7 fs19 fc2 sc0 ls0 ws0">compute<span class="_"> </span>the<span class="_"> </span>next<span class="_"> </span>value<span class="_ _1"></span>,<span class="_"> </span>but<span class="_"> </span>this<span class="_"> </span>will<span class="_"> </span>not<span class="_"> </span>occur<span class="_"> </span>until<span class="_"> </span>5<span class="_"> </span>cycles<span class="_"> </span>later.</div><div class="t m5 x26 h26 y415 ff7 fs19 fc2 sc0 ls0 ws0">T<span class="_ _1"></span>he<span class="_ _16"> </span>ﬂow<span class="_ _11"> </span>for<span class="_ _16"> </span>other<span class="_ _11"> </span>combinations<span class="_ _16"> </span>of<span class="_ _11"> </span>data<span class="_ _16"> </span>type<span class="_ _11"> </span>and<span class="_ _11"> </span>operation<span class="_ _16"> </span>are<span class="_ _11"> </span>identical<span class="_ _16"> </span>to</div><div class="t m5 x17 h26 y416 ff7 fs19 fc2 sc0 ls0 ws0">those<span class="_ _6"> </span>shown<span class="_ _6"> </span>in<span class="_ _13"> </span>F<span class="_ _1"></span>igure<span class="_ _6"> </span>5.15,<span class="_ _13"> </span>but<span class="_ _6"> </span>with<span class="_ _6"> </span>a<span class="_ _6"> </span>different<span class="_ _13"> </span>data<span class="_ _a"> </span>operation<span class="_ _13"> </span>forming<span class="_ _a"> </span>the<span class="_ _13"> </span>chain<span class="_ _a"> </span>of</div><div class="t m5 x17 h26 y434 ff7 fs19 fc2 sc0 ls0 ws0">data<span class="_"> </span>dependencies<span class="_ _13"> </span>shown<span class="_"> </span>on<span class="_"> </span>the<span class="_ _13"> </span>left.<span class="_"> </span>F<span class="_ _1"></span>or<span class="_"> </span>all<span class="_ _13"> </span>of<span class="_"> </span>the<span class="_"> </span>cases<span class="_ _13"> </span>where<span class="_"> </span>the<span class="_"> </span>operation<span class="_ _13"> </span>has</div><div class="t m5 x17 h26 y435 ff7 fs19 fc2 sc0 ls0 ws0">a<span class="_"> </span>latency<span class="_"> </span><span class="ff11">L<span class="_ _11"> </span></span>greater<span class="_"> </span>than<span class="_ _11"> </span>1,<span class="_ _11"> </span>we<span class="_"> </span>see<span class="_ _11"> </span>that<span class="_"> </span>the<span class="_ _11"> </span>measured<span class="_ _11"> </span>CPE<span class="_"> </span>is<span class="_ _11"> </span>simply<span class="_"> </span><span class="ff11">L</span>,<span class="_ _11"> </span>indicating</div><div class="t m5 x17 h26 y436 ff7 fs19 fc2 sc0 ls0 ws0">that<span class="_"> </span>this<span class="_"> </span>chain<span class="_"> </span>forms<span class="_"> </span>the<span class="_"> </span>performance-limiting<span class="_"> </span>critical<span class="_"> </span>path.</div><div class="t m5 x17 h42 y47f1 ff6 fs29 fc6 sc0 ls0 ws0">Other<span class="_ _11"> </span>Per<span class="_ _2"></span>formance<span class="_ _11"> </span>Factors</div><div class="t m5 x17 h26 y19b0 ff7 fs19 fc1 sc0 ls0 ws0">F<span class="_ _1"></span>or<span class="_ _6"> </span>the<span class="_ _13"> </span>case<span class="_ _a"> </span>of<span class="_ _13"> </span>integer<span class="_ _a"> </span>addition,<span class="_ _13"> </span>on<span class="_ _6"> </span>the<span class="_ _6"> </span>other<span class="_ _13"> </span>hand,<span class="_ _6"> </span>our<span class="_ _6"> </span>measurements<span class="_ _13"> </span>of<span class="_ _6"> </span><span class="ffd">combine4</span></div><div class="t m5 x17 h26 y19b1 ff7 fs19 fc1 sc0 ls0 ws0">show<span class="_"> </span>a<span class="_ _11"> </span>CPE<span class="_ _11"> </span>of<span class="_ _11"> </span>1.27,<span class="_ _11"> </span>slower<span class="_"> </span>than<span class="_ _11"> </span>the<span class="_ _11"> </span>CPE<span class="_ _11"> </span>of<span class="_"> </span>1.00<span class="_ _11"> </span>we<span class="_ _11"> </span>would<span class="_ _11"> </span>predict<span class="_"> </span>based<span class="_ _11"> </span>on<span class="_ _11"> </span>the</div><div class="t m5 x17 h26 y4ccb ff7 fs19 fc1 sc0 ls0 ws0">chains<span class="_"> </span>of<span class="_"> </span>dependencies<span class="_ _13"> </span>formed<span class="_"> </span>along<span class="_"> </span>either<span class="_"> </span>the<span class="_"> </span>left-<span class="_ _13"> </span>or<span class="_"> </span>the<span class="_"> </span>right-hand<span class="_"> </span>side<span class="_"> </span>of<span class="_ _13"> </span>the</div><div class="t m5 x17 h26 y4ccc ff7 fs19 fc1 sc0 ls0 ws0">graph<span class="_"> </span>of<span class="_"> </span>F<span class="_ _1"></span>igure<span class="_"> </span>5.15.<span class="_"> </span>T<span class="_ _1"></span>his<span class="_"> </span>illustrates<span class="_"> </span>the<span class="_"> </span>principle<span class="_ _13"> </span>that<span class="_"> </span>the<span class="_"> </span>critical<span class="_"> </span>paths<span class="_"> </span>in<span class="_ _13"> </span>a<span class="_"> </span>data-</div><div class="t m5 x17 h26 y4ccd ff7 fs19 fc1 sc0 ls0 ws0">ﬂow<span class="_ _16"> </span>representation<span class="_ _11"> </span>provide<span class="_ _16"> </span>only<span class="_ _16"> </span>a<span class="_ _11"> </span><span class="ffa">lower<span class="_ _16"> </span></span>bound<span class="_ _16"> </span>on<span class="_ _16"> </span>how<span class="_ _11"> </span>many<span class="_ _16"> </span>cycles<span class="_ _11"> </span>a<span class="_ _16"> </span>program</div><div class="t m5 x17 h26 y4cce ff7 fs19 fc1 sc0 ls0 ws0">will<span class="_"> </span>require<span class="_ _1"></span>.<span class="_"> </span>Other<span class="_ _13"> </span>factors<span class="_"> </span>can<span class="_ _13"> </span>also<span class="_"> </span>limit<span class="_"> </span>performance<span class="_ _1"></span>,<span class="_"> </span>including<span class="_ _13"> </span>the<span class="_"> </span>total<span class="_"> </span>number</div><div class="t m5 x17 h26 y4ccf ff7 fs19 fc1 sc0 ls0 ws0">of<span class="_ _14"> </span>functional<span class="_ _14"> </span>units<span class="_ _16"> </span>available<span class="_ _14"> </span>and<span class="_ _14"> </span>the<span class="_ _14"> </span>number<span class="_ _14"> </span>of<span class="_ _14"> </span>data<span class="_ _14"> </span>values<span class="_ _14"> </span>that<span class="_ _14"> </span>can<span class="_ _14"> </span>be<span class="_ _14"> </span>passed</div><div class="t m5 x17 h26 y4cd0 ff7 fs19 fc1 sc0 ls0 ws0">among<span class="_"> </span>the<span class="_ _11"> </span>functional<span class="_ _11"> </span>units<span class="_ _11"> </span>on<span class="_ _11"> </span>any<span class="_ _11"> </span>given<span class="_"> </span>step.<span class="_"> </span>F<span class="_ _1"></span>or<span class="_ _11"> </span>the<span class="_"> </span>case<span class="_ _11"> </span>of<span class="_ _11"> </span>integer<span class="_ _11"> </span>addition<span class="_ _11"> </span>as</div><div class="t m5 x17 h26 y4cd1 ff7 fs19 fc1 sc0 ls0 ws0">the<span class="_"> </span>combining<span class="_ _13"> </span>operation,<span class="_"> </span>the<span class="_ _13"> </span>data<span class="_"> </span>operation<span class="_ _13"> </span>is<span class="_"> </span>sufﬁciently<span class="_ _13"> </span>fast<span class="_"> </span>that<span class="_ _13"> </span>the<span class="_"> </span>rest<span class="_ _13"> </span>of<span class="_"> </span>the</div><div class="t m5 x17 h26 y4cd2 ff7 fs19 fc1 sc0 ls0 ws0">operations<span class="_ _13"> </span>cannot<span class="_ _13"> </span>supply<span class="_ _13"> </span>data<span class="_ _13"> </span>fast<span class="_ _13"> </span>enough.<span class="_ _13"> </span>Determining<span class="_ _13"> </span>exactly<span class="_ _13"> </span>why<span class="_ _13"> </span>the<span class="_ _13"> </span>program</div><div class="t m5 x17 h26 y4cd3 ff7 fs19 fc1 sc0 ls0 ws0">requires<span class="_"> </span>1.27<span class="_"> </span>cycles<span class="_"> </span>per<span class="_"> </span>element<span class="_"> </span>would<span class="_"> </span>require<span class="_"> </span>a<span class="_"> </span>much<span class="_"> </span>more<span class="_"> </span>detailed<span class="_"> </span>knowledge</div><div class="t m5 x17 h26 y4cd4 ff7 fs19 fc1 sc0 ls0 ws0">of<span class="_"> </span>the<span class="_"> </span>hardware<span class="_"> </span>design<span class="_"> </span>than<span class="_"> </span>is<span class="_"> </span>publicly<span class="_"> </span>available<span class="_ _1"></span>.</div><div class="t m5 x26 h26 y4cd5 ff7 fs19 fc1 sc0 ls0 ws0">T<span class="_ _7"></span>o<span class="_ _11"> </span>summarize<span class="_"> </span>our<span class="_ _11"> </span>performance<span class="_"> </span>analysis<span class="_ _11"> </span>of<span class="_"> </span><span class="ffd">combine4</span>:<span class="_ _11"> </span>our<span class="_"> </span>abstract<span class="_ _11"> </span>data-ﬂow</div><div class="t m5 x17 h26 y4cd6 ff7 fs19 fc1 sc0 ls0 ws0">representation<span class="_"> </span>of<span class="_"> </span>program<span class="_"> </span>operation<span class="_"> </span>showed<span class="_"> </span>that<span class="_"> </span><span class="ffd">combine4<span class="_ _13"> </span></span>has<span class="_"> </span>a<span class="_"> </span>critical<span class="_"> </span>path<span class="_"> </span>of</div><div class="t m5 x17 h26 y4cd7 ff7 fs19 fc1 sc0 ls0 ws0">length<span class="_ _13"> </span><span class="ff11">L</span></div><div class="t m5 x10a h45 y4cd8 ff11 fs19 fc1 sc0 ls0 ws0">.</div><div class="t m5 x1a0 h26 y4cd7 ff11 fs19 fc1 sc0 ls0 ws0">n<span class="_ _13"> </span><span class="ff7">caused<span class="_ _13"> </span>by<span class="_ _13"> </span>the<span class="_ _13"> </span>successive<span class="_ _13"> </span>updating<span class="_ _13"> </span>of<span class="_ _13"> </span>program<span class="_ _13"> </span>value<span class="_"> </span><span class="ffd">acc</span>,<span class="_ _13"> </span>and<span class="_ _13"> </span>this<span class="_ _13"> </span>path</span></div><div class="t m5 x17 h26 y4cd9 ff7 fs19 fc1 sc0 ls0 ws0">limits<span class="_ _13"> </span>the<span class="_ _6"> </span>CPE<span class="_ _13"> </span>to<span class="_ _13"> </span>at<span class="_ _6"> </span>least<span class="_ _13"> </span><span class="ff11">L</span>.<span class="_ _13"> </span>T<span class="_ _1"></span>his<span class="_ _13"> </span>is<span class="_ _6"> </span>indeed<span class="_ _13"> </span>the<span class="_ _13"> </span>CPE<span class="_ _6"> </span>we<span class="_ _13"> </span>measure<span class="_ _13"> </span>for<span class="_ _6"> </span>all<span class="_ _13"> </span>cases<span class="_ _13"> </span>except</div><div class="t m5 x17 h26 y4cda ff7 fs19 fc1 sc0 ls0 ws0">integer<span class="_"> </span>addition,<span class="_ _11"> </span>which<span class="_ _11"> </span>has<span class="_ _11"> </span>a<span class="_"> </span>measured<span class="_ _11"> </span>CPE<span class="_ _11"> </span>of<span class="_"> </span>1.27<span class="_ _11"> </span>rather<span class="_ _11"> </span>than<span class="_ _11"> </span>the<span class="_"> </span>CPE<span class="_ _11"> </span>of<span class="_ _11"> </span>1.00</div><div class="t m5 x17 h26 y4cdb ff7 fs19 fc1 sc0 ls0 ws0">we<span class="_"> </span>would<span class="_"> </span>expect<span class="_"> </span>from<span class="_"> </span>the<span class="_"> </span>critical<span class="_"> </span>path<span class="_"> </span>length.</div><div class="t m5 x26 h26 y4cdc ff7 fs19 fc1 sc0 ls0 ws0">It<span class="_ _16"> </span>may<span class="_ _16"> </span>seem<span class="_ _14"> </span>that<span class="_ _16"> </span>the<span class="_ _16"> </span>latency<span class="_ _16"> </span>bound<span class="_ _14"> </span>forms<span class="_ _16"> </span>a<span class="_ _16"> </span>fundamental<span class="_ _14"> </span>limit<span class="_ _16"> </span>on<span class="_ _16"> </span>how<span class="_ _14"> </span>fast</div><div class="t m5 x17 h26 y4cdd ff7 fs19 fc1 sc0 ls0 ws0">our<span class="_"> </span>combining<span class="_"> </span>operations<span class="_"> </span>can<span class="_"> </span>be<span class="_"> </span>performed.<span class="_"> </span>Our<span class="_"> </span>next<span class="_"> </span>task<span class="_"> </span>will<span class="_"> </span>be<span class="_"> </span>to<span class="_"> </span>restructure</div><div class="t m5 x17 h26 y4cde ff7 fs19 fc1 sc0 ls0 ws0">the<span class="_ _13"> </span>operations<span class="_ _13"> </span>to<span class="_"> </span>enhance<span class="_ _13"> </span>instruction-level<span class="_ _13"> </span>parallelism.<span class="_ _13"> </span>W<span class="_ _1"></span>e<span class="_ _13"> </span>want<span class="_"> </span>to<span class="_ _13"> </span>transform<span class="_ _13"> </span>the</div><div class="t m5 x17 h26 y4cdf ff7 fs19 fc1 sc0 ls0 ws0">program<span class="_ _16"> </span>in<span class="_ _11"> </span>such<span class="_ _16"> </span>a<span class="_ _16"> </span>way<span class="_ _11"> </span>that<span class="_ _16"> </span>our<span class="_ _16"> </span>only<span class="_ _16"> </span>limitation<span class="_ _11"> </span>becomes<span class="_ _16"> </span>the<span class="_ _16"> </span>throughput<span class="_ _11"> </span>bound,</div><div class="t m5 x17 h26 y4ce0 ff7 fs19 fc1 sc0 ls0 ws0">yielding<span class="_"> </span>CPEs<span class="_"> </span>below<span class="_"> </span>or<span class="_"> </span>close<span class="_"> </span>to<span class="_"> </span>1.00.</div></div><div class="pi" data-data='{"ctm":[2.000000,0.000000,0.000000,2.000000,0.000000,0.000000]}'></div></div>
