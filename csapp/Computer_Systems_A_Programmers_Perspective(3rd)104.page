<div id="pf68" class="pf w2 h11" data-page-no="68"><div class="pc pc68 w2 h11"><img class="bi x0 y0 w1 h1" alt="" src="csapp/bg68.png"/><div class="t m5 x94 h28 y9b ff6 fs1f fc2 sc0 ls0 ws0">Section<span class="_ _10"> </span>2.2<span class="_ _60"> </span>Integer<span class="_ _10"> </span>Representations<span class="_ _3e"> </span><span class="ffe fs1e">103</span></div><div class="t m5 x34 h2a y257 fff fs1c fc2 sc0 ls0 ws0">Aside<span class="_ _1b"> </span><span class="ff6 fs19">More<span class="_ _11"> </span>on<span class="_ _11"> </span>ﬁxed-size<span class="_ _11"> </span>integer<span class="_ _16"> </span>types</span></div><div class="t m5 x62 h2b y2d0 ff7 fs1e fc2 sc0 ls0 ws0">F<span class="_ _1"></span>or<span class="_"> </span>some<span class="_"> </span>programs<span class="_ _3"></span>,<span class="_"> </span>it<span class="_"> </span>is<span class="_"> </span>essential<span class="_"> </span>that<span class="_"> </span>data<span class="_ _13"> </span>types<span class="_"> </span>be<span class="_"> </span>encoded<span class="_"> </span>using<span class="_ _13"> </span>representations<span class="_"> </span>with<span class="_"> </span>speciﬁc<span class="_ _13"> </span>sizes<span class="_ _1"></span>.</div><div class="t m5 x34 h2b y2d1 ff7 fs1e fc2 sc0 ls0 ws0">F<span class="_ _1"></span>or<span class="_"> </span>example<span class="_ _1"></span>,<span class="_"> </span>when<span class="_ _13"> </span>writing<span class="_ _13"> </span>programs<span class="_"> </span>to<span class="_ _13"> </span>enable<span class="_ _13"> </span>a<span class="_"> </span>machine<span class="_ _13"> </span>to<span class="_ _13"> </span>communicate<span class="_"> </span>over<span class="_ _13"> </span>the<span class="_ _13"> </span>Internet<span class="_ _13"> </span>according</div><div class="t m5 x34 h2b y2d2 ff7 fs1e fc2 sc0 ls0 ws0">to<span class="_ _6"> </span>a<span class="_ _6"> </span>standard<span class="_ _6"> </span>protocol,<span class="_ _13"> </span>it<span class="_ _a"> </span>is<span class="_ _6"> </span>important<span class="_ _6"> </span>to<span class="_ _6"> </span>have<span class="_ _6"> </span>data<span class="_ _13"> </span>types<span class="_ _a"> </span>compatible<span class="_ _6"> </span>with<span class="_ _6"> </span>those<span class="_ _6"> </span>speciﬁed<span class="_ _6"> </span>by<span class="_ _6"> </span>the<span class="_ _13"> </span>protocol.</div><div class="t m5 x34 h2b y2d3 ff7 fs1e fc2 sc0 ls0 ws0">W<span class="_ _3"></span>e<span class="_ _16"> </span>have<span class="_ _16"> </span>seen<span class="_ _16"> </span>that<span class="_ _16"> </span>some<span class="_ _11"> </span>C<span class="_ _16"> </span>data<span class="_ _16"> </span>types<span class="_ _1"></span>,<span class="_ _16"> </span>especially<span class="_ _16"> </span><span class="ffd">long</span>,<span class="_ _16"> </span>have<span class="_ _16"> </span>different<span class="_ _16"> </span>ranges<span class="_ _16"> </span>on<span class="_ _16"> </span>different<span class="_ _16"> </span>machines<span class="_ _3"></span>,</div><div class="t m5 x34 h2b y2d4 ff7 fs1e fc2 sc0 ls0 ws0">and<span class="_ _11"> </span>in<span class="_ _11"> </span>fact<span class="_ _11"> </span>the<span class="_ _10"> </span>C<span class="_ _11"> </span>standards<span class="_ _11"> </span>only<span class="_ _11"> </span>specify<span class="_ _11"> </span>the<span class="_ _11"> </span>minimum<span class="_ _11"> </span>ranges<span class="_ _11"> </span>for<span class="_ _11"> </span>any<span class="_ _11"> </span>data<span class="_ _11"> </span>type<span class="_ _0"></span>,<span class="_ _11"> </span>not<span class="_ _11"> </span>the<span class="_ _11"> </span>exact<span class="_ _11"> </span>ranges<span class="_ _1"></span>.</div><div class="t m5 x34 h2b y2d5 ff7 fs1e fc2 sc0 ls0 ws0">Although<span class="_ _16"> </span>we<span class="_ _14"> </span>can<span class="_ _14"> </span>choose<span class="_ _16"> </span>data<span class="_ _14"> </span>types<span class="_ _14"> </span>that<span class="_ _16"> </span>will<span class="_ _14"> </span>be<span class="_ _14"> </span>compatible<span class="_ _16"> </span>with<span class="_ _14"> </span>standard<span class="_ _14"> </span>representations<span class="_ _16"> </span>on<span class="_ _14"> </span>most</div><div class="t m5 x34 h2b y2d6 ff7 fs1e fc2 sc0 ls0 ws0">machines<span class="_ _1"></span>,<span class="_"> </span>there<span class="_"> </span>is<span class="_"> </span>no<span class="_"> </span>guarantee<span class="_"> </span>of<span class="_"> </span>portability<span class="_ _3"></span>.</div><div class="t m5 x35 h2b y549 ff7 fs1e fc2 sc0 ls0 ws0">W<span class="_ _3"></span>e<span class="_ _11"> </span>have<span class="_ _11"> </span>already<span class="_ _11"> </span>encountered<span class="_ _11"> </span>the<span class="_ _10"> </span>32-<span class="_ _11"> </span>and<span class="_ _11"> </span>64-bit<span class="_ _11"> </span>versions<span class="_ _11"> </span>of<span class="_ _11"> </span>ﬁxed-size<span class="_ _11"> </span>integer<span class="_ _10"> </span>types<span class="_ _11"> </span>(Figure<span class="_"> </span>2.3);</div><div class="t m5 x34 h2b y54a ff7 fs1e fc2 sc0 ls0 ws0">they<span class="_ _13"> </span>are<span class="_"> </span>part<span class="_ _13"> </span>of<span class="_ _13"> </span>a<span class="_"> </span>larger<span class="_ _13"> </span>class<span class="_ _13"> </span>of<span class="_"> </span>data<span class="_ _13"> </span>types<span class="_ _1"></span>.<span class="_ _13"> </span>T<span class="_ _0"></span>he<span class="_"> </span>ISO<span class="_ _13"> </span>C99<span class="_ _13"> </span>standard<span class="_"> </span>introduces<span class="_ _13"> </span>this<span class="_ _13"> </span>class<span class="_ _13"> </span>of<span class="_"> </span>integer<span class="_ _13"> </span>types</div><div class="t m5 x34 h2b y54b ff7 fs1e fc2 sc0 ls0 ws0">in<span class="_ _16"> </span>the<span class="_ _16"> </span>ﬁle<span class="_ _16"> </span><span class="ffd">stdint.h</span>.<span class="_ _14"> </span>T<span class="_ _1"></span>his<span class="_ _14"> </span>ﬁle<span class="_ _16"> </span>deﬁnes<span class="_ _16"> </span>a<span class="_ _16"> </span>set<span class="_ _14"> </span>of<span class="_ _16"> </span>data<span class="_ _16"> </span>types<span class="_ _14"> </span>with<span class="_ _16"> </span>declarations<span class="_ _16"> </span>of<span class="_ _16"> </span>the<span class="_ _14"> </span>form<span class="_ _16"> </span><span class="ffd">int<span class="ff11">N<span class="_ _a"></span></span>_t<span class="_ _11"> </span></span>and</div><div class="t m5 x34 h2b y54c ffd fs1e fc2 sc0 ls0 ws0">uint<span class="ff11">N<span class="_ _be"></span></span>_t<span class="ff7">,<span class="_"> </span>specifying<span class="_"> </span><span class="ff11">N<span class="_ _5"></span></span>-bit<span class="_"> </span>signed<span class="_"> </span>and<span class="_"> </span>unsigned<span class="_ _13"> </span>integers<span class="_ _1"></span>,<span class="_"> </span>for<span class="_"> </span>different<span class="_"> </span>values<span class="_ _13"> </span>of<span class="_"> </span><span class="ff11">N<span class="_ _be"></span></span>.<span class="_"> </span>T<span class="_ _1"></span>he<span class="_"> </span>exact<span class="_"> </span>values<span class="_"> </span>of</span></div><div class="t m5 x34 h2b y54d ff11 fs1e fc2 sc0 ls0 ws0">N<span class="_ _14"> </span><span class="ff7">are<span class="_ _11"> </span>implementation<span class="_ _11"> </span>dependent,<span class="_ _11"> </span>but<span class="_ _11"> </span>most<span class="_ _11"> </span>compilers<span class="_ _11"> </span>allow<span class="_ _11"> </span>values<span class="_ _10"> </span>of<span class="_ _11"> </span>8,<span class="_ _11"> </span>16,<span class="_ _16"> </span>32,<span class="_ _10"> </span>and<span class="_ _11"> </span>64.<span class="_ _11"> </span>Thus<span class="_ _3"></span>,<span class="_ _11"> </span>we<span class="_ _11"> </span>can</span></div><div class="t m5 x34 h2b y54e ff7 fs1e fc2 sc0 ls0 ws0">unambiguously<span class="_ _11"> </span>declare<span class="_ _11"> </span>an<span class="_ _11"> </span>unsigned<span class="_ _10"> </span>16-bit<span class="_ _11"> </span>variable<span class="_ _11"> </span>by<span class="_ _11"> </span>giving<span class="_ _11"> </span>it<span class="_ _11"> </span>type<span class="_ _11"> </span><span class="ffd">uint16_t</span>,<span class="_ _11"> </span>and<span class="_ _11"> </span>a<span class="_ _11"> </span>signed<span class="_ _11"> </span>variable</div><div class="t m5 x34 h2b y70b ff7 fs1e fc2 sc0 ls0 ws0">of<span class="_"> </span>32<span class="_"> </span>bits<span class="_"> </span>as<span class="_"> </span><span class="ffd">int32_t</span>.</div><div class="t m5 x35 h2b y70c ff7 fs1e fc2 sc0 ls0 ws0">Along<span class="_ _11"> </span>with<span class="_ _11"> </span>these<span class="_ _11"> </span>data<span class="_ _11"> </span>types<span class="_ _11"> </span>are<span class="_ _11"> </span>a<span class="_ _16"> </span>set<span class="_ _10"> </span>of<span class="_ _16"> </span>macros<span class="_ _10"> </span>deﬁning<span class="_ _16"> </span>the<span class="_ _10"> </span>minimum<span class="_ _16"> </span>and<span class="_ _11"> </span>maximum<span class="_ _11"> </span>values<span class="_ _11"> </span>for</div><div class="t m5 x34 h2b y70d ff7 fs1e fc2 sc0 ls0 ws0">each<span class="_"> </span>value<span class="_"> </span>of<span class="_"> </span><span class="ff11">N<span class="_ _be"></span></span>.<span class="_"> </span>T<span class="_ _1"></span>hese<span class="_"> </span>have<span class="_"> </span>names<span class="_"> </span>of<span class="_"> </span>the<span class="_"> </span>form<span class="_"> </span><span class="ffd">INT<span class="ff11">N<span class="_ _be"> </span></span>_MIN</span>,<span class="_"> </span><span class="ffd">INT<span class="ff11">N<span class="_ _be"> </span></span>_MAX</span>,<span class="_"> </span>and<span class="_"> </span><span class="ffd">UINT<span class="ff11">N<span class="_ _be"> </span></span>_MAX</span>.</div><div class="t m5 x35 h2b y70e ff7 fs1e fc2 sc0 ls0 ws0">F<span class="_ _1"></span>ormatted<span class="_"> </span>printing<span class="_ _11"> </span>with<span class="_"> </span>ﬁxed-width<span class="_"> </span>types<span class="_ _11"> </span>requires<span class="_"> </span>use<span class="_ _10"> </span>of<span class="_ _11"> </span>macros<span class="_"> </span>that<span class="_"> </span>expand<span class="_ _11"> </span>into<span class="_"> </span>format<span class="_ _10"> </span>strings</div><div class="t m5 x34 h2b y70f ff7 fs1e fc2 sc0 ls0 ws0">in<span class="_ _11"> </span>a<span class="_ _10"> </span>system-dependent<span class="_ _11"> </span>manner.<span class="_ _11"> </span>So<span class="_ _1"></span>,<span class="_ _11"> </span>for<span class="_ _11"> </span>example,<span class="_ _10"> </span>the<span class="_ _11"> </span>values<span class="_ _11"> </span>of<span class="_ _11"> </span>variables<span class="_ _11"> </span><span class="ffd">x<span class="_ _11"> </span></span>and<span class="_ _11"> </span><span class="ffd">y<span class="_ _11"> </span></span>of<span class="_ _11"> </span>type<span class="_ _10"> </span><span class="ffd">int32_t<span class="_ _11"> </span></span>and</div><div class="t m5 x34 h2b y710 ffd fs1e fc2 sc0 ls0 ws0">uint64_t<span class="_ _10"> </span><span class="ff7">can<span class="_"> </span>be<span class="_"> </span>printed<span class="_"> </span>by<span class="_"> </span>the<span class="_"> </span>following<span class="_"> </span>call<span class="_"> </span>to<span class="_"> </span></span>printf<span class="ff7">:</span></div><div class="t m5 x34 h2d ye46 ffd fs1e fc2 sc0 ls0 ws0">printf(&quot;x<span class="_ _e"> </span>=<span class="_ _1f"> </span>%&quot;<span class="_ _1f"> </span>PRId32<span class="_ _e"> </span>&quot;<span class="ls33">,y=%<span class="_ _41"></span>&quot;<span class="ls0">PRIu64<span class="_ _1f"> </span>&quot;\n&quot;,<span class="_ _e"> </span>x,<span class="_ _1f"> </span>y);</span></span></div><div class="t m5 x34 h2b ye47 ff7 fs1e fc2 sc0 ls0 ws0">When<span class="_"> </span>compiled<span class="_ _11"> </span>as<span class="_ _11"> </span>a<span class="_ _11"> </span>64-bit<span class="_ _11"> </span>program,<span class="_ _11"> </span>macro<span class="_ _11"> </span><span class="ffd">PRId32<span class="_ _11"> </span></span>expands<span class="_ _10"> </span>to<span class="_ _11"> </span>the<span class="_ _11"> </span>string<span class="_ _11"> </span><span class="ffd">&quot;d&quot;</span>,<span class="_ _11"> </span>while<span class="_ _11"> </span><span class="ffd">PRIu64<span class="_ _11"> </span></span>expands</div><div class="t m5 x34 h2b ye48 ff7 fs1e fc2 sc0 ls0 ws0">to<span class="_ _14"> </span>the<span class="_ _16"> </span>pair<span class="_ _14"> </span>of<span class="_ _14"> </span>strings<span class="_ _14"> </span><span class="ffd">&quot;l&quot;<span class="_ _11"> </span>&quot;u&quot;</span>.<span class="_ _14"> </span>When<span class="_ _16"> </span>the<span class="_ _14"> </span>C<span class="_ _14"> </span>preprocessor<span class="_ _14"> </span>encounters<span class="_ _14"> </span>a<span class="_ _14"> </span>sequence<span class="_ _16"> </span>of<span class="_ _14"> </span>string<span class="_ _14"> </span>constants</div><div class="t m5 x34 h2b ye49 ff7 fs1e fc2 sc0 ls0 ws0">separated<span class="_ _16"> </span>only<span class="_ _16"> </span>by<span class="_ _11"> </span>spaces<span class="_ _16"> </span>(or<span class="_ _16"> </span>other<span class="_ _16"> </span>whitespace<span class="_ _16"> </span>characters),<span class="_ _16"> </span>it<span class="_ _16"> </span>concatenates<span class="_ _16"> </span>them<span class="_ _16"> </span>together<span class="_ _0"></span>.<span class="_ _16"> </span>T<span class="_ _1"></span>hus<span class="_ _1"></span>,<span class="_ _14"> </span>the</div><div class="t m5 x34 h2b ye4a ff7 fs1e fc2 sc0 ls0 ws0">above<span class="_"> </span>call<span class="_"> </span>to<span class="_"> </span><span class="ffd">printf<span class="_ _10"> </span></span>becomes</div><div class="t m5 x34 h2d ye4b ffd fs1e fc2 sc0 ls0 ws0">printf(&quot;x<span class="_ _e"> </span>=<span class="_ _1f"> </span>%d,<span class="_ _1f"> </span>y<span class="_ _e"> </span>=<span class="_ _1f"> </span>%lu\n&quot;,<span class="_ _e"> </span>x,<span class="_ _1f"> </span>y);</div><div class="t m5 x34 h2b ye4c ff7 fs1e fc2 sc0 ls0 ws0">Using<span class="_"> </span>the<span class="_ _11"> </span>macros<span class="_"> </span>ensures<span class="_ _11"> </span>that<span class="_ _10"> </span>a<span class="_ _11"> </span>correct<span class="_"> </span>format<span class="_ _11"> </span>string<span class="_"> </span>will<span class="_ _11"> </span>be<span class="_ _10"> </span>generated<span class="_ _11"> </span>regardless<span class="_"> </span>of<span class="_ _11"> </span>how<span class="_ _10"> </span>the<span class="_ _11"> </span>code<span class="_"> </span>is</div><div class="t m5 x34 h2b ye4d ff7 fs1e fc2 sc0 ls0 ws0">compiled.</div><div class="t m5 x17 h46 ye4e ff7 fs19 fc2 sc0 ls0 ws0">F<span class="_ _1"></span>igure<span class="_ _16"> </span>2.14<span class="_ _14"> </span>also<span class="_ _16"> </span>shows<span class="_ _16"> </span>the<span class="_ _16"> </span>representations<span class="_ _16"> </span>of<span class="_ _16"> </span>constants<span class="_ _16"> </span><span class="ff12">−</span><span class="ls6c">1<span class="_ _11"> </span>and<span class="_ _16"> </span>0.<span class="_ _16"> </span>Note<span class="_ _16"> </span>that<span class="_ _16"> </span></span><span class="ff12">−</span>1</div><div class="t m5 x17 h26 ye4f ff7 fs19 fc2 sc0 ls0 ws0">has<span class="_"> </span>the<span class="_ _13"> </span>same<span class="_"> </span>bit<span class="_"> </span>representation<span class="_ _13"> </span>as<span class="_"> </span><span class="ffa">UMax</span>—a<span class="_"> </span>string<span class="_ _13"> </span>of<span class="_"> </span>all<span class="_"> </span>ones<span class="_ _3"></span>.<span class="_"> </span>Numeric<span class="_"> </span>value<span class="_ _13"> </span>0<span class="_"> </span>is</div><div class="t m5 x17 h26 ye50 ff7 fs19 fc2 sc0 ls0 ws0">represented<span class="_"> </span>as<span class="_"> </span>a<span class="_"> </span>string<span class="_"> </span>of<span class="_"> </span>all<span class="_"> </span>zeros<span class="_"> </span>in<span class="_"> </span>both<span class="_"> </span>representations<span class="_ _1"></span>.</div><div class="t m5 x26 h26 ye51 ff7 fs19 fc2 sc0 ls0 ws0">T<span class="_ _1"></span>he<span class="_ _14"> </span>C<span class="_ _16"> </span>standards<span class="_ _14"> </span>do<span class="_ _16"> </span>not<span class="_ _16"> </span>require<span class="_ _14"> </span>signed<span class="_ _16"> </span>integers<span class="_ _14"> </span>to<span class="_ _16"> </span>be<span class="_ _14"> </span>represented<span class="_ _16"> </span>in<span class="_ _16"> </span>two’s-</div><div class="t m5 x17 h26 ye52 ff7 fs19 fc2 sc0 ls0 ws0">complement<span class="_ _6"> </span>form,<span class="_ _13"> </span>but<span class="_ _6"> </span>nearly<span class="_ _13"> </span>all<span class="_ _6"> </span>machines<span class="_ _13"> </span>do<span class="_ _6"> </span>so<span class="_ _1"></span>.<span class="_ _13"> </span>Programmers<span class="_ _6"> </span>who<span class="_ _13"> </span>are<span class="_ _6"> </span>concerned</div><div class="t m5 x17 h26 ye53 ff7 fs19 fc2 sc0 ls0 ws0">with<span class="_ _11"> </span>maximizing<span class="_ _16"> </span>portability<span class="_ _16"> </span>across<span class="_ _11"> </span>all<span class="_ _16"> </span>possible<span class="_ _16"> </span>machines<span class="_ _11"> </span>should<span class="_ _16"> </span>not<span class="_ _16"> </span>assume<span class="_ _11"> </span>any</div><div class="t m5 x17 h26 ye54 ff7 fs19 fc2 sc0 ls0 ws0">particular<span class="_ _16"> </span>range<span class="_ _14"> </span>of<span class="_ _16"> </span>representable<span class="_ _16"> </span>values<span class="_ _1"></span>,<span class="_ _15"> </span>beyond<span class="_ _16"> </span>the<span class="_ _16"> </span>ranges<span class="_ _14"> </span>indicated<span class="_ _16"> </span>in<span class="_ _14"> </span>F<span class="_ _1"></span>igure</div><div class="t m5 x17 h26 ye55 ff7 fs19 fc2 sc0 ls0 ws0">2.11,<span class="_ _15"> </span>nor<span class="_ _14"> </span>should<span class="_ _15"> </span>they<span class="_ _14"> </span>assume<span class="_ _15"> </span>any<span class="_ _14"> </span>particular<span class="_ _14"> </span>representation<span class="_ _15"> </span>of<span class="_ _14"> </span>signed<span class="_ _15"> </span>numbers<span class="_ _1"></span>.</div><div class="t m5 x17 h26 ye56 ff7 fs19 fc2 sc0 ls0 ws0">On<span class="_ _15"> </span>the<span class="_ _15"> </span>other<span class="_ _15"> </span>hand,<span class="_ _21"> </span>many<span class="_ _15"> </span>programs<span class="_ _15"> </span>are<span class="_ _15"> </span>written<span class="_ _15"> </span>assuming<span class="_ _15"> </span>a<span class="_ _15"> </span>two’s-complement</div><div class="t m5 x17 h26 ye57 ff7 fs19 fc2 sc0 ls0 ws0">representation<span class="_ _11"> </span>of<span class="_ _11"> </span>signed<span class="_ _11"> </span>numbers<span class="_ _1"></span>,<span class="_ _11"> </span>and<span class="_ _11"> </span>the<span class="_ _11"> </span>“typical”<span class="_ _11"> </span>ranges<span class="_ _11"> </span>shown<span class="_ _11"> </span>in<span class="_ _11"> </span>Figures<span class="_"> </span>2.9</div><div class="t m5 x17 h26 ye58 ff7 fs19 fc2 sc0 ls0 ws0">and<span class="_ _21"> </span>2.10,<span class="_ _e"> </span>and<span class="_ _21"> </span>these<span class="_ _21"> </span>programs<span class="_ _f"> </span>are<span class="_ _f"> </span>portable<span class="_ _21"> </span>across<span class="_ _f"> </span>a<span class="_ _21"> </span>broad<span class="_ _f"> </span>range<span class="_ _21"> </span>of<span class="_ _f"> </span>machines</div><div class="t m5 x17 h26 ye59 ff7 fs19 fc2 sc0 ls0 ws0">and<span class="_ _15"> </span>compilers<span class="_ _1"></span>.<span class="_ _15"> </span>T<span class="_ _0"></span>he<span class="_ _15"> </span>ﬁle<span class="_ _15"> </span><span class="ffd">&lt;limits.h&gt;<span class="_ _15"> </span></span>in<span class="_ _21"> </span>the<span class="_ _15"> </span>C<span class="_ _15"> </span>library<span class="_ _15"> </span>deﬁnes<span class="_ _15"> </span>a<span class="_ _21"> </span>set<span class="_ _15"> </span>of<span class="_ _15"> </span>constants</div></div><div class="pi" data-data='{"ctm":[2.000000,0.000000,0.000000,2.000000,0.000000,0.000000]}'></div></div>
