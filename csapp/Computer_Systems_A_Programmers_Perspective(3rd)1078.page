<div id="pf436" class="pf w2 h11" data-page-no="436"><div class="pc pc436 w2 h11"><img class="bi x0 y0 w1 h1" alt="" src="csapp/bg436.png"/><div class="t m5 x28b h36 y49c ffe fs22 fc1 sc0 ls9 ws0">APPENDIX</div><div class="t m5 x4b h37 y49d ff7 fs23 fc6 sc0 ls0 ws0">A</div><div class="t m5 x4c h38 y49e ff7 fs1b fc1 sc0 lsa ws0">Error<span class="_ _25"> </span>Handling</div><div class="t m5 x17 h26 y2a38 ff7 fs19 fc1 sc0 ls0 ws0">Programmers<span class="_ _13"> </span>should<span class="_"> </span><span class="ffa">alwa<span class="_ _0"></span>ys<span class="_ _13"> </span><span class="ff7">check<span class="_"> </span>the<span class="_ _13"> </span>error<span class="_"> </span>codes<span class="_ _13"> </span>returned<span class="_ _13"> </span>by<span class="_"> </span>system-level<span class="_ _13"> </span>func-</span></span></div><div class="t m5 x17 h26 y85f8 ff7 fs19 fc1 sc0 ls0 ws0">tions<span class="_ _1"></span>.<span class="_ _16"> </span>There<span class="_ _16"> </span>are<span class="_ _16"> </span>many<span class="_ _14"> </span>subtle<span class="_ _16"> </span>ways<span class="_ _14"> </span>that<span class="_ _14"> </span>things<span class="_ _16"> </span>can<span class="_ _14"> </span>go<span class="_ _16"> </span>wrong,<span class="_ _14"> </span>and<span class="_ _14"> </span>it<span class="_ _16"> </span>only<span class="_ _14"> </span>makes</div><div class="t m5 x17 h26 y85f9 ff7 fs19 fc1 sc0 ls0 ws0">sense<span class="_"> </span>to<span class="_"> </span>use<span class="_"> </span>the<span class="_"> </span>status<span class="_"> </span>information<span class="_ _13"> </span>that<span class="_"> </span>the<span class="_"> </span>kernel<span class="_"> </span>is<span class="_"> </span>able<span class="_"> </span>to<span class="_"> </span>provide<span class="_"> </span>us<span class="_ _3"></span>.<span class="_"> </span>Unfortu-</div><div class="t m5 x17 h26 y85fa ff7 fs19 fc1 sc0 ls0 ws0">nately<span class="_ _3"></span>,<span class="_ _11"> </span>programmers<span class="_ _16"> </span>are<span class="_ _11"> </span>often<span class="_ _16"> </span>reluctant<span class="_ _11"> </span>to<span class="_ _16"> </span>do<span class="_ _11"> </span>error<span class="_ _16"> </span>checking<span class="_ _11"> </span>because<span class="_ _16"> </span>it<span class="_ _11"> </span>clutters</div><div class="t m5 x17 h26 y85fb ff7 fs19 fc1 sc0 ls0 ws0">their<span class="_ _16"> </span>code<span class="_ _0"></span>,<span class="_ _16"> </span>turning<span class="_ _14"> </span>a<span class="_ _16"> </span>single<span class="_ _16"> </span>line<span class="_ _16"> </span>of<span class="_ _14"> </span>code<span class="_ _16"> </span>into<span class="_ _16"> </span>a<span class="_ _16"> </span>multi-line<span class="_ _14"> </span>conditional<span class="_ _16"> </span>statement.</div><div class="t m5 x17 h26 y85fc ff7 fs19 fc1 sc0 ls0 ws0">Error<span class="_ _13"> </span>checking<span class="_"> </span>is<span class="_ _13"> </span>also<span class="_ _13"> </span>confusing<span class="_ _13"> </span>because<span class="_"> </span>different<span class="_ _13"> </span>functions<span class="_ _13"> </span>indicate<span class="_ _13"> </span>errors<span class="_"> </span>in<span class="_ _13"> </span>dif-</div><div class="t m5 x17 h26 y85fd ff7 fs19 fc1 sc0 ls0 ws0">ferent<span class="_"> </span>ways<span class="_ _1"></span>.</div><div class="t m5 x26 h26 y85fe ff7 fs19 fc1 sc0 ls0 ws0">W<span class="_ _3"></span>e<span class="_ _13"> </span>were<span class="_ _6"> </span>faced<span class="_ _13"> </span>with<span class="_ _6"> </span>a<span class="_ _13"> </span>similar<span class="_ _6"> </span>problem<span class="_ _13"> </span>when<span class="_ _6"> </span>writing<span class="_ _13"> </span>this<span class="_ _6"> </span>text.<span class="_ _13"> </span>On<span class="_ _6"> </span>the<span class="_ _13"> </span>one<span class="_ _6"> </span>hand,</div><div class="t m5 x17 h26 y85ff ff7 fs19 fc1 sc0 ls0 ws0">we<span class="_"> </span>would<span class="_"> </span>like<span class="_ _11"> </span>our<span class="_"> </span>code<span class="_ _11"> </span>examples<span class="_"> </span>to<span class="_ _11"> </span>be<span class="_"> </span>concise<span class="_ _11"> </span>and<span class="_"> </span>simple<span class="_ _11"> </span>to<span class="_"> </span>read.<span class="_"> </span>On<span class="_ _11"> </span>the<span class="_"> </span>other</div><div class="t m5 x17 h26 y8600 ff7 fs19 fc1 sc0 ls0 ws0">hand,<span class="_"> </span>we<span class="_"> </span>do<span class="_"> </span>not<span class="_"> </span>want<span class="_ _11"> </span>to<span class="_"> </span>give<span class="_"> </span>students<span class="_"> </span>the<span class="_ _11"> </span>wrong<span class="_"> </span>impression<span class="_"> </span>that<span class="_"> </span>it<span class="_ _11"> </span>is<span class="_"> </span>OK<span class="_"> </span>to<span class="_"> </span>skip</div><div class="t m5 x17 h26 y8601 ff7 fs19 fc1 sc0 ls0 ws0">error<span class="_ _16"> </span>checking.<span class="_ _11"> </span>T<span class="_ _3"></span>o<span class="_ _16"> </span>resolve<span class="_ _16"> </span>these<span class="_ _11"> </span>issues<span class="_ _1"></span>,<span class="_ _14"> </span>we<span class="_ _16"> </span>have<span class="_ _16"> </span>adopted<span class="_ _16"> </span>an<span class="_ _11"> </span>approach<span class="_ _16"> </span>based<span class="_ _16"> </span>on</div><div class="t m5 x17 h26 y8602 ffa fs19 fc1 sc0 ls0 ws0">error<span class="_ _1"></span>-handling<span class="_ _13"> </span>wrappers<span class="_ _13"> </span><span class="ff7">that<span class="_ _13"> </span>was<span class="_ _13"> </span>pioneered<span class="_ _13"> </span>by<span class="_ _13"> </span>W<span class="_ _3"></span>.<span class="_ _13"> </span>Richard<span class="_ _13"> </span>Stevens<span class="_ _13"> </span>in<span class="_ _13"> </span>his<span class="_ _13"> </span>network</span></div><div class="t m5 x17 h26 y8603 ff7 fs19 fc1 sc0 ls0 ws0">programming<span class="_"> </span>text<span class="_"> </span>[110].</div><div class="t m5 x26 h26 y8604 ff7 fs19 fc1 sc0 ls0 ws0">T<span class="_ _1"></span>he<span class="_ _e"> </span>idea<span class="_ _f"> </span>is<span class="_ _f"> </span>that<span class="_ _e"> </span>given<span class="_ _f"> </span>some<span class="_ _e"> </span>base<span class="_ _f"> </span>system-level<span class="_ _f"> </span>function<span class="_ _e"> </span><span class="ffd">foo</span>,<span class="_ _e"> </span>we<span class="_ _e"> </span>deﬁne<span class="_ _21"> </span>a</div><div class="t m5 x17 h26 y8605 ff7 fs19 fc1 sc0 ls0 ws0">wrapper<span class="_ _13"> </span>function<span class="_ _6"> </span><span class="ffd">Foo<span class="_ _13"> </span></span>with<span class="_ _6"> </span>identical<span class="_ _13"> </span>arguments<span class="_ _1"></span>,<span class="_ _13"> </span>but<span class="_ _13"> </span>with<span class="_ _6"> </span>the<span class="_ _13"> </span>ﬁrst<span class="_ _6"> </span>letter<span class="_ _13"> </span>capitalized.</div><div class="t m5 x17 h26 y8606 ff7 fs19 fc1 sc0 ls0 ws0">T<span class="_ _1"></span>he<span class="_ _13"> </span>wrapper<span class="_ _13"> </span>calls<span class="_ _6"> </span>the<span class="_ _13"> </span>base<span class="_ _13"> </span>function<span class="_ _13"> </span>and<span class="_ _6"> </span>checks<span class="_ _13"> </span>for<span class="_ _13"> </span>errors<span class="_ _3"></span>.<span class="_ _13"> </span>If<span class="_ _13"> </span>it<span class="_ _6"> </span>detects<span class="_ _13"> </span>an<span class="_ _13"> </span>error<span class="_ _0"></span>,<span class="_ _13"> </span>the</div><div class="t m5 x17 h26 y8607 ff7 fs19 fc1 sc0 ls0 ws0">wrapper<span class="_"> </span>prints<span class="_"> </span>an<span class="_ _11"> </span>informative<span class="_"> </span>message<span class="_ _11"> </span>and<span class="_"> </span>terminates<span class="_"> </span>the<span class="_ _11"> </span>process<span class="_ _1"></span>.<span class="_"> </span>Otherwise,<span class="_"> </span>it</div><div class="t m5 x17 h26 y8608 ff7 fs19 fc1 sc0 ls0 ws0">returns<span class="_ _6"> </span>to<span class="_ _13"> </span>the<span class="_ _6"> </span>caller.<span class="_ _6"> </span>Notice<span class="_ _13"> </span>that<span class="_ _6"> </span>if<span class="_ _13"> </span>there<span class="_ _6"> </span>are<span class="_ _13"> </span>no<span class="_ _a"> </span>errors<span class="_ _0"></span>,<span class="_ _13"> </span>the<span class="_ _6"> </span>wrapper<span class="_ _13"> </span>behaves<span class="_ _6"> </span>exactly</div><div class="t m5 x17 h26 y8609 ff7 fs19 fc1 sc0 ls0 ws0">like<span class="_ _13"> </span>the<span class="_ _13"> </span>base<span class="_ _13"> </span>function.<span class="_ _13"> </span>Put<span class="_ _13"> </span>another<span class="_ _13"> </span>way<span class="_ _7"></span>,<span class="_ _13"> </span>if<span class="_ _13"> </span>a<span class="_ _13"> </span>program<span class="_ _13"> </span>runs<span class="_ _13"> </span>correctly<span class="_ _13"> </span>with<span class="_ _13"> </span>wrappers<span class="_ _1"></span>,</div><div class="t m5 x17 h26 y860a ff7 fs19 fc1 sc0 ls0 ws0">it<span class="_"> </span>will<span class="_ _11"> </span>run<span class="_"> </span>correctly<span class="_ _11"> </span>if<span class="_"> </span>we<span class="_ _11"> </span>render<span class="_"> </span>the<span class="_ _11"> </span>ﬁrst<span class="_"> </span>letter<span class="_ _11"> </span>of<span class="_"> </span>each<span class="_ _11"> </span>wrapper<span class="_"> </span>in<span class="_ _11"> </span>lowercase<span class="_ _11"> </span>and</div><div class="t m5 x17 h26 y860b ff7 fs19 fc1 sc0 ls0 ws0">recompile<span class="_ _1"></span>.</div><div class="t m5 x26 h26 y860c ff7 fs19 fc1 sc0 ls0 ws0">T<span class="_ _1"></span>he<span class="_"> </span>wrappers<span class="_"> </span>are<span class="_"> </span>packaged<span class="_"> </span>in<span class="_"> </span>a<span class="_"> </span>single<span class="_"> </span>source<span class="_"> </span>ﬁle<span class="_"> </span>(<span class="ffd">csapp.c</span>)<span class="_"> </span>that<span class="_"> </span>is<span class="_"> </span>compiled</div><div class="t m5 x17 h26 y860d ff7 fs19 fc1 sc0 ls0 ws0">and<span class="_ _21"> </span>linked<span class="_ _21"> </span>into<span class="_ _21"> </span>each<span class="_ _f"> </span>program.<span class="_ _21"> </span>A<span class="_ _21"> </span>separate<span class="_ _21"> </span>header<span class="_ _f"> </span>ﬁle<span class="_ _21"> </span>(<span class="ffd">csapp.h</span>)<span class="_ _21"> </span>contains<span class="_ _f"> </span>the</div><div class="t m5 x17 h26 y860e ff7 fs19 fc1 sc0 ls0 ws0">function<span class="_"> </span>prototypes<span class="_"> </span>for<span class="_"> </span>the<span class="_"> </span>wrappers<span class="_ _1"></span>.</div><div class="t m5 x26 h26 y860f ff7 fs19 fc1 sc0 ls0 ws0">T<span class="_ _1"></span>his<span class="_"> </span>appendix<span class="_ _13"> </span>gives<span class="_ _13"> </span>a<span class="_ _13"> </span>tutorial<span class="_"> </span>on<span class="_ _13"> </span>the<span class="_ _13"> </span>different<span class="_ _13"> </span>kinds<span class="_"> </span>of<span class="_ _13"> </span>error<span class="_ _13"> </span>handling<span class="_ _13"> </span>in<span class="_ _13"> </span>Unix</div><div class="t m5 x17 h26 y8610 ff7 fs19 fc1 sc0 ls0 ws0">systems<span class="_ _15"> </span>and<span class="_ _15"> </span>gives<span class="_ _15"> </span>examples<span class="_ _21"> </span>of<span class="_ _15"> </span>the<span class="_ _15"> </span>different<span class="_ _21"> </span>styles<span class="_ _15"> </span>of<span class="_ _15"> </span>error<span class="_ _1"></span>-handling<span class="_ _21"> </span>wrappers<span class="_ _1"></span>.</div><div class="t m5 x17 h26 y8611 ff7 fs19 fc1 sc0 ls0 ws0">Copies<span class="_"> </span>of<span class="_"> </span>the<span class="_"> </span><span class="ffd">csapp.h<span class="_ _10"> </span></span>and<span class="_"> </span><span class="ffd">csapp.c<span class="_ _10"> </span></span>ﬁles<span class="_"> </span>are<span class="_"> </span>available<span class="_"> </span>at<span class="_"> </span>the<span class="_"> </span>CS:APP<span class="_"> </span>W<span class="_ _3"></span>eb<span class="_"> </span>site.</div><div class="t m5 x26c h28 y9a ffe fs1e fc2 sc0 ls0 ws0">1077</div></div><div class="pi" data-data='{"ctm":[2.000000,0.000000,0.000000,2.000000,0.000000,0.000000]}'></div></div>
