<div id="pf298" class="pf w2 h11" data-page-no="298"><div class="pc pc298 w2 h11"><img class="bi x0 y0 w1 h1" alt="" src="csapp/bg298.png"/><div class="t m5 xf2 h28 y9b ff6 fs1f fc2 sc0 ls0 ws0">Section<span class="_ _10"> </span>6.4<span class="_ _60"> </span>Cache<span class="_ _10"> </span>Memories<span class="_ _3e"> </span><span class="ffe fs1e">663</span></div><div class="t m5 x17 h2f ye7 ffe fs16 fc6 sc0 ls0 ws0">Figure<span class="_"> </span>6.35</div><div class="t m5 x17 h2f y58a ffe fs16 fc1 sc0 ls0 ws0">Fully<span class="_ _16"> </span>associative<span class="_ _16"> </span>cache</div><div class="t m5 x17 h35 y58b ffe fs16 fc1 sc0 ls0 ws0">(<span class="ff11">E<span class="_ _10"> </span><span class="ff12">=<span class="_ _13"> </span></span><span class="ls24c">C/B</span></span>).<span class="_ _14"> </span><span class="ff6">In<span class="_ _15"> </span>a<span class="_ _14"> </span>fully</span></div><div class="t m5 x17 h34 y58c ff6 fs16 fc1 sc0 ls0 ws0">associative<span class="_ _11"> </span>cache,<span class="_ _11"> </span>a<span class="_ _11"> </span>single</div><div class="t m5 x17 h34 y58d ff6 fs16 fc1 sc0 ls0 ws0">set<span class="_ _10"> </span>contains<span class="_ _11"> </span>all<span class="_ _10"> </span>of<span class="_ _10"> </span>the<span class="_ _11"> </span>lines.</div><div class="t m5 xe2 h3f y5861 ff84 fs27 fc1 sc0 ls0 ws0">V<span class="_ _1"></span>alid<span class="_ _7b"> </span>T<span class="_ _7"></span>ag<span class="_ _2c"> </span>Cache block</div><div class="t m5 xb3 h3f y5862 ff84 fs27 fc1 sc0 ls0 ws0">Set 0:</div><div class="t m5 xe2 h3f y5863 ff84 fs27 fc1 sc0 ls0 ws0">V<span class="_ _1"></span>alid<span class="_ _7b"> </span>T<span class="_ _7"></span>ag<span class="_ _2c"> </span>Cache block</div><div class="t m7 x5e h3f y5864 ff84 fs27 fc1 sc0 ls0 ws0">. . .</div><div class="t m5 x132 h3f y5865 ff80 fs27 fc1 sc0 ls0 ws0">E<span class="ff84"> = </span>C/B  <span class="ff84">lines in</span></div><div class="t m5 x132 h3f y5866 ff84 fs27 fc1 sc0 ls0 ws0">the one and only set</div><div class="t m5 xe2 h3f y5867 ff84 fs27 fc1 sc0 ls0 ws0">V<span class="_ _1"></span>alid<span class="_ _7b"> </span>T<span class="_ _7"></span>ag<span class="_ _2c"> </span>Cache block</div><div class="t m5 x17 h2f y5868 ffe fs16 fc6 sc0 ls0 ws0">Figure<span class="_"> </span>6.36</div><div class="t m5 x17 h2f y5869 ffe fs16 fc1 sc0 ls0 ws0">Set<span class="_ _16"> </span>selection<span class="_ _16"> </span>in<span class="_ _16"> </span>a<span class="_ _14"> </span>fully</div><div class="t m5 x17 h34 y586a ffe fs16 fc1 sc0 ls0 ws0">associative<span class="_"> </span>cache.<span class="_ _11"> </span><span class="ff6">Notice</span></div><div class="t m5 x17 h34 y586b ff6 fs16 fc1 sc0 ls0 ws0">that<span class="_ _10"> </span>there<span class="_ _11"> </span>are<span class="_ _11"> </span>no<span class="_ _11"> </span>set<span class="_ _10"> </span>index</div><div class="t m5 x17 h34 y586c ff6 fs16 fc1 sc0 ls0 ws0">bits.</div><div class="t m5 x1a1 h91 y586d ff84 fs57 fc1 sc0 ls0 ws0">V<span class="_ _1"></span>alid<span class="_ _f1"> </span>T<span class="_ _7"></span>ag<span class="_ _b9"> </span>Cache block</div><div class="t m5 x24f h91 y586e ff84 fs57 fc1 sc0 ls0 ws0">Set 0:</div><div class="t m5 x1a1 h91 y586f ff84 fs57 fc1 sc0 ls0 ws0">V<span class="_ _1"></span>alid<span class="_ _f1"> </span>T<span class="_ _7"></span>ag<span class="_ _b9"> </span>Cache block</div><div class="t m7 x148 h91 y5870 ff84 fs57 fc1 sc0 ls0 ws0">. . .</div><div class="t m5 x1a1 h91 y5871 ff84 fs57 fc1 sc0 ls0 ws0">V<span class="_ _1"></span>alid<span class="_ _f1"> </span>T<span class="_ _7"></span>ag<span class="_ _b9"> </span>Cache block</div><div class="t m5 x25 he3 y5872 ff80 fs94 fc1 sc0 ls0 ws0">m<span class="ff84">–1<span class="_ _129"> </span>0</span></div><div class="t m5 x255 h91 y5873 ff80 fs57 fc1 sc0 ls0 ws0">t<span class="ff84"> bits</span></div><div class="t m5 xed h91 y5874 ff84 fs57 fc1 sc0 ls24d ws0">Ta<span class="_ _5"></span>g</div><div class="t m5 x119 h91 y5875 ff84 fs57 fc1 sc0 ls0 ws0">Block offset</div><div class="t m5 x130 h91 y5876 ff80 fs57 fc1 sc0 ls0 ws0">b<span class="ff84"> bits</span></div><div class="t m5 x76 h91 y5877 ff84 fs57 fc1 sc0 ls0 ws0">The entire cache is one set, so</div><div class="t m5 xf7 h91 y5878 ff84 fs57 fc1 sc0 ls0 ws0">by default set 0 is always selected.</div><div class="t m5 x17 h2f y5879 ffe fs16 fc6 sc0 ls0 ws0">Figure<span class="_"> </span>6.37</div><div class="t m5 x17 h2f y587a ffe fs16 fc1 sc0 ls0 ws0">Line<span class="_ _15"> </span>matching<span class="_ _15"> </span>and</div><div class="t m5 x17 h2f y587b ffe fs16 fc1 sc0 ls0 ws0">word<span class="_ _11"> </span>selection<span class="_ _11"> </span>in<span class="_ _16"> </span>a<span class="_"> </span>fully</div><div class="t m5 x17 h2f y587c ffe fs16 fc1 sc0 ls0 ws0">associative<span class="_"> </span>cache.</div><div class="t m5 xfd he3 y587d ff80 fs94 fc1 sc0 ls0 ws0">m<span class="_ _2"></span><span class="ff84">–1<span class="_ _129"> </span>0</span></div><div class="t m5 x119 h91 y587e ff84 fs57 fc1 sc0 ls0 ws0">1</div><div class="t m5 x119 h91 y587f ff84 fs57 fc1 sc0 ls0 ws0">0</div><div class="t m5 x1db h91 y587e ff84 fs57 fc1 sc0 ls0 ws0">01<span class="_ _1"></span>10</div><div class="t m5 x1db h91 y587f ff84 fs57 fc1 sc0 ls24e ws0">111<span class="_ _2"></span>0</div><div class="t m5 x254 h91 y5880 ff80 fs57 fc1 sc0 ls0 ws0">t<span class="ff84"> bits</span></div><div class="t m5 x15f h91 y5881 ff84 fs57 fc1 sc0 ls0 ws0">T<span class="_ _3"></span>ag<span class="_ _63"> </span>Block of<span class="_ _0"></span>fset</div><div class="t m5 x23f h91 y5880 ff80 fs57 fc1 sc0 ls0 ws0">b<span class="ff84"> bits</span></div><div class="t m5 x40 h91 y5882 ff84 fs57 fc1 sc0 ls0 ws0">= ?</div><div class="t m5 x1dc h91 y5883 ff80 fs57 fc1 sc0 ls0 ws0">w</div><div class="t m5 x133 he3 y5884 ff84 fs94 fc1 sc0 ls0 ws0">0</div><div class="t m5 x1cf h91 y5885 ff80 fs57 fc1 sc0 ls0 ws0">w</div><div class="t m5 x173 he3 y5884 ff84 fs94 fc1 sc0 ls0 ws0">1</div><div class="t m5 x212 h91 y5885 ff80 fs57 fc1 sc0 ls0 ws0">w</div><div class="t m5 x12a he3 y5884 ff84 fs94 fc1 sc0 ls0 ws0">2</div><div class="t m5 x6f h91 y5885 ff80 fs57 fc1 sc0 ls0 ws0">w</div><div class="t m5 x216 he3 y5884 ff84 fs94 fc1 sc0 ls0 ws0">3</div><div class="t m5 x51 h91 y5886 ff84 fs57 fc1 sc0 ls0 ws0">01<span class="_ _1"></span>10<span class="_ _87"> </span>100</div><div class="t m5 x19c he3 y5887 ff84 fs94 fc1 sc0 ls241 ws0">01234567</div><div class="t m5 x119 h91 y5888 ff84 fs57 fc1 sc0 ls0 ws0">1</div><div class="t m5 x119 h91 y5889 ff84 fs57 fc1 sc0 ls0 ws0">0</div><div class="t m5 xbf h91 y5888 ff84 fs57 fc1 sc0 ls0 ws0">1001</div><div class="t m5 xbf h91 y5889 ff84 fs57 fc1 sc0 ls0 ws0">01<span class="_ _1"></span>10</div><div class="t m5 x24e h91 y588a ff84 fs57 fc1 sc0 ls0 ws0">= 1?   (1) The valid bit must be set.</div><div class="t m5 x48 h91 y588b ff84 fs57 fc1 sc0 ls0 ws0">Entire cache</div><div class="t m5 xf8 h91 y588c ff84 fs57 fc1 sc0 ls0 ws0">(2) The tag bits in one </div><div class="t m5 x238 h91 y588d ff84 fs57 fc1 sc0 ls0 ws0">of the cache lines </div><div class="t m5 x79 h91 y588e ff84 fs57 fc1 sc0 ls0 ws0">must match the tag </div><div class="t m5 x89 h91 y588f ff84 fs57 fc1 sc0 ls0 ws0">bits in the address.</div><div class="t m5 x97 h91 y5890 ff84 fs57 fc1 sc0 ls0 ws0">(3) If (1) and (2), then </div><div class="t m5 xea h91 y5891 ff84 fs57 fc1 sc0 ls0 ws0">cache hit, and</div><div class="t m5 x224 h91 y5892 ff84 fs57 fc1 sc0 ls0 ws0">block offset selects </div><div class="t m5 x12a h91 y5893 ff84 fs57 fc1 sc0 ls0 ws0">starting byte.</div><div class="t m5 x17 h42 y5894 ff6 fs29 fc6 sc0 ls0 ws0">Set<span class="_ _11"> </span>Selection<span class="_ _16"> </span>in<span class="_ _16"> </span>Fully<span class="_ _11"> </span>Associative<span class="_ _16"> </span>Caches</div><div class="t m5 x17 h26 y5895 ff7 fs19 fc1 sc0 ls0 ws0">Set<span class="_ _16"> </span>selection<span class="_ _14"> </span>in<span class="_ _16"> </span>a<span class="_ _14"> </span>fully<span class="_ _16"> </span>associative<span class="_ _16"> </span>cache<span class="_ _14"> </span>is<span class="_ _16"> </span>trivial<span class="_ _14"> </span>because<span class="_ _16"> </span>there<span class="_ _14"> </span>is<span class="_ _16"> </span>only<span class="_ _14"> </span>one<span class="_ _16"> </span>set,</div><div class="t m5 x17 h26 y5896 ff7 fs19 fc1 sc0 ls0 ws0">summarized<span class="_"> </span>in<span class="_"> </span>Figure<span class="_"> </span>6.36.<span class="_"> </span>Notice<span class="_"> </span>that<span class="_"> </span>there<span class="_ _11"> </span>are<span class="_"> </span>no<span class="_ _11"> </span>set<span class="_"> </span>index<span class="_"> </span>bits<span class="_ _11"> </span>in<span class="_"> </span>the<span class="_"> </span>address<span class="_ _0"></span>,</div><div class="t m5 x17 h26 y5897 ff7 fs19 fc1 sc0 ls0 ws0">which<span class="_"> </span>is<span class="_"> </span>partitioned<span class="_"> </span>into<span class="_"> </span>only<span class="_"> </span>a<span class="_"> </span>tag<span class="_"> </span>and<span class="_"> </span>a<span class="_"> </span>block<span class="_"> </span>offset.</div><div class="t m5 x17 h42 yc8c ff6 fs29 fc6 sc0 ls0 ws0">Line<span class="_ _11"> </span>Matching<span class="_ _16"> </span>and<span class="_ _16"> </span>W<span class="_ _1"></span>ord<span class="_ _16"> </span>Selection<span class="_ _11"> </span>in<span class="_ _16"> </span>Fully<span class="_ _16"> </span>Associative<span class="_ _11"> </span>Caches</div><div class="t m5 x17 h26 y8ff ff7 fs19 fc1 sc0 ls0 ws0">Line<span class="_ _16"> </span>matching<span class="_ _16"> </span>and<span class="_ _11"> </span>word<span class="_ _16"> </span>selection<span class="_ _16"> </span>in<span class="_ _16"> </span>a<span class="_ _16"> </span>fully<span class="_ _16"> </span>associative<span class="_ _11"> </span>cache<span class="_ _16"> </span>work<span class="_ _16"> </span>the<span class="_ _16"> </span>same<span class="_ _16"> </span>as</div><div class="t m5 x17 h26 y900 ff7 fs19 fc1 sc0 ls0 ws0">with<span class="_"> </span>a<span class="_"> </span>set<span class="_"> </span>associative<span class="_"> </span>cache<span class="_ _1"></span>,<span class="_"> </span>as<span class="_"> </span>we<span class="_"> </span>show<span class="_"> </span>in<span class="_"> </span>F<span class="_ _1"></span>igure<span class="_"> </span>6.37.<span class="_"> </span>The<span class="_"> </span>difference<span class="_"> </span>is<span class="_ _13"> </span>mainly<span class="_"> </span>a</div><div class="t m5 x17 h26 y901 ff7 fs19 fc1 sc0 ls0 ws0">question<span class="_"> </span>of<span class="_"> </span>scale<span class="_ _1"></span>.</div><div class="t m5 x26 h26 y902 ff7 fs19 fc1 sc0 ls0 ws0">Because<span class="_ _13"> </span>the<span class="_"> </span>cache<span class="_ _13"> </span>circuitry<span class="_"> </span>must<span class="_ _13"> </span>search<span class="_"> </span>for<span class="_ _13"> </span>many<span class="_"> </span>matching<span class="_ _13"> </span>tags<span class="_"> </span>in<span class="_ _13"> </span>parallel,<span class="_"> </span>it</div><div class="t m5 x17 h26 y903 ff7 fs19 fc1 sc0 ls0 ws0">is<span class="_"> </span>difﬁcult<span class="_"> </span>and<span class="_ _11"> </span>expensive<span class="_"> </span>to<span class="_ _11"> </span>build<span class="_"> </span>an<span class="_"> </span>associative<span class="_ _11"> </span>cache<span class="_"> </span>that<span class="_ _11"> </span>is<span class="_"> </span>both<span class="_ _11"> </span>large<span class="_"> </span>and<span class="_"> </span>fast.</div><div class="t m5 x17 h26 y904 ff7 fs19 fc1 sc0 ls0 ws0">As<span class="_ _16"> </span>a<span class="_ _14"> </span>result,<span class="_ _14"> </span>fully<span class="_ _16"> </span>associative<span class="_ _14"> </span>caches<span class="_ _14"> </span>are<span class="_ _16"> </span>only<span class="_ _14"> </span>appropriate<span class="_ _16"> </span>for<span class="_ _14"> </span>small<span class="_ _16"> </span>caches<span class="_ _1"></span>,<span class="_ _15"> </span>such</div></div><div class="pi" data-data='{"ctm":[2.000000,0.000000,0.000000,2.000000,0.000000,0.000000]}'></div></div>
