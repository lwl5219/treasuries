<div id="pf2b3" class="pf w2 h11" data-page-no="2b3"><div class="pc pc2b3 w2 h11"><img class="bi x0 y0 w1 h1" alt="" src="csapp/bg2b3.png"/><div class="t m5 x14 h28 y9b ffe fs1e fc2 sc0 ls0 ws0">690<span class="_ _1b"> </span><span class="ff6 fs1f">Chapter<span class="_ _10"> </span>6<span class="_ _3d"> </span>The<span class="_ _10"> </span>Memory<span class="_ _10"> </span>Hierarchy</span></div><div class="t m5 x1f h2d ye7 ff6 fs20 fc6 sc0 ls0 ws0">7<span class="_ _20"> </span><span class="ffd fs1e fc2 ls33">f<span class="_ _41"></span>o<span class="_ _41"></span>r(<span class="_ _41"></span>i=0<span class="_ _41"></span>;i&lt;4<span class="_ _41"></span>;<span class="ls0">i++)<span class="_ _e"> </span>{</span></span></div><div class="t m5 x1f h2d yc4d ff6 fs20 fc6 sc0 ls0 ws0">8<span class="_ _70"> </span><span class="ffd fs1e fc2 ls33">f<span class="_ _41"></span>o<span class="_ _41"></span>r(<span class="_ _41"></span>j=0<span class="_ _41"></span>;j&lt;4<span class="_ _41"></span>;<span class="ls0">j++)<span class="_ _e"> </span>{</span></span></div><div class="t m5 x1f h2d yecb ff6 fs20 fc6 sc0 ls0 ws0">9<span class="_ _d1"> </span><span class="ffd fs1e fc2">dst[j][i]<span class="_ _1f"> </span>=<span class="_ _e"> </span>src[i][j];</span></div><div class="t m5 x1b0 h2d yecc ff6 fs20 fc6 sc0 ls0 ws0">10<span class="_ _70"> </span><span class="ffd fs1e fc2">}</span></div><div class="t m5 x1b0 h2d yecd ff6 fs20 fc6 sc0 ls0 ws0">11<span class="_ _20"> </span><span class="ffd fs1e fc2">}</span></div><div class="t m5 x1b0 h2d yece ff6 fs20 fc6 sc0 ls0 ws0">12<span class="_ _1c"> </span><span class="ffd fs1e fc2">}</span></div><div class="t m5 x29 h26 y5c01 ff7 fs19 fc2 sc0 ls0 ws0">Assume<span class="_"> </span>this<span class="_"> </span>code<span class="_"> </span>runs<span class="_"> </span>on<span class="_"> </span>a<span class="_"> </span>machine<span class="_"> </span>with<span class="_"> </span>the<span class="_"> </span>following<span class="_"> </span>properties:</div><div class="t m5 x75 h3d y5c02 ff14 fs26 fc6 sc0 ls0 ws0">.</div><div class="t m5 x29 h46 y5c03 ffd fs19 fc1 sc0 ls0 ws0">sizeof<span class="_ _1"></span><span class="ff11">(<span class="ffd">int<span class="_ _1"></span><span class="ff11">)<span class="_ _10"> </span><span class="ff12">=<span class="_ _13"></span><span class="ff7 lsb1">4.</span></span></span></span></span></div><div class="t m5 x75 h3d y5c04 ff14 fs26 fc6 sc0 ls0 ws0">.</div><div class="t m5 x29 h26 y5c05 ff7 fs19 fc1 sc0 lsd ws0">Th<span class="_ _2"></span>e<span class="_ _e"> </span><span class="ffd ls0">src<span class="_ _e"> </span><span class="ff7">array<span class="_ _21"> </span>starts<span class="_ _e"> </span>at<span class="_ _f"> </span>address<span class="_ _e"> </span>0<span class="_ _21"> </span>and<span class="_ _e"> </span>the<span class="_ _f"> </span></span>dst<span class="_ _e"> </span><span class="ff7">array<span class="_ _f"> </span>starts<span class="_ _f"> </span>at<span class="_ _e"> </span>address<span class="_ _f"> </span>64</span></span></div><div class="t m5 x29 h26 y5c06 ff7 fs19 fc1 sc0 ls0 ws0">(decimal).</div><div class="t m5 x75 h3d y5c07 ff14 fs26 fc6 sc0 ls0 ws0">.</div><div class="t m5 x29 h26 y5c08 ff7 fs19 fc1 sc0 ls0 ws0">T<span class="_ _1"></span>here<span class="_ _16"> </span>is<span class="_ _16"> </span>a<span class="_ _16"> </span>single<span class="_ _16"> </span>L1<span class="_ _16"> </span>data<span class="_ _16"> </span>cache<span class="_ _16"> </span>that<span class="_ _16"> </span>is<span class="_ _16"> </span>direct-mapped,<span class="_ _16"> </span>write-through,<span class="_ _14"> </span>write-</div><div class="t m5 x29 h26 y5c09 ff7 fs19 fc1 sc0 ls0 ws0">allocate<span class="_ _1"></span>,<span class="_"> </span>with<span class="_"> </span>a<span class="_"> </span>block<span class="_"> </span>size<span class="_"> </span>of<span class="_"> </span>16<span class="_"> </span>bytes<span class="_ _1"></span>.</div><div class="t m5 x75 h3d y5c0a ff14 fs26 fc6 sc0 ls0 ws0">.</div><div class="t m5 x29 h26 y5c0b ff7 fs19 fc1 sc0 ls0 ws0">T<span class="_ _1"></span>he<span class="_"> </span>cache<span class="_"> </span>has<span class="_"> </span>a<span class="_"> </span>total<span class="_"> </span>size<span class="_"> </span>of<span class="_"> </span>32<span class="_"> </span>data<span class="_"> </span>bytes<span class="_ _1"></span>,<span class="_"> </span>and<span class="_"> </span>the<span class="_"> </span>cache<span class="_"> </span>is<span class="_"> </span>initially<span class="_"> </span>empty<span class="_ _3"></span>.</div><div class="t m5 x75 h3d y5c0c ff14 fs26 fc6 sc0 ls0 ws0">.</div><div class="t m5 x29 h26 y5c0d ff7 fs19 fc1 sc0 ls0 ws0">Accesses<span class="_ _14"> </span>to<span class="_ _14"> </span>the<span class="_ _14"> </span><span class="ffd">src<span class="_ _14"> </span></span>and<span class="_ _14"> </span><span class="ffd">dst<span class="_ _14"> </span></span>arrays<span class="_ _14"> </span>are<span class="_ _14"> </span>the<span class="_ _14"> </span>only<span class="_ _14"> </span>sources<span class="_ _14"> </span>of<span class="_ _14"> </span>read<span class="_ _14"> </span>and<span class="_ _14"> </span>write</div><div class="t m5 x29 h26 y5c0e ff7 fs19 fc1 sc0 ls0 ws0">misses<span class="_ _1"></span>,<span class="_"> </span>respectively<span class="_ _3"></span>.</div><div class="t m5 x124 h26 y5c0f ff7 fs19 fc1 sc0 ls0 ws0">A.<span class="_ _1f"> </span>F<span class="_ _1"></span>or<span class="_ _16"> </span>each<span class="_ _16"> </span><span class="ffd">row<span class="_ _16"> </span></span>and<span class="_ _16"> </span><span class="ffd">col</span>,<span class="_ _14"> </span>indicate<span class="_ _16"> </span>whether<span class="_ _16"> </span>the<span class="_ _16"> </span>access<span class="_ _16"> </span>to<span class="_ _16"> </span><span class="ffd">src[row][col]<span class="_ _16"> </span></span>and</div><div class="t m5 x4f h26 y5c10 ffd fs19 fc1 sc0 ls0 ws0">dst[row][col]<span class="_ _11"> </span><span class="ff7">is<span class="_ _11"> </span>a<span class="_ _11"> </span>hit<span class="_ _11"> </span>(h)<span class="_ _11"> </span>or<span class="_ _11"> </span>a<span class="_ _11"> </span>miss<span class="_ _11"> </span>(m).<span class="_ _11"> </span>F<span class="_ _1"></span>or<span class="_ _11"> </span>example<span class="_ _0"></span>,<span class="_ _11"> </span>reading<span class="_ _11"> </span><span class="ffd">src[0][0]</span></span></div><div class="t m5 x4f h26 y5c11 ff7 fs19 fc1 sc0 ls0 ws0">is<span class="_"> </span>a<span class="_"> </span>miss<span class="_"> </span>and<span class="_"> </span>writing<span class="_"> </span><span class="ffd">dst[0][0]<span class="_ _10"> </span></span>is<span class="_"> </span>also<span class="_"> </span>a<span class="_"> </span>miss<span class="_ _1"></span>.</div><div class="t m5 x8e h31 y5c12 ffd fs1e fc2 sc0 ls0 ws0">dst<span class="_ _10"> </span><span class="ff7 fs21">array<span class="_ _204"> </span></span>src<span class="_ _10"> </span><span class="ff7 fs21">array</span></div><div class="t m5 x1a4 h31 y5c13 ff7 fs21 fc2 sc0 ls0 ws0">Col.<span class="_"> </span>0<span class="_ _46"> </span>Col.<span class="_"> </span>1<span class="_ _1f9"> </span>Col.<span class="_"> </span>2<span class="_ _46"> </span>Col.<span class="_"> </span>3<span class="_ _16f"> </span>Col.<span class="_"> </span>0<span class="_ _1f9"> </span>Col.<span class="_"> </span>1<span class="_ _46"> </span>Col.<span class="_"> </span>2<span class="_ _1f9"> </span>Col.<span class="_"> </span>3</div><div class="t m5 x14 h31 y5c14 ff7 fs21 fc2 sc0 ls0 ws0">Row<span class="_"> </span>0<span class="_ _45"> </span>m</div><div class="t m5 x198 h31 y5c15 ff7 fs21 fc1 sc0 ls0 ws0">Row<span class="_"> </span>0<span class="_ _45"> </span>m</div><div class="t m5 x14 h31 y5c16 ff7 fs21 fc1 sc0 ls0 ws0">Row<span class="_"> </span>1<span class="_ _205"> </span>Row<span class="_"> </span>1</div><div class="t m5 x14 h31 y5c17 ff7 fs21 fc1 sc0 ls0 ws0">Row<span class="_"> </span>2</div><div class="t m5 x198 h31 y5c18 ff7 fs21 fc1 sc0 ls0 ws0">Row<span class="_"> </span>2</div><div class="t m5 x14 h31 y5c19 ff7 fs21 fc1 sc0 ls0 ws0">Row<span class="_"> </span>3</div><div class="t m5 x198 h31 y5c1a ff7 fs21 fc1 sc0 ls0 ws0">Row<span class="_"> </span>3</div><div class="t m5 x1d h73 y5c1b ffe fs1e fc6 sc0 ls0 ws0">6.35<span class="_ _23"> </span><span class="ff10 fs19">◆◆</span></div><div class="t m5 x1d h26 y5c1c ff7 fs19 fc1 sc0 ls0 ws0">Repeat<span class="_"> </span>Problem<span class="_"> </span>6.34<span class="_"> </span>for<span class="_"> </span>a<span class="_"> </span>cache<span class="_"> </span>with<span class="_"> </span>a<span class="_"> </span>total<span class="_"> </span>size<span class="_"> </span>of<span class="_"> </span>128<span class="_"> </span>data<span class="_"> </span>bytes<span class="_ _1"></span>.</div><div class="t m5 x8e h31 y5c1d ffd fs1e fc2 sc0 ls0 ws0">dst<span class="_ _10"> </span><span class="ff7 fs21">array<span class="_ _204"> </span></span>src<span class="_ _10"> </span><span class="ff7 fs21">array</span></div><div class="t m5 x1a4 h31 y5c1e ff7 fs21 fc2 sc0 ls0 ws0">Col.<span class="_"> </span>0<span class="_ _46"> </span>Col.<span class="_"> </span>1<span class="_ _1f9"> </span>Col.<span class="_"> </span>2<span class="_ _46"> </span>Col.<span class="_"> </span>3<span class="_ _16f"> </span>Col.<span class="_"> </span>0<span class="_ _1f9"> </span>Col.<span class="_"> </span>1<span class="_ _46"> </span>Col.<span class="_"> </span>2<span class="_ _1f9"> </span>Col.<span class="_"> </span>3</div><div class="t m5 x14 h31 y5c1f ff7 fs21 fc2 sc0 ls0 ws0">Row<span class="_"> </span>0<span class="_ _205"> </span><span class="fc1">Row<span class="_"> </span>0</span></div><div class="t m5 x14 h31 y5c20 ff7 fs21 fc1 sc0 ls0 ws0">Row<span class="_"> </span>1<span class="_ _205"> </span>Row<span class="_"> </span>1</div><div class="t m5 x14 h31 y5c21 ff7 fs21 fc1 sc0 ls0 ws0">Row<span class="_"> </span>2<span class="_ _205"> </span>Row<span class="_"> </span>2</div><div class="t m5 x14 h31 y5c22 ff7 fs21 fc1 sc0 ls0 ws0">Row<span class="_"> </span>3</div><div class="t m5 x198 h31 y5c23 ff7 fs21 fc1 sc0 ls0 ws0">Row<span class="_"> </span>3</div><div class="t m5 x1d h73 y5c24 ffe fs1e fc6 sc0 ls0 ws0">6.36<span class="_ _23"> </span><span class="ff10 fs19">◆◆</span></div><div class="t m5 x1d h26 y5c25 ff7 fs19 fc1 sc0 ls0 ws0">T<span class="_ _1"></span>his<span class="_ _11"> </span>problem<span class="_ _16"> </span>tests<span class="_"> </span>your<span class="_ _11"> </span>ability<span class="_ _16"> </span>to<span class="_"> </span>predict<span class="_ _16"> </span>the<span class="_"> </span>cache<span class="_ _11"> </span>behavior<span class="_ _16"> </span>of<span class="_"> </span>C<span class="_ _11"> </span>code.<span class="_"> </span>Y<span class="_ _3"></span>ou<span class="_ _11"> </span>are</div><div class="t m5 x1d h26 y5c26 ff7 fs19 fc1 sc0 ls0 ws0">given<span class="_"> </span>the<span class="_"> </span>following<span class="_"> </span>code<span class="_"> </span>to<span class="_"> </span>analyze:</div><div class="t m5 x1f h2d y77e ff6 fs20 fc6 sc0 ls0 ws0">1<span class="_ _20"> </span><span class="ffd fs1e fc2">int<span class="_ _e"> </span>x[2][128];</span></div><div class="t m5 x1f h2d ye95 ff6 fs20 fc6 sc0 ls0 ws0">2<span class="_ _20"> </span><span class="ffd fs1e fc2">int<span class="_ _e"> </span>i;</span></div></div><div class="pi" data-data='{"ctm":[2.000000,0.000000,0.000000,2.000000,0.000000,0.000000]}'></div></div>
