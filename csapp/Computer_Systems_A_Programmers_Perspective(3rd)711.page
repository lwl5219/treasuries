<div id="pf2c7" class="pf w2 h11" data-page-no="2c7"><div class="pc pc2c7 w2 h11"><img class="bi x0 y0 w1 h1" alt="" src="csapp/bg2c7.png"/><div class="t m5 x14 h28 y9b ffe fs1e fc2 sc0 ls0 ws0">710<span class="_ _1b"> </span><span class="ff6 fs1f">Chapter<span class="_ _10"> </span>7<span class="_ _3d"> </span>Linking</span></div><div class="t m5 x14 h2f ye7 ffe fs16 fc6 sc0 ls0 ws0">Figure<span class="_"> </span>7.3</div><div class="t m5 x14 h2f y58a ffe fs16 fc1 sc0 ls0 ws0">T<span class="_ _1"></span>ypical<span class="_ _16"> </span>ELF<span class="_ _16"> </span>relocatable</div><div class="t m5 x14 h2f y58b ffe fs16 fc1 sc0 ls0 ws0">object<span class="_"> </span>ﬁle.</div><div class="t m5 x1d1 h3f y5e5e ff8b fs27 fc1 sc0 ls0 ws0">Section header table </div><div class="t m5 xe0 h3f y5e5f ff8b fs27 fc1 sc0 ls0 ws0">Describes</div><div class="t m5 x4d h3f y5e60 ff8b fs27 fc1 sc0 ls0 ws0">object file</div><div class="t m5 x1c6 h3f y5e61 ff8b fs27 fc1 sc0 ls0 ws0">sections</div><div class="t m5 x18e h3f y5e62 ff8b fs27 fc1 sc0 ls0 ws0">Sections</div><div class="t m5 x1b1 h40 y5e63 ff8c fs28 fc1 sc0 ls0 ws0">.strtab</div><div class="t m5 x151 h40 y5e64 ff8c fs28 fc1 sc0 ls0 ws0">.line</div><div class="t m5 x185 h40 y5e65 ff8c fs28 fc1 sc0 ls0 ws0">.debug</div><div class="t m5 x24e h40 y5e66 ff8c fs28 fc1 sc0 ls0 ws0">.rel.data</div><div class="t m5 x24e h40 y5e67 ff8c fs28 fc1 sc0 ls0 ws0">.rel.text</div><div class="t m5 x1b1 h40 y5e68 ff8c fs28 fc1 sc0 ls0 ws0">.symtab</div><div class="t m5 x187 h40 y5e69 ff8c fs28 fc1 sc0 ls0 ws0">.bss</div><div class="t m5 x151 h40 y5e6a ff8c fs28 fc1 sc0 ls0 ws0">.data</div><div class="t m5 x1b1 h40 y5e6b ff8c fs28 fc1 sc0 ls0 ws0">.rodata</div><div class="t m5 x151 h40 y5e6c ff8c fs28 fc1 sc0 ls0 ws0">.text</div><div class="t m5 xd3 h3f y5e6d ff8b fs27 fc1 sc0 ls0 ws0">ELF header</div><div class="t m5 xda h3f y5e6e ff8b fs27 fc1 sc0 ls0 ws0">0</div><div class="t m5 x1d h3b y5e6f fff fs24 fc6 sc0 ls0 ws0">7.4<span class="_ _17"> </span><span class="ffe fs18">Relocatable<span class="_"> </span>Object<span class="_"> </span>Files</span></div><div class="t m5 x1d h26 y5e70 ff7 fs19 fc1 sc0 ls0 ws0">F<span class="_ _1"></span>igure<span class="_ _15"> </span>7.3<span class="_ _15"> </span>shows<span class="_ _14"> </span>the<span class="_ _15"> </span>format<span class="_ _15"> </span>of<span class="_ _14"> </span>a<span class="_ _15"> </span>typical<span class="_ _15"> </span>ELF<span class="_ _14"> </span>relocatable<span class="_ _15"> </span>object<span class="_ _15"> </span>ﬁle<span class="_ _0"></span>.<span class="_ _14"> </span>The<span class="_ _14"> </span><span class="ffa">ELF</span></div><div class="t m5 x1d h26 y5e71 ffa fs19 fc1 sc0 ls0 ws0">header<span class="_ _e"> </span><span class="ff7">begins<span class="_ _21"> </span>with<span class="_ _21"> </span>a<span class="_ _f"> </span>16-byte<span class="_ _f"> </span>sequence<span class="_ _f"> </span>that<span class="_ _f"> </span>describes<span class="_ _21"> </span>the<span class="_ _f"> </span>word<span class="_ _f"> </span>size<span class="_ _f"> </span>and<span class="_ _f"> </span>byte</span></div><div class="t m5 x1d h26 y5e72 ff7 fs19 fc1 sc0 ls0 ws0">ordering<span class="_ _13"> </span>of<span class="_ _13"> </span>the<span class="_ _6"> </span>system<span class="_ _13"> </span>that<span class="_ _13"> </span>generated<span class="_ _13"> </span>the<span class="_ _13"> </span>ﬁle<span class="_ _1"></span>.<span class="_ _13"> </span>T<span class="_ _1"></span>he<span class="_ _13"> </span>rest<span class="_ _13"> </span>of<span class="_ _13"> </span>the<span class="_ _13"> </span>ELF<span class="_ _6"> </span>header<span class="_ _13"> </span>contains</div><div class="t m5 x1d h26 y5e73 ff7 fs19 fc1 sc0 ls0 ws0">information<span class="_ _13"> </span>that<span class="_ _13"> </span>allows<span class="_ _6"> </span>a<span class="_ _13"> </span>linker<span class="_ _13"> </span>to<span class="_ _13"> </span>parse<span class="_ _6"> </span>and<span class="_ _13"> </span>interpret<span class="_ _13"> </span>the<span class="_ _13"> </span>object<span class="_ _6"> </span>ﬁle.<span class="_ _6"> </span>This<span class="_ _6"> </span>includes</div><div class="t m5 x1d h26 y5e74 ff7 fs19 fc1 sc0 ls0 ws0">the<span class="_ _16"> </span>size<span class="_ _11"> </span>of<span class="_ _16"> </span>the<span class="_ _16"> </span>ELF<span class="_ _16"> </span>header,<span class="_ _16"> </span>the<span class="_ _11"> </span>object<span class="_ _16"> </span>ﬁle<span class="_ _16"> </span>type<span class="_ _16"> </span>(e<span class="_ _1"></span>.g.,<span class="_ _16"> </span>relocatable<span class="_ _0"></span>,<span class="_ _16"> </span>executable<span class="_ _1"></span>,<span class="_ _14"> </span>or</div><div class="t m5 x1d h26 y5e75 ff7 fs19 fc1 sc0 ls0 ws0">shared),<span class="_"> </span>the<span class="_ _13"> </span>machine<span class="_ _13"> </span>type<span class="_"> </span>(e<span class="_ _1"></span>.g.,<span class="_ _13"> </span>x86-64),<span class="_"> </span>the<span class="_ _13"> </span>ﬁle<span class="_"> </span>offset<span class="_ _13"> </span>of<span class="_"> </span>the<span class="_ _13"> </span>section<span class="_ _13"> </span>header<span class="_"> </span>table<span class="_ _1"></span>,</div><div class="t m5 x1d h26 y5e76 ff7 fs19 fc1 sc0 ls0 ws0">and<span class="_ _15"> </span>the<span class="_ _21"> </span>size<span class="_ _21"> </span>and<span class="_ _21"> </span>number<span class="_ _15"> </span>of<span class="_ _21"> </span>entries<span class="_ _21"> </span>in<span class="_ _21"> </span>the<span class="_ _15"> </span>section<span class="_ _21"> </span>header<span class="_ _21"> </span>table.<span class="_ _14"> </span>The<span class="_ _15"> </span>locations</div><div class="t m5 x1d h26 y5e77 ff7 fs19 fc1 sc0 ls0 ws0">and<span class="_ _11"> </span>sizes<span class="_ _11"> </span>of<span class="_ _11"> </span>the<span class="_"> </span>various<span class="_ _11"> </span>sections<span class="_ _11"> </span>are<span class="_ _11"> </span>described<span class="_ _11"> </span>by<span class="_ _11"> </span>the<span class="_ _11"> </span><span class="ffa">section<span class="_ _11"> </span>header<span class="_ _11"> </span>table<span class="_ _2"></span></span>,<span class="_"> </span>which</div><div class="t m5 x1d h26 y5e78 ff7 fs19 fc1 sc0 ls0 ws0">contains<span class="_"> </span>a<span class="_"> </span>ﬁxed-size<span class="_"> </span>entry<span class="_"> </span>for<span class="_"> </span>each<span class="_"> </span>section<span class="_"> </span>in<span class="_"> </span>the<span class="_"> </span>object<span class="_"> </span>ﬁle<span class="_ _1"></span>.</div><div class="t m5 x29 h26 y5e79 ff7 fs19 fc1 sc0 ls0 ws0">Sandwiched<span class="_ _16"> </span>between<span class="_ _14"> </span>the<span class="_ _14"> </span>ELF<span class="_ _14"> </span>header<span class="_ _16"> </span>and<span class="_ _14"> </span>the<span class="_ _14"> </span>section<span class="_ _14"> </span>header<span class="_ _14"> </span>table<span class="_ _16"> </span>are<span class="_ _14"> </span>the</div><div class="t m5 x1d h26 y5e7a ff7 fs19 fc1 sc0 ls0 ws0">sections<span class="_ _11"> </span>themselves<span class="_ _1"></span>.<span class="_ _11"> </span>A<span class="_ _11"> </span>typical<span class="_ _11"> </span>ELF<span class="_ _11"> </span>relocatable<span class="_ _11"> </span>object<span class="_ _11"> </span>ﬁle<span class="_ _11"> </span>contains<span class="_ _11"> </span>the<span class="_ _11"> </span>following</div><div class="t m5 x1d h26 y5e7b ff7 fs19 fc1 sc0 ls0 ws0">sections:</div><div class="t m5 x75 h26 y5e7c ffd fs19 fc1 sc0 ls0 ws0">.text<span class="_ _e"> </span><span class="ff7">The<span class="_"> </span>machine<span class="_"> </span>code<span class="_"> </span>of<span class="_"> </span>the<span class="_"> </span>compiled<span class="_"> </span>program.</span></div><div class="t m5 x75 h26 y5e7d ffd fs19 fc1 sc0 ls0 ws0">.rodata<span class="_ _e"> </span><span class="ff7">Read-only<span class="_ _11"> </span>data<span class="_ _11"> </span>such<span class="_ _11"> </span>as<span class="_ _11"> </span>the<span class="_ _11"> </span>format<span class="_ _11"> </span>strings<span class="_"> </span>in<span class="_ _11"> </span></span>printf<span class="_ _11"> </span><span class="ff7">statements<span class="_ _1"></span>,<span class="_ _11"> </span>and</span></div><div class="t m5 xcd h26 y5e7e ff7 fs19 fc1 sc0 ls0 ws0">jump<span class="_"> </span>tables<span class="_"> </span>for<span class="_"> </span>switch<span class="_"> </span>statements<span class="_ _1"></span>.</div><div class="t m5 x23a h26 y5e7f ffd fs19 fc1 sc0 ls0 ws0">.data<span class="_ _e"> </span><span class="ffa">Initialized<span class="_ _13"> </span><span class="ff7">global<span class="_ _6"> </span>and<span class="_ _6"> </span>static<span class="_ _13"> </span>C<span class="_ _a"> </span>variables<span class="_ _1"></span>.<span class="_ _13"> </span>Local<span class="_ _6"> </span>C<span class="_ _6"> </span>variables<span class="_ _6"> </span>are<span class="_ _13"> </span>maintained</span></span></div><div class="t m5 xcd h26 y5e80 ff7 fs19 fc1 sc0 ls0 ws0">at<span class="_ _16"> </span>run<span class="_ _11"> </span>time<span class="_ _16"> </span>on<span class="_ _16"> </span>the<span class="_ _16"> </span>stack<span class="_ _11"> </span>and<span class="_ _16"> </span>do<span class="_ _16"> </span><span class="ffa">not<span class="_ _14"> </span></span>appear<span class="_ _16"> </span>in<span class="_ _16"> </span>either<span class="_ _16"> </span>the<span class="_ _11"> </span><span class="ffd">.data<span class="_ _16"> </span></span>or<span class="_ _16"> </span><span class="ffd">.bss</span></div><div class="t m5 xcd h26 y5e81 ff7 fs19 fc1 sc0 ls0 ws0">sections<span class="_ _1"></span>.</div><div class="t m5 x23a h26 y5e82 ffd fs19 fc1 sc0 ls0 ws0">.bss<span class="_ _e"> </span><span class="ffa">Uninitialized<span class="_"> </span><span class="ff7">global<span class="_"> </span>and<span class="_ _13"> </span>static<span class="_"> </span>C<span class="_"> </span>variables<span class="_ _3"></span>,<span class="_"> </span>along<span class="_"> </span>with<span class="_ _13"> </span>any<span class="_"> </span>global<span class="_"> </span>or<span class="_ _13"> </span>static</span></span></div><div class="t m5 xcd h26 y5e83 ff7 fs19 fc1 sc0 ls0 ws0">variables<span class="_ _13"> </span>that<span class="_ _13"> </span>are<span class="_ _13"> </span>initialized<span class="_ _13"> </span>to<span class="_ _13"> </span>zero<span class="_ _1"></span>.<span class="_ _13"> </span>T<span class="_ _0"></span>his<span class="_ _13"> </span>section<span class="_ _13"> </span>occupies<span class="_ _13"> </span>no<span class="_ _13"> </span>actual<span class="_ _13"> </span>space</div><div class="t m5 xcd h26 y5e84 ff7 fs19 fc1 sc0 ls0 ws0">in<span class="_ _13"> </span>the<span class="_ _13"> </span>object<span class="_ _13"> </span>ﬁle;<span class="_ _13"> </span>it<span class="_ _13"> </span>is<span class="_ _6"> </span>merely<span class="_ _13"> </span>a<span class="_ _13"> </span>placeholder.<span class="_ _13"> </span>Object<span class="_ _6"> </span>ﬁle<span class="_ _13"> </span>formats<span class="_ _13"> </span>distinguish</div><div class="t m5 xcd h26 y5e85 ff7 fs19 fc1 sc0 ls0 ws0">between<span class="_ _13"> </span>initialized<span class="_"> </span>and<span class="_ _13"> </span>uninitialized<span class="_"> </span>variables<span class="_ _13"> </span>for<span class="_"> </span>space<span class="_ _13"> </span>efﬁciency:<span class="_ _13"> </span>unini-</div><div class="t m5 xcd h26 y5e86 ff7 fs19 fc1 sc0 ls0 ws0">tialized<span class="_ _13"> </span>variables<span class="_ _6"> </span>do<span class="_ _13"> </span>not<span class="_ _6"> </span>have<span class="_ _13"> </span>to<span class="_ _13"> </span>occupy<span class="_ _6"> </span>any<span class="_ _13"> </span>actual<span class="_ _13"> </span>disk<span class="_ _6"> </span>space<span class="_ _13"> </span>in<span class="_ _6"> </span>the<span class="_ _13"> </span>object</div><div class="t m5 xcd h26 y5e87 ff7 fs19 fc1 sc0 ls0 ws0">ﬁle<span class="_ _1"></span>.<span class="_ _16"> </span>At<span class="_ _11"> </span>run<span class="_ _11"> </span>time<span class="_ _0"></span>,<span class="_ _11"> </span>these<span class="_ _16"> </span>variables<span class="_"> </span>are<span class="_ _16"> </span>allocated<span class="_ _11"> </span>in<span class="_ _11"> </span>memory<span class="_ _11"> </span>with<span class="_ _16"> </span>an<span class="_"> </span>initial</div><div class="t m5 xcd h26 y5e88 ff7 fs19 fc1 sc0 ls0 ws0">value<span class="_"> </span>of<span class="_"> </span>zero<span class="_ _1"></span>.</div></div><div class="pi" data-data='{"ctm":[2.000000,0.000000,0.000000,2.000000,0.000000,0.000000]}'></div></div>
