<div id="pf54" class="pf w2 h11" data-page-no="54"><div class="pc pc54 w2 h11"><img class="bi x0 y0 w1 h1" alt="" src="csapp/bg54.png"/><div class="t m5 x2b h28 y9b ff6 fs1f fc2 sc0 ls0 ws0">Section<span class="_ _10"> </span>2.1<span class="_ _60"> </span>Information<span class="_ _10"> </span>Storage<span class="_ _3e"> </span><span class="ffe fs1e">83</span></div><div class="t m5 x34 h2a y548 fff fs1c fc2 sc0 ls0 ws0">New<span class="_ _16"> </span>to<span class="_ _16"> </span>C?<span class="_ _1b"> </span><span class="ff6 fs19">Naming<span class="_ _11"> </span>data<span class="_ _11"> </span>types<span class="_ _16"> </span>with<span class="_ _11"> </span><span class="ffd fs2b">typedef</span></span></div><div class="t m5 x34 h2b y2d0 ff7 fs1e fc2 sc0 ls31 ws0">Th<span class="_ _2"></span>e<span class="_ _11"> </span><span class="ffd ls0">typedef<span class="_ _10"> </span><span class="ff7">declaration<span class="_"> </span>in<span class="_"> </span>C<span class="_"> </span>provides<span class="_"> </span>a<span class="_"> </span>way<span class="_"> </span>of<span class="_"> </span>giving<span class="_"> </span>a<span class="_"> </span>name<span class="_"> </span>to<span class="_"> </span>a<span class="_"> </span>data<span class="_"> </span>type<span class="_ _1"></span>.<span class="_"> </span>This<span class="_"> </span>can<span class="_"> </span>be<span class="_"> </span>a<span class="_"> </span>great<span class="_"> </span>help</span></span></div><div class="t m5 x34 h2b y2d1 ff7 fs1e fc2 sc0 ls0 ws0">in<span class="_"> </span>improving<span class="_"> </span>code<span class="_"> </span>readability<span class="_ _3"></span>,<span class="_"> </span>since<span class="_"> </span>deeply<span class="_"> </span>nested<span class="_"> </span>type<span class="_"> </span>declarations<span class="_"> </span>can<span class="_"> </span>be<span class="_"> </span>difﬁcult<span class="_"> </span>to<span class="_"> </span>decipher.</div><div class="t m5 x35 h2b y2d2 ff7 fs1e fc2 sc0 ls0 ws0">T<span class="_ _1"></span>he<span class="_"> </span>syntax<span class="_"> </span>for<span class="_ _10"> </span><span class="ffd">typedef<span class="_ _10"> </span></span>is<span class="_"> </span>exactly<span class="_"> </span>like<span class="_"> </span>that<span class="_"> </span>of<span class="_"> </span>declaring<span class="_"> </span>a<span class="_ _10"> </span>variable,<span class="_"> </span>except<span class="_"> </span>that<span class="_"> </span>it<span class="_"> </span>uses<span class="_"> </span>a<span class="_"> </span>type<span class="_"> </span>name</div><div class="t m5 x34 h2b y2d3 ff7 fs1e fc2 sc0 ls0 ws0">rather<span class="_"> </span>than<span class="_ _13"> </span>a<span class="_ _13"> </span>variable<span class="_"> </span>name<span class="_ _1"></span>.<span class="_"> </span>T<span class="_ _1"></span>hus<span class="_ _1"></span>,<span class="_"> </span>the<span class="_ _13"> </span>declaration<span class="_"> </span>of<span class="_ _13"> </span><span class="ffd">byte_pointer<span class="_ _13"> </span></span>in<span class="_"> </span>F<span class="_ _1"></span>igure<span class="_"> </span>2.4<span class="_ _13"> </span>has<span class="_"> </span>the<span class="_ _13"> </span>same<span class="_ _13"> </span>form<span class="_"> </span>as</div><div class="t m5 x34 h2b y2d4 ff7 fs1e fc2 sc0 ls0 ws0">the<span class="_"> </span>declaration<span class="_"> </span>of<span class="_"> </span>a<span class="_"> </span>variable<span class="_"> </span>of<span class="_"> </span>type<span class="_"> </span><span class="ffd">unsigned<span class="_ _11"> </span>char<span class="_ _11"> </span>*</span>.</div><div class="t m5 x35 h2b y2d5 ff7 fs1e fc2 sc0 ls0 ws0">F<span class="_ _1"></span>or<span class="_"> </span>example<span class="_ _0"></span>,<span class="_"> </span>the<span class="_"> </span>declaration</div><div class="t m5 x34 h2d y7ad ffd fs1e fc2 sc0 ls0 ws0">typedef<span class="_ _e"> </span>int<span class="_ _1f"> </span>*int_pointer;</div><div class="t m5 x34 h2d yaec ffd fs1e fc2 sc0 ls0 ws0">int_pointer<span class="_ _e"> </span>ip;</div><div class="t m5 x34 h2b yaed ff7 fs1e fc2 sc0 ls0 ws0">deﬁnes<span class="_ _6"> </span>type<span class="_ _6"> </span><span class="ffd">int_pointer<span class="_ _6"> </span></span>to<span class="_ _6"> </span>be<span class="_ _13"> </span>a<span class="_ _a"> </span>pointer<span class="_ _6"> </span>to<span class="_ _6"> </span>an<span class="_ _13"> </span><span class="ffd">int</span>,<span class="_ _6"> </span>and<span class="_ _6"> </span>declares<span class="_ _6"> </span>a<span class="_ _6"> </span>variable<span class="_ _6"> </span><span class="ffd">ip<span class="_ _13"> </span></span>of<span class="_ _a"> </span>this<span class="_ _6"> </span>type.<span class="_ _a"> </span>Alternatively<span class="_ _3"></span>,</div><div class="t m5 x34 h2b yaee ff7 fs1e fc2 sc0 ls0 ws0">we<span class="_"> </span>could<span class="_"> </span>declare<span class="_"> </span>this<span class="_"> </span>variable<span class="_"> </span>directly<span class="_"> </span>as</div><div class="t m5 x34 h2d yaef ffd fs1e fc2 sc0 ls0 ws0">int<span class="_ _e"> </span>*ip;</div><div class="t m5 x34 h2a yaf0 fff fs1c fc2 sc0 ls0 ws0">New<span class="_ _16"> </span>to<span class="_ _16"> </span>C?<span class="_ _1b"> </span><span class="ff6 fs19">Formatted<span class="_ _11"> </span>printing<span class="_ _11"> </span>with<span class="_ _16"> </span><span class="ffd fs2b">printf</span></span></div><div class="t m5 x34 h2b yaf1 ff7 fs1e fc2 sc0 ls31 ws0">Th<span class="_ _2"></span>e<span class="_ _10"> </span><span class="ffd ls0">printf<span class="_ _13"> </span><span class="ff7">function<span class="_ _6"> </span>(along<span class="_"> </span>with<span class="_ _6"> </span>its<span class="_ _13"> </span>cousins<span class="_ _13"> </span></span>fprintf<span class="_ _13"> </span><span class="ff7">and<span class="_ _13"> </span></span>sprintf<span class="ff7">)<span class="_ _13"> </span>provides<span class="_ _6"> </span>a<span class="_"> </span>way<span class="_ _6"> </span>to<span class="_"> </span>print<span class="_ _6"> </span>information</span></span></div><div class="t m5 x34 h2b yaf2 ff7 fs1e fc2 sc0 ls0 ws0">with<span class="_ _10"> </span>considerable<span class="_ _11"> </span>control<span class="_ _11"> </span>over<span class="_"> </span>the<span class="_ _11"> </span>formatting<span class="_ _11"> </span>details<span class="_ _1"></span>.<span class="_ _10"> </span>The<span class="_"> </span>ﬁrst<span class="_ _11"> </span>argument<span class="_"> </span>is<span class="_ _11"> </span>a<span class="_ _11"> </span><span class="ffa">format<span class="_ _10"> </span>string<span class="_ _2"></span></span>,<span class="_ _11"> </span>while<span class="_ _10"> </span>any</div><div class="t m5 x34 h2b yaf3 ff7 fs1e fc2 sc0 ls0 ws0">remaining<span class="_ _15"> </span>arguments<span class="_ _21"> </span>are<span class="_ _15"> </span>values<span class="_ _21"> </span>to<span class="_ _15"> </span>be<span class="_ _21"> </span>printed.<span class="_ _15"> </span>Within<span class="_ _14"> </span>the<span class="_ _21"> </span>format<span class="_ _15"> </span>string,<span class="_ _f"> </span>each<span class="_ _15"> </span>character<span class="_ _21"> </span>sequence</div><div class="t m5 x34 h2b yaf4 ff7 fs1e fc2 sc0 ls0 ws0">starting<span class="_ _16"> </span>with<span class="_ _16"> </span>‘<span class="ffd">%</span>’<span class="_ _14"> </span>indicates<span class="_ _16"> </span>how<span class="_ _16"> </span>to<span class="_ _16"> </span>format<span class="_ _14"> </span>the<span class="_ _16"> </span>next<span class="_ _16"> </span>argument.<span class="_ _14"> </span>T<span class="_ _7"></span>ypical<span class="_ _16"> </span>examples<span class="_ _14"> </span>include<span class="_ _16"> </span><span class="ffd">%d<span class="_ _16"> </span></span>to<span class="_ _14"> </span>print<span class="_ _16"> </span>a</div><div class="t m5 x34 h2b yaf5 ff7 fs1e fc2 sc0 ls0 ws0">decimal<span class="_ _10"> </span>integer,<span class="_ _11"> </span><span class="ffd">%f<span class="_ _10"> </span></span>to<span class="_ _11"> </span>print<span class="_ _11"> </span>a<span class="_ _10"> </span>ﬂoating-point<span class="_ _11"> </span>number,<span class="_ _10"> </span>and<span class="_ _11"> </span><span class="ffd">%c<span class="_ _11"> </span></span>to<span class="_ _10"> </span>print<span class="_ _11"> </span>a<span class="_ _11"> </span>character<span class="_ _10"> </span>having<span class="_ _11"> </span>the<span class="_ _11"> </span>character</div><div class="t m5 x34 h2b yaf6 ff7 fs1e fc2 sc0 ls0 ws0">code<span class="_"> </span>given<span class="_"> </span>by<span class="_"> </span>the<span class="_"> </span>argument.</div><div class="t m5 x35 h2b yaf7 ff7 fs1e fc2 sc0 ls0 ws0">Specifying<span class="_ _16"> </span>the<span class="_ _11"> </span>formatting<span class="_ _16"> </span>of<span class="_ _16"> </span>ﬁxed-size<span class="_ _16"> </span>data<span class="_ _11"> </span>types<span class="_ _1"></span>,<span class="_ _14"> </span>such<span class="_ _16"> </span>as<span class="_ _11"> </span><span class="ffd">int_32t</span>,<span class="_ _16"> </span>is<span class="_ _16"> </span>a<span class="_ _16"> </span>bit<span class="_ _16"> </span>more<span class="_ _11"> </span>involved,<span class="_ _14"> </span>as<span class="_ _16"> </span>is</div><div class="t m5 x34 h2b yaf8 ff7 fs1e fc2 sc0 ls0 ws0">described<span class="_"> </span>in<span class="_"> </span>the<span class="_"> </span>aside<span class="_"> </span>on<span class="_"> </span>page<span class="_"> </span>103.</div><div class="t m5 x26 h26 yaf9 ff7 fs19 fc2 sc0 ls0 ws0">Observe<span class="_ _14"> </span>that<span class="_ _14"> </span>although<span class="_ _14"> </span>the<span class="_ _14"> </span>ﬂoating-point<span class="_ _16"> </span>and<span class="_ _14"> </span>the<span class="_ _14"> </span>integer<span class="_ _14"> </span>data<span class="_ _14"> </span>both<span class="_ _14"> </span>encode</div><div class="t m5 x17 h26 yafa ff7 fs19 fc2 sc0 ls0 ws0">the<span class="_ _15"> </span>numeric<span class="_ _21"> </span>value<span class="_ _21"> </span>12,345,<span class="_ _f"> </span>they<span class="_ _21"> </span>have<span class="_ _15"> </span>very<span class="_ _21"> </span>different<span class="_ _21"> </span>byte<span class="_ _15"> </span>patterns:<span class="_ _21"> </span><span class="ffd">0x00003039</span></div><div class="t m5 x17 h26 yafb ff7 fs19 fc2 sc0 ls0 ws0">for<span class="_ _11"> </span>the<span class="_ _16"> </span>integer<span class="_ _11"> </span>and<span class="_ _11"> </span><span class="ffd">0x4640E400<span class="_ _16"> </span></span>for<span class="_ _11"> </span>ﬂoating<span class="_ _11"> </span>point.<span class="_ _16"> </span>In<span class="_ _11"> </span>general,<span class="_ _16"> </span>these<span class="_ _11"> </span>two<span class="_ _11"> </span>formats</div><div class="t m5 x17 h26 yafc ff7 fs19 fc2 sc0 ls0 ws0">use<span class="_ _15"> </span>different<span class="_ _14"> </span>encoding<span class="_ _15"> </span>schemes<span class="_ _1"></span>.<span class="_ _15"> </span>If<span class="_ _15"> </span>we<span class="_ _15"> </span>expand<span class="_ _15"> </span>these<span class="_ _15"> </span>hexadecimal<span class="_ _15"> </span>patterns<span class="_ _15"> </span>into</div><div class="t m5 x17 h26 yafd ff7 fs19 fc2 sc0 ls0 ws0">binary<span class="_"> </span>form<span class="_"> </span>and<span class="_ _13"> </span>shift<span class="_"> </span>them<span class="_"> </span>appropriately<span class="_ _7"></span>,<span class="_"> </span>we<span class="_"> </span>ﬁnd<span class="_"> </span>a<span class="_"> </span>sequence<span class="_ _13"> </span>of<span class="_"> </span>13<span class="_"> </span>matching<span class="_"> </span>bits<span class="_ _3"></span>,</div><div class="t m5 x17 h26 yafe ff7 fs19 fc2 sc0 ls0 ws0">indicated<span class="_"> </span>by<span class="_"> </span>a<span class="_"> </span>sequence<span class="_"> </span>of<span class="_"> </span>asterisks<span class="_ _1"></span>,<span class="_"> </span>as<span class="_"> </span>follows:</div><div class="t m5 x153 h2d yaff ffd fs1e fc2 sc0 ls32 ws0">00003039</div><div class="t m5 x72 h2d yb00 ffd fs1e fc2 sc0 ls0 ws0">00000000000000000011000000111001</div><div class="t m5 x154 h2d yb01 ffd fs1e fc2 sc0 ls0 ws0">*************</div><div class="t m5 xf6 h2d yb02 ffd fs1e fc2 sc0 ls32 ws0">4640E400</div><div class="t m5 x155 h2d yb03 ffd fs1e fc2 sc0 ls0 ws0">01000110010000001110010000000000</div><div class="t m5 x17 h26 yb04 ff7 fs19 fc2 sc0 ls0 ws0">T<span class="_ _1"></span>his<span class="_ _16"> </span>is<span class="_ _16"> </span>not<span class="_ _16"> </span>coincidental.<span class="_ _11"> </span>W<span class="_ _1"></span>e<span class="_ _16"> </span>will<span class="_ _16"> </span>return<span class="_ _11"> </span>to<span class="_ _16"> </span>this<span class="_ _16"> </span>example<span class="_ _16"> </span>when<span class="_ _16"> </span>we<span class="_ _11"> </span>study<span class="_ _16"> </span>ﬂoating-</div><div class="t m5 x17 h26 yb05 ff7 fs19 fc2 sc0 ls0 ws0">point<span class="_"> </span>formats<span class="_ _1"></span>.</div></div><div class="pi" data-data='{"ctm":[2.000000,0.000000,0.000000,2.000000,0.000000,0.000000]}'></div></div>
