<div id="pf2f4" class="pf w2 h11" data-page-no="2f4"><div class="pc pc2f4 w2 h11"><img class="bi x0 y0 w1 h1" alt="" src="csapp/bg2f4.png"/><div class="t m5 x107 h28 y9b ff6 fs1f fc2 sc0 ls0 ws0">Solutions<span class="_ _10"> </span>to<span class="_ _10"> </span>Practice<span class="_ _10"> </span>Problems<span class="_ _1b"> </span><span class="ffe fs1e">755</span></div><div class="t m5 x17 h2d y140c ffd fs1e fc2 sc0 ls0 ws0">ADDR(s)<span class="_ _e"> </span>=<span class="_ _1f"> </span>ADDR(.text)<span class="_ _1f"> </span>=<span class="_ _e"> </span>0x4004d0</div><div class="t m5 x17 h26 y5de6 ff7 fs19 fc2 sc0 ls0 ws0">and</div><div class="t m5 x17 h2d y6368 ffd fs1e fc2 sc0 ls0 ws0">ADDR(r.symbol)<span class="_ _e"> </span>=<span class="_ _1f"> </span>ADDR(swap)<span class="_ _1f"> </span>=<span class="_ _e"> </span>0x4004e8</div><div class="t m5 x26 h26 y2d1c ff7 fs19 fc2 sc0 ls0 ws0">Using<span class="_ _15"> </span>the<span class="_ _15"> </span>algorithm<span class="_ _21"> </span>in<span class="_ _15"> </span>Figure<span class="_ _14"> </span>7.10,<span class="_ _f"> </span>the<span class="_ _15"> </span>linker<span class="_ _21"> </span>ﬁrst<span class="_ _15"> </span>computes<span class="_ _15"> </span>the<span class="_ _21"> </span>run-time</div><div class="t m5 x17 h26 y2d1d ff7 fs19 fc2 sc0 ls0 ws0">address<span class="_"> </span>of<span class="_"> </span>the<span class="_"> </span>reference:</div><div class="t m5 x17 h2d y1a10 ffd fs1e fc2 sc0 ls0 ws0">refaddr<span class="_ _e"> </span>=<span class="_ _1f"> </span>ADDR(s)<span class="_ _1a"> </span>+<span class="_ _1f"> </span>r.offset</div><div class="t m5 x21e h2d y6369 ffd fs1e fc2 sc0 ls0 ws0">=<span class="_ _e"> </span>0x4004d0<span class="_ _1f"> </span>+<span class="_ _1f"> </span>0xa</div><div class="t m5 x21e h2d y636a ffd fs1e fc2 sc0 ls0 ws0">=<span class="_ _e"> </span>0x4004da</div><div class="t m5 x17 h26 y636b ff7 fs19 fc2 sc0 ls0 ws0">It<span class="_"> </span>then<span class="_"> </span>updates<span class="_"> </span>the<span class="_"> </span>reference:</div><div class="t m5 x17 h2d y2b56 ffd fs1e fc2 sc0 ls0 ws0">*refptr<span class="_ _e"> </span>=<span class="_ _1f"> </span>(unsigned)<span class="_ _1f"> </span>(ADDR(r.symbol)<span class="_ _e"> </span>+<span class="_ _1f"> </span>r.addend<span class="_ _e"> </span>-<span class="_ _1f"> </span>refaddr)</div><div class="t m5 x21e h2d y2b57 ffd fs1e fc2 sc0 ls0 ws0">=<span class="_ _e"> </span>(unsigned)<span class="_ _1f"> </span>(0x4004e8<span class="_ _6f"> </span>+<span class="_ _1f"> </span>(-4)<span class="_ _58"> </span>-<span class="_ _1f"> </span>0x4004da)</div><div class="t m5 x21e h2d y2b58 ffd fs1e fc2 sc0 ls0 ws0">=<span class="_ _e"> </span>(unsigned)<span class="_ _1f"> </span>(0xa)</div><div class="t m5 x17 h26 yeb1 ff7 fs19 fc2 sc0 ls0 ws0">T<span class="_ _1"></span>hus<span class="_ _1"></span>,<span class="_"> </span>in<span class="_"> </span>the<span class="_ _13"> </span>resulting<span class="_"> </span>executable<span class="_ _13"> </span>object<span class="_"> </span>ﬁle<span class="_ _1"></span>,<span class="_"> </span>the<span class="_ _13"> </span>PC-relative<span class="_"> </span>reference<span class="_ _13"> </span>to<span class="_"> </span><span class="ffd">swap<span class="_ _13"> </span></span>has</div><div class="t m5 x17 h26 y4955 ff7 fs19 fc2 sc0 ls0 ws0">a<span class="_"> </span>value<span class="_"> </span>of<span class="_"> </span><span class="ffd">0xa</span>:</div><div class="t m5 x72 h2d y3ed ffd fs1e fc2 sc0 ls0 ws0">4004d9:<span class="_ _1a"> </span>e8<span class="_ _e"> </span>0a<span class="_ _1f"> </span>00<span class="_ _1f"> </span>00<span class="_ _e"> </span>00<span class="_ _86"> </span>callq<span class="_ _1a"> </span>4004e8<span class="_ _1f"> </span>&lt;swap&gt;</div></div><div class="pi" data-data='{"ctm":[2.000000,0.000000,0.000000,2.000000,0.000000,0.000000]}'></div></div>
