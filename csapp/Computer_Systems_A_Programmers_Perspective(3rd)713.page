<div id="pf2c9" class="pf w2 h11" data-page-no="2c9"><div class="pc pc2c9 w2 h11"><img class="bi x0 y0 w1 h1" alt="" src="csapp/bg2c9.png"/><div class="t m5 x14 h28 y9b ffe fs1e fc2 sc0 ls0 ws0">712<span class="_ _1b"> </span><span class="ff6 fs1f">Chapter<span class="_ _10"> </span>7<span class="_ _3d"> </span>Linking</span></div><div class="t m5 x75 h3d y2d1a ff14 fs26 fc6 sc0 ls0 ws0">.</div><div class="t m5 x29 h26 ye7 ffa fs19 fc1 sc0 ls0 ws0">Global<span class="_"> </span>symbols<span class="_ _11"> </span><span class="ff7">that<span class="_"> </span>are<span class="_ _11"> </span>deﬁned<span class="_"> </span>by<span class="_ _11"> </span>module<span class="_"> </span><span class="ff11">m<span class="_ _11"> </span></span>and<span class="_"> </span>that<span class="_ _11"> </span>can<span class="_"> </span>be<span class="_ _11"> </span>referenced<span class="_ _11"> </span>by</span></div><div class="t m5 x29 h26 y2a7 ff7 fs19 fc1 sc0 ls0 ws0">other<span class="_ _13"> </span>modules<span class="_ _3"></span>.<span class="_ _13"> </span>Global<span class="_ _6"> </span>linker<span class="_ _13"> </span>symbols<span class="_ _6"> </span>correspond<span class="_ _13"> </span>to<span class="_ _13"> </span><span class="ffa">nonstatic<span class="_ _6"> </span></span>C<span class="_ _13"> </span>functions<span class="_ _6"> </span>and</div><div class="t m5 x29 h26 y2a8 ff7 fs19 fc1 sc0 ls0 ws0">global<span class="_"> </span>variables<span class="_ _1"></span>.</div><div class="t m5 x75 h3d y780 ff14 fs26 fc6 sc0 ls0 ws0">.</div><div class="t m5 x29 h26 y781 ff7 fs19 fc1 sc0 ls0 ws0">Global<span class="_"> </span>symbols<span class="_ _11"> </span>that<span class="_ _11"> </span>are<span class="_ _11"> </span>referenced<span class="_ _11"> </span>by<span class="_ _11"> </span>module<span class="_"> </span><span class="ff11">m<span class="_ _11"> </span></span>but<span class="_ _11"> </span>deﬁned<span class="_ _11"> </span>by<span class="_ _11"> </span>some<span class="_ _11"> </span>other</div><div class="t m5 x29 h26 y782 ff7 fs19 fc1 sc0 ls0 ws0">module<span class="_ _1"></span>.<span class="_ _f"> </span>Such<span class="_ _21"> </span>symbols<span class="_ _f"> </span>are<span class="_ _21"> </span>called<span class="_ _f"> </span><span class="ffa">externals<span class="_ _21"> </span></span>and<span class="_ _f"> </span>correspond<span class="_ _21"> </span>to<span class="_ _21"> </span>nonstatic<span class="_ _f"> </span>C</div><div class="t m5 x29 h26 y783 ff7 fs19 fc1 sc0 ls0 ws0">functions<span class="_"> </span>and<span class="_"> </span>global<span class="_"> </span>variables<span class="_"> </span>that<span class="_"> </span>are<span class="_"> </span>deﬁned<span class="_"> </span>in<span class="_"> </span>other<span class="_"> </span>modules<span class="_ _1"></span>.</div><div class="t m5 x75 h3d y5ea8 ff14 fs26 fc6 sc0 ls0 ws0">.</div><div class="t m5 x29 h26 y4969 ffa fs19 fc1 sc0 ls0 ws0">Local<span class="_ _6"> </span>symbols<span class="_ _6"> </span><span class="ff7">that<span class="_ _6"> </span>are<span class="_ _13"> </span>deﬁned<span class="_ _a"> </span>and<span class="_ _6"> </span>referenced<span class="_ _6"> </span>exclusively<span class="_ _13"> </span>by<span class="_ _a"> </span>module<span class="_ _6"> </span><span class="ff11">m</span>.<span class="_ _6"> </span>These</span></div><div class="t m5 x29 h26 y574d ff7 fs19 fc1 sc0 ls0 ws0">correspond<span class="_ _13"> </span>to<span class="_ _13"> </span>static<span class="_ _13"> </span>C<span class="_ _13"> </span>functions<span class="_ _13"> </span>and<span class="_ _13"> </span>global<span class="_ _13"> </span>variables<span class="_ _13"> </span>that<span class="_"> </span>are<span class="_ _13"> </span>deﬁned<span class="_ _13"> </span>with<span class="_ _13"> </span>the</div><div class="t m5 x29 h26 y5ea9 ffd fs19 fc1 sc0 ls0 ws0">static<span class="_ _11"> </span><span class="ff7">attribute.<span class="_"> </span>These<span class="_"> </span>symbols<span class="_ _16"> </span>are<span class="_ _11"> </span>visible<span class="_ _11"> </span>anywhere<span class="_ _16"> </span>within<span class="_ _11"> </span>module<span class="_ _16"> </span><span class="ff11">m</span>,<span class="_ _11"> </span>but</span></div><div class="t m5 x29 h26 y5eaa ff7 fs19 fc1 sc0 ls0 ws0">cannot<span class="_"> </span>be<span class="_"> </span>referenced<span class="_"> </span>by<span class="_"> </span>other<span class="_"> </span>modules<span class="_ _1"></span>.</div><div class="t m5 x29 h26 y5eab ff7 fs19 fc1 sc0 ls0 ws0">It<span class="_ _16"> </span>is<span class="_ _11"> </span>important<span class="_ _16"> </span>to<span class="_ _16"> </span>realize<span class="_ _16"> </span>that<span class="_ _11"> </span>local<span class="_ _16"> </span>linker<span class="_ _16"> </span>symbols<span class="_ _16"> </span>are<span class="_ _11"> </span>not<span class="_ _16"> </span>the<span class="_ _16"> </span>same<span class="_ _11"> </span>as<span class="_ _16"> </span>local</div><div class="t m5 x1d h26 y5eac ff7 fs19 fc1 sc0 ls0 ws0">program<span class="_ _14"> </span>variables<span class="_ _1"></span>.<span class="_ _14"> </span>T<span class="_ _1"></span>he<span class="_ _14"> </span>symbol<span class="_ _14"> </span>table<span class="_ _14"> </span>in<span class="_ _14"> </span><span class="ffd">.symtab<span class="_ _14"> </span></span>does<span class="_ _14"> </span>not<span class="_ _14"> </span>contain<span class="_ _14"> </span>any<span class="_ _14"> </span>symbols</div><div class="t m5 x1d h26 y5ead ff7 fs19 fc1 sc0 ls0 ws0">that<span class="_ _11"> </span>correspond<span class="_ _16"> </span>to<span class="_ _11"> </span>local<span class="_ _16"> </span>nonstatic<span class="_ _11"> </span>program<span class="_ _16"> </span>variables<span class="_ _1"></span>.<span class="_ _11"> </span>These<span class="_"> </span>are<span class="_ _16"> </span>managed<span class="_ _11"> </span>at<span class="_ _16"> </span>run</div><div class="t m5 x1d h26 y5eae ff7 fs19 fc1 sc0 ls0 ws0">time<span class="_"> </span>on<span class="_"> </span>the<span class="_"> </span>stack<span class="_"> </span>and<span class="_"> </span>are<span class="_"> </span>not<span class="_"> </span>of<span class="_"> </span>interest<span class="_"> </span>to<span class="_"> </span>the<span class="_"> </span>linker.</div><div class="t m5 x29 h26 y3237 ff7 fs19 fc1 sc0 ls0 ws0">Interestingly<span class="_ _3"></span>,<span class="_ _14"> </span>local<span class="_ _14"> </span>procedure<span class="_ _14"> </span>variables<span class="_ _14"> </span>that<span class="_ _14"> </span>are<span class="_ _14"> </span>deﬁned<span class="_ _14"> </span>with<span class="_ _14"> </span>the<span class="_ _14"> </span>C<span class="_ _14"> </span><span class="ffd">static</span></div><div class="t m5 x1d h26 y3238 ff7 fs19 fc1 sc0 ls0 ws0">attribute<span class="_ _11"> </span>are<span class="_ _16"> </span>not<span class="_ _11"> </span>managed<span class="_ _16"> </span>on<span class="_ _16"> </span>the<span class="_ _11"> </span>stack.<span class="_ _16"> </span>Instead,<span class="_ _11"> </span>the<span class="_ _16"> </span>compiler<span class="_ _11"> </span>allocates<span class="_ _16"> </span>space<span class="_ _16"> </span>in</div><div class="t m5 x1d h26 y5eaf ffd fs19 fc1 sc0 ls0 ws0">.data<span class="_ _10"> </span><span class="ff7">or<span class="_"> </span></span>.bss<span class="_ _10"> </span><span class="ff7">for<span class="_"> </span>each<span class="_"> </span>deﬁnition<span class="_"> </span>and<span class="_"> </span>creates<span class="_"> </span>a<span class="_"> </span>local<span class="_"> </span>linker<span class="_"> </span>symbol<span class="_ _13"> </span>in<span class="_"> </span>the<span class="_"> </span>symbol</span></div><div class="t m5 x1d h26 y5eb0 ff7 fs19 fc1 sc0 ls0 ws0">table<span class="_ _11"> </span>with<span class="_ _16"> </span>a<span class="_ _16"> </span>unique<span class="_ _11"> </span>name.<span class="_ _11"> </span>F<span class="_ _1"></span>or<span class="_ _11"> </span>example,<span class="_ _11"> </span>suppose<span class="_ _16"> </span>a<span class="_ _16"> </span>pair<span class="_ _11"> </span>of<span class="_ _16"> </span>functions<span class="_ _11"> </span>in<span class="_ _16"> </span>the<span class="_ _16"> </span>same</div><div class="t m5 x1d h26 y5eb1 ff7 fs19 fc1 sc0 ls0 ws0">module<span class="_"> </span>deﬁne<span class="_"> </span>a<span class="_"> </span>static<span class="_"> </span>local<span class="_"> </span>variable<span class="_"> </span><span class="ffd">x</span>:</div><div class="t m5 x1f h2d y2b5c ff6 fs20 fc6 sc0 ls0 ws0">1<span class="_ _1c"> </span><span class="ffd fs1e fc2">int<span class="_ _1f"> </span>f()</span></div><div class="t m5 x1f h2d y5eb2 ff6 fs20 fc6 sc0 ls0 ws0">2<span class="_ _1c"> </span><span class="ffd fs1e fc2">{</span></div><div class="t m5 x1f h2d y2350 ff6 fs20 fc6 sc0 ls0 ws0">3<span class="_ _20"> </span><span class="ffd fs1e fc2">static<span class="_ _e"> </span>in<span class="ls33">tx=0<span class="_ _41"></span>;</span></span></div><div class="t m5 x1f h2d y5eb3 ff6 fs20 fc6 sc0 ls0 ws0">4<span class="_ _20"> </span><span class="ffd fs1e fc2">return<span class="_ _e"> </span>x;</span></div><div class="t m5 x1f h2d y301c ff6 fs20 fc6 sc0 ls0 ws0">5<span class="_ _1c"> </span><span class="ffd fs1e fc2">}</span></div><div class="t m5 x1f h2e y301d ff6 fs20 fc6 sc0 ls0 ws0">6</div><div class="t m5 x1f h2e y5eb4 ff6 fs20 fc6 sc0 ls0 ws0">7</div><div class="t m5 x4f h2d y2b68 ffd fs1e fc2 sc0 ls0 ws0">int<span class="_ _e"> </span>g()</div><div class="t m5 x1f h2e y5eb5 ff6 fs20 fc6 sc0 ls0 ws0">8</div><div class="t m5 x4f h2d y301f ffd fs1e fc2 sc0 ls0 ws0">{</div><div class="t m5 x1f h2d y3020 ff6 fs20 fc6 sc0 ls0 ws0">9<span class="_ _20"> </span><span class="ffd fs1e fc2">static<span class="_ _e"> </span>in<span class="ls33">tx=1<span class="_ _41"></span>;</span></span></div><div class="t m5 x1b0 h2d y3c18 ff6 fs20 fc6 sc0 ls0 ws0">10<span class="_ _20"> </span><span class="ffd fs1e fc2">return<span class="_ _e"> </span>x;</span></div><div class="t m5 x1b0 h2d y3023 ff6 fs20 fc6 sc0 ls0 ws0">11<span class="_ _1c"> </span><span class="ffd fs1e fc2">}</span></div><div class="t m5 x1d h26 y55c ff7 fs19 fc2 sc0 ls0 ws0">In<span class="_ _6"> </span>this<span class="_ _6"> </span>case<span class="_ _1"></span>,<span class="_ _13"> </span>the<span class="_ _a"> </span>compiler<span class="_ _6"> </span>exports<span class="_ _6"> </span>a<span class="_ _6"> </span>pair<span class="_ _6"> </span>of<span class="_ _6"> </span>local<span class="_ _6"> </span>linker<span class="_ _6"> </span>symbols<span class="_ _6"> </span>with<span class="_ _6"> </span>different<span class="_ _6"> </span>names</div><div class="t m5 x1d h26 y55d ff7 fs19 fc2 sc0 ls0 ws0">to<span class="_ _13"> </span>the<span class="_ _13"> </span>assembler.<span class="_ _13"> </span>F<span class="_ _3"></span>or<span class="_ _13"> </span>example,<span class="_ _13"> </span>it<span class="_ _13"> </span>might<span class="_ _13"> </span>use<span class="_ _13"> </span><span class="ffd">x.1<span class="_ _13"> </span></span>for<span class="_ _13"> </span>the<span class="_ _13"> </span>deﬁnition<span class="_ _13"> </span>in<span class="_ _13"> </span>function<span class="_ _13"> </span><span class="ffd">f<span class="_ _13"> </span></span>and</div><div class="t m5 x1d h26 y55e ffd fs19 fc2 sc0 ls0 ws0">x.2<span class="_ _10"> </span><span class="ff7">for<span class="_"> </span>the<span class="_"> </span>deﬁnition<span class="_"> </span>in<span class="_"> </span>function<span class="_"> </span></span>g<span class="ff7">.</span></div><div class="t m5 x29 h26 y55f ff7 fs19 fc2 sc0 ls0 ws0">Symbol<span class="_ _6"> </span>tables<span class="_ _13"> </span>are<span class="_ _6"> </span>built<span class="_ _6"> </span>by<span class="_ _13"> </span>assemblers<span class="_ _3"></span>,<span class="_ _13"> </span>using<span class="_ _6"> </span>symbols<span class="_ _13"> </span>exported<span class="_ _a"> </span>by<span class="_ _13"> </span>the<span class="_ _6"> </span>compiler</div><div class="t m5 x1d h26 y560 ff7 fs19 fc2 sc0 ls0 ws0">into<span class="_ _21"> </span>the<span class="_ _f"> </span>assembly-language<span class="_ _f"> </span><span class="ffd">.s<span class="_ _f"> </span></span>ﬁle.<span class="_ _21"> </span>An<span class="_ _f"> </span>ELF<span class="_ _f"> </span>symbol<span class="_ _21"> </span>table<span class="_ _f"> </span>is<span class="_ _f"> </span>contained<span class="_ _f"> </span>in<span class="_ _f"> </span>the</div><div class="t m5 x1d h26 y561 ffd fs19 fc2 sc0 ls0 ws0">.symtab<span class="_ _16"> </span><span class="ff7">section.<span class="_ _16"> </span>It<span class="_ _14"> </span>contains<span class="_ _16"> </span>an<span class="_ _16"> </span>array<span class="_ _14"> </span>of<span class="_ _16"> </span>entries<span class="_ _1"></span>.<span class="_ _14"> </span>F<span class="_ _1"></span>igure<span class="_ _14"> </span>7.4<span class="_ _16"> </span>shows<span class="_ _14"> </span>the<span class="_ _16"> </span>format<span class="_ _16"> </span>of</span></div><div class="t m5 x1d h26 y562 ff7 fs19 fc2 sc0 ls0 ws0">each<span class="_"> </span>entry<span class="_ _3"></span>.</div><div class="t m5 x29 h26 y563 ff7 fs19 fc2 sc0 lsd ws0">Th<span class="_ _2"></span>e<span class="_"> </span><span class="ffd ls0">name<span class="_ _13"> </span><span class="ff7">is<span class="_ _13"> </span>a<span class="_ _6"> </span>byte<span class="_ _13"> </span>offset<span class="_ _6"> </span>into<span class="_ _13"> </span>the<span class="_ _13"> </span>string<span class="_ _6"> </span>table<span class="_ _13"> </span>that<span class="_ _13"> </span>points<span class="_ _6"> </span>to<span class="_ _13"> </span>the<span class="_ _13"> </span>null-terminated</span></span></div><div class="t m5 x1d h26 y564 ff7 fs19 fc2 sc0 ls0 ws0">string<span class="_ _14"> </span>name<span class="_ _15"> </span>of<span class="_ _15"> </span>the<span class="_ _15"> </span>symbol.<span class="_ _14"> </span>The<span class="_ _14"> </span><span class="ffd">value<span class="_ _14"> </span></span>is<span class="_ _15"> </span>the<span class="_ _15"> </span>symbol’s<span class="_ _14"> </span>address<span class="_ _1"></span>.<span class="_ _15"> </span>F<span class="_ _1"></span>or<span class="_ _14"> </span>relocatable</div><div class="t m5 x1d h26 y565 ff7 fs19 fc2 sc0 ls0 ws0">modules<span class="_ _1"></span>,<span class="_ _13"> </span>the<span class="_"> </span><span class="ffd">value<span class="_ _13"> </span></span>is<span class="_ _13"> </span>an<span class="_ _13"> </span>offset<span class="_ _13"> </span>from<span class="_ _13"> </span>the<span class="_"> </span>beginning<span class="_ _13"> </span>of<span class="_ _13"> </span>the<span class="_ _13"> </span>section<span class="_ _13"> </span>where<span class="_ _13"> </span>the<span class="_ _13"> </span>object</div><div class="t m5 x1d h26 y566 ff7 fs19 fc2 sc0 ls0 ws0">is<span class="_"> </span>deﬁned.<span class="_ _11"> </span>F<span class="_ _1"></span>or<span class="_ _11"> </span>executable<span class="_ _11"> </span>object<span class="_"> </span>ﬁles<span class="_ _0"></span>,<span class="_"> </span>the<span class="_ _11"> </span><span class="ffd">value<span class="_ _11"> </span></span>is<span class="_ _11"> </span>an<span class="_ _11"> </span>absolute<span class="_"> </span>run-time<span class="_ _11"> </span>address<span class="_ _1"></span>.</div><div class="t m5 x1d h26 y567 ff7 fs19 fc2 sc0 lsd ws0">Th<span class="_ _2"></span>e<span class="_ _14"> </span><span class="ffd ls0">size<span class="_ _14"> </span><span class="ff7">is<span class="_ _16"> </span>the<span class="_ _16"> </span>size<span class="_ _16"> </span>(in<span class="_ _16"> </span>bytes)<span class="_ _14"> </span>of<span class="_ _16"> </span>the<span class="_ _16"> </span>object.<span class="_ _16"> </span>The<span class="_ _16"> </span></span>type<span class="_ _16"> </span><span class="ff7">is<span class="_ _16"> </span>usually<span class="_ _16"> </span>either<span class="_ _16"> </span></span>data<span class="_ _14"> </span><span class="ff7">or</span></span></div><div class="t m5 x1d h26 y216d ffd fs19 fc2 sc0 ls0 ws0">function<span class="ff7">.<span class="_ _16"> </span>T<span class="_ _0"></span>he<span class="_ _16"> </span>symbol<span class="_ _16"> </span>table<span class="_ _16"> </span>can<span class="_ _14"> </span>also<span class="_ _16"> </span>contain<span class="_ _16"> </span>entries<span class="_ _16"> </span>for<span class="_ _14"> </span>the<span class="_ _16"> </span>individual<span class="_ _16"> </span>sections</span></div></div><div class="pi" data-data='{"ctm":[2.000000,0.000000,0.000000,2.000000,0.000000,0.000000]}'></div></div>
