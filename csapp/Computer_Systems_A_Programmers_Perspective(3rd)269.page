<div id="pf10d" class="pf w2 h11" data-page-no="10d"><div class="pc pc10d w2 h11"><img class="bi x0 y0 w1 h1" alt="" src="csapp/bg10d.png"/><div class="t m5 x14 h28 y9b ffe fs1e fc2 sc0 ls0 ws0">268<span class="_ _1b"> </span><span class="ff6 fs1f">Chapter<span class="_ _10"> </span>3<span class="_ _3d"> </span>Machine-Level<span class="_ _10"> </span>Representation<span class="_ _10"> </span>of<span class="_ _10"> </span>Programs</span></div><div class="t m5 x1f h2d y9c ff6 fs20 fc6 sc0 ls0 ws0">3<span class="_ _45"> </span><span class="ffd fs1e fc2">movl<span class="_ _46"> </span>$65,<span class="_ _e"> </span>%eax</span></div><div class="t m5 x1f h2d y2825 ff6 fs20 fc6 sc0 ls0 ws0">4<span class="_ _1c"> </span><span class="ffd fs1e fc2">.L10:</span></div><div class="t m5 x1f h2d y2826 ff6 fs20 fc6 sc0 ls0 ws0">5<span class="_ _45"> </span><span class="ffd fs1e fc2">movq<span class="_ _46"> </span>%rdi,<span class="_ _e"> </span>%rcx</span></div><div class="t m5 x1f h2e yecc ff6 fs20 fc6 sc0 ls0 ws0">6</div><div class="t m5 x10d h2d y249b ffd fs1e fc2 sc0 ls0 ws0">andl<span class="_ _46"> </span>$1,<span class="_ _e"> </span>%ecx</div><div class="t m5 x1f h2d yecd ff6 fs20 fc6 sc0 ls0 ws0">7<span class="_ _45"> </span><span class="ffd fs1e fc2">addq<span class="_ _46"> </span>%rax,<span class="_ _e"> </span>%rax</span></div><div class="t m5 x1f h2d y2827 ff6 fs20 fc6 sc0 ls0 ws0">8<span class="_ _45"> </span><span class="ffd fs1e fc2">orq<span class="_ _8c"> </span>%rcx,<span class="_ _e"> </span>%rax</span></div><div class="t m5 x1f h2d y24a1 ff6 fs20 fc6 sc0 ls0 ws0">9<span class="_ _45"> </span><span class="ffd fs1e fc2">shrq<span class="_ _46"> </span>%rdi<span class="_ _c2"> </span></span><span class="ff13 fs35">Shift<span class="_ _f"> </span>right<span class="_ _f"> </span>by<span class="_ _f"> </span>1</span></div><div class="t m5 x1b0 h2d yed0 ff6 fs20 fc6 sc0 ls0 ws0">10<span class="_ _45"> </span><span class="ffd fs1e fc2">addq<span class="_ _46"> </span>$1,<span class="_ _e"> </span>%rdx</span></div><div class="t m5 x1b0 h2d y1a10 ff6 fs20 fc6 sc0 ls0 ws0">11<span class="_ _45"> </span><span class="ffd fs1e fc2">jne<span class="_ _8c"> </span>.L10</span></div><div class="t m5 x1b0 h2d y2828 ff6 fs20 fc6 sc0 ls0 ws0">12<span class="_ _45"> </span><span class="ffd fs1e fc2">rep;<span class="_ _e"> </span>ret</span></div><div class="t m5 x29 h26 y2829 ff7 fs19 fc2 sc0 ls0 ws0">Reverse<span class="_"> </span>engineer<span class="_"> </span>the<span class="_"> </span>operation<span class="_"> </span>of<span class="_"> </span>this<span class="_"> </span>code<span class="_"> </span>and<span class="_"> </span>then<span class="_"> </span>do<span class="_"> </span>the<span class="_"> </span>following:</div><div class="t m5 x124 h26 y282a ff7 fs19 fc2 sc0 ls0 ws0">A.<span class="_ _1f"> </span>Use<span class="_"> </span>the<span class="_"> </span>assembly-code<span class="_"> </span>version<span class="_"> </span>to<span class="_"> </span>ﬁll<span class="_"> </span>in<span class="_"> </span>the<span class="_"> </span>missing<span class="_"> </span>parts<span class="_"> </span>of<span class="_"> </span>the<span class="_"> </span>C<span class="_"> </span>code<span class="_ _1"></span>.</div><div class="t m5 x124 h26 y282b ff7 fs19 fc2 sc0 ls0 ws0">B<span class="_ _3"></span>.<span class="_ _1d"> </span>Explain<span class="_ _13"> </span>why<span class="_ _13"> </span>there<span class="_ _13"> </span>is<span class="_ _6"> </span>neither<span class="_ _13"> </span>an<span class="_ _13"> </span>initial<span class="_ _6"> </span>test<span class="_ _13"> </span>before<span class="_ _13"> </span>the<span class="_ _13"> </span>loop<span class="_ _6"> </span>nor<span class="_ _13"> </span>an<span class="_ _13"> </span>initial<span class="_ _13"> </span>jump</div><div class="t m5 x4f h26 y282c ff7 fs19 fc2 sc0 ls0 ws0">to<span class="_"> </span>the<span class="_"> </span>test<span class="_"> </span>portion<span class="_"> </span>of<span class="_"> </span>the<span class="_"> </span>loop<span class="_ _1"></span>.</div><div class="t m5 x124 h26 y282d ff7 fs19 fc2 sc0 ls0 ws0">C.<span class="_ _25"> </span>Describe<span class="_"> </span>in<span class="_"> </span>English<span class="_"> </span>what<span class="_"> </span>this<span class="_"> </span>function<span class="_"> </span>computes<span class="_ _1"></span>.</div><div class="t m5 x1d h47 y282e ffe fs2b fc1 sc0 ls0 ws0">Practice<span class="_"> </span>Problem<span class="_"> </span>3.29<span class="_ _1f"> </span><span class="fs16">(solution<span class="_"> </span>page<span class="_"> </span>373)</span></div><div class="t m5 x1d h26 y282f ff7 fs19 fc1 sc0 ls0 ws0">Executing<span class="_ _11"> </span>a<span class="_ _16"> </span><span class="ffd">continue<span class="_ _11"> </span></span>statement<span class="_ _16"> </span>in<span class="_ _11"> </span>C<span class="_ _11"> </span>causes<span class="_ _16"> </span>the<span class="_ _11"> </span>program<span class="_ _16"> </span>to<span class="_ _11"> </span>jump<span class="_ _16"> </span>to<span class="_ _11"> </span>the<span class="_ _11"> </span>end<span class="_ _16"> </span>of</div><div class="t m5 x1d h26 y2830 ff7 fs19 fc1 sc0 ls0 ws0">the<span class="_"> </span>current<span class="_"> </span>loop<span class="_"> </span>iteration.<span class="_"> </span>T<span class="_ _0"></span>he<span class="_"> </span>stated<span class="_"> </span>rule<span class="_"> </span>for<span class="_"> </span>translating<span class="_"> </span>a<span class="_"> </span><span class="ffd">for<span class="_ _11"> </span></span>loop<span class="_"> </span>into<span class="_"> </span>a<span class="_"> </span><span class="ffd">while</span></div><div class="t m5 x1d h26 y2831 ff7 fs19 fc1 sc0 ls0 ws0">loop<span class="_ _6"> </span>needs<span class="_ _6"> </span>some<span class="_ _6"> </span>reﬁnement<span class="_ _6"> </span>when<span class="_ _6"> </span>dealing<span class="_ _6"> </span>with<span class="_ _6"> </span><span class="ffd">continue<span class="_ _6"> </span></span>statements<span class="_ _1"></span>.<span class="_ _6"> </span>F<span class="_ _1"></span>or<span class="_ _6"> </span>example,</div><div class="t m5 x1d h26 y2832 ff7 fs19 fc1 sc0 ls0 ws0">consider<span class="_"> </span>the<span class="_"> </span>following<span class="_"> </span>code:</div><div class="t m5 x10c h2d y2833 ffd fs1e fc2 sc0 ls0 ws0">/*<span class="_ _e"> </span>Example<span class="_ _1f"> </span>of<span class="_ _1f"> </span>for<span class="_ _e"> </span>loop<span class="_ _1f"> </span>containing<span class="_ _e"> </span>a<span class="_ _1f"> </span>continue<span class="_ _1f"> </span>statement<span class="_ _e"> </span>*/</div><div class="t m5 x10c h2d y2834 ffd fs1e fc2 sc0 ls0 ws0">/*<span class="_ _e"> </span>Sum<span class="_ _1f"> </span>even<span class="_ _1f"> </span>numbers<span class="_ _e"> </span>between<span class="_ _1f"> </span>0<span class="_ _e"> </span>and<span class="_ _1f"> </span>9<span class="_ _1f"> </span>*/</div><div class="t m5 x10c h2d y2835 ffd fs1e fc2 sc0 ls0 ws0">long<span class="_ _e"> </span>sum<span class="_ _1f"> </span>=<span class="_ _1f"> </span>0;</div><div class="t m5 x10c h2d y2836 ffd fs1e fc2 sc0 ls0 ws0">long<span class="_ _e"> </span>i;</div><div class="t m5 x10c h2d y2837 ffd fs1e fc2 sc0 ls0 ws0">for<span class="_ _e"> </span>(i<span class="_ _1f"> </span>=<span class="_ _1f"> </span>0;<span class="_ _e"> </span>i<span class="_ _1f"> </span>&lt;<span class="_ _e"> </span>10;<span class="_ _1f"> </span>i++)<span class="_ _1f"> </span>{</div><div class="t m5 x22b h2d y2838 ffd fs1e fc2 sc0 ls0 ws0">if<span class="_ _e"> </span>(i<span class="_ _1f"> </span>&amp;<span class="_ _1f"> </span>1)</div><div class="t m5 x218 h2d y2839 ffd fs1e fc2 sc0 ls0 ws0">continue;</div><div class="t m5 x22b h2d y283a ffd fs1e fc2 sc0 ls0 ws0">sum<span class="_ _e"> </span>+=<span class="_ _1f"> </span>i;</div><div class="t m5 x10c h2d y283b ffd fs1e fc2 sc0 ls0 ws0">}</div><div class="t m5 x124 h26 y283c ff7 fs19 fc2 sc0 ls0 ws0">A.<span class="_ _1f"> </span>What<span class="_ _6"> </span>would<span class="_ _13"> </span>we<span class="_ _13"> </span>get<span class="_ _13"> </span>if<span class="_ _6"> </span>we<span class="_ _13"> </span>naively<span class="_ _13"> </span>applied<span class="_ _6"> </span>our<span class="_ _13"> </span>rule<span class="_ _13"> </span>for<span class="_ _13"> </span>translating<span class="_ _6"> </span>the<span class="_ _13"> </span><span class="ffd">for<span class="_ _13"> </span></span>loop</div><div class="t m5 x4f h26 y283d ff7 fs19 fc2 sc0 ls0 ws0">into<span class="_"> </span>a<span class="_"> </span><span class="ffd">while<span class="_ _10"> </span></span>loop?<span class="_"> </span>What<span class="_"> </span>would<span class="_"> </span>be<span class="_"> </span>wrong<span class="_"> </span>with<span class="_"> </span>this<span class="_"> </span>code?</div><div class="t m5 x124 h26 y283e ff7 fs19 fc2 sc0 ls0 ws0">B<span class="_ _3"></span>.<span class="_ _1d"> </span>How<span class="_ _14"> </span>could<span class="_ _16"> </span>you<span class="_ _16"> </span>replace<span class="_ _14"> </span>the<span class="_ _16"> </span><span class="ffd">continue<span class="_ _14"> </span></span>statement<span class="_ _16"> </span>with<span class="_ _16"> </span>a<span class="_ _14"> </span><span class="ffd">goto<span class="_ _16"> </span></span>statement<span class="_ _14"> </span>to</div><div class="t m5 x4f h26 y283f ff7 fs19 fc2 sc0 ls0 ws0">ensure<span class="_ _6"> </span>that<span class="_ _13"> </span>the<span class="_ _6"> </span><span class="ffd">while<span class="_ _13"> </span></span>loop<span class="_ _6"> </span>correctly<span class="_ _13"> </span>duplicates<span class="_ _6"> </span>the<span class="_ _13"> </span>behavior<span class="_ _6"> </span>of<span class="_ _13"> </span>the<span class="_ _6"> </span><span class="ffd">for<span class="_ _13"> </span></span>loop?</div><div class="t m5 x1d h41 y8d5 ffe fs29 fc1 sc0 ls0 ws0">3.6.8<span class="_ _48"> </span><span class="fs19">Switch<span class="_"> </span>Statements</span></div><div class="t m5 x1d h26 y8d6 ff7 fs19 fc1 sc0 ls0 ws0">A<span class="_ _13"> </span><span class="ffd">switch<span class="_ _10"> </span></span>statement<span class="_ _13"> </span>provides<span class="_"> </span>a<span class="_ _13"> </span>multiway<span class="_"> </span>branching<span class="_ _13"> </span>capability<span class="_ _13"> </span>based<span class="_"> </span>on<span class="_ _13"> </span>the<span class="_"> </span>value</div><div class="t m5 x1d h26 y8d7 ff7 fs19 fc1 sc0 ls0 ws0">of<span class="_ _16"> </span>an<span class="_ _14"> </span>integer<span class="_ _16"> </span>index.<span class="_ _14"> </span>T<span class="_ _1"></span>hey<span class="_ _14"> </span>are<span class="_ _16"> </span>particularly<span class="_ _14"> </span>useful<span class="_ _14"> </span>when<span class="_ _16"> </span>dealing<span class="_ _14"> </span>with<span class="_ _16"> </span>tests<span class="_ _14"> </span>where</div></div><div class="pi" data-data='{"ctm":[2.000000,0.000000,0.000000,2.000000,0.000000,0.000000]}'></div></div>
