<div id="pf2d1" class="pf w2 h11" data-page-no="2d1"><div class="pc pc2d1 w2 h11"><img class="bi x0 y0 w1 h1" alt="" src="csapp/bg2d1.png"/><div class="t m5 x14 h28 y9b ffe fs1e fc2 sc0 ls0 ws0">720<span class="_ _1b"> </span><span class="ff6 fs1f">Chapter<span class="_ _10"> </span>7<span class="_ _3d"> </span>Linking</span></div><div class="t m5 x1d h47 yb1f ffe fs2b fc1 sc0 ls0 ws0">Practice<span class="_"> </span>Problem<span class="_"> </span>7.2<span class="_ _1f"> </span><span class="fs16">(solution<span class="_"> </span>page<span class="_"> </span>754)</span></div><div class="t m5 x1d h46 yb20 ff7 fs19 fc1 sc0 ls0 ws0">In<span class="_ _11"> </span>this<span class="_ _16"> </span>problem,<span class="_ _16"> </span>let<span class="_ _11"> </span><span class="ffd">REF<span class="ff11">(</span>x<span class="ff11">.</span>i<span class="ff11">)<span class="_ _13"> </span><span class="ff12">→<span class="_ _10"> </span></span></span>DEF<span class="ff11">(</span>x<span class="ff11">.</span>k<span class="ff11">)<span class="_ _11"> </span></span></span>denote<span class="_ _16"> </span>that<span class="_ _11"> </span>the<span class="_ _16"> </span>linker<span class="_ _16"> </span>will<span class="_ _11"> </span>associate<span class="_ _16"> </span>an</div><div class="t m5 x1d h26 yb21 ff7 fs19 fc1 sc0 ls0 ws0">arbitrary<span class="_ _16"> </span>reference<span class="_ _14"> </span>to<span class="_ _16"> </span>symbol<span class="_ _14"> </span><span class="ffd">x<span class="_ _16"> </span></span>in<span class="_ _14"> </span>module<span class="_ _16"> </span><span class="ffd">i<span class="_ _14"> </span></span>to<span class="_ _16"> </span>the<span class="_ _16"> </span>deﬁnition<span class="_ _14"> </span>of<span class="_ _14"> </span><span class="ffd">x<span class="_ _16"> </span></span>in<span class="_ _16"> </span>module<span class="_ _14"> </span><span class="ffd">k</span>.</div><div class="t m5 x1d h26 yb22 ff7 fs19 fc1 sc0 ls0 ws0">F<span class="_ _1"></span>or<span class="_"> </span>each<span class="_"> </span>example<span class="_"> </span>that<span class="_ _13"> </span>follows<span class="_ _1"></span>,<span class="_"> </span>use<span class="_"> </span>this<span class="_"> </span>notation<span class="_"> </span>to<span class="_"> </span>indicate<span class="_"> </span>how<span class="_ _13"> </span>the<span class="_"> </span>linker<span class="_"> </span>would</div><div class="t m5 x1d h26 yba3 ff7 fs19 fc1 sc0 ls0 ws0">resolve<span class="_ _14"> </span>references<span class="_ _14"> </span>to<span class="_ _14"> </span>the<span class="_ _14"> </span>multiply-deﬁned<span class="_ _14"> </span>symbol<span class="_ _14"> </span>in<span class="_ _14"> </span>each<span class="_ _14"> </span>module<span class="_ _1"></span>.<span class="_ _14"> </span>If<span class="_ _14"> </span>there<span class="_ _14"> </span>is<span class="_ _14"> </span>a</div><div class="t m5 x1d h26 y1656 ff7 fs19 fc1 sc0 ls0 ws0">link-time<span class="_"> </span>error<span class="_ _13"> </span>(rule<span class="_"> </span>1),<span class="_"> </span>write<span class="_ _13"> </span>“<span class="ff9">error</span>”.<span class="_"> </span>If<span class="_ _13"> </span>the<span class="_"> </span>linker<span class="_"> </span>arbitrarily<span class="_ _13"> </span>chooses<span class="_"> </span>one<span class="_"> </span>of<span class="_ _13"> </span>the</div><div class="t m5 x1d h26 y5f75 ff7 fs19 fc1 sc0 ls0 ws0">deﬁnitions<span class="_"> </span>(rule<span class="_"> </span>3),<span class="_"> </span>write<span class="_"> </span>“<span class="ff9">unkno<span class="_ _0"></span>wn<span class="ff7">”.</span></span></div><div class="t m5 x124 h26 y5f76 ff7 fs19 fc1 sc0 ls0 ws0">A.</div><div class="t m5 x4f h2d y18a6 ffd fs1e fc2 sc0 ls0 ws0">/*<span class="_ _e"> </span>Module<span class="_ _1f"> </span>1<span class="_ _1f"> </span>*/<span class="_ _86"> </span>/*<span class="_ _e"> </span>Module<span class="_ _1f"> </span>2<span class="_ _e"> </span>*/</div><div class="t m5 x4f h2d y5f77 ffd fs1e fc2 sc0 ls0 ws0">int<span class="_ _e"> </span>main()<span class="_ _16f"> </span>int<span class="_ _e"> </span>main;</div><div class="t m5 x4f h2d y5f78 ffd fs1e fc2 sc0 ls0 ws0">{<span class="_ _129"> </span>int<span class="_ _e"> </span>p2()</div><div class="t m5 x4f h2d y5f79 ffd fs1e fc2 sc0 ls273 ws0">}{</div><div class="t m5 xa7 h2d y5f7a ffd fs1e fc2 sc0 ls0 ws0">}</div><div class="t m5 x4f h46 y5f7b ff7 fs19 fc2 sc0 ls0 ws0">(a)<span class="_ _1d"> </span><span class="ffd">REF<span class="ff11">(</span>main<span class="_ _2"></span><span class="ff11">.</span>1<span class="_ _1"></span><span class="ff11">)<span class="_ _13"> </span><span class="ff12">→<span class="_ _10"> </span><span class="ffd">DEF</span></span>(</span></span></div><div class="t m5 x40 h45 y5f7c ff11 fs19 fc1 sc0 ls0 ws0">.<span class="_ _2c"> </span>)</div><div class="t m5 x4f h46 y5f7d ff7 fs19 fc1 sc0 ls0 ws0">(b)<span class="_ _24"> </span><span class="ffd">REF<span class="ff11">(</span>main<span class="ff11">.</span>2<span class="ff11">)<span class="_ _13"> </span><span class="ff12">→<span class="_ _10"> </span></span></span>DEF<span class="ff11">(</span></span></div><div class="t m5 x40 h45 y5f7e ff11 fs19 fc1 sc0 ls0 ws0">.<span class="_ _2c"> </span>)</div><div class="t m5 x124 h26 y5f7f ff7 fs19 fc1 sc0 ls2a ws0">B.</div><div class="t m5 x4f h2d y5f80 ffd fs1e fc2 sc0 ls0 ws0">/*<span class="_ _e"> </span>Module<span class="_ _1f"> </span>1<span class="_ _1f"> </span>*/<span class="_ _86"> </span>/*<span class="_ _e"> </span>Module<span class="_ _1f"> </span>2<span class="_ _e"> </span>*/</div><div class="t m5 x4f h2d y5f81 ffd fs1e fc2 sc0 ls0 ws0">void<span class="_ _e"> </span>main()<span class="_ _da"> </span>int<span class="_ _e"> </span>main<span class="_ _1f"> </span>=<span class="_ _e"> </span>1;</div><div class="t m5 x4f h2d y5f82 ffd fs1e fc2 sc0 ls0 ws0">{<span class="_ _34"> </span>int<span class="_ _1f"> </span>p2()</div><div class="t m5 x4f h2d y5f83 ffd fs1e fc2 sc0 ls274 ws0">}{</div><div class="t m5 x185 h2d y5f84 ffd fs1e fc2 sc0 ls0 ws0">}</div><div class="t m5 x4f h46 y5f85 ff7 fs19 fc2 sc0 ls0 ws0">(a)<span class="_ _1d"> </span><span class="ffd">REF<span class="ff11">(</span>main<span class="_ _2"></span><span class="ff11">.</span>1<span class="_ _1"></span><span class="ff11">)<span class="_ _13"> </span><span class="ff12">→<span class="_ _10"> </span><span class="ffd">DEF</span></span>(<span class="_ _147"> </span><span class="fc1">.<span class="_ _2c"> </span>)</span></span></span></div><div class="t m5 x4f h46 y5f86 ff7 fs19 fc1 sc0 ls0 ws0">(b)<span class="_ _24"> </span><span class="ffd">REF<span class="ff11">(</span>main<span class="ff11">.</span>2<span class="ff11">)<span class="_ _13"> </span><span class="ff12">→<span class="_ _10"> </span></span></span>DEF<span class="ff11">(</span></span></div><div class="t m5 x40 h45 y5f87 ff11 fs19 fc1 sc0 ls0 ws0">.<span class="_ _2c"> </span>)</div><div class="t m5 x124 h26 y5f88 ff7 fs19 fc1 sc0 ls22 ws0">C.</div><div class="t m5 x4f h2d y5f89 ffd fs1e fc2 sc0 ls0 ws0">/*<span class="_ _e"> </span>Module<span class="_ _1f"> </span>1<span class="_ _1f"> </span>*/<span class="_ _86"> </span>/*<span class="_ _e"> </span>Module<span class="_ _1f"> </span>2<span class="_ _e"> </span>*/</div><div class="t m5 x4f h2d y5f8a ffd fs1e fc2 sc0 ls0 ws0">int<span class="_ _e"> </span>x;<span class="_ _d9"> </span>double<span class="_ _1f"> </span>x<span class="_ _e"> </span>=<span class="_ _1f"> </span>1.0;</div><div class="t m5 x4f h2d y5f8b ffd fs1e fc2 sc0 ls0 ws0">void<span class="_ _e"> </span>main()<span class="_ _da"> </span>int<span class="_ _e"> </span>p2()</div><div class="t m5 x4f h2d y5f8c ffd fs1e fc2 sc0 ls274 ws0">{{</div><div class="t m5 x4f h2d y5f8d ffd fs1e fc2 sc0 ls274 ws0">}}</div><div class="t m5 x4f h46 y5f8e ff7 fs19 fc2 sc0 ls0 ws0">(a)<span class="_ _1d"> </span><span class="ffd">REF<span class="ff11">(</span>x<span class="ff11">.</span>1<span class="_ _1"></span><span class="ff11">)<span class="_ _10"> </span><span class="ff12">→<span class="_ _13"> </span><span class="ffd">DEF</span></span>(<span class="_ _117"> </span><span class="fc1">.<span class="_ _2c"> </span>)</span></span></span></div><div class="t m5 x4f h46 y5f8f ff7 fs19 fc1 sc0 ls0 ws0">(b)<span class="_ _24"> </span><span class="ffd">REF<span class="ff11">(</span>x<span class="ff11">.</span>2<span class="_ _0"></span><span class="ff11">)<span class="_ _13"> </span><span class="ff12">→<span class="_ _10"> </span><span class="ffd">DEF</span></span>(</span></span></div><div class="t m5 x139 h45 y5f90 ff11 fs19 fc1 sc0 ls0 ws0">.<span class="_ _2c"> </span>)</div><div class="t m5 x1d h41 y2441 ffe fs29 fc1 sc0 ls0 ws0">7.6.2<span class="_ _48"> </span><span class="fs19">Linking<span class="_"> </span>with<span class="_"> </span>Static<span class="_"> </span>Libraries</span></div><div class="t m5 x1d h26 yec2 ff7 fs19 fc1 sc0 ls0 ws0">So<span class="_ _6"> </span>far,<span class="_ _13"> </span>we<span class="_ _6"> </span>have<span class="_ _13"> </span>assumed<span class="_ _a"> </span>that<span class="_ _13"> </span>the<span class="_ _6"> </span>linker<span class="_ _13"> </span>reads<span class="_ _6"> </span>a<span class="_ _6"> </span>collection<span class="_ _13"> </span>of<span class="_ _6"> </span>relocatable<span class="_ _13"> </span>object<span class="_ _6"> </span>ﬁles</div><div class="t m5 x1d h26 yec3 ff7 fs19 fc1 sc0 ls0 ws0">and<span class="_ _13"> </span>links<span class="_ _13"> </span>them<span class="_"> </span>together<span class="_ _13"> </span>into<span class="_ _13"> </span>an<span class="_ _13"> </span>output<span class="_ _13"> </span>executable<span class="_"> </span>ﬁle<span class="_ _1"></span>.<span class="_ _13"> </span>In<span class="_ _13"> </span>practice,<span class="_ _13"> </span>all<span class="_ _13"> </span>compilation</div><div class="t m5 x1d h26 yec4 ff7 fs19 fc1 sc0 ls0 ws0">systems<span class="_"> </span>provide<span class="_ _11"> </span>a<span class="_ _11"> </span>mechanism<span class="_"> </span>for<span class="_ _11"> </span>packaging<span class="_ _11"> </span>related<span class="_ _11"> </span>object<span class="_"> </span>modules<span class="_ _11"> </span>into<span class="_ _11"> </span>a<span class="_"> </span>single</div><div class="t m5 x1d h26 yec5 ff7 fs19 fc1 sc0 ls0 ws0">ﬁle<span class="_"> </span>called<span class="_ _13"> </span>a<span class="_"> </span><span class="ffa">static<span class="_"> </span>library</span>,<span class="_"> </span>which<span class="_ _13"> </span>can<span class="_"> </span>then<span class="_"> </span>be<span class="_"> </span>supplied<span class="_ _13"> </span>as<span class="_"> </span>input<span class="_"> </span>to<span class="_ _13"> </span>the<span class="_"> </span>linker.<span class="_"> </span>W<span class="_ _1"></span>hen</div><div class="t m5 x1d h26 yec6 ff7 fs19 fc1 sc0 ls0 ws0">it<span class="_ _11"> </span>builds<span class="_ _16"> </span>the<span class="_ _16"> </span>output<span class="_ _11"> </span>executable,<span class="_ _11"> </span>the<span class="_ _16"> </span>linker<span class="_ _11"> </span>copies<span class="_ _16"> </span>only<span class="_ _16"> </span>the<span class="_ _11"> </span>object<span class="_ _16"> </span>modules<span class="_ _16"> </span>in<span class="_ _11"> </span>the</div><div class="t m5 x1d h26 yec7 ff7 fs19 fc1 sc0 ls0 ws0">library<span class="_"> </span>that<span class="_"> </span>are<span class="_"> </span>referenced<span class="_"> </span>by<span class="_"> </span>the<span class="_"> </span>application<span class="_"> </span>program.</div><div class="t m5 x29 h26 yec8 ff7 fs19 fc1 sc0 ls0 ws0">Why<span class="_ _16"> </span>do<span class="_ _14"> </span>systems<span class="_ _14"> </span>support<span class="_ _16"> </span>the<span class="_ _14"> </span>notion<span class="_ _14"> </span>of<span class="_ _14"> </span>libraries?<span class="_ _14"> </span>Consider<span class="_ _14"> </span>ISO<span class="_ _16"> </span>C99,<span class="_ _15"> </span>which</div><div class="t m5 x1d h26 yec9 ff7 fs19 fc1 sc0 ls0 ws0">deﬁnes<span class="_ _11"> </span>an<span class="_ _16"> </span>extensive<span class="_ _11"> </span>collection<span class="_ _11"> </span>of<span class="_ _16"> </span>standard<span class="_ _11"> </span>I/O<span class="_ _3"></span>,<span class="_ _16"> </span>string<span class="_ _11"> </span>manipulation,<span class="_ _16"> </span>and<span class="_ _11"> </span>integer</div><div class="t m5 x1d h26 yeca ff7 fs19 fc1 sc0 ls0 ws0">math<span class="_ _13"> </span>functions<span class="_ _6"> </span>such<span class="_ _13"> </span>as<span class="_ _13"> </span><span class="ffd">atoi</span>,<span class="_ _13"> </span><span class="ffd">printf</span>,<span class="_ _13"> </span><span class="ffd">scanf</span>,<span class="_ _13"> </span><span class="ffd">strcpy</span>,<span class="_ _13"> </span>and<span class="_ _13"> </span><span class="ffd">rand</span>.<span class="_ _6"> </span>They<span class="_ _6"> </span>are<span class="_ _13"> </span>available</div></div><div class="pi" data-data='{"ctm":[2.000000,0.000000,0.000000,2.000000,0.000000,0.000000]}'></div></div>
