<div id="pfcd" class="pf w2 h11" data-page-no="cd"><div class="pc pccd w2 h11"><img class="bi x0 y0 w1 h1" alt="" src="csapp/bgcd.png"/><div class="t m5 x14 h28 y9b ffe fs1e fc2 sc0 ls0 ws0">204<span class="_ _1b"> </span><span class="ff6 fs1f">Chapter<span class="_ _10"> </span>3<span class="_ _3d"> </span>Machine-Level<span class="_ _10"> </span>Representation<span class="_ _10"> </span>of<span class="_ _10"> </span>Programs</span></div><div class="t m5 xcd h26 y9c ff7 fs19 fc2 sc0 ls0 ws0">went<span class="_"> </span>up<span class="_ _13"> </span>to<span class="_"> </span>24<span class="_ _13"> </span>M<span class="_"> </span>transistors<span class="_ _3"></span>,<span class="_"> </span>due<span class="_"> </span>to<span class="_ _13"> </span>the<span class="_"> </span>incorporation<span class="_"> </span>of<span class="_ _13"> </span>the<span class="_"> </span>level-2<span class="_"> </span>cache</div><div class="t m5 xcd h26 y409 ff7 fs19 fc2 sc0 ls0 ws0">on<span class="_"> </span>chip<span class="_ _1"></span>.</div><div class="t m5 x75 h26 y2033 ff7 fs19 fc2 sc0 ls0 ws0">Pentium<span class="_ _16"> </span>4<span class="_ _11"> </span>(2000,<span class="_ _16"> </span>42<span class="_ _13"> </span>M<span class="_ _16"> </span>transistors).<span class="_ _1f"> </span>Extended<span class="_ _11"> </span>SSE<span class="_ _16"> </span>to<span class="_ _16"> </span>SSE2,<span class="_ _16"> </span>adding<span class="_ _16"> </span>new<span class="_ _11"> </span>data</div><div class="t m5 xcd h26 y2034 ff7 fs19 fc2 sc0 ls0 ws0">types<span class="_"> </span>(including<span class="_"> </span>double-precision<span class="_"> </span>ﬂoating<span class="_ _11"> </span>point),<span class="_"> </span>along<span class="_ _11"> </span>with<span class="_"> </span>144<span class="_"> </span>new<span class="_"> </span>in-</div><div class="t m5 xcd h26 y2035 ff7 fs19 fc2 sc0 ls0 ws0">structions<span class="_ _6"> </span>for<span class="_ _13"> </span>these<span class="_ _6"> </span>formats<span class="_ _1"></span>.<span class="_ _13"> </span>W<span class="_ _1"></span>ith<span class="_ _13"> </span>these<span class="_ _6"> </span>extensions<span class="_ _1"></span>,<span class="_ _13"> </span>compilers<span class="_ _6"> </span>can<span class="_ _13"> </span>use<span class="_ _6"> </span>SSE</div><div class="t m5 xcd h26 ya1 ff7 fs19 fc2 sc0 ls0 ws0">instructions<span class="_ _1"></span>,<span class="_"> </span>rather<span class="_"> </span>than<span class="_"> </span>x87<span class="_"> </span>instructions<span class="_ _1"></span>,<span class="_"> </span>to<span class="_"> </span>compile<span class="_"> </span>ﬂoating-point<span class="_"> </span>code<span class="_ _0"></span>.</div><div class="t m5 x75 h26 y2036 ff7 fs19 fc2 sc0 ls0 ws0">Pentium<span class="_ _13"> </span>4E<span class="_"> </span>(2004,<span class="_ _13"> </span>125<span class="_ _13"> </span>M<span class="_"> </span>transistors).<span class="_ _e"> </span>Added<span class="_ _13"> </span><span class="ffa">hyperthreading<span class="_ _2"></span></span>,<span class="_"> </span>a<span class="_ _13"> </span>method<span class="_ _13"> </span>to<span class="_"> </span>run</div><div class="t m5 xcd h26 y2037 ff7 fs19 fc2 sc0 ls0 ws0">two<span class="_ _16"> </span>programs<span class="_ _14"> </span>simultaneously<span class="_ _14"> </span>on<span class="_ _14"> </span>a<span class="_ _14"> </span>single<span class="_ _16"> </span>processor,<span class="_ _14"> </span>as<span class="_ _14"> </span>well<span class="_ _14"> </span>as<span class="_ _14"> </span>EM64T<span class="_ _3"></span>,</div><div class="t m5 xcd h26 y2038 ff7 fs19 fc2 sc0 ls0 ws0">Intel’s<span class="_ _11"> </span>implementation<span class="_ _16"> </span>of<span class="_ _16"> </span>a<span class="_ _16"> </span>64-bit<span class="_ _16"> </span>extension<span class="_ _16"> </span>to<span class="_ _16"> </span>IA32<span class="_ _16"> </span>developed<span class="_ _16"> </span>by<span class="_ _16"> </span>Ad-</div><div class="t m5 xcd h26 y2039 ff7 fs19 fc2 sc0 ls0 ws0">vanced<span class="_"> </span>Micro<span class="_"> </span>Devices<span class="_"> </span>(AMD),<span class="_"> </span>which<span class="_"> </span>we<span class="_"> </span>refer<span class="_"> </span>to<span class="_"> </span>as<span class="_"> </span>x86-64.</div><div class="t m5 x75 h26 y203a ff7 fs19 fc2 sc0 ls0 ws0">Core<span class="_ _14"> </span>2<span class="_ _16"> </span>(2006,<span class="_ _15"> </span>291<span class="_ _13"> </span>M<span class="_ _14"> </span>transistors).<span class="_ _1f"> </span>Returned<span class="_ _16"> </span>to<span class="_ _14"> </span>a<span class="_ _14"> </span>microarchitecture<span class="_ _14"> </span>similar<span class="_ _14"> </span>to</div><div class="t m5 xcd h26 y203b ff7 fs19 fc2 sc0 ls0 ws0">P6.<span class="_ _11"> </span>F<span class="_ _0"></span>irst<span class="_ _11"> </span><span class="ffa">multi-core<span class="_ _16"> </span></span>Intel<span class="_ _11"> </span>microprocessor,<span class="_ _11"> </span>where<span class="_ _11"> </span>multiple<span class="_ _11"> </span>processors<span class="_ _16"> </span>are</div><div class="t m5 xcd h26 y203c ff7 fs19 fc2 sc0 ls0 ws0">implemented<span class="_"> </span>on<span class="_"> </span>a<span class="_"> </span>single<span class="_"> </span>chip<span class="_ _1"></span>.<span class="_"> </span>Did<span class="_"> </span>not<span class="_"> </span>support<span class="_"> </span>hyperthreading.</div><div class="t m5 x75 h26 y203d ff7 fs19 fc2 sc0 ls0 ws0">Core<span class="_ _13"> </span>i7,<span class="_ _13"> </span>Nehalem<span class="_ _13"> </span>(2008,<span class="_ _13"> </span>781<span class="_ _13"> </span>M<span class="_ _6"> </span>transistors).<span class="_ _1f"> </span>Incorporated<span class="_ _13"> </span>both<span class="_ _13"> </span>hyperthreading</div><div class="t m5 xcd h26 y203e ff7 fs19 fc2 sc0 ls0 ws0">and<span class="_ _21"> </span>multi-core<span class="_ _1"></span>,<span class="_ _e"> </span>with<span class="_ _15"> </span>the<span class="_ _21"> </span>initial<span class="_ _21"> </span>version<span class="_ _21"> </span>supporting<span class="_ _21"> </span>two<span class="_ _21"> </span>executing<span class="_ _21"> </span>pro-</div><div class="t m5 xcd h26 y203f ff7 fs19 fc2 sc0 ls0 ws0">grams<span class="_"> </span>on<span class="_"> </span>each<span class="_"> </span>core<span class="_"> </span>and<span class="_"> </span>up<span class="_"> </span>to<span class="_"> </span>four<span class="_"> </span>cores<span class="_"> </span>on<span class="_"> </span>each<span class="_"> </span>chip<span class="_ _1"></span>.</div><div class="t m5 x75 h26 y2040 ff7 fs19 fc2 sc0 ls0 ws0">Core<span class="_ _16"> </span>i7,<span class="_ _16"> </span>Sandy<span class="_ _16"> </span>Bridge<span class="_ _11"> </span>(2011,<span class="_ _14"> </span>1.17<span class="_ _13"> </span>G<span class="_ _16"> </span>transistors).<span class="_ _e"> </span>Introduced<span class="_ _16"> </span>A<span class="_ _7"></span>VX,<span class="_ _16"> </span>an<span class="_ _16"> </span>exten-</div><div class="t m5 xcd h26 y2041 ff7 fs19 fc2 sc0 ls0 ws0">sion<span class="_"> </span>of<span class="_"> </span>the<span class="_"> </span>SSE<span class="_"> </span>to<span class="_"> </span>support<span class="_"> </span>data<span class="_"> </span>packed<span class="_"> </span>into<span class="_"> </span>256-bit<span class="_"> </span>vectors<span class="_ _1"></span>.</div><div class="t m5 x75 h26 y2042 ff7 fs19 fc2 sc0 ls0 ws0">Core<span class="_ _14"> </span>i7,<span class="_ _15"> </span>Haswell<span class="_ _14"> </span>(2013,<span class="_ _15"> </span>1.4<span class="_ _13"> </span>G<span class="_ _14"> </span>transistors).<span class="_ _1f"> </span>Extended<span class="_ _16"> </span>A<span class="_ _7"></span>VX<span class="_ _14"> </span>to<span class="_ _14"> </span>A<span class="_ _7"></span>VX2,<span class="_ _15"> </span>adding</div><div class="t m5 xcd h26 y2043 ff7 fs19 fc2 sc0 ls0 ws0">more<span class="_"> </span>instructions<span class="_"> </span>and<span class="_"> </span>instruction<span class="_"> </span>formats<span class="_ _1"></span>.</div><div class="t m5 x29 h26 y43d ff7 fs19 fc2 sc0 ls0 ws0">Each<span class="_ _16"> </span>successive<span class="_ _16"> </span>processor<span class="_ _16"> </span>has<span class="_ _16"> </span>been<span class="_ _16"> </span>designed<span class="_ _16"> </span>to<span class="_ _16"> </span>be<span class="_ _16"> </span>backward<span class="_ _16"> </span>compatible—</div><div class="t m5 x1d h26 y43e ff7 fs19 fc2 sc0 ls0 ws0">able<span class="_"> </span>to<span class="_"> </span>run<span class="_"> </span>code<span class="_"> </span>compiled<span class="_"> </span>for<span class="_"> </span>any<span class="_"> </span>earlier<span class="_"> </span>version.<span class="_"> </span>As<span class="_"> </span>we<span class="_"> </span>will<span class="_"> </span>see,<span class="_"> </span>there<span class="_"> </span>are<span class="_"> </span>many</div><div class="t m5 x1d h26 y43f ff7 fs19 fc2 sc0 ls0 ws0">strange<span class="_"> </span>artifacts<span class="_ _11"> </span>in<span class="_"> </span>the<span class="_ _11"> </span>instruction<span class="_ _11"> </span>set<span class="_"> </span>due<span class="_ _11"> </span>to<span class="_"> </span>this<span class="_ _11"> </span>evolutionary<span class="_ _11"> </span>heritage<span class="_ _1"></span>.<span class="_ _11"> </span>Intel<span class="_ _11"> </span>has</div><div class="t m5 x1d h26 y440 ff7 fs19 fc2 sc0 ls0 ws0">had<span class="_ _13"> </span>several<span class="_ _13"> </span>names<span class="_ _13"> </span>for<span class="_ _13"> </span>their<span class="_ _13"> </span>processor<span class="_ _13"> </span>line<span class="_ _0"></span>,<span class="_ _13"> </span>including<span class="_ _13"> </span><span class="ffa">IA32</span>,<span class="_ _13"> </span>for<span class="_ _13"> </span>“Intel<span class="_ _13"> </span>Architecture</div><div class="t m5 x1d h26 y2044 ff7 fs19 fc2 sc0 ls0 ws0">32-bit”<span class="_ _13"> </span>and<span class="_ _13"> </span>most<span class="_ _6"> </span>recently<span class="_ _13"> </span><span class="ffa">Intel64<span class="_ _2"></span></span>,<span class="_ _13"> </span>the<span class="_ _13"> </span>64-bit<span class="_ _6"> </span>extension<span class="_ _13"> </span>to<span class="_ _13"> </span>IA32,<span class="_ _13"> </span>which<span class="_ _13"> </span>we<span class="_ _13"> </span>will<span class="_ _6"> </span>refer</div><div class="t m5 x1d h26 y2045 ff7 fs19 fc2 sc0 ls0 ws0">to<span class="_ _16"> </span>as<span class="_ _14"> </span><span class="ffa">x86-64<span class="_ _2"></span></span>.<span class="_ _16"> </span>W<span class="_ _3"></span>e<span class="_ _14"> </span>will<span class="_ _14"> </span>refer<span class="_ _16"> </span>to<span class="_ _14"> </span>the<span class="_ _16"> </span>overall<span class="_ _14"> </span>line<span class="_ _16"> </span>by<span class="_ _14"> </span>the<span class="_ _16"> </span>commonly<span class="_ _14"> </span>used<span class="_ _14"> </span>colloquial</div><div class="t m5 x1d h26 y2046 ff7 fs19 fc2 sc0 ls0 ws0">name<span class="_"> </span>“x86,<span class="_ _1"></span>”<span class="_"> </span>reﬂecting<span class="_"> </span>the<span class="_"> </span>processor<span class="_"> </span>naming<span class="_"> </span>conventions<span class="_"> </span>up<span class="_"> </span>through<span class="_"> </span>the<span class="_"> </span>i486.</div><div class="t m5 x29 h26 y2047 ff7 fs19 fc2 sc0 ls0 ws0">Over<span class="_ _16"> </span>the<span class="_ _16"> </span>years<span class="_ _1"></span>,<span class="_ _14"> </span>several<span class="_ _16"> </span>companies<span class="_ _14"> </span>have<span class="_ _16"> </span>produced<span class="_ _16"> </span>processors<span class="_ _16"> </span>that<span class="_ _14"> </span>are<span class="_ _16"> </span>com-</div><div class="t m5 x1d h26 y2048 ff7 fs19 fc2 sc0 ls0 ws0">patible<span class="_ _14"> </span>with<span class="_ _14"> </span>Intel<span class="_ _14"> </span>processors<span class="_ _1"></span>,<span class="_ _21"> </span>capable<span class="_ _14"> </span>of<span class="_ _14"> </span>running<span class="_ _14"> </span>the<span class="_ _15"> </span>exact<span class="_ _14"> </span>same<span class="_ _14"> </span>machine-level</div><div class="t m5 x1d h26 y2049 ff7 fs19 fc2 sc0 ls0 ws0">programs<span class="_ _1"></span>.<span class="_ _21"> </span>Chief<span class="_ _21"> </span>among<span class="_ _f"> </span>these<span class="_ _21"> </span>is<span class="_ _21"> </span>Advanced<span class="_ _f"> </span>Micro<span class="_ _21"> </span>Devices<span class="_ _f"> </span>(AMD).<span class="_ _21"> </span>F<span class="_ _1"></span>or<span class="_ _21"> </span>years<span class="_ _0"></span>,</div><div class="t m5 x1d h26 y204a ff7 fs19 fc2 sc0 ls0 ws0">AMD<span class="_"> </span>lagged<span class="_"> </span>just<span class="_ _11"> </span>behind<span class="_"> </span>Intel<span class="_"> </span>in<span class="_ _11"> </span>technology<span class="_ _3"></span>,<span class="_"> </span>forcing<span class="_"> </span>a<span class="_ _11"> </span>marketing<span class="_"> </span>strategy<span class="_"> </span>where</div><div class="t m5 x1d h26 y204b ff7 fs19 fc2 sc0 ls0 ws0">they<span class="_ _16"> </span>produced<span class="_ _11"> </span>processors<span class="_ _16"> </span>that<span class="_ _16"> </span>were<span class="_ _16"> </span>less<span class="_ _16"> </span>expensive<span class="_ _11"> </span>although<span class="_ _16"> </span>somewhat<span class="_ _16"> </span>lower<span class="_ _16"> </span>in</div><div class="t m5 x1d h26 y204c ff7 fs19 fc2 sc0 ls0 ws0">performance<span class="_ _1"></span>.<span class="_ _13"> </span>T<span class="_ _1"></span>hey<span class="_ _13"> </span>became<span class="_ _6"> </span>more<span class="_ _13"> </span>competitive<span class="_ _6"> </span>around<span class="_ _13"> </span>2002,<span class="_ _6"> </span>being<span class="_ _13"> </span>the<span class="_ _6"> </span>ﬁrst<span class="_ _13"> </span>to<span class="_ _6"> </span>break</div><div class="t m5 x1d h26 y204d ff7 fs19 fc2 sc0 ls0 ws0">the<span class="_"> </span>1-gigahertz<span class="_"> </span>clock-speed<span class="_"> </span>barrier<span class="_ _11"> </span>for<span class="_"> </span>a<span class="_"> </span>commercially<span class="_ _11"> </span>available<span class="_"> </span>microprocessor,</div><div class="t m5 x1d h26 y204e ff7 fs19 fc2 sc0 ls0 ws0">and<span class="_ _11"> </span>introducing<span class="_ _11"> </span>x86-64,<span class="_ _16"> </span>the<span class="_ _11"> </span>widely<span class="_ _11"> </span>adopted<span class="_ _11"> </span>64-bit<span class="_ _11"> </span>extension<span class="_ _16"> </span>to<span class="_ _11"> </span>Intel’s<span class="_"> </span>IA32.<span class="_ _11"> </span>Al-</div><div class="t m5 x1d h26 y204f ff7 fs19 fc2 sc0 ls0 ws0">though<span class="_"> </span>we<span class="_"> </span>will<span class="_"> </span>talk<span class="_"> </span>about<span class="_"> </span>Intel<span class="_"> </span>processors<span class="_ _3"></span>,<span class="_"> </span>our<span class="_"> </span>presentation<span class="_"> </span>holds<span class="_"> </span>just<span class="_"> </span>as<span class="_"> </span>well<span class="_"> </span>for</div><div class="t m5 x1d h26 y2050 ff7 fs19 fc2 sc0 ls0 ws0">the<span class="_"> </span>compatible<span class="_"> </span>processors<span class="_"> </span>produced<span class="_"> </span>by<span class="_"> </span>Intel’s<span class="_"> </span>rivals<span class="_ _3"></span>.</div><div class="t m5 x29 h26 y2051 ff7 fs19 fc2 sc0 ls0 ws0">Much<span class="_ _6"> </span>of<span class="_ _6"> </span>the<span class="_ _6"> </span>complexity<span class="_ _a"> </span>of<span class="_ _6"> </span>x86<span class="_ _6"> </span>is<span class="_ _6"> </span>not<span class="_ _6"> </span>of<span class="_ _6"> </span>concern<span class="_ _6"> </span>to<span class="_ _6"> </span>those<span class="_ _6"> </span>interested<span class="_ _6"> </span>in<span class="_ _6"> </span>programs</div><div class="t m5 x1d h26 y2052 ff7 fs19 fc2 sc0 ls0 ws0">for<span class="_ _16"> </span>the<span class="_ _16"> </span>Linux<span class="_ _16"> </span>operating<span class="_ _14"> </span>system<span class="_ _16"> </span>as<span class="_ _16"> </span>generated<span class="_ _14"> </span>by<span class="_ _16"> </span>the<span class="_ _16"> </span><span class="ff9">gcc<span class="_ _16"> </span></span>compiler.<span class="_ _16"> </span>T<span class="_ _0"></span>he<span class="_ _16"> </span>memory</div><div class="t m5 x1d h26 y2053 ff7 fs19 fc2 sc0 ls0 ws0">model<span class="_ _16"> </span>provided<span class="_ _11"> </span>in<span class="_ _16"> </span>the<span class="_ _16"> </span>original<span class="_ _11"> </span>8086<span class="_ _16"> </span>and<span class="_ _16"> </span>its<span class="_ _16"> </span>extensions<span class="_ _11"> </span>in<span class="_ _16"> </span>the<span class="_ _16"> </span>80286<span class="_ _11"> </span>became<span class="_ _16"> </span>ob-</div><div class="t m5 x1d h26 y2054 ff7 fs19 fc2 sc0 ls0 ws0">solete<span class="_"> </span>with<span class="_"> </span>the<span class="_"> </span>i386.<span class="_"> </span>T<span class="_ _1"></span>he<span class="_"> </span>original<span class="_"> </span>x87<span class="_"> </span>ﬂoating-point<span class="_"> </span>instructions<span class="_"> </span>became<span class="_"> </span>obsolete</div></div><div class="pi" data-data='{"ctm":[2.000000,0.000000,0.000000,2.000000,0.000000,0.000000]}'></div></div>
