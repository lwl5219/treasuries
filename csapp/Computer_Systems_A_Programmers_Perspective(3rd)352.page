<div id="pf160" class="pf w2 h11" data-page-no="160"><div class="pc pc160 w2 h11"><img class="bi x0 y0 w1 h1" alt="" src="csapp/bg160.png"/><div class="t m5 x5f h28 y9b ff6 fs1f fc2 sc0 ls0 ws0">Homework<span class="_ _10"> </span>Problems<span class="_ _1b"> </span><span class="ffe fs1e">351</span></div><div class="t m5 x2e h61 y287d ff13 fs35 fc6 sc0 ls0 ws0">p1<span class="_ _f"> </span>in<span class="_ _f"> </span>%rdi,<span class="_ _f"> </span>p2<span class="_ _e"> </span>in<span class="_ _21"> </span>%rsi,<span class="_ _f"> </span>action<span class="_ _e"> </span>in<span class="_ _21"> </span>%edx</div><div class="t m5 x2c h2d y31c6 ff6 fs20 fc6 sc0 ls0 ws0">1<span class="_ _1c"> </span><span class="ffd fs1e fc2">.L8:<span class="_ _166"> </span></span><span class="ff13 fs35">MODE_E</span></div><div class="t m5 x2c h2d y287f ff6 fs20 fc6 sc0 ls0 ws0">2<span class="_ _45"> </span><span class="ffd fs1e fc2">movl<span class="_ _46"> </span>$27,<span class="_ _e"> </span>%eax</span></div><div class="t m5 x2c h2d y2880 ff6 fs20 fc6 sc0 ls0 ws0">3<span class="_ _45"> </span><span class="ffd fs1e fc2">ret</span></div><div class="t m5 x2c h2d y2881 ff6 fs20 fc6 sc0 ls0 ws0">4<span class="_ _1c"> </span><span class="ffd fs1e fc2">.L3:<span class="_ _166"> </span></span><span class="ff13 fs35">MODE_A</span></div><div class="t m5 x2c h2d y2882 ff6 fs20 fc6 sc0 ls0 ws0">5<span class="_ _45"> </span><span class="ffd fs1e fc2">movq<span class="_ _46"> </span>(%rsi),<span class="_ _e"> </span>%rax</span></div><div class="t m5 x2c h2d y2883 ff6 fs20 fc6 sc0 ls0 ws0">6<span class="_ _45"> </span><span class="ffd fs1e fc2">movq<span class="_ _46"> </span>(%rdi),<span class="_ _e"> </span>%rdx</span></div><div class="t m5 x2c h2d y2884 ff6 fs20 fc6 sc0 ls0 ws0">7<span class="_ _45"> </span><span class="ffd fs1e fc2">movq<span class="_ _46"> </span>%rdx,<span class="_ _e"> </span>(%rsi)</span></div><div class="t m5 x2c h2d y2885 ff6 fs20 fc6 sc0 ls0 ws0">8<span class="_ _45"> </span><span class="ffd fs1e fc2">ret</span></div><div class="t m5 x2c h2d y2886 ff6 fs20 fc6 sc0 ls0 ws0">9<span class="_ _1c"> </span><span class="ffd fs1e fc2">.L5:<span class="_ _166"> </span></span><span class="ff13 fs35">MODE_B</span></div><div class="t m5 x17 h2d y2887 ff6 fs20 fc6 sc0 ls0 ws0">10<span class="_ _45"> </span><span class="ffd fs1e fc2">movq<span class="_ _46"> </span>(%rdi),<span class="_ _e"> </span>%rax</span></div><div class="t m5 x17 h2d y2888 ff6 fs20 fc6 sc0 ls0 ws0">11<span class="_ _45"> </span><span class="ffd fs1e fc2">addq<span class="_ _46"> </span>(%rsi),<span class="_ _e"> </span>%rax</span></div><div class="t m5 x17 h2e y2889 ff6 fs20 fc6 sc0 ls0 ws0">12</div><div class="t m5 xd1 h2d y288a ffd fs1e fc2 sc0 ls0 ws0">movq<span class="_ _46"> </span>%rax,<span class="_ _e"> </span>(%rdi)</div><div class="t m5 x17 h2d y288b ff6 fs20 fc6 sc0 ls0 ws0">13<span class="_ _45"> </span><span class="ffd fs1e fc2">ret</span></div><div class="t m5 x17 h2d y288c ff6 fs20 fc6 sc0 ls0 ws0">14<span class="_ _1c"> </span><span class="ffd fs1e fc2">.L6:<span class="_ _166"> </span></span><span class="ff13 fs35">MODE_C</span></div><div class="t m5 x17 h2e y288d ff6 fs20 fc6 sc0 ls0 ws0">15</div><div class="t m5 xd1 h2d y288e ffd fs1e fc2 sc0 ls0 ws0">movq<span class="_ _46"> </span>$59,<span class="_ _e"> </span>(%rdi)</div><div class="t m5 x17 h2e y288f ff6 fs20 fc6 sc0 ls0 ws0">16</div><div class="t m5 xd1 h2d y2890 ffd fs1e fc2 sc0 ls0 ws0">movq<span class="_ _46"> </span>(%rsi),<span class="_ _e"> </span>%rax</div><div class="t m5 x17 h2e y2891 ff6 fs20 fc6 sc0 ls0 ws0">17</div><div class="t m5 xd1 h2d y2892 ffd fs1e fc2 sc0 ls0 ws0">ret</div><div class="t m5 x17 h2d y2893 ff6 fs20 fc6 sc0 ls0 ws0">18<span class="_ _1c"> </span><span class="ffd fs1e fc2">.L7:<span class="_ _166"> </span></span><span class="ff13 fs35">MODE_D</span></div><div class="t m5 x17 h2d y2894 ff6 fs20 fc6 sc0 ls0 ws0">19<span class="_ _45"> </span><span class="ffd fs1e fc2">movq<span class="_ _46"> </span>(%rsi),<span class="_ _e"> </span>%rax</span></div><div class="t m5 x17 h2d y2895 ff6 fs20 fc6 sc0 ls0 ws0">20<span class="_ _45"> </span><span class="ffd fs1e fc2">movq<span class="_ _46"> </span>%rax,<span class="_ _e"> </span>(%rdi)</span></div><div class="t m5 x17 h2d y2896 ff6 fs20 fc6 sc0 ls0 ws0">21<span class="_ _45"> </span><span class="ffd fs1e fc2">movl<span class="_ _46"> </span>$27,<span class="_ _e"> </span>%eax</span></div><div class="t m5 x17 h2e y2897 ff6 fs20 fc6 sc0 ls0 ws0">22</div><div class="t m5 xd1 h2d y2898 ffd fs1e fc2 sc0 ls0 ws0">ret</div><div class="t m5 x17 h2d y2899 ff6 fs20 fc6 sc0 ls0 ws0">23<span class="_ _1c"> </span><span class="ffd fs1e fc2">.L9:<span class="_ _166"> </span></span><span class="ff13 fs35">default</span></div><div class="t m5 x17 h2d y31c7 ff6 fs20 fc6 sc0 ls0 ws0">24<span class="_ _45"> </span><span class="ffd fs1e fc2">movl<span class="_ _46"> </span>$12,<span class="_ _e"> </span>%eax</span></div><div class="t m5 x17 h2d y31c8 ff6 fs20 fc6 sc0 ls0 ws0">25<span class="_ _45"> </span><span class="ffd fs1e fc2">ret</span></div><div class="t m5 x17 h34 y31c9 ffe fs16 fc6 sc0 ls0 ws0">Figure<span class="_ _16"> </span>3.52<span class="_ _c"> </span><span class="fc1">Assembly<span class="_ _14"> </span>code<span class="_ _16"> </span>for<span class="_ _14"> </span>Problem<span class="_ _16"> </span>3.62.<span class="_ _14"> </span><span class="ff6">This<span class="_ _16"> </span>code<span class="_ _14"> </span>implements<span class="_ _16"> </span>the<span class="_ _14"> </span>different</span></span></div><div class="t m5 x17 h34 y31ca ff6 fs16 fc1 sc0 ls0 ws0">branches<span class="_ _10"> </span>of<span class="_ _11"> </span>a</div><div class="t m5 x8e h3a y31cb ffd fs19 fc1 sc0 ls0 ws0">switch<span class="_ _10"> </span><span class="ff6 fs16">statement.</span></div><div class="t m5 x17 h26 y31cc ff7 fs19 fc1 sc0 ls0 ws0">F<span class="_ _1"></span>igure<span class="_"> </span>3.53<span class="_"> </span>shows<span class="_"> </span>the<span class="_"> </span>disassembled<span class="_"> </span>machine<span class="_"> </span>code<span class="_"> </span>for<span class="_"> </span>the<span class="_"> </span>procedure.</div><div class="t m5 x26 h26 y31cd ff7 fs19 fc1 sc0 ls0 ws0">T<span class="_ _1"></span>he<span class="_ _e"> </span>jump<span class="_ _f"> </span>table<span class="_ _e"> </span>resides<span class="_ _f"> </span>in<span class="_ _e"> </span>a<span class="_ _f"> </span>different<span class="_ _e"> </span>area<span class="_ _f"> </span>of<span class="_ _e"> </span>memory<span class="_ _7"></span>.<span class="_ _e"> </span>W<span class="_ _3"></span>e<span class="_ _f"> </span>can<span class="_ _e"> </span>see<span class="_ _f"> </span>from</div><div class="t m5 x17 h26 y31ce ff7 fs19 fc1 sc0 ls0 ws0">the<span class="_ _f"> </span>indirect<span class="_ _e"> </span>jump<span class="_ _f"> </span>on<span class="_ _e"> </span>line<span class="_ _f"> </span>5<span class="_ _f"> </span>that<span class="_ _e"> </span>the<span class="_ _f"> </span>jump<span class="_ _e"> </span>table<span class="_ _f"> </span>begins<span class="_ _f"> </span>at<span class="_ _e"> </span>address<span class="_ _f"> </span><span class="ffd">0x4006f8</span>.</div><div class="t m5 x17 h26 y31cf ff7 fs19 fc1 sc0 ls0 ws0">Using<span class="_ _13"> </span>the<span class="_ _6"> </span><span class="ff9">gdb<span class="_ _13"> </span></span>debugger<span class="_ _0"></span>,<span class="_ _13"> </span>we<span class="_ _6"> </span>can<span class="_ _13"> </span>examine<span class="_ _13"> </span>the<span class="_ _6"> </span>six<span class="_ _13"> </span>8-byte<span class="_ _6"> </span>words<span class="_ _13"> </span>of<span class="_ _6"> </span>memory<span class="_ _13"> </span>compris-</div><div class="t m5 x17 h26 y31d0 ff7 fs19 fc1 sc0 ls0 ws0">ing<span class="_"> </span>the<span class="_"> </span>jump<span class="_"> </span>table<span class="_ _13"> </span>with<span class="_"> </span>the<span class="_"> </span>command<span class="_"> </span><span class="ffd">x/6gx<span class="_ _10"> </span>0x4006f8</span>.<span class="_"> </span><span class="ff9">Gdb<span class="_ _10"> </span></span>prints<span class="_"> </span>the<span class="_"> </span>following:</div><div class="t m5 x17 h2d y31d1 ffd fs1e fc2 sc0 ls0 ws0">(gdb)<span class="_ _e"> </span><span class="ff13">x/6gx<span class="_ _1f"> </span>0x4006f8</span></div><div class="t m5 x17 h2d y31d2 ffd fs1e fc2 sc0 ls0 ws0">0x4006f8:<span class="_ _46"> </span>0x00000000004005a1<span class="_ _46"> </span>0x00000000004005c3</div><div class="t m5 x17 h2d y31d3 ffd fs1e fc2 sc0 ls0 ws0">0x400708:<span class="_ _46"> </span>0x00000000004005a1<span class="_ _46"> </span>0x00000000004005aa</div><div class="t m5 x17 h2d y31d4 ffd fs1e fc2 sc0 ls0 ws0">0x400718:<span class="_ _46"> </span>0x00000000004005b2<span class="_ _46"> </span>0x00000000004005bf</div><div class="t m5 x26 h26 ycf1 ff7 fs19 fc2 sc0 ls0 ws0">F<span class="_ _1"></span>ill<span class="_ _11"> </span>in<span class="_"> </span>the<span class="_"> </span>body<span class="_ _11"> </span>of<span class="_"> </span>the<span class="_"> </span><span class="ffd">switch<span class="_ _11"> </span></span>statement<span class="_"> </span>with<span class="_"> </span>C<span class="_ _11"> </span>code<span class="_"> </span>that<span class="_"> </span>will<span class="_ _11"> </span>have<span class="_"> </span>the<span class="_"> </span>same</div><div class="t m5 x17 h26 ycf2 ff7 fs19 fc2 sc0 ls0 ws0">behavior<span class="_"> </span>as<span class="_"> </span>the<span class="_"> </span>machine<span class="_"> </span>code<span class="_ _1"></span>.</div></div><div class="pi" data-data='{"ctm":[2.000000,0.000000,0.000000,2.000000,0.000000,0.000000]}'></div></div>
