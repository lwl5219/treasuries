<div id="pf1a4" class="pf w2 h11" data-page-no="1a4"><div class="pc pc1a4 w2 h11"><img class="bi x0 y0 w1 h1" alt="" src="csapp/bg1a4.png"/><div class="t m5 x10e h28 y9b ff6 fs1f fc2 sc0 ls0 ws0">Section<span class="_ _10"> </span>4.2<span class="_ _60"> </span>Logic<span class="_ _10"> </span>Design<span class="_ _10"> </span>and<span class="_ _10"> </span>the<span class="_ _10"> </span>Hardware<span class="_ _10"> </span>Control<span class="_ _10"> </span>Language<span class="_ _10"> </span>HCL<span class="_ _3e"> </span><span class="ffe fs1e">419</span></div><div class="t m5 x17 h26 ye7 ff7 fs19 fc2 sc0 ls0 ws0">outputs<span class="_ _14"> </span><span class="ff6">valA<span class="_ _14"> </span></span>and<span class="_ _14"> </span><span class="ff6">valB<span class="_ _14"> </span></span>(short<span class="_ _14"> </span>for<span class="_ _14"> </span>“value<span class="_ _14"> </span>A<span class="_ _7"></span>”<span class="_ _14"> </span>and<span class="_ _14"> </span>“value<span class="_ _14"> </span>B”).<span class="_ _14"> </span>T<span class="_ _0"></span>he<span class="_ _14"> </span>write<span class="_ _14"> </span>port<span class="_ _14"> </span>has</div><div class="t m5 x17 h26 y2a7 ff7 fs19 fc2 sc0 ls0 ws0">address<span class="_ _16"> </span>input<span class="_ _14"> </span><span class="ff6">dstW<span class="_ _14"> </span></span>(short<span class="_ _14"> </span>for<span class="_ _16"> </span>“destination<span class="_ _14"> </span>W”)<span class="_ _14"> </span>and<span class="_ _14"> </span>data<span class="_ _16"> </span>input<span class="_ _14"> </span><span class="ff6">valW<span class="_ _14"> </span></span>(short<span class="_ _14"> </span>for</div><div class="t m5 x17 h26 y2a8 ff7 fs19 fc2 sc0 ls0 ws0">“value<span class="_"> </span>W”).</div><div class="t m5 x26 h26 y2f7 ff7 fs19 fc2 sc0 ls0 ws0">T<span class="_ _1"></span>he<span class="_"> </span>register<span class="_ _13"> </span>ﬁle<span class="_"> </span>is<span class="_"> </span>not<span class="_ _13"> </span>a<span class="_"> </span>combinational<span class="_ _13"> </span>circuit,<span class="_"> </span>since<span class="_ _13"> </span>it<span class="_"> </span>has<span class="_ _13"> </span>internal<span class="_"> </span>storage<span class="_ _1"></span>.<span class="_"> </span>In</div><div class="t m5 x17 h26 y2f8 ff7 fs19 fc2 sc0 ls0 ws0">our<span class="_"> </span>implementation,<span class="_"> </span>however,<span class="_"> </span>data<span class="_"> </span>can<span class="_ _13"> </span>be<span class="_"> </span>read<span class="_"> </span>from<span class="_"> </span>the<span class="_"> </span>register<span class="_"> </span>ﬁle<span class="_"> </span>as<span class="_"> </span>if<span class="_"> </span>it<span class="_"> </span>were</div><div class="t m5 x17 h26 y2f9 ff7 fs19 fc2 sc0 ls0 ws0">a<span class="_ _13"> </span>block<span class="_"> </span>of<span class="_ _13"> </span>combinational<span class="_"> </span>logic<span class="_ _13"> </span>having<span class="_"> </span>addresses<span class="_ _13"> </span>as<span class="_ _13"> </span>inputs<span class="_"> </span>and<span class="_ _13"> </span>the<span class="_"> </span>data<span class="_ _13"> </span>as<span class="_ _13"> </span>outputs<span class="_ _0"></span>.</div><div class="t m5 x17 h26 y2fa ff7 fs19 fc2 sc0 ls0 ws0">When<span class="_ _16"> </span>either<span class="_ _16"> </span><span class="ff6">srcA<span class="_ _16"> </span></span>or<span class="_ _16"> </span><span class="ff6">srcB<span class="_ _16"> </span></span>is<span class="_ _16"> </span>set<span class="_ _14"> </span>to<span class="_ _16"> </span>some<span class="_ _14"> </span>register<span class="_ _16"> </span>ID<span class="_ _1"></span>,<span class="_ _14"> </span>then,<span class="_ _14"> </span>after<span class="_ _16"> </span>some<span class="_ _14"> </span>delay<span class="_ _3"></span>,<span class="_ _14"> </span>the</div><div class="t m5 x17 h26 y2fb ff7 fs19 fc2 sc0 ls0 ws0">value<span class="_"> </span>stored<span class="_ _11"> </span>in<span class="_ _11"> </span>the<span class="_ _11"> </span>corresponding<span class="_ _11"> </span>program<span class="_ _11"> </span>register<span class="_ _11"> </span>will<span class="_ _11"> </span>appear<span class="_ _11"> </span>on<span class="_ _11"> </span>either<span class="_"> </span><span class="ff6">valA<span class="_ _11"> </span></span>or</div><div class="t m5 x17 h26 y2fc ff6 fs19 fc2 sc0 ls0 ws0">valB<span class="ff7">.<span class="_"> </span>F<span class="_ _1"></span>or<span class="_"> </span>example,<span class="_"> </span>setting<span class="_"> </span><span class="ff6">srcA<span class="_ _10"> </span></span>to<span class="_"> </span>3<span class="_"> </span>will<span class="_"> </span>cause<span class="_ _11"> </span>the<span class="_"> </span>value<span class="_"> </span>of<span class="_ _11"> </span>program<span class="_"> </span>register<span class="_"> </span><span class="ffd">%rbx</span></span></div><div class="t m5 x17 h26 y2fd ff7 fs19 fc2 sc0 ls0 ws0">to<span class="_"> </span>be<span class="_"> </span>read,<span class="_"> </span>and<span class="_"> </span>this<span class="_"> </span>value<span class="_"> </span>will<span class="_"> </span>appear<span class="_"> </span>on<span class="_"> </span>output<span class="_"> </span><span class="ff6">valA</span>.</div><div class="t m5 x26 h26 y2fe ff7 fs19 fc2 sc0 ls0 ws0">T<span class="_ _1"></span>he<span class="_ _14"> </span>writing<span class="_ _14"> </span>of<span class="_ _16"> </span>words<span class="_ _14"> </span>to<span class="_ _14"> </span>the<span class="_ _16"> </span>register<span class="_ _14"> </span>ﬁle<span class="_ _14"> </span>is<span class="_ _14"> </span>controlled<span class="_ _16"> </span>by<span class="_ _14"> </span>the<span class="_ _14"> </span>clock<span class="_ _16"> </span>signal<span class="_ _14"> </span>in</div><div class="t m5 x17 h26 y2ff ff7 fs19 fc2 sc0 ls0 ws0">a<span class="_ _11"> </span>manner<span class="_ _11"> </span>similar<span class="_ _11"> </span>to<span class="_ _11"> </span>the<span class="_ _11"> </span>loading<span class="_ _11"> </span>of<span class="_ _11"> </span>values<span class="_ _11"> </span>into<span class="_ _11"> </span>a<span class="_ _11"> </span>clocked<span class="_ _11"> </span>register.<span class="_ _11"> </span>Every<span class="_ _11"> </span>time<span class="_ _11"> </span>the</div><div class="t m5 x17 h26 y300 ff7 fs19 fc2 sc0 ls0 ws0">clock<span class="_ _13"> </span>rises<span class="_ _1"></span>,<span class="_"> </span>the<span class="_ _13"> </span>value<span class="_ _13"> </span>on<span class="_"> </span>input<span class="_ _13"> </span><span class="ff6">valW<span class="_ _13"> </span></span>is<span class="_ _13"> </span>written<span class="_"> </span>to<span class="_ _13"> </span>the<span class="_ _13"> </span>program<span class="_"> </span>register<span class="_ _13"> </span>indicated<span class="_ _13"> </span>by</div><div class="t m5 x17 h26 y21a ff7 fs19 fc2 sc0 ls0 ws0">the<span class="_ _11"> </span>register<span class="_ _11"> </span>ID<span class="_ _11"> </span>on<span class="_ _16"> </span>input<span class="_ _11"> </span><span class="ff6">dstW</span>.<span class="_ _11"> </span>When<span class="_ _11"> </span><span class="ff6">dstW<span class="_ _11"> </span></span>is<span class="_ _11"> </span>set<span class="_ _11"> </span>to<span class="_ _16"> </span>the<span class="_ _11"> </span>special<span class="_ _11"> </span>ID<span class="_ _11"> </span>value<span class="_ _11"> </span><span class="ffd">0xF</span><span class="ls1b5">,n<span class="_ _49"></span>o</span></div><div class="t m5 x17 h26 y450 ff7 fs19 fc2 sc0 ls0 ws0">program<span class="_ _16"> </span>register<span class="_ _11"> </span>is<span class="_ _16"> </span>written.<span class="_ _16"> </span>Since<span class="_ _16"> </span>the<span class="_ _11"> </span>register<span class="_ _16"> </span>ﬁle<span class="_ _16"> </span>can<span class="_ _16"> </span>be<span class="_ _11"> </span>both<span class="_ _16"> </span>read<span class="_ _16"> </span>and<span class="_ _11"> </span>written,</div><div class="t m5 x17 h26 y451 ff7 fs19 fc2 sc0 ls0 ws0">a<span class="_ _14"> </span>natural<span class="_ _14"> </span>question<span class="_ _14"> </span>to<span class="_ _14"> </span>ask<span class="_ _16"> </span>is<span class="_ _0"></span>,<span class="_ _14"> </span>“What<span class="_ _14"> </span>happens<span class="_ _14"> </span>if<span class="_ _14"> </span>the<span class="_ _14"> </span>circuit<span class="_ _14"> </span>attempts<span class="_ _14"> </span>to<span class="_ _14"> </span>read<span class="_ _14"> </span>and</div><div class="t m5 x17 h26 y452 ff7 fs19 fc2 sc0 ls0 ws0">write<span class="_ _15"> </span>the<span class="_ _15"> </span>same<span class="_ _15"> </span>register<span class="_ _21"> </span>simultaneously?”<span class="_ _15"> </span>T<span class="_ _0"></span>he<span class="_ _15"> </span>answer<span class="_ _15"> </span>is<span class="_ _15"> </span>straightforward:<span class="_ _15"> </span>if<span class="_ _21"> </span>the</div><div class="t m5 x17 h26 y453 ff7 fs19 fc2 sc0 ls0 ws0">same<span class="_ _13"> </span>register<span class="_"> </span>ID<span class="_ _13"> </span>is<span class="_"> </span>used<span class="_ _13"> </span>for<span class="_"> </span>both<span class="_ _13"> </span>a<span class="_"> </span>read<span class="_ _13"> </span>port<span class="_ _13"> </span>and<span class="_"> </span>the<span class="_ _13"> </span>write<span class="_"> </span>port,<span class="_ _13"> </span>then,<span class="_"> </span>as<span class="_ _13"> </span>the<span class="_"> </span>clock</div><div class="t m5 x17 h26 y454 ff7 fs19 fc2 sc0 ls0 ws0">rises<span class="_ _1"></span>,<span class="_ _13"> </span>there<span class="_ _13"> </span>will<span class="_"> </span>be<span class="_ _13"> </span>a<span class="_ _13"> </span>transition<span class="_ _13"> </span>on<span class="_ _13"> </span>the<span class="_ _13"> </span>read<span class="_ _13"> </span>port’s<span class="_ _13"> </span>data<span class="_ _13"> </span>output<span class="_ _13"> </span>from<span class="_ _13"> </span>the<span class="_ _13"> </span>old<span class="_ _13"> </span>value<span class="_ _13"> </span>to</div><div class="t m5 x17 h26 y455 ff7 fs19 fc2 sc0 ls0 ws0">the<span class="_"> </span>new<span class="_ _3"></span>.<span class="_ _11"> </span>When<span class="_"> </span>we<span class="_"> </span>incorporate<span class="_"> </span>the<span class="_ _11"> </span>register<span class="_"> </span>ﬁle<span class="_"> </span>into<span class="_ _11"> </span>our<span class="_"> </span>processor<span class="_ _11"> </span>design,<span class="_"> </span>we<span class="_"> </span>will</div><div class="t m5 x17 h26 y456 ff7 fs19 fc2 sc0 ls0 ws0">make<span class="_"> </span>sure<span class="_"> </span>that<span class="_"> </span>we<span class="_"> </span>take<span class="_"> </span>this<span class="_"> </span>property<span class="_"> </span>into<span class="_"> </span>consideration.</div><div class="t m5 x26 h26 y457 ff7 fs19 fc2 sc0 ls0 ws0">Our<span class="_ _15"> </span>processor<span class="_ _21"> </span>has<span class="_ _21"> </span>a<span class="_ _21"> </span>random<span class="_ _21"> </span>access<span class="_ _21"> </span>memory<span class="_ _21"> </span>for<span class="_ _21"> </span>storing<span class="_ _21"> </span>program<span class="_ _21"> </span>data,<span class="_ _f"> </span>as</div><div class="t m5 x17 h26 y458 ff7 fs19 fc2 sc0 ls0 ws0">illustrated<span class="_"> </span>below:</div><div class="t m5 x5b h3f y3a71 ff3d fs27 fc1 sc0 ls0 ws0">Data</div><div class="t m5 x12 h3f y3a72 ff3d fs27 fc1 sc0 ls0 ws0">memory</div><div class="t m5 x1d3 h44 y3a73 ff3d fs2a fc1 sc0 ls0 ws0">data out</div><div class="t m5 x10b h44 y3a74 ff3d fs2a fc1 sc0 ls0 ws0">data in<span class="_ _1aa"></span>address</div><div class="t m5 x17 h44 y3a75 ff3d fs2a fc1 sc0 ls0 ws0">error</div><div class="t m5 x57 h44 y3a76 ff3d fs2a fc1 sc0 ls0 ws0">read</div><div class="t m5 x17 h44 y3a77 ff3d fs2a fc1 sc0 ls0 ws0">write</div><div class="t m5 x66 h3f y3a78 ff3d fs27 fc1 sc0 ls0 ws0">cloc</div><div class="c x17 y3a79 w4 h92"><div class="t m5 x3e h3f y3a7a ff3d fs27 fc1 sc0 ls0 ws0">k</div></div><div class="t m5 x17 h26 y631 ff7 fs19 fc2 sc0 ls0 ws0">T<span class="_ _1"></span>his<span class="_ _13"> </span>memory<span class="_ _13"> </span>has<span class="_ _13"> </span>a<span class="_ _13"> </span>single<span class="_ _13"> </span>address<span class="_ _13"> </span>input,<span class="_ _13"> </span>a<span class="_ _13"> </span>data<span class="_ _13"> </span>input<span class="_ _13"> </span>for<span class="_ _13"> </span>writing<span class="_ _1"></span>,<span class="_"> </span>and<span class="_ _13"> </span>a<span class="_ _6"> </span>data<span class="_ _13"> </span>output</div><div class="t m5 x17 h26 y632 ff7 fs19 fc2 sc0 ls0 ws0">for<span class="_ _13"> </span>reading.<span class="_"> </span>Like<span class="_ _13"> </span>the<span class="_ _13"> </span>register<span class="_"> </span>ﬁle<span class="_ _1"></span>,<span class="_"> </span>reading<span class="_ _13"> </span>from<span class="_"> </span>our<span class="_ _13"> </span>memory<span class="_"> </span>operates<span class="_ _13"> </span>in<span class="_"> </span>a<span class="_ _13"> </span>manner</div><div class="t m5 x17 h26 y633 ff7 fs19 fc2 sc0 ls0 ws0">similar<span class="_"> </span>to<span class="_"> </span>combinational<span class="_ _13"> </span>logic:<span class="_"> </span>If<span class="_"> </span>we<span class="_"> </span>provide<span class="_ _13"> </span>an<span class="_"> </span>address<span class="_"> </span>on<span class="_"> </span>the<span class="_"> </span><span class="ff6">address<span class="_ _13"> </span></span>input<span class="_"> </span>and</div><div class="t m5 x17 h26 y634 ff7 fs19 fc2 sc0 ls0 ws0">set<span class="_ _16"> </span>the<span class="_ _16"> </span><span class="ff6">write<span class="_ _14"> </span></span>control<span class="_ _16"> </span>signal<span class="_ _14"> </span>to<span class="_ _16"> </span>0,<span class="_ _14"> </span>then<span class="_ _14"> </span>after<span class="_ _16"> </span>some<span class="_ _16"> </span>delay<span class="_ _3"></span>,<span class="_ _14"> </span>the<span class="_ _14"> </span>value<span class="_ _16"> </span>stored<span class="_ _16"> </span>at<span class="_ _14"> </span>that</div><div class="t m5 x17 h26 y635 ff7 fs19 fc2 sc0 ls0 ws0">address<span class="_ _16"> </span>will<span class="_ _14"> </span>appear<span class="_ _16"> </span>on<span class="_ _14"> </span><span class="ff6">data<span class="_ _15"> </span>out</span><span class="ls1b6">.T<span class="_ _9"></span>h<span class="_ _42"></span>e<span class="ff6 ls0">error<span class="_ _14"> </span><span class="ff7">signal<span class="_ _14"> </span>will<span class="_ _16"> </span>be<span class="_ _14"> </span>set<span class="_ _16"> </span>to<span class="_ _14"> </span>1<span class="_ _16"> </span>if<span class="_ _14"> </span>the<span class="_ _14"> </span>address</span></span></span></div><div class="t m5 x17 h26 y636 ff7 fs19 fc2 sc0 ls0 ws0">is<span class="_ _16"> </span>out<span class="_ _16"> </span>of<span class="_ _14"> </span>range<span class="_ _0"></span>,<span class="_ _14"> </span>and<span class="_ _16"> </span>to<span class="_ _16"> </span>0<span class="_ _14"> </span>otherwise<span class="_ _0"></span>.<span class="_ _16"> </span>Writing<span class="_ _16"> </span>to<span class="_ _14"> </span>the<span class="_ _16"> </span>memory<span class="_ _14"> </span>is<span class="_ _16"> </span>controlled<span class="_ _16"> </span>by<span class="_ _14"> </span>the</div><div class="t m5 x17 h26 y637 ff7 fs19 fc2 sc0 ls0 ws0">clock:<span class="_ _14"> </span>W<span class="_ _3"></span>e<span class="_ _14"> </span>set<span class="_ _15"> </span><span class="ff6">address<span class="_ _14"> </span></span>to<span class="_ _14"> </span>the<span class="_ _14"> </span>desired<span class="_ _14"> </span>address<span class="_ _0"></span>,<span class="_ _15"> </span><span class="ff6">data<span class="_ _21"> </span>in<span class="_ _14"> </span></span>to<span class="_ _14"> </span>the<span class="_ _14"> </span>desired<span class="_ _15"> </span>value<span class="_ _1"></span>,<span class="_ _15"> </span>and</div><div class="t m5 x17 h26 y638 ff6 fs19 fc2 sc0 ls0 ws0">write<span class="_ _10"> </span><span class="ff7">to<span class="_"> </span>1.<span class="_"> </span>W<span class="_ _0"></span>hen<span class="_"> </span>we<span class="_"> </span>then<span class="_"> </span>operate<span class="_"> </span>the<span class="_"> </span>clock,<span class="_ _13"> </span>the<span class="_"> </span>speciﬁed<span class="_"> </span>location<span class="_"> </span>in<span class="_"> </span>the<span class="_"> </span>memory</span></div><div class="t m5 x17 h26 y639 ff7 fs19 fc2 sc0 ls0 ws0">will<span class="_ _16"> </span>be<span class="_ _16"> </span>updated,<span class="_ _16"> </span>as<span class="_ _16"> </span>long<span class="_ _16"> </span>as<span class="_ _16"> </span>the<span class="_ _16"> </span>address<span class="_ _11"> </span>is<span class="_ _16"> </span>valid.<span class="_ _16"> </span>As<span class="_ _16"> </span>with<span class="_ _16"> </span>the<span class="_ _16"> </span>read<span class="_ _16"> </span>operation,<span class="_ _16"> </span>the</div><div class="t m5 x17 h26 y63a ff6 fs19 fc2 sc0 ls0 ws0">error<span class="_ _16"> </span><span class="ff7">signal<span class="_ _14"> </span>will<span class="_ _14"> </span>be<span class="_ _14"> </span>set<span class="_ _16"> </span>to<span class="_ _14"> </span>1<span class="_ _14"> </span>if<span class="_ _14"> </span>the<span class="_ _14"> </span>address<span class="_ _16"> </span>is<span class="_ _14"> </span>invalid.<span class="_ _14"> </span>T<span class="_ _1"></span>his<span class="_ _14"> </span>signal<span class="_ _14"> </span>is<span class="_ _14"> </span>generated<span class="_ _14"> </span>by</span></div><div class="t m5 x17 h26 y63b ff7 fs19 fc2 sc0 ls0 ws0">combinational<span class="_ _16"> </span>logic,<span class="_ _16"> </span>since<span class="_ _16"> </span>the<span class="_ _14"> </span>required<span class="_ _16"> </span>bounds<span class="_ _16"> </span>checking<span class="_ _16"> </span>is<span class="_ _14"> </span>purely<span class="_ _16"> </span>a<span class="_ _16"> </span>function<span class="_ _16"> </span>of</div><div class="t m5 x17 h26 y63c ff7 fs19 fc2 sc0 ls0 ws0">the<span class="_"> </span>address<span class="_"> </span>input<span class="_"> </span>and<span class="_"> </span>does<span class="_"> </span>not<span class="_"> </span>involve<span class="_"> </span>saving<span class="_"> </span>any<span class="_"> </span>state<span class="_ _1"></span>.</div></div><div class="pi" data-data='{"ctm":[2.000000,0.000000,0.000000,2.000000,0.000000,0.000000]}'></div></div>
