<div id="pf15a" class="pf w2 h11" data-page-no="15a"><div class="pc pc15a w2 h11"><img class="bi x0 y0 w1 h1" alt="" src="csapp/bg15a.png"/><div class="t m5 x225 h28 y9b ff6 fs1f fc2 sc0 ls0 ws0">Section<span class="_ _10"> </span>3.12<span class="_ _60"> </span>Summar<span class="_ _2"></span>y<span class="_ _1b"> </span><span class="ffe fs1e">345</span></div><div class="t m5 x2c h2d ye7 ff6 fs20 fc6 sc0 ls0 ws0">8<span class="_ _45"> </span><span class="ffd fs1e fc2">vunpcklps<span class="_ _6f"> </span>%xmm1,<span class="_ _1f"> </span>%xmm1,<span class="_ _e"> </span>%xmm1</span></div><div class="t m5 x2c h2d yc4d ff6 fs20 fc6 sc0 ls0 ws0">9<span class="_ _45"> </span><span class="ffd fs1e fc2">vcvtps2pd<span class="_ _6f"> </span>%xmm1,<span class="_ _1f"> </span>%xmm0</span></div><div class="t m5 x17 h2d yecb ff6 fs20 fc6 sc0 ls0 ws0">10<span class="_ _45"> </span><span class="ffd fs1e fc2">ret</span></div><div class="t m5 x17 h2d yecc ff6 fs20 fc6 sc0 ls0 ws0">11<span class="_ _1c"> </span><span class="ffd fs1e fc2">.L8:</span></div><div class="t m5 x17 h2d yecd ff6 fs20 fc6 sc0 ls0 ws0">12<span class="_ _45"> </span><span class="ffd fs1e fc2">vaddss<span class="_ _1a"> </span>%xmm1,<span class="_ _e"> </span>%xmm1,<span class="_ _1f"> </span>%xmm1</span></div><div class="t m5 x17 h2d yece ff6 fs20 fc6 sc0 ls0 ws0">13<span class="_ _45"> </span><span class="ffd fs1e fc2">vcvtsi2ssq<span class="_ _5a"> </span>%rsi,<span class="_ _1f"> </span>%xmm0,<span class="_ _e"> </span>%xmm0</span></div><div class="t m5 x17 h2d yecf ff6 fs20 fc6 sc0 ls0 ws0">14<span class="_ _45"> </span><span class="ffd fs1e fc2">vaddss<span class="_ _1a"> </span>%xmm1,<span class="_ _e"> </span>%xmm0,<span class="_ _1f"> </span>%xmm0</span></div><div class="t m5 x17 h2d yed0 ff6 fs20 fc6 sc0 ls0 ws0">15<span class="_ _45"> </span><span class="ffd fs1e fc2">vunpcklps<span class="_ _6f"> </span>%xmm0,<span class="_ _1f"> </span>%xmm0,<span class="_ _e"> </span>%xmm0</span></div><div class="t m5 x17 h2e y20fe ff6 fs20 fc6 sc0 ls0 ws0">16</div><div class="t m5 xd1 h2d y1a10 ffd fs1e fc2 sc0 ls0 ws0">vcvtps2pd<span class="_ _6f"> </span>%xmm0,<span class="_ _1f"> </span>%xmm0</div><div class="t m5 x17 h2d yed3 ff6 fs20 fc6 sc0 ls0 ws0">17<span class="_ _45"> </span><span class="ffd fs1e fc2">ret</span></div><div class="t m5 x26 h26 y313a ff7 fs19 fc2 sc0 ls0 ws0">Write<span class="_"> </span>a<span class="_"> </span>C<span class="_"> </span>version<span class="_"> </span>of<span class="_"> </span><span class="ffd">funct3</span>.</div><div class="t m5 x17 h41 y313b ffe fs29 fc1 sc0 ls0 ws0">3.11.7<span class="_ _48"> </span><span class="fs19">Observations<span class="_"> </span>about<span class="_"> </span>Floating-Point<span class="_"> </span>Code</span></div><div class="t m5 x17 h26 y313c ff7 fs19 fc1 sc0 ls0 ws0">W<span class="_ _3"></span>e<span class="_ _13"> </span>see<span class="_ _13"> </span>that<span class="_ _13"> </span>the<span class="_ _13"> </span>general<span class="_ _13"> </span>style<span class="_ _13"> </span>of<span class="_ _13"> </span>machine<span class="_ _6"> </span>code<span class="_ _13"> </span>generated<span class="_ _13"> </span>for<span class="_ _13"> </span>operating<span class="_ _13"> </span>on<span class="_ _13"> </span>ﬂoating-</div><div class="t m5 x17 h26 y313d ff7 fs19 fc1 sc0 ls0 ws0">point<span class="_ _6"> </span>data<span class="_ _6"> </span>with<span class="_ _6"> </span>A<span class="_ _7"></span>VX2<span class="_ _6"> </span>is<span class="_ _13"> </span>similar<span class="_ _a"> </span>to<span class="_ _13"> </span>what<span class="_ _a"> </span>we<span class="_ _6"> </span>have<span class="_ _13"> </span>seen<span class="_ _a"> </span>for<span class="_ _13"> </span>operating<span class="_ _a"> </span>on<span class="_ _6"> </span>integer<span class="_ _13"> </span>data.</div><div class="t m5 x17 h26 y313e ff7 fs19 fc1 sc0 ls0 ws0">Both<span class="_ _13"> </span>use<span class="_ _13"> </span>a<span class="_ _6"> </span>collection<span class="_ _13"> </span>of<span class="_ _13"> </span>registers<span class="_ _13"> </span>to<span class="_ _13"> </span>hold<span class="_ _13"> </span>and<span class="_ _6"> </span>operate<span class="_ _13"> </span>on<span class="_ _13"> </span>values<span class="_ _1"></span>,<span class="_ _13"> </span>and<span class="_ _13"> </span>they<span class="_ _13"> </span>use<span class="_ _13"> </span>these</div><div class="t m5 x17 h26 y313f ff7 fs19 fc1 sc0 ls0 ws0">registers<span class="_"> </span>for<span class="_"> </span>passing<span class="_"> </span>function<span class="_"> </span>arguments<span class="_ _1"></span>.</div><div class="t m5 x26 h26 y3140 ff7 fs19 fc1 sc0 ls0 ws0">Of<span class="_ _6"> </span>course,<span class="_ _6"> </span>there<span class="_ _13"> </span>are<span class="_ _6"> </span>many<span class="_ _13"> </span>complexities<span class="_ _a"> </span>in<span class="_ _13"> </span>dealing<span class="_ _6"> </span>with<span class="_ _13"> </span>the<span class="_ _6"> </span>different<span class="_ _6"> </span>data<span class="_ _13"> </span>types</div><div class="t m5 x17 h26 y3141 ff7 fs19 fc1 sc0 ls0 ws0">and<span class="_ _11"> </span>the<span class="_ _16"> </span>rules<span class="_ _16"> </span>for<span class="_ _11"> </span>evaluating<span class="_ _16"> </span>expressions<span class="_ _11"> </span>containing<span class="_ _16"> </span>a<span class="_ _16"> </span>mixture<span class="_ _11"> </span>of<span class="_ _16"> </span>data<span class="_ _11"> </span>types<span class="_ _1"></span>,<span class="_ _16"> </span>and</div><div class="t m5 x17 h26 y3142 ff7 fs19 fc1 sc0 ls0 ws0">A<span class="_ _7"></span>VX2<span class="_ _13"> </span>code<span class="_ _13"> </span>involves<span class="_ _13"> </span>many<span class="_"> </span>more<span class="_ _13"> </span>different<span class="_ _13"> </span>instructions<span class="_ _13"> </span>and<span class="_ _13"> </span>formats<span class="_"> </span>than<span class="_ _13"> </span>is<span class="_ _13"> </span>usually</div><div class="t m5 x17 h26 y3143 ff7 fs19 fc1 sc0 ls0 ws0">seen<span class="_"> </span>with<span class="_"> </span>functions<span class="_"> </span>that<span class="_"> </span>perform<span class="_"> </span>only<span class="_"> </span>integer<span class="_"> </span>arithmetic.</div><div class="t m5 x26 h26 y3144 ff7 fs19 fc1 sc0 ls0 ws0">A<span class="_ _7"></span>VX2<span class="_"> </span>also<span class="_"> </span>has<span class="_"> </span>the<span class="_"> </span>potential<span class="_"> </span>to<span class="_"> </span>make<span class="_"> </span>computations<span class="_"> </span>run<span class="_ _13"> </span>faster<span class="_"> </span>by<span class="_"> </span>performing</div><div class="t m5 x17 h26 y3145 ff7 fs19 fc1 sc0 ls0 ws0">parallel<span class="_ _6"> </span>operations<span class="_ _13"> </span>on<span class="_ _6"> </span>packed<span class="_ _13"> </span>data.<span class="_ _6"> </span>Compiler<span class="_ _6"> </span>developers<span class="_ _13"> </span>are<span class="_ _6"> </span>working<span class="_ _13"> </span>on<span class="_ _6"> </span>automat-</div><div class="t m5 x17 h26 y3146 ff7 fs19 fc1 sc0 ls0 ws0">ing<span class="_"> </span>the<span class="_"> </span>conversion<span class="_"> </span>of<span class="_"> </span>scalar<span class="_"> </span>code<span class="_"> </span>to<span class="_ _11"> </span>parallel<span class="_"> </span>code<span class="_ _0"></span>,<span class="_"> </span>but<span class="_"> </span>currently<span class="_"> </span>the<span class="_"> </span>most<span class="_"> </span>reliable</div><div class="t m5 x17 h26 y3147 ff7 fs19 fc1 sc0 ls0 ws0">way<span class="_ _13"> </span>to<span class="_ _13"> </span>achieve<span class="_"> </span>higher<span class="_ _13"> </span>performance<span class="_ _13"> </span>through<span class="_ _13"> </span>parallelism<span class="_ _13"> </span>is<span class="_"> </span>to<span class="_ _13"> </span>use<span class="_ _13"> </span>the<span class="_ _13"> </span>extensions<span class="_ _13"> </span>to</div><div class="t m5 x17 h26 y3148 ff7 fs19 fc1 sc0 ls0 ws0">the<span class="_ _13"> </span>C<span class="_ _13"> </span>language<span class="_ _13"> </span>supported<span class="_ _13"> </span>by<span class="_ _13"> </span><span class="ff9">gcc<span class="_ _13"> </span></span>for<span class="_ _13"> </span>manipulating<span class="_ _6"> </span>vectors<span class="_ _13"> </span>of<span class="_ _13"> </span>data.<span class="_ _13"> </span>See<span class="_ _13"> </span>W<span class="_ _3"></span>eb<span class="_ _13"> </span>Aside</div><div class="t m5 x17 h26 y3149 ff9 fs19 fc1 sc0 ls0 ws0">opt:simd<span class="_ _10"> </span><span class="ff7">on<span class="_"> </span>page<span class="_"> </span>582<span class="_"> </span>to<span class="_"> </span>see<span class="_"> </span>how<span class="_"> </span>this<span class="_"> </span>can<span class="_"> </span>be<span class="_"> </span>done<span class="_ _0"></span>.</span></div><div class="t m5 x17 h3b y6fd fff fs24 fc6 sc0 ls0 ws0">3.12<span class="_ _17"> </span><span class="ffe fs18">Summar<span class="_ _2"></span>y</span></div><div class="t m5 x17 h26 y2455 ff7 fs19 fc1 sc0 ls0 ws0">In<span class="_"> </span>this<span class="_"> </span>chapter,<span class="_"> </span>we<span class="_ _11"> </span>have<span class="_"> </span>peered<span class="_"> </span>beneath<span class="_ _11"> </span>the<span class="_"> </span>layer<span class="_ _11"> </span>of<span class="_"> </span>abstraction<span class="_ _11"> </span>provided<span class="_"> </span>by<span class="_"> </span>the</div><div class="t m5 x17 h26 y2456 ff7 fs19 fc1 sc0 ls0 ws0">C<span class="_"> </span>language<span class="_"> </span>to<span class="_"> </span>get<span class="_"> </span>a<span class="_"> </span>view<span class="_ _11"> </span>of<span class="_"> </span>machine-level<span class="_"> </span>programming.<span class="_"> </span>By<span class="_"> </span>having<span class="_"> </span>the<span class="_"> </span>compiler</div><div class="t m5 x17 h26 y2457 ff7 fs19 fc1 sc0 ls0 ws0">generate<span class="_ _13"> </span>an<span class="_"> </span>assembly-code<span class="_ _13"> </span>representation<span class="_ _13"> </span>of<span class="_ _13"> </span>the<span class="_"> </span>machine-level<span class="_ _13"> </span>program,<span class="_ _13"> </span>we<span class="_"> </span>gain</div><div class="t m5 x17 h26 y2458 ff7 fs19 fc1 sc0 ls0 ws0">insights<span class="_ _6"> </span>into<span class="_ _13"> </span>both<span class="_ _6"> </span>the<span class="_ _6"> </span>compiler<span class="_ _13"> </span>and<span class="_ _6"> </span>its<span class="_ _13"> </span>optimization<span class="_ _6"> </span>capabilities<span class="_ _1"></span>,<span class="_ _13"> </span>along<span class="_ _6"> </span>with<span class="_ _6"> </span>the<span class="_ _13"> </span>ma-</div><div class="t m5 x17 h26 y2459 ff7 fs19 fc1 sc0 ls0 ws0">chine<span class="_ _1"></span>,<span class="_"> </span>its<span class="_ _13"> </span>data<span class="_"> </span>types<span class="_ _3"></span>,<span class="_"> </span>and<span class="_ _13"> </span>its<span class="_ _13"> </span>instruction<span class="_"> </span>set.<span class="_ _13"> </span>In<span class="_ _13"> </span>Chapter<span class="_"> </span>5,<span class="_ _13"> </span>we<span class="_"> </span>will<span class="_ _13"> </span>see<span class="_ _13"> </span>that<span class="_"> </span>knowing</div><div class="t m5 x17 h26 y4fe ff7 fs19 fc1 sc0 ls0 ws0">the<span class="_ _13"> </span>characteristics<span class="_ _13"> </span>of<span class="_"> </span>a<span class="_ _13"> </span>compiler<span class="_ _13"> </span>can<span class="_ _13"> </span>help<span class="_"> </span>when<span class="_ _13"> </span>trying<span class="_ _13"> </span>to<span class="_ _13"> </span>write<span class="_ _13"> </span>programs<span class="_"> </span>that<span class="_ _13"> </span>have</div><div class="t m5 x17 h26 y4ff ff7 fs19 fc1 sc0 ls0 ws0">efﬁcient<span class="_ _6"> </span>mappings<span class="_ _13"> </span>onto<span class="_ _6"> </span>the<span class="_ _13"> </span>machine<span class="_ _1"></span>.<span class="_ _6"> </span>W<span class="_ _1"></span>e<span class="_ _6"> </span>have<span class="_ _13"> </span>also<span class="_ _6"> </span>gotten<span class="_ _13"> </span>a<span class="_ _6"> </span>more<span class="_ _6"> </span>complete<span class="_ _13"> </span>picture</div><div class="t m5 x17 h26 y500 ff7 fs19 fc1 sc0 ls0 ws0">of<span class="_ _16"> </span>how<span class="_ _11"> </span>the<span class="_ _16"> </span>program<span class="_ _16"> </span>stores<span class="_ _11"> </span>data<span class="_ _16"> </span>in<span class="_ _16"> </span>different<span class="_ _16"> </span>memory<span class="_ _11"> </span>regions<span class="_ _1"></span>.<span class="_ _16"> </span>In<span class="_ _16"> </span>Chapter<span class="_ _16"> </span>12,<span class="_ _16"> </span>we</div><div class="t m5 x17 h26 y501 ff7 fs19 fc1 sc0 ls0 ws0">will<span class="_ _16"> </span>see<span class="_ _16"> </span>many<span class="_ _16"> </span>examples<span class="_ _16"> </span>where<span class="_ _16"> </span>application<span class="_ _16"> </span>programmers<span class="_ _11"> </span>need<span class="_ _16"> </span>to<span class="_ _16"> </span>know<span class="_ _16"> </span>whether</div><div class="t m5 x17 h26 y502 ff7 fs19 fc1 sc0 ls0 ws0">a<span class="_ _11"> </span>program<span class="_ _16"> </span>variable<span class="_ _11"> </span>is<span class="_ _11"> </span>on<span class="_ _16"> </span>the<span class="_ _11"> </span>run-time<span class="_ _11"> </span>stack,<span class="_ _16"> </span>in<span class="_ _11"> </span>some<span class="_ _16"> </span>dynamically<span class="_ _11"> </span>allocated<span class="_ _11"> </span>data</div><div class="t m5 x17 h26 y503 ff7 fs19 fc1 sc0 ls0 ws0">structure<span class="_ _1"></span>,<span class="_ _11"> </span>or<span class="_"> </span>part<span class="_"> </span>of<span class="_"> </span>the<span class="_ _11"> </span>global<span class="_"> </span>program<span class="_"> </span>data.<span class="_ _11"> </span>Understanding<span class="_"> </span>how<span class="_"> </span>programs<span class="_"> </span>map</div><div class="t m5 x17 h26 y504 ff7 fs19 fc1 sc0 ls0 ws0">onto<span class="_"> </span>machines<span class="_ _13"> </span>makes<span class="_"> </span>it<span class="_"> </span>easier<span class="_ _13"> </span>to<span class="_"> </span>understand<span class="_"> </span>the<span class="_ _13"> </span>differences<span class="_"> </span>between<span class="_"> </span>these<span class="_ _13"> </span>kinds</div><div class="t m5 x17 h26 y505 ff7 fs19 fc1 sc0 ls0 ws0">of<span class="_"> </span>storage<span class="_ _1"></span>.</div></div><div class="pi" data-data='{"ctm":[2.000000,0.000000,0.000000,2.000000,0.000000,0.000000]}'></div></div>
