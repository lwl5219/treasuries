<div id="pf2f2" class="pf w2 h11" data-page-no="2f2"><div class="pc pc2f2 w2 h11"><img class="bi x0 y0 w1 h1" alt="" src="csapp/bg2f2.png"/><div class="t m5 x107 h28 y9b ff6 fs1f fc2 sc0 ls0 ws0">Solutions<span class="_ _10"> </span>to<span class="_ _10"> </span>Practice<span class="_ _10"> </span>Problems<span class="_ _1b"> </span><span class="ffe fs1e">753</span></div><div class="t m5 x17 h26 y9c ff7 fs19 fc2 sc0 ls0 ws0">referenced<span class="_"> </span>by<span class="_ _13"> </span><span class="ffd">a</span>.<span class="_"> </span>F<span class="_ _1"></span>or<span class="_"> </span>each<span class="_"> </span>of<span class="_ _13"> </span>the<span class="_"> </span>following<span class="_"> </span>scenarios<span class="_ _3"></span>,<span class="_"> </span>show<span class="_"> </span>the<span class="_ _13"> </span>minimal<span class="_"> </span>command</div><div class="t m5 x17 h26 y409 ff7 fs19 fc2 sc0 ls0 ws0">line<span class="_"> </span>(i.e<span class="_ _1"></span>.,<span class="_"> </span>one<span class="_"> </span>with<span class="_"> </span>the<span class="_"> </span>least<span class="_"> </span>number<span class="_"> </span>of<span class="_ _13"> </span>object<span class="_"> </span>ﬁle<span class="_"> </span>and<span class="_"> </span>library<span class="_"> </span>arguments)<span class="_"> </span>that<span class="_"> </span>will</div><div class="t m5 x17 h26 y40a ff7 fs19 fc2 sc0 ls0 ws0">allow<span class="_"> </span>the<span class="_"> </span>static<span class="_"> </span>linker<span class="_"> </span>to<span class="_"> </span>resolve<span class="_"> </span>all<span class="_"> </span>symbol<span class="_"> </span>references:</div><div class="t m5 x34 h46 y5c86 ff7 fs19 fc2 sc0 ls0 ws0">A.<span class="_ _1f"> </span><span class="ffd">p.o<span class="_ _10"> </span><span class="ff12">→<span class="_ _10"> </span></span>libx.a<span class="_ _10"> </span><span class="ff12">→<span class="_ _10"> </span></span>p.o</span></div><div class="t m5 x34 h46 y632d ff7 fs19 fc2 sc0 ls2a ws0">B.<span class="_ _66"> </span><span class="ffd ls0">p.o<span class="_ _10"> </span><span class="ff12">→<span class="_ _10"> </span></span>libx.a<span class="_ _10"> </span><span class="ff12">→<span class="_ _10"> </span></span>liby.a<span class="_ _1e"> </span><span class="ffa">and<span class="_ _22"> </span></span>liby.a<span class="_ _10"> </span><span class="ff12">→<span class="_ _10"> </span></span>libx.a</span></div><div class="t m5 x34 h46 y1d3f ff7 fs19 fc2 sc0 ls22 ws0">C.<span class="_ _24"> </span><span class="ffd ls0">p.o<span class="_ _10"> </span><span class="ff12">→<span class="_ _10"> </span></span>libx.a<span class="_ _10"> </span><span class="ff12">→<span class="_ _11"> </span></span>liby.a<span class="_ _10"> </span><span class="ff12">→<span class="_ _10"> </span></span>libz.a<span class="_ _1e"> </span><span class="ffa">and<span class="_ _1f"> </span></span>liby.a<span class="_ _10"> </span><span class="ff12">→<span class="_ _10"> </span></span>libx.a<span class="_ _11"> </span><span class="ff12">→<span class="_ _10"> </span></span>libz.a</span></div><div class="t m5 x17 h73 y632e ffe fs1e fc6 sc0 ls0 ws0">7.11<span class="_ _23"> </span><span class="ff10 fs19">◆◆</span></div><div class="t m5 x17 h26 y632f ff7 fs19 fc1 sc0 ls0 ws0">T<span class="_ _1"></span>he<span class="_ _13"> </span>program<span class="_ _13"> </span>header<span class="_ _6"> </span>in<span class="_ _13"> </span>F<span class="_ _0"></span>igure<span class="_ _13"> </span>7.14<span class="_ _6"> </span>indicates<span class="_ _13"> </span>that<span class="_ _13"> </span>the<span class="_ _6"> </span>data<span class="_ _13"> </span>segment<span class="_ _13"> </span>occupies<span class="_ _13"> </span><span class="ffd">0x230</span></div><div class="t m5 x17 h26 y6330 ff7 fs19 fc1 sc0 ls0 ws0">bytes<span class="_ _14"> </span>in<span class="_ _15"> </span>memory<span class="_ _3"></span>.<span class="_ _15"> </span>However,<span class="_ _15"> </span>only<span class="_ _15"> </span>the<span class="_ _15"> </span>ﬁrst<span class="_ _15"> </span><span class="ffd">0x228<span class="_ _15"> </span></span>bytes<span class="_ _15"> </span>of<span class="_ _14"> </span>these<span class="_ _15"> </span>come<span class="_ _15"> </span>from<span class="_ _15"> </span>the</div><div class="t m5 x17 h26 y6331 ff7 fs19 fc1 sc0 ls0 ws0">sections<span class="_"> </span>of<span class="_"> </span>the<span class="_"> </span>executable<span class="_"> </span>ﬁle<span class="_ _1"></span>.<span class="_"> </span>What<span class="_"> </span>causes<span class="_"> </span>this<span class="_"> </span>discrepancy?</div><div class="t m5 x17 h73 y6332 ffe fs1e fc6 sc0 ls0 ws0">7.12<span class="_ _23"> </span><span class="ff10 fs19">◆◆</span></div><div class="t m5 x17 h26 y6333 ff7 fs19 fc1 sc0 ls0 ws0">Consider<span class="_"> </span>the<span class="_"> </span>call<span class="_"> </span>to<span class="_"> </span>function<span class="_"> </span><span class="ffd">swap<span class="_ _10"> </span></span>in<span class="_"> </span>object<span class="_"> </span>ﬁle<span class="_"> </span><span class="ffd">m.o<span class="_ _10"> </span></span>(Problem<span class="_"> </span>7.6).</div><div class="t m5 x245 h2d y6334 ffd fs1e fc2 sc0 ls0 ws0">9:<span class="_ _3f"> </span>e8<span class="_ _e"> </span>00<span class="_ _1f"> </span>00<span class="_ _1f"> </span>00<span class="_ _e"> </span>00<span class="_ _86"> </span>callq<span class="_ _1a"> </span>e<span class="_ _1f"> </span>&lt;main+0xe&gt;<span class="_ _62"> </span><span class="ff13 fs35 fc6">swap()</span></div><div class="t m5 x17 h26 y6335 ff7 fs19 fc2 sc0 ls0 ws0">with<span class="_"> </span>the<span class="_"> </span>following<span class="_"> </span>relocation<span class="_"> </span>entry:</div><div class="t m5 x17 h2d y6336 ffd fs1e fc2 sc0 ls0 ws0">r.offset<span class="_ _e"> </span>=<span class="_ _1f"> </span>0xa</div><div class="t m5 x17 h2d y6337 ffd fs1e fc2 sc0 ls0 ws0">r.symbol<span class="_ _e"> </span>=<span class="_ _1f"> </span>swap</div><div class="t m5 x17 h2d y6338 ffd fs1e fc2 sc0 ls0 ws0">r.type<span class="_ _3f"> </span>=<span class="_ _e"> </span>R_X86_64_PC32</div><div class="t m5 x17 h2d y6339 ffd fs1e fc2 sc0 ls0 ws0">r.addend<span class="_ _e"> </span>=<span class="_ _1f"> </span>-4</div><div class="t m5 x34 h26 y633a ff7 fs19 fc2 sc0 ls0 ws0">A.<span class="_ _1f"> </span>Suppose<span class="_ _6"> </span>that<span class="_ _13"> </span>the<span class="_ _6"> </span>linker<span class="_ _13"> </span>relocates<span class="_ _6"> </span><span class="ffd">.text<span class="_ _13"> </span></span>in<span class="_ _a"> </span><span class="ffd">m.o<span class="_ _13"> </span></span>to<span class="_ _6"> </span>address<span class="_ _13"> </span><span class="ffd">0x4004e0<span class="_ _6"> </span></span>and<span class="_ _13"> </span><span class="ffd">swap</span></div><div class="t m5 x2d h26 y633b ff7 fs19 fc2 sc0 ls0 ws0">to<span class="_ _16"> </span>address<span class="_ _16"> </span><span class="ffd">0x4004f8</span>.<span class="_ _11"> </span>Then<span class="_ _11"> </span>what<span class="_ _16"> </span>is<span class="_ _16"> </span>the<span class="_ _16"> </span>value<span class="_ _16"> </span>of<span class="_ _11"> </span>the<span class="_ _16"> </span>relocated<span class="_ _16"> </span>reference<span class="_ _16"> </span>to</div><div class="t m5 x2d h26 y633c ffd fs19 fc2 sc0 ls0 ws0">swap<span class="_ _10"> </span><span class="ff7">in<span class="_"> </span>the<span class="_"> </span></span>callq<span class="_ _10"> </span><span class="ff7">instruction?</span></div><div class="t m5 x34 h26 y633d ff7 fs19 fc2 sc0 ls0 ws0">B<span class="_ _3"></span>.<span class="_ _1d"> </span>Suppose<span class="_ _13"> </span>that<span class="_ _6"> </span>the<span class="_ _13"> </span>linker<span class="_ _6"> </span>relocates<span class="_ _6"> </span><span class="ffd">.text<span class="_ _13"> </span></span>in<span class="_ _6"> </span><span class="ffd">m.o<span class="_ _13"> </span></span>to<span class="_ _6"> </span>address<span class="_ _13"> </span><span class="ffd">0x4004d0<span class="_ _6"> </span></span>and<span class="_ _6"> </span><span class="ffd">swap</span></div><div class="t m5 x2d h26 y633e ff7 fs19 fc2 sc0 ls0 ws0">to<span class="_ _16"> </span>address<span class="_ _16"> </span><span class="ffd">0x400500</span>.<span class="_ _11"> </span>Then<span class="_ _11"> </span>what<span class="_ _16"> </span>is<span class="_ _16"> </span>the<span class="_ _16"> </span>value<span class="_ _16"> </span>of<span class="_ _11"> </span>the<span class="_ _16"> </span>relocated<span class="_ _16"> </span>reference<span class="_ _16"> </span>to</div><div class="t m5 x2d h26 y633f ffd fs19 fc2 sc0 ls0 ws0">swap<span class="_ _10"> </span><span class="ff7">in<span class="_"> </span>the<span class="_"> </span></span>callq<span class="_ _10"> </span><span class="ff7">instruction?</span></div><div class="t m5 x17 h73 y6340 ffe fs1e fc6 sc0 ls0 ws0">7.13<span class="_ _23"> </span><span class="ff10 fs19">◆◆</span></div><div class="t m5 x17 h26 y6341 ff7 fs19 fc1 sc0 ls0 ws0">Performing<span class="_ _f"> </span>the<span class="_ _e"> </span>following<span class="_ _21"> </span>tasks<span class="_ _e"> </span>will<span class="_ _f"> </span>help<span class="_ _f"> </span>you<span class="_ _e"> </span>become<span class="_ _f"> </span>more<span class="_ _f"> </span>familiar<span class="_ _e"> </span>with<span class="_ _f"> </span>the</div><div class="t m5 x17 h26 y6342 ff7 fs19 fc1 sc0 ls0 ws0">various<span class="_"> </span>tools<span class="_"> </span>for<span class="_"> </span>manipulating<span class="_"> </span>object<span class="_"> </span>ﬁles<span class="_ _1"></span>.</div><div class="t m5 x34 h26 y6343 ff7 fs19 fc1 sc0 ls0 ws0">A.<span class="_ _1f"> </span>How<span class="_"> </span>many<span class="_ _11"> </span>object<span class="_ _11"> </span>ﬁles<span class="_ _11"> </span>are<span class="_ _11"> </span>contained<span class="_"> </span>in<span class="_ _11"> </span>the<span class="_ _11"> </span>versions<span class="_ _11"> </span>of<span class="_ _11"> </span><span class="ffd">libc.a<span class="_ _11"> </span></span>and<span class="_"> </span><span class="ffd">libm.a</span></div><div class="t m5 x2d h26 y6344 ff7 fs19 fc1 sc0 ls0 ws0">on<span class="_"> </span>your<span class="_"> </span>system?</div><div class="t m5 x34 h26 y6345 ff7 fs19 fc1 sc0 ls0 ws0">B<span class="_ _3"></span>.<span class="_ _1d"> </span>Does<span class="_"> </span><span class="ffd">gcc<span class="_ _16"> </span>-Og<span class="_ _10"> </span></span>produce<span class="_"> </span>different<span class="_"> </span>executable<span class="_"> </span>code<span class="_"> </span>than<span class="_"> </span><span class="ffd">gcc<span class="_ _16"> </span>-Og<span class="_ _11"> </span>-g</span>?</div><div class="t m5 x34 h26 y6346 ff7 fs19 fc1 sc0 ls0 ws0">C.<span class="_ _25"> </span>What<span class="_"> </span>shared<span class="_"> </span>libraries<span class="_"> </span>does<span class="_"> </span>the<span class="_"> </span><span class="ff9">gcc<span class="_ _10"> </span></span>driver<span class="_"> </span>on<span class="_"> </span>your<span class="_"> </span>system<span class="_"> </span>use?</div><div class="t m5 x17 h29 y6347 ffe fs14 fc1 sc0 ls0 ws0">Solutions<span class="_"> </span>to<span class="_"> </span>Practice<span class="_"> </span>Problems</div><div class="t m5 x17 h28 y3349 ffe fs1e fc6 sc0 ls0 ws0">Solution<span class="_"> </span>to<span class="_"> </span>Problem<span class="_"> </span>7.1<span class="_ _e"> </span><span class="fs16">(page<span class="_"> </span>714)</span></div><div class="t m5 x17 h26 ye14 ff7 fs19 fc1 sc0 ls0 ws0">T<span class="_ _1"></span>he<span class="_ _11"> </span>purpose<span class="_ _11"> </span>of<span class="_ _11"> </span>this<span class="_ _11"> </span>problem<span class="_ _11"> </span>is<span class="_ _11"> </span>to<span class="_ _11"> </span>help<span class="_ _11"> </span>you<span class="_ _11"> </span>understand<span class="_ _11"> </span>the<span class="_ _11"> </span>relationship<span class="_ _16"> </span>between</div><div class="t m5 x17 h26 ye15 ff7 fs19 fc1 sc0 ls0 ws0">linker<span class="_ _13"> </span>symbols<span class="_ _6"> </span>and<span class="_ _13"> </span>C<span class="_ _6"> </span>variables<span class="_ _13"> </span>and<span class="_ _6"> </span>functions<span class="_ _1"></span>.<span class="_ _13"> </span>Notice<span class="_ _13"> </span>that<span class="_ _6"> </span>the<span class="_ _13"> </span>C<span class="_ _6"> </span>local<span class="_ _13"> </span>variable<span class="_ _13"> </span><span class="ffd">temp</span></div><div class="t m5 x17 h26 ye16 ff7 fs19 fc1 sc0 ls0 ws0">does<span class="_"> </span><span class="ffa">not<span class="_ _11"> </span></span>have<span class="_"> </span>a<span class="_"> </span>symbol<span class="_"> </span>table<span class="_"> </span>entry<span class="_ _3"></span>.</div></div><div class="pi" data-data='{"ctm":[2.000000,0.000000,0.000000,2.000000,0.000000,0.000000]}'></div></div>
