<div id="pf341" class="pf w2 h11" data-page-no="341"><div class="pc pc341 w2 h11"><img class="bi x0 y0 w1 h1" alt="" src="csapp/bg341.png"/><div class="t m5 x14 h28 y9b ffe fs1e fc2 sc0 ls0 ws0">832<span class="_ _1b"> </span><span class="ff6 fs1f">Chapter<span class="_ _10"> </span>8<span class="_ _3d"> </span>Exceptional<span class="_ _10"> </span>Control<span class="_ _10"> </span>Flow</span></div><div class="t m5 x14 h2d y3829 ffd fs1e fc2 sc0 ls0 ws0">linux&gt;<span class="_ _e"> </span><span class="ff13">./shell<span class="_ _f6"> </span><span class="fs35 fc6">Run<span class="_ _f"> </span>your<span class="_ _f"> </span>shell<span class="_ _f"> </span>program</span></span></div><div class="t m5 x14 h2d y3aa2 ffd fs1e fc2 sc0 ls0 ws0">&gt;<span class="ff13">bogus</span></div><div class="t m5 x14 h2d y6b64 ffd fs1e fc2 sc0 ls0 ws0">bogus:<span class="_ _e"> </span>Command<span class="_ _1f"> </span>not<span class="_ _1f"> </span>found.</div><div class="t m5 xe3 h61 y3aa3 ff13 fs35 fc6 sc0 ls0 ws0">Execve<span class="_ _f"> </span>canâ€™t<span class="_ _f"> </span>find<span class="_ _f"> </span>executable</div><div class="t m5 x14 h2d y3aa4 ffd fs1e fc2 sc0 ls0 ws0">&gt;<span class="ff13">foo<span class="_ _e"> </span>10</span></div><div class="t m5 x14 h2d y6b65 ffd fs1e fc2 sc0 ls0 ws0">Job<span class="_ _e"> </span>5035<span class="_ _1f"> </span>terminated<span class="_ _1f"> </span>by<span class="_ _e"> </span>signal:<span class="_ _1f"> </span>Interrupt</div><div class="t m5 xe3 h61 y3aa5 ff13 fs35 fc6 sc0 ls0 ws0">User<span class="_ _f"> </span>types<span class="_ _f"> </span>Ctrl+C</div><div class="t m5 x14 h2d y3aa6 ffd fs1e fc2 sc0 ls0 ws0">&gt;<span class="ff13">foo<span class="_ _e"> </span>100<span class="_ _1f"> </span>&amp;</span></div><div class="t m5 x14 h2d y6b66 ffd fs1e fc2 sc0 ls0 ws0">[1]<span class="_ _e"> </span>5036<span class="_ _1f"> </span>foo<span class="_ _1f"> </span>100<span class="_ _e"> </span>&amp;</div><div class="t m5 x14 h2d y6b67 ffd fs1e fc2 sc0 ls0 ws0">&gt;<span class="ff13">foo<span class="_ _e"> </span>200<span class="_ _1f"> </span>&amp;</span></div><div class="t m5 x14 h2d y6b68 ffd fs1e fc2 sc0 ls0 ws0">[2]<span class="_ _e"> </span>5037<span class="_ _1f"> </span>foo<span class="_ _1f"> </span>200<span class="_ _e"> </span>&amp;</div><div class="t m5 x14 h2d y6b69 ffd fs1e fc2 sc0 ls0 ws0">&gt;<span class="ff13">jobs</span></div><div class="t m5 x14 h2d y6b6a ffd fs1e fc2 sc0 ls0 ws0">[1]<span class="_ _e"> </span>5036<span class="_ _1f"> </span>Running<span class="_ _46"> </span>foo<span class="_ _1f"> </span>100<span class="_ _e"> </span>&amp;</div><div class="t m5 x14 h2d y6b6b ffd fs1e fc2 sc0 ls0 ws0">[2]<span class="_ _e"> </span>5037<span class="_ _1f"> </span>Running<span class="_ _46"> </span>foo<span class="_ _1f"> </span>200<span class="_ _e"> </span>&amp;</div><div class="t m5 x14 h2d y6b6c ffd fs1e fc2 sc0 ls0 ws0">&gt;<span class="ff13">fg<span class="_ _e"> </span>%1</span></div><div class="t m5 x14 h2d y6b6d ffd fs1e fc2 sc0 ls0 ws0">Job<span class="_ _e"> </span>[1]<span class="_ _1f"> </span>5036<span class="_ _1f"> </span>stopped<span class="_ _e"> </span>by<span class="_ _1f"> </span>signal:<span class="_ _e"> </span>Stopped</div><div class="t m5 xe3 h61 y3aae ff13 fs35 fc6 sc0 ls0 ws0">User<span class="_ _f"> </span>types<span class="_ _f"> </span>Ctrl+Z</div><div class="t m5 x14 h2d y4af9 ffd fs1e fc2 sc0 ls0 ws0">&gt;<span class="ff13">jobs</span></div><div class="t m5 x14 h2d y6b6e ffd fs1e fc2 sc0 ls0 ws0">[1]<span class="_ _e"> </span>5036<span class="_ _1f"> </span>Stopped<span class="_ _46"> </span>foo<span class="_ _1f"> </span>100<span class="_ _e"> </span>&amp;</div><div class="t m5 x14 h2d y6b6f ffd fs1e fc2 sc0 ls0 ws0">[2]<span class="_ _e"> </span>5037<span class="_ _1f"> </span>Running<span class="_ _46"> </span>foo<span class="_ _1f"> </span>200<span class="_ _e"> </span>&amp;</div><div class="t m5 x14 h2d y6b70 ffd fs1e fc2 sc0 ls0 ws0">&gt;<span class="ff13">bg<span class="_ _e"> </span>5035</span></div><div class="t m5 x14 h2d y6b71 ffd fs1e fc2 sc0 ls0 ws0">5035:<span class="_ _e"> </span>No<span class="_ _1f"> </span>such<span class="_ _1f"> </span>process</div><div class="t m5 x14 h2d y6b72 ffd fs1e fc2 sc0 ls0 ws0">&gt;<span class="ff13">bg<span class="_ _e"> </span>5036</span></div><div class="t m5 x14 h2d y6b73 ffd fs1e fc2 sc0 ls0 ws0">[1]<span class="_ _e"> </span>5036<span class="_ _1f"> </span>foo<span class="_ _1f"> </span>100<span class="_ _e"> </span>&amp;</div><div class="t m5 x14 h2d y6b74 ffd fs1e fc2 sc0 ls0 ws0">&gt;<span class="ff13">/bin/kill<span class="_ _e"> </span>5036</span></div><div class="t m5 x14 h2d y6b75 ffd fs1e fc2 sc0 ls0 ws0">Job<span class="_ _e"> </span>5036<span class="_ _1f"> </span>terminated<span class="_ _1f"> </span>by<span class="_ _e"> </span>signal:<span class="_ _1f"> </span>Terminated</div><div class="t m5 x14 h2d y6b76 ffd fs1e fc2 sc0 ls0 ws0">&gt;<span class="_ _e"> </span><span class="ff13">fg<span class="_ _1f"> </span>%2</span></div><div class="t m5 xe3 h61 y4b04 ff13 fs35 fc6 sc0 ls0 ws0">Wait<span class="_ _f"> </span>for<span class="_ _f"> </span>fg<span class="_ _f"> </span>job<span class="_ _e"> </span>to<span class="_ _21"> </span>finish</div><div class="t m5 x14 h2d y4b05 ffd fs1e fc2 sc0 ls0 ws0">&gt;<span class="ff13">quit</span></div><div class="t m5 x14 h2d y6b77 ffd fs1e fc2 sc0 ls0 ws0">linux&gt;</div><div class="t m5 xe3 h61 y4b06 ff13 fs35 fc6 sc0 ls0 ws0">Back<span class="_ _f"> </span>to<span class="_ _f"> </span>the<span class="_ _f"> </span>Unix<span class="_ _e"> </span>shell</div><div class="t m5 x14 h2f y6b78 ffe fs16 fc6 sc0 ls0 ws0">Figure<span class="_"> </span>8.46<span class="_ _66"> </span><span class="fc1">Sample<span class="_"> </span>shell<span class="_"> </span>session<span class="_"> </span>for<span class="_"> </span>Problem<span class="_"> </span>8.26.</span></div><div class="t m5 x14 h2f y6b79 ffe fs16 fc6 sc0 ls0 ws0">Figure<span class="_"> </span>8.47</div><div class="t m5 x14 h2f y6b7a ffe fs16 fc1 sc0 ls0 ws0">Process<span class="_ _13"> </span>graph<span class="_ _13"> </span>for<span class="_ _13"> </span>Practice</div><div class="t m5 x14 h2f y6b7b ffe fs16 fc1 sc0 ls0 ws0">Problem<span class="_"> </span>8.2.</div><div class="t m5 xb2 h70 y6b7c ffa4 fs27 fc1 sc0 ls0 ws0">fork</div><div class="c xe0 y6b7d w2a h100"><div class="t m5 x27c h70 y6609 ffa4 fs27 fc3 sc1 ls0 ws0">fork</div></div><div class="t m5 xe0 h70 y6b7c ffa4 fs27 fc1 sc0 ls0 ws0">main</div><div class="c xe0 y6b7d w2a h100"><div class="t m5 x0 h70 y6609 ffa4 fs27 fc3 sc1 ls0 ws0">main</div></div><div class="t m5 xe1 h70 y6b7c ffa4 fs27 fc1 sc0 ls0 ws0">printf</div><div class="c xe0 y6b7d w2a h100"><div class="t m5 x26b h70 y6609 ffa4 fs27 fc3 sc1 ls0 ws0">printf</div></div><div class="t m5 xfd h70 y6b7c ffa4 fs27 fc1 sc0 ls0 ws0">exit</div><div class="c xe0 y6b7d w2a h100"><div class="t m5 x52 h70 y6609 ffa4 fs27 fc3 sc1 ls0 ws0">exit</div></div><div class="t m5 x49 h70 y6b7e ffa4 fs27 fc1 sc0 ls0 ws0">p1: a=8<span class="_ _24"> </span>p2: a=9</div><div class="t m10 xda hde y6b7f ffa5 fs8f fc1 sc0 ls0 ws0">Child</div><div class="t m10 xda hde y6b80 ffa5 fs8f fc1 sc0 ls0 ws0">P<span class="_ _0"></span>aren</div><div class="c xe0 y6b7d w2a h100"><div class="t m10 x58 hde y6b81 ffa5 fs8f fc1 sc0 ls0 ws0">t</div></div><div class="t m5 x7c h70 y6b82 ffa4 fs27 fc1 sc0 ls0 ws0">a==9<span class="_ _5a"> </span>p2: a=10</div><div class="t m5 xe1 h70 y6b83 ffa4 fs27 fc1 sc0 ls0 ws0">printf</div><div class="c xe0 y6b7d w2a h100"><div class="t m5 x26b h70 y6b84 ffa4 fs27 fc3 sc1 ls0 ws0">printf</div></div><div class="t m5 x138 h70 y6b83 ffa4 fs27 fc1 sc0 ls0 ws0">printf</div><div class="c xe0 y6b7d w2a h100"><div class="t m5 x17 h70 y6b84 ffa4 fs27 fc3 sc1 ls0 ws0">printf</div></div><div class="t m5 x15f h70 y6b83 ffa4 fs27 fc1 sc0 ls0 ws0">exit</div><div class="c xe0 y6b7d w2a h100"><div class="t m5 x1da h70 y6b84 ffa4 fs27 fc3 sc1 ls0 ws0">exit</div></div><div class="t m5 x124 h26 y6b85 ff7 fs19 fc1 sc0 ls0 ws0">A.<span class="_ _1f"> </span>T<span class="_ _1"></span>he<span class="_ _11"> </span>key<span class="_ _11"> </span>idea<span class="_ _16"> </span>here<span class="_"> </span>is<span class="_ _11"> </span>that<span class="_ _11"> </span>the<span class="_ _16"> </span>child<span class="_"> </span>executes<span class="_ _11"> </span>both<span class="_ _16"> </span><span class="ffd">printf<span class="_ _11"> </span></span>statements<span class="_ _1"></span>.<span class="_ _11"> </span>After</div><div class="t m5 x4f h26 y6b86 ff7 fs19 fc1 sc0 ls0 ws0">the<span class="_"> </span><span class="ffd">fork<span class="_ _10"> </span></span>returns<span class="_ _1"></span>,<span class="_ _11"> </span>it<span class="_"> </span>executes<span class="_"> </span>the<span class="_ _11"> </span><span class="ffd">printf<span class="_ _10"> </span></span>in<span class="_ _11"> </span>line<span class="_"> </span>6.<span class="_"> </span>Then<span class="_"> </span>it<span class="_"> </span>falls<span class="_"> </span>out<span class="_"> </span>of<span class="_"> </span>the<span class="_ _11"> </span><span class="ffd">if</span></div><div class="t m5 x4f h26 y6b87 ff7 fs19 fc1 sc0 ls0 ws0">statement<span class="_ _13"> </span>and<span class="_ _13"> </span>executes<span class="_"> </span>the<span class="_ _13"> </span><span class="ffd">printf<span class="_ _13"> </span></span>in<span class="_ _13"> </span>line<span class="_ _13"> </span>7.<span class="_ _13"> </span>Here<span class="_"> </span>is<span class="_ _13"> </span>the<span class="_ _13"> </span>output<span class="_ _13"> </span>produced<span class="_ _13"> </span>by</div><div class="t m5 x4f h26 y6b88 ff7 fs19 fc1 sc0 ls0 ws0">the<span class="_"> </span>child:</div><div class="t m5 x4f h2d y6b89 ffd fs1e fc2 sc0 ls0 ws0">p1:<span class="_ _e"> </span>a=8</div><div class="t m5 x4f h2d y6b8a ffd fs1e fc2 sc0 ls0 ws0">p2:<span class="_ _e"> </span>a=9</div><div class="t m5 x124 h26 y6b8b ff7 fs19 fc2 sc0 ls0 ws0">B<span class="_ _3"></span>.<span class="_ _1d"> </span>The<span class="_"> </span>parent<span class="_"> </span>executes<span class="_"> </span>only<span class="_"> </span>the<span class="_"> </span><span class="ffd">printf<span class="_ _13"> </span></span>in<span class="_"> </span>line<span class="_"> </span>7:</div><div class="t m5 x4f h2d y6b8c ffd fs1e fc2 sc0 ls0 ws0">p1:<span class="_ _e"> </span>a=10</div></div><div class="pi" data-data='{"ctm":[2.000000,0.000000,0.000000,2.000000,0.000000,0.000000]}'></div></div>
