<div id="pf1e7" class="pf w2 h11" data-page-no="1e7"><div class="pc pc1e7 w2 h11"><img class="bi x0 y0 w1 h1" alt="" src="csapp/bg1e7.png"/><div class="t m5 x14 h28 y9b ffe fs1e fc2 sc0 ls0 ws0">486<span class="_ _1b"> </span><span class="ff6 fs1f">Chapter<span class="_ _10"> </span>4<span class="_ _3d"> </span>Processor<span class="_ _10"> </span>Architecture</span></div><div class="t m5 x25d hbe y43cc ff4d fs75 fc0 sc0 ls0 ws0">D</div><div class="t ma x1b6 hbe y43cc ff4d fs75 fc1 sc0 ls0 ws0">icode</div><div class="t m5 x12 hbe y43cc ff4d fs75 fc1 sc0 ls0 ws0">ifun<span class="_ _89"> </span>valC<span class="_ _5c"> </span>valP<span class="_ _1d0"></span>rB<span class="_ _ef"></span>rA</div><div class="t m5 xed hbf y43cd ff4d fs76 fc1 sc0 ls1f5 ws0">AB</div><div class="t m5 x90 hbf y43ce ff4d fs76 fc1 sc0 ls0 ws0">srcA<span class="_ _1c"> </span>srcB</div><div class="t m5 x1b3 hbf y43cf ff4d fs76 fc1 sc0 ls0 ws0">dstM</div><div class="t m5 x130 hbf y43d0 ff4d fs76 fc1 sc0 ls0 ws0">M</div><div class="t m5 x121 hbf y43d1 ff4d fs76 fc1 sc0 ls0 ws0">dstE</div><div class="t m5 xd2 hbf y43d2 ff4d fs76 fc1 sc0 ls0 ws0">E</div><div class="t m5 x9b hc0 y43d3 ff4d fs77 fc1 sc0 ls0 ws0">Register</div><div class="t m5 x136 hc0 y43d4 ff4d fs77 fc1 sc0 ls0 ws0">file</div><div class="t m5 x103 hbf y43d5 ff4d fs76 fc1 sc0 ls0 ws0">e_dstE</div><div class="t m5 x1f1 hbf y43d6 ff4d fs76 fc1 sc0 ls0 ws0">e_valE</div><div class="t m5 x91 hbf y43d7 ff4d fs76 fc1 sc0 ls0 ws0">d_rvalA<span class="_ _f1"> </span>d_rvalB</div><div class="t m5 x25d hbe y43d8 ff4d fs75 fc0 sc0 ls0 ws0">E</div><div class="t ma x1b6 hbe y43d8 ff4d fs75 fc1 sc0 ls0 ws0">icode</div><div class="t m5 x57 hbe y43d8 ff4d fs75 fc1 sc0 ls0 ws0">stat</div><div class="t m5 x17 hbe y43d9 ff4d fs75 fc1 sc0 ls0 ws0">stat</div><div class="t m5 x142 hbe y43d8 ff4d fs75 fc1 sc0 ls0 ws0">ifun<span class="_ _71"> </span>valC<span class="_ _119"> </span>valA<span class="_ _64"> </span>valB</div><div class="t m5 x1af hbe y43da ff4d fs75 fc1 sc0 ls0 ws0">Sel+Fwd</div><div class="t m5 x5d hbe y43db ff4d fs75 fc1 sc0 ls0 ws0">A</div><div class="t m5 x23d hbe y43da ff4d fs75 fc1 sc0 ls0 ws0">Fwd</div><div class="t m5 xb8 hbe y43db ff4d fs75 fc1 sc0 ls0 ws0">B</div><div class="t m5 xb1 hbe y43d8 ff4d fs75 fc1 sc0 ls0 ws0">dstE<span class="_ _1f"> </span>dstM<span class="_ _1f"> </span>srcA<span class="_ _1f"> </span>srcB</div><div class="t m5 xb1 hbe y43dc ff4d fs75 fc1 sc0 ls0 ws0">dstE</div><div class="t m5 xfb hbe y43dd ff4d fs75 fc1 sc0 ls0 ws0">dstM</div><div class="t m5 x3a hbe y43dc ff4d fs75 fc1 sc0 ls0 ws0">srcA<span class="_ _25"> </span>srcB</div><div class="t m5 x159 hbf y43de ff4d fs76 fc1 sc0 ls0 ws0">M_dstE</div><div class="t m5 x96 hbf y43df ff4d fs76 fc1 sc0 ls0 ws0">M_valE</div><div class="t m5 xe9 hbf y43e0 ff4d fs76 fc1 sc0 ls0 ws0">M_dstM</div><div class="t m5 x6e hbf y43e1 ff4d fs76 fc1 sc0 ls0 ws0">m_valM</div><div class="t m5 x1ea hbf y43e2 ff4d fs76 fc1 sc0 ls0 ws0">W_dstM</div><div class="t m5 x248 hbf y43e3 ff4d fs76 fc1 sc0 ls0 ws0">W_valM</div><div class="t m5 x223 hbf y43e4 ff4d fs76 fc1 sc0 ls0 ws0">W_dstE</div><div class="t m5 xdb hbf y43e5 ff4d fs76 fc1 sc0 ls0 ws0">W_valE</div><div class="t m5 x6b hbf y43e6 ff4d fs76 fc1 sc0 ls0 ws0">d_srcA</div><div class="t m5 x11f hbf y43e7 ff4d fs76 fc1 sc0 ls0 ws0">d_srcB</div><div class="t m5 x14 h34 y43e8 ffe fs16 fc6 sc0 ls0 ws0">Figure<span class="_"> </span>4.58<span class="_ _66"> </span><span class="fc1">PIPE<span class="_"> </span>decode<span class="_"> </span>and<span class="_"> </span>write-back<span class="_"> </span>stage<span class="_ _10"> </span>logic.<span class="_"> </span><span class="ff6">No<span class="_ _10"> </span>instruction<span class="_ _10"> </span>requires<span class="_ _10"> </span>both<span class="_ _10"> </span>valP<span class="_ _10"> </span>and<span class="_ _10"> </span>the<span class="_ _10"> </span>value<span class="_ _10"> </span>read</span></span></div><div class="t m5 x14 h34 y43e9 ff6 fs16 fc1 sc0 ls0 ws0">from<span class="_ _13"> </span>register<span class="_ _13"> </span>port<span class="_ _13"> </span>A,<span class="_ _10"> </span>and<span class="_ _13"> </span>so<span class="_ _13"> </span>these<span class="_ _13"> </span>two<span class="_ _10"> </span>can<span class="_ _13"> </span>be<span class="_ _13"> </span>merged<span class="_ _13"> </span>to<span class="_ _13"> </span>form<span class="_ _13"> </span>the<span class="_ _10"> </span>signal<span class="_ _13"> </span>valA<span class="_ _13"> </span>for<span class="_ _13"> </span>later<span class="_ _13"> </span>stages.<span class="_ _13"> </span>The<span class="_ _10"> </span>block<span class="_ _13"> </span>labeled</div><div class="t m5 x14 h34 y43ea ff6 fs16 fc1 sc0 ls0 ws0">“Sel+Fwd<span class="_ _10"> </span>A<span class="_ _1"></span>”<span class="_ _11"> </span>performs<span class="_ _11"> </span>this<span class="_ _10"> </span>task<span class="_ _10"> </span>and<span class="_ _11"> </span>also<span class="_ _10"> </span>implements<span class="_ _11"> </span>the<span class="_ _10"> </span>forwarding<span class="_ _11"> </span>logic<span class="_ _10"> </span>for<span class="_ _11"> </span>source<span class="_ _10"> </span>operand<span class="_ _10"> </span>valA.<span class="_ _10"> </span>The<span class="_ _11"> </span>block</div><div class="t m5 x14 h34 y43eb ff6 fs16 fc1 sc0 ls0 ws0">labeled<span class="_ _16"> </span>“Fwd<span class="_ _11"> </span>B”<span class="_ _16"> </span>implements<span class="_ _16"> </span>the<span class="_ _11"> </span>forwarding<span class="_ _16"> </span>logic<span class="_ _16"> </span>for<span class="_ _16"> </span>sour<span class="_ _0"></span>ce<span class="_ _16"> </span>operand<span class="_ _11"> </span>valB.<span class="_ _16"> </span>The<span class="_ _16"> </span>register<span class="_ _11"> </span>write<span class="_ _16"> </span>locations<span class="_ _16"> </span>are</div><div class="t m5 x14 h34 y43ec ff6 fs16 fc1 sc0 ls0 ws0">speciﬁed<span class="_ _11"> </span>by<span class="_ _10"> </span>the<span class="_ _11"> </span>dstE<span class="_ _11"> </span>and<span class="_ _11"> </span>dstM<span class="_ _11"> </span>signals<span class="_ _11"> </span>from<span class="_ _11"> </span>the<span class="_ _10"> </span>write-back<span class="_ _11"> </span>stage<span class="_ _11"> </span>rather<span class="_ _11"> </span>than<span class="_ _11"> </span>from<span class="_ _11"> </span>the<span class="_ _11"> </span>decode<span class="_ _10"> </span>stage,<span class="_ _11"> </span>since<span class="_ _11"> </span>it</div><div class="t m5 x14 h34 y43ed ff6 fs16 fc1 sc0 ls0 ws0">is<span class="_ _10"> </span>writing<span class="_ _11"> </span>the<span class="_ _10"> </span>results<span class="_ _10"> </span>of<span class="_ _11"> </span>the<span class="_ _10"> </span>instruction<span class="_ _11"> </span>currently<span class="_ _10"> </span>in<span class="_ _11"> </span>the<span class="_ _10"> </span>write-back<span class="_ _10"> </span>stage.</div><div class="t m5 x1d h26 y2578 ff7 fs19 fc1 sc0 ls0 ws0">do<span class="_ _16"> </span>not<span class="_ _11"> </span>need<span class="_ _16"> </span>the<span class="_ _16"> </span>value<span class="_ _11"> </span>read<span class="_ _16"> </span>from<span class="_ _11"> </span>the<span class="_ _16"> </span>A<span class="_ _16"> </span>port<span class="_ _11"> </span>of<span class="_ _16"> </span>the<span class="_ _16"> </span>register<span class="_ _11"> </span>ﬁle.<span class="_ _11"> </span>T<span class="_ _0"></span>his<span class="_ _16"> </span>selection<span class="_ _11"> </span>is</div><div class="t m5 x1d h26 y2579 ff7 fs19 fc1 sc0 ls0 ws0">controlled<span class="_ _16"> </span>by<span class="_ _14"> </span>the<span class="_ _14"> </span><span class="ff6">icode<span class="_ _14"> </span></span>signal<span class="_ _14"> </span>for<span class="_ _14"> </span>this<span class="_ _16"> </span>stage.<span class="_ _16"> </span>When<span class="_ _16"> </span>signal<span class="_ _14"> </span><span class="ff6">D_icode<span class="_ _14"> </span></span>matches<span class="_ _14"> </span>the</div><div class="t m5 x1d h26 y257a ff7 fs19 fc1 sc0 ls0 ws0">instruction<span class="_ _15"> </span>code<span class="_ _21"> </span>for<span class="_ _21"> </span>either<span class="_ _21"> </span><span class="ffd">call<span class="_ _21"> </span></span>or<span class="_ _21"> </span><span class="ffd">jXX</span>,<span class="_ _f"> </span>this<span class="_ _21"> </span>block<span class="_ _21"> </span>should<span class="_ _21"> </span>select<span class="_ _21"> </span><span class="ff6">D_valP<span class="_ _21"> </span></span>as<span class="_ _21"> </span>its</div><div class="t m5 x1d h26 y257b ff7 fs19 fc1 sc0 ls0 ws0">output.</div><div class="t m5 x29 h26 y257c ff7 fs19 fc1 sc0 ls0 ws0">As<span class="_ _14"> </span>mentioned<span class="_ _14"> </span>in<span class="_ _15"> </span>Section<span class="_ _14"> </span>4.5.5,<span class="_ _21"> </span>there<span class="_ _14"> </span>are<span class="_ _15"> </span>ﬁve<span class="_ _14"> </span>different<span class="_ _14"> </span>forwarding<span class="_ _15"> </span>sources<span class="_ _1"></span>,</div><div class="t m5 x1d h26 y257d ff7 fs19 fc1 sc0 ls0 ws0">each<span class="_"> </span>with<span class="_"> </span>a<span class="_"> </span>data<span class="_"> </span>word<span class="_"> </span>and<span class="_"> </span>a<span class="_"> </span>destination<span class="_"> </span>register<span class="_"> </span>ID:</div></div><div class="pi" data-data='{"ctm":[2.000000,0.000000,0.000000,2.000000,0.000000,0.000000]}'></div></div>
