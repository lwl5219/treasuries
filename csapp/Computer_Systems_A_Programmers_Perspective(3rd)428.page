<div id="pf1ac" class="pf w2 h11" data-page-no="1ac"><div class="pc pc1ac w2 h11"><img class="bi x0 y0 w1 h1" alt="" src="csapp/bg1ac.png"/><div class="t m5 x99 h28 y9b ff6 fs1f fc2 sc0 ls0 ws0">Section<span class="_ _10"> </span>4.3<span class="_ _60"> </span>Sequential<span class="_ _10"> </span>Y86-64<span class="_ _10"> </span>Implementations<span class="_ _3e"> </span><span class="ffe fs1e">427</span></div><div class="t m5 x17 h31 y390 ff7 fs21 fc2 sc0 ls0 ws0">Stage<span class="_ _55"> </span><span class="ffd fs1e">pushq<span class="_ _11"> </span></span><span class="ff6">rA<span class="_ _cf"> </span><span class="ffd fs1e">popq<span class="_ _11"> </span></span>rA</span></div><div class="t m5 x17 h32 yc94 ff7 fs21 fc2 sc0 ls0 ws0">F<span class="_ _1"></span>etch<span class="_ _55"> </span><span class="ff6">icode<span class="_ _a"> </span></span>:<span class="_ _be"></span><span class="ff6">ifun<span class="_ _23"> </span><span class="ff12">←<span class="_ _25"> </span></span>M</span></div><div class="t m5 x183 h33 yc95 ff7 fs20 fc2 sc0 ls0 ws0">1</div><div class="t m5 x10e h32 yc94 ff7 fs21 fc2 sc0 ls0 ws0">[<span class="ff6">PC</span>]<span class="_ _74"> </span><span class="ff6">icode<span class="_ _a"> </span></span>:<span class="_ _be"></span><span class="ff6">ifun<span class="_ _23"> </span><span class="ff12">←<span class="_ _25"> </span></span>M</span></div><div class="t m5 x1ad h33 yc95 ff7 fs20 fc2 sc0 ls0 ws0">1</div><div class="t m5 xb0 h31 yc94 ff7 fs21 fc2 sc0 ls0 ws0">[<span class="ff6">PC</span>]</div><div class="t m5 x75 h32 yc96 ff6 fs21 fc2 sc0 ls0 ws0">rA<span class="_ _6"> </span><span class="ff7">:<span class="_ _be"></span></span>rB<span class="_ _25"> </span><span class="ff12">←<span class="_ _23"> </span></span>M</div><div class="t m5 x7a h33 yc97 ff7 fs20 fc2 sc0 ls0 ws0">1</div><div class="t m5 x1a5 h32 yc98 ff7 fs21 fc2 sc0 ls0 ws0">[<span class="ff6">PC<span class="_ _13"> </span><span class="ff12">+<span class="_ _13"> </span></span></span>1]<span class="_ _5c"> </span><span class="ff6">rA<span class="_ _6"> </span></span>:<span class="_ _a"> </span><span class="ff6">rB<span class="_ _23"> </span><span class="ff12">←<span class="_ _25"> </span></span>M</span></div><div class="t m5 x7e h33 yc97 ff7 fs20 fc2 sc0 ls0 ws0">1</div><div class="t m5 x36 h32 yc98 ff7 fs21 fc2 sc0 ls0 ws0">[<span class="ff6">PC<span class="_ _13"> </span><span class="ff12">+<span class="_ _13"> </span></span></span>1]</div><div class="t m5 x75 h32 y3b32 ff6 fs21 fc2 sc0 ls0 ws0">valP<span class="_ _23"> </span><span class="ff12">←<span class="_ _25"> </span></span>PC<span class="_ _13"> </span><span class="ff12">+<span class="_ _13"> </span><span class="ff7">2<span class="_ _69"> </span></span></span>valP<span class="_ _25"> </span><span class="ff12">←<span class="_ _23"> </span></span>PC<span class="_ _13"> </span><span class="ff12">+<span class="_ _10"> </span><span class="ff7">2</span></span></div><div class="t m5 x17 h32 y3b33 ff7 fs21 fc2 sc0 ls0 ws0">Decode<span class="_ _bd"> </span><span class="ff6">valA<span class="_ _25"> </span><span class="ff12">←<span class="_ _25"> </span></span>R</span>[<span class="ff6">rA<span class="_ _2"></span></span>]<span class="_ _2f"> </span><span class="ff6">valA<span class="_ _24"> </span><span class="ff12">←<span class="_ _23"> </span></span>R<span class="_ _2"></span></span>[</div><div class="t m5 x250 h31 y9bf ffd fs1e fc2 sc0 ls0 ws0">%rsp<span class="ff7 fs21">]</span></div><div class="t m5 x75 h32 y3b34 ff6 fs21 fc2 sc0 ls0 ws0">valB<span class="_ _23"> </span><span class="ff12">←<span class="_ _25"> </span></span>R<span class="ff7">[</span></div><div class="t m5 x112 h32 y9c0 ffd fs1e fc2 sc0 ls0 ws0">%rsp<span class="ff7 fs21">]<span class="_ _54"> </span><span class="ff6">valB<span class="_ _23"> </span><span class="ff12">←<span class="_ _25"> </span></span>R</span>[</span>%rsp<span class="ff7 fs21">]</span></div><div class="t m5 x17 h32 y3b35 ff7 fs21 fc2 sc0 ls0 ws0">Execute<span class="_ _f4"> </span><span class="ff6">valE<span class="_ _25"> </span><span class="ff12">←<span class="_ _23"> </span></span>valB<span class="_ _13"> </span><span class="ff12">+<span class="_ _13"> </span><span class="ff11">(</span>−</span></span>8<span class="ff11">)<span class="_ _68"> </span><span class="ff6">valE<span class="_ _25"> </span><span class="ff12">←<span class="_ _25"> </span></span>valB<span class="_ _13"> </span><span class="ff12">+<span class="_ _13"></span></span></span></span>8</div><div class="t m5 x17 h31 y3b36 ff7 fs21 fc2 sc0 ls0 ws0">Memory<span class="_ _88"> </span><span class="ff6">M</span></div><div class="t m5 x178 h33 y3b37 ff7 fs20 fc2 sc0 ls0 ws0">8</div><div class="t m5 x13 h32 y298f ff7 fs21 fc2 sc0 ls0 ws0">[<span class="ff6">valE</span>]<span class="_ _22"> </span><span class="ff12">←<span class="_ _25"> </span><span class="ff6">valA<span class="_ _5d"> </span>valM<span class="_ _23"> </span></span>←<span class="_ _25"> </span><span class="ff6">M</span></span></div><div class="t m5 x120 h33 y3aef ff7 fs20 fc2 sc0 ls0 ws0">8</div><div class="t m5 x13c h31 y298f ff7 fs21 fc2 sc0 ls0 ws0">[<span class="ff6">valA<span class="_ _2"></span></span>]</div><div class="t m5 x17 h31 y3b38 ff7 fs21 fc2 sc0 ls0 ws0">Write<span class="_"> </span>back<span class="_ _4f"> </span><span class="ff6">R</span>[</div><div class="t m5 x29 h32 y3b39 ffd fs1e fc2 sc0 ls0 ws0">%rsp<span class="ff7 fs21">]<span class="_ _22"> </span><span class="ff12">←<span class="_ _25"> </span><span class="ff6">valE<span class="_ _121"> </span>R</span></span>[</span>%rsp<span class="ff7 fs21">]<span class="_ _23"> </span><span class="ff12">←<span class="_ _23"> </span><span class="ff6">valE</span></span></span></div><div class="t m5 x186 h32 y3b3a ff6 fs21 fc2 sc0 ls0 ws0">R<span class="ff7">[</span>rA<span class="_ _2"></span><span class="ff7">]<span class="_ _22"> </span><span class="ff12">←<span class="_ _25"> </span></span></span>valM</div><div class="t m5 x17 h32 y3b3b ff7 fs21 fc2 sc0 ls0 ws0">PC<span class="_"> </span>update<span class="_ _45"> </span><span class="ff6">PC<span class="_ _25"> </span><span class="ff12">←<span class="_ _23"> </span></span>valP<span class="_ _158"> </span>PC<span class="_ _23"> </span><span class="ff12">←<span class="_ _25"> </span></span>valP</span></div><div class="t m5 x17 h2f y3ab8 ffe fs16 fc6 sc0 ls0 ws0">Figure<span class="_ _16"> </span>4.20<span class="_ _c"> </span><span class="fc1">Computations<span class="_ _14"> </span>in<span class="_ _14"> </span>sequential<span class="_ _16"> </span>implementation<span class="_ _14"> </span>of<span class="_ _14"> </span>Y86-64<span class="_ _16"> </span>instructions</span></div><div class="t m5 x17 h3a y26b5 ffd fs19 fc1 sc0 ls0 ws0">pushq<span class="_ _10"> </span><span class="ffe fs16">and<span class="_"> </span></span>popq<span class="ffe fs16">.<span class="_"> </span><span class="ff6">These<span class="_ _11"> </span>instructions<span class="_ _10"> </span>push<span class="_ _10"> </span>and<span class="_ _11"> </span>pop<span class="_ _10"> </span>the<span class="_ _11"> </span>stack.</span></span></div><div class="t m5 x75 h31 y3b3c ff7 fs21 fc2 sc0 ls0 ws0">Generic<span class="_ _15a"> </span>Speciﬁc</div><div class="t m5 x17 h31 y3b3d ff7 fs21 fc2 sc0 ls0 ws0">Stage</div><div class="t m5 x75 h93 y3b3e ffd fs1e fc2 sc0 ls0 ws0">popq<span class="_ _11"> </span><span class="ff6 fs21">rA<span class="_ _99"> </span></span>popq<span class="_ _11"> </span>%rax</div><div class="t m5 x17 h32 y3b3f ff7 fs21 fc2 sc0 ls0 ws0">Decode<span class="_ _bd"> </span><span class="ff6">valA<span class="_ _25"> </span><span class="ff12">←<span class="_ _25"> </span></span>R</span>[<span class="ffd fs1e">%rsp</span>]</div><div class="t m5 x75 h32 y3b40 ff6 fs21 fc2 sc0 ls0 ws0">valB<span class="_ _23"> </span><span class="ff12">←<span class="_ _25"> </span></span>R<span class="ff7">[</span></div><div class="t m5 x112 h31 y3b41 ffd fs1e fc2 sc0 ls0 ws0">%rsp<span class="ff7 fs21">]</span></div><div class="t m5 x17 h32 y3b42 ff7 fs21 fc2 sc0 ls0 ws0">Execute<span class="_ _f4"> </span><span class="ff6">valE<span class="_ _25"> </span><span class="ff12">←<span class="_ _23"> </span></span>valB<span class="_ _13"> </span><span class="ff12">+<span class="_ _13"> </span></span></span>8</div><div class="t m5 x17 h32 y3b43 ff7 fs21 fc2 sc0 ls0 ws0">Memory<span class="_ _88"> </span><span class="ff6">valM<span class="_ _22"> </span><span class="ff12">←<span class="_ _25"> </span></span>M</span></div><div class="t m5 x1a h33 y3b44 ff7 fs20 fc2 sc0 ls0 ws0">8</div><div class="t m5 xf7 h31 y3b45 ff7 fs21 fc2 sc0 ls0 ws0">[<span class="ff6">valA<span class="_ _2"></span></span>]</div><div class="t m5 x17 h31 y3b46 ff7 fs21 fc2 sc0 ls0 ws0">Write<span class="_"> </span>back<span class="_ _4f"> </span><span class="ff6">R</span>[</div><div class="t m5 x29 h32 y3b47 ffd fs1e fc2 sc0 ls0 ws0">%rsp<span class="ff7 fs21">]<span class="_ _22"> </span><span class="ff12">←<span class="_ _25"> </span><span class="ff6">valE</span></span></span></div><div class="t m5 x75 h32 y3b48 ff6 fs21 fc2 sc0 ls0 ws0">R<span class="ff7">[</span>rA<span class="_ _2"></span><span class="ff7">]<span class="_ _22"> </span><span class="ff12">←<span class="_ _25"> </span></span></span>valM</div><div class="t m5 x17 h32 y3b49 ff7 fs21 fc2 sc0 ls0 ws0">PC<span class="_"> </span>update<span class="_ _45"> </span><span class="ff6">PC<span class="_ _25"> </span><span class="ff12">←<span class="_ _23"> </span></span>valP</span></div><div class="t m5 x26 h26 y3b4a ff7 fs19 fc2 sc0 ls0 ws0">What<span class="_ _13"> </span>effect<span class="_"> </span>does<span class="_ _13"> </span>this<span class="_ _13"> </span>instruction<span class="_"> </span>execution<span class="_ _13"> </span>have<span class="_"> </span>on<span class="_ _13"> </span>the<span class="_"> </span>registers<span class="_ _13"> </span>and<span class="_"> </span>the<span class="_ _13"> </span>PC?</div><div class="t m5 x17 h47 y39eb ffe fs2b fc1 sc0 ls0 ws0">Practice<span class="_"> </span>Problem<span class="_"> </span>4.15<span class="_ _1f"> </span><span class="fs16">(solution<span class="_"> </span>page<span class="_"> </span>522)</span></div><div class="t m5 x17 h26 y1672 ff7 fs19 fc1 sc0 ls0 ws0">What<span class="_ _16"> </span>would<span class="_ _15"> </span>be<span class="_ _14"> </span>the<span class="_ _14"> </span>effect<span class="_ _14"> </span>of<span class="_ _15"> </span>the<span class="_ _14"> </span>instruction<span class="_ _14"> </span><span class="ffd">pushq<span class="_ _16"> </span>%rsp<span class="_ _14"> </span></span>according<span class="_ _14"> </span>to<span class="_ _15"> </span>the<span class="_ _14"> </span>steps</div><div class="t m5 x17 h26 y1acc ff7 fs19 fc1 sc0 ls0 ws0">listed<span class="_ _16"> </span>in<span class="_ _16"> </span>Figure<span class="_ _16"> </span>4.20?<span class="_ _16"> </span>Does<span class="_ _16"> </span>this<span class="_ _14"> </span>conform<span class="_ _16"> </span>to<span class="_ _14"> </span>the<span class="_ _16"> </span>desired<span class="_ _16"> </span>behavior<span class="_ _14"> </span>for<span class="_ _16"> </span>Y86-64,<span class="_ _14"> </span>as</div><div class="t m5 x17 h26 y39ec ff7 fs19 fc1 sc0 ls0 ws0">determined<span class="_"> </span>in<span class="_"> </span>Problem<span class="_"> </span>4.7?</div></div><div class="pi" data-data='{"ctm":[2.000000,0.000000,0.000000,2.000000,0.000000,0.000000]}'></div></div>
