<div id="pf2c3" class="pf w2 h11" data-page-no="2c3"><div class="pc pc2c3 w2 h11"><img class="bi x0 y0 w1 h1" alt="" src="csapp/bg2c3.png"/><div class="t m5 x14 h28 y9b ffe fs1e fc2 sc0 ls0 ws0">706<span class="_ _1b"> </span><span class="ff6 fs1f">Chapter<span class="_ _10"> </span>7<span class="_ _3d"> </span>Linking</span></div><div class="t m5 x1d h38 y93a ff7 fs1b fc6 sc0 ls0 ws0">L</div><div class="t m5 xa6 h26 ye7 ff7 fs19 fc1 sc0 ls0 ws0">inking<span class="_ _11"> </span>is<span class="_ _11"> </span>the<span class="_ _16"> </span>process<span class="_ _11"> </span>of<span class="_ _11"> </span>collecting<span class="_ _16"> </span>and<span class="_"> </span>combining<span class="_ _16"> </span>various<span class="_ _11"> </span>pieces<span class="_ _11"> </span>of<span class="_ _16"> </span>code<span class="_ _11"> </span>and</div><div class="t m5 xa6 h26 y2a7 ff7 fs19 fc1 sc0 ls0 ws0">data<span class="_"> </span>into<span class="_"> </span>a<span class="_"> </span>single<span class="_"> </span>ﬁle<span class="_ _13"> </span>that<span class="_"> </span>can<span class="_"> </span>be<span class="_"> </span><span class="ffa">loaded<span class="_"> </span></span>(copied)<span class="_"> </span>into<span class="_"> </span>memory<span class="_"> </span>and<span class="_"> </span>executed.</div><div class="t m5 x1d h26 y2a8 ff7 fs19 fc1 sc0 ls0 ws0">Linking<span class="_ _14"> </span>can<span class="_ _14"> </span>be<span class="_ _15"> </span>performed<span class="_ _14"> </span>at<span class="_ _15"> </span><span class="ffa">compile<span class="_ _14"> </span>time</span>,<span class="_ _21"> </span>when<span class="_ _14"> </span>the<span class="_ _15"> </span>source<span class="_ _14"> </span>code<span class="_ _14"> </span>is<span class="_ _15"> </span>translated</div><div class="t m5 x1d h26 y2f7 ff7 fs19 fc1 sc0 ls0 ws0">into<span class="_ _16"> </span>machine<span class="_ _16"> </span>code;<span class="_ _15"> </span>at<span class="_ _16"> </span><span class="ffa">load<span class="_ _14"> </span>time</span>,<span class="_ _14"> </span>when<span class="_ _16"> </span>the<span class="_ _16"> </span>program<span class="_ _14"> </span>is<span class="_ _16"> </span>loaded<span class="_ _16"> </span>into<span class="_ _14"> </span>memory<span class="_ _16"> </span>and</div><div class="t m5 x1d h26 y2f8 ff7 fs19 fc1 sc0 ls0 ws0">executed<span class="_ _11"> </span>by<span class="_ _11"> </span>the<span class="_ _11"> </span><span class="ffa">loader<span class="_ _2"></span></span>;<span class="_ _11"> </span>and<span class="_ _11"> </span>even<span class="_ _11"> </span>at<span class="_ _11"> </span><span class="ffa">run<span class="_ _11"> </span>time</span>,<span class="_ _11"> </span>by<span class="_ _11"> </span>application<span class="_ _11"> </span>programs<span class="_ _0"></span>.<span class="_"> </span>On<span class="_ _11"> </span>early</div><div class="t m5 x1d h26 y2f9 ff7 fs19 fc1 sc0 ls0 ws0">computer<span class="_"> </span>systems<span class="_ _1"></span>,<span class="_ _11"> </span>linking<span class="_ _11"> </span>was<span class="_"> </span>performed<span class="_ _11"> </span>manually<span class="_ _3"></span>.<span class="_"> </span>On<span class="_ _11"> </span>modern<span class="_ _11"> </span>systems<span class="_ _1"></span>,<span class="_ _11"> </span>linking</div><div class="t m5 x1d h26 y2fa ff7 fs19 fc1 sc0 ls0 ws0">is<span class="_"> </span>performed<span class="_"> </span>automatically<span class="_"> </span>by<span class="_"> </span>programs<span class="_"> </span>called<span class="_"> </span><span class="ffa">linkers</span>.</div><div class="t m5 x29 h26 y2fb ff7 fs19 fc1 sc0 ls0 ws0">Linkers<span class="_ _f"> </span>play<span class="_ _f"> </span>a<span class="_ _f"> </span>crucial<span class="_ _f"> </span>role<span class="_ _f"> </span>in<span class="_ _f"> </span>software<span class="_ _f"> </span>development<span class="_ _f"> </span>because<span class="_ _f"> </span>they<span class="_ _f"> </span>enable</div><div class="t m5 x1d h26 y2fc ffa fs19 fc1 sc0 ls0 ws0">separate<span class="_"> </span>compilation<span class="ff7">.<span class="_"> </span>Instead<span class="_"> </span>of<span class="_ _11"> </span>organizing<span class="_"> </span>a<span class="_ _11"> </span>large<span class="_"> </span>application<span class="_ _11"> </span>as<span class="_"> </span>one<span class="_"> </span>monolithic</span></div><div class="t m5 x1d h26 y2fd ff7 fs19 fc1 sc0 ls0 ws0">source<span class="_ _13"> </span>ﬁle,<span class="_ _13"> </span>we<span class="_"> </span>can<span class="_ _13"> </span>decompose<span class="_"> </span>it<span class="_ _13"> </span>into<span class="_"> </span>smaller<span class="_ _1"></span>,<span class="_"> </span>more<span class="_ _13"> </span>manageable<span class="_"> </span>modules<span class="_ _13"> </span>that<span class="_"> </span>can</div><div class="t m5 x1d h26 y2fe ff7 fs19 fc1 sc0 ls0 ws0">be<span class="_"> </span>modiﬁed<span class="_"> </span>and<span class="_"> </span>compiled<span class="_"> </span>separately<span class="_ _7"></span>.<span class="_"> </span>When<span class="_"> </span>we<span class="_"> </span>change<span class="_"> </span>one<span class="_ _13"> </span>of<span class="_"> </span>these<span class="_"> </span>modules<span class="_ _1"></span>,<span class="_"> </span>we</div><div class="t m5 x1d h26 y2ff ff7 fs19 fc1 sc0 ls0 ws0">simply<span class="_ _16"> </span>recompile<span class="_ _16"> </span>it<span class="_ _16"> </span>and<span class="_ _16"> </span>relink<span class="_ _16"> </span>the<span class="_ _14"> </span>application,<span class="_ _16"> </span>without<span class="_ _14"> </span>having<span class="_ _16"> </span>to<span class="_ _16"> </span>recompile<span class="_ _16"> </span>the</div><div class="t m5 x1d h26 y300 ff7 fs19 fc1 sc0 ls0 ws0">other<span class="_"> </span>ﬁles<span class="_ _1"></span>.</div><div class="t m5 x29 h26 y21a ff7 fs19 fc1 sc0 ls0 ws0">Linking<span class="_ _f"> </span>is<span class="_ _e"> </span>usually<span class="_ _21"> </span>handled<span class="_ _e"> </span>quietly<span class="_ _21"> </span>by<span class="_ _e"> </span>the<span class="_ _21"> </span>linker<span class="_ _e"> </span>and<span class="_ _f"> </span>is<span class="_ _f"> </span>not<span class="_ _e"> </span>an<span class="_ _21"> </span>important</div><div class="t m5 x1d h26 y450 ff7 fs19 fc1 sc0 ls0 ws0">issue<span class="_"> </span>for<span class="_"> </span>students<span class="_"> </span>who<span class="_"> </span>are<span class="_"> </span>building<span class="_"> </span>small<span class="_ _13"> </span>programs<span class="_"> </span>in<span class="_"> </span>introductory<span class="_"> </span>programming</div><div class="t m5 x1d h26 y451 ff7 fs19 fc1 sc0 ls0 ws0">classes<span class="_ _1"></span>.<span class="_"> </span>So<span class="_"> </span>why<span class="_"> </span>bother<span class="_"> </span>learning<span class="_"> </span>about<span class="_"> </span>linking?</div><div class="t m5 x75 h3d y5dcb ff14 fs26 fc6 sc0 ls0 ws0">.</div><div class="t m5 x29 h26 y2a6a ffa fs19 fc1 sc0 ls0 ws0">Understanding<span class="_ _11"> </span>linkers<span class="_ _11"> </span>will<span class="_ _11"> </span>help<span class="_ _11"> </span>you<span class="_ _11"> </span>build<span class="_ _11"> </span>large<span class="_ _11"> </span>programs<span class="_ _1"></span>.<span class="_ _13"> </span><span class="ff7">Programmers<span class="_ _11"> </span>who</span></div><div class="t m5 x29 h26 y5dcc ff7 fs19 fc1 sc0 ls0 ws0">build<span class="_ _6"> </span>large<span class="_ _6"> </span>programs<span class="_ _6"> </span>often<span class="_ _6"> </span>encounter<span class="_ _13"> </span>linker<span class="_ _a"> </span>errors<span class="_ _6"> </span>caused<span class="_ _13"> </span>by<span class="_ _a"> </span>missing<span class="_ _6"> </span>modules<span class="_ _1"></span>,</div><div class="t m5 x29 h26 y5dcd ff7 fs19 fc1 sc0 ls0 ws0">missing<span class="_ _6"> </span>libraries<span class="_ _1"></span>,<span class="_ _13"> </span>or<span class="_ _6"> </span>incompatible<span class="_ _6"> </span>library<span class="_ _13"> </span>versions<span class="_ _3"></span>.<span class="_ _13"> </span>Unless<span class="_ _a"> </span>you<span class="_ _13"> </span>understand<span class="_ _a"> </span>how</div><div class="t m5 x29 h26 y5dce ff7 fs19 fc1 sc0 ls0 ws0">a<span class="_"> </span>linker<span class="_"> </span>resolves<span class="_ _11"> </span>references<span class="_ _1"></span>,<span class="_"> </span>what<span class="_ _11"> </span>a<span class="_"> </span>library<span class="_ _11"> </span>is<span class="_ _1"></span>,<span class="_"> </span>and<span class="_ _11"> </span>how<span class="_"> </span>a<span class="_ _11"> </span>linker<span class="_"> </span>uses<span class="_"> </span>a<span class="_ _11"> </span>library</div><div class="t m5 x29 h26 y5dcf ff7 fs19 fc1 sc0 ls0 ws0">to<span class="_"> </span>resolve<span class="_"> </span>references<span class="_ _1"></span>,<span class="_"> </span>these<span class="_"> </span>kinds<span class="_"> </span>of<span class="_"> </span>errors<span class="_"> </span>will<span class="_"> </span>be<span class="_"> </span>bafﬂing<span class="_"> </span>and<span class="_"> </span>frustrating.</div><div class="t m5 x75 h3d y5dd0 ff14 fs26 fc6 sc0 ls0 ws0">.</div><div class="t m5 x29 h26 y5dd1 ffa fs19 fc1 sc0 ls0 ws0">Understanding<span class="_ _13"> </span>linkers<span class="_ _13"> </span>will<span class="_ _6"> </span>help<span class="_ _13"> </span>you<span class="_ _13"> </span>avoid<span class="_ _13"> </span>dangerous<span class="_ _6"> </span>programming<span class="_ _13"> </span>errors<span class="_ _1"></span>.<span class="_ _be"></span><span class="ff7 lsd">Th<span class="_ _2"></span>e</span></div><div class="t m5 x29 h26 y5dd2 ff7 fs19 fc1 sc0 ls0 ws0">decisions<span class="_ _11"> </span>that<span class="_ _16"> </span>Linux<span class="_ _16"> </span>linkers<span class="_ _11"> </span>make<span class="_ _16"> </span>when<span class="_ _11"> </span>they<span class="_ _16"> </span>resolve<span class="_ _16"> </span>symbol<span class="_ _11"> </span>references<span class="_ _16"> </span>can</div><div class="t m5 x29 h26 y5dd3 ff7 fs19 fc1 sc0 ls0 ws0">silently<span class="_ _15"> </span>affect<span class="_ _15"> </span>the<span class="_ _15"> </span>correctness<span class="_ _15"> </span>of<span class="_ _15"> </span>your<span class="_ _21"> </span>programs<span class="_ _1"></span>.<span class="_ _15"> </span>Programs<span class="_ _15"> </span>that<span class="_ _15"> </span>incorrectly</div><div class="t m5 x29 h26 y5dd4 ff7 fs19 fc1 sc0 ls0 ws0">deﬁne<span class="_ _13"> </span>multiple<span class="_ _6"> </span>global<span class="_ _13"> </span>variables<span class="_ _13"> </span>can<span class="_ _13"> </span>pass<span class="_ _6"> </span>through<span class="_ _13"> </span>the<span class="_ _13"> </span>linker<span class="_ _6"> </span>without<span class="_ _13"> </span>any<span class="_ _13"> </span>warn-</div><div class="t m5 x29 h26 y5dd5 ff7 fs19 fc1 sc0 ls0 ws0">ings<span class="_"> </span>in<span class="_"> </span>the<span class="_"> </span>default<span class="_"> </span>case.<span class="_"> </span>T<span class="_ _1"></span>he<span class="_"> </span>resulting<span class="_"> </span>programs<span class="_ _11"> </span>can<span class="_"> </span>exhibit<span class="_"> </span>bafﬂing<span class="_"> </span>run-time</div><div class="t m5 x29 h26 y5dd6 ff7 fs19 fc1 sc0 ls0 ws0">behavior<span class="_ _13"> </span>and<span class="_ _13"> </span>are<span class="_ _13"> </span>extremely<span class="_ _13"> </span>difﬁcult<span class="_ _13"> </span>to<span class="_ _13"> </span>debug<span class="_ _1"></span>.<span class="_ _13"> </span>W<span class="_ _1"></span>e<span class="_ _13"> </span>will<span class="_ _13"> </span>show<span class="_ _13"> </span>you<span class="_ _13"> </span>how<span class="_ _13"> </span>this<span class="_ _13"> </span>hap-</div><div class="t m5 x29 h26 y5dd7 ff7 fs19 fc1 sc0 ls0 ws0">pens<span class="_"> </span>and<span class="_"> </span>how<span class="_"> </span>to<span class="_"> </span>avoid<span class="_"> </span>it.</div><div class="t m5 x75 h3d y5dd8 ff14 fs26 fc6 sc0 ls0 ws0">.</div><div class="t m5 x29 h30 y5dd9 ffa fs19 fc1 sc0 ls0 ws0">Understanding<span class="_ _16"> </span>linking<span class="_ _16"> </span>will<span class="_ _16"> </span>help<span class="_ _14"> </span>you<span class="_ _16"> </span>understand<span class="_ _16"> </span>how<span class="_ _16"> </span>language<span class="_ _16"> </span>scoping<span class="_ _16"> </span>rules</div><div class="t m5 x29 h26 y5dda ffa fs19 fc1 sc0 ls0 ws0">are<span class="_ _13"> </span>implemented.<span class="_ _5"></span><span class="ff7">F<span class="_ _1"></span>or<span class="_ _13"> </span>example<span class="_ _0"></span>,<span class="_ _13"> </span>what<span class="_ _13"> </span>is<span class="_ _6"> </span>the<span class="_ _13"> </span>difference<span class="_ _13"> </span>between<span class="_ _13"> </span>global<span class="_ _6"> </span>and<span class="_ _13"> </span>local</span></div><div class="t m5 x29 h26 y5ddb ff7 fs19 fc1 sc0 ls0 ws0">variables?<span class="_ _16"> </span>W<span class="_ _0"></span>hat<span class="_ _11"> </span>does<span class="_ _16"> </span>it<span class="_ _16"> </span>really<span class="_ _11"> </span>mean<span class="_ _16"> </span>when<span class="_ _16"> </span>you<span class="_ _11"> </span>deﬁne<span class="_ _16"> </span>a<span class="_ _16"> </span>variable<span class="_ _11"> </span>or<span class="_ _16"> </span>function</div><div class="t m5 x29 h26 y5ddc ff7 fs19 fc1 sc0 ls0 ws0">with<span class="_"> </span>the<span class="_"> </span><span class="ffd">static<span class="_ _10"> </span></span>attribute?</div><div class="t m5 x75 h3d y5ddd ff14 fs26 fc6 sc0 ls0 ws0">.</div><div class="t m5 x29 h30 y5dde ffa fs19 fc1 sc0 ls0 ws0">Understanding<span class="_"> </span>linking<span class="_"> </span>will<span class="_"> </span>help<span class="_ _11"> </span>you<span class="_"> </span>understand<span class="_"> </span>other<span class="_ _11"> </span>important<span class="_"> </span>systems<span class="_"> </span>con-</div><div class="t m5 x29 h26 y5ddf ffa fs19 fc1 sc0 ls0 ws0">cepts<span class="_ _1"></span>.<span class="_ _a"> </span><span class="ff7">T<span class="_ _0"></span>he<span class="_"> </span>executable<span class="_ _13"> </span>object<span class="_"> </span>ﬁles<span class="_ _13"> </span>produced<span class="_"> </span>by<span class="_ _13"> </span>linkers<span class="_"> </span>play<span class="_ _13"> </span>key<span class="_"> </span>roles<span class="_ _13"> </span>in<span class="_"> </span>impor<span class="_ _3"></span>-</span></div><div class="t m5 x29 h26 y5de0 ff7 fs19 fc1 sc0 ls0 ws0">tant<span class="_ _13"> </span>systems<span class="_ _13"> </span>functions<span class="_ _13"> </span>such<span class="_ _13"> </span>as<span class="_ _13"> </span>loading<span class="_ _13"> </span>and<span class="_ _6"> </span>running<span class="_ _13"> </span>programs<span class="_ _1"></span>,<span class="_"> </span>virtual<span class="_ _6"> </span>memory<span class="_ _3"></span>,</div><div class="t m5 x29 h26 y5de1 ff7 fs19 fc1 sc0 ls0 ws0">paging,<span class="_"> </span>and<span class="_"> </span>memory<span class="_"> </span>mapping<span class="_ _1"></span>.</div><div class="t m5 x75 h3d y5de2 ff14 fs26 fc6 sc0 ls0 ws0">.</div><div class="t m5 x29 h26 yc21 ffa fs19 fc1 sc0 ls0 ws0">Understanding<span class="_ _14"> </span>linking<span class="_ _15"> </span>will<span class="_ _15"> </span>enable<span class="_ _15"> </span>you<span class="_ _14"> </span>to<span class="_ _15"> </span>exploit<span class="_ _15"> </span>shared<span class="_ _14"> </span>libraries<span class="_ _1"></span>.<span class="_ _16"> </span><span class="ff7">F<span class="_ _3"></span>or<span class="_ _15"> </span>many</span></div><div class="t m5 x29 h26 yc22 ff7 fs19 fc1 sc0 ls0 ws0">years<span class="_ _1"></span>,<span class="_ _16"> </span>linking<span class="_ _11"> </span>was<span class="_ _16"> </span>considered<span class="_ _11"> </span>to<span class="_ _16"> </span>be<span class="_ _11"> </span>fairly<span class="_ _16"> </span>straightforward<span class="_ _11"> </span>and<span class="_ _16"> </span>uninteresting.</div><div class="t m5 x29 h26 yc23 ff7 fs19 fc1 sc0 ls0 ws0">However,<span class="_ _f"> </span>with<span class="_ _f"> </span>the<span class="_ _f"> </span>increased<span class="_ _f"> </span>importance<span class="_ _21"> </span>of<span class="_ _f"> </span>shared<span class="_ _f"> </span>libraries<span class="_ _f"> </span>and<span class="_ _21"> </span>dynamic</div><div class="t m5 x29 h26 yc24 ff7 fs19 fc1 sc0 ls0 ws0">linking<span class="_ _16"> </span>in<span class="_ _14"> </span>modern<span class="_ _16"> </span>operating<span class="_ _16"> </span>systems<span class="_ _1"></span>,<span class="_ _15"> </span>linking<span class="_ _16"> </span>is<span class="_ _16"> </span>a<span class="_ _14"> </span>sophisticated<span class="_ _16"> </span>process<span class="_ _14"> </span>that</div><div class="t m5 x29 h26 yc25 ff7 fs19 fc1 sc0 ls0 ws0">provides<span class="_ _16"> </span>the<span class="_ _16"> </span>knowledgeable<span class="_ _11"> </span>programmer<span class="_ _16"> </span>with<span class="_ _16"> </span>signiﬁcant<span class="_ _16"> </span>power.<span class="_ _11"> </span>F<span class="_ _0"></span>or<span class="_ _16"> </span>exam-</div><div class="t m5 x29 h26 yc26 ff7 fs19 fc1 sc0 ls0 ws0">ple<span class="_ _1"></span>,<span class="_ _11"> </span>many<span class="_ _11"> </span>software<span class="_"> </span>products<span class="_ _11"> </span>use<span class="_"> </span>shared<span class="_ _11"> </span>libraries<span class="_"> </span>to<span class="_ _11"> </span>upgrade<span class="_ _11"> </span>shrink-wrapped</div><div class="t m5 x29 h26 y14b5 ff7 fs19 fc1 sc0 ls0 ws0">binaries<span class="_ _6"> </span>at<span class="_ _6"> </span>run<span class="_ _13"> </span>time<span class="_ _1"></span>.<span class="_ _6"> </span>Also,<span class="_ _6"> </span>many<span class="_ _6"> </span>W<span class="_ _1"></span>eb<span class="_ _6"> </span>servers<span class="_ _13"> </span>rely<span class="_ _a"> </span>on<span class="_ _13"> </span>dynamic<span class="_ _a"> </span>linking<span class="_ _13"> </span>of<span class="_ _6"> </span>shared</div><div class="t m5 x29 h26 y5de3 ff7 fs19 fc1 sc0 ls0 ws0">libraries<span class="_"> </span>to<span class="_"> </span>serve<span class="_"> </span>dynamic<span class="_"> </span>content.</div></div><div class="pi" data-data='{"ctm":[2.000000,0.000000,0.000000,2.000000,0.000000,0.000000]}'></div></div>
