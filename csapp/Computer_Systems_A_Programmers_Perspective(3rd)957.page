<div id="pf3bd" class="pf w2 h11" data-page-no="3bd"><div class="pc pc3bd w2 h11"><img class="bi x0 y0 w1 h1" alt="" src="csapp/bg3bd.png"/><div class="t m5 x14 h28 y9b ffe fs1e fc2 sc0 ls0 ws0">956<span class="_ _1b"> </span><span class="ff6 fs1f">Chapter<span class="_ _10"> </span>11<span class="_ _3d"> </span>Network<span class="_ _10"> </span>Programming</span></div><div class="t m5 x14 h2f ye7 ffe fs16 fc6 sc0 ls0 ws0">Figure<span class="_"> </span>11.3</div><div class="t m5 x14 h2f y58a ffe fs16 fc1 sc0 ls0 ws0">Ethernet<span class="_"> </span>segment.</div><div class="t m5 x135 h3f y79f5 ffd7 fs27 fc1 sc0 ls0 ws0">Host</div><div class="t m5 x1ed h3f y79f6 ffd7 fs27 fc1 sc0 ls0 ws0">Host</div><div class="t m5 x191 h3f y79f7 ffd7 fs27 fc1 sc0 ls0 ws0">Host</div><div class="t m5 x1e6 h3f y79f8 ffd7 fs27 fc1 sc0 ls0 ws0">Hub</div><div class="t m5 x78 h3f y79f9 ffd7 fs27 fc1 sc0 ls0 ws0">100 Mb/s<span class="_ _d1"> </span>100 Mb/s</div><div class="t m5 x29 h26 y1a10 ff7 fs19 fc1 sc0 ls0 ws0">An<span class="_ _6"> </span>adapter<span class="_ _6"> </span>plugged<span class="_ _6"> </span>into<span class="_ _6"> </span>an<span class="_ _6"> </span>expansion<span class="_ _6"> </span>slot<span class="_ _6"> </span>on<span class="_ _6"> </span>the<span class="_ _6"> </span>I/O<span class="_ _6"> </span>bus<span class="_ _6"> </span>provides<span class="_ _13"> </span>the<span class="_ _a"> </span>physical</div><div class="t m5 x1d h26 y1a11 ff7 fs19 fc1 sc0 ls0 ws0">interface<span class="_ _14"> </span>to<span class="_ _16"> </span>the<span class="_ _14"> </span>network.<span class="_ _14"> </span>Data<span class="_ _14"> </span>received<span class="_ _14"> </span>from<span class="_ _14"> </span>the<span class="_ _14"> </span>network<span class="_ _14"> </span>are<span class="_ _14"> </span>copied<span class="_ _14"> </span>from<span class="_ _16"> </span>the</div><div class="t m5 x1d h26 y1a12 ff7 fs19 fc1 sc0 ls0 ws0">adapter<span class="_ _21"> </span>across<span class="_ _21"> </span>the<span class="_ _f"> </span>I/O<span class="_ _21"> </span>and<span class="_ _f"> </span>memory<span class="_ _21"> </span>buses<span class="_ _f"> </span>into<span class="_ _21"> </span>memory<span class="_ _3"></span>,<span class="_ _e"> </span>typically<span class="_ _15"> </span>by<span class="_ _f"> </span>a<span class="_ _21"> </span>DMA</div><div class="t m5 x1d h26 y1a13 ff7 fs19 fc1 sc0 ls0 ws0">transfer.<span class="_"> </span>Similarly<span class="_ _7"></span>,<span class="_"> </span>data<span class="_"> </span>can<span class="_"> </span>also<span class="_"> </span>be<span class="_"> </span>copied<span class="_"> </span>from<span class="_"> </span>memory<span class="_"> </span>to<span class="_"> </span>the<span class="_"> </span>network.</div><div class="t m5 x29 h26 y1a14 ff7 fs19 fc1 sc0 ls0 ws0">Physically<span class="_ _3"></span>,<span class="_ _13"> </span>a<span class="_ _6"> </span>network<span class="_ _6"> </span>is<span class="_ _13"> </span>a<span class="_ _6"> </span>hierarchical<span class="_ _13"> </span>system<span class="_ _6"> </span>that<span class="_ _6"> </span>is<span class="_ _13"> </span>organized<span class="_ _6"> </span>by<span class="_ _13"> </span>geographical</div><div class="t m5 x1d h26 y1a15 ff7 fs19 fc1 sc0 ls0 ws0">proximity<span class="_ _3"></span>.<span class="_ _13"> </span>At<span class="_"> </span>the<span class="_ _13"> </span>lowest<span class="_ _13"> </span>level<span class="_"> </span>is<span class="_ _13"> </span>a<span class="_"> </span>LAN<span class="_ _13"> </span>(local<span class="_ _13"> </span>area<span class="_"> </span>network)<span class="_ _13"> </span>that<span class="_ _13"> </span>spans<span class="_"> </span>a<span class="_ _13"> </span>building</div><div class="t m5 x1d h26 y1a16 ff7 fs19 fc1 sc0 ls0 ws0">or<span class="_"> </span>a<span class="_ _13"> </span>campus<span class="_ _1"></span>.<span class="_"> </span>T<span class="_ _1"></span>he<span class="_"> </span>most<span class="_ _13"> </span>popular<span class="_"> </span>LAN<span class="_ _13"> </span>technology<span class="_"> </span>by<span class="_ _13"> </span>far<span class="_"> </span>is<span class="_ _13"> </span><span class="ffa">Ethernet<span class="_ _2"></span></span>,<span class="_"> </span>which<span class="_ _13"> </span>was<span class="_"> </span>de-</div><div class="t m5 x1d h26 y1a17 ff7 fs19 fc1 sc0 ls0 ws0">veloped<span class="_"> </span>in<span class="_ _13"> </span>the<span class="_"> </span>mid-1970s<span class="_"> </span>at<span class="_ _13"> </span>Xerox<span class="_"> </span>P<span class="_ _7"></span>ARC.<span class="_ _13"> </span>Ethernet<span class="_"> </span>has<span class="_"> </span>proven<span class="_ _13"> </span>to<span class="_"> </span>be<span class="_ _13"> </span>remarkably</div><div class="t m5 x1d h26 y1a18 ff7 fs19 fc1 sc0 ls0 ws0">resilient,<span class="_"> </span>evolving<span class="_"> </span>from<span class="_"> </span>3<span class="_"> </span>Mb/s<span class="_"> </span>to<span class="_"> </span>10<span class="_"> </span>Gb/s<span class="_ _1"></span>.</div><div class="t m5 x29 h26 y1a19 ff7 fs19 fc1 sc0 ls0 ws0">An<span class="_ _16"> </span><span class="ffa">Ethernet<span class="_ _16"> </span>segment<span class="_ _14"> </span></span>consists<span class="_ _16"> </span>of<span class="_ _16"> </span>some<span class="_ _16"> </span>wires<span class="_ _16"> </span>(usually<span class="_ _16"> </span>twisted<span class="_ _16"> </span>pairs<span class="_ _16"> </span>of<span class="_ _16"> </span>wires)</div><div class="t m5 x1d h26 y1a1a ff7 fs19 fc1 sc0 ls0 ws0">and<span class="_ _13"> </span>a<span class="_"> </span>small<span class="_ _13"> </span>box<span class="_ _13"> </span>called<span class="_ _13"> </span>a<span class="_"> </span><span class="ffa">hub<span class="_ _1"></span><span class="ff7">,<span class="_"> </span>as<span class="_ _13"> </span>shown<span class="_ _13"> </span>in<span class="_ _13"> </span>Figure<span class="_ _13"> </span>11.3.<span class="_ _13"> </span>Ethernet<span class="_ _13"> </span>segments<span class="_"> </span>typically</span></span></div><div class="t m5 x1d h26 y1a1b ff7 fs19 fc1 sc0 ls0 ws0">span<span class="_"> </span>small<span class="_ _11"> </span>areas<span class="_ _1"></span>,<span class="_ _11"> </span>such<span class="_ _11"> </span>as<span class="_"> </span>a<span class="_ _11"> </span>room<span class="_ _11"> </span>or<span class="_ _11"> </span>a<span class="_"> </span>ﬂoor<span class="_ _11"> </span>in<span class="_ _11"> </span>a<span class="_ _11"> </span>building.<span class="_"> </span>Each<span class="_"> </span>wire<span class="_ _11"> </span>has<span class="_ _11"> </span>the<span class="_"> </span>same</div><div class="t m5 x1d h26 y1a1c ff7 fs19 fc1 sc0 ls0 ws0">maximum<span class="_ _14"> </span>bit<span class="_ _14"> </span>bandwidth,<span class="_ _15"> </span>typically<span class="_ _15"> </span>100<span class="_ _14"> </span>Mb/s<span class="_ _14"> </span>or<span class="_ _15"> </span>1<span class="_ _14"> </span>Gb/s<span class="_ _1"></span>.<span class="_ _14"> </span>One<span class="_ _15"> </span>end<span class="_ _14"> </span>is<span class="_ _14"> </span>attached<span class="_ _15"> </span>to</div><div class="t m5 x1d h26 y1a1d ff7 fs19 fc1 sc0 ls0 ws0">an<span class="_ _11"> </span>adapter<span class="_ _16"> </span>on<span class="_ _11"> </span>a<span class="_ _11"> </span>host,<span class="_ _16"> </span>and<span class="_ _16"> </span>the<span class="_ _11"> </span>other<span class="_ _11"> </span>end<span class="_ _16"> </span>is<span class="_ _11"> </span>attached<span class="_ _16"> </span>to<span class="_ _11"> </span>a<span class="_ _11"> </span><span class="ffa">port<span class="_ _14"> </span></span>on<span class="_ _16"> </span>the<span class="_ _11"> </span>hub.<span class="_"> </span>A<span class="_ _16"> </span>hub</div><div class="t m5 x1d h26 y1a1e ff7 fs19 fc1 sc0 ls0 ws0">slavishly<span class="_ _11"> </span>copies<span class="_ _16"> </span>every<span class="_ _11"> </span>bit<span class="_ _11"> </span>that<span class="_ _16"> </span>it<span class="_ _11"> </span>receives<span class="_ _11"> </span>on<span class="_ _16"> </span>each<span class="_ _11"> </span>port<span class="_ _11"> </span>to<span class="_ _16"> </span>every<span class="_ _11"> </span>other<span class="_ _11"> </span>port.<span class="_ _16"> </span>T<span class="_ _1"></span>hus<span class="_ _1"></span>,</div><div class="t m5 x1d h26 y1a1f ff7 fs19 fc1 sc0 ls0 ws0">every<span class="_"> </span>host<span class="_"> </span>sees<span class="_"> </span>every<span class="_"> </span>bit.</div><div class="t m5 x29 h26 y1a20 ff7 fs19 fc1 sc0 ls0 ws0">Each<span class="_ _11"> </span>Ethernet<span class="_ _11"> </span>adapter<span class="_ _16"> </span>has<span class="_ _11"> </span>a<span class="_ _11"> </span>globally<span class="_ _11"> </span>unique<span class="_ _16"> </span>48-bit<span class="_ _11"> </span>address<span class="_ _11"> </span>that<span class="_ _11"> </span>is<span class="_ _16"> </span>stored<span class="_ _11"> </span>in</div><div class="t m5 x1d h26 y1a21 ff7 fs19 fc1 sc0 ls0 ws0">a<span class="_ _16"> </span>nonvolatile<span class="_ _16"> </span>memory<span class="_ _14"> </span>on<span class="_ _16"> </span>the<span class="_ _16"> </span>adapter.<span class="_ _16"> </span>A<span class="_ _14"> </span>host<span class="_ _16"> </span>can<span class="_ _16"> </span>send<span class="_ _14"> </span>a<span class="_ _16"> </span>chunk<span class="_ _16"> </span>of<span class="_ _14"> </span>bits<span class="_ _16"> </span>called<span class="_ _14"> </span>a</div><div class="t m5 x1d h26 y1a22 ffa fs19 fc1 sc0 ls0 ws0">frame<span class="_"> </span><span class="ff7">to<span class="_"> </span>any<span class="_"> </span>other<span class="_"> </span>host<span class="_"> </span>on<span class="_"> </span>the<span class="_"> </span>segment.<span class="_"> </span>Each<span class="_"> </span>frame<span class="_"> </span>includes<span class="_ _13"> </span>some<span class="_"> </span>ﬁxed<span class="_"> </span>number</span></div><div class="t m5 x1d h26 y1a23 ff7 fs19 fc1 sc0 ls0 ws0">of<span class="_"> </span><span class="ffa">header<span class="_"> </span></span>bits<span class="_"> </span>that<span class="_"> </span>identify<span class="_ _13"> </span>the<span class="_"> </span>source<span class="_"> </span>and<span class="_"> </span>destination<span class="_ _13"> </span>of<span class="_"> </span>the<span class="_"> </span>frame<span class="_"> </span>and<span class="_ _13"> </span>the<span class="_"> </span>frame</div><div class="t m5 x1d h26 y79fa ff7 fs19 fc1 sc0 ls0 ws0">length,<span class="_"> </span>followed<span class="_"> </span>by<span class="_ _13"> </span>a<span class="_"> </span><span class="ffa">payload<span class="_"> </span></span>of<span class="_"> </span>data<span class="_"> </span>bits<span class="_ _3"></span>.<span class="_"> </span>Every<span class="_"> </span>host<span class="_"> </span>adapter<span class="_ _13"> </span>sees<span class="_"> </span>the<span class="_"> </span>frame<span class="_ _1"></span>,<span class="_"> </span>but</div><div class="t m5 x1d h26 y79fb ff7 fs19 fc1 sc0 ls0 ws0">only<span class="_"> </span>the<span class="_"> </span>destination<span class="_"> </span>host<span class="_"> </span>actually<span class="_"> </span>reads<span class="_"> </span>it.</div><div class="t m5 x29 h26 y79fc ff7 fs19 fc1 sc0 ls0 ws0">Multiple<span class="_ _1f"> </span>Ethernet<span class="_ _1f"> </span>segments<span class="_ _1f"> </span>can<span class="_ _1f"> </span>be<span class="_ _1f"> </span>connected<span class="_ _1f"> </span>into<span class="_ _1f"> </span>larger<span class="_ _1f"> </span>LANs<span class="_ _3"></span>,<span class="_ _23"> </span>called</div><div class="t m5 x1d h26 y79fd ffa fs19 fc1 sc0 ls0 ws0">bridged<span class="_ _16"> </span>Ethernets<span class="ff7">,<span class="_ _16"> </span>using<span class="_ _16"> </span>a<span class="_ _16"> </span>set<span class="_ _16"> </span>of<span class="_ _16"> </span>wires<span class="_ _11"> </span>and<span class="_ _16"> </span>small<span class="_ _16"> </span>boxes<span class="_ _16"> </span>called<span class="_ _16"> </span></span>bridges<span class="ff7">,<span class="_ _16"> </span>as<span class="_ _16"> </span>shown</span></div><div class="t m5 x1d h26 y79fe ff7 fs19 fc1 sc0 ls0 ws0">in<span class="_ _15"> </span>F<span class="_ _0"></span>igure<span class="_ _15"> </span>11.4.<span class="_ _21"> </span>Bridged<span class="_ _15"> </span>Ethernets<span class="_ _15"> </span>can<span class="_ _21"> </span>span<span class="_ _15"> </span>entire<span class="_ _21"> </span>buildings<span class="_ _15"> </span>or<span class="_ _21"> </span>campuses<span class="_ _1"></span>.<span class="_ _15"> </span>In<span class="_ _21"> </span>a</div><div class="t m5 x1d h26 y79ff ff7 fs19 fc1 sc0 ls0 ws0">bridged<span class="_ _21"> </span>Ethernet,<span class="_ _e"> </span>some<span class="_ _21"> </span>wires<span class="_ _f"> </span>connect<span class="_ _21"> </span>bridges<span class="_ _f"> </span>to<span class="_ _21"> </span>bridges<span class="_ _0"></span>,<span class="_ _e"> </span>and<span class="_ _15"> </span>others<span class="_ _f"> </span>connect</div><div class="t m5 x1d h26 y7a00 ff7 fs19 fc1 sc0 ls0 ws0">bridges<span class="_ _16"> </span>to<span class="_ _14"> </span>hubs<span class="_ _1"></span>.<span class="_ _14"> </span>T<span class="_ _1"></span>he<span class="_ _14"> </span>bandwidths<span class="_ _14"> </span>of<span class="_ _16"> </span>the<span class="_ _14"> </span>wires<span class="_ _16"> </span>can<span class="_ _14"> </span>be<span class="_ _14"> </span>different.<span class="_ _16"> </span>In<span class="_ _14"> </span>our<span class="_ _14"> </span>example<span class="_ _1"></span>,</div><div class="t m5 x1d h26 y7a01 ff7 fs19 fc1 sc0 ls0 ws0">the<span class="_ _11"> </span>bridge–bridge<span class="_ _11"> </span>wire<span class="_ _11"> </span>has<span class="_"> </span>a<span class="_ _11"> </span>1<span class="_ _11"> </span>Gb/s<span class="_ _11"> </span>bandwidth,<span class="_ _16"> </span>while<span class="_"> </span>the<span class="_ _11"> </span>four<span class="_ _11"> </span>hub–bridge<span class="_ _11"> </span>wires</div><div class="t m5 x1d h26 y7a02 ff7 fs19 fc1 sc0 ls0 ws0">have<span class="_"> </span>bandwidths<span class="_"> </span>of<span class="_"> </span>100<span class="_"> </span>Mb/s<span class="_ _1"></span>.</div><div class="t m5 x29 h26 y7a03 ff7 fs19 fc1 sc0 ls0 ws0">Bridges<span class="_"> </span>make<span class="_ _11"> </span>better<span class="_ _11"> </span>use<span class="_ _11"> </span>of<span class="_ _11"> </span>the<span class="_ _11"> </span>available<span class="_ _11"> </span>wire<span class="_ _11"> </span>bandwidth<span class="_ _11"> </span>than<span class="_ _11"> </span>hubs<span class="_ _1"></span>.<span class="_ _11"> </span>Using<span class="_ _11"> </span>a</div><div class="t m5 x1d h26 y7a04 ff7 fs19 fc1 sc0 ls0 ws0">clever<span class="_ _11"> </span>distributed<span class="_ _16"> </span>algorithm,<span class="_ _11"> </span>they<span class="_ _16"> </span>automatically<span class="_ _11"> </span>learn<span class="_ _16"> </span>over<span class="_ _11"> </span>time<span class="_ _11"> </span>which<span class="_ _16"> </span>hosts<span class="_ _11"> </span>are</div><div class="t m5 x1d h26 y7a05 ff7 fs19 fc1 sc0 ls0 ws0">reachable<span class="_ _14"> </span>from<span class="_ _14"> </span>which<span class="_ _14"> </span>ports<span class="_ _14"> </span>and<span class="_ _14"> </span>then<span class="_ _14"> </span>selectively<span class="_ _15"> </span>copy<span class="_ _14"> </span>frames<span class="_ _14"> </span>from<span class="_ _14"> </span>one<span class="_ _14"> </span>port<span class="_ _14"> </span>to</div><div class="t m5 x1d h26 y7a06 ff7 fs19 fc1 sc0 ls0 ws0">another<span class="_"> </span>only<span class="_"> </span>when<span class="_ _13"> </span>it<span class="_"> </span>is<span class="_"> </span>necessary<span class="_ _3"></span>.<span class="_"> </span>F<span class="_ _3"></span>or<span class="_"> </span>example,<span class="_ _13"> </span>if<span class="_"> </span>host<span class="_"> </span>A<span class="_"> </span>sends<span class="_"> </span>a<span class="_"> </span>frame<span class="_ _13"> </span>to<span class="_"> </span>host<span class="_"> </span>B<span class="_ _3"></span>,</div><div class="t m5 x1d h26 y7a07 ff7 fs19 fc1 sc0 ls0 ws0">which<span class="_"> </span>is<span class="_ _13"> </span>on<span class="_"> </span>the<span class="_"> </span>segment,<span class="_"> </span>then<span class="_ _13"> </span>bridge<span class="_"> </span>X<span class="_"> </span>will<span class="_"> </span>throw<span class="_ _13"> </span>away<span class="_"> </span>the<span class="_"> </span>frame<span class="_ _13"> </span>when<span class="_"> </span>it<span class="_"> </span>arrives</div><div class="t m5 x1d h26 y7a08 ff7 fs19 fc1 sc0 ls0 ws0">at<span class="_ _13"> </span>its<span class="_ _13"> </span>input<span class="_ _13"> </span>port,<span class="_"> </span>thus<span class="_ _13"> </span>saving<span class="_ _13"> </span>bandwidth<span class="_ _13"> </span>on<span class="_ _13"> </span>the<span class="_ _13"> </span>other<span class="_ _13"> </span>segments<span class="_ _1"></span>.<span class="_ _13"> </span>However,<span class="_ _13"> </span>if<span class="_ _13"> </span>host<span class="_ _13"> </span>A</div><div class="t m5 x1d h26 y7a09 ff7 fs19 fc1 sc0 ls0 ws0">sends<span class="_"> </span>a<span class="_ _13"> </span>frame<span class="_"> </span>to<span class="_ _13"> </span>host<span class="_"> </span>C<span class="_ _13"> </span>on<span class="_"> </span>a<span class="_ _13"> </span>different<span class="_"> </span>segment,<span class="_ _13"> </span>then<span class="_"> </span>bridge<span class="_ _13"> </span>X<span class="_"> </span>will<span class="_ _13"> </span>copy<span class="_"> </span>the<span class="_ _13"> </span>frame</div><div class="t m5 x1d h26 y7a0a ff7 fs19 fc1 sc0 ls0 ws0">only<span class="_"> </span>to<span class="_ _13"> </span>the<span class="_"> </span>port<span class="_ _13"> </span>connected<span class="_"> </span>to<span class="_ _13"> </span>bridge<span class="_"> </span>Y<span class="_ _7"></span>,<span class="_"> </span>which<span class="_ _13"> </span>will<span class="_"> </span>copy<span class="_ _13"> </span>the<span class="_"> </span>frame<span class="_"> </span>only<span class="_ _13"> </span>to<span class="_"> </span>the<span class="_ _13"> </span>port</div><div class="t m5 x1d h26 y7a0b ff7 fs19 fc1 sc0 ls0 ws0">connected<span class="_"> </span>to<span class="_"> </span>host<span class="_"> </span>C’s<span class="_"> </span>segment.</div></div><div class="pi" data-data='{"ctm":[2.000000,0.000000,0.000000,2.000000,0.000000,0.000000]}'></div></div>
