<div id="pfab" class="pf w2 h11" data-page-no="ab"><div class="pc pcab w2 h11"><img class="bi x0 y0 w1 h1" alt="" src="csapp/bgab.png"/><div class="t m5 x14 h28 y9b ffe fs1e fc2 sc0 ls0 ws0">170<span class="_ _1b"> </span><span class="ff6 fs1f">Chapter<span class="_ _10"> </span>2<span class="_ _3d"> </span>Representing<span class="_ _10"> </span>and<span class="_ _10"> </span>Manipulating<span class="_ _10"> </span>Information</span></div><div class="t m5 x1d h73 ye7 ffe fs1e fc6 sc0 ls0 ws0">2.73<span class="_ _23"> </span><span class="ff10 fs19">◆◆</span></div><div class="t m5 x1d h26 y2a7 ff7 fs19 fc1 sc0 ls0 ws0">Write<span class="_"> </span>code<span class="_"> </span>for<span class="_"> </span>a<span class="_"> </span>function<span class="_"> </span>with<span class="_"> </span>the<span class="_"> </span>following<span class="_"> </span>prototype:</div><div class="t m5 x1d h2d y1b0d ffd fs1e fc2 sc0 ls0 ws0">/*<span class="_ _e"> </span>Addition<span class="_ _1f"> </span>that<span class="_ _1f"> </span>saturates<span class="_ _e"> </span>to<span class="_ _1f"> </span>TMin<span class="_ _e"> </span>or<span class="_ _1f"> </span>TMax<span class="_ _1f"> </span>*/</div><div class="t m5 x1d h2d y1b0e ffd fs1e fc2 sc0 ls0 ws0">int<span class="_ _e"> </span>saturating_add(int<span class="_ _1f"> </span>x,<span class="_ _1f"> </span>int<span class="_ _e"> </span>y);</div><div class="t m5 x29 h26 y1b0f ff7 fs19 fc2 sc0 ls0 ws0">Instead<span class="_"> </span>of<span class="_"> </span>overﬂowing<span class="_"> </span>the<span class="_"> </span>way<span class="_"> </span>normal<span class="_ _13"> </span>two’s-complement<span class="_"> </span>addition<span class="_"> </span>does<span class="_ _3"></span>,<span class="_"> </span>sat-</div><div class="t m5 x1d h26 y1b10 ff7 fs19 fc2 sc0 ls0 ws0">urating<span class="_"> </span>addition<span class="_"> </span>returns<span class="_ _13"> </span><span class="ffa">TMax<span class="_"> </span></span>when<span class="_"> </span>there<span class="_"> </span>would<span class="_"> </span>be<span class="_ _13"> </span>positive<span class="_"> </span>overﬂow<span class="_ _3"></span>,<span class="_"> </span>and<span class="_"> </span><span class="ffa">TMin</span></div><div class="t m5 x1d h26 y1b11 ff7 fs19 fc2 sc0 ls0 ws0">when<span class="_"> </span>there<span class="_ _11"> </span>would<span class="_"> </span>be<span class="_ _11"> </span>negative<span class="_ _11"> </span>overﬂow<span class="_ _3"></span>.<span class="_ _11"> </span>Saturating<span class="_ _11"> </span>arithmetic<span class="_"> </span>is<span class="_ _11"> </span>commonly<span class="_"> </span>used</div><div class="t m5 x1d h26 y1b12 ff7 fs19 fc2 sc0 ls0 ws0">in<span class="_"> </span>programs<span class="_"> </span>that<span class="_"> </span>perform<span class="_"> </span>digital<span class="_"> </span>signal<span class="_"> </span>processing.</div><div class="t m5 x29 h26 y1b13 ff7 fs19 fc2 sc0 ls0 ws0">Y<span class="_ _3"></span>our<span class="_"> </span>function<span class="_"> </span>should<span class="_"> </span>follow<span class="_"> </span>the<span class="_"> </span>bit-level<span class="_"> </span>integer<span class="_"> </span>coding<span class="_"> </span>rules<span class="_"> </span>(page<span class="_"> </span>164).</div><div class="t m5 x1d h73 y1b14 ffe fs1e fc6 sc0 ls0 ws0">2.74<span class="_ _23"> </span><span class="ff10 fs19">◆◆</span></div><div class="t m5 x1d h26 y1b15 ff7 fs19 fc1 sc0 ls0 ws0">Write<span class="_"> </span>a<span class="_"> </span>function<span class="_"> </span>with<span class="_"> </span>the<span class="_"> </span>following<span class="_"> </span>prototype:</div><div class="t m5 x1d h2d y1b16 ffd fs1e fc2 sc0 ls0 ws0">/*<span class="_ _e"> </span>Determine<span class="_ _1f"> </span>whether<span class="_ _1f"> </span>arguments<span class="_ _e"> </span>can<span class="_ _1f"> </span>be<span class="_ _e"> </span>subtracted<span class="_ _1f"> </span>without<span class="_ _1f"> </span>overflow<span class="_ _e"> </span>*/</div><div class="t m5 x1d h2d y1b17 ffd fs1e fc2 sc0 ls0 ws0">int<span class="_ _e"> </span>tsub_ok(int<span class="_ _1f"> </span>x,<span class="_ _1f"> </span>int<span class="_ _e"> </span>y);</div><div class="t m5 x29 h26 y1b18 ff7 fs19 fc2 sc0 ls0 ws0">T<span class="_ _1"></span>his<span class="_"> </span>function<span class="_"> </span>should<span class="_"> </span>return<span class="_"> </span>1<span class="_"> </span>if<span class="_"> </span>the<span class="_"> </span>computation<span class="_"> </span><span class="ffd">x-y<span class="_ _10"> </span></span>does<span class="_"> </span>not<span class="_"> </span>overﬂow<span class="_ _1"></span>.</div><div class="t m5 x1d h73 y1b19 ffe fs1e fc6 sc0 ls0 ws0">2.75<span class="_ _23"> </span><span class="ff10 fs19">◆◆◆</span></div><div class="t m5 x1d h26 y1b1a ff7 fs19 fc1 sc0 ls0 ws0">Suppose<span class="_"> </span>we<span class="_ _11"> </span>want<span class="_ _11"> </span>to<span class="_ _11"> </span>compute<span class="_ _11"> </span>the<span class="_"> </span>complete<span class="_ _11"> </span>2<span class="ff11">w<span class="_ _2"></span></span>-bit<span class="_ _11"> </span>representation<span class="_ _11"> </span>of<span class="_"> </span><span class="ff11">x</span></div><div class="t m5 x217 h45 y1b1b ff11 fs19 fc1 sc0 ls0 ws0">.</div><div class="t m5 x230 h26 y1b1a ff11 fs19 fc1 sc0 ls0 ws0">y<span class="_ _2"></span><span class="ff7">,<span class="_ _11"> </span>where</span></div><div class="t m5 x1d h26 y1b1c ff7 fs19 fc1 sc0 ls0 ws0">both<span class="_"> </span><span class="ff11">x<span class="_"> </span></span>and<span class="_"> </span><span class="ff11">y<span class="_"> </span></span>are<span class="_ _11"> </span>unsigned,<span class="_ _11"> </span>on<span class="_"> </span>a<span class="_ _11"> </span>machine<span class="_"> </span>for<span class="_ _11"> </span>which<span class="_ _11"> </span>data<span class="_"> </span>type<span class="_ _11"> </span><span class="ffd">unsigned<span class="_ _11"> </span></span>is<span class="_"> </span><span class="ff11">w<span class="_"> </span></span>bits<span class="_ _3"></span>.</div><div class="t m5 x1d h26 y1b1d ff7 fs19 fc1 sc0 ls0 ws0">T<span class="_ _1"></span>he<span class="_"> </span>low-order<span class="_"> </span><span class="ff11">w<span class="_ _10"> </span></span>bits<span class="_"> </span>of<span class="_"> </span>the<span class="_ _13"> </span>product<span class="_"> </span>can<span class="_"> </span>be<span class="_ _13"> </span>computed<span class="_"> </span>with<span class="_"> </span>the<span class="_"> </span>expression<span class="_ _13"> </span><span class="ffd">x*y</span><span class="ls119">,s<span class="_ _4a"></span>o</span></div><div class="t m5 x1d h26 y1b1e ff7 fs19 fc1 sc0 ls0 ws0">we<span class="_"> </span>only<span class="_"> </span>require<span class="_"> </span>a<span class="_"> </span>procedure<span class="_"> </span>with<span class="_"> </span>prototype</div><div class="t m5 x10c h2d y1b1f ffd fs1e fc2 sc0 ls0 ws0">unsigned<span class="_ _e"> </span>unsigned_high_prod(unsigned<span class="_ _1f"> </span>x,<span class="_ _1f"> </span>unsigned<span class="_ _e"> </span>y);</div><div class="t m5 x1d h26 y1b20 ff7 fs19 fc2 sc0 ls0 ws0">that<span class="_"> </span>computes<span class="_"> </span>the<span class="_"> </span>high-order<span class="_"> </span><span class="ff11">w<span class="_ _11"> </span></span>bits<span class="_"> </span>of<span class="_"> </span><span class="ff11">x</span></div><div class="t m5 xa1 h45 y1b21 ff11 fs19 fc2 sc0 ls0 ws0">.</div><div class="t m5 x13c h26 y1b20 ff11 fs19 fc2 sc0 ls0 ws0">y<span class="_"> </span><span class="ff7">for<span class="_"> </span>unsigned<span class="_"> </span>variables<span class="_ _3"></span>.</span></div><div class="t m5 x29 h26 y1b22 ff7 fs19 fc2 sc0 ls0 ws0">W<span class="_ _3"></span>e<span class="_"> </span>have<span class="_"> </span>access<span class="_"> </span>to<span class="_"> </span>a<span class="_"> </span>library<span class="_"> </span>function<span class="_"> </span>with<span class="_"> </span>prototype</div><div class="t m5 x10c h2d y1b23 ffd fs1e fc2 sc0 ls0 ws0">int<span class="_ _e"> </span>signed_high_prod(int<span class="_ _1f"> </span>x,<span class="_ _1f"> </span>int<span class="_ _e"> </span>y);</div><div class="t m5 x1d h26 y1b24 ff7 fs19 fc2 sc0 ls0 ws0">that<span class="_ _13"> </span>computes<span class="_ _6"> </span>the<span class="_ _13"> </span>high-order<span class="_ _13"> </span><span class="ff11">w<span class="_ _13"> </span></span>bits<span class="_ _13"> </span>of<span class="_ _13"> </span><span class="ff11">x</span></div><div class="t m5 x1db h45 y1b25 ff11 fs19 fc2 sc0 ls0 ws0">.</div><div class="t m5 xa1 h26 y1b24 ff11 fs19 fc2 sc0 ls0 ws0">y<span class="_ _10"> </span><span class="ff7">for<span class="_ _13"> </span>the<span class="_ _13"> </span>case<span class="_ _6"> </span>where<span class="_ _13"> </span></span>x<span class="_ _10"> </span><span class="ff7">and<span class="_ _13"> </span></span>y<span class="_ _10"> </span><span class="ff7">are<span class="_ _13"> </span>in<span class="_ _6"> </span>two’s-</span></div><div class="t m5 x1d h26 y1b26 ff7 fs19 fc2 sc0 ls0 ws0">complement<span class="_ _16"> </span>form.<span class="_ _16"> </span>Write<span class="_ _11"> </span>code<span class="_ _16"> </span>calling<span class="_ _16"> </span>this<span class="_ _16"> </span>procedure<span class="_ _16"> </span>to<span class="_ _16"> </span>implement<span class="_ _16"> </span>the<span class="_ _16"> </span>function</div><div class="t m5 x1d h26 y1b27 ff7 fs19 fc2 sc0 ls0 ws0">for<span class="_"> </span>unsigned<span class="_"> </span>arguments<span class="_ _1"></span>.<span class="_"> </span>J<span class="_ _1"></span>ustify<span class="_"> </span>the<span class="_"> </span>correctness<span class="_"> </span>of<span class="_"> </span>your<span class="_"> </span>solution.</div><div class="t m5 x29 h26 y1b28 ffa fs19 fc2 sc0 ls0 ws0">Hint:<span class="_ _11"> </span><span class="ff7">Look<span class="_ _16"> </span>at<span class="_ _16"> </span>the<span class="_ _11"> </span>relationship<span class="_ _16"> </span>between<span class="_ _11"> </span>the<span class="_ _16"> </span>signed<span class="_ _11"> </span>product<span class="_ _16"> </span><span class="ff11">x</span></span></div><div class="t m5 x1c1 h45 y1b29 ff11 fs19 fc2 sc0 ls0 ws0">.</div><div class="t m5 x14d h26 y1b28 ff11 fs19 fc2 sc0 ls0 ws0">y<span class="_"> </span><span class="ff7">and<span class="_ _16"> </span>the<span class="_ _11"> </span>un-</span></div><div class="t m5 x1d h26 y1b2a ff7 fs19 fc2 sc0 ls0 ws0">signed<span class="_"> </span>product<span class="_"> </span><span class="ff11">x</span></div><div class="t m5 x1af h4b y1b2b ff12 fs25 fc2 sc0 ls0 ws0"></div><div class="t m5 xf1 h45 y1b2c ff11 fs19 fc2 sc0 ls0 ws0">.</div><div class="t m5 xb7 h45 y1b2d ff11 fs19 fc2 sc0 ls0 ws0">y</div><div class="t m5 xac h4b y1b2e ff12 fs25 fc2 sc0 ls0 ws0"></div><div class="t m5 x10f h26 y1b2f ff7 fs19 fc2 sc0 ls0 ws0">in<span class="_"> </span>the<span class="_"> </span>derivation<span class="_"> </span>of<span class="_"> </span>Equation<span class="_"> </span>2.18.</div><div class="t m5 x1d h73 y1b30 ffe fs1e fc6 sc0 ls0 ws0">2.76<span class="_ _23"> </span><span class="ff10 fs19">◆</span></div><div class="t m5 x1d h26 y1b31 ff7 fs19 fc1 sc0 ls0 ws0">T<span class="_ _1"></span>he<span class="_"> </span>library<span class="_"> </span>function<span class="_"> </span><span class="ffd">calloc<span class="_ _10"> </span></span>has<span class="_"> </span>the<span class="_"> </span>following<span class="_"> </span>declaration:</div><div class="t m5 x75 h2d y1b32 ffd fs1e fc2 sc0 ls0 ws0">void<span class="_ _e"> </span>*calloc(size_t<span class="_ _1f"> </span>nmemb,<span class="_ _1f"> </span>size_t<span class="_ _e"> </span>size);</div><div class="t m5 x1d h26 y1b33 ff7 fs19 fc2 sc0 ls0 ws0">According<span class="_ _13"> </span>to<span class="_"> </span>the<span class="_ _13"> </span>library<span class="_ _13"> </span>documentation,<span class="_"> </span>“T<span class="_ _3"></span>he<span class="_"> </span><span class="ffd">calloc<span class="_ _13"> </span></span>function<span class="_ _13"> </span>allocates<span class="_"> </span>memory</div><div class="t m5 x1d h26 y1b34 ff7 fs19 fc2 sc0 ls0 ws0">for<span class="_"> </span>an<span class="_ _11"> </span>array<span class="_ _11"> </span>of<span class="_ _11"> </span><span class="ffd">nmemb<span class="_ _11"> </span></span>elements<span class="_ _11"> </span>of<span class="_ _11"> </span><span class="ffd">size<span class="_ _11"> </span></span>bytes<span class="_ _11"> </span>each.<span class="_"> </span>The<span class="_"> </span>memory<span class="_ _11"> </span>is<span class="_ _11"> </span>set<span class="_"> </span>to<span class="_ _11"> </span>zero.<span class="_"> </span>If</div><div class="t m5 x1d h26 y1b35 ffd fs19 fc2 sc0 ls0 ws0">nmemb<span class="_ _10"> </span><span class="ff7">or<span class="_"> </span></span>size<span class="_ _10"> </span><span class="ff7">is<span class="_"> </span>zero<span class="_ _0"></span>,<span class="_"> </span>then<span class="_"> </span><span class="ffd">calloc<span class="_ _10"> </span></span>returns<span class="_"> </span><span class="ffd">NULL</span><span class="ls73">.”</span></span></div><div class="t m5 x29 h26 y1b36 ff7 fs19 fc2 sc0 ls0 ws0">Write<span class="_"> </span>an<span class="_ _11"> </span>implementation<span class="_ _11"> </span>of<span class="_ _11"> </span><span class="ffd">calloc<span class="_ _10"> </span></span>that<span class="_ _11"> </span>performs<span class="_ _11"> </span>the<span class="_ _11"> </span>allocation<span class="_ _11"> </span>by<span class="_"> </span>a<span class="_ _11"> </span>call<span class="_ _11"> </span>to</div><div class="t m5 x1d h26 y1b37 ffd fs19 fc2 sc0 ls0 ws0">malloc<span class="_ _10"> </span><span class="ff7">and<span class="_ _11"> </span>sets<span class="_ _11"> </span>the<span class="_ _11"> </span>memory<span class="_ _11"> </span>to<span class="_"> </span>zero<span class="_ _11"> </span>via<span class="_ _11"> </span></span>memset<span class="ff7">.<span class="_ _11"> </span>Y<span class="_ _3"></span>our<span class="_"> </span>code<span class="_ _11"> </span>should<span class="_ _11"> </span>not<span class="_"> </span>have<span class="_ _11"> </span>any</span></div><div class="t m5 x1d h26 y1b38 ff7 fs19 fc2 sc0 ls0 ws0">vulnerabilities<span class="_ _13"> </span>due<span class="_"> </span>to<span class="_ _13"> </span>arithmetic<span class="_ _13"> </span>overﬂow<span class="_ _3"></span>,<span class="_"> </span>and<span class="_ _13"> </span>it<span class="_"> </span>should<span class="_ _13"> </span>work<span class="_ _13"> </span>correctly<span class="_"> </span>regardless</div><div class="t m5 x1d h26 y1b39 ff7 fs19 fc2 sc0 ls0 ws0">of<span class="_"> </span>the<span class="_"> </span>number<span class="_"> </span>of<span class="_"> </span>bits<span class="_"> </span>used<span class="_"> </span>to<span class="_"> </span>represent<span class="_"> </span>data<span class="_"> </span>of<span class="_"> </span>type<span class="_"> </span><span class="ffd">size_t</span>.</div><div class="t m5 x29 h26 y1b3a ff7 fs19 fc2 sc0 ls0 ws0">As<span class="_ _13"> </span>a<span class="_ _13"> </span>reference<span class="_ _1"></span>,<span class="_"> </span>functions<span class="_ _13"> </span><span class="ffd">malloc<span class="_ _13"> </span></span>and<span class="_ _13"> </span><span class="ffd">memset<span class="_ _13"> </span></span>have<span class="_ _13"> </span>the<span class="_ _13"> </span>following<span class="_ _13"> </span>declarations:</div></div><div class="pi" data-data='{"ctm":[2.000000,0.000000,0.000000,2.000000,0.000000,0.000000]}'></div></div>
