<div id="pf1c3" class="pf w2 h11" data-page-no="1c3"><div class="pc pc1c3 w2 h11"><img class="bi x0 y0 w1 h1" alt="" src="csapp/bg1c3.png"/><div class="t m5 x14 h28 y9b ffe fs1e fc2 sc0 ls0 ws0">450<span class="_ _1b"> </span><span class="ff6 fs1f">Chapter<span class="_ _10"> </span>4<span class="_ _3d"> </span>Processor<span class="_ _10"> </span>Architecture</span></div><div class="t m5 x12f h3f y3e32 ff43 fs27 fc1 sc0 ls0 ws0">Clock</div><div class="t m5 x1c h3f y3e33 ff43 fs27 fc1 sc0 ls0 ws0">Comb.</div><div class="t m5 x10d h3f y3e34 ff43 fs27 fc1 sc0 ls0 ws0">logic</div><div class="t m5 x1c4 h3f y3e35 ff43 fs27 fc1 sc0 ls0 ws0">A</div><div class="t m5 xf1 h3f y3e36 ff43 fs27 fc1 sc0 ls0 ws0">R</div><div class="t m5 xf0 h3f y3e37 ff43 fs27 fc1 sc0 ls0 ws0">e</div><div class="t m5 xf0 h3f y3e38 ff43 fs27 fc1 sc0 ls0 ws0">g</div><div class="t m5 x1d h3f y3e39 ff43 fs27 fc1 sc0 ls0 ws0">(a) Hardware: Three-stage pipeline</div><div class="t m5 x1c h3f y3e3a ff43 fs27 fc1 sc0 ls0 ws0">100 ps<span class="_ _52"> </span>20 ps</div><div class="t m5 x90 h3f y3e3b ff43 fs27 fc1 sc0 ls0 ws0">Comb.</div><div class="t m5 xba h3f y3e3c ff43 fs27 fc1 sc0 ls0 ws0">logic</div><div class="t m5 xa8 h3f y3e3d ff43 fs27 fc1 sc0 ls0 ws0">B</div><div class="t m5 x20c h3f y3e3e ff43 fs27 fc1 sc0 ls0 ws0">R</div><div class="t m5 x122 h3f y3e3f ff43 fs27 fc1 sc0 ls0 ws0">e</div><div class="t m5 x122 h3f y3e40 ff43 fs27 fc1 sc0 ls0 ws0">g</div><div class="t m5 xe2 h3f y3e41 ff43 fs27 fc1 sc0 ls0 ws0">100 ps<span class="_ _52"> </span>20 ps</div><div class="t m5 x13c h3f y3e42 ff43 fs27 fc1 sc0 ls0 ws0">Comb.</div><div class="t m5 x19b h3f y3e43 ff43 fs27 fc1 sc0 ls0 ws0">logic</div><div class="t m5 xc0 h3f y3e44 ff43 fs27 fc1 sc0 ls0 ws0">C</div><div class="t m5 xf2 h3f y3e45 ff43 fs27 fc1 sc0 ls0 ws0">R</div><div class="t m5 x107 h3f y3e46 ff43 fs27 fc1 sc0 ls0 ws0">e</div><div class="t m5 x107 h3f y3e47 ff43 fs27 fc1 sc0 ls0 ws0">g</div><div class="t m5 x7e h3f y3e48 ff43 fs27 fc1 sc0 ls0 ws0">100 ps<span class="_ _f1"> </span>20 ps</div><div class="t m5 x155 h3f y3e49 ff43 fs27 fc1 sc0 ls0 ws0">(b) Pipeline diagram</div><div class="t m5 x33 h3f y3e4a ff43 fs27 fc1 sc0 ls0 ws0">T<span class="_ _0"></span>ime</div><div class="t m5 x18c h3f y3e4b ff43 fs27 fc1 sc0 ls0 ws0">Delay <span class="ff24"></span> 360 ps</div><div class="t m5 x18c h3f y3e4c ff43 fs27 fc1 sc0 ls0 ws0">Throughput <span class="ff24"></span> 8.33 GIPS</div><div class="t m5 xa2 h40 y3e4d ff44 fs28 fc1 sc0 ls0 ws0">I1</div><div class="t m5 xa2 h40 y3e4e ff44 fs28 fc1 sc0 ls0 ws0">I2</div><div class="t m5 xa2 h40 y3e4f ff44 fs28 fc1 sc0 ls0 ws0">I3</div><div class="t m5 x4f h3f y3e50 ff43 fs27 fc1 sc0 ls1c0 ws0">ABC</div><div class="t m5 xe0 h3f y3e51 ff43 fs27 fc1 sc0 ls1c1 ws0">ABC</div><div class="t m5 x76 h3f y3e52 ff43 fs27 fc1 sc0 ls1c0 ws0">ABC</div><div class="t m5 x1d h34 y3e53 ffe fs16 fc6 sc0 ls0 ws0">Figure<span class="_"> </span>4.33<span class="_ _66"> </span><span class="fc1">Three-stage<span class="_"> </span>pipelined<span class="_"> </span>computation<span class="_"> </span>hardware.<span class="_"> </span><span class="ff6">The<span class="_ _11"> </span>computation<span class="_ _10"> </span>is<span class="_ _11"> </span>split</span></span></div><div class="t m5 x1d h34 y3e54 ff6 fs16 fc1 sc0 ls0 ws0">into<span class="_ _10"> </span>stages<span class="_ _11"> </span>A,<span class="_ _11"> </span>B,<span class="_ _11"> </span>and<span class="_ _11"> </span>C.<span class="_ _10"> </span>On<span class="_ _11"> </span>each<span class="_ _11"> </span>120<span class="_ _13"> </span>ps<span class="_ _10"> </span>cycle,<span class="_ _11"> </span>each<span class="_ _10"> </span>instruction<span class="_ _11"> </span>progresses<span class="_ _11"> </span>through<span class="_ _11"> </span>one</div><div class="t m5 x1d h34 y3e55 ff6 fs16 fc1 sc0 ls0 ws0">stage.</div><div class="t m5 x14 h2f y3e56 ffe fs16 fc6 sc0 ls0 ws0">Figure<span class="_"> </span>4.34</div><div class="t m5 x14 h2f y3e57 ffe fs16 fc1 sc0 ls0 ws0">Three-stage<span class="_ _14"> </span>pipeline</div><div class="t m5 x14 h34 y3e58 ffe fs16 fc1 sc0 ls0 ws0">timing.<span class="_"> </span><span class="ff6">The<span class="_ _11"> </span>rising<span class="_ _11"> </span>edge<span class="_ _11"> </span>of</span></div><div class="t m5 x14 h34 y3e59 ff6 fs16 fc1 sc0 ls0 ws0">the<span class="_ _13"> </span>clock<span class="_ _6"> </span>signal<span class="_ _13"> </span>controls<span class="_ _6"> </span>the</div><div class="t m5 x14 h34 y3e5a ff6 fs16 fc1 sc0 ls0 ws0">movement<span class="_ _11"> </span>of<span class="_ _11"> </span>instructions</div><div class="t m5 x14 h34 y3e5b ff6 fs16 fc1 sc0 ls0 ws0">from<span class="_ _10"> </span>one<span class="_ _11"> </span>pipeline<span class="_ _11"> </span>stage<span class="_ _11"> </span>to</div><div class="t m5 x14 h34 y3e5c ff6 fs16 fc1 sc0 ls0 ws0">the<span class="_ _10"> </span>next.</div><div class="t m5 xe0 h3f y3e5d ff43 fs27 fc1 sc0 ls0 ws0">Clock</div><div class="t m5 xc1 h70 y3e5e ff44 fs27 fc1 sc0 ls0 ws0">I1</div><div class="t m5 xc1 h70 y3e5f ff44 fs27 fc1 sc0 ls0 ws0">I2</div><div class="t m5 xc1 h70 y3e60 ff44 fs27 fc1 sc0 ls0 ws0">I3</div><div class="t m5 x91 h3f y3e61 ff43 fs27 fc1 sc0 ls0 ws0">120<span class="_ _1b6"></span>0<span class="_ _d0"> </span>240<span class="_ _1a"> </span>360</div><div class="t m5 x9e h3f y3e62 ff43 fs27 fc1 sc0 ls0 ws0">T<span class="_ _0"></span>ime</div><div class="t m5 x99 h3f y3e61 ff43 fs27 fc1 sc0 ls0 ws0">480<span class="_ _1a"> </span>600</div><div class="t m5 xd h3f y3e63 ff43 fs27 fc1 sc0 ls1c0 ws0">ABC</div><div class="t m5 x90 h3f y3e64 ff43 fs27 fc1 sc0 ls1c1 ws0">ABC</div><div class="t m5 x176 h3f y3e65 ff43 fs27 fc1 sc0 ls1c0 ws0">ABC</div><div class="t m5 x1d h46 y3e66 ff7 fs19 fc1 sc0 ls0 ws0">this<span class="_ _16"> </span>system,<span class="_ _14"> </span>we<span class="_ _14"> </span>could<span class="_ _16"> </span>cycle<span class="_ _16"> </span>the<span class="_ _16"> </span>clocks<span class="_ _14"> </span>every<span class="_ _16"> </span>100<span class="_"> </span><span class="ff12">+<span class="_ _10"> </span></span>20<span class="_ _13"> </span><span class="ff12">=<span class="_ _10"> </span></span>120<span class="_ _16"> </span>picoseconds<span class="_ _0"></span>,<span class="_ _14"> </span>giving</div><div class="t m5 x1d h26 y3e67 ff7 fs19 fc1 sc0 ls0 ws0">a<span class="_"> </span>throughput<span class="_ _11"> </span>of<span class="_ _11"> </span>around<span class="_ _11"> </span>8<span class="ff11">.</span>33<span class="_"> </span>GIPS<span class="_ _3"></span>.<span class="_ _11"> </span>Since<span class="_ _11"> </span>processing<span class="_"> </span>a<span class="_ _11"> </span>single<span class="_ _11"> </span>instruction<span class="_ _11"> </span>requires</div><div class="t m5 x1d h46 y3e68 ff7 fs19 fc1 sc0 ls0 ws0">3<span class="_"> </span>clock<span class="_ _11"> </span>cycles<span class="_ _1"></span>,<span class="_"> </span>the<span class="_ _11"> </span>latency<span class="_"> </span>of<span class="_ _11"> </span>this<span class="_ _11"> </span>pipeline<span class="_"> </span>is<span class="_ _11"> </span>3<span class="_ _13"> </span><span class="ff12">×<span class="_ _10"> </span></span>120<span class="_ _13"> </span><span class="ff12">=<span class="_ _10"> </span></span>360<span class="_"> </span>ps.<span class="_"> </span>W<span class="_ _3"></span>e<span class="_ _11"> </span>have<span class="_"> </span>increased</div><div class="t m5 x1d h46 y3e69 ff7 fs19 fc1 sc0 ls0 ws0">the<span class="_ _14"> </span>throughput<span class="_ _15"> </span>of<span class="_ _14"> </span>the<span class="_ _15"> </span>system<span class="_ _14"> </span>by<span class="_ _15"> </span>a<span class="_ _14"> </span>factor<span class="_ _15"> </span>of<span class="_ _15"> </span>8<span class="ff11">.</span>33<span class="_ _1"></span><span class="ff11">/<span class="ff7">3</span>.<span class="ff7">12<span class="_"> </span><span class="ff12">=<span class="_ _13"> </span></span>2<span class="_ _2"></span></span>.<span class="ff7">67<span class="_ _14"> </span>at<span class="_ _14"> </span>the<span class="_ _15"> </span>expense<span class="_ _14"> </span>of</span></span></div><div class="t m5 x1d h46 y3e6a ff7 fs19 fc1 sc0 ls0 ws0">some<span class="_ _11"> </span>added<span class="_ _16"> </span>hardware<span class="_ _11"> </span>and<span class="_ _16"> </span>a<span class="_ _16"> </span>slight<span class="_ _11"> </span>increase<span class="_ _16"> </span>in<span class="_ _11"> </span>the<span class="_ _16"> </span>latenc<span class="_ _0"></span>y<span class="_ _11"> </span>(360<span class="_ _2"></span><span class="ff11">/</span>320<span class="_ _13"> </span><span class="ff12">=<span class="_ _10"> </span></span>1<span class="_ _1"></span><span class="ff11">.<span class="ff7">12).<span class="_ _16"> </span>T<span class="_ _1"></span>he</span></span></div><div class="t m5 x1b0 h26 y3e6b ff7 fs19 fc1 sc0 ls0 ws0">increased<span class="_"> </span>latency<span class="_"> </span>is<span class="_"> </span>due<span class="_"> </span>to<span class="_"> </span>the<span class="_"> </span>time<span class="_"> </span>overhead<span class="_"> </span>of<span class="_"> </span>the<span class="_"> </span>added<span class="_"> </span>pipeline<span class="_"> </span>registers<span class="_ _3"></span>.</div><div class="t m5 x1d h41 yc8b ffe fs29 fc1 sc0 ls0 ws0">4.4.2<span class="_ _48"> </span><span class="fs19">A<span class="_"> </span>Detailed<span class="_"> </span>Look<span class="_"> </span>at<span class="_"> </span>Pipeline<span class="_"> </span>Operation</span></div><div class="t m5 x1d h26 y3e6c ff7 fs19 fc1 sc0 ls0 ws0">T<span class="_ _7"></span>o<span class="_ _13"> </span>better<span class="_ _13"> </span>understand<span class="_ _13"> </span>how<span class="_ _6"> </span>pipelining<span class="_ _13"> </span>works<span class="_ _1"></span>,<span class="_ _13"> </span>let<span class="_ _13"> </span>us<span class="_ _13"> </span>look<span class="_ _13"> </span>in<span class="_ _6"> </span>some<span class="_ _13"> </span>detail<span class="_ _13"> </span>at<span class="_ _13"> </span>the<span class="_ _6"> </span>timing</div><div class="t m5 x1d h26 y3e6d ff7 fs19 fc1 sc0 ls0 ws0">and<span class="_ _11"> </span>operation<span class="_ _11"> </span>of<span class="_ _16"> </span>pipeline<span class="_ _11"> </span>computations<span class="_ _1"></span>.<span class="_ _11"> </span>Figure<span class="_"> </span>4.34<span class="_ _16"> </span>shows<span class="_ _11"> </span>the<span class="_ _11"> </span>pipeline<span class="_ _16"> </span>diagram</div><div class="t m5 x1d h26 y3e6e ff7 fs19 fc1 sc0 ls0 ws0">for<span class="_"> </span>the<span class="_ _13"> </span>three-stage<span class="_"> </span>pipeline<span class="_"> </span>we<span class="_"> </span>have<span class="_ _13"> </span>already<span class="_"> </span>looked<span class="_"> </span>at<span class="_ _13"> </span>(Figure<span class="_ _13"> </span>4.33).<span class="_"> </span>T<span class="_ _1"></span>he<span class="_"> </span>transfer</div><div class="t m5 x1d h26 y3e6f ff7 fs19 fc1 sc0 ls0 ws0">of<span class="_ _13"> </span>the<span class="_ _6"> </span>instructions<span class="_ _13"> </span>between<span class="_ _6"> </span>pipeline<span class="_ _13"> </span>stages<span class="_ _6"> </span>is<span class="_ _13"> </span>controlled<span class="_ _6"> </span>by<span class="_ _13"> </span>a<span class="_ _6"> </span>clock<span class="_ _13"> </span>signal,<span class="_ _13"> </span>as<span class="_ _6"> </span>shown</div><div class="t m5 x1d h26 y3e70 ff7 fs19 fc1 sc0 ls0 ws0">above<span class="_ _11"> </span>the<span class="_ _16"> </span>pipeline<span class="_ _16"> </span>diagram.<span class="_ _11"> </span>Every<span class="_ _16"> </span>120<span class="_ _13"> </span>ps<span class="_ _3"></span>,<span class="_ _16"> </span>this<span class="_ _16"> </span>signal<span class="_ _11"> </span>rises<span class="_ _16"> </span>from<span class="_ _16"> </span>0<span class="_ _11"> </span>to<span class="_ _16"> </span>1,<span class="_ _16"> </span>initiating</div><div class="t m5 x1d h26 y3e71 ff7 fs19 fc1 sc0 ls0 ws0">the<span class="_"> </span>next<span class="_"> </span>set<span class="_"> </span>of<span class="_"> </span>pipeline<span class="_"> </span>stage<span class="_"> </span>evaluations<span class="_ _1"></span>.</div><div class="t m5 x29 h26 y3e72 ff7 fs19 fc1 sc0 ls0 ws0">F<span class="_ _1"></span>igure<span class="_ _16"> </span>4.35<span class="_ _16"> </span>traces<span class="_ _11"> </span>the<span class="_ _16"> </span>circuit<span class="_ _11"> </span>activity<span class="_ _16"> </span>between<span class="_ _11"> </span>times<span class="_ _16"> </span>240<span class="_ _11"> </span>and<span class="_ _16"> </span>360,<span class="_ _16"> </span>as<span class="_ _11"> </span>instruc-</div><div class="t m5 x1d h26 y3e73 ff7 fs19 fc1 sc0 ls0 ws0">tion<span class="_ _15"> </span><span class="ffd">I1<span class="_ _15"> </span></span>(shown<span class="_ _21"> </span>in<span class="_ _15"> </span>dark<span class="_ _15"> </span>gray)<span class="_ _21"> </span>propagates<span class="_ _15"> </span>through<span class="_ _21"> </span>stage<span class="_ _15"> </span>C,<span class="_ _21"> </span><span class="ffd">I2<span class="_ _15"> </span></span>(shown<span class="_ _15"> </span>in<span class="_ _21"> </span>blue)</div></div><div class="pi" data-data='{"ctm":[2.000000,0.000000,0.000000,2.000000,0.000000,0.000000]}'></div></div>
