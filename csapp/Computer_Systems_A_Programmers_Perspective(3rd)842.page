<div id="pf34a" class="pf w2 h11" data-page-no="34a"><div class="pc pc34a w2 h11"><img class="bi x0 y0 w1 h1" alt="" src="csapp/bg34a.png"/><div class="t m5 x170 h28 y9b ff6 fs1f fc2 sc0 ls0 ws0">Section<span class="_ _10"> </span>9.3<span class="_ _60"> </span>VM<span class="_ _10"> </span>as<span class="_ _10"> </span>a<span class="_ _10"> </span>T<span class="_ _1"></span>ool<span class="_ _10"> </span>for<span class="_ _10"> </span>Caching<span class="_ _3e"> </span><span class="ffe fs1e">841</span></div><div class="t m5 x26 h26 ye7 ff7 fs19 fc2 sc0 ls0 ws0">T<span class="_ _1"></span>he<span class="_ _16"> </span>concept<span class="_ _14"> </span>of<span class="_ _16"> </span>an<span class="_ _16"> </span>address<span class="_ _16"> </span>space<span class="_ _16"> </span>is<span class="_ _16"> </span>important<span class="_ _16"> </span>because<span class="_ _16"> </span>it<span class="_ _14"> </span>makes<span class="_ _16"> </span>a<span class="_ _16"> </span>clean<span class="_ _16"> </span>dis-</div><div class="t m5 x17 h26 y2a7 ff7 fs19 fc2 sc0 ls0 ws0">tinction<span class="_ _16"> </span>between<span class="_ _16"> </span>data<span class="_ _16"> </span>objects<span class="_ _16"> </span>(bytes)<span class="_ _14"> </span>and<span class="_ _16"> </span>their<span class="_ _16"> </span>attributes<span class="_ _16"> </span>(addresses).<span class="_ _16"> </span>Once<span class="_ _14"> </span>we</div><div class="t m5 x17 h26 y2a8 ff7 fs19 fc2 sc0 ls0 ws0">recognize<span class="_ _16"> </span>this<span class="_ _16"> </span>distinction,<span class="_ _16"> </span>then<span class="_ _16"> </span>we<span class="_ _16"> </span>can<span class="_ _16"> </span>generalize<span class="_ _16"> </span>and<span class="_ _16"> </span>allow<span class="_ _16"> </span>each<span class="_ _16"> </span>data<span class="_ _16"> </span>object<span class="_ _16"> </span>to</div><div class="t m5 x17 h26 y2f7 ff7 fs19 fc2 sc0 ls0 ws0">have<span class="_ _13"> </span>multiple<span class="_ _13"> </span>independent<span class="_ _13"> </span>addresses<span class="_ _1"></span>,<span class="_"> </span>each<span class="_ _13"> </span>chosen<span class="_ _13"> </span>from<span class="_ _13"> </span>a<span class="_ _13"> </span>different<span class="_ _13"> </span>address<span class="_ _13"> </span>space<span class="_ _1"></span>.</div><div class="t m5 x17 h26 y2f8 ff7 fs19 fc2 sc0 ls0 ws0">T<span class="_ _1"></span>his<span class="_"> </span>is<span class="_ _11"> </span>the<span class="_"> </span>basic<span class="_"> </span>idea<span class="_"> </span>of<span class="_ _11"> </span>virtual<span class="_"> </span>memory<span class="_ _3"></span>.<span class="_"> </span>Each<span class="_"> </span>byte<span class="_"> </span>of<span class="_ _11"> </span>main<span class="_"> </span>memory<span class="_"> </span>has<span class="_"> </span>a<span class="_"> </span>virtual</div><div class="t m5 x17 h26 y2f9 ff7 fs19 fc2 sc0 ls0 ws0">address<span class="_ _13"> </span>chosen<span class="_ _13"> </span>from<span class="_ _6"> </span>the<span class="_ _13"> </span>virtual<span class="_ _13"> </span>address<span class="_ _13"> </span>space<span class="_ _1"></span>,<span class="_ _13"> </span>and<span class="_ _13"> </span>a<span class="_ _13"> </span>physical<span class="_ _13"> </span>address<span class="_ _13"> </span>chosen<span class="_ _6"> </span>from</div><div class="t m5 x17 h26 y2fa ff7 fs19 fc2 sc0 ls0 ws0">the<span class="_"> </span>physical<span class="_"> </span>address<span class="_"> </span>space<span class="_ _1"></span>.</div><div class="t m5 x17 h47 y6c33 ffe fs2b fc1 sc0 ls0 ws0">Practice<span class="_"> </span>Problem<span class="_"> </span>9.1<span class="_ _1f"> </span><span class="fs16">(solution<span class="_"> </span>page<span class="_"> </span>916)</span></div><div class="t m5 x17 h26 y6c34 ff7 fs19 fc1 sc0 ls0 ws0">Complete<span class="_ _15"> </span>the<span class="_ _15"> </span>following<span class="_ _21"> </span>table<span class="_ _1"></span>,<span class="_ _f"> </span>ﬁlling<span class="_ _15"> </span>in<span class="_ _21"> </span>the<span class="_ _15"> </span>missing<span class="_ _15"> </span>entries<span class="_ _21"> </span>and<span class="_ _15"> </span>replacing<span class="_ _15"> </span>each</div><div class="t m5 x17 h46 y6c35 ff7 fs19 fc1 sc0 ls0 ws0">question<span class="_ _f"> </span>mark<span class="_ _f"> </span>with<span class="_ _f"> </span>the<span class="_ _f"> </span>appropriate<span class="_ _f"> </span>integer.<span class="_ _21"> </span>Use<span class="_ _f"> </span>the<span class="_ _f"> </span>following<span class="_ _f"> </span>units:<span class="_ _f"> </span>K<span class="_"> </span><span class="ff12">=<span class="_ _10"> </span></span>2</div><div class="t m5 x4e h3c y6c36 ff7 fs25 fc1 sc0 ls0 ws0">10</div><div class="t m5 x17 h46 y6c37 ff7 fs19 fc1 sc0 ls0 ws0">(kilo),<span class="_ _11"> </span>M<span class="_"> </span><span class="ff12">=<span class="_ _10"> </span></span>2</div><div class="t m5 x5c h3c y6c38 ff7 fs25 fc1 sc0 ls0 ws0">20</div><div class="t m5 x17e h46 y6c37 ff7 fs19 fc1 sc0 ls0 ws0">(mega),<span class="_ _11"> </span>G<span class="_"> </span><span class="ff12">=<span class="_ _10"> </span></span>2</div><div class="t m5 x76 h3c y6c38 ff7 fs25 fc1 sc0 ls0 ws0">30</div><div class="t m5 xb7 h46 y6c37 ff7 fs19 fc1 sc0 ls0 ws0">(giga),<span class="_ _11"> </span>T<span class="_"> </span><span class="ff12">=<span class="_ _10"> </span></span>2</div><div class="t m5 x24e h3c y6c38 ff7 fs25 fc1 sc0 ls0 ws0">40</div><div class="t m5 x121 h46 y6c39 ff7 fs19 fc1 sc0 ls0 ws0">(tera),<span class="_ _11"> </span>P<span class="_"> </span><span class="ff12">=<span class="_ _10"> </span></span>2</div><div class="t m5 x19a h3c y6c38 ff7 fs25 fc1 sc0 ls0 ws0">50</div><div class="t m5 x3a h46 y6c39 ff7 fs19 fc1 sc0 ls0 ws0">(peta),<span class="_ _11"> </span>or<span class="_ _16"> </span>E<span class="_ _13"> </span><span class="ff12">=<span class="_ _10"> </span></span>2</div><div class="t m5 x4e h3c y6c38 ff7 fs25 fc1 sc0 ls0 ws0">60</div><div class="t m5 x17 h26 y6c3a ff7 fs19 fc1 sc0 ls0 ws0">(exa).</div><div class="t m5 x1a2 h31 y6c3b ff7 fs21 fc2 sc0 ls0 ws0">Number<span class="_"> </span>of<span class="_ _6a"> </span>Number<span class="_"> </span>of</div><div class="t m5 x17 h31 y6c3c ff7 fs21 fc2 sc0 ls0 ws0">virtual<span class="_"> </span>address<span class="_"> </span>bits<span class="_"> </span>(<span class="ff11">n</span>)<span class="_ _26"> </span>virtual<span class="_"> </span>addresses<span class="_"> </span>(<span class="ff11">N<span class="_ _be"></span></span>)<span class="_ _26"> </span>Largest<span class="_"> </span>possible<span class="_"> </span>virtual<span class="_"> </span>address</div><div class="t m5 x1a0 h31 y6c3d ff7 fs21 fc2 sc0 ls0 ws0">4</div><div class="t m5 x27a h31 y6c3e ff7 fs21 fc1 sc0 ls0 ws0">2</div><div class="t m5 xf0 h33 y6c3f ff7 fs20 fc1 sc0 ls0 ws0">?</div><div class="t m5 x183 h32 y6c40 ff12 fs21 fc1 sc0 ls0 ws0">=<span class="_ _13"> </span><span class="ff7">16<span class="_"> </span>K</span></div><div class="t m5 x13c h31 y6c41 ff7 fs21 fc1 sc0 ls0 ws0">2</div><div class="t m5 x1c9 h33 y6c42 ff7 fs20 fc1 sc0 ls0 ws0">24</div><div class="t m5 x42 h32 y6c41 ff12 fs21 fc1 sc0 ls0 ws0">−<span class="_ _13"> </span><span class="ff7">1<span class="_ _6"> </span></span>=<span class="ff7 ls292">?M<span class="_ _2"></span></span>−<span class="_ _13"> </span><span class="ff7">1</span></div><div class="t m5 xb3 h31 y6c43 ff7 fs21 fc1 sc0 ls0 ws0">2</div><div class="t m5 x1f2 h33 y6c44 ff7 fs20 fc1 sc0 ls0 ws0">?</div><div class="t m5 x48 h32 y6c43 ff12 fs21 fc1 sc0 ls0 ws0">=<span class="_ _13"> </span><span class="ff7">64<span class="_"> </span>T</span></div><div class="t m5 x1da h31 y6c45 ff7 fs21 fc1 sc0 ls0 ws0">54</div><div class="t m5 x17 h3b y6c46 fff fs24 fc6 sc0 ls0 ws0">9.3<span class="_ _17"> </span><span class="ffe fs18">VM<span class="_"> </span>as<span class="_"> </span>a<span class="_"> </span>T<span class="_ _1"></span>ool<span class="_"> </span>for<span class="_"> </span>Caching</span></div><div class="t m5 x17 h26 y6c47 ff7 fs19 fc1 sc0 ls0 ws0">Conceptually<span class="_ _3"></span>,<span class="_ _13"> </span>a<span class="_ _13"> </span>virtual<span class="_ _13"> </span>memory<span class="_ _13"> </span>is<span class="_ _13"> </span>organized<span class="_"> </span>as<span class="_ _13"> </span>an<span class="_ _13"> </span>array<span class="_ _13"> </span>of<span class="_ _13"> </span><span class="ff11">N<span class="_ _11"> </span></span>contiguous<span class="_ _13"> </span>byte-size</div><div class="t m5 x17 h26 y6c48 ff7 fs19 fc1 sc0 ls0 ws0">cells<span class="_ _13"> </span>stored<span class="_ _13"> </span>on<span class="_"> </span>disk.<span class="_ _13"> </span>Each<span class="_ _13"> </span>byte<span class="_ _13"> </span>has<span class="_ _13"> </span>a<span class="_"> </span>unique<span class="_ _13"> </span>virtual<span class="_ _13"> </span>address<span class="_ _13"> </span>that<span class="_ _13"> </span>serves<span class="_"> </span>as<span class="_ _13"> </span>an<span class="_ _13"> </span>index</div><div class="t m5 x17 h26 y6c49 ff7 fs19 fc1 sc0 ls0 ws0">into<span class="_"> </span>the<span class="_ _11"> </span>array<span class="_ _3"></span>.<span class="_ _11"> </span>T<span class="_ _1"></span>he<span class="_ _11"> </span>contents<span class="_ _11"> </span>of<span class="_ _11"> </span>the<span class="_ _11"> </span>array<span class="_"> </span>on<span class="_ _11"> </span>disk<span class="_ _11"> </span>are<span class="_ _11"> </span>cached<span class="_ _11"> </span>in<span class="_"> </span>main<span class="_ _11"> </span>memory<span class="_ _3"></span>.<span class="_ _11"> </span>As</div><div class="t m5 x17 h26 y6c4a ff7 fs19 fc1 sc0 ls0 ws0">with<span class="_"> </span>any<span class="_"> </span>other<span class="_ _11"> </span>cache<span class="_"> </span>in<span class="_"> </span>the<span class="_ _11"> </span>memory<span class="_"> </span>hierarchy<span class="_ _3"></span>,<span class="_"> </span>the<span class="_ _11"> </span>data<span class="_"> </span>on<span class="_ _11"> </span>disk<span class="_"> </span>(the<span class="_"> </span>lower<span class="_ _11"> </span>level)</div><div class="t m5 x17 h26 y6c4b ff7 fs19 fc1 sc0 ls0 ws0">is<span class="_ _14"> </span>partitioned<span class="_ _14"> </span>into<span class="_ _14"> </span>blocks<span class="_ _14"> </span>that<span class="_ _15"> </span>serve<span class="_ _14"> </span>as<span class="_ _14"> </span>the<span class="_ _14"> </span>transfer<span class="_ _14"> </span>units<span class="_ _15"> </span>between<span class="_ _14"> </span>the<span class="_ _14"> </span>disk<span class="_ _14"> </span>and</div><div class="t m5 x17 h26 y6c4c ff7 fs19 fc1 sc0 ls0 ws0">the<span class="_ _11"> </span>main<span class="_ _16"> </span>memory<span class="_ _11"> </span>(the<span class="_ _11"> </span>upper<span class="_ _16"> </span>level).<span class="_ _11"> </span>VM<span class="_ _16"> </span>systems<span class="_ _11"> </span>handle<span class="_ _11"> </span>this<span class="_ _16"> </span>by<span class="_ _11"> </span>partitioning<span class="_ _11"> </span>the</div><div class="t m5 x17 h26 y6c4d ff7 fs19 fc1 sc0 ls0 ws0">virtual<span class="_ _13"> </span>memory<span class="_ _13"> </span>into<span class="_ _13"> </span>ﬁxed-size<span class="_ _13"> </span>blocks<span class="_ _13"> </span>called<span class="_ _13"> </span><span class="ffa">virtual<span class="_ _13"> </span>pages<span class="_ _13"> </span>(VPs)<span class="_ _1"></span><span class="ff7">.<span class="_ _13"> </span>Each<span class="_ _13"> </span>virtual<span class="_ _13"> </span>page</span></span></div><div class="t m5 x17 h46 y6c4e ff7 fs19 fc1 sc0 ls0 ws0">is<span class="_ _6"> </span><span class="ff11">P<span class="_"> </span><span class="ff12">=<span class="_ _13"> </span></span></span>2</div><div class="t m5 x19f h50 y6c4f ff11 fs25 fc1 sc0 ls0 ws0">p</div><div class="t m5 x123 h26 y6c50 ff7 fs19 fc1 sc0 ls0 ws0">bytes<span class="_ _6"> </span>in<span class="_ _6"> </span>size.<span class="_ _a"> </span>Similarly<span class="_ _3"></span>,<span class="_ _13"> </span>physical<span class="_ _6"> </span>memory<span class="_ _6"> </span>is<span class="_ _13"> </span>partitioned<span class="_ _a"> </span>into<span class="_ _6"> </span><span class="ffa">physical<span class="_ _13"> </span>pages</span></div><div class="t m5 x17 h26 y6c51 ffa fs19 fc1 sc0 ls0 ws0">(PPs)<span class="_ _3"></span><span class="ff7">,<span class="_"> </span>also<span class="_"> </span><span class="ff11">P<span class="_ _21"> </span></span>bytes<span class="_"> </span>in<span class="_"> </span>size.<span class="_"> </span>(Physical<span class="_"> </span>pages<span class="_"> </span>are<span class="_"> </span>also<span class="_"> </span>referred<span class="_"> </span>to<span class="_"> </span>as<span class="_"> </span><span class="ffa">page<span class="_"> </span>frames</span>.)</span></div><div class="t m5 x26 h26 y6c52 ff7 fs19 fc1 sc0 ls0 ws0">At<span class="_"> </span>any<span class="_"> </span>point<span class="_"> </span>in<span class="_"> </span>time<span class="_ _1"></span>,<span class="_"> </span>the<span class="_"> </span>set<span class="_"> </span>of<span class="_"> </span>virtual<span class="_"> </span>pages<span class="_"> </span>is<span class="_"> </span>partitioned<span class="_"> </span>into<span class="_"> </span>three<span class="_"> </span>disjoint</div><div class="t m5 x17 h26 y6c53 ff7 fs19 fc1 sc0 ls0 ws0">subsets:</div><div class="t m5 x72 h26 y6c54 ffa fs19 fc1 sc0 ls0 ws0">Unallocated<span class="ff7">.<span class="_ _1f"> </span>Pages<span class="_ _16"> </span>that<span class="_ _14"> </span>have<span class="_ _16"> </span>not<span class="_ _14"> </span>yet<span class="_ _16"> </span>been<span class="_ _14"> </span>allocated<span class="_ _16"> </span>(or<span class="_ _14"> </span>created)<span class="_ _16"> </span>by<span class="_ _14"> </span>the<span class="_ _16"> </span>VM</span></div><div class="t m5 x30 h26 y6c55 ff7 fs19 fc1 sc0 ls0 ws0">system.<span class="_ _16"> </span>Unallocated<span class="_ _11"> </span>blocks<span class="_ _16"> </span>do<span class="_ _16"> </span>not<span class="_ _11"> </span>have<span class="_ _16"> </span>any<span class="_ _16"> </span>data<span class="_ _11"> </span>associated<span class="_ _16"> </span>with<span class="_ _16"> </span>them,</div><div class="t m5 x30 h26 y6c56 ff7 fs19 fc1 sc0 ls0 ws0">and<span class="_"> </span>thus<span class="_"> </span>do<span class="_"> </span>not<span class="_"> </span>occupy<span class="_"> </span>any<span class="_"> </span>space<span class="_"> </span>on<span class="_"> </span>disk.</div><div class="t m5 x72 h26 y6c57 ffa fs19 fc1 sc0 ls0 ws0">Cached<span class="ff7">.<span class="_ _1f"> </span>Allocated<span class="_"> </span>pages<span class="_"> </span>that<span class="_"> </span>are<span class="_"> </span>currently<span class="_"> </span>cached<span class="_"> </span>in<span class="_"> </span>physical<span class="_"> </span>memory<span class="_ _3"></span>.</span></div><div class="t m5 x72 h26 y6c58 ffa fs19 fc1 sc0 ls0 ws0">Uncached<span class="ff7">.<span class="_ _1f"> </span>Allocated<span class="_"> </span>pages<span class="_"> </span>that<span class="_"> </span>are<span class="_"> </span>not<span class="_"> </span>cached<span class="_"> </span>in<span class="_"> </span>physical<span class="_"> </span>memory<span class="_ _3"></span>.</span></div><div class="t m5 x26 h26 y6c59 ff7 fs19 fc1 sc0 ls0 ws0">T<span class="_ _1"></span>he<span class="_ _14"> </span>example<span class="_ _14"> </span>in<span class="_ _16"> </span>Figure<span class="_ _16"> </span>9.3<span class="_ _14"> </span>shows<span class="_ _16"> </span>a<span class="_ _14"> </span>small<span class="_ _14"> </span>virtual<span class="_ _14"> </span>memory<span class="_ _16"> </span>with<span class="_ _14"> </span>eight<span class="_ _14"> </span>virtual</div><div class="t m5 x17 h26 y6c5a ff7 fs19 fc1 sc0 ls0 ws0">pages<span class="_ _1"></span>.<span class="_"> </span>V<span class="_ _3"></span>irtual<span class="_"> </span>pages<span class="_ _13"> </span>0<span class="_"> </span>and<span class="_ _13"> </span>3<span class="_"> </span>have<span class="_ _13"> </span>not<span class="_"> </span>been<span class="_ _13"> </span>allocated<span class="_ _13"> </span>yet,<span class="_"> </span>and<span class="_ _13"> </span>thus<span class="_"> </span>do<span class="_ _13"> </span>not<span class="_"> </span>yet<span class="_ _13"> </span>exist</div></div><div class="pi" data-data='{"ctm":[2.000000,0.000000,0.000000,2.000000,0.000000,0.000000]}'></div></div>
