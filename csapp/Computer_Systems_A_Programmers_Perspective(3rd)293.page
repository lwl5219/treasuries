<div id="pf125" class="pf w2 h11" data-page-no="125"><div class="pc pc125 w2 h11"><img class="bi x0 y0 w1 h1" alt="" src="csapp/bg125.png"/><div class="t m5 x14 h28 y9b ffe fs1e fc2 sc0 ls0 ws0">292<span class="_ _1b"> </span><span class="ff6 fs1f">Chapter<span class="_ _10"> </span>3<span class="_ _3d"> </span>Machine-Level<span class="_ _10"> </span>Representation<span class="_ _10"> </span>of<span class="_ _10"> </span>Programs</span></div><div class="t m5 x1d h26 ye7 ff7 fs19 fc2 sc0 ls0 ws0">Let<span class="_ _16"> </span>us<span class="_ _16"> </span>denote<span class="_ _14"> </span>the<span class="_ _16"> </span>starting<span class="_ _14"> </span>location<span class="_ _16"> </span>as<span class="_ _14"> </span><span class="ff11">x</span></div><div class="t m5 x40 h6e y2a5b ffd fs25 fc2 sc0 ls0 ws0">A</div><div class="t m5 x1d9 h26 ye7 ff7 fs19 fc2 sc0 ls0 ws0">.<span class="_ _16"> </span>T<span class="_ _0"></span>he<span class="_ _16"> </span>declaration<span class="_ _16"> </span>has<span class="_ _14"> </span>two<span class="_ _16"> </span>effects<span class="_ _1"></span>.<span class="_ _14"> </span>F<span class="_ _1"></span>irst,</div><div class="t m5 x1d h26 y2a7 ff7 fs19 fc2 sc0 ls0 ws0">it<span class="_"> </span>allocates<span class="_ _11"> </span>a<span class="_ _11"> </span>contiguous<span class="_ _11"> </span>region<span class="_ _11"> </span>of<span class="_ _11"> </span><span class="ff11">L</span></div><div class="t m5 x179 h45 y2a5c ff11 fs19 fc2 sc0 ls0 ws0">.</div><div class="t m5 x13d h26 y2a7 ff11 fs19 fc2 sc0 ls0 ws0">N<span class="_ _15"> </span><span class="ff7">bytes<span class="_ _11"> </span>in<span class="_"> </span>memory<span class="_ _3"></span>,<span class="_ _11"> </span>where<span class="_ _11"> </span><span class="ff11">L<span class="_ _11"> </span></span>is<span class="_ _11"> </span>the<span class="_ _11"> </span>size<span class="_ _11"> </span>(in</span></div><div class="t m5 x1d h26 y2a8 ff7 fs19 fc2 sc0 ls0 ws0">bytes)<span class="_ _14"> </span>of<span class="_ _14"> </span>data<span class="_ _14"> </span>type<span class="_ _14"> </span><span class="ff11">T<span class="_ _13"> </span></span>.<span class="_ _16"> </span>Second,<span class="_ _15"> </span>it<span class="_ _14"> </span>introduces<span class="_ _14"> </span>an<span class="_ _14"> </span>identiﬁer<span class="_ _14"> </span><span class="ffd">A<span class="_ _14"> </span></span>that<span class="_ _14"> </span>can<span class="_ _14"> </span>be<span class="_ _14"> </span>used<span class="_ _14"> </span>as</div><div class="t m5 x1d h26 y2f7 ff7 fs19 fc2 sc0 ls0 ws0">a<span class="_ _11"> </span>pointer<span class="_ _16"> </span>to<span class="_ _16"> </span>the<span class="_ _11"> </span>beginning<span class="_ _16"> </span>of<span class="_ _11"> </span>the<span class="_ _16"> </span>array<span class="_ _3"></span>.<span class="_ _11"> </span>T<span class="_ _0"></span>he<span class="_ _11"> </span>value<span class="_ _16"> </span>of<span class="_ _16"> </span>this<span class="_ _11"> </span>pointer<span class="_ _16"> </span>will<span class="_ _11"> </span>be<span class="_ _16"> </span><span class="ff11">x</span></div><div class="t m5 x1e h6e yfff ffd fs25 fc2 sc0 ls0 ws0">A</div><div class="t m5 x165 h26 yecc ff7 fs19 fc2 sc0 ls172 ws0">.T<span class="_ _42"></span>h<span class="_ _49"></span>e</div><div class="t m5 x1d h46 y1000 ff7 fs19 fc2 sc0 ls0 ws0">array<span class="_ _6"> </span>elements<span class="_ _13"> </span>can<span class="_ _6"> </span>be<span class="_ _6"> </span>accessed<span class="_ _13"> </span>using<span class="_ _6"> </span>an<span class="_ _6"> </span>integer<span class="_ _13"> </span>index<span class="_ _6"> </span>ranging<span class="_ _6"> </span>between<span class="_ _13"> </span>0<span class="_ _6"> </span>and<span class="_ _13"> </span><span class="ff11">N<span class="_ _5"></span><span class="ff12">−</span></span><span class="ls25">1.</span></div><div class="t m5 x1d h26 y2a5d ff7 fs19 fc2 sc0 ls0 ws0">Array<span class="_"> </span>element<span class="_"> </span><span class="ff11">i<span class="_"> </span></span>will<span class="_"> </span>be<span class="_"> </span>stored<span class="_"> </span>at<span class="_"> </span>address<span class="_"> </span><span class="ff11">x</span></div><div class="t m5 x36 h6e y2a5e ffd fs25 fc2 sc0 ls0 ws0">A</div><div class="t m5 xc0 h46 yece ff12 fs19 fc2 sc0 ls0 ws0">+<span class="_ _13"> </span><span class="ff11">L</span></div><div class="t m5 x1aa h45 y2a5f ff11 fs19 fc2 sc0 ls0 ws0">.</div><div class="t m5 x6c h26 yece ff11 fs19 fc2 sc0 ls0 ws0">i<span class="_ _2"></span><span class="ff7">.</span></div><div class="t m5 x29 h26 y19c2 ff7 fs19 fc2 sc0 ls0 ws0">As<span class="_"> </span>examples<span class="_ _1"></span>,<span class="_"> </span>consider<span class="_"> </span>the<span class="_"> </span>following<span class="_"> </span>declarations:</div><div class="t m5 x1d h2d y2a60 ffd fs1e fc2 sc0 ls0 ws0">char<span class="_ _46"> </span>A[12];</div><div class="t m5 x1d h2d y2a61 ffd fs1e fc2 sc0 ls0 ws0">char<span class="_ _3f"> </span>*B[8];</div><div class="t m5 x1d h2d y2a62 ffd fs1e fc2 sc0 ls0 ws0">int<span class="_ _8c"> </span>C[6];</div><div class="t m5 x1d h2d y2a63 ffd fs1e fc2 sc0 ls0 ws0">double<span class="_ _e"> </span>*D[5];</div><div class="t m5 x1d h26 y2a64 ff7 fs19 fc2 sc0 ls0 ws0">T<span class="_ _1"></span>hese<span class="_"> </span>declarations<span class="_"> </span>will<span class="_"> </span>generate<span class="_"> </span>arrays<span class="_"> </span>with<span class="_"> </span>the<span class="_"> </span>following<span class="_"> </span>parameters:</div><div class="t m5 x1d h31 y2a65 ff7 fs21 fc2 sc0 ls0 ws0">Array<span class="_ _26"> </span>Element<span class="_"> </span>size<span class="_ _26"> </span>T<span class="_ _3"></span>otal<span class="_"> </span>size<span class="_ _26"> </span>Start<span class="_"> </span>address<span class="_ _26"> </span>Element<span class="_"> </span><span class="ff11">i</span></div><div class="t m5 x75 h31 y2a66 ffd fs1e fc2 sc0 ls0 ws0">A<span class="_ _65"> </span><span class="ff7 fs21 ls173">11<span class="_ _16b"></span>2<span class="_ _8"></span><span class="ff11 ls0">x</span></span></div><div class="t m5 x1bb h6d y2a67 ffd fs2c fc2 sc0 ls0 ws0">A</div><div class="t m5 xb6 h55 y2a66 ff11 fs21 fc2 sc0 ls0 ws0">x</div><div class="t m5 x16a h6d y2a67 ffd fs2c fc2 sc0 ls0 ws0">A</div><div class="t m5 x8b h32 y2a66 ff12 fs21 fc2 sc0 ls0 ws0">+<span class="_ _13"> </span><span class="ff11">i</span></div><div class="t m5 x75 h31 y2a68 ffd fs1e fc2 sc0 ls0 ws0">B<span class="_ _65"> </span><span class="ff7 fs21 ls173">86<span class="_ _16b"></span>4<span class="_ _8"></span><span class="ff11 ls0">x</span></span></div><div class="t m5 x1bb h6d y2a69 ffd fs2c fc2 sc0 ls0 ws0">B</div><div class="t m5 x196 h55 y2a68 ff11 fs21 fc2 sc0 ls0 ws0">x</div><div class="t m5 x1fd h6d y2a69 ffd fs2c fc2 sc0 ls0 ws0">B</div><div class="t m5 x1bd h32 y2a68 ff12 fs21 fc2 sc0 ls0 ws0">+<span class="_ _13"> </span><span class="ff7">8<span class="ff11">i</span></span></div><div class="t m5 x75 h31 y2a6a ffd fs1e fc2 sc0 ls0 ws0">C<span class="_ _65"> </span><span class="ff7 fs21 ls173">42<span class="_ _16b"></span>4<span class="_ _8"></span><span class="ff11 ls0">x</span></span></div><div class="t m5 x1bb h6d y2a6b ffd fs2c fc2 sc0 ls0 ws0">C</div><div class="t m5 x196 h55 y2a6a ff11 fs21 fc2 sc0 ls0 ws0">x</div><div class="t m5 x1fd h6d y2a6b ffd fs2c fc2 sc0 ls0 ws0">C</div><div class="t m5 x1bd h32 y2a6a ff12 fs21 fc2 sc0 ls0 ws0">+<span class="_ _13"> </span><span class="ff7">4<span class="ff11">i</span></span></div><div class="t m5 x75 h31 y26b4 ffd fs1e fc2 sc0 ls0 ws0">D<span class="_ _65"> </span><span class="ff7 fs21 ls173">84<span class="_ _16b"></span>0<span class="_ _8"></span><span class="ff11 ls0">x</span></span></div><div class="t m5 x1bb h6d y2a6c ffd fs2c fc2 sc0 ls0 ws0">D</div><div class="t m5 x196 h55 y26b4 ff11 fs21 fc2 sc0 ls0 ws0">x</div><div class="t m5 x1fd h6d y2a6c ffd fs2c fc2 sc0 ls0 ws0">D</div><div class="t m5 x1bd h32 y26b4 ff12 fs21 fc2 sc0 ls0 ws0">+<span class="_ _13"> </span><span class="ff7">8<span class="ff11">i</span></span></div><div class="t m5 x1d h26 y2a6d ff7 fs19 fc2 sc0 ls0 ws0">Array<span class="_"> </span><span class="ffd">A<span class="_ _10"> </span></span>consists<span class="_"> </span>of<span class="_"> </span>12<span class="_"> </span>single-byte<span class="_"> </span>(<span class="ffd">char</span>)<span class="_"> </span>elements<span class="_ _1"></span>.<span class="_"> </span>Array<span class="_"> </span><span class="ffd">C<span class="_ _10"> </span></span>consists<span class="_"> </span>of<span class="_"> </span>6<span class="_"> </span>integers<span class="_ _1"></span>,</div><div class="t m5 x1d h26 y2a6e ff7 fs19 fc2 sc0 ls0 ws0">each<span class="_ _16"> </span>requiring<span class="_ _11"> </span>4<span class="_ _16"> </span>bytes<span class="_ _1"></span>.<span class="_ _16"> </span><span class="ffd">B<span class="_ _16"> </span></span>and<span class="_ _16"> </span><span class="ffd">D<span class="_ _16"> </span></span>are<span class="_ _11"> </span>both<span class="_ _16"> </span>arrays<span class="_ _16"> </span>of<span class="_ _16"> </span>pointers<span class="_ _1"></span>,<span class="_ _16"> </span>and<span class="_ _16"> </span>hence<span class="_ _16"> </span>the<span class="_ _16"> </span>array</div><div class="t m5 x1d h26 y2a6f ff7 fs19 fc2 sc0 ls0 ws0">elements<span class="_"> </span>are<span class="_"> </span>8<span class="_"> </span>bytes<span class="_"> </span>each.</div><div class="t m5 x29 h26 y2a70 ff7 fs19 fc2 sc0 ls0 ws0">T<span class="_ _1"></span>he<span class="_"> </span>memory<span class="_ _13"> </span>referencing<span class="_ _13"> </span>instructions<span class="_"> </span>of<span class="_ _13"> </span>x86-64<span class="_ _13"> </span>are<span class="_ _13"> </span>designed<span class="_"> </span>to<span class="_ _13"> </span>simplify<span class="_ _13"> </span>array</div><div class="t m5 x1d h26 y2a71 ff7 fs19 fc2 sc0 ls0 ws0">access<span class="_ _1"></span>.<span class="_ _16"> </span>F<span class="_ _3"></span>or<span class="_ _16"> </span>example,<span class="_ _11"> </span>suppose<span class="_ _16"> </span><span class="ffd">E<span class="_ _16"> </span></span>is<span class="_ _16"> </span>an<span class="_ _11"> </span>array<span class="_ _16"> </span>of<span class="_ _16"> </span>values<span class="_ _16"> </span>of<span class="_ _11"> </span>type<span class="_ _16"> </span><span class="ffd">int<span class="_ _16"> </span></span>and<span class="_ _16"> </span>we<span class="_ _11"> </span>wish<span class="_ _16"> </span>to</div><div class="t m5 x1d h26 y2a72 ff7 fs19 fc2 sc0 ls0 ws0">evaluate<span class="_"> </span><span class="ffd">E[i]</span>,<span class="_ _11"> </span>where<span class="_"> </span>the<span class="_ _11"> </span>address<span class="_"> </span>of<span class="_ _11"> </span><span class="ffd">E<span class="_ _11"> </span></span>is<span class="_"> </span>stored<span class="_"> </span>in<span class="_ _11"> </span>register<span class="_ _11"> </span><span class="ffd">%rdx<span class="_ _10"> </span></span>and<span class="_ _11"> </span><span class="ff11">i<span class="_"> </span></span>is<span class="_"> </span>stored<span class="_ _11"> </span>in</div><div class="t m5 x1d h26 y2a73 ff7 fs19 fc2 sc0 ls0 ws0">register<span class="_"> </span><span class="ffd">%rcx</span>.<span class="_"> </span>T<span class="_ _1"></span>hen<span class="_"> </span>the<span class="_"> </span>instruction</div><div class="t m5 x1d h2d y2a74 ffd fs1e fc2 sc0 ls0 ws0">movl<span class="_ _e"> </span>(%rdx,%rcx,4),%eax</div><div class="t m5 x1d h26 y2a75 ff7 fs19 fc2 sc0 ls0 ws0">will<span class="_ _14"> </span>perform<span class="_ _14"> </span>the<span class="_ _14"> </span>address<span class="_ _15"> </span>computation<span class="_ _14"> </span><span class="ff11">x</span></div><div class="t m5 x5e h6e y2a76 ffd fs25 fc2 sc0 ls0 ws0">E</div><div class="t m5 xf4 h46 y2a75 ff12 fs19 fc2 sc0 ls0 ws0">+<span class="_ _10"> </span><span class="ff7">4<span class="ff11">i<span class="_ _2"></span></span>,<span class="_ _15"> </span>read<span class="_ _14"> </span>that<span class="_ _15"> </span>memory<span class="_ _14"> </span>location,<span class="_ _15"> </span>and</span></div><div class="t m5 x1d h26 y2a77 ff7 fs19 fc2 sc0 ls0 ws0">copy<span class="_"> </span>the<span class="_ _13"> </span>result<span class="_"> </span>to<span class="_"> </span>register<span class="_"> </span><span class="ffd">%eax</span>.<span class="_ _13"> </span>The<span class="_ _13"> </span>allowed<span class="_"> </span>scaling<span class="_"> </span>factors<span class="_ _13"> </span>of<span class="_"> </span>1,<span class="_"> </span>2,<span class="_"> </span>4,<span class="_"> </span>and<span class="_ _13"> </span>8<span class="_"> </span>cover</div><div class="t m5 x1d h26 y2a78 ff7 fs19 fc2 sc0 ls0 ws0">the<span class="_"> </span>sizes<span class="_"> </span>of<span class="_"> </span>the<span class="_"> </span>common<span class="_"> </span>primitive<span class="_"> </span>data<span class="_"> </span>types<span class="_ _1"></span>.</div><div class="t m5 x1d h47 y2a79 ffe fs2b fc1 sc0 ls0 ws0">Practice<span class="_"> </span>Problem<span class="_"> </span>3.36<span class="_ _1f"> </span><span class="fs16">(solution<span class="_"> </span>page<span class="_"> </span>377)</span></div><div class="t m5 x1d h26 y2a7a ff7 fs19 fc1 sc0 ls0 ws0">Consider<span class="_"> </span>the<span class="_"> </span>following<span class="_"> </span>declarations:</div><div class="t m5 x1d h2d y2a7b ffd fs1e fc2 sc0 ls0 ws0">int<span class="_ _46"> </span>P[5];</div><div class="t m5 x1d h2d y2a7c ffd fs1e fc2 sc0 ls0 ws0">short<span class="_ _1a"> </span>Q[2];</div><div class="t m5 x1d h2d y2a7d ffd fs1e fc2 sc0 ls0 ws0">int<span class="_ _46"> </span>**R[9];</div><div class="t m5 x1d h2d y2a7e ffd fs1e fc2 sc0 ls0 ws0">double<span class="_ _e"> </span>*S[10];</div><div class="t m5 x1d h2d y2a7f ffd fs1e fc2 sc0 ls0 ws0">short<span class="_ _1a"> </span>*T[2];</div><div class="t m5 x29 h26 y6e1 ff7 fs19 fc2 sc0 ls0 ws0">F<span class="_ _1"></span>ill<span class="_ _16"> </span>in<span class="_ _11"> </span>the<span class="_ _11"> </span>following<span class="_ _16"> </span>table<span class="_ _11"> </span>describing<span class="_ _11"> </span>the<span class="_ _16"> </span>element<span class="_ _11"> </span>size<span class="_ _0"></span>,<span class="_ _11"> </span>the<span class="_ _16"> </span>total<span class="_ _11"> </span>size<span class="_ _0"></span>,<span class="_ _11"> </span>and<span class="_ _16"> </span>the</div><div class="t m5 x1d h26 y6e2 ff7 fs19 fc2 sc0 ls0 ws0">address<span class="_"> </span>of<span class="_"> </span>element<span class="_"> </span><span class="ff11">i<span class="_"> </span></span>for<span class="_"> </span>each<span class="_"> </span>of<span class="_"> </span>these<span class="_"> </span>arrays<span class="_ _3"></span>.</div></div><div class="pi" data-data='{"ctm":[2.000000,0.000000,0.000000,2.000000,0.000000,0.000000]}'></div></div>
