<div id="pf308" class="pf w2 h11" data-page-no="308"><div class="pc pc308 w2 h11"><img class="bi x0 y0 w1 h1" alt="" src="csapp/bg308.png"/><div class="t m5 x100 h28 y9b ff6 fs1f fc2 sc0 ls0 ws0">Section<span class="_ _10"> </span>8.4<span class="_ _60"> </span>Process<span class="_ _10"> </span>Control<span class="_ _3e"> </span><span class="ffe fs1e">775</span></div><div class="t m5 x17 h41 y9c ffe fs29 fc2 sc0 ls0 ws0">8.4.1<span class="_ _48"> </span><span class="fs19">Obtaining<span class="_"> </span>Process<span class="_"> </span>IDs</span></div><div class="t m5 x17 h26 y327 ff7 fs19 fc2 sc0 ls0 ws0">Each<span class="_ _21"> </span>process<span class="_ _f"> </span>has<span class="_ _f"> </span>a<span class="_ _f"> </span>unique<span class="_ _21"> </span>positive<span class="_ _f"> </span>(nonzero)<span class="_ _f"> </span><span class="ffa">process<span class="_ _f"> </span>ID<span class="_ _21"> </span>(PID)<span class="_ _1"></span><span class="ff7 ls27f">.T<span class="_ _8a"></span>h<span class="_ _8a"></span>e<span class="ffd ls0">getpid</span></span></span></div><div class="t m5 x17 h26 y328 ff7 fs19 fc2 sc0 ls0 ws0">function<span class="_"> </span>returns<span class="_"> </span>the<span class="_ _13"> </span>PID<span class="_"> </span>of<span class="_"> </span>the<span class="_"> </span>calling<span class="_ _13"> </span>process<span class="_ _1"></span>.<span class="_"> </span>T<span class="_ _1"></span>he<span class="_"> </span><span class="ffd">getppid<span class="_ _10"> </span></span>function<span class="_"> </span>returns<span class="_"> </span>the</div><div class="t m5 x17 h26 y329 ff7 fs19 fc2 sc0 ls0 ws0">PID<span class="_"> </span>of<span class="_"> </span>its<span class="_"> </span><span class="ffa">parent<span class="_ _11"> </span></span>(i.e.,<span class="_"> </span>the<span class="_"> </span>process<span class="_"> </span>that<span class="_"> </span>created<span class="_"> </span>the<span class="_"> </span>calling<span class="_"> </span>process).</div><div class="t m5 x31 h2d y65b3 ffd fs1e fc2 sc0 ls0 ws0">#include<span class="_ _e"> </span>&lt;sys/types.h&gt;</div><div class="t m5 x31 h2d y65b4 ffd fs1e fc2 sc0 ls0 ws0">#include<span class="_ _e"> </span>&lt;unistd.h&gt;</div><div class="t m5 x31 h2d y65b5 ffd fs1e fc2 sc0 ls0 ws0">pid_t<span class="_ _e"> </span>getpid(void);</div><div class="t m5 x31 h2d y65b6 ffd fs1e fc2 sc0 ls0 ws0">pid_t<span class="_ _e"> </span>getppid(void);</div><div class="t m5 x13b hf1 y65b7 ff7 fs1f fc2 sc0 ls0 ws0">Returns:<span class="_"> </span>PID<span class="_"> </span>of<span class="_"> </span>either<span class="_"> </span>the<span class="_"> </span>caller<span class="_"> </span>or<span class="_"> </span>the<span class="_"> </span>parent</div><div class="t m5 x17 h26 y65b8 ff7 fs19 fc2 sc0 lsd ws0">Th<span class="_ _2"></span>e<span class="_ _10"> </span><span class="ffd ls0">getpid<span class="_ _13"> </span><span class="ff7">and<span class="_ _13"> </span></span>getppid<span class="_ _13"> </span><span class="ff7">routines<span class="_ _13"> </span>return<span class="_ _13"> </span>an<span class="_ _13"> </span>integer<span class="_ _13"> </span>value<span class="_ _13"> </span>of<span class="_ _13"> </span>type<span class="_ _13"> </span></span>pid_t<span class="ff7">,<span class="_"> </span>which<span class="_ _13"> </span>on</span></span></div><div class="t m5 x17 h26 y65b9 ff7 fs19 fc2 sc0 ls0 ws0">Linux<span class="_"> </span>systems<span class="_"> </span>is<span class="_"> </span>deﬁned<span class="_"> </span>in<span class="_"> </span><span class="ffd">types.h<span class="_ _10"> </span></span>as<span class="_"> </span>an<span class="_"> </span><span class="ffd">int</span>.</div><div class="t m5 x17 h41 y65ba ffe fs29 fc2 sc0 ls0 ws0">8.4.2<span class="_ _48"> </span><span class="fs19">Creating<span class="_"> </span>and<span class="_"> </span>T<span class="_ _3"></span>erminating<span class="_"> </span>Processes</span></div><div class="t m5 x17 h26 y65bb ff7 fs19 fc2 sc0 ls0 ws0">F<span class="_ _1"></span>rom<span class="_ _16"> </span>a<span class="_ _14"> </span>programmer’s<span class="_ _11"> </span>perspective,<span class="_ _16"> </span>we<span class="_ _16"> </span>can<span class="_ _16"> </span>think<span class="_ _16"> </span>of<span class="_ _16"> </span>a<span class="_ _16"> </span>process<span class="_ _16"> </span>as<span class="_ _16"> </span>being<span class="_ _14"> </span>in<span class="_ _16"> </span>one<span class="_ _16"> </span>of</div><div class="t m5 x17 h26 y65bc ff7 fs19 fc2 sc0 ls0 ws0">three<span class="_"> </span>states:</div><div class="t m5 x72 h26 y65bd ffa fs19 fc2 sc0 ls0 ws0">Running.<span class="_ _15"> </span><span class="ff7">The<span class="_ _13"> </span>process<span class="_ _13"> </span>is<span class="_ _13"> </span>either<span class="_ _13"> </span>executing<span class="_"> </span>on<span class="_ _13"> </span>the<span class="_ _13"> </span>CPU<span class="_ _13"> </span>or<span class="_ _13"> </span>waiting<span class="_"> </span>to<span class="_ _13"> </span>be<span class="_ _13"> </span>executed</span></div><div class="t m5 x30 h26 y65be ff7 fs19 fc2 sc0 ls0 ws0">and<span class="_"> </span>will<span class="_"> </span>eventually<span class="_"> </span>be<span class="_"> </span>scheduled<span class="_"> </span>by<span class="_"> </span>the<span class="_"> </span>kernel.</div><div class="t m5 x72 h26 y65bf ffa fs19 fc2 sc0 ls0 ws0">Stopped.<span class="_ _21"> </span><span class="ff7">T<span class="_ _0"></span>he<span class="_"> </span>execution<span class="_"> </span>of<span class="_"> </span>the<span class="_ _11"> </span>process<span class="_"> </span>is<span class="_"> </span><span class="ffa">suspended<span class="_ _16"> </span></span>and<span class="_"> </span>will<span class="_"> </span>not<span class="_"> </span>be<span class="_"> </span>scheduled.</span></div><div class="t m5 x30 h26 y65c0 ff7 fs19 fc2 sc0 ls0 ws0">A<span class="_ _13"> </span>process<span class="_"> </span>stops<span class="_ _13"> </span>as<span class="_ _13"> </span>a<span class="_"> </span>result<span class="_ _13"> </span>of<span class="_ _13"> </span>receiving<span class="_"> </span>a<span class="_ _13"> </span>SIGST<span class="_ _0"></span>OP<span class="_ _4"></span>,<span class="_"> </span>SIGTSTP<span class="_ _8"></span>,<span class="_"> </span>SIGTTIN<span class="_ _3"></span>,</div><div class="t m5 x30 h26 y65c1 ff7 fs19 fc2 sc0 ls0 ws0">or<span class="_ _13"> </span>SIGTTOU<span class="_ _13"> </span>signal,<span class="_ _13"> </span>and<span class="_ _13"> </span>it<span class="_ _13"> </span>remains<span class="_ _13"> </span>stopped<span class="_ _13"> </span>until<span class="_ _13"> </span>it<span class="_ _13"> </span>receives<span class="_ _13"> </span>a<span class="_ _13"> </span>SIGCONT</div><div class="t m5 x30 h26 y65c2 ff7 fs19 fc2 sc0 ls0 ws0">signal,<span class="_ _14"> </span>at<span class="_ _14"> </span>which<span class="_ _14"> </span>point<span class="_ _14"> </span>it<span class="_ _14"> </span>becomes<span class="_ _14"> </span>running<span class="_ _14"> </span>again.<span class="_ _14"> </span>(A<span class="_ _14"> </span><span class="ffa">signal<span class="_ _15"> </span></span>is<span class="_ _14"> </span>a<span class="_ _14"> </span>form<span class="_ _14"> </span>of</div><div class="t m5 x30 h26 y65c3 ff7 fs19 fc2 sc0 ls0 ws0">software<span class="_"> </span>interrupt<span class="_"> </span>that<span class="_"> </span>we<span class="_"> </span>will<span class="_"> </span>describe<span class="_"> </span>in<span class="_"> </span>detail<span class="_"> </span>in<span class="_"> </span>Section<span class="_"> </span>8.5.)</div><div class="t m5 x72 h26 y65c4 ffa fs19 fc2 sc0 ls0 ws0">T<span class="_ _3"></span>erminated.<span class="_ _21"> </span><span class="ff7">T<span class="_ _1"></span>he<span class="_ _21"> </span>process<span class="_ _15"> </span>is<span class="_ _21"> </span>stopped<span class="_ _15"> </span>permanently<span class="_ _3"></span>.<span class="_ _21"> </span>A<span class="_ _15"> </span>process<span class="_ _21"> </span>becomes<span class="_ _15"> </span>termi-</span></div><div class="t m5 x30 h26 y65c5 ff7 fs19 fc2 sc0 ls0 ws0">nated<span class="_ _13"> </span>for<span class="_ _13"> </span>one<span class="_ _13"> </span>of<span class="_"> </span>three<span class="_ _13"> </span>reasons:<span class="_ _13"> </span>(1)<span class="_ _13"> </span>receiving<span class="_ _13"> </span>a<span class="_ _13"> </span>signal<span class="_"> </span>whose<span class="_ _13"> </span>default<span class="_ _13"> </span>action</div><div class="t m5 x30 h26 y65c6 ff7 fs19 fc2 sc0 ls0 ws0">is<span class="_ _16"> </span>to<span class="_ _14"> </span>terminate<span class="_ _16"> </span>the<span class="_ _14"> </span>process<span class="_ _1"></span>,<span class="_ _14"> </span>(2)<span class="_ _14"> </span>returning<span class="_ _16"> </span>from<span class="_ _14"> </span>the<span class="_ _16"> </span>main<span class="_ _14"> </span>routine<span class="_ _1"></span>,<span class="_ _15"> </span>or<span class="_ _16"> </span>(3)</div><div class="t m5 x30 h26 y65c7 ff7 fs19 fc2 sc0 ls0 ws0">calling<span class="_"> </span>the<span class="_"> </span><span class="ffd">exit<span class="_ _10"> </span></span>function.</div><div class="t m5 x31 h2d y65c8 ffd fs1e fc2 sc0 ls0 ws0">#include<span class="_ _e"> </span>&lt;stdlib.h&gt;</div><div class="t m5 x31 h2d y65c9 ffd fs1e fc2 sc0 ls0 ws0">void<span class="_ _e"> </span>exit(int<span class="_ _1f"> </span>status);</div><div class="t m5 x24 hf1 y65ca ff7 fs1f fc2 sc0 ls0 ws0">T<span class="_ _1"></span>his<span class="_ _10"> </span>function<span class="_"> </span>does<span class="_"> </span>not<span class="_"> </span>return</div><div class="t m5 x17 h26 y7a6 ff7 fs19 fc2 sc0 lsd ws0">Th<span class="_ _2"></span>e<span class="_ _10"> </span><span class="ffd ls0">exit<span class="_ _13"> </span><span class="ff7">function<span class="_ _13"> </span>terminates<span class="_ _13"> </span>the<span class="_ _13"> </span>process<span class="_ _13"> </span>with<span class="_ _13"> </span>an<span class="_"> </span><span class="ffa">exit<span class="_ _13"> </span>status<span class="_ _13"> </span></span>of<span class="_ _13"> </span></span>status<span class="ff7">.<span class="_ _13"> </span>(T<span class="_ _1"></span>he<span class="_ _13"> </span>other</span></span></div><div class="t m5 x17 h26 y7a7 ff7 fs19 fc2 sc0 ls0 ws0">way<span class="_"> </span>to<span class="_"> </span>set<span class="_"> </span>the<span class="_"> </span>exit<span class="_"> </span>status<span class="_"> </span>is<span class="_"> </span>to<span class="_"> </span>return<span class="_"> </span>an<span class="_"> </span>integer<span class="_"> </span>value<span class="_"> </span>from<span class="_"> </span>the<span class="_"> </span>main<span class="_"> </span>routine<span class="_ _1"></span>.)</div></div><div class="pi" data-data='{"ctm":[2.000000,0.000000,0.000000,2.000000,0.000000,0.000000]}'></div></div>
