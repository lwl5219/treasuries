<div id="pf17e" class="pf w2 h11" data-page-no="17e"><div class="pc pc17e w2 h11"><img class="bi x0 y0 w1 h1" alt="" src="csapp/bg17e.png"/><div class="t m5 x107 h28 y9b ff6 fs1f fc2 sc0 ls0 ws0">Solutions<span class="_ _10"> </span>to<span class="_ _10"> </span>Practice<span class="_ _10"> </span>Problems<span class="_ _1b"> </span><span class="ffe fs1e">381</span></div><div class="t m5 x17 h28 y140c ffe fs1e fc6 sc0 ls0 ws0">Solution<span class="_"> </span>to<span class="_"> </span>Problem<span class="_"> </span>3.44</div><div class="t m5 x112 h2f ye7 ffe fs16 fc6 sc0 ls0 ws0">(page<span class="_"> </span>311)</div><div class="t m5 x17 h26 y1d16 ff7 fs19 fc1 sc0 ls0 ws0">Understanding<span class="_"> </span>structure<span class="_"> </span>layout<span class="_ _11"> </span>and<span class="_"> </span>alignment<span class="_ _11"> </span>is<span class="_"> </span>very<span class="_"> </span>important<span class="_ _11"> </span>for<span class="_"> </span>understand-</div><div class="t m5 x17 h26 y1d17 ff7 fs19 fc1 sc0 ls0 ws0">ing<span class="_ _13"> </span>how<span class="_"> </span>much<span class="_ _13"> </span>storage<span class="_"> </span>different<span class="_ _13"> </span>data<span class="_"> </span>structures<span class="_ _13"> </span>require<span class="_"> </span>and<span class="_ _13"> </span>for<span class="_"> </span>understanding<span class="_ _13"> </span>the</div><div class="t m5 x17 h26 y1d18 ff7 fs19 fc1 sc0 ls0 ws0">code<span class="_ _14"> </span>generated<span class="_ _16"> </span>by<span class="_ _14"> </span>the<span class="_ _14"> </span>compiler<span class="_ _14"> </span>for<span class="_ _14"> </span>accessing<span class="_ _14"> </span>structures<span class="_ _1"></span>.<span class="_ _14"> </span>T<span class="_ _1"></span>his<span class="_ _14"> </span>problem<span class="_ _14"> </span>lets<span class="_ _14"> </span>you</div><div class="t m5 x17 h26 y1d88 ff7 fs19 fc1 sc0 ls0 ws0">work<span class="_"> </span>out<span class="_"> </span>the<span class="_"> </span>details<span class="_"> </span>of<span class="_"> </span>some<span class="_"> </span>example<span class="_"> </span>structures<span class="_ _1"></span>.</div><div class="t m5 x34 h26 y1d1a ff7 fs19 fc1 sc0 ls0 ws0">A.<span class="_ _1f"> </span><span class="ffd">struct<span class="_ _11"> </span>P1<span class="_ _16"> </span>{<span class="_ _16"> </span>short<span class="_ _11"> </span>i;<span class="_ _16"> </span>int<span class="_ _11"> </span>c;<span class="_ _16"> </span>int<span class="_ _16"> </span>*j;<span class="_ _11"> </span>short<span class="_ _16"> </span>*d;<span class="_ _16"> </span>};</span></div><div class="t m5 x2d h2d y358a ffd fs1e fc2 sc0 ls17c ws0">icj<span class="_ _13"> </span>d</div><div class="t m5 x20 h31 y358b ff7 fs21 fc2 sc0 ls0 ws0">T<span class="_ _3"></span>otal<span class="_ _26"> </span>Alignment</div><div class="t m5 x2d h31 y358c ff7 fs21 fc2 sc0 ls0 ws0">0<span class="_ _5e"> </span>2<span class="_ _5e"> </span>6<span class="_ _5e"> </span>14<span class="_ _93"> </span>16<span class="_ _77"> </span>8</div><div class="t m5 x34 h26 y358d ff7 fs19 fc2 sc0 ls2a ws0">B.<span class="_ _66"> </span><span class="ffd ls0">struct<span class="_ _11"> </span>P2<span class="_ _16"> </span>{<span class="_ _16"> </span>int<span class="_ _11"> </span>i[2];<span class="_ _16"> </span>char<span class="_ _16"> </span>c[8];<span class="_ _11"> </span>short<span class="_ _16"> </span>[4];<span class="_ _11"> </span>long<span class="_ _16"> </span>*j;<span class="_ _16"> </span>};</span></div><div class="t m5 x2d h2d y358e ffd fs1e fc2 sc0 ls17c ws0">ic<span class="_ _13"> </span>d<span class="_ _f"> </span>j</div><div class="t m5 x15c h31 y358f ff7 fs21 fc2 sc0 ls0 ws0">T<span class="_ _3"></span>otal<span class="_ _26"> </span>Alignment</div><div class="t m5 x2d h31 y3590 ff7 fs21 fc2 sc0 ls0 ws0">0<span class="_ _5e"> </span>8<span class="_ _5e"> </span>16<span class="_ _26"> </span>24<span class="_ _93"> </span>32<span class="_ _77"> </span>8</div><div class="t m5 x34 h26 y3591 ff7 fs19 fc2 sc0 ls22 ws0">C.<span class="_ _24"> </span><span class="ffd ls0">struct<span class="_ _16"> </span>P3<span class="_ _11"> </span>{<span class="_ _16"> </span>long<span class="_ _11"> </span>w[2];<span class="_ _16"> </span>int<span class="_ _16"> </span>*c[2]<span class="_ _11"> </span>};</span></div><div class="t m5 x2d h31 y3592 ffd fs1e fc2 sc0 ls1a4 ws0">wc<span class="ff7 fs21 ls0">T<span class="_ _3"></span>otal<span class="_ _26"> </span>Alignment</span></div><div class="t m5 x2d h31 y3593 ff7 fs21 fc2 sc0 ls36 ws0">01<span class="_ _199"></span>6<span class="_ _22"> </span>3<span class="_ _199"></span>2<span class="_ _58"> </span>8</div><div class="t m5 x34 h26 y3594 ff7 fs19 fc2 sc0 ls2a ws0">D.<span class="_ _24"> </span><span class="ffd ls0">struct<span class="_ _11"> </span>P4<span class="_ _16"> </span>{<span class="_ _16"> </span>char<span class="_ _11"> </span>w[16];<span class="_ _16"> </span>char<span class="_ _11"> </span>*c[2]<span class="_ _16"> </span>};</span></div><div class="t m5 x2d h31 y3595 ffd fs1e fc2 sc0 ls1a4 ws0">wc<span class="ff7 fs21 ls0">T<span class="_ _3"></span>otal<span class="_ _26"> </span>Alignment</span></div><div class="t m5 x2d h31 y3596 ff7 fs21 fc2 sc0 ls36 ws0">01<span class="_ _199"></span>6<span class="_ _22"> </span>3<span class="_ _199"></span>2<span class="_ _58"> </span>8</div><div class="t m5 x34 h26 y3597 ff7 fs19 fc2 sc0 ls0 ws0">E.<span class="_ _25"> </span><span class="ffd">struct<span class="_ _11"> </span>P5<span class="_ _16"> </span>{<span class="_ _16"> </span>struct<span class="_ _11"> </span>P4<span class="_ _16"> </span>a[2];<span class="_ _11"> </span>struct<span class="_ _16"> </span>P1<span class="_ _16"> </span>t<span class="_ _11"> </span>};</span></div><div class="t m5 x2d h31 y3598 ffd fs1e fc2 sc0 ls1a4 ws0">at<span class="ff7 fs21 ls0">T<span class="_ _3"></span>otal<span class="_ _26"> </span>Alignment</span></div><div class="t m5 x2d h31 y3599 ff7 fs21 fc2 sc0 ls36 ws0">02<span class="_ _199"></span>4<span class="_ _22"> </span>4<span class="_ _199"></span>0<span class="_ _58"> </span>8</div><div class="t m5 x17 h28 y359a ffe fs1e fc6 sc0 ls0 ws0">Solution<span class="_"> </span>to<span class="_"> </span>Problem<span class="_"> </span>3.45<span class="_ _e"> </span><span class="fs16">(page<span class="_"> </span>311)</span></div><div class="t m5 x17 h26 y359b ff7 fs19 fc1 sc0 ls0 ws0">T<span class="_ _1"></span>his<span class="_"> </span>is<span class="_"> </span>an<span class="_"> </span>exercise<span class="_"> </span>in<span class="_"> </span>understanding<span class="_"> </span>structure<span class="_"> </span>layout<span class="_"> </span>and<span class="_"> </span>alignment.</div><div class="t m5 x34 h26 y359c ff7 fs19 fc1 sc0 ls0 ws0">A.<span class="_ _1f"> </span>Here<span class="_"> </span>are<span class="_"> </span>the<span class="_"> </span>object<span class="_"> </span>sizes<span class="_"> </span>and<span class="_"> </span>byte<span class="_"> </span>offsets:</div><div class="t m5 x2d h31 y359d ff7 fs21 fc2 sc0 ls0 ws0">F<span class="_ _1"></span>ield<span class="_ _75"> </span><span class="ffd fs1e ls1a5">a<span class="_ _41"></span>b<span class="_ _4a"></span>cdefgh</span></div><div class="t m5 x2d h31 y359e ff7 fs21 fc2 sc0 ls0 ws0">Size<span class="_ _d3"> </span>8<span class="_ _5e"> </span>4<span class="_ _74"> </span><span class="ls1a6">128848</span></div><div class="t m5 x2d h31 y359f ff7 fs21 fc2 sc0 ls0 ws0">Offset<span class="_ _26"> </span>0<span class="_ _95"> </span>8<span class="_ _f1"> </span>12<span class="_ _95"> </span>16<span class="_ _f1"> </span>24<span class="_ _f1"> </span>32<span class="_ _95"> </span>40<span class="_ _f1"> </span>48</div><div class="t m5 x34 h26 y35a0 ff7 fs19 fc2 sc0 ls0 ws0">B<span class="_ _3"></span>.<span class="_ _1d"> </span>The<span class="_"> </span>structure<span class="_ _16"> </span>is<span class="_ _16"> </span>a<span class="_ _11"> </span>total<span class="_ _16"> </span>of<span class="_ _11"> </span>56<span class="_ _16"> </span>bytes<span class="_ _11"> </span>long.<span class="_ _11"> </span>The<span class="_ _11"> </span>end<span class="_ _16"> </span>of<span class="_ _11"> </span>the<span class="_ _16"> </span>structure<span class="_ _11"> </span>does<span class="_ _16"> </span>not</div><div class="t m5 x2d h26 y35a1 ff7 fs19 fc2 sc0 ls0 ws0">require<span class="_"> </span>padding<span class="_"> </span>to<span class="_"> </span>satisfy<span class="_"> </span>the<span class="_"> </span>8-byte<span class="_"> </span>alignment<span class="_"> </span>requirement.</div><div class="t m5 x34 h26 y302e ff7 fs19 fc2 sc0 ls0 ws0">C.<span class="_ _25"> </span>One<span class="_ _16"> </span>strategy<span class="_ _14"> </span>that<span class="_ _16"> </span>works<span class="_ _1"></span>,<span class="_ _14"> </span>when<span class="_ _14"> </span>all<span class="_ _16"> </span>data<span class="_ _14"> </span>elements<span class="_ _16"> </span>have<span class="_ _14"> </span>a<span class="_ _16"> </span>length<span class="_ _14"> </span>equal<span class="_ _16"> </span>to<span class="_ _14"> </span>a</div><div class="t m5 x2d h26 y6e1 ff7 fs19 fc2 sc0 ls0 ws0">power<span class="_ _16"> </span>of<span class="_ _16"> </span>2,<span class="_ _14"> </span>is<span class="_ _16"> </span>to<span class="_ _16"> </span>order<span class="_ _16"> </span>the<span class="_ _16"> </span>structure<span class="_ _16"> </span>elements<span class="_ _16"> </span>in<span class="_ _16"> </span>descending<span class="_ _16"> </span>order<span class="_ _16"> </span>of<span class="_ _14"> </span>size<span class="_ _1"></span>.</div><div class="t m5 x2d h26 y6e2 ff7 fs19 fc2 sc0 ls0 ws0">T<span class="_ _1"></span>his<span class="_"> </span>leads<span class="_"> </span>to<span class="_"> </span>a<span class="_"> </span>declaration:</div></div><div class="pi" data-data='{"ctm":[2.000000,0.000000,0.000000,2.000000,0.000000,0.000000]}'></div></div>
