<div id="pf3c7" class="pf w2 h11" data-page-no="3c7"><div class="pc pc3c7 w2 h11"><img class="bi x0 y0 w1 h1" alt="" src="csapp/bg3c7.png"/><div class="t m5 x14 h28 y9b ffe fs1e fc2 sc0 ls0 ws0">966<span class="_ _1b"> </span><span class="ff6 fs1f">Chapter<span class="_ _10"> </span>11<span class="_ _3d"> </span>Network<span class="_ _10"> </span>Programming</span></div><div class="t m5 x28 h2a y548 fff fs1c fc2 sc0 ls0 ws0">Aside<span class="_ _1b"> </span><span class="ff6 fs19">How<span class="_ _11"> </span>many<span class="_ _11"> </span>Internet<span class="_ _11"> </span>hosts<span class="_ _16"> </span>are<span class="_ _11"> </span>there?</span></div><div class="t m5 x28 h2b y2d0 ff7 fs1e fc2 sc0 ls0 ws0">T<span class="_ _7"></span>wice<span class="_ _11"> </span>a<span class="_ _10"> </span>year<span class="_ _11"> </span>since<span class="_ _11"> </span>1987,<span class="_ _10"> </span>the<span class="_ _11"> </span>Internet<span class="_ _10"> </span>Systems<span class="_ _11"> </span>Consortium<span class="_ _11"> </span>conducts<span class="_"> </span>the<span class="_ _11"> </span><span class="ffa">Internet<span class="_ _11"> </span>Domain<span class="_ _10"> </span>Survey</span><span class="ls2dd">.T<span class="_ _49"></span>h<span class="_ _49"></span>e</span></div><div class="t m5 x28 h2b y2d1 ff7 fs1e fc2 sc0 ls0 ws0">survey<span class="_ _3"></span>,<span class="_ _14"> </span>which<span class="_ _14"> </span>estimates<span class="_ _14"> </span>the<span class="_ _16"> </span>number<span class="_ _14"> </span>of<span class="_ _14"> </span>Internet<span class="_ _14"> </span>hosts<span class="_ _16"> </span>by<span class="_ _14"> </span>counting<span class="_ _14"> </span>the<span class="_ _14"> </span>number<span class="_ _16"> </span>of<span class="_ _14"> </span>IP<span class="_ _14"> </span>addresses<span class="_ _14"> </span>that</div><div class="t m5 x28 h2b y2d2 ff7 fs1e fc2 sc0 ls0 ws0">have<span class="_ _14"> </span>been<span class="_ _16"> </span>assigned<span class="_ _14"> </span>a<span class="_ _14"> </span>domain<span class="_ _14"> </span>name,<span class="_ _14"> </span>reveals<span class="_ _14"> </span>an<span class="_ _14"> </span>amazing<span class="_ _16"> </span>trend.<span class="_ _14"> </span>Since<span class="_ _14"> </span>1987,<span class="_ _15"> </span>when<span class="_ _14"> </span>there<span class="_ _14"> </span>were<span class="_ _14"> </span>about</div><div class="t m5 x28 h2b y2d3 ff7 fs1e fc2 sc0 ls0 ws0">20,000<span class="_"> </span>Internet<span class="_ _13"> </span>hosts<span class="_ _3"></span>,<span class="_"> </span>the<span class="_"> </span>number<span class="_ _13"> </span>of<span class="_ _13"> </span>hosts<span class="_"> </span>has<span class="_ _13"> </span>been<span class="_ _13"> </span>increasing<span class="_"> </span>exponentially<span class="_ _7"></span>.<span class="_"> </span>By<span class="_ _13"> </span>2015,<span class="_"> </span>there<span class="_ _13"> </span>were<span class="_ _13"> </span>over</div><div class="t m5 x28 h2b y2d4 ff7 fs1e fc2 sc0 ls0 ws0">1,000,000,000<span class="_"> </span>Internet<span class="_"> </span>hosts!</div><div class="t m5 x1d h26 y7b39 ff7 fs19 fc2 sc0 ls0 ws0">at<span class="_ _11"> </span>the<span class="_ _16"> </span>same<span class="_ _11"> </span>time<span class="_ _0"></span>.<span class="_ _11"> </span>And<span class="_ _16"> </span>it<span class="_ _11"> </span>is<span class="_ _11"> </span><span class="ffa">reliable<span class="_ _16"> </span></span>in<span class="_ _11"> </span>the<span class="_ _16"> </span>sense<span class="_ _11"> </span>that—barring<span class="_ _16"> </span>some<span class="_ _11"> </span>catastrophic</div><div class="t m5 x1d h26 y7b3a ff7 fs19 fc2 sc0 ls0 ws0">failure<span class="_ _6"> </span>such<span class="_ _6"> </span>as<span class="_ _13"> </span>a<span class="_ _6"> </span>cable<span class="_ _6"> </span>cut<span class="_ _6"> </span>by<span class="_ _13"> </span>the<span class="_ _6"> </span>proverbial<span class="_ _6"> </span>careless<span class="_ _6"> </span>backhoe<span class="_ _13"> </span>operator<span class="_ _3"></span>—the<span class="_ _13"> </span>stream</div><div class="t m5 x1d h26 y7b3b ff7 fs19 fc2 sc0 ls0 ws0">of<span class="_ _6"> </span>bytes<span class="_ _6"> </span>sent<span class="_ _6"> </span>by<span class="_ _6"> </span>the<span class="_ _6"> </span>source<span class="_ _13"> </span>process<span class="_ _a"> </span>is<span class="_ _6"> </span>eventually<span class="_ _6"> </span>received<span class="_ _6"> </span>by<span class="_ _6"> </span>the<span class="_ _13"> </span>destination<span class="_ _a"> </span>process</div><div class="t m5 x1d h26 y7b3c ff7 fs19 fc2 sc0 ls0 ws0">in<span class="_"> </span>the<span class="_"> </span>same<span class="_"> </span>order<span class="_"> </span>it<span class="_"> </span>was<span class="_"> </span>sent.</div><div class="t m5 x29 h26 y7b3d ff7 fs19 fc2 sc0 ls0 ws0">A<span class="_ _16"> </span><span class="ffa">socket<span class="_ _15"> </span></span>is<span class="_ _16"> </span>an<span class="_ _14"> </span>end<span class="_ _16"> </span>point<span class="_ _16"> </span>of<span class="_ _14"> </span>a<span class="_ _16"> </span>connection.<span class="_ _14"> </span>Each<span class="_ _16"> </span>socket<span class="_ _16"> </span>has<span class="_ _14"> </span>a<span class="_ _16"> </span>corresponding</div><div class="t m5 x1d h26 y7b3e ffa fs19 fc2 sc0 ls0 ws0">socket<span class="_"> </span>address<span class="_ _11"> </span><span class="ff7">that<span class="_ _11"> </span>consists<span class="_ _11"> </span>of<span class="_ _11"> </span>an<span class="_ _11"> </span>Internet<span class="_ _11"> </span>address<span class="_ _11"> </span>and<span class="_ _11"> </span>a<span class="_ _11"> </span>16-bit<span class="_ _11"> </span>integer<span class="_"> </span></span>port</div><div class="t m5 x149 h3c y7b3f ff7 fs25 fc2 sc0 ls0 ws0">2</div><div class="t m5 x260 h26 y7b40 ff7 fs19 fc2 sc0 ls0 ws0">and</div><div class="t m5 x1d h26 y7b41 ff7 fs19 fc2 sc0 ls0 ws0">is<span class="_"> </span>denoted<span class="_"> </span>by<span class="_"> </span>the<span class="_"> </span>notation<span class="_"> </span><span class="ffd">address:port</span>.</div><div class="t m5 x29 h26 y7b42 ff7 fs19 fc2 sc0 ls0 ws0">T<span class="_ _1"></span>he<span class="_"> </span>port<span class="_ _13"> </span>in<span class="_"> </span>the<span class="_ _13"> </span>client’s<span class="_"> </span>socket<span class="_ _13"> </span>address<span class="_"> </span>is<span class="_ _13"> </span>assigned<span class="_"> </span>automatically<span class="_ _13"> </span>by<span class="_"> </span>the<span class="_ _13"> </span>kernel</div><div class="t m5 x1d h26 y7b43 ff7 fs19 fc2 sc0 ls0 ws0">when<span class="_ _11"> </span>the<span class="_ _11"> </span>client<span class="_ _16"> </span>makes<span class="_ _11"> </span>a<span class="_ _11"> </span>connection<span class="_ _11"> </span>request<span class="_ _16"> </span>and<span class="_ _11"> </span>is<span class="_ _11"> </span>known<span class="_ _11"> </span>as<span class="_ _16"> </span>an<span class="_"> </span><span class="ffa">ephemeral<span class="_ _16"> </span>port<span class="_ _2"></span></span>.</div><div class="t m5 x1d h26 y7b44 ff7 fs19 fc2 sc0 ls0 ws0">However,<span class="_ _15"> </span>the<span class="_ _15"> </span>port<span class="_ _15"> </span>in<span class="_ _15"> </span>the<span class="_ _15"> </span>server’s<span class="_ _15"> </span>socket<span class="_ _15"> </span>address<span class="_ _15"> </span>is<span class="_ _15"> </span>typically<span class="_ _15"> </span>some<span class="_ _15"> </span><span class="ffa">well-known</span></div><div class="t m5 x1d h26 y7b45 ffa fs19 fc2 sc0 ls0 ws0">port<span class="_ _15"> </span><span class="ff7">that<span class="_ _14"> </span>is<span class="_ _14"> </span>permanently<span class="_ _16"> </span>associated<span class="_ _14"> </span>with<span class="_ _14"> </span>the<span class="_ _16"> </span>service.<span class="_ _16"> </span>F<span class="_ _1"></span>or<span class="_ _14"> </span>example<span class="_ _0"></span>,<span class="_ _14"> </span>W<span class="_ _3"></span>eb<span class="_ _14"> </span>servers</span></div><div class="t m5 x1d h26 y7b46 ff7 fs19 fc2 sc0 ls0 ws0">typically<span class="_"> </span>use<span class="_"> </span>port<span class="_"> </span>80,<span class="_ _11"> </span>and<span class="_"> </span>email<span class="_"> </span>servers<span class="_"> </span>use<span class="_ _11"> </span>port<span class="_"> </span>25.<span class="_"> </span>Associated<span class="_ _11"> </span>with<span class="_"> </span>each<span class="_"> </span>service</div><div class="t m5 x1d h26 y7b47 ff7 fs19 fc2 sc0 ls0 ws0">with<span class="_ _13"> </span>a<span class="_ _13"> </span>well-known<span class="_ _13"> </span>port<span class="_"> </span>is<span class="_ _13"> </span>a<span class="_ _13"> </span>corresponding<span class="_ _13"> </span><span class="ffa">well-known<span class="_ _13"> </span>service<span class="_ _13"> </span>name</span>.<span class="_ _13"> </span>F<span class="_ _1"></span>or<span class="_"> </span>example<span class="_ _1"></span>,</div><div class="t m5 x1d h26 y7b48 ff7 fs19 fc2 sc0 ls0 ws0">the<span class="_"> </span>well-known<span class="_ _11"> </span>name<span class="_ _11"> </span>for<span class="_ _11"> </span>the<span class="_ _11"> </span>W<span class="_ _1"></span>eb<span class="_"> </span>service<span class="_ _11"> </span>is<span class="_ _11"> </span><span class="ffd">http</span>,<span class="_ _16"> </span>and<span class="_"> </span>the<span class="_ _11"> </span>well-known<span class="_ _11"> </span>name<span class="_ _11"> </span>for</div><div class="t m5 x1d h26 y7b49 ff7 fs19 fc2 sc0 ls0 ws0">email<span class="_"> </span>is<span class="_"> </span><span class="ffd">smtp</span>.<span class="_ _11"> </span>T<span class="_ _1"></span>he<span class="_ _11"> </span>mapping<span class="_"> </span>between<span class="_ _11"> </span>well-known<span class="_"> </span>names<span class="_ _11"> </span>and<span class="_"> </span>well-known<span class="_"> </span>ports<span class="_ _11"> </span>is</div><div class="t m5 x1d h26 y7b4a ff7 fs19 fc2 sc0 ls0 ws0">contained<span class="_"> </span>in<span class="_"> </span>a<span class="_"> </span>ﬁle<span class="_"> </span>called<span class="_"> </span><span class="ffd">/etc/services</span>.</div><div class="t m5 x29 h26 y7b4b ff7 fs19 fc2 sc0 ls0 ws0">A<span class="_ _14"> </span>connection<span class="_ _15"> </span>is<span class="_ _14"> </span>uniquely<span class="_ _15"> </span>identiﬁed<span class="_ _14"> </span>by<span class="_ _15"> </span>the<span class="_ _14"> </span>socket<span class="_ _15"> </span>addresses<span class="_ _14"> </span>of<span class="_ _15"> </span>its<span class="_ _14"> </span>two<span class="_ _15"> </span>end</div><div class="t m5 x1d h26 y7b4c ff7 fs19 fc2 sc0 ls0 ws0">points<span class="_ _1"></span>.<span class="_ _11"> </span>T<span class="_ _0"></span>his<span class="_ _11"> </span>pair<span class="_ _11"> </span>of<span class="_ _11"> </span>socket<span class="_ _11"> </span>addresses<span class="_ _11"> </span>is<span class="_ _11"> </span>known<span class="_ _16"> </span>as<span class="_"> </span>a<span class="_ _16"> </span><span class="ffa">socket<span class="_"> </span>pair<span class="_ _16"> </span></span>and<span class="_ _11"> </span>is<span class="_ _11"> </span>denoted<span class="_ _16"> </span>by</div><div class="t m5 x1d h26 y7b4d ff7 fs19 fc2 sc0 ls0 ws0">the<span class="_"> </span>tuple</div><div class="t m5 x1d h53 y7b4e ffd fs1e fc2 sc0 ls0 ws0">(<span class="ffa">cliaddr<span class="_ _2"></span></span>:<span class="ffa">cliport<span class="_ _2"></span></span>,<span class="_ _1f"> </span><span class="ffa">servaddr<span class="_ _2"></span></span>:<span class="ffa">servport<span class="_ _2"></span></span>)</div><div class="t m5 x1d h26 y7b4f ff7 fs19 fc2 sc0 ls0 ws0">where<span class="_"> </span><span class="ffa">cliaddr<span class="_ _16"> </span></span>is<span class="_"> </span>the<span class="_ _11"> </span>client’s<span class="_"> </span>IP<span class="_"> </span>address<span class="_ _1"></span>,<span class="_ _11"> </span><span class="ffa">cliport<span class="_ _16"> </span></span>is<span class="_"> </span>the<span class="_ _11"> </span>client’s<span class="_"> </span>port,<span class="_"> </span><span class="ffa">servaddr<span class="_ _16"> </span></span>is<span class="_"> </span>the</div><div class="t m5 x1d h26 y7b50 ff7 fs19 fc2 sc0 ls0 ws0">server’s<span class="_ _16"> </span>IP<span class="_ _16"> </span>address<span class="_ _1"></span>,<span class="_ _14"> </span>and<span class="_ _16"> </span><span class="ffa">servport<span class="_ _21"> </span></span>is<span class="_ _16"> </span>the<span class="_ _16"> </span>server’s<span class="_ _16"> </span>port.<span class="_ _14"> </span>F<span class="_ _1"></span>or<span class="_ _16"> </span>example,<span class="_ _16"> </span>F<span class="_ _0"></span>igure<span class="_ _16"> </span>11.11</div><div class="t m5 x1d h26 y7b51 ff7 fs19 fc2 sc0 ls0 ws0">shows<span class="_"> </span>a<span class="_"> </span>connection<span class="_"> </span>between<span class="_"> </span>a<span class="_"> </span>W<span class="_ _3"></span>eb<span class="_"> </span>client<span class="_"> </span>and<span class="_"> </span>a<span class="_"> </span>W<span class="_ _1"></span>eb<span class="_"> </span>server.</div><div class="t m5 x29 h26 y7b52 ff7 fs19 fc2 sc0 ls0 ws0">In<span class="_"> </span>this<span class="_"> </span>example<span class="_ _1"></span>,<span class="_"> </span>the<span class="_"> </span>W<span class="_ _1"></span>eb<span class="_"> </span>client’s<span class="_"> </span>socket<span class="_"> </span>address<span class="_"> </span>is</div><div class="t m5 x1d h2d y7b53 ffd fs1e fc2 sc0 ls0 ws0">128.2.194.242:51213</div><div class="t m5 x1d h26 y7b54 ff7 fs19 fc2 sc0 ls0 ws0">where<span class="_"> </span>port<span class="_"> </span><span class="ffd">51213<span class="_ _11"> </span></span>is<span class="_"> </span>an<span class="_"> </span>ephemeral<span class="_ _11"> </span>port<span class="_"> </span>assigned<span class="_ _11"> </span>by<span class="_"> </span>the<span class="_"> </span>kernel.<span class="_ _11"> </span>T<span class="_ _1"></span>he<span class="_ _11"> </span>W<span class="_ _3"></span>eb<span class="_ _11"> </span>server’s</div><div class="t m5 x1d h26 y7b55 ff7 fs19 fc2 sc0 ls0 ws0">socket<span class="_"> </span>address<span class="_"> </span>is</div><div class="t m5 x1d h2d y7b56 ffd fs1e fc2 sc0 ls0 ws0">208.216.181.15:80</div><div class="t m5 x1d h1d y15bf ff7 fs17 fc2 sc0 ls0 ws0">2.<span class="_"> </span>T<span class="_ _0"></span>hese<span class="_"> </span>software<span class="_"> </span>ports<span class="_"> </span>have<span class="_"> </span>no<span class="_"> </span>relation<span class="_"> </span>to<span class="_"> </span>the<span class="_"> </span>hardware<span class="_"> </span>ports<span class="_"> </span>in<span class="_"> </span>network<span class="_"> </span>switches<span class="_"> </span>and<span class="_"> </span>routers<span class="_ _1"></span>.</div></div><div class="pi" data-data='{"ctm":[2.000000,0.000000,0.000000,2.000000,0.000000,0.000000]}'></div></div>
