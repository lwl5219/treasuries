<div id="pfe7" class="pf w2 h11" data-page-no="e7"><div class="pc pce7 w2 h11"><img class="bi x0 y0 w1 h1" alt="" src="csapp/bge7.png"/><div class="t m5 x14 h28 y9b ffe fs1e fc2 sc0 ls0 ws0">230<span class="_ _1b"> </span><span class="ff6 fs1f">Chapter<span class="_ _10"> </span>3<span class="_ _3d"> </span>Machine-Level<span class="_ _10"> </span>Representation<span class="_ _10"> </span>of<span class="_ _10"> </span>Programs</span></div><div class="t m5 x1d h41 ye7 ffe fs29 fc2 sc0 ls0 ws0">3.5.2<span class="_ _48"> </span><span class="fs19">Unary<span class="_"> </span>and<span class="_"> </span>Binary<span class="_"> </span>Operations</span></div><div class="t m5 x1d h26 ybbe ff7 fs19 fc2 sc0 ls0 ws0">Operations<span class="_ _14"> </span>in<span class="_ _15"> </span>the<span class="_ _15"> </span>second<span class="_ _14"> </span>group<span class="_ _15"> </span>are<span class="_ _15"> </span>unary<span class="_ _14"> </span>operations<span class="_ _0"></span>,<span class="_ _15"> </span>with<span class="_ _15"> </span>the<span class="_ _15"> </span>single<span class="_ _14"> </span>operand</div><div class="t m5 x1d h26 ybbf ff7 fs19 fc2 sc0 ls0 ws0">serving<span class="_ _16"> </span>as<span class="_ _11"> </span>both<span class="_ _16"> </span>source<span class="_ _16"> </span>and<span class="_ _16"> </span>destination.<span class="_ _11"> </span>This<span class="_ _11"> </span>operand<span class="_ _16"> </span>can<span class="_ _11"> </span>be<span class="_ _16"> </span>either<span class="_ _16"> </span>a<span class="_ _16"> </span>register<span class="_ _11"> </span>or</div><div class="t m5 x1d h26 ybc0 ff7 fs19 fc2 sc0 ls0 ws0">a<span class="_ _16"> </span>memory<span class="_ _11"> </span>location.<span class="_ _16"> </span>F<span class="_ _1"></span>or<span class="_ _16"> </span>example<span class="_ _1"></span>,<span class="_ _16"> </span>the<span class="_ _16"> </span>instruction<span class="_ _16"> </span><span class="ffd">incq<span class="_ _16"> </span>(%rsp)<span class="_ _11"> </span></span>causes<span class="_ _16"> </span>the<span class="_ _16"> </span>8-byte</div><div class="t m5 x1d h26 ybc1 ff7 fs19 fc2 sc0 ls0 ws0">element<span class="_ _11"> </span>on<span class="_ _11"> </span>the<span class="_ _11"> </span>top<span class="_ _16"> </span>of<span class="_ _11"> </span>the<span class="_ _11"> </span>stack<span class="_ _11"> </span>to<span class="_ _11"> </span>be<span class="_ _16"> </span>incremented.<span class="_ _11"> </span>T<span class="_ _1"></span>his<span class="_ _11"> </span>syntax<span class="_ _16"> </span>is<span class="_ _11"> </span>reminiscent<span class="_ _11"> </span>of</div><div class="t m5 x1d h26 ybc2 ff7 fs19 fc2 sc0 ls0 ws0">the<span class="_"> </span>C<span class="_"> </span>increment<span class="_"> </span>(<span class="ffd">++</span>)<span class="_"> </span>and<span class="_"> </span>decrement<span class="_"> </span>(<span class="ffd">--</span>)<span class="_"> </span>operators<span class="_ _1"></span>.</div><div class="t m5 x29 h26 y119b ff7 fs19 fc2 sc0 ls0 ws0">T<span class="_ _1"></span>he<span class="_ _f"> </span>third<span class="_ _21"> </span>group<span class="_ _f"> </span>consists<span class="_ _21"> </span>of<span class="_ _f"> </span>binary<span class="_ _21"> </span>operations<span class="_ _1"></span>,<span class="_ _e"> </span>where<span class="_ _21"> </span>the<span class="_ _f"> </span>second<span class="_ _21"> </span>operand</div><div class="t m5 x1d h26 y119c ff7 fs19 fc2 sc0 ls0 ws0">is<span class="_ _14"> </span>used<span class="_ _14"> </span>as<span class="_ _15"> </span>both<span class="_ _14"> </span>a<span class="_ _15"> </span>source<span class="_ _14"> </span>and<span class="_ _15"> </span>a<span class="_ _14"> </span>destination.<span class="_ _14"> </span>This<span class="_ _16"> </span>syntax<span class="_ _15"> </span>is<span class="_ _14"> </span>reminiscent<span class="_ _15"> </span>of<span class="_ _14"> </span>the<span class="_ _14"> </span>C</div><div class="t m5 x1d h26 y216 ff7 fs19 fc2 sc0 ls0 ws0">assignment<span class="_"> </span>operators<span class="_ _3"></span>,<span class="_"> </span>such<span class="_"> </span>as<span class="_"> </span><span class="ffd ls4b">x-<span class="_ _49"></span>=y<span class="_ _49"></span><span class="ff7 ls0">.<span class="_ _13"> </span>Observe,<span class="_"> </span>however<span class="_ _1"></span>,<span class="_"> </span>that<span class="_"> </span>the<span class="_"> </span>source<span class="_"> </span>operand</span></span></div><div class="t m5 x1d h26 y2364 ff7 fs19 fc2 sc0 ls0 ws0">is<span class="_"> </span>given<span class="_"> </span>ﬁrst<span class="_"> </span>and<span class="_"> </span>the<span class="_"> </span>destination<span class="_"> </span>second.<span class="_"> </span>T<span class="_ _1"></span>his<span class="_"> </span>looks<span class="_"> </span>peculiar<span class="_"> </span>for<span class="_"> </span>noncommutative</div><div class="t m5 x1d h26 y2365 ff7 fs19 fc2 sc0 ls0 ws0">operations<span class="_ _1"></span>.<span class="_ _f"> </span>F<span class="_ _1"></span>or<span class="_ _f"> </span>example<span class="_ _0"></span>,<span class="_ _e"> </span>the<span class="_ _21"> </span>instruction<span class="_ _f"> </span><span class="ffd">subq<span class="_ _f"> </span>%rax,%rdx<span class="_ _f"> </span></span>decrements<span class="_ _e"> </span>register</div><div class="t m5 x1d h26 y320 ffd fs19 fc2 sc0 ls0 ws0">%rdx<span class="_ _13"> </span><span class="ff7">by<span class="_"> </span>the<span class="_ _13"> </span>value<span class="_ _13"> </span>in<span class="_ _13"> </span></span>%rax<span class="ff7">.<span class="_"> </span>(It<span class="_ _13"> </span>helps<span class="_ _13"> </span>to<span class="_ _13"> </span>read<span class="_"> </span>the<span class="_ _13"> </span>instruction<span class="_ _13"> </span>as<span class="_ _13"> </span>“Subtract<span class="_"> </span></span>%rax<span class="_ _13"> </span><span class="ff7">from</span></div><div class="t m5 x1d h26 y321 ffd fs19 fc2 sc0 ls0 ws0">%rdx<span class="ff7">.<span class="_ _1"></span>”)<span class="_ _6"> </span>T<span class="_ _0"></span>he<span class="_ _6"> </span>ﬁrst<span class="_ _6"> </span>operand<span class="_ _6"> </span>can<span class="_ _13"> </span>be<span class="_ _a"> </span>either<span class="_ _13"> </span>an<span class="_ _a"> </span>immediate<span class="_ _6"> </span>value,<span class="_ _6"> </span>a<span class="_ _6"> </span>register,<span class="_ _13"> </span>or<span class="_ _a"> </span>a<span class="_ _6"> </span>memory</span></div><div class="t m5 x1d h26 y301 ff7 fs19 fc2 sc0 ls0 ws0">location.<span class="_ _11"> </span>The<span class="_ _11"> </span>second<span class="_ _11"> </span>can<span class="_ _16"> </span>be<span class="_ _11"> </span>either<span class="_ _16"> </span>a<span class="_ _16"> </span>register<span class="_ _11"> </span>or<span class="_ _16"> </span>a<span class="_ _11"> </span>memory<span class="_ _16"> </span>location.<span class="_ _11"> </span>As<span class="_ _16"> </span>with<span class="_ _11"> </span>the</div><div class="t m5 x1d h26 y302 ff9 fs19 fc2 sc0 ls0 ws0">mo<span class="_ _0"></span>v<span class="_ _11"> </span><span class="ff7">instructions<span class="_ _1"></span>,<span class="_ _16"> </span>the<span class="_ _16"> </span>two<span class="_ _11"> </span>operands<span class="_ _16"> </span>cannot<span class="_ _11"> </span>both<span class="_ _16"> </span>be<span class="_ _11"> </span>memory<span class="_ _16"> </span>locations<span class="_ _1"></span>.<span class="_ _11"> </span>Note<span class="_ _16"> </span>that</span></div><div class="t m5 x1d h26 y303 ff7 fs19 fc2 sc0 ls0 ws0">when<span class="_ _13"> </span>the<span class="_ _13"> </span>second<span class="_ _13"> </span>operand<span class="_ _13"> </span>is<span class="_ _13"> </span>a<span class="_ _13"> </span>memory<span class="_ _13"> </span>location,<span class="_ _13"> </span>the<span class="_ _13"> </span>processor<span class="_ _13"> </span>must<span class="_ _13"> </span>read<span class="_ _13"> </span>the<span class="_ _13"> </span>value</div><div class="t m5 x1d h26 y304 ff7 fs19 fc2 sc0 ls0 ws0">from<span class="_"> </span>memory<span class="_ _3"></span>,<span class="_"> </span>perform<span class="_"> </span>the<span class="_"> </span>operation,<span class="_"> </span>and<span class="_"> </span>then<span class="_"> </span>write<span class="_"> </span>the<span class="_"> </span>result<span class="_"> </span>back<span class="_"> </span>to<span class="_"> </span>memory<span class="_ _7"></span>.</div><div class="t m5 x1d h47 y2366 ffe fs2b fc1 sc0 ls0 ws0">Practice<span class="_"> </span>Problem<span class="_"> </span>3.8<span class="_ _1f"> </span><span class="fs16">(solution<span class="_"> </span>page<span class="_"> </span>364)</span></div><div class="t m5 x1d h26 y2367 ff7 fs19 fc1 sc0 ls0 ws0">Assume<span class="_ _16"> </span>the<span class="_ _16"> </span>following<span class="_ _11"> </span>values<span class="_ _16"> </span>are<span class="_ _16"> </span>stored<span class="_ _16"> </span>at<span class="_ _16"> </span>the<span class="_ _16"> </span>indicated<span class="_ _11"> </span>memory<span class="_ _16"> </span>addresses<span class="_ _16"> </span>and</div><div class="t m5 x1d h26 y2368 ff7 fs19 fc1 sc0 ls0 ws0">registers:</div><div class="t m5 x1d h31 y2369 ff7 fs21 fc2 sc0 ls0 ws0">Address<span class="_ _26"> </span>V<span class="_ _7"></span>alue<span class="_ _14c"> </span>Register<span class="_ _f1"> </span>V<span class="_ _7"></span>alue</div><div class="t m5 x1f6 h2d y236a ffd fs1e fc2 sc0 ls0 ws0">0x100<span class="_ _93"> </span>0xFF<span class="_ _2f"> </span>%rax<span class="_ _8c"> </span>0x100</div><div class="t m5 x1f6 h2d y236b ffd fs1e fc2 sc0 ls0 ws0">0x108<span class="_ _93"> </span>0xAB<span class="_ _2f"> </span>%rcx<span class="_ _6f"> </span>0x1</div><div class="t m5 x1f6 h2d y236c ffd fs1e fc2 sc0 ls0 ws0">0x110<span class="_ _93"> </span>0x13<span class="_ _2f"> </span>%rdx<span class="_ _6f"> </span>0x3</div><div class="t m5 x1f6 h2d y236d ffd fs1e fc2 sc0 ls0 ws0">0x118<span class="_ _93"> </span>0x11</div><div class="t m5 x29 h26 y236e ff7 fs19 fc2 sc0 ls0 ws0">F<span class="_ _1"></span>ill<span class="_ _14"> </span>in<span class="_ _14"> </span>the<span class="_ _14"> </span>following<span class="_ _14"> </span>table<span class="_ _14"> </span>showing<span class="_ _14"> </span>the<span class="_ _14"> </span>effects<span class="_ _14"> </span>of<span class="_ _14"> </span>the<span class="_ _14"> </span>following<span class="_ _14"> </span>instructions<span class="_ _1"></span>,</div><div class="t m5 x1d h26 y236f ff7 fs19 fc2 sc0 ls0 ws0">in<span class="_ _14"> </span>terms<span class="_ _15"> </span>of<span class="_ _14"> </span>both<span class="_ _14"> </span>the<span class="_ _15"> </span>register<span class="_ _14"> </span>or<span class="_ _15"> </span>memory<span class="_ _14"> </span>location<span class="_ _15"> </span>that<span class="_ _14"> </span>will<span class="_ _15"> </span>be<span class="_ _14"> </span>updated<span class="_ _14"> </span>and<span class="_ _15"> </span>the</div><div class="t m5 x1d h26 y2370 ff7 fs19 fc2 sc0 ls0 ws0">resulting<span class="_"> </span>value:</div><div class="t m5 x1d h31 y2371 ff7 fs21 fc2 sc0 ls0 ws0">Instruction<span class="_ _14d"> </span>Destination<span class="_ _8c"> </span>V<span class="_ _7"></span>alue</div><div class="t m5 x1d h2d y2372 ffd fs1e fc2 sc0 ls0 ws0">addq<span class="_ _11"> </span>%rcx,(%rax)</div><div class="t m5 x1d h2d y2373 ffd fs1e fc1 sc0 ls0 ws0">subq<span class="_ _11"> </span>%rdx,8(%rax)</div><div class="t m5 x1d h2d y2374 ffd fs1e fc1 sc0 ls0 ws0">imulq<span class="_ _11"> </span>$16,(%rax,%rdx,8)</div><div class="t m5 x1d h2d y2375 ffd fs1e fc1 sc0 ls0 ws0">incq<span class="_ _11"> </span>16(%rax)</div><div class="t m5 x1d h2d y2376 ffd fs1e fc1 sc0 ls0 ws0">decq<span class="_ _11"> </span>%rcx</div><div class="t m5 x1d h2d y2377 ffd fs1e fc1 sc0 ls0 ws0">subq<span class="_ _11"> </span>%rdx,%rax</div><div class="t m5 x1d h41 y2270 ffe fs29 fc1 sc0 ls0 ws0">3.5.3<span class="_ _48"> </span><span class="fs19">Shift<span class="_"> </span>Operations</span></div><div class="t m5 x1d h26 y77e ff7 fs19 fc1 sc0 ls0 ws0">T<span class="_ _1"></span>he<span class="_ _16"> </span>ﬁnal<span class="_ _11"> </span>group<span class="_ _16"> </span>consists<span class="_ _11"> </span>of<span class="_ _11"> </span>shift<span class="_ _16"> </span>operations<span class="_ _1"></span>,<span class="_ _11"> </span>where<span class="_ _16"> </span>the<span class="_ _11"> </span>shift<span class="_ _16"> </span>amount<span class="_ _11"> </span>is<span class="_ _16"> </span>given<span class="_ _11"> </span>ﬁrst</div><div class="t m5 x1d h26 y77f ff7 fs19 fc1 sc0 ls0 ws0">and<span class="_"> </span>the<span class="_"> </span>value<span class="_ _11"> </span>to<span class="_"> </span>shift<span class="_ _11"> </span>is<span class="_"> </span>given<span class="_"> </span>second.<span class="_ _11"> </span>Both<span class="_"> </span>arithmetic<span class="_ _11"> </span>and<span class="_"> </span>logical<span class="_ _11"> </span>right<span class="_"> </span>shifts<span class="_"> </span>are</div></div><div class="pi" data-data='{"ctm":[2.000000,0.000000,0.000000,2.000000,0.000000,0.000000]}'></div></div>
