<div id="pf55" class="pf w2 h11" data-page-no="55"><div class="pc pc55 w2 h11"><img class="bi x0 y0 w1 h1" alt="" src="csapp/bg55.png"/><div class="t m5 x14 h28 y9b ffe fs1e fc2 sc0 ls0 ws0">84<span class="_ _1b"> </span><span class="ff6 fs1f">Chapter<span class="_ _10"> </span>2<span class="_ _3d"> </span>Representing<span class="_ _10"> </span>and<span class="_ _10"> </span>Manipulating<span class="_ _10"> </span>Information</span></div><div class="t m5 x28 h2a y257 fff fs1c fc2 sc0 ls0 ws0">New<span class="_ _16"> </span>to<span class="_ _16"> </span>C?<span class="_ _1b"> </span><span class="ff6 fs19">Pointers<span class="_ _11"> </span>and<span class="_ _11"> </span>arrays</span></div><div class="t m5 x28 h2b y2d0 ff7 fs1e fc2 sc0 ls0 ws0">In<span class="_"> </span>function<span class="_"> </span><span class="ffd">show_bytes<span class="_ _10"> </span></span>(F<span class="_ _0"></span>igure<span class="_"> </span>2.4),<span class="_"> </span>we<span class="_"> </span>see<span class="_"> </span>the<span class="_"> </span>close<span class="_"> </span>connection<span class="_ _10"> </span>between<span class="_"> </span>pointers<span class="_ _10"> </span>and<span class="_"> </span>arrays<span class="_ _0"></span>,<span class="_"> </span>as<span class="_"> </span>will</div><div class="t m5 x28 h2b y2d1 ff7 fs1e fc2 sc0 ls0 ws0">be<span class="_ _11"> </span>discussed<span class="_ _11"> </span>in<span class="_ _16"> </span>detail<span class="_ _11"> </span>in<span class="_ _11"> </span>Section<span class="_ _11"> </span>3.8.<span class="_ _16"> </span>W<span class="_ _3"></span>e<span class="_ _11"> </span>see<span class="_ _16"> </span>that<span class="_ _11"> </span>this<span class="_ _11"> </span>function<span class="_ _16"> </span>has<span class="_ _11"> </span>an<span class="_ _11"> </span>argument<span class="_ _11"> </span><span class="ffd">start<span class="_ _16"> </span></span>of<span class="_ _11"> </span>type<span class="_ _11"> </span><span class="ffd">byte_</span></div><div class="t m5 x28 h2b y2d2 ffd fs1e fc2 sc0 ls0 ws0">pointer<span class="_ _11"> </span><span class="ff7">(which<span class="_ _11"> </span>has<span class="_ _16"> </span>been<span class="_ _11"> </span>deﬁned<span class="_ _11"> </span>to<span class="_ _11"> </span>be<span class="_ _11"> </span>a<span class="_ _16"> </span>pointer<span class="_ _11"> </span>to<span class="_ _11"> </span></span>unsigned<span class="_ _11"> </span>char<span class="ff7">),<span class="_ _16"> </span>but<span class="_ _11"> </span>we<span class="_ _11"> </span>see<span class="_ _16"> </span>the<span class="_ _11"> </span>array<span class="_ _11"> </span>reference</span></div><div class="t m5 x28 h2b y2d3 ffd fs1e fc2 sc0 ls0 ws0">start[i]<span class="_ _13"> </span><span class="ff7">on<span class="_ _13"> </span>line<span class="_ _13"> </span>8.<span class="_"> </span>In<span class="_ _13"> </span>C<span class="_ _1"></span>,<span class="_"> </span>we<span class="_ _13"> </span>can<span class="_ _13"> </span>dereference<span class="_ _13"> </span>a<span class="_ _13"> </span>pointer<span class="_ _13"> </span>with<span class="_ _13"> </span>array<span class="_ _13"> </span>notation,<span class="_"> </span>and<span class="_ _13"> </span>we<span class="_ _13"> </span>can<span class="_ _13"> </span>reference<span class="_ _13"> </span>array</span></div><div class="t m5 x28 h2b y2d4 ff7 fs1e fc2 sc0 ls0 ws0">elements<span class="_ _13"> </span>with<span class="_ _13"> </span>pointer<span class="_ _13"> </span>notation.<span class="_ _13"> </span>In<span class="_ _13"> </span>this<span class="_ _13"> </span>example<span class="_ _1"></span>,<span class="_ _13"> </span>the<span class="_ _13"> </span>reference<span class="_ _13"> </span><span class="ffd">start[i]<span class="_ _13"> </span></span>indicates<span class="_ _13"> </span>that<span class="_ _13"> </span>we<span class="_ _13"> </span>want<span class="_ _13"> </span>to<span class="_ _13"> </span>read</div><div class="t m5 x28 h2b y2d5 ff7 fs1e fc2 sc0 ls0 ws0">the<span class="_"> </span>byte<span class="_"> </span>that<span class="_"> </span>is<span class="_"> </span><span class="ffd">i<span class="_ _10"> </span></span>positions<span class="_"> </span>beyond<span class="_"> </span>the<span class="_"> </span>location<span class="_"> </span>pointed<span class="_"> </span>to<span class="_"> </span>by<span class="_"> </span><span class="ffd">start</span>.</div><div class="t m5 x28 h2a yb06 fff fs1c fc2 sc0 ls0 ws0">New<span class="_ _16"> </span>to<span class="_ _16"> </span>C?<span class="_ _1b"> </span><span class="ff6 fs19">Pointer<span class="_ _11"> </span>creation<span class="_ _11"> </span>and<span class="_ _16"> </span>dereferencing</span></div><div class="t m5 x28 h2b yb07 ff7 fs1e fc2 sc0 ls0 ws0">In<span class="_"> </span>lines<span class="_ _11"> </span>13,<span class="_"> </span>17,<span class="_ _11"> </span>and<span class="_"> </span>21<span class="_ _11"> </span>of<span class="_"> </span>Figure<span class="_"> </span>2.4<span class="_"> </span>we<span class="_ _10"> </span>see<span class="_ _11"> </span>uses<span class="_"> </span>of<span class="_ _11"> </span>two<span class="_"> </span>operations<span class="_ _10"> </span>that<span class="_ _11"> </span>give<span class="_"> </span>C<span class="_ _11"> </span>(and<span class="_"> </span>therefore<span class="_ _10"> </span>C++)<span class="_ _11"> </span>its</div><div class="t m5 x28 h2b yb08 ff7 fs1e fc2 sc0 ls0 ws0">distinctive<span class="_ _6"> </span>character.<span class="_ _6"> </span>T<span class="_ _0"></span>he<span class="_ _6"> </span>C<span class="_ _6"> </span>“address<span class="_ _13"> </span>of<span class="_ _0"></span>”<span class="_ _6"> </span>operator<span class="_ _13"> </span>‘<span class="ffd">&amp;</span>’<span class="_ _a"> </span>creates<span class="_ _13"> </span>a<span class="_ _a"> </span>pointer.<span class="_ _6"> </span>On<span class="_ _13"> </span>all<span class="_ _a"> </span>three<span class="_ _13"> </span>lines<span class="_ _3"></span>,<span class="_ _13"> </span>the<span class="_ _6"> </span>expression</div><div class="t m5 x28 h2b yb09 ffd fs1e fc2 sc0 ls0 ws0">&amp;x<span class="_ _10"> </span><span class="ff7">creates<span class="_"> </span>a<span class="_ _13"> </span>pointer<span class="_"> </span>to<span class="_"> </span>the<span class="_"> </span>location<span class="_"> </span>holding<span class="_"> </span>the<span class="_ _13"> </span>object<span class="_"> </span>indicated<span class="_"> </span>by<span class="_"> </span>variable<span class="_"> </span></span>x<span class="ff7">.<span class="_"> </span>T<span class="_ _1"></span>he<span class="_"> </span>type<span class="_"> </span>of<span class="_"> </span>this<span class="_"> </span>pointer</span></div><div class="t m5 x28 h2b yb0a ff7 fs1e fc2 sc0 ls0 ws0">depends<span class="_ _16"> </span>on<span class="_ _14"> </span>the<span class="_ _16"> </span>type<span class="_ _14"> </span>of<span class="_ _16"> </span><span class="ffd">x</span>,<span class="_ _15"> </span>and<span class="_ _16"> </span>hence<span class="_ _14"> </span>these<span class="_ _14"> </span>three<span class="_ _16"> </span>pointers<span class="_ _14"> </span>are<span class="_ _16"> </span>of<span class="_ _14"> </span>type<span class="_ _16"> </span><span class="ffd">int<span class="_ _16"> </span>*</span>,<span class="_ _14"> </span><span class="ffd">float<span class="_ _11"> </span>*</span>,<span class="_ _14"> </span>and<span class="_ _14"> </span><span class="ffd">void<span class="_ _11"> </span>**</span>,</div><div class="t m5 x28 h2b yb0b ff7 fs1e fc2 sc0 ls0 ws0">respectively<span class="_ _3"></span>.<span class="_"> </span>(Data<span class="_"> </span>type<span class="_"> </span><span class="ffd">void<span class="_ _11"> </span>*<span class="_ _10"> </span></span>is<span class="_"> </span>a<span class="_"> </span>special<span class="_"> </span>kind<span class="_"> </span>of<span class="_"> </span>pointer<span class="_"> </span>with<span class="_"> </span>no<span class="_"> </span>associated<span class="_"> </span>type<span class="_"> </span>information.)</div><div class="t m5 x57 h2b yb0c ff7 fs1e fc2 sc0 ls0 ws0">T<span class="_ _1"></span>he<span class="_ _15"> </span>cast<span class="_ _15"> </span>operator<span class="_ _14"> </span>converts<span class="_ _15"> </span>from<span class="_ _15"> </span>one<span class="_ _14"> </span>data<span class="_ _15"> </span>type<span class="_ _14"> </span>to<span class="_ _15"> </span>another.<span class="_ _14"> </span>Thus<span class="_ _3"></span>,<span class="_ _21"> </span>the<span class="_ _15"> </span>cast<span class="_ _14"> </span><span class="ffd">(byte_pointer)<span class="_ _11"> </span>&amp;x</span></div><div class="t m5 x28 h2b yb0d ff7 fs1e fc2 sc0 ls0 ws0">indicates<span class="_ _11"> </span>that<span class="_ _16"> </span>whatever<span class="_ _11"> </span>type<span class="_ _11"> </span>the<span class="_ _16"> </span>pointer<span class="_ _11"> </span><span class="ffd">&amp;x<span class="_ _11"> </span></span>had<span class="_ _16"> </span>before<span class="_ _1"></span>,<span class="_ _16"> </span>the<span class="_ _11"> </span>program<span class="_ _16"> </span>will<span class="_ _11"> </span>now<span class="_ _16"> </span>reference<span class="_ _11"> </span>a<span class="_ _11"> </span>pointer<span class="_ _16"> </span>to</div><div class="t m5 x28 h2b yb0e ff7 fs1e fc2 sc0 ls0 ws0">data<span class="_ _13"> </span>of<span class="_"> </span>type<span class="_ _13"> </span><span class="ffd">unsigned<span class="_ _11"> </span>char</span>.<span class="_"> </span>T<span class="_ _1"></span>he<span class="_ _13"> </span>casts<span class="_"> </span>shown<span class="_ _13"> </span>here<span class="_ _13"> </span>do<span class="_"> </span>not<span class="_ _13"> </span>change<span class="_ _13"> </span>the<span class="_ _13"> </span>actual<span class="_"> </span>pointer;<span class="_ _13"> </span>they<span class="_ _13"> </span>simply<span class="_"> </span>direct</div><div class="t m5 x28 h2b yb0f ff7 fs1e fc2 sc0 ls0 ws0">the<span class="_"> </span>compiler<span class="_"> </span>to<span class="_"> </span>refer<span class="_"> </span>to<span class="_"> </span>the<span class="_"> </span>data<span class="_"> </span>being<span class="_"> </span>pointed<span class="_"> </span>to<span class="_"> </span>according<span class="_"> </span>to<span class="_"> </span>the<span class="_"> </span>new<span class="_"> </span>data<span class="_"> </span>type<span class="_ _1"></span>.</div><div class="t m5 x28 h2a yb10 fff fs1c fc2 sc0 ls0 ws0">Aside<span class="_ _1b"> </span><span class="ff6 fs19">Generating<span class="_ _11"> </span>an<span class="_ _11"> </span>ASCII<span class="_ _11"> </span>table</span></div><div class="t m5 x28 h2b yb11 ff7 fs1e fc2 sc0 ls0 ws0">Y<span class="_ _3"></span>ou<span class="_"> </span>can<span class="_"> </span>display<span class="_"> </span>a<span class="_"> </span>table<span class="_"> </span>showing<span class="_"> </span>the<span class="_"> </span>ASCII<span class="_"> </span>character<span class="_"> </span>code<span class="_"> </span>by<span class="_"> </span>executing<span class="_"> </span>the<span class="_"> </span>command<span class="_"> </span><span class="ffd">man<span class="_ _11"> </span>ascii</span>.</div><div class="t m5 x1d h47 yb12 ffe fs2b fc1 sc0 ls0 ws0">Practice<span class="_"> </span>Problem<span class="_"> </span>2.5<span class="_ _1f"> </span><span class="fs16">(solution<span class="_"> </span>page<span class="_"> </span>180)</span></div><div class="t m5 x1d h26 yb13 ff7 fs19 fc1 sc0 ls0 ws0">Consider<span class="_"> </span>the<span class="_"> </span>following<span class="_"> </span>three<span class="_"> </span>calls<span class="_"> </span>to<span class="_"> </span><span class="ffd">show_bytes</span>:</div><div class="t m5 x1d h2d yb14 ffd fs1e fc2 sc0 ls0 ws0">int<span class="_ _e"> </span>a<span class="_ _1f"> </span>=<span class="_ _1f"> </span>0x12345678;</div><div class="t m5 x1d h2d yb15 ffd fs1e fc2 sc0 ls0 ws0">byte_pointer<span class="_ _e"> </span>ap<span class="_ _1f"> </span>=<span class="_ _1f"> </span>(byte_pointer)<span class="_ _e"> </span>&amp;a;</div><div class="t m5 x1d h2d yb16 ffd fs1e fc2 sc0 ls0 ws0">show_bytes(ap,<span class="_ _e"> </span>1);<span class="_ _1f"> </span>/*<span class="_ _1f"> </span>A.<span class="_ _e"> </span>*/</div><div class="t m5 x1d h2d yb17 ffd fs1e fc2 sc0 ls0 ws0">show_bytes(ap,<span class="_ _e"> </span>2);<span class="_ _1f"> </span>/*<span class="_ _1f"> </span>B.<span class="_ _e"> </span>*/</div><div class="t m5 x1d h2d yb18 ffd fs1e fc2 sc0 ls0 ws0">show_bytes(ap,<span class="_ _e"> </span>3);<span class="_ _1f"> </span>/*<span class="_ _1f"> </span>C.<span class="_ _e"> </span>*/</div><div class="t m5 x29 h26 yb19 ff7 fs19 fc2 sc0 ls0 ws0">Indicate<span class="_ _13"> </span>the<span class="_ _13"> </span>values<span class="_"> </span>that<span class="_ _13"> </span>will<span class="_ _13"> </span>be<span class="_ _13"> </span>printed<span class="_ _13"> </span>by<span class="_ _13"> </span>each<span class="_"> </span>call<span class="_ _13"> </span>on<span class="_ _13"> </span>a<span class="_ _13"> </span>little-endian<span class="_ _13"> </span>machine</div><div class="t m5 x1d h26 yb1a ff7 fs19 fc2 sc0 ls0 ws0">and<span class="_"> </span>on<span class="_"> </span>a<span class="_"> </span>big-endian<span class="_"> </span>machine:</div><div class="t m5 x124 h26 yb1b ff7 fs19 fc2 sc0 ls0 ws0">A.<span class="_ _1f"> </span>Little<span class="_"> </span>endian:</div><div class="t m5 x119 h26 yb1c ff7 fs19 fc1 sc0 ls0 ws0">Big<span class="_"> </span>endian:</div><div class="t m5 x124 h26 y8d6 ff7 fs19 fc1 sc0 ls0 ws0">B<span class="_ _3"></span>.<span class="_ _1d"> </span>Little<span class="_"> </span>endian:<span class="_ _7a"> </span>Big<span class="_"> </span>endian:</div><div class="t m5 x124 h26 yb1d ff7 fs19 fc1 sc0 ls0 ws0">C.<span class="_ _25"> </span>Little<span class="_"> </span>endian:</div><div class="t m5 x119 h26 yb1e ff7 fs19 fc1 sc0 ls0 ws0">Big<span class="_"> </span>endian:</div></div><div class="pi" data-data='{"ctm":[2.000000,0.000000,0.000000,2.000000,0.000000,0.000000]}'></div></div>
