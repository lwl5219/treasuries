<div id="pfea" class="pf w2 h11" data-page-no="ea"><div class="pc pcea w2 h11"><img class="bi x0 y0 w1 h1" alt="" src="csapp/bgea.png"/><div class="t m5 x191 h28 y9b ff6 fs1f fc2 sc0 ls0 ws0">Section<span class="_ _10"> </span>3.5<span class="_ _60"> </span>Arithmetic<span class="_ _10"> </span>and<span class="_ _10"> </span>Logical<span class="_ _10"> </span>Operations<span class="_ _3e"> </span><span class="ffe fs1e">233</span></div><div class="t m5 x17 h2d y140c ffd fs1e fc2 sc0 ls0 ws0">short<span class="_ _e"> </span>arith3(short<span class="_ _1f"> </span>x,<span class="_ _1f"> </span>short<span class="_ _e"> </span>y,<span class="_ _1f"> </span>short<span class="_ _e"> </span>z)</div><div class="t m5 x17 h2d y140d ffd fs1e fc2 sc0 ls0 ws0">{</div><div class="t m5 x1b6 h2d y1b95 ffd fs1e fc2 sc0 ls0 ws0">short<span class="_ _e"> </span>p1<span class="_ _1f"> </span>=</div><div class="t m5 x25 h2d yecb ffd fs1e fc2 sc0 ls0 ws0">;</div><div class="t m5 x1b6 h2d y2145 ffd fs1e fc2 sc0 ls0 ws0">short<span class="_ _e"> </span>p2<span class="_ _1f"> </span>=</div><div class="t m5 x25 h2d yecc ffd fs1e fc2 sc0 ls0 ws0">;</div><div class="t m5 x1b6 h2d y23be ffd fs1e fc2 sc0 ls0 ws0">short<span class="_ _e"> </span>p3<span class="_ _1f"> </span>=</div><div class="t m5 x25 h2d yecd ffd fs1e fc2 sc0 ls0 ws0">;</div><div class="t m5 x1b6 h2d y23bf ffd fs1e fc2 sc0 ls0 ws0">short<span class="_ _e"> </span>p4<span class="_ _1f"> </span>=</div><div class="t m5 x25 h2d yece ffd fs1e fc2 sc0 ls0 ws0">;</div><div class="t m5 x1b6 h2d y23c0 ffd fs1e fc2 sc0 ls0 ws0">return<span class="_ _e"> </span>p4;</div><div class="t m5 x17 h2d y23c1 ffd fs1e fc2 sc0 ls0 ws0">}</div><div class="t m5 x26 h26 y23c2 ff7 fs19 fc2 sc0 ls0 ws0">T<span class="_ _1"></span>he<span class="_"> </span>portion<span class="_"> </span>of<span class="_"> </span>the<span class="_"> </span>generated<span class="_"> </span>assembly<span class="_"> </span>code<span class="_"> </span>implementing<span class="_ _13"> </span>these<span class="_"> </span>expressions</div><div class="t m5 x17 h26 y23c3 ff7 fs19 fc2 sc0 ls0 ws0">is<span class="_"> </span>as<span class="_"> </span>follows:</div><div class="t m5 xee h61 y23c4 ff13 fs35 fc6 sc0 ls0 ws0">short<span class="_ _f"> </span>arith3(short<span class="_ _f"> </span>x,<span class="_ _f"> </span>short<span class="_ _e"> </span>y,<span class="_ _21"> </span>short<span class="_ _f"> </span>z)</div><div class="t m5 xee h61 y23c5 ff13 fs35 fc6 sc0 ls0 ws0">x<span class="_ _f"> </span>in<span class="_ _f"> </span>%rdi,<span class="_ _f"> </span>y<span class="_ _e"> </span>in<span class="_ _21"> </span>%rsi,<span class="_ _f"> </span>z<span class="_ _e"> </span>in<span class="_ _21"> </span>%rdx</div><div class="t m5 x17 h2d y23c6 ffd fs1e fc2 sc0 ls0 ws0">arith3:</div><div class="t m5 x72 h2d y23c7 ffd fs1e fc2 sc0 ls0 ws0">orq<span class="_ _8c"> </span>%rsi,<span class="_ _e"> </span>%rdx</div><div class="t m5 x72 h2d y23c8 ffd fs1e fc2 sc0 ls0 ws0">sarq<span class="_ _46"> </span>$9,<span class="_ _e"> </span>%rdx</div><div class="t m5 x72 h2d y23c9 ffd fs1e fc2 sc0 ls0 ws0">notq<span class="_ _46"> </span>%rdx</div><div class="t m5 x72 h2d y23ca ffd fs1e fc2 sc0 ls0 ws0">movq<span class="_ _46"> </span>%rdx,<span class="_ _e"> </span>%bax</div><div class="t m5 x72 h2d y23cb ffd fs1e fc2 sc0 ls0 ws0">subq<span class="_ _46"> </span>%rsi,<span class="_ _e"> </span>%rbx</div><div class="t m5 x72 h2d y23cc ffd fs1e fc2 sc0 ls0 ws0">ret</div><div class="t m5 x26 h26 y23cd ff7 fs19 fc2 sc0 ls0 ws0">Based<span class="_"> </span>on<span class="_"> </span>this<span class="_"> </span>assembly<span class="_"> </span>code<span class="_ _1"></span>,<span class="_"> </span>ﬁll<span class="_"> </span>in<span class="_"> </span>the<span class="_"> </span>missing<span class="_"> </span>portions<span class="_"> </span>of<span class="_"> </span>the<span class="_"> </span>C<span class="_"> </span>code.</div><div class="t m5 x17 h47 y23ce ffe fs2b fc1 sc0 ls0 ws0">Practice<span class="_"> </span>Problem<span class="_"> </span>3.11<span class="_ _1f"> </span><span class="fs16">(solution<span class="_"> </span>page<span class="_"> </span>365)</span></div><div class="t m5 x17 h26 y23cf ff7 fs19 fc1 sc0 ls0 ws0">It<span class="_"> </span>is<span class="_"> </span>common<span class="_"> </span>to<span class="_"> </span>ﬁnd<span class="_"> </span>assembly-code<span class="_"> </span>lines<span class="_"> </span>of<span class="_"> </span>the<span class="_"> </span>form</div><div class="t m5 x17 h2d y23d0 ffd fs1e fc2 sc0 ls0 ws0">xorq<span class="_ _e"> </span>%rcx,%rcx</div><div class="t m5 x17 h26 y23d1 ff7 fs19 fc2 sc0 ls0 ws0">in<span class="_ _e"> </span>code<span class="_ _e"> </span>that<span class="_ _e"> </span>was<span class="_ _e"> </span>generated<span class="_ _f"> </span>from<span class="_ _e"> </span>C<span class="_ _e"> </span>where<span class="_ _e"> </span>no<span class="_ _e"> </span><span class="ff9">ex<span class="_ _1"></span>clusive-or<span class="_ _e"> </span><span class="ff7">operations<span class="_ _e"> </span>were</span></span></div><div class="t m5 x17 h26 y23d2 ff7 fs19 fc2 sc0 ls0 ws0">present.</div><div class="t m5 x34 h26 y23d3 ff7 fs19 fc2 sc0 ls0 ws0">A.<span class="_ _1f"> </span>Explain<span class="_ _6"> </span>the<span class="_ _13"> </span>effect<span class="_ _6"> </span>of<span class="_ _13"> </span>this<span class="_ _13"> </span>particular<span class="_ _6"> </span><span class="ff9">ex<span class="_ _0"></span>clusive-or<span class="_ _13"> </span><span class="ff7">instruction<span class="_ _6"> </span>and<span class="_ _13"> </span>what<span class="_ _6"> </span>useful</span></span></div><div class="t m5 x2d h26 y23d4 ff7 fs19 fc2 sc0 ls0 ws0">operation<span class="_"> </span>it<span class="_"> </span>implements<span class="_ _1"></span>.</div><div class="t m5 x34 h26 y23d5 ff7 fs19 fc2 sc0 ls0 ws0">B<span class="_ _3"></span>.<span class="_ _1d"> </span>What<span class="_ _16"> </span>would<span class="_ _16"> </span>be<span class="_ _16"> </span>the<span class="_ _16"> </span>more<span class="_ _16"> </span>straightforward<span class="_ _16"> </span>way<span class="_ _16"> </span>to<span class="_ _16"> </span>express<span class="_ _16"> </span>this<span class="_ _16"> </span>operation<span class="_ _16"> </span>in</div><div class="t m5 x2d h26 y23d6 ff7 fs19 fc2 sc0 ls0 ws0">assembly<span class="_"> </span>code?</div><div class="t m5 x34 h26 y23d7 ff7 fs19 fc2 sc0 ls0 ws0">C.<span class="_ _25"> </span>Compare<span class="_ _16"> </span>the<span class="_ _14"> </span>number<span class="_ _16"> </span>of<span class="_ _14"> </span>bytes<span class="_ _14"> </span>to<span class="_ _16"> </span>encode<span class="_ _14"> </span>any<span class="_ _14"> </span>two<span class="_ _16"> </span>of<span class="_ _14"> </span>these<span class="_ _14"> </span>three<span class="_ _16"> </span>different</div><div class="t m5 x2d h26 y23d8 ff7 fs19 fc2 sc0 ls0 ws0">implementations<span class="_"> </span>of<span class="_"> </span>the<span class="_"> </span>same<span class="_"> </span>operation.</div><div class="t m5 x17 h41 y23d9 ffe fs29 fc1 sc0 ls0 ws0">3.5.5<span class="_ _48"> </span><span class="fs19">Special<span class="_"> </span>Arithmetic<span class="_"> </span>Operations</span></div><div class="t m5 x17 h26 yd16 ff7 fs19 fc1 sc0 ls0 ws0">As<span class="_"> </span>we<span class="_ _11"> </span>saw<span class="_ _11"> </span>in<span class="_ _11"> </span>Section<span class="_ _11"> </span>2.3,<span class="_ _11"> </span>multiplying<span class="_ _11"> </span>two<span class="_ _11"> </span>64-bit<span class="_ _11"> </span>signed<span class="_ _11"> </span>or<span class="_ _11"> </span>unsigned<span class="_ _11"> </span>integers<span class="_ _11"> </span>can</div><div class="t m5 x17 h26 yd17 ff7 fs19 fc1 sc0 ls0 ws0">yield<span class="_ _21"> </span>a<span class="_ _21"> </span>product<span class="_ _21"> </span>that<span class="_ _21"> </span>requires<span class="_ _21"> </span>128<span class="_ _21"> </span>bits<span class="_ _21"> </span>to<span class="_ _21"> </span>represent.<span class="_ _21"> </span>T<span class="_ _1"></span>he<span class="_ _21"> </span>x86-64<span class="_ _21"> </span>instruction<span class="_ _21"> </span>set</div><div class="t m5 x17 h26 y223b ff7 fs19 fc1 sc0 ls0 ws0">provides<span class="_ _13"> </span>limited<span class="_ _6"> </span>support<span class="_ _13"> </span>for<span class="_ _13"> </span>operations<span class="_ _6"> </span>involving<span class="_ _13"> </span>128-bit<span class="_ _13"> </span>(16-byte)<span class="_ _6"> </span>numbers<span class="_ _1"></span>.<span class="_ _13"> </span>Con-</div><div class="t m5 x17 h26 y223c ff7 fs19 fc1 sc0 ls0 ws0">tinuing<span class="_ _13"> </span>with<span class="_"> </span>the<span class="_ _13"> </span>naming<span class="_ _13"> </span>convention<span class="_"> </span>of<span class="_ _13"> </span>word<span class="_"> </span>(2<span class="_ _13"> </span>bytes),<span class="_ _13"> </span>double<span class="_"> </span>word<span class="_ _13"> </span>(4<span class="_ _13"> </span>bytes),<span class="_"> </span>and</div><div class="t m5 x17 h26 y23da ff7 fs19 fc1 sc0 ls0 ws0">quad<span class="_"> </span>word<span class="_"> </span>(8<span class="_ _13"> </span>bytes),<span class="_"> </span>Intel<span class="_"> </span>refers<span class="_"> </span>to<span class="_ _13"> </span>a<span class="_"> </span>16-byte<span class="_"> </span>quantity<span class="_"> </span>as<span class="_ _13"> </span>an<span class="_"> </span><span class="ffa">oct<span class="_"> </span>word</span>.<span class="_"> </span>F<span class="_ _1"></span>igure<span class="_"> </span>3.12</div></div><div class="pi" data-data='{"ctm":[2.000000,0.000000,0.000000,2.000000,0.000000,0.000000]}'></div></div>
