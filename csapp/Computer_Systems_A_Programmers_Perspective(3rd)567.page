<div id="pf237" class="pf w2 h11" data-page-no="237"><div class="pc pc237 w2 h11"><img class="bi x0 y0 w1 h1" alt="" src="csapp/bg237.png"/><div class="t m5 x14 h28 y9b ffe fs1e fc2 sc0 ls0 ws0">566<span class="_ _1b"> </span><span class="ff6 fs1f">Chapter<span class="_ _10"> </span>5<span class="_ _3d"> </span>Optimizing<span class="_ _10"> </span>Program<span class="_ _10"> </span>Performance</span></div><div class="t m5 x1d h47 yb1f ffe fs2b fc1 sc0 ls0 ws0">Practice<span class="_"> </span>Problem<span class="_"> </span>5.5<span class="_ _1f"> </span><span class="fs16">(solution<span class="_"> </span>page<span class="_"> </span>611)</span></div><div class="t m5 x155 h26 y9ba ff7 fs19 fc1 sc0 ls0 ws0">Suppose<span class="_ _13"> </span>we<span class="_ _6"> </span>wish<span class="_ _13"> </span>to<span class="_ _6"> </span>write<span class="_ _13"> </span>a<span class="_ _6"> </span>function<span class="_ _13"> </span>to<span class="_ _6"> </span>evaluate<span class="_ _13"> </span>a<span class="_ _6"> </span>polynomial,<span class="_ _13"> </span>where<span class="_ _6"> </span>a<span class="_ _13"> </span>polynomial</div><div class="t m5 x1d h26 y302f ff7 fs19 fc1 sc0 ls0 ws0">of<span class="_"> </span>degree<span class="_ _13"> </span><span class="ff11">n<span class="_ _10"> </span></span>is<span class="_ _13"> </span>deﬁned<span class="_"> </span>to<span class="_ _13"> </span>have<span class="_"> </span>a<span class="_ _13"> </span>set<span class="_"> </span>of<span class="_"> </span>coefﬁcients<span class="_ _13"> </span><span class="ff11">a</span></div><div class="t m5 x163 h3c y197f ff7 fs25 fc1 sc0 ls0 ws0">0</div><div class="t m5 x6b h45 y1980 ff11 fs19 fc1 sc0 ls215 ws0">,a</div><div class="t m5 xa h3c y197f ff7 fs25 fc1 sc0 ls0 ws0">1</div><div class="t m5 x100 h45 y1980 ff11 fs19 fc1 sc0 ls215 ws0">,a</div><div class="t m5 x171 h3c y197f ff7 fs25 fc1 sc0 ls0 ws0">2</div><div class="t m5 x23f h45 y1980 ff11 fs19 fc1 sc0 ls215 ws0">,...,a</div><div class="t m5 x158 h50 y197f ff11 fs25 fc1 sc0 ls0 ws0">n</div><div class="t m5 xd7 h26 y1980 ff7 fs19 fc1 sc0 ls0 ws0">.<span class="_"> </span>F<span class="_ _3"></span>or<span class="_"> </span>a<span class="_ _13"> </span>value<span class="_"> </span><span class="ff11">x<span class="_ _2"></span></span>,</div><div class="t m5 x1d h26 y1981 ff7 fs19 fc1 sc0 ls0 ws0">we<span class="_"> </span>evaluate<span class="_"> </span>the<span class="_"> </span>polynomial<span class="_"> </span>by<span class="_"> </span>computing</div><div class="t m5 x1e6 h45 y4ce1 ff11 fs19 fc1 sc0 ls0 ws0">a</div><div class="t m5 x228 h3c y4ce2 ff7 fs25 fc1 sc0 ls0 ws0">0</div><div class="t m5 xe4 h46 y4ce3 ff12 fs19 fc1 sc0 ls0 ws0">+<span class="_ _13"> </span><span class="ff11">a</span></div><div class="t m5 xa7 h3c y4ce2 ff7 fs25 fc1 sc0 ls0 ws0">1</div><div class="t m5 x180 h46 y4ce3 ff11 fs19 fc1 sc0 ls0 ws0">x<span class="_ _11"> </span><span class="ff12">+<span class="_ _10"> </span></span>a</div><div class="t m5 x39 h3c y4ce2 ff7 fs25 fc1 sc0 ls0 ws0">2</div><div class="t m5 x114 h45 y4ce3 ff11 fs19 fc1 sc0 ls0 ws0">x</div><div class="t m5 x250 h3c y4ce4 ff7 fs25 fc1 sc0 ls0 ws0">2</div><div class="t m5 x13c h46 y4ce3 ff12 fs19 fc1 sc0 ls0 ws0">+</div><div class="t m5 x51 h45 y4ce5 ff11 fs19 fc1 sc0 ls42 ws0">...</div><div class="t m5 x19c h46 y4ce3 ff12 fs19 fc1 sc0 ls0 ws0">+<span class="_ _13"> </span><span class="ff11">a</span></div><div class="t m5 x6b h50 y4ce2 ff11 fs25 fc1 sc0 ls0 ws0">n</div><div class="t m5 x1a1 h45 y4ce3 ff11 fs19 fc1 sc0 ls0 ws0">x</div><div class="t m5 x107 h50 y4ce4 ff11 fs25 fc1 sc0 ls0 ws0">n</div><div class="t m5 x102 h26 y4ce3 ff7 fs19 fc1 sc0 ls0 ws0">(5.2)</div><div class="t m5 x1d h26 y4ce6 ff7 fs19 fc1 sc0 ls0 ws0">T<span class="_ _1"></span>his<span class="_ _14"> </span>evaluation<span class="_ _14"> </span>can<span class="_ _16"> </span>be<span class="_ _14"> </span>implemented<span class="_ _16"> </span>by<span class="_ _14"> </span>the<span class="_ _14"> </span>following<span class="_ _16"> </span>function,<span class="_ _15"> </span>having<span class="_ _16"> </span>as<span class="_ _14"> </span>argu-</div><div class="t m5 x1d h26 y4ce7 ff7 fs19 fc1 sc0 ls0 ws0">ments<span class="_ _13"> </span>an<span class="_ _13"> </span>array<span class="_ _13"> </span>of<span class="_"> </span>coefﬁcients<span class="_ _13"> </span><span class="ffd">a</span>,<span class="_ _13"> </span>a<span class="_ _13"> </span>value<span class="_ _13"> </span><span class="ffd">x</span>,<span class="_"> </span>and<span class="_ _13"> </span>the<span class="_ _13"> </span>polynomial<span class="_ _13"> </span>degree<span class="_ _13"> </span><span class="ffd">degree<span class="_ _10"> </span></span>(the</div><div class="t m5 x1d h26 y4ce8 ff7 fs19 fc1 sc0 ls0 ws0">value<span class="_"> </span><span class="ff11">n<span class="_ _11"> </span></span>in<span class="_ _11"> </span>Equation<span class="_ _11"> </span>5.2).<span class="_ _11"> </span>In<span class="_ _11"> </span>this<span class="_ _11"> </span>function,<span class="_ _11"> </span>we<span class="_ _11"> </span>compute<span class="_"> </span>both<span class="_ _11"> </span>the<span class="_ _11"> </span>successive<span class="_ _11"> </span>terms</div><div class="t m5 x1d h26 y4ce9 ff7 fs19 fc1 sc0 ls0 ws0">of<span class="_"> </span>the<span class="_"> </span>equation<span class="_"> </span>and<span class="_"> </span>the<span class="_"> </span>successive<span class="_"> </span>powers<span class="_"> </span>of<span class="_"> </span><span class="ff11">x<span class="_"> </span></span>within<span class="_"> </span>a<span class="_"> </span>single<span class="_"> </span>loop:</div><div class="t m5 x1f h2e y4cea ff6 fs20 fc6 sc0 ls0 ws0">1</div><div class="t m5 x4f h2d y4ceb ffd fs1e fc2 sc0 ls0 ws0">double<span class="_ _e"> </span>poly(double<span class="_ _1f"> </span>a[],<span class="_ _1f"> </span>double<span class="_ _e"> </span>x,<span class="_ _1f"> </span>long<span class="_ _e"> </span>degree)</div><div class="t m5 x1f h2d y4cec ff6 fs20 fc6 sc0 ls0 ws0">2<span class="_ _1c"> </span><span class="ffd fs1e fc2">{</span></div><div class="t m5 x1f h2d y4ced ff6 fs20 fc6 sc0 ls0 ws0">3<span class="_ _20"> </span><span class="ffd fs1e fc2">long<span class="_ _e"> </span>i;</span></div><div class="t m5 x1f h2d y4cee ff6 fs20 fc6 sc0 ls0 ws0">4<span class="_ _20"> </span><span class="ffd fs1e fc2">double<span class="_ _e"> </span>result<span class="_ _1f"> </span>=<span class="_ _1f"> </span>a[0];</span></div><div class="t m5 x1f h2d y4cef ff6 fs20 fc6 sc0 ls0 ws0">5<span class="_ _20"> </span><span class="ffd fs1e fc2">double<span class="_ _e"> </span>xpwr<span class="_ _1f"> </span>=<span class="_ _1f"> </span>x;<span class="_ _3b"> </span>/*<span class="_ _1f"> </span>Equals<span class="_ _1f"> </span>x^i<span class="_ _e"> </span>at<span class="_ _1f"> </span>start<span class="_ _e"> </span>of<span class="_ _1f"> </span>loop<span class="_ _1f"> </span>*/</span></div><div class="t m5 x1f h2d y4cf0 ff6 fs20 fc6 sc0 ls0 ws0">6<span class="_ _20"> </span><span class="ffd fs1e fc2">for<span class="_ _e"> </span>(i<span class="_ _1f"> </span>=<span class="_ _1f"> </span>1;<span class="_ _e"> </span>i<span class="_ _1f"> </span>&lt;=<span class="_ _e"> </span>degree;<span class="_ _1f"> </span>i++)<span class="_ _1f"> </span>{</span></div><div class="t m5 x1f h2d y4cf1 ff6 fs20 fc6 sc0 ls0 ws0">7<span class="_ _70"> </span><span class="ffd fs1e fc2">result<span class="_ _e"> </span>+=<span class="_ _1f"> </span>a[i]<span class="_ _1f"> </span>*<span class="_ _e"> </span>xpwr;</span></div><div class="t m5 x1f h2d y4cf2 ff6 fs20 fc6 sc0 ls0 ws0">8<span class="_ _70"> </span><span class="ffd fs1e fc2 ls33">x<span class="_ _41"></span>p<span class="_ _41"></span>w<span class="_ _41"></span>r=x*<span class="ls0">xpwr;</span></span></div><div class="t m5 x1f h2d y4cf3 ff6 fs20 fc6 sc0 ls0 ws0">9<span class="_ _20"> </span><span class="ffd fs1e fc2">}</span></div><div class="t m5 x1b0 h2d y4cf4 ff6 fs20 fc6 sc0 ls0 ws0">10<span class="_ _20"> </span><span class="ffd fs1e fc2">return<span class="_ _e"> </span>result;</span></div><div class="t m5 x1b0 h2d y4cf5 ff6 fs20 fc6 sc0 ls0 ws0">11<span class="_ _1c"> </span><span class="ffd fs1e fc2">}</span></div><div class="t m5 x124 h26 y4cf6 ff7 fs19 fc2 sc0 ls0 ws0">A.<span class="_ _1f"> </span>F<span class="_ _1"></span>or<span class="_ _11"> </span>degree<span class="_ _11"> </span><span class="ff11">n</span>,<span class="_ _11"> </span>how<span class="_ _16"> </span>many<span class="_"> </span>additions<span class="_ _11"> </span>and<span class="_ _16"> </span>how<span class="_"> </span>many<span class="_ _11"> </span>multiplications<span class="_ _16"> </span>does<span class="_"> </span>this</div><div class="t m5 x4f h26 y4cf7 ff7 fs19 fc2 sc0 ls0 ws0">code<span class="_"> </span>perform?</div><div class="t m5 x124 h26 y4cf8 ff7 fs19 fc2 sc0 ls0 ws0">B<span class="_ _3"></span>.<span class="_ _1d"> </span>On<span class="_ _11"> </span>our<span class="_ _11"> </span>reference<span class="_ _11"> </span>machine,<span class="_"> </span>with<span class="_ _11"> </span>arithmetic<span class="_ _16"> </span>operations<span class="_"> </span>having<span class="_ _11"> </span>the<span class="_ _11"> </span>latencies</div><div class="t m5 x4f h26 y4cf9 ff7 fs19 fc2 sc0 ls0 ws0">shown<span class="_"> </span>in<span class="_ _11"> </span>F<span class="_ _1"></span>igure<span class="_ _11"> </span>5.12,<span class="_ _11"> </span>we<span class="_"> </span>measure<span class="_ _11"> </span>the<span class="_"> </span>CPE<span class="_ _11"> </span>for<span class="_ _11"> </span>this<span class="_"> </span>function<span class="_ _11"> </span>to<span class="_"> </span>be<span class="_ _11"> </span>5.00.<span class="_"> </span>Ex-</div><div class="t m5 x4f h26 y4cfa ff7 fs19 fc2 sc0 ls0 ws0">plain<span class="_"> </span>how<span class="_"> </span>this<span class="_"> </span>CPE<span class="_"> </span>arises<span class="_"> </span>based<span class="_"> </span>on<span class="_"> </span>the<span class="_"> </span>data<span class="_"> </span>dependencies<span class="_"> </span>formed<span class="_"> </span>between</div><div class="t m5 x4f h26 y4cfb ff7 fs19 fc2 sc0 ls0 ws0">iterations<span class="_"> </span>due<span class="_"> </span>to<span class="_"> </span>the<span class="_"> </span>operations<span class="_"> </span>implementing<span class="_"> </span>lines<span class="_"> </span>7–8<span class="_"> </span>of<span class="_"> </span>the<span class="_"> </span>function.</div><div class="t m5 x1d h47 y4cfc ffe fs2b fc1 sc0 ls0 ws0">Practice<span class="_"> </span>Problem<span class="_"> </span>5.6<span class="_ _1f"> </span><span class="fs16">(solution<span class="_"> </span>page<span class="_"> </span>611)</span></div><div class="t m5 x1d h26 y4cfd ff7 fs19 fc1 sc0 ls0 ws0">Let<span class="_"> </span>us<span class="_ _11"> </span>continue<span class="_"> </span>exploring<span class="_ _11"> </span>ways<span class="_ _11"> </span>to<span class="_"> </span>evaluate<span class="_ _11"> </span>polynomials<span class="_ _1"></span>,<span class="_ _11"> </span>as<span class="_"> </span>described<span class="_ _11"> </span>in<span class="_"> </span>Practice</div><div class="t m5 x1d h26 y4cfe ff7 fs19 fc1 sc0 ls0 ws0">Problem<span class="_ _13"> </span>5.5.<span class="_ _13"> </span>W<span class="_ _3"></span>e<span class="_ _13"> </span>can<span class="_ _13"> </span>reduce<span class="_ _13"> </span>the<span class="_"> </span>number<span class="_ _13"> </span>of<span class="_ _13"> </span>multiplications<span class="_ _13"> </span>in<span class="_ _13"> </span>evaluating<span class="_ _13"> </span>a<span class="_ _13"> </span>polyno-</div><div class="t m5 x1d h26 y4cff ff7 fs19 fc1 sc0 ls0 ws0">mial<span class="_ _13"> </span>by<span class="_ _13"> </span>applying<span class="_"> </span><span class="ffa">Horner<span class="_ _1"></span>’<span class="_ _3"></span>s<span class="_ _13"> </span>method<span class="_ _2"></span><span class="ff7">,<span class="_"> </span>named<span class="_ _13"> </span>after<span class="_ _13"> </span>British<span class="_ _13"> </span>mathematician<span class="_ _13"> </span>William<span class="_ _13"> </span>G<span class="_ _3"></span>.</span></span></div><div class="t m5 x1d h26 y4d00 ff7 fs19 fc1 sc0 ls0 ws0">Horner<span class="_ _11"> </span>(1786–1837).<span class="_ _16"> </span>T<span class="_ _1"></span>he<span class="_ _16"> </span>idea<span class="_ _16"> </span>is<span class="_ _11"> </span>to<span class="_ _16"> </span>repeatedly<span class="_ _11"> </span>factor<span class="_ _16"> </span>out<span class="_ _16"> </span>the<span class="_ _11"> </span>powers<span class="_ _16"> </span>of<span class="_ _11"> </span><span class="ff11">x<span class="_ _15"> </span></span>to<span class="_ _16"> </span>get</div><div class="t m5 x1d h26 y4d01 ff7 fs19 fc1 sc0 ls0 ws0">the<span class="_"> </span>following<span class="_"> </span>evaluation:</div><div class="t m5 x89 h45 y4d02 ff11 fs19 fc1 sc0 ls0 ws0">a</div><div class="t m5 x47 h3c y4d03 ff7 fs25 fc1 sc0 ls0 ws0">0</div><div class="t m5 xe7 h46 y4d04 ff12 fs19 fc1 sc0 ls0 ws0">+<span class="_ _13"> </span><span class="ff11 ls57">x(<span class="_ _1"></span>a</span></div><div class="t m5 x143 h3c y4d03 ff7 fs25 fc1 sc0 ls0 ws0">1</div><div class="t m5 x9e h46 y4d04 ff12 fs19 fc1 sc0 ls0 ws0">+<span class="_ _13"> </span><span class="ff11 ls57">x(<span class="_ _1"></span>a</span></div><div class="t m5 xfc h3c y4d03 ff7 fs25 fc1 sc0 ls0 ws0">2</div><div class="t m5 x138 h46 y4d04 ff12 fs19 fc1 sc0 ls0 ws0">+</div><div class="t m5 x131 h45 y4d05 ff11 fs19 fc1 sc0 ls42 ws0">...</div><div class="t m5 x1d9 h46 y4d04 ff12 fs19 fc1 sc0 ls0 ws0">+<span class="_ _13"> </span><span class="ff11 ls57">x(<span class="_ _1"></span>a</span></div><div class="t m5 x175 h4b y4d03 ff11 fs25 fc1 sc0 ls0 ws0">n<span class="ff12">−<span class="ff7">1</span></span></div><div class="t m5 x163 h46 y4d04 ff12 fs19 fc1 sc0 ls0 ws0">+<span class="_ _13"> </span><span class="ff11 ls57">xa</span></div><div class="t m5 x1fa h50 y4d03 ff11 fs25 fc1 sc0 ls0 ws0">n</div><div class="t m5 x18c h45 y4d04 ff11 fs19 fc1 sc0 ls0 ws0">)</div><div class="t m5 x166 h45 y4d05 ff11 fs19 fc1 sc0 ls42 ws0">...</div><div class="t m5 xb4 h26 y4d04 ff11 fs19 fc1 sc0 ls0 ws0">))<span class="_ _169"> </span><span class="ff7">(5.3)</span></div><div class="t m5 x29 h26 y4d06 ff7 fs19 fc1 sc0 ls0 ws0">Using<span class="_"> </span>Horner’s<span class="_ _11"> </span>method,<span class="_ _11"> </span>we<span class="_ _11"> </span>can<span class="_ _11"> </span>implement<span class="_ _11"> </span>polynomial<span class="_ _11"> </span>evaluation<span class="_ _11"> </span>using<span class="_ _11"> </span>the</div><div class="t m5 x1d h26 y4d07 ff7 fs19 fc1 sc0 ls0 ws0">following<span class="_"> </span>code:</div><div class="t m5 x1f h2e y4d08 ff6 fs20 fc6 sc0 ls0 ws0">1</div><div class="t m5 x4f h2d y4d09 ffd fs1e fc2 sc0 ls0 ws0">/*<span class="_ _e"> </span>Apply<span class="_ _1f"> </span>Horner’s<span class="_ _1f"> </span>method<span class="_ _e"> </span>*/</div><div class="t m5 x1f h2d y339c ff6 fs20 fc6 sc0 ls0 ws0">2<span class="_ _1c"> </span><span class="ffd fs1e fc2">double<span class="_ _1f"> </span>polyh(double<span class="_ _e"> </span>a[],<span class="_ _1f"> </span>double<span class="_ _1f"> </span>x,<span class="_ _e"> </span>long<span class="_ _1f"> </span>degree)</span></div><div class="t m5 x1f h2d y4d0a ff6 fs20 fc6 sc0 ls0 ws0">3<span class="_ _1c"> </span><span class="ffd fs1e fc2">{</span></div></div><div class="pi" data-data='{"ctm":[2.000000,0.000000,0.000000,2.000000,0.000000,0.000000]}'></div></div>
