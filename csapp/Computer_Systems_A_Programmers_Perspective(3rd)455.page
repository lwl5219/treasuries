<div id="pf1c7" class="pf w2 h11" data-page-no="1c7"><div class="pc pc1c7 w2 h11"><img class="bi x0 y0 w1 h1" alt="" src="csapp/bg1c7.png"/><div class="t m5 x14 h28 y9b ffe fs1e fc2 sc0 ls0 ws0">454<span class="_ _1b"> </span><span class="ff6 fs1f">Chapter<span class="_ _10"> </span>4<span class="_ _3d"> </span>Processor<span class="_ _10"> </span>Architecture</span></div><div class="t m5 x124 h26 ye7 ff7 fs19 fc2 sc0 ls0 ws0">B<span class="_ _3"></span>.<span class="_ _1d"> </span>Where<span class="_ _14"> </span>should<span class="_ _15"> </span>two<span class="_ _15"> </span>registers<span class="_ _14"> </span>be<span class="_ _15"> </span>inserted<span class="_ _15"> </span>to<span class="_ _15"> </span>maximize<span class="_ _14"> </span>the<span class="_ _15"> </span>throughput<span class="_ _15"> </span>of<span class="_ _14"> </span>a</div><div class="t m5 x4f h26 y2a7 ff7 fs19 fc2 sc0 ls0 ws0">three-stage<span class="_"> </span>pipeline?<span class="_"> </span>What<span class="_"> </span>would<span class="_"> </span>be<span class="_"> </span>the<span class="_"> </span>throughput<span class="_"> </span>and<span class="_"> </span>latenc<span class="_ _1"></span>y?</div><div class="t m5 x124 h26 y1acd ff7 fs19 fc2 sc0 ls0 ws0">C.<span class="_ _25"> </span>Where<span class="_ _11"> </span>should<span class="_ _16"> </span>three<span class="_ _16"> </span>registers<span class="_ _11"> </span>be<span class="_ _16"> </span>inserted<span class="_ _16"> </span>to<span class="_ _11"> </span>maximize<span class="_ _16"> </span>the<span class="_ _16"> </span>throughput<span class="_ _16"> </span>of<span class="_ _11"> </span>a</div><div class="t m5 x4f h26 y1fe6 ff7 fs19 fc2 sc0 ls0 ws0">4-stage<span class="_"> </span>pipeline?<span class="_"> </span>What<span class="_"> </span>would<span class="_"> </span>be<span class="_"> </span>the<span class="_"> </span>throughput<span class="_"> </span>and<span class="_"> </span>latenc<span class="_ _1"></span>y?</div><div class="t m5 x124 h26 ybc1 ff7 fs19 fc2 sc0 ls0 ws0">D<span class="_ _3"></span>.<span class="_ _23"> </span>What<span class="_ _11"> </span>is<span class="_ _16"> </span>the<span class="_ _11"> </span>minimum<span class="_ _16"> </span>number<span class="_ _11"> </span>of<span class="_ _16"> </span>stages<span class="_ _16"> </span>that<span class="_ _11"> </span>would<span class="_ _16"> </span>yield<span class="_ _11"> </span>a<span class="_ _16"> </span>design<span class="_ _11"> </span>with<span class="_ _16"> </span>the</div><div class="t m5 x4f h26 ybc2 ff7 fs19 fc2 sc0 ls0 ws0">maximum<span class="_"> </span>achievable<span class="_ _13"> </span>throughput?<span class="_"> </span>Describe<span class="_ _13"> </span>this<span class="_"> </span>design,<span class="_"> </span>its<span class="_ _13"> </span>throughput,<span class="_"> </span>and</div><div class="t m5 x4f h26 y119b ff7 fs19 fc2 sc0 ls0 ws0">its<span class="_"> </span>latency<span class="_ _7"></span>.</div><div class="t m5 x1d h42 y3ee8 ff6 fs29 fc6 sc0 ls0 ws0">Diminishing<span class="_ _11"> </span>Returns<span class="_ _16"> </span>of<span class="_ _16"> </span>Deep<span class="_ _11"> </span>Pipelining</div><div class="t m5 x1d h26 y3ee9 ff7 fs19 fc1 sc0 ls0 ws0">F<span class="_ _1"></span>igure<span class="_ _16"> </span>4.37<span class="_ _16"> </span>illustrates<span class="_ _11"> </span>another<span class="_ _16"> </span>limitation<span class="_ _11"> </span>of<span class="_ _16"> </span>pipelining.<span class="_ _11"> </span>In<span class="_ _16"> </span>this<span class="_ _11"> </span>example,<span class="_ _11"> </span>we<span class="_ _16"> </span>have</div><div class="t m5 x1d h26 y3eea ff7 fs19 fc1 sc0 ls0 ws0">divided<span class="_"> </span>the<span class="_"> </span>computation<span class="_"> </span>into<span class="_"> </span>six<span class="_"> </span>stages<span class="_ _3"></span>,<span class="_"> </span>each<span class="_"> </span>requiring<span class="_"> </span>50<span class="_"> </span>ps<span class="_ _1"></span>.<span class="_"> </span>Inserting<span class="_"> </span>a<span class="_"> </span>pipeline</div><div class="t m5 x1d h26 y3eeb ff7 fs19 fc1 sc0 ls0 ws0">register<span class="_ _15"> </span>between<span class="_ _21"> </span>each<span class="_ _21"> </span>pair<span class="_ _21"> </span>of<span class="_ _21"> </span>stages<span class="_ _15"> </span>yields<span class="_ _21"> </span>a<span class="_ _21"> </span>six-stage<span class="_ _21"> </span>pipeline<span class="_ _0"></span>.<span class="_ _15"> </span>The<span class="_ _15"> </span>minimum</div><div class="t m5 x1d h46 y3eec ff7 fs19 fc1 sc0 ls0 ws0">clock<span class="_ _16"> </span>period<span class="_ _16"> </span>for<span class="_ _16"> </span>this<span class="_ _11"> </span>system<span class="_ _16"> </span>is<span class="_ _16"> </span>50<span class="_"> </span><span class="ff12">+<span class="_ _10"> </span></span>20<span class="_ _13"> </span><span class="ff12">=<span class="_ _10"> </span></span>70<span class="_ _16"> </span>picoseconds<span class="_ _1"></span>,<span class="_ _16"> </span>giving<span class="_ _16"> </span>a<span class="_ _16"> </span>throughput<span class="_ _16"> </span>of</div><div class="t m5 x1d h26 y3eed ff7 fs19 fc1 sc0 ls0 ws0">14<span class="ff11">.</span>29<span class="_ _15"> </span>GIPS<span class="_ _1"></span>.<span class="_ _21"> </span>T<span class="_ _1"></span>hus<span class="_ _1"></span>,<span class="_ _f"> </span>in<span class="_ _21"> </span>doubling<span class="_ _21"> </span>the<span class="_ _15"> </span>number<span class="_ _21"> </span>of<span class="_ _21"> </span>pipeline<span class="_ _15"> </span>stages<span class="_ _1"></span>,<span class="_ _f"> </span>we<span class="_ _21"> </span>improve<span class="_ _21"> </span>the</div><div class="t m5 x1d h46 y3eee ff7 fs19 fc1 sc0 ls0 ws0">performance<span class="_ _11"> </span>by<span class="_ _11"> </span>a<span class="_ _11"> </span>factor<span class="_"> </span>of<span class="_ _11"> </span>14<span class="_ _2"></span><span class="ff11">.</span>29<span class="ff11">/</span>8<span class="ff11">.</span>33<span class="_ _13"> </span><span class="ff12">=<span class="_ _13"></span></span>1<span class="_ _1"></span><span class="ff11">.<span class="ff7">71<span class="_ _0"></span>.<span class="_"> </span>Even<span class="_ _11"> </span>though<span class="_ _11"> </span>we<span class="_ _11"> </span>have<span class="_ _11"> </span>cut<span class="_ _11"> </span>the<span class="_ _11"> </span>time</span></span></div><div class="t m5 x1d h26 y3eef ff7 fs19 fc1 sc0 ls0 ws0">required<span class="_"> </span>for<span class="_"> </span>each<span class="_ _13"> </span>computation<span class="_"> </span>block<span class="_"> </span>by<span class="_"> </span>a<span class="_ _13"> </span>factor<span class="_"> </span>of<span class="_"> </span>2,<span class="_"> </span>we<span class="_"> </span>do<span class="_ _13"> </span>not<span class="_"> </span>get<span class="_"> </span>a<span class="_"> </span>doubling<span class="_"> </span>of</div><div class="t m5 x1d h26 y3ef0 ff7 fs19 fc1 sc0 ls0 ws0">the<span class="_ _6"> </span>throughput,<span class="_ _13"> </span>due<span class="_ _a"> </span>to<span class="_ _6"> </span>the<span class="_ _6"> </span>delay<span class="_ _6"> </span>through<span class="_ _13"> </span>the<span class="_ _a"> </span>pipeline<span class="_ _6"> </span>registers<span class="_ _1"></span>.<span class="_ _6"> </span>This<span class="_ _a"> </span>delay<span class="_ _6"> </span>becomes</div><div class="t m5 x1d h26 y3ef1 ff7 fs19 fc1 sc0 ls0 ws0">a<span class="_ _11"> </span>limiting<span class="_ _16"> </span>factor<span class="_ _11"> </span>in<span class="_ _16"> </span>the<span class="_ _11"> </span>throughput<span class="_ _16"> </span>of<span class="_ _11"> </span>the<span class="_ _16"> </span>pipeline<span class="_ _1"></span>.<span class="_ _16"> </span>In<span class="_ _11"> </span>our<span class="_ _16"> </span>new<span class="_ _11"> </span>design,<span class="_ _16"> </span>this<span class="_ _16"> </span>delay</div><div class="t m5 x1d h26 y3ef2 ff7 fs19 fc1 sc0 ls0 ws0">consumes<span class="_"> </span>28.6%<span class="_"> </span>of<span class="_"> </span>the<span class="_"> </span>total<span class="_"> </span>clock<span class="_"> </span>period.</div><div class="t m5 x29 h26 y3ef3 ff7 fs19 fc1 sc0 ls0 ws0">Modern<span class="_ _15"> </span>processors<span class="_ _21"> </span>employ<span class="_ _21"> </span>very<span class="_ _15"> </span>deep<span class="_ _21"> </span>pipelines<span class="_ _21"> </span>(15<span class="_ _21"> </span>or<span class="_ _15"> </span>more<span class="_ _21"> </span>stages)<span class="_ _21"> </span>in<span class="_ _21"> </span>an</div><div class="t m5 x1d h26 y3ef4 ff7 fs19 fc1 sc0 ls0 ws0">attempt<span class="_"> </span>to<span class="_ _13"> </span>maximize<span class="_"> </span>the<span class="_ _13"> </span>processor<span class="_"> </span>clock<span class="_ _13"> </span>rate.<span class="_ _13"> </span>T<span class="_ _0"></span>he<span class="_"> </span>processor<span class="_ _13"> </span>architects<span class="_"> </span>divide<span class="_ _13"> </span>the</div><div class="t m5 x1d h26 y3ef5 ff7 fs19 fc1 sc0 ls0 ws0">instruction<span class="_"> </span>execution<span class="_ _11"> </span>into<span class="_"> </span>a<span class="_ _11"> </span>large<span class="_ _11"> </span>number<span class="_"> </span>of<span class="_ _11"> </span>very<span class="_"> </span>simple<span class="_ _11"> </span>steps<span class="_ _11"> </span>so<span class="_"> </span>that<span class="_ _11"> </span>each<span class="_"> </span>stage</div><div class="t m5 x1d h26 y3ef6 ff7 fs19 fc1 sc0 ls0 ws0">can<span class="_ _14"> </span>have<span class="_ _14"> </span>a<span class="_ _14"> </span>very<span class="_ _14"> </span>small<span class="_ _14"> </span>delay<span class="_ _3"></span>.<span class="_ _14"> </span>T<span class="_ _0"></span>he<span class="_ _14"> </span>circuit<span class="_ _14"> </span>designers<span class="_ _14"> </span>carefully<span class="_ _14"> </span>design<span class="_ _14"> </span>the<span class="_ _14"> </span>pipeline</div><div class="t m5 x1d h26 y3ef7 ff7 fs19 fc1 sc0 ls0 ws0">registers<span class="_ _13"> </span>to<span class="_ _13"> </span>minimize<span class="_ _13"> </span>their<span class="_ _13"> </span>delay<span class="_ _7"></span>.<span class="_ _13"> </span>T<span class="_ _1"></span>he<span class="_ _13"> </span>chip<span class="_ _13"> </span>designers<span class="_ _13"> </span>must<span class="_ _13"> </span>also<span class="_ _13"> </span>carefully<span class="_ _13"> </span>design<span class="_ _13"> </span>the</div><div class="t m5 x1d h26 y3ef8 ff7 fs19 fc1 sc0 ls0 ws0">clock<span class="_ _13"> </span>distribution<span class="_ _13"> </span>network<span class="_ _13"> </span>to<span class="_ _13"> </span>ensure<span class="_ _13"> </span>that<span class="_ _13"> </span>the<span class="_ _13"> </span>clock<span class="_ _13"> </span>changes<span class="_ _13"> </span>at<span class="_ _13"> </span>the<span class="_ _13"> </span>exact<span class="_ _13"> </span>same<span class="_ _6"> </span>time</div><div class="t m5 x1d h26 y3ef9 ff7 fs19 fc1 sc0 ls0 ws0">across<span class="_ _13"> </span>the<span class="_ _13"> </span>entire<span class="_"> </span>chip<span class="_ _1"></span>.<span class="_ _13"> </span>All<span class="_ _13"> </span>of<span class="_"> </span>these<span class="_ _13"> </span>factors<span class="_ _13"> </span>contribute<span class="_ _13"> </span>to<span class="_"> </span>the<span class="_ _13"> </span>challenge<span class="_ _13"> </span>of<span class="_ _13"> </span>designing</div><div class="t m5 x1d h26 y3efa ff7 fs19 fc1 sc0 ls0 ws0">high-speed<span class="_"> </span>microprocessors<span class="_ _1"></span>.</div><div class="t m5 x1d h47 y3efb ffe fs2b fc1 sc0 ls0 ws0">Practice<span class="_"> </span>Problem<span class="_"> </span>4.29<span class="_ _1f"> </span><span class="fs16">(solution<span class="_"> </span>page<span class="_"> </span>526)</span></div><div class="t m5 x1d h26 y3efc ff7 fs19 fc1 sc0 ls0 ws0">Suppose<span class="_ _16"> </span>we<span class="_ _16"> </span>could<span class="_ _16"> </span>take<span class="_ _11"> </span>the<span class="_ _16"> </span>system<span class="_ _16"> </span>of<span class="_ _16"> </span>F<span class="_ _0"></span>igure<span class="_ _16"> </span>4.32<span class="_ _16"> </span>and<span class="_ _16"> </span>divide<span class="_ _16"> </span>it<span class="_ _11"> </span>into<span class="_ _16"> </span>an<span class="_ _16"> </span>arbitrary</div><div class="t m5 x1d h26 y3efd ff7 fs19 fc1 sc0 ls0 ws0">number<span class="_"> </span>of<span class="_ _13"> </span>pipeline<span class="_"> </span>stages<span class="_ _13"> </span><span class="ff11">k<span class="_ _2"></span></span>,<span class="_"> </span>each<span class="_"> </span>having<span class="_ _13"> </span>a<span class="_"> </span>delay<span class="_ _13"> </span>of<span class="_"> </span>300<span class="ff11 ls1b">/k<span class="_ _1"></span><span class="ff7 ls0">,<span class="_"> </span>and<span class="_ _13"> </span>with<span class="_"> </span>each<span class="_"> </span>pipeline</span></span></div><div class="t m5 x1d h26 y3efe ff7 fs19 fc1 sc0 ls0 ws0">register<span class="_"> </span>having<span class="_"> </span>a<span class="_"> </span>delay<span class="_"> </span>of<span class="_"> </span>20<span class="_"> </span>ps<span class="_ _1"></span>.</div><div class="t m5 x29 h97 y3eff ff45 fs5b fc1 sc0 ls0 ws0">Comb.</div><div class="t m5 xce h97 y3f00 ff45 fs5b fc1 sc0 ls0 ws0">logic</div><div class="t m5 x8f h97 y3eff ff45 fs5b fc1 sc0 ls0 ws0">Comb.</div><div class="t m5 xf0 h97 y3f00 ff45 fs5b fc1 sc0 ls0 ws0">logic</div><div class="t m5 x18 h97 y3eff ff45 fs5b fc1 sc0 ls0 ws0">Comb.</div><div class="t m5 x200 h97 y3f00 ff45 fs5b fc1 sc0 ls0 ws0">logic</div><div class="t m5 xf5 h97 y3eff ff45 fs5b fc1 sc0 ls0 ws0">Comb.</div><div class="t m5 xfb h97 y3f00 ff45 fs5b fc1 sc0 ls0 ws0">logic</div><div class="t m5 x18c h97 y3eff ff45 fs5b fc1 sc0 ls0 ws0">Comb.</div><div class="t m5 x1dd h97 y3f00 ff45 fs5b fc1 sc0 ls0 ws0">logic</div><div class="t m5 x109 h97 y3eff ff45 fs5b fc1 sc0 ls0 ws0">Comb.</div><div class="t m5 x12a h97 y3f00 ff45 fs5b fc1 sc0 ls0 ws0">logic</div><div class="t m5 x177 h97 y3f01 ff45 fs5b fc1 sc0 ls0 ws0">50 ps</div><div class="t m5 x129 h97 y3f02 ff45 fs5b fc1 sc0 ls0 ws0">R</div><div class="t m5 x129 h97 y3f03 ff45 fs5b fc1 sc0 ls0 ws0">e</div><div class="t m5 x129 h97 y3f04 ff45 fs5b fc1 sc0 ls0 ws0">g</div><div class="t m5 xe6 h97 y3f01 ff45 fs5b fc1 sc0 ls0 ws0">50 ps<span class="_ _18e"></span>20 ps<span class="_ _7f"> </span>20 ps<span class="_ _bd"> </span>20 ps<span class="_ _1b3"> </span>20 ps<span class="_ _bd"> </span>20 ps<span class="_ _1b3"> </span>20 ps<span class="_ _1ba"></span>50 ps</div><div class="t m5 x1ae h97 y3f02 ff45 fs5b fc1 sc0 ls0 ws0">R</div><div class="t m5 xb1 h97 y3f03 ff45 fs5b fc1 sc0 ls0 ws0">e</div><div class="t m5 xb1 h97 y3f04 ff45 fs5b fc1 sc0 ls0 ws0">g</div><div class="t m5 x12d h97 y3f01 ff45 fs5b fc1 sc0 ls0 ws0">50 ps</div><div class="t m5 x194 h97 y3f05 ff45 fs5b fc1 sc0 ls0 ws0">Delay = 420 ps, throughput = 14.29 GIPS<span class="_ _1bb"></span>Clock</div><div class="t m5 x2b h97 y3f06 ff45 fs5b fc1 sc0 ls0 ws0">R</div><div class="t m5 x84 h97 y3f07 ff45 fs5b fc1 sc0 ls0 ws0">e</div><div class="t m5 x84 h97 y3f08 ff45 fs5b fc1 sc0 ls0 ws0">g</div><div class="t m5 x8d h97 y3f09 ff45 fs5b fc1 sc0 ls0 ws0">50 ps</div><div class="t m5 x1f1 h97 y3f06 ff45 fs5b fc1 sc0 ls0 ws0">R</div><div class="t m5 x158 h97 y3f07 ff45 fs5b fc1 sc0 ls0 ws0">e</div><div class="t m5 x158 h97 y3f08 ff45 fs5b fc1 sc0 ls0 ws0">g</div><div class="t m5 xeb h97 y3f09 ff45 fs5b fc1 sc0 ls0 ws0">50 ps</div><div class="t m5 x232 h97 y3f06 ff45 fs5b fc1 sc0 ls0 ws0">R</div><div class="t m5 xbb h97 y3f07 ff45 fs5b fc1 sc0 ls0 ws0">e</div><div class="t m5 xbb h97 y3f08 ff45 fs5b fc1 sc0 ls0 ws0">g</div><div class="t m5 x1ed h97 y3f0a ff45 fs5b fc1 sc0 ls0 ws0">R</div><div class="t m5 x13b h97 y3f0b ff45 fs5b fc1 sc0 ls0 ws0">e</div><div class="t m5 x13b h97 y3f0c ff45 fs5b fc1 sc0 ls0 ws0">g</div><div class="t m5 x1d h34 y126b ffe fs16 fc6 sc0 ls0 ws0">Figure<span class="_"> </span>4.37<span class="_ _66"> </span><span class="fc1">Limitations<span class="_"> </span>of<span class="_"> </span>pipelining<span class="_ _13"> </span>due<span class="_"> </span>to<span class="_"> </span>overhead.<span class="_ _10"> </span><span class="ff6">As<span class="_ _13"> </span>the<span class="_ _10"> </span>combinational<span class="_ _10"> </span>logic<span class="_ _10"> </span>is</span></span></div><div class="t m5 x1d h34 y126c ff6 fs16 fc1 sc0 ls0 ws0">split<span class="_ _10"> </span>into<span class="_ _11"> </span>shorter<span class="_ _10"> </span>blocks,<span class="_ _10"> </span>the<span class="_ _11"> </span>delay<span class="_ _10"> </span>due<span class="_ _11"> </span>to<span class="_ _10"> </span>register<span class="_ _11"> </span>updating<span class="_ _10"> </span>becomes<span class="_ _10"> </span>a<span class="_ _11"> </span>limiting<span class="_ _10"> </span>factor<span class="_ _1"></span>.</div></div><div class="pi" data-data='{"ctm":[2.000000,0.000000,0.000000,2.000000,0.000000,0.000000]}'></div></div>
