<div id="pf1b5" class="pf w2 h11" data-page-no="1b5"><div class="pc pc1b5 w2 h11"><img class="bi x0 y0 w1 h1" alt="" src="csapp/bg1b5.png"/><div class="t m5 x14 h28 y9b ffe fs1e fc2 sc0 ls0 ws0">436<span class="_ _1b"> </span><span class="ff6 fs1f">Chapter<span class="_ _10"> </span>4<span class="_ _3d"> </span>Processor<span class="_ _10"> </span>Architecture</span></div><div class="t m5 x1d h31 y1398 ff7 fs21 fc2 sc0 ls0 ws0">Stage<span class="_ _11c"> </span>Computation<span class="_ _4c"> </span><span class="ffd fs1e">OPq<span class="_ _11"> </span></span><span class="ff6">rA<span class="ffd fs1e">,<span class="_ _11"> </span></span>rB<span class="_ _161"> </span><span class="ffd fs1e">mrmovq<span class="_ _11"> </span></span>D<span class="ffd fs1e">(</span>rB<span class="ffd fs1e">),<span class="_ _11"> </span></span>rA</span></div><div class="t m5 x1d h32 yc94 ff7 fs21 fc2 sc0 ls0 ws0">F<span class="_ _1"></span>etch<span class="_ _11c"> </span><span class="ff6">icode</span>,<span class="_"> </span><span class="ff6">ifun<span class="_ _63"> </span>icode<span class="_ _be"> </span></span>:<span class="_ _a"> </span><span class="ff6">ifun<span class="_ _22"> </span><span class="ff12">←<span class="_ _25"> </span></span>M</span></div><div class="t m5 x6c h33 y245a ff7 fs20 fc2 sc0 ls0 ws0">1</div><div class="t m5 x6d h32 y3c49 ff7 fs21 fc2 sc0 ls0 ws0">[<span class="ff6">PC</span>]<span class="_ _85"> </span><span class="ff6">icode<span class="_ _a"> </span></span>:<span class="_ _be"></span><span class="ff6">ifun<span class="_ _23"> </span><span class="ff12">←<span class="_ _25"> </span></span>M</span></div><div class="t m5 xbc h33 y245a ff7 fs20 fc2 sc0 ls0 ws0">1</div><div class="t m5 x210 h31 y3c49 ff7 fs21 fc2 sc0 ls0 ws0">[<span class="ff6">PC</span>]</div><div class="t m5 x15c h32 y3c4a ff6 fs21 fc2 sc0 ls0 ws0">rA<span class="ff7">,<span class="_"> </span></span>rB<span class="_ _c2"> </span>rA<span class="_ _6"> </span><span class="ff7">:<span class="_ _be"></span></span>rB<span class="_ _23"> </span><span class="ff12">←<span class="_ _25"> </span></span>M</div><div class="t m5 xbd h33 yc97 ff7 fs20 fc2 sc0 ls0 ws0">1</div><div class="t m5 x12e h32 y2479 ff7 fs21 fc2 sc0 ls0 ws0">[<span class="ff6">PC<span class="_ _13"> </span><span class="ff12">+<span class="_ _13"> </span></span></span>1]<span class="_ _72"> </span><span class="ff6">rA<span class="_ _6"> </span></span>:<span class="_ _be"></span><span class="ff6">rB<span class="_ _25"> </span><span class="ff12">←<span class="_ _23"> </span></span>M</span></div><div class="t m5 x230 h33 yc97 ff7 fs20 fc2 sc0 ls0 ws0">1</div><div class="t m5 x1e5 h32 y2479 ff7 fs21 fc2 sc0 ls0 ws0">[<span class="ff6">PC<span class="_ _13"> </span><span class="ff12">+<span class="_ _13"> </span></span></span>1]</div><div class="t m5 x15c h32 y3c4b ff6 fs21 fc2 sc0 ls0 ws0">valC<span class="_ _186"> </span>valC<span class="_ _23"> </span><span class="ff12">←<span class="_ _25"> </span></span>M</div><div class="t m5 x13f h33 yc9a ff7 fs20 fc2 sc0 ls0 ws0">8</div><div class="t m5 x71 h32 y2253 ff7 fs21 fc2 sc0 ls0 ws0">[<span class="ff6">PC<span class="_ _13"> </span><span class="ff12">+<span class="_ _13"> </span></span></span>2]</div><div class="t m5 x15c h32 y3c4c ff6 fs21 fc2 sc0 ls0 ws0">valP<span class="_ _1b1"> </span>valP<span class="_ _23"> </span><span class="ff12">←<span class="_ _25"> </span></span>PC<span class="_ _13"> </span><span class="ff12">+<span class="_ _13"> </span><span class="ff7">2<span class="_ _97"> </span></span></span>valP<span class="_ _25"> </span><span class="ff12">←<span class="_ _23"> </span></span>PC<span class="_ _13"> </span><span class="ff12">+<span class="_ _10"> </span><span class="ff7">10</span></span></div><div class="t m5 x1d h32 y3c4d ff7 fs21 fc2 sc0 ls0 ws0">Decode<span class="_ _6f"> </span><span class="ff6">valA</span>,<span class="_"> </span><span class="ff6">srcA<span class="_ _bd"> </span>valA<span class="_ _25"> </span><span class="ff12">←<span class="_ _25"> </span></span>R</span>[<span class="ff6">rA<span class="_ _2"></span></span>]</div><div class="t m5 x15c h32 y3c4e ff6 fs21 fc2 sc0 ls0 ws0">valB<span class="ff7">,<span class="_"> </span></span>srcB<span class="_ _d0"> </span>valB<span class="_ _23"> </span><span class="ff12">←<span class="_ _25"> </span></span>R<span class="ff7">[</span>rB<span class="ff7">]<span class="_ _43"> </span></span>valB<span class="_ _23"> </span><span class="ff12">←<span class="_ _25"> </span></span>R<span class="ff7">[</span>rB<span class="ff7">]</span></div><div class="t m5 x1d h32 y3c4f ff7 fs21 fc2 sc0 ls0 ws0">Execute<span class="_ _18c"> </span><span class="ff6">valE<span class="_ _169"> </span>valE<span class="_ _25"> </span><span class="ff12">←<span class="_ _23"> </span></span>valB<span class="_ _13"> </span>OP<span class="_ _13"> </span>valA<span class="_ _d3"> </span>valE<span class="_ _25"> </span><span class="ff12">←<span class="_ _23"> </span></span>valB<span class="_ _13"> </span><span class="ff12">+<span class="_ _13"> </span></span>valC</span></div><div class="t m5 x15c h31 y3c50 ff7 fs21 fc2 sc0 ls0 ws0">Cond.<span class="_"> </span>codes<span class="_ _45"> </span>Set<span class="_"> </span>CC</div><div class="t m5 x1d h32 y3c51 ff7 fs21 fc2 sc0 ls0 ws0">Memory<span class="_ _57"> </span>Read/write<span class="_ _39"> </span><span class="ff6">valM<span class="_ _22"> </span><span class="ff12">←<span class="_ _25"> </span></span>M</span></div><div class="t m5 x70 h33 y3aef ff7 fs20 fc2 sc0 ls0 ws0">8</div><div class="t m5 x61 h31 y3af0 ff7 fs21 fc2 sc0 ls0 ws0">[<span class="ff6">valE</span>]</div><div class="t m5 x1d h32 y3af1 ff7 fs21 fc2 sc0 ls0 ws0">Write<span class="_"> </span>back<span class="_ _4c"> </span>E<span class="_"> </span>port,<span class="_"> </span><span class="ff6">dstE<span class="_ _2e"> </span>R</span>[<span class="ff6">rB</span>]<span class="_ _22"> </span><span class="ff12">←<span class="_ _25"> </span><span class="ff6">valE</span></span></div><div class="t m5 x15c h32 y3af2 ff7 fs21 fc2 sc0 ls0 ws0">M<span class="_"> </span>port,<span class="_"> </span><span class="ff6">dstM<span class="_ _1b2"> </span>R</span>[<span class="ff6">rA<span class="_ _2"></span></span>]<span class="_ _22"> </span><span class="ff12">←<span class="_ _25"> </span><span class="ff6">valM</span></span></div><div class="t m5 x1d h32 y3af3 ff7 fs21 fc2 sc0 ls0 ws0">PC<span class="_"> </span>update<span class="_ _4f"> </span><span class="ff6">PC<span class="_ _9b"> </span>PC<span class="_ _25"> </span><span class="ff12">←<span class="_ _25"> </span></span>valP<span class="_ _da"> </span>PC<span class="_ _23"> </span><span class="ff12">←<span class="_ _25"> </span></span>valP</span></div><div class="t m5 x1d h2f y3c52 ffe fs16 fc6 sc0 ls0 ws0">Figure<span class="_ _16"> </span>4.24<span class="_ _66"> </span><span class="fc1">Identifying<span class="_ _16"> </span>the<span class="_ _11"> </span>different<span class="_ _16"> </span>computation<span class="_ _16"> </span>steps<span class="_ _11"> </span>in<span class="_ _16"> </span>the<span class="_ _16"> </span>sequential<span class="_ _11"> </span>imple-</span></div><div class="t m5 x1d h34 y3c53 ffe fs16 fc1 sc0 ls0 ws0">mentation.<span class="_ _11"> </span><span class="ff6">The<span class="_ _16"> </span>second<span class="_ _16"> </span>column<span class="_ _11"> </span>identiﬁes<span class="_ _16"> </span>the<span class="_ _11"> </span>value<span class="_ _16"> </span>being<span class="_ _11"> </span>computed<span class="_ _16"> </span>or<span class="_ _11"> </span>the<span class="_ _16"> </span>operation</span></div><div class="t m5 x1d h34 y3c54 ff6 fs16 fc1 sc0 ls0 ws0">being<span class="_ _13"> </span>performed<span class="_ _6"> </span>in<span class="_ _13"> </span>the<span class="_ _6"> </span>stages<span class="_ _13"> </span>of<span class="_ _6"> </span>SEQ.<span class="_ _13"> </span>The<span class="_ _6"> </span>computations<span class="_ _13"> </span>for<span class="_ _6"> </span>instructions</div><div class="t m5 x4e h3a y3c55 ffd fs19 fc1 sc0 ls0 ws0">OPq<span class="_ _13"> </span><span class="ff6 fs16">and<span class="_ _6"> </span></span>mrmovq</div><div class="t m5 x1d h34 y3c56 ff6 fs16 fc1 sc0 ls0 ws0">are<span class="_ _10"> </span>shown<span class="_ _11"> </span>as<span class="_ _10"> </span>examples<span class="_ _10"> </span>of<span class="_ _11"> </span>the<span class="_ _10"> </span>computations.</div><div class="t m5 x1d h26 y3c57 ff7 fs19 fc1 sc0 ls0 ws0">in<span class="_ _14"> </span>F<span class="_ _1"></span>igure<span class="_ _14"> </span>4.23.<span class="_ _14"> </span>Our<span class="_ _15"> </span>task<span class="_ _14"> </span>is<span class="_ _14"> </span>to<span class="_ _14"> </span>proceed<span class="_ _14"> </span>through<span class="_ _14"> </span>the<span class="_ _14"> </span>individual<span class="_ _14"> </span>stages<span class="_ _14"> </span>and<span class="_ _14"> </span>create</div><div class="t m5 x1d h26 y3c58 ff7 fs19 fc1 sc0 ls0 ws0">detailed<span class="_"> </span>designs<span class="_"> </span>for<span class="_"> </span>these<span class="_"> </span>blocks<span class="_ _1"></span>.</div><div class="t m5 x1d h41 y322c ffe fs29 fc1 sc0 ls0 ws0">4.3.3<span class="_ _48"> </span><span class="fs19">SEQ<span class="_"> </span>Timing</span></div><div class="t m5 x1d h26 y7fe ff7 fs19 fc1 sc0 ls0 ws0">In<span class="_"> </span>introducing<span class="_"> </span>the<span class="_"> </span>tables<span class="_"> </span>of<span class="_"> </span>Figures<span class="_"> </span>4.18<span class="_"> </span>through<span class="_"> </span>4.21,<span class="_"> </span>we<span class="_"> </span>stated<span class="_"> </span>that<span class="_"> </span>they<span class="_"> </span>should</div><div class="t m5 x1d h26 y7ff ff7 fs19 fc1 sc0 ls0 ws0">be<span class="_"> </span>read<span class="_ _11"> </span>as<span class="_ _11"> </span>if<span class="_ _11"> </span>they<span class="_ _11"> </span>were<span class="_ _11"> </span>written<span class="_"> </span>in<span class="_ _11"> </span>a<span class="_ _11"> </span>programming<span class="_ _11"> </span>notation,<span class="_ _11"> </span>with<span class="_ _11"> </span>the<span class="_ _11"> </span>assignments</div><div class="t m5 x1d h26 y800 ff7 fs19 fc1 sc0 ls0 ws0">performed<span class="_ _14"> </span>in<span class="_ _15"> </span>sequence<span class="_ _15"> </span>from<span class="_ _15"> </span>top<span class="_ _15"> </span>to<span class="_ _15"> </span>bottom.<span class="_ _14"> </span>On<span class="_ _15"> </span>the<span class="_ _15"> </span>other<span class="_ _15"> </span>hand,<span class="_ _21"> </span>the<span class="_ _15"> </span>hardware</div><div class="t m5 x1d h26 y801 ff7 fs19 fc1 sc0 ls0 ws0">structure<span class="_ _11"> </span>of<span class="_ _16"> </span>F<span class="_ _0"></span>igure<span class="_ _11"> </span>4.23<span class="_ _16"> </span>operates<span class="_ _11"> </span>in<span class="_ _16"> </span>a<span class="_ _16"> </span>fundamentally<span class="_ _11"> </span>different<span class="_ _16"> </span>way<span class="_ _7"></span>,<span class="_ _16"> </span>with<span class="_ _16"> </span>a<span class="_ _11"> </span>single</div><div class="t m5 x1d h26 y802 ff7 fs19 fc1 sc0 ls0 ws0">clock<span class="_ _13"> </span>transition<span class="_ _13"> </span>triggering<span class="_ _13"> </span>a<span class="_ _13"> </span>ﬂow<span class="_ _13"> </span>through<span class="_ _13"> </span>combinational<span class="_ _13"> </span>logic<span class="_ _13"> </span>to<span class="_"> </span>execute<span class="_ _13"> </span>an<span class="_ _13"> </span>entire</div><div class="t m5 x1d h26 y803 ff7 fs19 fc1 sc0 ls0 ws0">instruction.<span class="_ _14"> </span>Let<span class="_ _14"> </span>us<span class="_ _14"> </span>see<span class="_ _14"> </span>how<span class="_ _14"> </span>the<span class="_ _14"> </span>hardware<span class="_ _14"> </span>can<span class="_ _14"> </span>implement<span class="_ _14"> </span>the<span class="_ _14"> </span>behavior<span class="_ _14"> </span>listed<span class="_ _14"> </span>in</div><div class="t m5 x1d h26 y804 ff7 fs19 fc1 sc0 ls0 ws0">these<span class="_"> </span>tables<span class="_ _1"></span>.</div><div class="t m5 x29 h26 y805 ff7 fs19 fc1 sc0 ls0 ws0">Our<span class="_ _16"> </span>implementation<span class="_ _16"> </span>of<span class="_ _16"> </span>SEQ<span class="_ _11"> </span>consists<span class="_ _16"> </span>of<span class="_ _16"> </span>combinational<span class="_ _16"> </span>logic<span class="_ _16"> </span>and<span class="_ _16"> </span>two<span class="_ _16"> </span>forms</div><div class="t m5 x1d h26 y806 ff7 fs19 fc1 sc0 ls0 ws0">of<span class="_ _16"> </span>memory<span class="_ _16"> </span>devices:<span class="_ _14"> </span>clocked<span class="_ _16"> </span>registers<span class="_ _14"> </span>(the<span class="_ _16"> </span>program<span class="_ _16"> </span>counter<span class="_ _14"> </span>and<span class="_ _16"> </span>condition<span class="_ _14"> </span>code</div><div class="t m5 x1d h26 y807 ff7 fs19 fc1 sc0 ls0 ws0">register)<span class="_"> </span>and<span class="_ _11"> </span>random<span class="_ _11"> </span>access<span class="_ _11"> </span>memories<span class="_ _11"> </span>(the<span class="_ _11"> </span>register<span class="_ _11"> </span>ﬁle,<span class="_"> </span>the<span class="_ _11"> </span>instruction<span class="_ _11"> </span>memory<span class="_ _3"></span>,</div><div class="t m5 x1d h26 y808 ff7 fs19 fc1 sc0 ls0 ws0">and<span class="_ _21"> </span>the<span class="_ _21"> </span>data<span class="_ _f"> </span>memory).<span class="_ _21"> </span>Combinational<span class="_ _f"> </span>logic<span class="_ _21"> </span>does<span class="_ _21"> </span>not<span class="_ _f"> </span>require<span class="_ _21"> </span>any<span class="_ _f"> </span>sequencing</div><div class="t m5 x1d h26 y809 ff7 fs19 fc1 sc0 ls0 ws0">or<span class="_ _f"> </span>control—values<span class="_ _f"> </span>propagate<span class="_ _f"> </span>through<span class="_ _f"> </span>a<span class="_ _f"> </span>network<span class="_ _f"> </span>of<span class="_ _e"> </span>logic<span class="_ _21"> </span>gates<span class="_ _f"> </span>whenever<span class="_ _f"> </span>the</div><div class="t m5 x1d h26 y80a ff7 fs19 fc1 sc0 ls0 ws0">inputs<span class="_ _13"> </span>change.<span class="_ _13"> </span>As<span class="_ _13"> </span>we<span class="_"> </span>have<span class="_ _13"> </span>described,<span class="_ _13"> </span>we<span class="_"> </span>also<span class="_ _13"> </span>assume<span class="_ _13"> </span>that<span class="_"> </span>reading<span class="_ _13"> </span>from<span class="_ _13"> </span>a<span class="_"> </span>random</div><div class="t m5 x1d h26 y80b ff7 fs19 fc1 sc0 ls0 ws0">access<span class="_ _15"> </span>memory<span class="_ _15"> </span>operates<span class="_ _21"> </span>much<span class="_ _15"> </span>like<span class="_ _21"> </span>combinational<span class="_ _15"> </span>logic,<span class="_ _21"> </span>with<span class="_ _21"> </span>the<span class="_ _15"> </span>output<span class="_ _21"> </span>word</div><div class="t m5 x1d h26 y80c ff7 fs19 fc1 sc0 ls0 ws0">generated<span class="_ _13"> </span>based<span class="_ _13"> </span>on<span class="_"> </span>the<span class="_ _13"> </span>address<span class="_ _13"> </span>input.<span class="_ _13"> </span>T<span class="_ _0"></span>his<span class="_ _13"> </span>is<span class="_ _13"> </span>a<span class="_"> </span>reasonable<span class="_ _13"> </span>assumption<span class="_ _13"> </span>for<span class="_ _13"> </span>smaller</div></div><div class="pi" data-data='{"ctm":[2.000000,0.000000,0.000000,2.000000,0.000000,0.000000]}'></div></div>
