<div id="pf2bb" class="pf w2 h11" data-page-no="2bb"><div class="pc pc2bb w2 h11"><img class="bi x0 y0 w1 h1" alt="" src="csapp/bg2bb.png"/><div class="t m5 x14 h28 y9b ffe fs1e fc2 sc0 ls0 ws0">698<span class="_ _1b"> </span><span class="ff6 fs1f">Chapter<span class="_ _10"> </span>6<span class="_ _3d"> </span>The<span class="_ _10"> </span>Memory<span class="_ _10"> </span>Hierarchy</span></div><div class="t m5 x1d h28 ye7 ffe fs1e fc6 sc0 ls0 ws0">Solution<span class="_"> </span>to<span class="_"> </span>Problem<span class="_"> </span>6.5<span class="_ _e"> </span><span class="fs16">(page<span class="_"> </span>637)</span></div><div class="t m5 x1d h26 y1d16 ff7 fs19 fc1 sc0 ls0 ws0">T<span class="_ _1"></span>his<span class="_"> </span>is<span class="_ _13"> </span>a<span class="_ _13"> </span>simple<span class="_ _13"> </span>problem<span class="_"> </span>that<span class="_ _13"> </span>will<span class="_ _13"> </span>give<span class="_"> </span>you<span class="_ _13"> </span>some<span class="_ _13"> </span>interesting<span class="_ _13"> </span>insights<span class="_"> </span>into<span class="_ _13"> </span>the<span class="_ _13"> </span>feasi-</div><div class="t m5 x1d h46 y1f6c ff7 fs19 fc1 sc0 ls0 ws0">bility<span class="_"> </span>of<span class="_ _11"> </span>SSDs<span class="_ _1"></span>.<span class="_ _11"> </span>Recall<span class="_"> </span>that<span class="_ _11"> </span>for<span class="_ _11"> </span>disks<span class="_ _1"></span>,<span class="_"> </span>1<span class="_ _13"> </span>PB<span class="_"> </span><span class="ff12">=<span class="_ _13"></span></span>10</div><div class="t m5 x170 h3c y1f6f ff7 fs25 fc1 sc0 ls0 ws0">9</div><div class="t m5 x94 h26 y1f6e ff7 fs19 fc1 sc0 ls0 ws0">MB.<span class="_"> </span>Then<span class="_"> </span>the<span class="_"> </span>following<span class="_ _11"> </span>straight-</div><div class="t m5 x1d h26 y1f70 ff7 fs19 fc1 sc0 ls0 ws0">forward<span class="_"> </span>translation<span class="_"> </span>of<span class="_"> </span>units<span class="_"> </span>yields<span class="_"> </span>the<span class="_"> </span>following<span class="_"> </span>predicted<span class="_"> </span>times<span class="_"> </span>for<span class="_"> </span>each<span class="_"> </span>case:</div><div class="t m5 x124 h26 y5d0a ff7 fs19 fc1 sc0 ls0 ws0">A.<span class="_ _1f"> </span>W<span class="_ _3"></span>orst-case<span class="_"> </span>sequential<span class="_"> </span>writes<span class="_"> </span>(520<span class="_"> </span>MB/s):</div><div class="t m5 xb3 h26 y5d0b ff11 fs19 fc1 sc0 ls0 ws0">(<span class="ff7">10</span></div><div class="t m5 x10e h3c y5d0c ff7 fs25 fc1 sc0 ls0 ws0">9</div><div class="t m5 x189 h46 y5d0d ff12 fs19 fc1 sc0 ls0 ws0">×<span class="_ _13"> </span><span class="ff7">128<span class="ff11">)<span class="_ _10"> </span></span></span>×<span class="_ _13"></span><span class="ff11">(<span class="ff7">1<span class="_ _0"></span><span class="ff11">/<span class="ff7">520</span>)<span class="_ _13"> </span><span class="ff12">×<span class="_ _10"> </span></span>(<span class="ff7">1<span class="_ _1"></span><span class="ff11">/(<span class="ff7">86</span>,<span class="ff7">400<span class="_"> </span><span class="ff12">×<span class="_ _13"></span></span>365</span>))<span class="_ _13"> </span><span class="ff12">≈<span class="_ _10"> </span><span class="ff7">7<span class="_ _13"> </span>years</span></span></span></span></span></span></span></div><div class="t m5 x126 h26 y5d0e ff7 fs19 fc1 sc0 ls0 ws0">B<span class="_ _3"></span>.<span class="_ _1d"> </span>W<span class="_ _1"></span>orst-case<span class="_"> </span>random<span class="_"> </span>writes<span class="_"> </span>(205<span class="_"> </span>MB/s):</div><div class="t m5 x137 h26 y5d0f ff11 fs19 fc1 sc0 ls0 ws0">(<span class="ff7">10</span></div><div class="t m5 xb2 h3c y5d10 ff7 fs25 fc1 sc0 ls0 ws0">9</div><div class="t m5 x22 h46 y5d11 ff12 fs19 fc1 sc0 ls0 ws0">×<span class="_ _13"> </span><span class="ff7">128<span class="ff11">)<span class="_ _10"> </span></span></span>×<span class="_ _13"></span><span class="ff11">(<span class="ff7">1<span class="_ _0"></span><span class="ff11">/<span class="ff7">205</span>)<span class="_ _13"> </span><span class="ff12">×<span class="_ _13"> </span></span>(<span class="ff7">1<span class="_ _0"></span><span class="ff11">/(<span class="ff7">86</span>,<span class="ff7">400<span class="_"> </span><span class="ff12">×<span class="_ _13"></span></span>365</span>))<span class="_ _13"> </span><span class="ff12">≈<span class="_ _13"> </span><span class="ff7">19<span class="_"> </span>years</span></span></span></span></span></span></span></div><div class="t m5 x126 h26 y5d12 ff7 fs19 fc1 sc0 ls0 ws0">C.<span class="_ _25"> </span>A<span class="_ _3"></span>verage<span class="_"> </span>case<span class="_"> </span>(50<span class="_"> </span>GB/day):</div><div class="t m5 xd h26 y5d13 ff11 fs19 fc1 sc0 ls0 ws0">(<span class="ff7">10</span></div><div class="t m5 x1b2 h3c y5d14 ff7 fs25 fc1 sc0 ls0 ws0">9</div><div class="t m5 x24c h46 y5d15 ff12 fs19 fc1 sc0 ls0 ws0">×<span class="_ _13"> </span><span class="ff7">128<span class="ff11">)<span class="_ _10"> </span></span></span>×<span class="_ _13"></span><span class="ff11">(<span class="ff7">1<span class="_ _0"></span><span class="ff11">/<span class="ff7">50</span>,<span class="ff7">000</span>)<span class="_ _10"> </span><span class="ff12">×<span class="_ _13"></span></span>(<span class="ff7">1<span class="_ _1"></span><span class="ff11">/<span class="ff7">365</span>)<span class="_ _13"> </span><span class="ff12">≈<span class="_ _10"> </span><span class="ff7">6</span></span>,<span class="ff7">912<span class="_ _13"> </span>years</span></span></span></span></span></span></div><div class="t m5 x1d h26 y5d16 ff7 fs19 fc1 sc0 ls0 ws0">So<span class="_"> </span>even<span class="_"> </span>if<span class="_ _13"> </span>the<span class="_"> </span>SSD<span class="_"> </span>operates<span class="_"> </span>continuously<span class="_ _7"></span>,<span class="_"> </span>it<span class="_"> </span>should<span class="_"> </span>last<span class="_"> </span>for<span class="_ _13"> </span>at<span class="_"> </span>least<span class="_"> </span>7<span class="_"> </span>years<span class="_ _3"></span>,<span class="_"> </span>which</div><div class="t m5 x1d h26 y5d17 ff7 fs19 fc1 sc0 ls0 ws0">is<span class="_"> </span>longer<span class="_"> </span>than<span class="_"> </span>the<span class="_"> </span>expected<span class="_"> </span>lifetime<span class="_"> </span>of<span class="_"> </span>most<span class="_"> </span>computers<span class="_ _1"></span>.</div><div class="t m5 x1d h28 y5d18 ffe fs1e fc6 sc0 ls0 ws0">Solution<span class="_"> </span>to<span class="_"> </span>Problem<span class="_"> </span>6.6<span class="_ _e"> </span><span class="fs16">(page<span class="_"> </span>640)</span></div><div class="t m5 x1d h26 y5d19 ff7 fs19 fc1 sc0 ls0 ws0">In<span class="_ _15"> </span>the<span class="_ _21"> </span>10-year<span class="_ _15"> </span>period<span class="_ _21"> </span>between<span class="_ _21"> </span>2005<span class="_ _15"> </span>and<span class="_ _21"> </span>2015,<span class="_ _f"> </span>the<span class="_ _15"> </span>unit<span class="_ _21"> </span>price<span class="_ _21"> </span>of<span class="_ _15"> </span>rotating<span class="_ _21"> </span>disks</div><div class="t m5 x1d h26 y5d1a ff7 fs19 fc1 sc0 ls0 ws0">dropped<span class="_"> </span>by<span class="_ _13"> </span>a<span class="_"> </span>factor<span class="_ _13"> </span>of<span class="_"> </span>166,<span class="_ _13"> </span>which<span class="_"> </span>means<span class="_"> </span>the<span class="_ _13"> </span>price<span class="_"> </span>is<span class="_ _13"> </span>dropping<span class="_"> </span>by<span class="_ _13"> </span>roughly<span class="_"> </span>a<span class="_"> </span>factor</div><div class="t m5 x1d h26 y5d1b ff7 fs19 fc1 sc0 ls0 ws0">of<span class="_"> </span>2<span class="_"> </span>every<span class="_"> </span>18<span class="_"> </span>months<span class="_"> </span>or<span class="_"> </span>so.<span class="_"> </span>Assuming<span class="_"> </span>this<span class="_"> </span>trend<span class="_"> </span>continues<span class="_ _1"></span>,<span class="_"> </span>a<span class="_"> </span>petabyte<span class="_"> </span>of<span class="_"> </span>storage,</div><div class="t m5 x1d h26 y5d1c ff7 fs19 fc1 sc0 ls0 ws0">which<span class="_"> </span>costs<span class="_ _13"> </span>about<span class="_"> </span>$30,000<span class="_ _13"> </span>in<span class="_"> </span>2015,<span class="_ _13"> </span>will<span class="_"> </span>drop<span class="_ _13"> </span>below<span class="_"> </span>$200<span class="_"> </span>after<span class="_ _13"> </span>about<span class="_"> </span>eight<span class="_ _13"> </span>of<span class="_"> </span>these</div><div class="t m5 x1d h26 y5d1d ff7 fs19 fc1 sc0 ls0 ws0">factor<span class="_ _1"></span>-of-2<span class="_ _13"> </span>reductions<span class="_ _3"></span>.<span class="_ _13"> </span>Since<span class="_ _13"> </span>these<span class="_ _6"> </span>are<span class="_ _13"> </span>occurring<span class="_ _13"> </span>every<span class="_ _6"> </span>18<span class="_ _13"> </span>months<span class="_ _3"></span>,<span class="_ _13"> </span>we<span class="_ _13"> </span>might<span class="_ _13"> </span>expect</div><div class="t m5 x1d h26 y5d1e ff7 fs19 fc1 sc0 ls0 ws0">a<span class="_"> </span>petabyte<span class="_"> </span>of<span class="_"> </span>storage<span class="_"> </span>to<span class="_"> </span>be<span class="_"> </span>available<span class="_"> </span>for<span class="_"> </span>$200<span class="_"> </span>around<span class="_"> </span>the<span class="_"> </span>year<span class="_"> </span>2027.</div><div class="t m5 x1d h28 y5d1f ffe fs1e fc6 sc0 ls0 ws0">Solution<span class="_"> </span>to<span class="_"> </span>Problem<span class="_"> </span>6.7<span class="_ _e"> </span><span class="fs16">(page<span class="_"> </span>644)</span></div><div class="t m5 x1d h26 y5d20 ff7 fs19 fc1 sc0 ls0 ws0">T<span class="_ _7"></span>o<span class="_ _14"> </span>create<span class="_ _14"> </span>a<span class="_ _15"> </span>stride-1<span class="_ _14"> </span>reference<span class="_ _14"> </span>pattern,<span class="_ _15"> </span>the<span class="_ _14"> </span>loops<span class="_ _14"> </span>must<span class="_ _14"> </span>be<span class="_ _14"> </span>permuted<span class="_ _14"> </span>so<span class="_ _14"> </span>that<span class="_ _14"> </span>the</div><div class="t m5 x1d h26 y5d21 ff7 fs19 fc1 sc0 ls0 ws0">rightmost<span class="_"> </span>indices<span class="_"> </span>change<span class="_"> </span>most<span class="_"> </span>rapidly<span class="_ _3"></span>.</div><div class="t m5 x1f h2e y5d22 ff6 fs20 fc6 sc0 ls0 ws0">1</div><div class="t m5 x4f h2d y5d23 ffd fs1e fc2 sc0 ls0 ws0">int<span class="_ _e"> </span>productarray3d(int<span class="_ _1f"> </span>a[N][N][N])</div><div class="t m5 x1f h2d y5d24 ff6 fs20 fc6 sc0 ls0 ws0">2<span class="_ _1c"> </span><span class="ffd fs1e fc2">{</span></div><div class="t m5 x1f h2d y5d25 ff6 fs20 fc6 sc0 ls0 ws0">3<span class="_ _20"> </span><span class="ffd fs1e fc2">int<span class="_ _e"> </span>i,<span class="_ _1f"> </span>j,<span class="_ _1f"> </span>k,<span class="_ _e"> </span>product<span class="_ _1f"> </span>=<span class="_ _e"> </span>1;</span></div><div class="t m5 x1f h2e y5d26 ff6 fs20 fc6 sc0 ls0 ws0">4</div><div class="t m5 x1f h2e y5d27 ff6 fs20 fc6 sc0 ls0 ws0">5</div><div class="t m5 x33 h2d y5d28 ffd fs1e fc2 sc0 ls0 ws0">for<span class="_ _e"> </span>(j<span class="_ _1f"> </span>=<span class="_ _1f"> </span>N-1;<span class="_ _e"> </span>j<span class="_ _1f"> </span>&gt;=<span class="_ _e"> </span>0;<span class="_ _1f"> </span>j--)<span class="_ _1f"> </span>{</div><div class="t m5 x1f h2d y5d29 ff6 fs20 fc6 sc0 ls0 ws0">6<span class="_ _70"> </span><span class="ffd fs1e fc2">for<span class="_ _e"> </span>(k<span class="_ _1f"> </span>=<span class="_ _1f"> </span>N-1;<span class="_ _e"> </span>k<span class="_ _1f"> </span>&gt;=<span class="_ _e"> </span>0;<span class="_ _1f"> </span>k--)<span class="_ _1f"> </span>{</span></div><div class="t m5 x1f h2d y5d2a ff6 fs20 fc6 sc0 ls0 ws0">7<span class="_ _d1"> </span><span class="ffd fs1e fc2">for<span class="_ _1f"> </span>(i<span class="_ _e"> </span>=<span class="_ _1f"> </span>N-1;<span class="_ _e"> </span>i<span class="_ _1f"> </span>&gt;=<span class="_ _1f"> </span>0;<span class="_ _e"> </span>i--)<span class="_ _1f"> </span>{</span></div><div class="t m5 x1f h2d y5d2b ff6 fs20 fc6 sc0 ls0 ws0">8<span class="_ _143"> </span><span class="ffd fs1e fc2">product<span class="_ _e"> </span>*=<span class="_ _1f"> </span>a[j][k][i];</span></div><div class="t m5 x1f h2e y5d2c ff6 fs20 fc6 sc0 ls0 ws0">9</div><div class="t m5 xb2 h2d y5d2d ffd fs1e fc2 sc0 ls0 ws0">}</div><div class="t m5 x1b0 h2d y5d2e ff6 fs20 fc6 sc0 ls0 ws0">10<span class="_ _70"> </span><span class="ffd fs1e fc2">}</span></div><div class="t m5 x1b0 h2e y5d2f ff6 fs20 fc6 sc0 ls0 ws0">11</div><div class="t m5 x33 h2d y5d30 ffd fs1e fc2 sc0 ls0 ws0">}</div><div class="t m5 x1b0 h2d y5d31 ff6 fs20 fc6 sc0 ls0 ws0">12<span class="_ _20"> </span><span class="ffd fs1e fc2">return<span class="_ _e"> </span>product;</span></div><div class="t m5 x1b0 h2d y5d32 ff6 fs20 fc6 sc0 ls0 ws0">13<span class="_ _1c"> </span><span class="ffd fs1e fc2">}</span></div><div class="t m5 x1d h26 y77e ff7 fs19 fc2 sc0 ls0 ws0">T<span class="_ _1"></span>his<span class="_ _15"> </span>is<span class="_ _15"> </span>an<span class="_ _15"> </span>important<span class="_ _15"> </span>idea.<span class="_ _15"> </span>Make<span class="_ _15"> </span>sure<span class="_ _15"> </span>you<span class="_ _15"> </span>understand<span class="_ _15"> </span>why<span class="_ _14"> </span>this<span class="_ _15"> </span>particular<span class="_ _15"> </span>loop</div><div class="t m5 x1d h26 y77f ff7 fs19 fc2 sc0 ls0 ws0">permutation<span class="_"> </span>results<span class="_"> </span>in<span class="_"> </span>a<span class="_"> </span>stride-1<span class="_"> </span>access<span class="_"> </span>pattern.</div></div><div class="pi" data-data='{"ctm":[2.000000,0.000000,0.000000,2.000000,0.000000,0.000000]}'></div></div>
