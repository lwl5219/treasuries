<div id="pf190" class="pf w2 h11" data-page-no="190"><div class="pc pc190 w2 h11"><img class="bi x0 y0 w1 h1" alt="" src="csapp/bg190.png"/><div class="t m5 xfc h28 y9b ff6 fs1f fc2 sc0 ls0 ws0">Section<span class="_ _10"> </span>4.1<span class="_ _60"> </span>The<span class="_ _10"> </span>Y86-64<span class="_ _10"> </span>Instruction<span class="_ _10"> </span>Set<span class="_ _10"> </span>Architecture<span class="_ _1b"> </span><span class="ffe fs1e">399</span></div><div class="t m5 x34 h2a y257 fff fs1c fc2 sc0 ls0 ws0">Aside<span class="_ _1b"> </span><span class="ff6 fs19">The<span class="_ _11"> </span>RISC<span class="_ _11"> </span>versus<span class="_ _11"> </span>CISC<span class="_ _16"> </span>controversy</span></div><div class="t m5 x34 h2b y258 ff7 fs1e fc2 sc0 ls0 ws0">T<span class="_ _1"></span>hrough<span class="_ _13"> </span>the<span class="_ _6"> </span>1980s<span class="_ _0"></span>,<span class="_ _13"> </span>battles<span class="_ _6"> </span>raged<span class="_ _13"> </span>in<span class="_ _6"> </span>the<span class="_ _13"> </span>computer<span class="_ _13"> </span>architecture<span class="_ _6"> </span>community<span class="_ _13"> </span>regarding<span class="_ _6"> </span>the<span class="_ _13"> </span>merits<span class="_ _6"> </span>of<span class="_ _13"> </span>RISC</div><div class="t m5 x34 h2b y259 ff7 fs1e fc2 sc0 ls0 ws0">versus<span class="_ _10"> </span>CISC<span class="_ _11"> </span>instruction<span class="_ _11"> </span>sets<span class="_ _1"></span>.<span class="_ _11"> </span>Proponents<span class="_ _11"> </span>of<span class="_ _11"> </span>RISC<span class="_ _10"> </span>claimed<span class="_ _11"> </span>they<span class="_ _11"> </span>could<span class="_ _11"> </span>get<span class="_ _11"> </span>more<span class="_ _10"> </span>computing<span class="_ _11"> </span>power<span class="_ _11"> </span>for</div><div class="t m5 x34 h2b y25a ff7 fs1e fc2 sc0 ls0 ws0">a<span class="_ _16"> </span>given<span class="_ _11"> </span>amount<span class="_ _16"> </span>of<span class="_ _16"> </span>hardware<span class="_ _16"> </span>through<span class="_ _11"> </span>a<span class="_ _16"> </span>combination<span class="_ _16"> </span>of<span class="_ _16"> </span>streamlined<span class="_ _11"> </span>instruction<span class="_ _16"> </span>set<span class="_ _16"> </span>design,<span class="_ _16"> </span>advanced</div><div class="t m5 x34 h2b y4e2 ff7 fs1e fc2 sc0 ls0 ws0">compiler<span class="_ _13"> </span>technology<span class="_ _3"></span>,<span class="_"> </span>and<span class="_ _13"> </span>pipelined<span class="_ _13"> </span>processor<span class="_ _13"> </span>implementation.<span class="_ _13"> </span>CISC<span class="_ _13"> </span>proponents<span class="_ _13"> </span>countered<span class="_ _13"> </span>that<span class="_ _13"> </span>fewer</div><div class="t m5 x34 h2b y4e3 ff7 fs1e fc2 sc0 ls0 ws0">CISC<span class="_"> </span>instructions<span class="_ _11"> </span>were<span class="_"> </span>required<span class="_ _11"> </span>to<span class="_ _10"> </span>perform<span class="_ _11"> </span>a<span class="_"> </span>given<span class="_ _11"> </span>task,<span class="_ _10"> </span>and<span class="_ _11"> </span>so<span class="_ _10"> </span>their<span class="_ _11"> </span>machines<span class="_"> </span>could<span class="_ _11"> </span>achieve<span class="_"> </span>higher</div><div class="t m5 x34 h2b y4e4 ff7 fs1e fc2 sc0 ls0 ws0">overall<span class="_"> </span>performance<span class="_ _1"></span>.</div><div class="t m5 x35 h2b y945 ff7 fs1e fc2 sc0 ls0 ws0">Major<span class="_ _11"> </span>companies<span class="_ _11"> </span>introduced<span class="_ _11"> </span>RISC<span class="_ _11"> </span>processor<span class="_ _11"> </span>lines<span class="_ _0"></span>,<span class="_ _11"> </span>including<span class="_ _11"> </span>Sun<span class="_ _16"> </span>Microsystems<span class="_ _10"> </span>(SP<span class="_ _3"></span>ARC),<span class="_ _16"> </span>IBM</div><div class="t m5 x34 h2b y946 ff7 fs1e fc2 sc0 ls0 ws0">and<span class="_ _16"> </span>Motorola<span class="_ _16"> </span>(P<span class="_ _1"></span>owerPC),<span class="_ _16"> </span>and<span class="_ _16"> </span>Digital<span class="_ _16"> </span>Equipment<span class="_ _16"> </span>Corporation<span class="_ _16"> </span>(Alpha).<span class="_ _16"> </span>A<span class="_ _16"> </span>British<span class="_ _16"> </span>company<span class="_ _3"></span>,<span class="_ _16"> </span>Acorn</div><div class="t m5 x34 h2b y947 ff7 fs1e fc2 sc0 ls0 ws0">Computers<span class="_ _21"> </span>Ltd.,<span class="_ _e"> </span>developed<span class="_ _21"> </span>its<span class="_ _f"> </span>own<span class="_ _21"> </span>architecture,<span class="_ _f"> </span>ARM<span class="_ _f"> </span>(originally<span class="_ _f"> </span>an<span class="_ _21"> </span>acronym<span class="_ _f"> </span>for<span class="_ _21"> </span>“<span class="_ _3"></span>Acorn<span class="_ _21"> </span>RISC</div><div class="t m5 x34 h2b y948 ff7 fs1e fc2 sc0 ls0 ws0">machine”),<span class="_"> </span>which<span class="_"> </span>has<span class="_"> </span>become<span class="_"> </span>widely<span class="_"> </span>used<span class="_"> </span>in<span class="_"> </span>embedded<span class="_"> </span>applications<span class="_ _1"></span>,<span class="_"> </span>such<span class="_"> </span>as<span class="_"> </span>cell<span class="_"> </span>phones<span class="_ _1"></span>.</div><div class="t m5 x35 h2b y949 ff7 fs1e fc2 sc0 ls0 ws0">In<span class="_"> </span>the<span class="_ _11"> </span>early<span class="_ _11"> </span>1990s<span class="_ _1"></span>,<span class="_ _10"> </span>the<span class="_ _11"> </span>debate<span class="_ _11"> </span>diminished<span class="_"> </span>as<span class="_ _11"> </span>it<span class="_ _10"> </span>became<span class="_ _11"> </span>clear<span class="_ _11"> </span>that<span class="_"> </span>neither<span class="_ _11"> </span>RISC<span class="_ _10"> </span>nor<span class="_ _11"> </span>CISC<span class="_ _11"> </span>in<span class="_"> </span>their</div><div class="t m5 x34 h2b y94a ff7 fs1e fc2 sc0 ls0 ws0">purest<span class="_ _13"> </span>forms<span class="_ _13"> </span>were<span class="_ _6"> </span>better<span class="_ _13"> </span>than<span class="_ _13"> </span>designs<span class="_ _13"> </span>that<span class="_ _6"> </span>incorporated<span class="_ _13"> </span>the<span class="_ _13"> </span>best<span class="_ _13"> </span>ideas<span class="_ _6"> </span>of<span class="_ _13"> </span>both.<span class="_ _13"> </span>RISC<span class="_ _13"> </span>machines<span class="_ _6"> </span>evolved</div><div class="t m5 x34 h2b y94b ff7 fs1e fc2 sc0 ls0 ws0">and<span class="_ _15"> </span>introduced<span class="_ _14"> </span>more<span class="_ _15"> </span>instructions<span class="_ _0"></span>,<span class="_ _21"> </span>many<span class="_ _15"> </span>of<span class="_ _15"> </span>which<span class="_ _14"> </span>take<span class="_ _15"> </span>multiple<span class="_ _15"> </span>cycles<span class="_ _15"> </span>to<span class="_ _14"> </span>execute.<span class="_ _14"> </span>RISC<span class="_ _15"> </span>machines</div><div class="t m5 x34 h2b y94c ff7 fs1e fc2 sc0 ls0 ws0">today<span class="_ _11"> </span>have<span class="_ _16"> </span>hundreds<span class="_ _11"> </span>of<span class="_ _11"> </span>instructions<span class="_ _16"> </span>in<span class="_ _11"> </span>their<span class="_ _16"> </span>repertoire<span class="_ _1"></span>,<span class="_ _16"> </span>hardly<span class="_ _11"> </span>ﬁtting<span class="_ _16"> </span>the<span class="_ _11"> </span>name<span class="_ _16"> </span>“reduced<span class="_ _11"> </span>instruction</div><div class="t m5 x34 h2b y94d ff7 fs1e fc2 sc0 ls0 ws0">set<span class="_"> </span>machine.<span class="_ _3"></span>”<span class="_ _11"> </span>T<span class="_ _1"></span>he<span class="_ _11"> </span>idea<span class="_ _10"> </span>of<span class="_ _11"> </span>exposing<span class="_ _10"> </span>implementation<span class="_ _11"> </span>artifacts<span class="_"> </span>to<span class="_ _11"> </span>machine-level<span class="_ _10"> </span>programs<span class="_ _11"> </span>proved<span class="_ _10"> </span>to<span class="_ _11"> </span>be</div><div class="t m5 x34 h2b y94e ff7 fs1e fc2 sc0 ls0 ws0">shortsighted.<span class="_ _14"> </span>As<span class="_ _14"> </span>new<span class="_ _14"> </span>processor<span class="_ _14"> </span>models<span class="_ _14"> </span>were<span class="_ _15"> </span>developed<span class="_ _14"> </span>using<span class="_ _14"> </span>more<span class="_ _14"> </span>advanced<span class="_ _14"> </span>hardware<span class="_ _14"> </span>structures<span class="_ _0"></span>,</div><div class="t m5 x34 h2b y377f ff7 fs1e fc2 sc0 ls0 ws0">many<span class="_"> </span>of<span class="_ _11"> </span>these<span class="_"> </span>artifacts<span class="_ _11"> </span>became<span class="_ _10"> </span>irrelevant,<span class="_ _11"> </span>but<span class="_ _10"> </span>they<span class="_ _11"> </span>still<span class="_"> </span>remained<span class="_ _11"> </span>part<span class="_ _10"> </span>of<span class="_ _11"> </span>the<span class="_"> </span>instruction<span class="_ _11"> </span>set.<span class="_"> </span>Still,<span class="_ _11"> </span>the</div><div class="t m5 x34 h2b y3780 ff7 fs1e fc2 sc0 ls0 ws0">core<span class="_"> </span>of<span class="_"> </span>RISC<span class="_"> </span>design<span class="_"> </span>is<span class="_"> </span>an<span class="_"> </span>instruction<span class="_"> </span>set<span class="_"> </span>that<span class="_"> </span>is<span class="_"> </span>well<span class="_"> </span>suited<span class="_"> </span>to<span class="_"> </span>execution<span class="_"> </span>on<span class="_"> </span>a<span class="_"> </span>pipelined<span class="_"> </span>machine<span class="_ _1"></span>.</div><div class="t m5 x35 h2b y3781 ff7 fs1e fc2 sc0 ls0 ws0">More<span class="_"> </span>recent<span class="_ _10"> </span>CISC<span class="_ _11"> </span>machines<span class="_"> </span>also<span class="_ _10"> </span>take<span class="_ _11"> </span>advantage<span class="_"> </span>of<span class="_ _10"> </span>high-performance<span class="_ _11"> </span>pipeline<span class="_"> </span>structures<span class="_ _1"></span>.<span class="_ _11"> </span>As<span class="_"> </span>we</div><div class="t m5 x34 h2b y3782 ff7 fs1e fc2 sc0 ls0 ws0">will<span class="_ _14"> </span>discuss<span class="_ _15"> </span>in<span class="_ _14"> </span>Section<span class="_ _15"> </span>5.7,<span class="_ _15"> </span>they<span class="_ _15"> </span>fetch<span class="_ _14"> </span>the<span class="_ _15"> </span>CISC<span class="_ _15"> </span>instructions<span class="_ _14"> </span>and<span class="_ _15"> </span>dynamically<span class="_ _14"> </span>translate<span class="_ _15"> </span>them<span class="_ _14"> </span>into<span class="_ _15"> </span>a</div><div class="t m5 x34 h2b y3783 ff7 fs1e fc2 sc0 ls0 ws0">sequence<span class="_"> </span>of<span class="_ _13"> </span>simpler<span class="_ _0"></span>,<span class="_"> </span>RISC-like<span class="_ _13"> </span>operations<span class="_ _1"></span>.<span class="_ _13"> </span>F<span class="_ _1"></span>or<span class="_"> </span>example<span class="_ _1"></span>,<span class="_"> </span>an<span class="_ _13"> </span>instruction<span class="_"> </span>that<span class="_ _13"> </span>adds<span class="_ _13"> </span>a<span class="_"> </span>register<span class="_ _13"> </span>to<span class="_ _13"> </span>memory</div><div class="t m5 x34 h2b y3784 ff7 fs1e fc2 sc0 ls0 ws0">is<span class="_ _13"> </span>translated<span class="_ _13"> </span>into<span class="_ _13"> </span>three<span class="_ _13"> </span>operations:<span class="_ _6"> </span>one<span class="_"> </span>to<span class="_ _6"> </span>read<span class="_"> </span>the<span class="_ _13"> </span>original<span class="_ _6"> </span>memory<span class="_"> </span>value<span class="_ _1"></span>,<span class="_ _13"> </span>one<span class="_ _13"> </span>to<span class="_ _13"> </span>perform<span class="_ _13"> </span>the<span class="_ _13"> </span>addition,</div><div class="t m5 x34 h2b y3785 ff7 fs1e fc2 sc0 ls0 ws0">and<span class="_ _13"> </span>a<span class="_ _13"> </span>third<span class="_ _13"> </span>to<span class="_ _13"> </span>write<span class="_ _13"> </span>the<span class="_"> </span>sum<span class="_ _13"> </span>to<span class="_ _13"> </span>memory<span class="_ _7"></span>.<span class="_"> </span>Since<span class="_ _13"> </span>the<span class="_ _13"> </span>dynamic<span class="_ _13"> </span>translation<span class="_ _13"> </span>can<span class="_ _13"> </span>generally<span class="_ _13"> </span>be<span class="_ _13"> </span>performed<span class="_ _13"> </span>well</div><div class="t m5 x34 h2b y3786 ff7 fs1e fc2 sc0 ls0 ws0">in<span class="_"> </span>advance<span class="_"> </span>of<span class="_"> </span>the<span class="_"> </span>actual<span class="_"> </span>instruction<span class="_"> </span>execution,<span class="_"> </span>the<span class="_"> </span>processor<span class="_"> </span>can<span class="_"> </span>sustain<span class="_"> </span>a<span class="_"> </span>very<span class="_"> </span>high<span class="_"> </span>execution<span class="_"> </span>rate<span class="_ _1"></span>.</div><div class="t m5 x35 h2b y3787 ff7 fs1e fc2 sc0 ls0 ws0">Marketing<span class="_"> </span>issues<span class="_ _3"></span>,<span class="_"> </span>apart<span class="_"> </span>from<span class="_"> </span>technological<span class="_"> </span>ones<span class="_ _3"></span>,<span class="_"> </span>have<span class="_"> </span>also<span class="_"> </span>played<span class="_ _13"> </span>a<span class="_"> </span>major<span class="_"> </span>role<span class="_ _13"> </span>in<span class="_"> </span>determining<span class="_"> </span>the</div><div class="t m5 x34 h2b y3788 ff7 fs1e fc2 sc0 ls0 ws0">success<span class="_ _13"> </span>of<span class="_ _6"> </span>different<span class="_ _13"> </span>instruction<span class="_ _13"> </span>sets<span class="_ _3"></span>.<span class="_ _13"> </span>By<span class="_ _13"> </span>maintaining<span class="_ _6"> </span>compatibility<span class="_ _13"> </span>with<span class="_ _6"> </span>its<span class="_ _13"> </span>existing<span class="_ _13"> </span>processors<span class="_ _3"></span>,<span class="_"> </span>Intel<span class="_ _6"> </span>with</div><div class="t m5 x34 h2b y3789 ff7 fs1e fc2 sc0 ls0 ws0">x86<span class="_ _11"> </span>made<span class="_ _10"> </span>it<span class="_ _11"> </span>easy<span class="_ _11"> </span>to<span class="_ _11"> </span>keep<span class="_ _11"> </span>moving<span class="_ _11"> </span>from<span class="_ _11"> </span>one<span class="_ _10"> </span>generation<span class="_ _11"> </span>of<span class="_ _11"> </span>processor<span class="_ _11"> </span>to<span class="_ _11"> </span>the<span class="_ _11"> </span>next.<span class="_ _10"> </span>As<span class="_ _11"> </span>integrated-circuit</div><div class="t m5 x34 h2b y378a ff7 fs1e fc2 sc0 ls0 ws0">technology<span class="_"> </span>improved,<span class="_ _11"> </span>Intel<span class="_"> </span>and<span class="_ _11"> </span>other<span class="_"> </span>x86<span class="_ _11"> </span>processor<span class="_"> </span>manufacturers<span class="_ _11"> </span>could<span class="_"> </span>overcome<span class="_ _11"> </span>the<span class="_"> </span>inefﬁciencies</div><div class="t m5 x34 h2b y378b ff7 fs1e fc2 sc0 ls0 ws0">created<span class="_ _16"> </span>by<span class="_ _16"> </span>the<span class="_ _14"> </span>original<span class="_ _16"> </span>8086<span class="_ _16"> </span>instruction<span class="_ _14"> </span>set<span class="_ _16"> </span>design,<span class="_ _14"> </span>using<span class="_ _16"> </span>RISC<span class="_ _14"> </span>techniques<span class="_ _16"> </span>to<span class="_ _16"> </span>produce<span class="_ _14"> </span>performance</div><div class="t m5 x34 h2b y378c ff7 fs1e fc2 sc0 ls0 ws0">comparable<span class="_ _11"> </span>to<span class="_ _11"> </span>the<span class="_ _16"> </span>best<span class="_ _11"> </span>RISC<span class="_ _11"> </span>machines<span class="_ _1"></span>.<span class="_ _11"> </span>As<span class="_ _16"> </span>we<span class="_ _11"> </span>saw<span class="_ _11"> </span>in<span class="_ _11"> </span>Section<span class="_ _16"> </span>3.1,<span class="_ _11"> </span>the<span class="_ _16"> </span>evolution<span class="_ _11"> </span>of<span class="_ _11"> </span>IA32<span class="_ _11"> </span>into<span class="_ _16"> </span>x86-64</div><div class="t m5 x34 h2b y378d ff7 fs1e fc2 sc0 ls0 ws0">provided<span class="_ _11"> </span>an<span class="_ _11"> </span>opportunity<span class="_ _16"> </span>to<span class="_ _11"> </span>incorporate<span class="_ _11"> </span>several<span class="_ _16"> </span>features<span class="_ _11"> </span>of<span class="_ _11"> </span>RISC<span class="_ _16"> </span>into<span class="_ _11"> </span>the<span class="_ _11"> </span>x86<span class="_ _11"> </span>family<span class="_ _3"></span>.<span class="_ _16"> </span>In<span class="_ _11"> </span>the<span class="_ _11"> </span>areas<span class="_ _16"> </span>of</div><div class="t m5 x34 h2b y378e ff7 fs1e fc2 sc0 ls0 ws0">desktop<span class="_ _1"></span>,<span class="_"> </span>laptop,<span class="_"> </span>and<span class="_"> </span>server<span class="_ _3"></span>-based<span class="_"> </span>computing,<span class="_"> </span>x86<span class="_"> </span>has<span class="_"> </span>achieved<span class="_"> </span>near<span class="_"> </span>total<span class="_"> </span>domination.</div><div class="t m5 x35 h2b y378f ff7 fs1e fc2 sc0 ls0 ws0">RISC<span class="_ _16"> </span>processors<span class="_ _14"> </span>have<span class="_ _16"> </span>done<span class="_ _14"> </span>very<span class="_ _14"> </span>well<span class="_ _16"> </span>in<span class="_ _14"> </span>the<span class="_ _16"> </span>market<span class="_ _14"> </span>for<span class="_ _14"> </span><span class="ffa">embedded<span class="_ _16"> </span>processors</span>,<span class="_ _15"> </span>controlling<span class="_ _16"> </span>such</div><div class="t m5 x34 h2b y3790 ff7 fs1e fc2 sc0 ls0 ws0">systems<span class="_ _6"> </span>as<span class="_ _13"> </span>cellular<span class="_ _a"> </span>telephones<span class="_ _1"></span>,<span class="_ _13"> </span>automobile<span class="_ _6"> </span>brakes<span class="_ _1"></span>,<span class="_ _13"> </span>and<span class="_ _6"> </span>Internet<span class="_ _6"> </span>appliances<span class="_ _0"></span>.<span class="_ _6"> </span>In<span class="_ _6"> </span>these<span class="_ _13"> </span>applications<span class="_ _3"></span>,<span class="_ _13"> </span>saving</div><div class="t m5 x34 h2b y3791 ff7 fs1e fc2 sc0 ls0 ws0">on<span class="_ _13"> </span>cost<span class="_ _13"> </span>and<span class="_ _13"> </span>power<span class="_ _6"> </span>is<span class="_"> </span>more<span class="_ _6"> </span>important<span class="_"> </span>than<span class="_ _6"> </span>maintaining<span class="_"> </span>backward<span class="_ _6"> </span>compatibility<span class="_ _3"></span>.<span class="_"> </span>In<span class="_ _6"> </span>terms<span class="_"> </span>of<span class="_ _6"> </span>the<span class="_"> </span>number</div><div class="t m5 x34 h2b y3792 ff7 fs1e fc2 sc0 ls0 ws0">of<span class="_"> </span>processors<span class="_"> </span>sold,<span class="_"> </span>this<span class="_"> </span>is<span class="_"> </span>a<span class="_"> </span>very<span class="_"> </span>large<span class="_"> </span>and<span class="_"> </span>growing<span class="_"> </span>market.</div><div class="t m5 x17 h41 y940 ffe fs29 fc2 sc0 ls0 ws0">4.1.4<span class="_ _48"> </span><span class="fs19">Y86-64<span class="_"> </span>Exceptions</span></div><div class="t m5 x17 h26 y753 ff7 fs19 fc2 sc0 ls0 ws0">T<span class="_ _1"></span>he<span class="_ _11"> </span>programmer<span class="_ _1"></span>-visible<span class="_ _11"> </span>state<span class="_ _11"> </span>for<span class="_ _11"> </span>Y86-64<span class="_ _11"> </span>(Figure<span class="_"> </span>4.1)<span class="_ _11"> </span>includes<span class="_ _11"> </span>a<span class="_"> </span>status<span class="_ _11"> </span>code<span class="_ _11"> </span><span class="ff6">Stat</span></div><div class="t m5 x17 h26 y754 ff7 fs19 fc2 sc0 ls0 ws0">describing<span class="_"> </span>the<span class="_ _13"> </span>overall<span class="_"> </span>state<span class="_ _13"> </span>of<span class="_"> </span>the<span class="_ _13"> </span>executing<span class="_"> </span>program.<span class="_"> </span>T<span class="_ _1"></span>he<span class="_"> </span>possible<span class="_ _13"> </span>values<span class="_"> </span>for<span class="_ _13"> </span>this</div><div class="t m5 x17 h26 y755 ff7 fs19 fc2 sc0 ls0 ws0">code<span class="_ _13"> </span>are<span class="_ _6"> </span>shown<span class="_ _13"> </span>in<span class="_ _13"> </span>F<span class="_ _1"></span>igure<span class="_ _13"> </span>4.5.<span class="_ _6"> </span>Code<span class="_ _13"> </span>value<span class="_ _13"> </span>1,<span class="_ _13"> </span>named<span class="_ _6"> </span><span class="ffd">AOK</span>,<span class="_ _13"> </span>indicates<span class="_ _13"> </span>that<span class="_ _6"> </span>the<span class="_ _13"> </span>program</div></div><div class="pi" data-data='{"ctm":[2.000000,0.000000,0.000000,2.000000,0.000000,0.000000]}'></div></div>
