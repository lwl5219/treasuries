<div id="pf42c" class="pf w2 h11" data-page-no="42c"><div class="pc pc42c w2 h11"><img class="bi x0 y0 w1 h1" alt="" src="csapp/bg42c.png"/><div class="t m5 x23c h28 y9b ff6 fs1f fc2 sc0 ls0 ws0">Homework<span class="_ _10"> </span>Problems<span class="_ _1b"> </span><span class="ffe fs1e">1067</span></div><div class="t m5 x17 h26 ye7 ff7 fs19 fc2 sc0 ls0 ws0">tail<span class="_"> </span>[102,<span class="_"> </span>106,<span class="_"> </span>113].<span class="_"> </span>The<span class="_"> </span>book<span class="_"> </span>by<span class="_"> </span>Butenhof<span class="_"> </span>[15]<span class="_"> </span>is<span class="_"> </span>a<span class="_"> </span>comprehensive<span class="_"> </span>description<span class="_"> </span>of</div><div class="t m5 x17 h26 y2a7 ff7 fs19 fc2 sc0 ls0 ws0">the<span class="_ _13"> </span>P<span class="_ _1"></span>osix<span class="_"> </span>threads<span class="_ _13"> </span>interface<span class="_ _1"></span>.<span class="_ _13"> </span>The<span class="_ _13"> </span>paper<span class="_ _13"> </span>by<span class="_ _13"> </span>Birrell<span class="_ _13"> </span>[7]<span class="_ _13"> </span>is<span class="_"> </span>an<span class="_ _13"> </span>excellent<span class="_ _13"> </span>introduction<span class="_ _13"> </span>to</div><div class="t m5 x17 h26 y2a8 ff7 fs19 fc2 sc0 ls0 ws0">threads<span class="_ _6"> </span>programming<span class="_ _6"> </span>and<span class="_ _13"> </span>its<span class="_ _a"> </span>pitfalls<span class="_ _1"></span>.<span class="_ _13"> </span>T<span class="_ _1"></span>he<span class="_ _6"> </span>book<span class="_ _6"> </span>by<span class="_ _13"> </span>Reinders<span class="_ _a"> </span>[90]<span class="_ _13"> </span>describes<span class="_ _a"> </span>a<span class="_ _13"> </span>C/C++</div><div class="t m5 x17 h26 y2f7 ff7 fs19 fc2 sc0 ls0 ws0">library<span class="_"> </span>that<span class="_"> </span>simpliﬁes<span class="_"> </span>the<span class="_"> </span>design<span class="_"> </span>and<span class="_"> </span>implementation<span class="_"> </span>of<span class="_"> </span>threaded<span class="_"> </span>programs<span class="_ _3"></span>.<span class="_"> </span>Sev-</div><div class="t m5 x17 h26 y2f8 ff7 fs19 fc2 sc0 ls0 ws0">eral<span class="_ _21"> </span>texts<span class="_ _f"> </span>cover<span class="_ _21"> </span>the<span class="_ _f"> </span>fundamentals<span class="_ _21"> </span>of<span class="_ _f"> </span>parallel<span class="_ _21"> </span>programming<span class="_ _f"> </span>on<span class="_ _21"> </span>multi-core<span class="_ _f"> </span>sys-</div><div class="t m5 x17 h26 y2f9 ff7 fs19 fc2 sc0 ls0 ws0">tems<span class="_"> </span>[47,<span class="_ _11"> </span>71].<span class="_ _11"> </span>Pugh<span class="_ _11"> </span>identiﬁes<span class="_ _11"> </span>weaknesses<span class="_ _11"> </span>with<span class="_"> </span>the<span class="_ _11"> </span>way<span class="_ _11"> </span>that<span class="_ _11"> </span>J<span class="_ _3"></span>ava<span class="_ _11"> </span>threads<span class="_ _11"> </span>interact</div><div class="t m5 x17 h26 y2fa ff7 fs19 fc2 sc0 ls0 ws0">through<span class="_ _13"> </span>memory<span class="_"> </span>and<span class="_ _13"> </span>proposes<span class="_ _13"> </span>replacement<span class="_"> </span>memory<span class="_ _13"> </span>models<span class="_ _13"> </span>[88].<span class="_ _13"> </span>Gustafson<span class="_"> </span>pro-</div><div class="t m5 x17 h26 y2fb ff7 fs19 fc2 sc0 ls0 ws0">posed<span class="_"> </span>the<span class="_"> </span>weak-scaling<span class="_"> </span>speedup<span class="_"> </span>model<span class="_"> </span>[43]<span class="_"> </span>as<span class="_"> </span>an<span class="_"> </span>alternative<span class="_"> </span>to<span class="_"> </span>strong<span class="_"> </span>scaling.</div><div class="t m5 x17 h29 y84b8 ffe fs14 fc2 sc0 ls0 ws0">Homework<span class="_"> </span>Problems</div><div class="t m5 x17 h73 y84b9 ffe fs1e fc6 sc0 ls0 ws0">12.16<span class="_ _23"> </span><span class="ff10 fs19">◆</span></div><div class="t m5 x17 h26 y84ba ff7 fs19 fc1 sc0 ls0 ws0">Write<span class="_"> </span>a<span class="_ _11"> </span>version<span class="_ _11"> </span>of<span class="_ _11"> </span><span class="ffd">hello.c<span class="_ _11"> </span></span>(F<span class="_ _1"></span>igure<span class="_ _11"> </span>12.13)<span class="_ _11"> </span>that<span class="_ _11"> </span>creates<span class="_ _11"> </span>and<span class="_"> </span>reaps<span class="_ _11"> </span><span class="ff11">n<span class="_ _11"> </span></span>joinable<span class="_ _11"> </span>peer</div><div class="t m5 x17 h26 y84bb ff7 fs19 fc1 sc0 ls0 ws0">threads<span class="_ _1"></span>,<span class="_"> </span>where<span class="_"> </span><span class="ff11">n<span class="_ _10"> </span></span>is<span class="_"> </span>a<span class="_"> </span>command-line<span class="_"> </span>argument.</div><div class="t m5 x17 h73 y84bc ffe fs1e fc6 sc0 ls0 ws0">12.17<span class="_ _23"> </span><span class="ff10 fs19">◆</span></div><div class="t m5 x34 h26 y84bd ff7 fs19 fc1 sc0 ls0 ws0">A.<span class="_ _1f"> </span>T<span class="_ _1"></span>he<span class="_ _11"> </span>program<span class="_"> </span>in<span class="_ _11"> </span>F<span class="_ _0"></span>igure<span class="_"> </span>12.46<span class="_"> </span>has<span class="_ _11"> </span>a<span class="_ _11"> </span>bug.<span class="_"> </span>T<span class="_ _1"></span>he<span class="_ _11"> </span>thread<span class="_"> </span>is<span class="_ _11"> </span>supposed<span class="_"> </span>to<span class="_ _11"> </span>sleep<span class="_"> </span>for</div><div class="t m5 x2d h26 y84be ff7 fs19 fc1 sc0 ls0 ws0">1<span class="_ _16"> </span>second<span class="_ _16"> </span>and<span class="_ _11"> </span>then<span class="_ _16"> </span>print<span class="_ _16"> </span>a<span class="_ _16"> </span>string.<span class="_ _11"> </span>However,<span class="_ _16"> </span>when<span class="_ _16"> </span>we<span class="_ _16"> </span>run<span class="_ _16"> </span>it<span class="_ _11"> </span>on<span class="_ _16"> </span>our<span class="_ _16"> </span>system,</div><div class="t m5 x2d h26 y84bf ff7 fs19 fc1 sc0 ls0 ws0">nothing<span class="_"> </span>prints<span class="_ _1"></span>.<span class="_"> </span>Why?</div><div class="t m5 x34 h26 y84c0 ff7 fs19 fc1 sc0 ls0 ws0">B<span class="_ _3"></span>.<span class="_ _1d"> </span>Y<span class="_ _3"></span>ou<span class="_ _13"> </span>can<span class="_ _13"> </span>ﬁx<span class="_"> </span>this<span class="_ _13"> </span>bug<span class="_ _13"> </span>by<span class="_ _13"> </span>replacing<span class="_ _13"> </span>the<span class="_ _13"> </span><span class="ffd">exit<span class="_ _13"> </span></span>function<span class="_ _13"> </span>in<span class="_ _13"> </span>line<span class="_ _13"> </span>10<span class="_ _13"> </span>with<span class="_"> </span>one<span class="_ _13"> </span>of<span class="_ _13"> </span>two</div><div class="t m5 x2d h26 y84c1 ff7 fs19 fc1 sc0 ls0 ws0">different<span class="_"> </span>Pthreads<span class="_"> </span>function<span class="_"> </span>calls<span class="_ _1"></span>.<span class="_"> </span>Which<span class="_"> </span>ones?</div><div class="t m5 x1df h2c y84c2 ffa fs16 fc1 sc0 ls0 ws0">code/conc/hellobug.c</div><div class="t m5 x2c h88 y84c3 ff6 fs20 fc6 sc0 ls0 ws0">1<span class="_ _1c"> </span><span class="ffd fs4e fc2">/*<span class="_ _e"> </span>WARNING:<span class="_ _e"> </span>This<span class="_ _f"> </span>code<span class="_ _e"> </span>is<span class="_ _e"> </span>buggy!<span class="_ _f"> </span>*/</span></div><div class="t m5 x2c h88 y84c4 ff6 fs20 fc6 sc0 ls0 ws0">2<span class="_ _1c"> </span><span class="ffd fs4e fc2">#include<span class="_ _e"> </span>&quot;csapp.h&quot;</span></div><div class="t m5 x2c h88 y830c ff6 fs20 fc6 sc0 ls0 ws0">3<span class="_ _1c"> </span><span class="ffd fs4e fc2">void<span class="_ _e"> </span>*thread(void<span class="_ _e"> </span>*vargp);</span></div><div class="t m5 x2c h2e y84c5 ff6 fs20 fc6 sc0 ls0 ws0">4</div><div class="t m5 x2c h2e y84c6 ff6 fs20 fc6 sc0 ls0 ws0">5</div><div class="t m5 x2d h88 y84c7 ffd fs4e fc2 sc0 ls0 ws0">int<span class="_ _e"> </span>main()</div><div class="t m5 x2c h88 y84c8 ff6 fs20 fc6 sc0 ls0 ws0">6<span class="_ _1c"> </span><span class="ffd fs4e fc2">{</span></div><div class="t m5 x2c h2e y7e05 ff6 fs20 fc6 sc0 ls0 ws0">7</div><div class="t m5 x1a0 h88 y6845 ffd fs4e fc2 sc0 ls0 ws0">pthread_t<span class="_ _e"> </span>tid;</div><div class="t m5 x2c h2e y6960 ff6 fs20 fc6 sc0 ls0 ws0">8</div><div class="t m5 x2c h2e y84c9 ff6 fs20 fc6 sc0 ls0 ws0">9</div><div class="t m5 x1a0 h88 y84ca ffd fs4e fc2 sc0 ls0 ws0">Pthread_create(&amp;tid,<span class="_ _e"> </span>NULL,<span class="_ _f"> </span>thread,<span class="_ _e"> </span>NULL);</div><div class="t m5 x17 h88 y84cb ff6 fs20 fc6 sc0 ls0 ws0">10<span class="_ _e2"> </span><span class="ffd fs4e fc2">exit(0);</span></div><div class="t m5 x17 h88 ya21 ff6 fs20 fc6 sc0 ls0 ws0">11<span class="_ _1c"> </span><span class="ffd fs4e fc2">}</span></div><div class="t m5 x17 h2e y84cc ff6 fs20 fc6 sc0 ls0 ws0">12</div><div class="t m5 x17 h2e y84cd ff6 fs20 fc6 sc0 ls0 ws0">13</div><div class="t m5 x2d h88 y4af ffd fs4e fc2 sc0 ls0 ws0">/*<span class="_ _e"> </span>Thread<span class="_ _f"> </span>routine<span class="_ _e"> </span>*/</div><div class="t m5 x17 h88 y84ce ff6 fs20 fc6 sc0 ls0 ws0">14<span class="_ _1c"> </span><span class="ffd fs4e fc2">void<span class="_ _e"> </span>*thread(void<span class="_ _e"> </span>*vargp)</span></div><div class="t m5 x17 h88 y84cf ff6 fs20 fc6 sc0 ls0 ws0">15<span class="_ _1c"> </span><span class="ffd fs4e fc2">{</span></div><div class="t m5 x17 h88 y84d0 ff6 fs20 fc6 sc0 ls0 ws0">16<span class="_ _e2"> </span><span class="ffd fs4e fc2">Sleep(1);</span></div><div class="t m5 x17 h88 y84d1 ff6 fs20 fc6 sc0 ls0 ws0">17<span class="_ _e2"> </span><span class="ffd fs4e fc2">printf(&quot;Hello,<span class="_ _e"> </span>world!\n&quot;);</span></div><div class="t m5 x17 h88 y84d2 ff6 fs20 fc6 sc0 ls0 ws0">18<span class="_ _e2"> </span><span class="ffd fs4e fc2">return<span class="_ _e"> </span>NULL;</span></div><div class="t m5 x17 h88 y18db ff6 fs20 fc6 sc0 ls0 ws0">19<span class="_ _1c"> </span><span class="ffd fs4e fc2">}</span></div><div class="t m5 x1df h2c y6850 ffa fs16 fc2 sc0 ls0 ws0">code/conc/hellobug.c</div><div class="t m5 x17 h2f y6851 ffe fs16 fc6 sc0 ls0 ws0">Figure<span class="_"> </span>12.46<span class="_ _66"> </span><span class="fc1">Buggy<span class="_"> </span>program<span class="_"> </span>for<span class="_"> </span>Problem<span class="_"> </span>12.17.</span></div></div><div class="pi" data-data='{"ctm":[2.000000,0.000000,0.000000,2.000000,0.000000,0.000000]}'></div></div>
