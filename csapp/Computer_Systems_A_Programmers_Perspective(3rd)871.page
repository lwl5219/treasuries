<div id="pf367" class="pf w2 h11" data-page-no="367"><div class="pc pc367 w2 h11"><img class="bi x0 y0 w1 h1" alt="" src="csapp/bg367.png"/><div class="t m5 x14 h28 y9b ffe fs1e fc2 sc0 ls0 ws0">870<span class="_ _1b"> </span><span class="ff6 fs1f">Chapter<span class="_ _10"> </span>9<span class="_ _3d"> </span>Virtual<span class="_ _10"> </span>Memory</span></div><div class="t m5 x1d h26 ye7 ff7 fs19 fc2 sc0 ls0 ws0">memory<span class="_ _3"></span>.<span class="_ _11"> </span>F<span class="_ _1"></span>ortunately<span class="_ _3"></span>,<span class="_ _16"> </span>memory<span class="_ _11"> </span>mapping<span class="_ _11"> </span>provides<span class="_ _16"> </span>us<span class="_ _11"> </span>with<span class="_ _16"> </span>a<span class="_ _11"> </span>clean<span class="_ _11"> </span>mechanism<span class="_ _16"> </span>for</div><div class="t m5 x1d h26 y2a7 ff7 fs19 fc2 sc0 ls0 ws0">controlling<span class="_"> </span>how<span class="_"> </span>objects<span class="_"> </span>are<span class="_"> </span>shared<span class="_"> </span>by<span class="_"> </span>multiple<span class="_"> </span>processes<span class="_ _1"></span>.</div><div class="t m5 x29 h26 y2a8 ff7 fs19 fc2 sc0 ls0 ws0">An<span class="_ _11"> </span>object<span class="_ _16"> </span>can<span class="_ _11"> </span>be<span class="_ _16"> </span>mapped<span class="_ _11"> </span>into<span class="_ _11"> </span>an<span class="_ _16"> </span>area<span class="_ _11"> </span>of<span class="_ _16"> </span>virtual<span class="_ _11"> </span>memory<span class="_ _16"> </span>as<span class="_ _11"> </span>either<span class="_ _11"> </span>a<span class="_ _16"> </span><span class="ffa">shared</span></div><div class="t m5 x1d h26 y2f7 ffa fs19 fc2 sc0 ls0 ws0">object<span class="_ _13"> </span><span class="ff7">or<span class="_ _13"> </span>a<span class="_ _a"> </span></span>private<span class="_ _13"> </span>object<span class="_ _2"></span><span class="ff7">.<span class="_ _6"> </span>If<span class="_ _6"> </span>a<span class="_ _13"> </span>process<span class="_ _a"> </span>maps<span class="_ _13"> </span>a<span class="_ _a"> </span>shared<span class="_ _13"> </span>object<span class="_ _a"> </span>into<span class="_ _13"> </span>an<span class="_ _6"> </span>area<span class="_ _6"> </span>of<span class="_ _6"> </span>its<span class="_ _13"> </span>virtual</span></div><div class="t m5 x1d h26 y2f8 ff7 fs19 fc2 sc0 ls0 ws0">address<span class="_ _11"> </span>space,<span class="_ _11"> </span>then<span class="_ _16"> </span>any<span class="_ _11"> </span>writes<span class="_ _16"> </span>that<span class="_ _11"> </span>the<span class="_ _16"> </span>process<span class="_ _11"> </span>makes<span class="_ _16"> </span>to<span class="_ _11"> </span>that<span class="_ _11"> </span>area<span class="_ _16"> </span>are<span class="_ _11"> </span>visible<span class="_ _16"> </span>to</div><div class="t m5 x1d h26 y2f9 ff7 fs19 fc2 sc0 ls0 ws0">any<span class="_ _14"> </span>other<span class="_ _14"> </span>processes<span class="_ _14"> </span>that<span class="_ _15"> </span>have<span class="_ _14"> </span>also<span class="_ _14"> </span>mapped<span class="_ _15"> </span>the<span class="_ _14"> </span>shared<span class="_ _14"> </span>object<span class="_ _14"> </span>into<span class="_ _15"> </span>their<span class="_ _14"> </span>virtual</div><div class="t m5 x1d h26 y2fa ff7 fs19 fc2 sc0 ls0 ws0">memory<span class="_ _3"></span>.<span class="_"> </span>Further,<span class="_"> </span>the<span class="_"> </span>changes<span class="_"> </span>are<span class="_"> </span>also<span class="_"> </span>reﬂected<span class="_"> </span>in<span class="_"> </span>the<span class="_"> </span>original<span class="_"> </span>object<span class="_"> </span>on<span class="_"> </span>disk.</div><div class="t m5 x29 h26 y2fb ff7 fs19 fc2 sc0 ls0 ws0">Changes<span class="_"> </span>made<span class="_"> </span>to<span class="_"> </span>an<span class="_"> </span>area<span class="_"> </span>mapped<span class="_"> </span>to<span class="_"> </span>a<span class="_"> </span>private<span class="_ _11"> </span>object,<span class="_"> </span>on<span class="_"> </span>the<span class="_"> </span>other<span class="_"> </span>hand,<span class="_"> </span>are</div><div class="t m5 x1d h26 y2fc ff7 fs19 fc2 sc0 ls0 ws0">not<span class="_ _11"> </span>visible<span class="_ _11"> </span>to<span class="_ _11"> </span>other<span class="_ _16"> </span>processes<span class="_ _3"></span>,<span class="_ _16"> </span>and<span class="_ _11"> </span>any<span class="_ _11"> </span>writes<span class="_ _11"> </span>that<span class="_ _16"> </span>the<span class="_ _11"> </span>process<span class="_ _11"> </span>makes<span class="_ _11"> </span>to<span class="_ _11"> </span>the<span class="_ _16"> </span>area</div><div class="t m5 x1d h26 y2fd ff7 fs19 fc2 sc0 ls0 ws0">are<span class="_"> </span><span class="ffa">not<span class="_ _14"> </span></span>reﬂected<span class="_"> </span>back<span class="_ _11"> </span>to<span class="_ _11"> </span>the<span class="_ _11"> </span>object<span class="_ _11"> </span>on<span class="_ _11"> </span>disk.<span class="_ _11"> </span>A<span class="_ _11"> </span>virtual<span class="_"> </span>memory<span class="_ _11"> </span>area<span class="_ _11"> </span>into<span class="_ _11"> </span>which<span class="_ _11"> </span>a</div><div class="t m5 x1d h26 y2fe ff7 fs19 fc2 sc0 ls0 ws0">shared<span class="_"> </span>object<span class="_"> </span>is<span class="_"> </span>mapped<span class="_"> </span>is<span class="_"> </span>often<span class="_"> </span>called<span class="_"> </span>a<span class="_"> </span><span class="ffa">shared<span class="_"> </span>area</span>.<span class="_ _13"> </span>Similarly<span class="_"> </span>for<span class="_"> </span>a<span class="_"> </span><span class="ffa">private<span class="_"> </span>area</span>.</div><div class="t m5 x29 h26 y2ff ff7 fs19 fc2 sc0 ls0 ws0">Suppose<span class="_ _6"> </span>that<span class="_ _13"> </span>process<span class="_ _6"> </span>1<span class="_ _13"> </span>maps<span class="_ _6"> </span>a<span class="_ _6"> </span>shared<span class="_ _13"> </span>object<span class="_ _6"> </span>into<span class="_ _13"> </span>an<span class="_ _6"> </span>area<span class="_ _13"> </span>of<span class="_ _a"> </span>its<span class="_ _13"> </span>virtual<span class="_ _6"> </span>memory<span class="_ _3"></span>,</div><div class="t m5 x1d h26 y300 ff7 fs19 fc2 sc0 ls0 ws0">as<span class="_ _13"> </span>shown<span class="_"> </span>in<span class="_ _13"> </span>F<span class="_ _1"></span>igure<span class="_"> </span>9.29(a).<span class="_ _13"> </span>Now<span class="_ _13"> </span>suppose<span class="_ _13"> </span>that<span class="_"> </span>process<span class="_ _13"> </span>2<span class="_ _13"> </span>maps<span class="_"> </span>the<span class="_ _13"> </span>same<span class="_ _13"> </span>shared<span class="_ _13"> </span>ob-</div><div class="t m5 x14 h2f y7101 ffe fs16 fc6 sc0 ls0 ws0">Figure<span class="_"> </span>9.29</div><div class="t m5 x14 h34 y7102 ffe fs16 fc1 sc0 ls0 ws0">A<span class="_"> </span>shared<span class="_ _11"> </span>object.<span class="_ _11"> </span><span class="ff6">(a)<span class="_ _11"> </span>After</span></div><div class="t m5 x14 h34 y7103 ff6 fs16 fc1 sc0 ls0 ws0">process<span class="_ _10"> </span>1<span class="_ _11"> </span>maps<span class="_ _11"> </span>the<span class="_ _11"> </span>shared</div><div class="t m5 x14 h34 y7104 ff6 fs16 fc1 sc0 ls0 ws0">object.<span class="_ _16"> </span>(b)<span class="_ _16"> </span>After<span class="_ _16"> </span>process</div><div class="t m5 x14 h34 y7105 ff6 fs16 fc1 sc0 ls0 ws0">2<span class="_ _16"> </span>maps<span class="_ _11"> </span>the<span class="_ _16"> </span>same<span class="_ _11"> </span>shared</div><div class="t m5 x14 h34 y7106 ff6 fs16 fc1 sc0 ls0 ws0">object.<span class="_ _14"> </span>(Note<span class="_ _14"> </span>that<span class="_ _14"> </span>the</div><div class="t m5 x14 h34 y7107 ff6 fs16 fc1 sc0 ls0 ws0">physical<span class="_ _16"> </span>pages<span class="_ _14"> </span>are<span class="_ _14"> </span>not</div><div class="t m5 x14 h34 y7108 ff6 fs16 fc1 sc0 ls0 ws0">necessarily<span class="_ _10"> </span>contiguous.)</div><div class="t m5 x59 h84 y7109 ffbc fs49 fc1 sc0 ls0 ws0">Process 1</div><div class="t m5 xe0 h84 y710a ffbc fs49 fc1 sc0 ls0 ws0">virtual memory</div><div class="t m5 x7e h84 y7109 ffbc fs49 fc1 sc0 ls0 ws0">Process 2</div><div class="t m5 x40 h84 y710a ffbc fs49 fc1 sc0 ls0 ws0">virtual memory</div><div class="t m5 x9e h84 y7109 ffbc fs49 fc1 sc0 ls0 ws0">Physical</div><div class="t m5 x9e h84 y710a ffbc fs49 fc1 sc0 ls0 ws0">memory</div><div class="t m5 xd9 h84 y710b ffbc fs49 fc1 sc0 ls0 ws0">Shared</div><div class="t m5 x68 h84 y710c ffbc fs49 fc1 sc0 ls0 ws0">object</div><div class="t m5 x69 h84 y710d ffbc fs49 fc1 sc0 ls0 ws0">(a)</div><div class="t m5 x59 h84 y710e ffbf fs49 fc1 sc0 ls0 ws0">Process 1</div><div class="t m5 xe0 h84 y710f ffbf fs49 fc1 sc0 ls0 ws0">virtual memory</div><div class="t m5 x7e h84 y710e ffbf fs49 fc1 sc0 ls0 ws0">Process 2</div><div class="t m5 x40 h84 y710f ffbf fs49 fc1 sc0 ls0 ws0">virtual memory</div><div class="t m5 x9e h84 y710e ffbf fs49 fc1 sc0 ls0 ws0">Physical</div><div class="t m5 x9e h84 y710f ffbf fs49 fc1 sc0 ls0 ws0">memory</div><div class="t m5 xd9 h84 y7110 ffbf fs49 fc1 sc0 ls0 ws0">Shared</div><div class="t m5 x68 h84 y7111 ffbf fs49 fc1 sc0 ls0 ws0">object</div><div class="t m5 x69 h84 y7112 ffbf fs49 fc1 sc0 ls0 ws0">(b)</div></div><div class="pi" data-data='{"ctm":[2.000000,0.000000,0.000000,2.000000,0.000000,0.000000]}'></div></div>
