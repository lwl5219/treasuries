<div id="pf1c0" class="pf w2 h11" data-page-no="1c0"><div class="pc pc1c0 w2 h11"><img class="bi x0 y0 w1 h1" alt="" src="csapp/bg1c0.png"/><div class="t m5 x99 h28 y9b ff6 fs1f fc2 sc0 ls0 ws0">Section<span class="_ _10"> </span>4.3<span class="_ _60"> </span>Sequential<span class="_ _10"> </span>Y86-64<span class="_ _10"> </span>Implementations<span class="_ _3e"> </span><span class="ffe fs1e">447</span></div><div class="t m5 x17 h2f ye7 ffe fs16 fc6 sc0 ls0 ws0">Figure<span class="_"> </span>4.31</div><div class="t m5 x17 h34 y58a ffe fs16 fc1 sc0 ls0 ws0">SEQ<span class="_"> </span>PC<span class="_"> </span>update<span class="_ _11"> </span>stage.<span class="_ _11"> </span><span class="ff6">The<span class="_ _11"> </span>next</span></div><div class="t m5 x17 h34 y58b ff6 fs16 fc1 sc0 ls0 ws0">value<span class="_ _11"> </span>of<span class="_ _11"> </span>the<span class="_ _11"> </span>PC<span class="_ _16"> </span>is<span class="_ _11"> </span>selected<span class="_ _11"> </span>from</div><div class="t m5 x17 h34 y58c ff6 fs16 fc1 sc0 ls0 ws0">among<span class="_ _16"> </span>the<span class="_ _11"> </span>signals<span class="_ _16"> </span>valC,<span class="_ _16"> </span>valM,</div><div class="t m5 x17 h34 y58d ff6 fs16 fc1 sc0 ls0 ws0">and<span class="_ _14"> </span>valP,<span class="_ _14"> </span>depending<span class="_ _14"> </span>on<span class="_ _14"> </span>the</div><div class="t m5 x17 h34 y58e ff6 fs16 fc1 sc0 ls0 ws0">instruction<span class="_ _11"> </span>code<span class="_ _11"> </span>and<span class="_ _11"> </span>the<span class="_ _10"> </span>branch</div><div class="t m5 x17 h34 y58f ff6 fs16 fc1 sc0 ls0 ws0">ﬂag.</div><div class="t m5 x121 h3f y3dcd ff43 fs27 fc1 sc0 ls0 ws0">PC</div><div class="t m5 x1b3 h3f y3dce ff43 fs27 fc1 sc0 ls0 ws0">New</div><div class="t m5 x184 h3f y3dcf ff43 fs27 fc1 sc0 ls0 ws0">PC</div><div class="t m5 xed h3f y3dd0 ff43 fs27 fc1 sc0 ls0 ws0">icode<span class="_ _23"> </span>Cnd<span class="_ _1d"> </span>valC<span class="_ _c"> </span>valM<span class="_ _60"> </span>valP</div><div class="t m5 x26 h26 y3dd1 ff7 fs19 fc1 sc0 ls0 ws0">A<span class="_ _15"> </span>ﬁnal<span class="_ _21"> </span>function<span class="_ _21"> </span>for<span class="_ _21"> </span>the<span class="_ _21"> </span>memory<span class="_ _21"> </span>stage<span class="_ _21"> </span>is<span class="_ _21"> </span>to<span class="_ _21"> </span>compute<span class="_ _21"> </span>the<span class="_ _21"> </span>status<span class="_ _21"> </span>code<span class="_ _15"> </span><span class="ff6">Stat</span></div><div class="t m5 x17 h26 y3dd2 ff7 fs19 fc1 sc0 ls0 ws0">resulting<span class="_"> </span>from<span class="_"> </span>the<span class="_"> </span>instruction<span class="_ _11"> </span>execution<span class="_"> </span>according<span class="_"> </span>to<span class="_ _11"> </span>the<span class="_"> </span>values<span class="_"> </span>of<span class="_ _11"> </span><span class="ff6">icode</span>,<span class="_"> </span><span class="ff6">imem_</span></div><div class="t m5 x17 h26 y3dd3 ff6 fs19 fc1 sc0 ls0 ws0">error<span class="ff7">,<span class="_ _f"> </span>and<span class="_ _21"> </span></span>instr_valid<span class="_ _15"> </span><span class="ff7">generated<span class="_ _21"> </span>in<span class="_ _21"> </span>the<span class="_ _21"> </span>fetch<span class="_ _21"> </span>stage<span class="_ _15"> </span>and<span class="_ _21"> </span>the<span class="_ _21"> </span>signal<span class="_ _21"> </span></span>dmem_error</div><div class="t m5 x17 h26 y3dd4 ff7 fs19 fc1 sc0 ls0 ws0">generated<span class="_"> </span>by<span class="_"> </span>the<span class="_"> </span>data<span class="_"> </span>memory<span class="_ _3"></span>.</div><div class="t m5 x17 h47 y3dd5 ffe fs2b fc1 sc0 ls0 ws0">Practice<span class="_"> </span>Problem<span class="_"> </span>4.27<span class="_ _1f"> </span><span class="fs16">(solution<span class="_"> </span>page<span class="_"> </span>525)</span></div><div class="t m5 x17 h26 y3dd6 ff7 fs19 fc1 sc0 ls0 ws0">Write<span class="_"> </span>HCL<span class="_"> </span>code<span class="_"> </span>for<span class="_ _11"> </span><span class="ff6">Stat</span>,<span class="_"> </span>generating<span class="_"> </span>the<span class="_"> </span>four<span class="_ _11"> </span>status<span class="_"> </span>codes<span class="_"> </span><span class="ffd">SAOK</span>,<span class="_"> </span><span class="ffd">SADR</span>,<span class="_ _11"> </span><span class="ffd">SINS</span>,<span class="_"> </span>and</div><div class="t m5 x17 h26 y3dd7 ffd fs19 fc1 sc0 ls0 ws0">SHLT<span class="_ _10"> </span><span class="ff7">(see<span class="_"> </span>F<span class="_ _0"></span>igure<span class="_"> </span>4.26).</span></div><div class="t m5 x17 h42 y3dd8 ff6 fs29 fc6 sc0 ls0 ws0">PC<span class="_ _11"> </span>Update<span class="_ _16"> </span>Stage</div><div class="t m5 x17 h26 y3dd9 ff7 fs19 fc1 sc0 ls0 ws0">T<span class="_ _1"></span>he<span class="_ _13"> </span>ﬁnal<span class="_ _6"> </span>stage<span class="_ _13"> </span>in<span class="_ _6"> </span>SEQ<span class="_ _13"> </span>generates<span class="_ _13"> </span>the<span class="_ _6"> </span>new<span class="_ _13"> </span>value<span class="_ _6"> </span>of<span class="_ _13"> </span>the<span class="_ _6"> </span>program<span class="_ _13"> </span>counter<span class="_ _6"> </span>(see<span class="_ _13"> </span>F<span class="_ _1"></span>igure</div><div class="t m5 x17 h26 y3dda ff7 fs19 fc1 sc0 ls0 ws0">4.31).<span class="_ _13"> </span>As<span class="_ _13"> </span>the<span class="_ _6"> </span>ﬁnal<span class="_ _13"> </span>steps<span class="_ _13"> </span>in<span class="_ _13"> </span>F<span class="_ _1"></span>igures<span class="_ _13"> </span>4.18<span class="_ _13"> </span>to<span class="_ _13"> </span>4.21<span class="_ _13"> </span>show<span class="_ _7"></span>,<span class="_ _13"> </span>the<span class="_ _13"> </span>new<span class="_ _13"> </span>PC<span class="_ _13"> </span>will<span class="_ _13"> </span>be<span class="_ _6"> </span><span class="ff6">valC</span>,<span class="_ _13"> </span><span class="ff6">valM</span>,</div><div class="t m5 x17 h26 y3ddb ff7 fs19 fc1 sc0 ls0 ws0">or<span class="_"> </span><span class="ff6">valP</span>,<span class="_ _13"> </span>depending<span class="_"> </span>on<span class="_ _13"> </span>the<span class="_"> </span>instruction<span class="_"> </span>type<span class="_ _13"> </span>and<span class="_"> </span>whether<span class="_ _13"> </span>or<span class="_"> </span>not<span class="_"> </span>a<span class="_ _13"> </span>branch<span class="_"> </span>should<span class="_ _13"> </span>be</div><div class="t m5 x17 h26 y3ddc ff7 fs19 fc1 sc0 ls0 ws0">taken.<span class="_"> </span>T<span class="_ _1"></span>his<span class="_"> </span>selection<span class="_"> </span>can<span class="_"> </span>be<span class="_"> </span>described<span class="_"> </span>in<span class="_"> </span>HCL<span class="_"> </span>as<span class="_"> </span>follows:</div><div class="t m5 x17 h2d y3ddd ffd fs1e fc2 sc0 ls0 ws0">word<span class="_ _e"> </span>new_pc<span class="_ _1f"> </span>=<span class="_ _1f"> </span>[</div><div class="t m5 x21e h2d y3dde ffd fs1e fc2 sc0 ls0 ws0">#<span class="_ _e"> </span>Call.<span class="_ _1a"> </span>Use<span class="_ _1f"> </span>instruction<span class="_ _1f"> </span>constant</div><div class="t m5 x21e h2d y3ddf ffd fs1e fc2 sc0 ls0 ws0">icode<span class="_ _e"> </span>==<span class="_ _1f"> </span>ICALL<span class="_ _1f"> </span>:<span class="_ _e"> </span>valC;</div><div class="t m5 x21e h2d y3de0 ffd fs1e fc2 sc0 ls0 ws0">#<span class="_ _e"> </span>Taken<span class="_ _1f"> </span>branch.<span class="_ _1a"> </span>Use<span class="_ _1f"> </span>instruction<span class="_ _e"> </span>constant</div><div class="t m5 x21e h2d y3de1 ffd fs1e fc2 sc0 ls0 ws0">icode<span class="_ _e"> </span>==<span class="_ _1f"> </span>IJXX<span class="_ _1f"> </span>&amp;&amp;<span class="_ _e"> </span>Cnd<span class="_ _1f"> </span>:<span class="_ _e"> </span>valC;</div><div class="t m5 x21e h2d y3de2 ffd fs1e fc2 sc0 ls0 ws0">#<span class="_ _e"> </span>Completion<span class="_ _1f"> </span>of<span class="_ _1f"> </span>RET<span class="_ _e"> </span>instruction.<span class="_ _1a"> </span>Use<span class="_ _1f"> </span>value<span class="_ _e"> </span>from<span class="_ _1f"> </span>stack</div><div class="t m5 x21e h2d y3de3 ffd fs1e fc2 sc0 ls0 ws0">icode<span class="_ _e"> </span>==<span class="_ _1f"> </span>IRET<span class="_ _1f"> </span>:<span class="_ _e"> </span>valM;</div><div class="t m5 x21e h2d y3de4 ffd fs1e fc2 sc0 ls0 ws0">#<span class="_ _e"> </span>Default:<span class="_ _1f"> </span>Use<span class="_ _1f"> </span>incremented<span class="_ _e"> </span>PC</div><div class="t m5 x21e h2d y3de5 ffd fs1e fc2 sc0 ls0 ws0">1<span class="_ _e"> </span>:<span class="_ _1f"> </span>valP;</div><div class="t m5 x17 h2d y3de6 ffd fs1e fc2 sc0 ls0 ws0">];</div><div class="t m5 x17 h42 y3de7 ff6 fs29 fc6 sc0 ls0 ws0">Surveying<span class="_ _16"> </span>SEQ</div><div class="t m5 x17 h26 y278 ff7 fs19 fc1 sc0 ls0 ws0">W<span class="_ _3"></span>e<span class="_ _21"> </span>have<span class="_ _15"> </span>now<span class="_ _21"> </span>stepped<span class="_ _15"> </span>through<span class="_ _21"> </span>a<span class="_ _15"> </span>complete<span class="_ _21"> </span>design<span class="_ _15"> </span>for<span class="_ _21"> </span>a<span class="_ _15"> </span>Y86-64<span class="_ _21"> </span>processor.<span class="_ _15"> </span>W<span class="_ _3"></span>e</div><div class="t m5 x17 h26 y279 ff7 fs19 fc1 sc0 ls0 ws0">have<span class="_ _11"> </span>seen<span class="_ _16"> </span>that<span class="_ _16"> </span>by<span class="_ _11"> </span>organizing<span class="_ _16"> </span>the<span class="_ _16"> </span>steps<span class="_ _11"> </span>required<span class="_ _16"> </span>to<span class="_ _11"> </span>execute<span class="_ _16"> </span>each<span class="_ _16"> </span>of<span class="_ _11"> </span>the<span class="_ _16"> </span>different</div><div class="t m5 x17 h26 y27a ff7 fs19 fc1 sc0 ls0 ws0">instructions<span class="_ _14"> </span>into<span class="_ _14"> </span>a<span class="_ _16"> </span>uniform<span class="_ _14"> </span>ﬂow<span class="_ _3"></span>,<span class="_ _15"> </span>we<span class="_ _14"> </span>can<span class="_ _14"> </span>implement<span class="_ _14"> </span>the<span class="_ _14"> </span>entire<span class="_ _14"> </span>processor<span class="_ _14"> </span>with<span class="_ _16"> </span>a</div><div class="t m5 x17 h26 y27b ff7 fs19 fc1 sc0 ls0 ws0">small<span class="_ _16"> </span>number<span class="_ _16"> </span>of<span class="_ _16"> </span>different<span class="_ _16"> </span>hardware<span class="_ _16"> </span>units<span class="_ _16"> </span>and<span class="_ _11"> </span>with<span class="_ _16"> </span>a<span class="_ _16"> </span>single<span class="_ _16"> </span>clock<span class="_ _16"> </span>to<span class="_ _16"> </span>control<span class="_ _16"> </span>the</div><div class="t m5 x17 h26 y27c ff7 fs19 fc1 sc0 ls0 ws0">sequencing<span class="_ _6"> </span>of<span class="_ _13"> </span>computations<span class="_ _3"></span>.<span class="_ _6"> </span>The<span class="_ _a"> </span>control<span class="_ _13"> </span>logic<span class="_ _6"> </span>must<span class="_ _6"> </span>then<span class="_ _13"> </span>route<span class="_ _a"> </span>the<span class="_ _13"> </span>signals<span class="_ _a"> </span>between</div><div class="t m5 x17 h26 y27d ff7 fs19 fc1 sc0 ls0 ws0">these<span class="_"> </span>units<span class="_ _13"> </span>and<span class="_"> </span>generate<span class="_ _13"> </span>the<span class="_"> </span>proper<span class="_ _13"> </span>control<span class="_"> </span>signals<span class="_ _13"> </span>based<span class="_"> </span>on<span class="_"> </span>the<span class="_ _13"> </span>instruction<span class="_"> </span>types</div><div class="t m5 x17 h26 y27e ff7 fs19 fc1 sc0 ls0 ws0">and<span class="_"> </span>the<span class="_"> </span>branch<span class="_"> </span>conditions<span class="_ _1"></span>.</div></div><div class="pi" data-data='{"ctm":[2.000000,0.000000,0.000000,2.000000,0.000000,0.000000]}'></div></div>
