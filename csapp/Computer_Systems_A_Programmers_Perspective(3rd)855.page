<div id="pf357" class="pf w2 h11" data-page-no="357"><div class="pc pc357 w2 h11"><img class="bi x0 y0 w1 h1" alt="" src="csapp/bg357.png"/><div class="t m5 x14 h28 y9b ffe fs1e fc2 sc0 ls0 ws0">854<span class="_ _1b"> </span><span class="ff6 fs1f">Chapter<span class="_ _10"> </span>9<span class="_ _3d"> </span>Virtual<span class="_ _10"> </span>Memory</span></div><div class="t m5 x14 h2f ye7 ffe fs16 fc6 sc0 ls0 ws0">Figure<span class="_"> </span>9.15</div><div class="t m5 x14 h2f y58a ffe fs16 fc1 sc0 ls0 ws0">Components<span class="_"> </span>of<span class="_ _16"> </span>a<span class="_"> </span>virtual</div><div class="t m5 x14 h2f y58b ffe fs16 fc1 sc0 ls0 ws0">address<span class="_"> </span>that<span class="_ _16"> </span>are<span class="_"> </span>used<span class="_ _11"> </span>to</div><div class="t m5 x14 h2f y58c ffe fs16 fc1 sc0 ls0 ws0">access<span class="_"> </span>the<span class="_"> </span>TLB.</div><div class="t m5 xe0 h65 y6e82 ffaf fs38 fc1 sc0 ls0 ws0">n<span class="ff24"><span class="ffb0">1<span class="_ _1dc"> </span></span></span>p<span class="ff24"></span><span class="ls298">tp<span class="_ _216"></span><span class="ffb0 ls0"> <span class="ffaf">p<span class="ff24"></span></span><span class="ls299">10<span class="_ _217"></span><span class="ffaf ls0">p<span class="ff24"></span>t<span class="ff24"><span class="ffb0">1</span></span></span></span></span></span></div><div class="t m5 x18e h3f y6e83 ffb0 fs27 fc1 sc0 ls0 ws0">TLB tag (TLBT)<span class="_ _3d"> </span>TLB index  (TLBI)<span class="_ _b2"> </span>VPO</div><div class="t m5 xec h3f y6e84 ffb0 fs27 fc1 sc0 ls0 ws0">VPN</div><div class="t m5 x14 h2f y6e85 ffe fs16 fc6 sc0 ls0 ws0">Figure<span class="_"> </span>9.16</div><div class="t m5 x14 h2f y6e86 ffe fs16 fc1 sc0 ls0 ws0">Operational<span class="_ _10"> </span>view<span class="_ _13"> </span>of<span class="_"> </span>a<span class="_ _13"> </span>TLB</div><div class="t m5 x14 h2f y6e87 ffe fs16 fc1 sc0 ls0 ws0">hit<span class="_"> </span>and<span class="_"> </span>miss.</div><div class="t m5 x67 h84 y6e88 ffb0 fs49 fc1 sc0 ls0 ws0">2</div><div class="t m5 x228 h84 y6e89 ffb0 fs49 fc1 sc0 ls0 ws0">1</div><div class="t m5 x51 h84 y6e88 ffb0 fs49 fc1 sc0 ls0 ws0">3</div><div class="t m5 x170 h84 y6e8a ffb0 fs49 fc1 sc0 ls0 ws0">4</div><div class="t m5 x121 h84 y6e8b ffb0 fs49 fc1 sc0 ls0 ws0">5</div><div class="t m5 xe0 h84 y6e8c ffb0 fs49 fc1 sc0 ls0 ws0">CPU chip </div><div class="t m5 x1d0 h84 y6e8d ffb0 fs49 fc1 sc0 ls0 ws0">Processor</div><div class="t m5 x121 h84 y6e8e ffb0 fs49 fc1 sc0 ls0 ws0">T<span class="_ _0"></span>rans-</div><div class="t m5 xd5 h84 y6e8f ffb0 fs49 fc1 sc0 ls0 ws0">lation</div><div class="t m5 x122 h84 y6e90 ffb0 fs49 fc1 sc0 ls0 ws0">TLB</div><div class="t m5 x1e3 h84 y6e91 ffb0 fs49 fc1 sc0 ls0 ws0">Cache/</div><div class="t m5 x1a1 h84 y6e92 ffb0 fs49 fc1 sc0 ls0 ws0">memory</div><div class="t m5 xe1 h84 y6e93 ffb0 fs49 fc1 sc0 ls29a ws0">VA</div><div class="t m5 x15 h84 y6e94 ffb0 fs49 fc1 sc0 ls0 ws0">VPN<span class="_ _79"> </span>PTE</div><div class="t m5 x99 h84 y6e95 ffb0 fs49 fc1 sc0 ls0 ws0">Data</div><div class="t m5 xd3 h84 y6e96 ffb0 fs49 fc1 sc0 ls0 ws10">(a) TLB hit</div><div class="t m5 x41 h84 y6e97 ffb0 fs49 fc1 sc0 ls29a ws0">PA</div><div class="t m5 x67 h84 y6e98 ffb0 fs49 fc1 sc0 ls0 ws0">2</div><div class="t m5 x228 h84 y6e99 ffb0 fs49 fc1 sc0 ls0 ws0">1</div><div class="t m5 x1fc h84 y6e9a ffb0 fs49 fc1 sc0 ls0 ws0">4</div><div class="t m5 x170 h84 y6e9b ffb0 fs49 fc1 sc0 ls0 ws0">3</div><div class="t m5 x170 h84 y6e9c ffb0 fs49 fc1 sc0 ls0 ws0">5</div><div class="t m5 x121 h84 y6e9d ffb0 fs49 fc1 sc0 ls0 ws0">6</div><div class="t m5 x15 h84 y6e9e ffb0 fs49 fc1 sc0 ls0 ws10">(b) TLB miss</div><div class="t m5 xe0 h84 y6e9f ffb0 fs49 fc1 sc0 ls0 ws0">CPU chip </div><div class="t m5 x1d0 h84 y6ea0 ffb0 fs49 fc1 sc0 ls0 ws0">Processor</div><div class="t m5 x121 h84 y6ea1 ffb0 fs49 fc1 sc0 ls0 ws0">T<span class="_ _0"></span>rans-</div><div class="t m5 xd5 h84 y6ea2 ffb0 fs49 fc1 sc0 ls0 ws0">lation</div><div class="t m5 x122 h84 y6ea3 ffb0 fs49 fc1 sc0 ls0 ws0">TLB</div><div class="t m5 x1e3 h84 y6ea4 ffb0 fs49 fc1 sc0 ls0 ws0">Cache/</div><div class="t m5 x1a1 h84 y6ea5 ffb0 fs49 fc1 sc0 ls0 ws0">memory</div><div class="t m5 xe1 h84 y6ea6 ffb0 fs49 fc1 sc0 ls29a ws0">VA<span class="_ _17d"> </span>PA</div><div class="t m5 x15 h84 y6ea7 ffb0 fs49 fc1 sc0 ls0 ws0">VPN</div><div class="t m5 xfb h84 y6ea8 ffb0 fs49 fc1 sc0 ls0 ws0">PTE</div><div class="t m5 x1b1 h84 y6ea9 ffb0 fs49 fc1 sc0 ls0 ws0">Data</div><div class="t m5 x51 h84 y6eaa ffb0 fs49 fc1 sc0 ls0 ws0">PTEA</div><div class="t m5 x29 h26 y6eab ff7 fs19 fc1 sc0 ls0 ws0">F<span class="_ _1"></span>igure<span class="_ _14"> </span>9.16(a)<span class="_ _16"> </span>shows<span class="_ _16"> </span>the<span class="_ _14"> </span>steps<span class="_ _16"> </span>involved<span class="_ _16"> </span>when<span class="_ _14"> </span>there<span class="_ _16"> </span>is<span class="_ _16"> </span>a<span class="_ _14"> </span>TLB<span class="_ _16"> </span>hit<span class="_ _16"> </span>(the<span class="_ _14"> </span>usual</div><div class="t m5 x1d h26 y6eac ff7 fs19 fc1 sc0 ls0 ws0">case).<span class="_ _13"> </span>The<span class="_ _13"> </span>key<span class="_ _13"> </span>point<span class="_ _13"> </span>here<span class="_"> </span>is<span class="_ _13"> </span>that<span class="_ _13"> </span>all<span class="_"> </span>of<span class="_ _13"> </span>the<span class="_ _13"> </span>address<span class="_"> </span>translation<span class="_ _13"> </span>steps<span class="_ _13"> </span>are<span class="_"> </span>performed</div><div class="t m5 x1d h26 y6ead ff7 fs19 fc1 sc0 ls0 ws0">inside<span class="_"> </span>the<span class="_"> </span>on-chip<span class="_"> </span>MMU<span class="_"> </span>and<span class="_"> </span>thus<span class="_"> </span>are<span class="_"> </span>fast.</div><div class="t m5 x75 h26 y6eae ffa fs19 fc1 sc0 ls0 ws0">Step<span class="_"> </span>1.<span class="_ _21"> </span><span class="ff7">T<span class="_ _0"></span>he<span class="_"> </span>CPU<span class="_"> </span>generates<span class="_"> </span>a<span class="_"> </span>virtual<span class="_"> </span>address<span class="_ _1"></span>.</span></div><div class="t m5 x75 h26 y6eaf ffa fs19 fc1 sc0 ls0 ws0">Steps<span class="_"> </span>2<span class="_"> </span>and<span class="_"> </span>3.<span class="_ _21"> </span><span class="ff7">T<span class="_ _0"></span>he<span class="_"> </span>MMU<span class="_"> </span>fetches<span class="_"> </span>the<span class="_"> </span>appropriate<span class="_"> </span>PTE<span class="_"> </span>from<span class="_"> </span>the<span class="_"> </span>TLB<span class="_ _3"></span>.</span></div></div><div class="pi" data-data='{"ctm":[2.000000,0.000000,0.000000,2.000000,0.000000,0.000000]}'></div></div>
