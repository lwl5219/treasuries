<div id="pf1fc" class="pf w2 h11" data-page-no="1fc"><div class="pc pc1fc w2 h11"><img class="bi x0 y0 w1 h1" alt="" src="csapp/bg1fc.png"/><div class="t m5 x1e1 h28 y9b ff6 fs1f fc2 sc0 ls0 ws0">Section<span class="_ _10"> </span>4.6<span class="_ _60"> </span>Summar<span class="_ _2"></span>y<span class="_ _1b"> </span><span class="ffe fs1e">507</span></div><div class="t m5 x34 h2a y548 fff fs1c fc2 sc0 ls0 ws0">Aside<span class="_ _1b"> </span><span class="ff6 fs19">State-of-the-art<span class="_ _11"> </span>microprocessor<span class="_ _11"> </span>design</span></div><div class="t m5 x34 h2b y2d0 ff7 fs1e fc2 sc0 ls0 ws0">A<span class="_ _6"> </span>ﬁve-stage<span class="_ _13"> </span>pipeline<span class="_ _1"></span>,<span class="_ _13"> </span>such<span class="_ _6"> </span>as<span class="_ _13"> </span>we<span class="_ _6"> </span>have<span class="_ _13"> </span>shown<span class="_ _6"> </span>with<span class="_ _13"> </span>the<span class="_ _6"> </span>PIPE<span class="_ _6"> </span>processor,<span class="_ _13"> </span>represented<span class="_ _6"> </span>the<span class="_ _13"> </span>state<span class="_ _6"> </span>of<span class="_ _6"> </span>the<span class="_ _13"> </span>art<span class="_ _6"> </span>in</div><div class="t m5 x34 h2b y2d1 ff7 fs1e fc2 sc0 ls0 ws0">processor<span class="_ _11"> </span>design<span class="_ _10"> </span>in<span class="_ _11"> </span>the<span class="_ _11"> </span>mid-1980s<span class="_ _1"></span>.<span class="_ _11"> </span>T<span class="_ _0"></span>he<span class="_ _11"> </span>prototype<span class="_ _10"> </span>RISC<span class="_ _11"> </span>processor<span class="_ _11"> </span>developed<span class="_ _11"> </span>by<span class="_ _11"> </span>Patterson’s<span class="_"> </span>research</div><div class="t m5 x34 h2b y2d2 ff7 fs1e fc2 sc0 ls0 ws0">group<span class="_ _16"> </span>at<span class="_ _11"> </span>Berkeley<span class="_ _16"> </span>formed<span class="_ _16"> </span>the<span class="_ _11"> </span>basis<span class="_ _16"> </span>for<span class="_ _16"> </span>the<span class="_ _11"> </span>ﬁrst<span class="_ _16"> </span>SP<span class="_ _3"></span>ARC<span class="_ _11"> </span>processor,<span class="_ _16"> </span>developed<span class="_ _16"> </span>by<span class="_ _11"> </span>Sun<span class="_ _16"> </span>Microsystems</div><div class="t m5 x34 h2b y2d3 ff7 fs1e fc2 sc0 ls0 ws0">in<span class="_ _11"> </span>1987.<span class="_ _16"> </span>T<span class="_ _0"></span>he<span class="_ _11"> </span>processor<span class="_ _16"> </span>developed<span class="_ _11"> </span>by<span class="_ _16"> </span>Hennessy’s<span class="_ _11"> </span>research<span class="_ _16"> </span>group<span class="_ _11"> </span>at<span class="_ _16"> </span>Stanford<span class="_ _11"> </span>was<span class="_ _16"> </span>commercialized<span class="_ _16"> </span>by</div><div class="t m5 x34 h2b y2d4 ff7 fs1e fc2 sc0 ls0 ws0">MIPS<span class="_ _13"> </span>T<span class="_ _7"></span>echnologies<span class="_ _13"> </span>(a<span class="_ _13"> </span>company<span class="_ _13"> </span>founded<span class="_ _13"> </span>by<span class="_ _13"> </span>Hennessy)<span class="_ _13"> </span>in<span class="_ _13"> </span>1986.<span class="_ _13"> </span>Both<span class="_ _6"> </span>of<span class="_"> </span>these<span class="_ _6"> </span>used<span class="_"> </span>ﬁve-stage<span class="_ _13"> </span>pipelines<span class="_ _3"></span>.</div><div class="t m5 x34 h2b y2d5 ff7 fs1e fc2 sc0 ls0 ws0">T<span class="_ _1"></span>he<span class="_ _f"> </span>Intel<span class="_ _f"> </span>i486<span class="_ _f"> </span>processor<span class="_ _21"> </span>also<span class="_ _f"> </span>uses<span class="_ _f"> </span>a<span class="_ _f"> </span>ﬁve-stage<span class="_ _21"> </span>pipeline,<span class="_ _e"> </span>although<span class="_ _15"> </span>with<span class="_ _f"> </span>a<span class="_ _f"> </span>different<span class="_ _f"> </span>partitioning<span class="_ _21"> </span>of</div><div class="t m5 x34 h2b y2d6 ff7 fs1e fc2 sc0 ls0 ws0">responsibilities<span class="_"> </span>among<span class="_"> </span>the<span class="_"> </span>stages<span class="_ _3"></span>,<span class="_"> </span>with<span class="_"> </span>two<span class="_"> </span>decode<span class="_"> </span>stages<span class="_"> </span>and<span class="_"> </span>a<span class="_"> </span>combined<span class="_ _13"> </span>execute/memory<span class="_"> </span>stage<span class="_"> </span>[27].</div><div class="t m5 x35 h2b y549 ff7 fs1e fc2 sc0 ls0 ws0">T<span class="_ _1"></span>hese<span class="_"> </span>pipelined<span class="_ _13"> </span>designs<span class="_ _13"> </span>are<span class="_ _13"> </span>limited<span class="_"> </span>to<span class="_ _13"> </span>a<span class="_ _13"> </span>throughput<span class="_ _13"> </span>of<span class="_ _13"> </span>at<span class="_"> </span>most<span class="_ _13"> </span>one<span class="_ _13"> </span>instruction<span class="_ _13"> </span>per<span class="_ _13"> </span>clock<span class="_"> </span>c<span class="_ _1"></span>ycle.<span class="_ _13"> </span>T<span class="_ _1"></span>he</div><div class="t m5 x34 h2b y54a ff7 fs1e fc2 sc0 ls0 ws0">CPI<span class="_ _11"> </span>(for<span class="_ _11"> </span>“cycles<span class="_ _11"> </span>per<span class="_ _11"> </span>instruction”)<span class="_ _11"> </span>measure<span class="_ _16"> </span>described<span class="_ _11"> </span>in<span class="_ _11"> </span>Section<span class="_ _11"> </span>4.5.9<span class="_ _11"> </span>can<span class="_ _16"> </span>never<span class="_ _11"> </span>be<span class="_ _11"> </span>less<span class="_ _11"> </span>than<span class="_ _11"> </span>1.0.<span class="_ _16"> </span>T<span class="_ _1"></span>he</div><div class="t m5 x34 h2b y54b ff7 fs1e fc2 sc0 ls0 ws0">different<span class="_"> </span>stages<span class="_ _13"> </span>can<span class="_ _13"> </span>only<span class="_"> </span>process<span class="_ _13"> </span>one<span class="_"> </span>instruction<span class="_ _13"> </span>at<span class="_"> </span>a<span class="_ _13"> </span>time<span class="_ _1"></span>.<span class="_"> </span>More<span class="_ _13"> </span>recent<span class="_"> </span>processors<span class="_ _13"> </span>support<span class="_"> </span><span class="ffa">superscalar</span></div><div class="t m5 x34 h2b y54c ff7 fs1e fc2 sc0 ls0 ws0">operation,<span class="_ _14"> </span>meaning<span class="_ _14"> </span>that<span class="_ _14"> </span>they<span class="_ _14"> </span>can<span class="_ _14"> </span>achieve<span class="_ _14"> </span>a<span class="_ _14"> </span>CPI<span class="_ _14"> </span>less<span class="_ _14"> </span>than<span class="_ _14"> </span>1.0<span class="_ _16"> </span>by<span class="_ _14"> </span>fetching,<span class="_ _15"> </span>decoding,<span class="_ _14"> </span>and<span class="_ _14"> </span>executing</div><div class="t m5 x34 h2b y54d ff7 fs1e fc2 sc0 ls0 ws0">multiple<span class="_ _14"> </span>instructions<span class="_ _15"> </span>in<span class="_ _14"> </span>parallel.<span class="_ _15"> </span>As<span class="_ _15"> </span>superscalar<span class="_ _14"> </span>processors<span class="_ _15"> </span>have<span class="_ _14"> </span>become<span class="_ _15"> </span>widespread,<span class="_ _15"> </span>the<span class="_ _15"> </span>accepted</div><div class="t m5 x34 h2b y54e ff7 fs1e fc2 sc0 ls0 ws0">performance<span class="_ _15"> </span>measure<span class="_ _21"> </span>has<span class="_ _21"> </span>shifted<span class="_ _21"> </span>from<span class="_ _21"> </span>CPI<span class="_ _21"> </span>to<span class="_ _15"> </span>its<span class="_ _21"> </span>reciprocal—the<span class="_ _21"> </span>average<span class="_ _21"> </span>number<span class="_ _21"> </span>of<span class="_ _21"> </span>instructions</div><div class="t m5 x34 h2b y70b ff7 fs1e fc2 sc0 ls0 ws0">executed<span class="_ _11"> </span>per<span class="_ _16"> </span>cycle<span class="_ _1"></span>,<span class="_ _16"> </span>or<span class="_ _16"> </span>IPC<span class="_ _0"></span>.<span class="_ _11"> </span>It<span class="_ _16"> </span>can<span class="_ _16"> </span>exceed<span class="_ _11"> </span>1.0<span class="_ _16"> </span>for<span class="_ _11"> </span>superscalar<span class="_ _16"> </span>processors<span class="_ _1"></span>.<span class="_ _16"> </span>T<span class="_ _1"></span>he<span class="_ _16"> </span>most<span class="_ _11"> </span>advanced<span class="_ _16"> </span>designs</div><div class="t m5 x34 h2b y70c ff7 fs1e fc2 sc0 ls0 ws0">use<span class="_"> </span>a<span class="_ _10"> </span>technique<span class="_ _11"> </span>known<span class="_"> </span>as<span class="_ _10"> </span><span class="ffa">out-of-order<span class="_ _11"> </span></span>execution<span class="_ _10"> </span>to<span class="_ _11"> </span>execute<span class="_"> </span>multiple<span class="_"> </span>instructions<span class="_ _11"> </span>in<span class="_"> </span>parallel,<span class="_ _10"> </span>possibly</div><div class="t m5 x34 h2b y70d ff7 fs1e fc2 sc0 ls0 ws0">in<span class="_ _6"> </span>a<span class="_ _6"> </span>totally<span class="_ _6"> </span>different<span class="_ _13"> </span>order<span class="_ _a"> </span>than<span class="_ _13"> </span>they<span class="_ _a"> </span>occur<span class="_ _6"> </span>in<span class="_ _13"> </span>the<span class="_ _a"> </span>program,<span class="_ _13"> </span>while<span class="_ _a"> </span>preserving<span class="_ _13"> </span>the<span class="_ _a"> </span>overall<span class="_ _13"> </span>behavior<span class="_ _a"> </span>implied</div><div class="t m5 x34 h2b y70e ff7 fs1e fc2 sc0 ls0 ws0">by<span class="_ _13"> </span>the<span class="_ _13"> </span>sequential<span class="_"> </span>ISA<span class="_ _13"> </span>model.<span class="_ _13"> </span>T<span class="_ _1"></span>his<span class="_"> </span>form<span class="_ _13"> </span>of<span class="_ _13"> </span>execution<span class="_ _13"> </span>is<span class="_ _13"> </span>described<span class="_ _13"> </span>in<span class="_ _13"> </span>Chapter<span class="_"> </span>5<span class="_ _13"> </span>as<span class="_ _13"> </span>part<span class="_ _13"> </span>of<span class="_ _13"> </span>our<span class="_ _13"> </span>discussion</div><div class="t m5 x34 h2b y70f ff7 fs1e fc2 sc0 ls0 ws0">of<span class="_"> </span>program<span class="_"> </span>optimization.</div><div class="t m5 x35 h2b y710 ff7 fs1e fc2 sc0 ls0 ws0">Pipelined<span class="_"> </span>processors<span class="_"> </span>are<span class="_"> </span>not<span class="_"> </span>just<span class="_"> </span>historical<span class="_"> </span>artifacts<span class="_ _3"></span>,<span class="_"> </span>however.<span class="_"> </span>T<span class="_ _1"></span>he<span class="_"> </span>majority<span class="_"> </span>of<span class="_"> </span>processors<span class="_"> </span>sold<span class="_"> </span>are</div><div class="t m5 x34 h2b y711 ff7 fs1e fc2 sc0 ls0 ws0">used<span class="_ _16"> </span>in<span class="_ _16"> </span>embedded<span class="_ _16"> </span>systems<span class="_ _1"></span>,<span class="_ _16"> </span>controlling<span class="_ _16"> </span>automotive<span class="_ _16"> </span>functions<span class="_ _1"></span>,<span class="_ _14"> </span>consumer<span class="_ _16"> </span>products<span class="_ _1"></span>,<span class="_ _14"> </span>and<span class="_ _16"> </span>other<span class="_ _16"> </span>devices</div><div class="t m5 x34 h2b y712 ff7 fs1e fc2 sc0 ls0 ws0">where<span class="_ _11"> </span>the<span class="_ _16"> </span>processor<span class="_ _11"> </span>is<span class="_ _16"> </span>not<span class="_ _16"> </span>directly<span class="_ _11"> </span>visible<span class="_ _16"> </span>to<span class="_ _11"> </span>the<span class="_ _16"> </span>system<span class="_ _11"> </span>user.<span class="_ _11"> </span>In<span class="_ _16"> </span>these<span class="_ _11"> </span>applications<span class="_ _0"></span>,<span class="_ _16"> </span>the<span class="_ _11"> </span>simplicity<span class="_ _16"> </span>of</div><div class="t m5 x34 h2b y713 ff7 fs1e fc2 sc0 ls0 ws0">a<span class="_ _16"> </span>pipelined<span class="_ _16"> </span>processor<span class="_ _0"></span>,<span class="_ _16"> </span>such<span class="_ _16"> </span>as<span class="_ _16"> </span>the<span class="_ _16"> </span>one<span class="_ _16"> </span>we<span class="_ _16"> </span>have<span class="_ _16"> </span>explored<span class="_ _11"> </span>in<span class="_ _16"> </span>this<span class="_ _16"> </span>chapter,<span class="_ _16"> </span>reduces<span class="_ _16"> </span>its<span class="_ _16"> </span>cost<span class="_ _16"> </span>and<span class="_ _16"> </span>power</div><div class="t m5 x34 h2b y714 ff7 fs1e fc2 sc0 ls0 ws0">requirements<span class="_"> </span>compared<span class="_"> </span>to<span class="_"> </span>higher<span class="_ _1"></span>-performance<span class="_"> </span>models<span class="_ _1"></span>.</div><div class="t m5 x35 h2b y715 ff7 fs1e fc2 sc0 ls0 ws0">More<span class="_"> </span>recently<span class="_ _3"></span>,<span class="_ _11"> </span>as<span class="_ _10"> </span>multicore<span class="_ _11"> </span>processors<span class="_ _10"> </span>have<span class="_ _11"> </span>gained<span class="_ _10"> </span>a<span class="_ _11"> </span>following,<span class="_"> </span>some<span class="_ _10"> </span>have<span class="_ _11"> </span>argued<span class="_ _10"> </span>that<span class="_ _11"> </span>we<span class="_ _10"> </span>could</div><div class="t m5 x34 h2b y716 ff7 fs1e fc2 sc0 ls0 ws0">get<span class="_ _15"> </span>more<span class="_ _15"> </span>overall<span class="_ _21"> </span>computing<span class="_ _15"> </span>power<span class="_ _21"> </span>by<span class="_ _15"> </span>integrating<span class="_ _15"> </span>many<span class="_ _21"> </span>simple<span class="_ _15"> </span>processors<span class="_ _21"> </span>on<span class="_ _15"> </span>a<span class="_ _15"> </span>single<span class="_ _21"> </span>chip<span class="_ _15"> </span>rather</div><div class="t m5 x34 h2b y717 ff7 fs1e fc2 sc0 ls0 ws0">than<span class="_ _10"> </span>a<span class="_ _11"> </span>smaller<span class="_ _11"> </span>number<span class="_ _11"> </span>of<span class="_ _10"> </span>more<span class="_ _11"> </span>complex<span class="_ _11"> </span>ones<span class="_ _1"></span>.<span class="_ _11"> </span>T<span class="_ _0"></span>his<span class="_ _10"> </span>strategy<span class="_ _11"> </span>is<span class="_ _11"> </span>sometimes<span class="_ _11"> </span>referred<span class="_ _10"> </span>to<span class="_ _11"> </span>as<span class="_ _11"> </span>“many-core”</div><div class="t m5 x34 h2b y718 ff7 fs1e fc2 sc0 ls0 ws0">processors<span class="_"> </span>[10].</div><div class="t m5 x26 h26 y465b ff7 fs19 fc2 sc0 ls0 ws0">W<span class="_ _3"></span>e<span class="_"> </span>deﬁned<span class="_ _13"> </span>the<span class="_"> </span>Y86-64<span class="_ _13"> </span>instruction<span class="_"> </span>set<span class="_ _13"> </span>by<span class="_ _13"> </span>starting<span class="_"> </span>with<span class="_ _13"> </span>the<span class="_"> </span>x86-64<span class="_ _13"> </span>instructions</div><div class="t m5 x17 h26 y465c ff7 fs19 fc2 sc0 ls0 ws0">and<span class="_ _13"> </span>simplifying<span class="_"> </span>the<span class="_ _13"> </span>data<span class="_ _13"> </span>types<span class="_ _1"></span>,<span class="_"> </span>address<span class="_ _13"> </span>modes<span class="_ _1"></span>,<span class="_"> </span>and<span class="_ _13"> </span>instruction<span class="_ _13"> </span>encoding<span class="_"> </span>consider<span class="_ _3"></span>-</div><div class="t m5 x17 h26 y465d ff7 fs19 fc2 sc0 ls0 ws0">ably<span class="_ _3"></span>.<span class="_ _13"> </span>T<span class="_ _1"></span>he<span class="_"> </span>resulting<span class="_ _13"> </span>ISA<span class="_ _13"> </span>has<span class="_ _13"> </span>attributes<span class="_ _13"> </span>of<span class="_"> </span>both<span class="_ _13"> </span>RISC<span class="_ _13"> </span>and<span class="_ _13"> </span>CISC<span class="_ _13"> </span>instruction<span class="_ _13"> </span>sets<span class="_ _1"></span>.<span class="_"> </span>W<span class="_ _3"></span>e</div><div class="t m5 x17 h26 y465e ff7 fs19 fc2 sc0 ls0 ws0">then<span class="_"> </span>organized<span class="_"> </span>the<span class="_"> </span>processing<span class="_"> </span>required<span class="_"> </span>for<span class="_"> </span>the<span class="_"> </span>different<span class="_"> </span>instructions<span class="_"> </span>into<span class="_"> </span>a<span class="_"> </span>series</div><div class="t m5 x17 h26 y465f ff7 fs19 fc2 sc0 ls0 ws0">of<span class="_ _13"> </span>ﬁve<span class="_ _13"> </span>stages<span class="_ _0"></span>,<span class="_ _13"> </span>where<span class="_"> </span>the<span class="_ _13"> </span>operations<span class="_ _13"> </span>at<span class="_ _13"> </span>each<span class="_"> </span>stage<span class="_ _13"> </span>vary<span class="_ _13"> </span>according<span class="_ _13"> </span>to<span class="_"> </span>the<span class="_ _13"> </span>instruction</div><div class="t m5 x17 h26 y4660 ff7 fs19 fc2 sc0 ls0 ws0">being<span class="_"> </span>executed.<span class="_"> </span>F<span class="_ _1"></span>rom<span class="_"> </span>this<span class="_ _1"></span>,<span class="_"> </span>we<span class="_"> </span>constructed<span class="_"> </span>the<span class="_"> </span>SEQ<span class="_"> </span>processor,<span class="_"> </span>in<span class="_"> </span>which<span class="_"> </span>an<span class="_"> </span>entire</div><div class="t m5 x17 h26 y4661 ff7 fs19 fc2 sc0 ls0 ws0">instruction<span class="_"> </span>is<span class="_"> </span>executed<span class="_"> </span>every<span class="_"> </span>clock<span class="_"> </span>cycle<span class="_"> </span>by<span class="_"> </span>having<span class="_"> </span>it<span class="_"> </span>ﬂow<span class="_"> </span>through<span class="_"> </span>all<span class="_"> </span>ﬁve<span class="_"> </span>stages<span class="_ _3"></span>.</div><div class="t m5 x26 h26 y4662 ff7 fs19 fc2 sc0 ls0 ws0">Pipelining<span class="_ _16"> </span>improves<span class="_ _16"> </span>the<span class="_ _16"> </span>throughput<span class="_ _14"> </span>performance<span class="_ _16"> </span>of<span class="_ _16"> </span>a<span class="_ _16"> </span>system<span class="_ _14"> </span>by<span class="_ _16"> </span>letting<span class="_ _16"> </span>the</div><div class="t m5 x17 h26 y4663 ff7 fs19 fc2 sc0 ls0 ws0">different<span class="_"> </span>stages<span class="_"> </span>operate<span class="_"> </span>concurrently<span class="_ _3"></span>.<span class="_ _11"> </span>At<span class="_"> </span>any<span class="_"> </span>given<span class="_"> </span>time,<span class="_"> </span>multiple<span class="_"> </span>operations<span class="_"> </span>are</div><div class="t m5 x17 h26 y4664 ff7 fs19 fc2 sc0 ls0 ws0">being<span class="_"> </span>processed<span class="_"> </span>by<span class="_"> </span>the<span class="_"> </span>different<span class="_"> </span>stages<span class="_ _1"></span>.<span class="_ _11"> </span>In<span class="_"> </span>introducing<span class="_"> </span>this<span class="_"> </span>concurrency<span class="_ _7"></span>,<span class="_ _11"> </span>we<span class="_"> </span>must</div><div class="t m5 x17 h26 y4665 ff7 fs19 fc2 sc0 ls0 ws0">be<span class="_ _21"> </span>careful<span class="_ _21"> </span>to<span class="_ _21"> </span>provide<span class="_ _21"> </span>the<span class="_ _f"> </span>same<span class="_ _21"> </span>program-level<span class="_ _21"> </span>behavior<span class="_ _21"> </span>as<span class="_ _21"> </span>would<span class="_ _f"> </span>a<span class="_ _21"> </span>sequential</div><div class="t m5 x17 h26 y4666 ff7 fs19 fc2 sc0 ls0 ws0">execution<span class="_"> </span>of<span class="_ _11"> </span>the<span class="_ _11"> </span>program.<span class="_ _11"> </span>W<span class="_ _1"></span>e<span class="_"> </span>introduced<span class="_ _11"> </span>pipelining<span class="_ _11"> </span>by<span class="_ _11"> </span>reordering<span class="_ _11"> </span>parts<span class="_ _11"> </span>of<span class="_ _11"> </span>SEQ</div><div class="t m5 x17 h46 y4667 ff7 fs19 fc2 sc0 ls0 ws0">to<span class="_ _14"> </span>get<span class="_ _15"> </span>SEQ+<span class="_ _15"> </span>and<span class="_ _15"> </span>then<span class="_ _15"> </span>adding<span class="_ _15"> </span>pipeline<span class="_ _14"> </span>registers<span class="_ _15"> </span>to<span class="_ _15"> </span>create<span class="_ _15"> </span>the<span class="_ _15"> </span>PIPE<span class="ff12">−<span class="_ _14"> </span></span>pipeline.</div></div><div class="pi" data-data='{"ctm":[2.000000,0.000000,0.000000,2.000000,0.000000,0.000000]}'></div></div>
