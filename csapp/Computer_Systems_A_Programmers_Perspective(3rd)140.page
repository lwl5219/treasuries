<div id="pf8c" class="pf w2 h11" data-page-no="8c"><div class="pc pc8c w2 h11"><img class="bi x0 y0 w1 h1" alt="" src="csapp/bg8c.png"/><div class="t m5 xa9 h28 y9b ff6 fs1f fc2 sc0 ls0 ws0">Section<span class="_ _10"> </span>2.3<span class="_ _60"> </span>Integer<span class="_ _10"> </span>Arithmetic<span class="_ _3e"> </span><span class="ffe fs1e">139</span></div><div class="t m5 x15a h26 ye7 ff7 fs19 fc2 sc0 ls0 ws0">[<span class="ff11">(</span>0<span class="_"> </span><span class="ff11 ls42">...</span>0<span class="ff11 ls42">)(<span class="_ _4a"></span><span class="ff7 ls0">1<span class="_ _13"> </span><span class="ff11 ls42">...</span>1<span class="_ _3"></span><span class="ff11 ls42">)(<span class="_ _80"></span><span class="ff7 ls0">0<span class="_"> </span><span class="ff11 ls42">...</span>0<span class="ff11">)</span></span></span></span></span></div><div class="t m5 x151 h45 y159f ff11 fs19 fc2 sc0 ls42 ws0">...</div><div class="t m5 x7f h26 ye7 ff11 fs19 fc2 sc0 ls0 ws0">(<span class="ff7">1<span class="_ _6"> </span></span><span class="ls42">...</span><span class="ff7">1</span>)<span class="ff7">]</span></div><div class="t m5 x17 h26 y15a0 ff7 fs19 fc2 sc0 ls0 ws0">F<span class="_ _1"></span>or<span class="_"> </span>example<span class="_ _1"></span>,<span class="_"> </span>14<span class="_"> </span>can<span class="_"> </span>be<span class="_"> </span>written<span class="_ _13"> </span>as<span class="_"> </span>[<span class="ff11">(</span>0<span class="_"> </span><span class="ff11 ls42">...</span>0<span class="ff11">)(</span>111<span class="_ _1"></span><span class="ff11">)(<span class="ff7">0</span>)<span class="ff7">]<span class="_ _1"></span>.<span class="_"> </span>Consider<span class="_"> </span>a<span class="_"> </span>run<span class="_ _13"> </span>of<span class="_"> </span>ones<span class="_"> </span>from</span></span></div><div class="t m5 x17 h46 y15a1 ff7 fs19 fc2 sc0 ls0 ws0">bit<span class="_ _11"> </span>position<span class="_ _11"> </span><span class="ff11">n<span class="_ _11"> </span></span>down<span class="_ _11"> </span>to<span class="_ _16"> </span>bit<span class="_"> </span>position<span class="_ _16"> </span><span class="ff11">m<span class="_ _10"> </span></span>(<span class="ff11">n<span class="_ _10"> </span><span class="ff12">≥<span class="_ _10"> </span></span>m</span><span class="ls20">).<span class="_"> </span>(F<span class="_ _1"></span>or<span class="_ _16"> </span>the<span class="_"> </span>case<span class="_ _16"> </span>of<span class="_"> </span>14,<span class="_ _16"> </span>we<span class="_ _11"> </span>have<span class="_ _11"> </span><span class="ff11 ls0">n<span class="_ _10"> </span><span class="ff12">=<span class="_ _13"></span><span class="ff7">3</span></span></span></span></div><div class="t m5 x17 h46 y15a2 ff7 fs19 fc2 sc0 ls0 ws0">and<span class="_ _13"> </span><span class="ff11">m<span class="_ _10"> </span><span class="ff12">=<span class="_ _13"></span></span></span>1<span class="_ _1"></span>.)<span class="_ _13"> </span>W<span class="_ _1"></span>e<span class="_ _13"> </span>can<span class="_"> </span>compute<span class="_ _13"> </span>the<span class="_ _13"> </span>effect<span class="_"> </span>of<span class="_ _13"> </span>these<span class="_ _13"> </span>bits<span class="_"> </span>on<span class="_ _13"> </span>the<span class="_ _13"> </span>product<span class="_"> </span>using<span class="_ _13"> </span>either<span class="_ _13"> </span>of</div><div class="t m5 x17 h26 y15a3 ff7 fs19 fc2 sc0 ls0 ws0">two<span class="_"> </span>different<span class="_"> </span>forms:</div><div class="t m5 x62 h46 y15a4 ff7 fs19 fc2 sc0 ls0 ws0">F<span class="_ _1"></span>orm<span class="_"> </span>A:<span class="_ _1f"> </span><span class="ffd">(x&lt;&lt;<span class="ff11">n</span>)<span class="_ _11"> </span>+<span class="_ _16"> </span>(x&lt;&lt;<span class="ff11">(n<span class="_ _13"> </span><span class="ff12">−<span class="_ _10"> </span></span></span></span>1<span class="_ _1"></span><span class="ff11">)<span class="ffd ls4b">)+</span></span></div><div class="t m5 x125 h45 y15a5 ff11 fs19 fc2 sc0 ls42 ws0">...</div><div class="t m5 xa0 h3a y15a4 ffd fs19 fc2 sc0 ls0 ws0">+<span class="_ _11"> </span>(x&lt;&lt;<span class="ff11">m</span>)</div><div class="t m5 x62 h46 y15a6 ff7 fs19 fc2 sc0 ls0 ws0">F<span class="_ _1"></span>orm<span class="_"> </span>B:<span class="_ _1f"> </span><span class="ffd">(x&lt;&lt;<span class="ff11">(n<span class="_ _13"> </span><span class="ff12">+<span class="_ _10"> </span></span></span></span>1<span class="_ _1"></span><span class="ff11">)<span class="ffd">)<span class="_ _11"> </span>-<span class="_ _16"> </span>(x&lt;&lt;</span>m<span class="ffd">)</span></span></div><div class="t m5 x17 h26 y15a7 ff7 fs19 fc2 sc0 ls0 ws0">By<span class="_ _11"> </span>adding<span class="_ _11"> </span>together<span class="_ _11"> </span>the<span class="_"> </span>results<span class="_ _11"> </span>for<span class="_ _11"> </span>each<span class="_ _11"> </span>run,<span class="_ _16"> </span>we<span class="_"> </span>are<span class="_ _11"> </span>able<span class="_ _11"> </span>to<span class="_ _11"> </span>compute<span class="_ _11"> </span><span class="ffd ls4b">x*</span><span class="ff11">K<span class="_ _14"> </span></span>with-</div><div class="t m5 x17 h26 y15a8 ff7 fs19 fc2 sc0 ls0 ws0">out<span class="_ _16"> </span>any<span class="_ _11"> </span>multiplications<span class="_ _1"></span>.<span class="_ _16"> </span>Of<span class="_ _16"> </span>course<span class="_ _1"></span>,<span class="_ _16"> </span>the<span class="_ _16"> </span>trade-off<span class="_ _16"> </span>between<span class="_ _16"> </span>using<span class="_ _11"> </span>combinations<span class="_ _16"> </span>of</div><div class="t m5 x17 h26 y15a9 ff7 fs19 fc2 sc0 ls0 ws0">shifting,<span class="_ _13"> </span>adding<span class="_ _1"></span>,<span class="_ _13"> </span>and<span class="_ _13"> </span>subtracting<span class="_ _6"> </span>versus<span class="_ _13"> </span>a<span class="_ _13"> </span>single<span class="_ _6"> </span>multiplication<span class="_ _13"> </span>instruction<span class="_ _13"> </span>depends</div><div class="t m5 x17 h26 y15aa ff7 fs19 fc2 sc0 ls0 ws0">on<span class="_"> </span>the<span class="_ _11"> </span>relative<span class="_ _11"> </span>speeds<span class="_ _11"> </span>of<span class="_ _11"> </span>these<span class="_ _11"> </span>instructions<span class="_ _1"></span>,<span class="_ _11"> </span>and<span class="_ _11"> </span>these<span class="_"> </span>can<span class="_ _11"> </span>be<span class="_ _11"> </span>highly<span class="_ _11"> </span>machine<span class="_ _11"> </span>de-</div><div class="t m5 x17 h26 y15ab ff7 fs19 fc2 sc0 ls0 ws0">pendent.<span class="_"> </span>Most<span class="_"> </span>compilers<span class="_ _13"> </span>only<span class="_"> </span>perform<span class="_"> </span>this<span class="_"> </span>optimization<span class="_"> </span>when<span class="_"> </span>a<span class="_ _13"> </span>small<span class="_"> </span>number<span class="_"> </span>of</div><div class="t m5 x17 h26 y15ac ff7 fs19 fc2 sc0 ls0 ws0">shifts<span class="_ _1"></span>,<span class="_"> </span>adds<span class="_ _1"></span>,<span class="_"> </span>and<span class="_"> </span>subtractions<span class="_"> </span>sufﬁce<span class="_ _0"></span>.</div><div class="t m5 x17 h47 y15ad ffe fs2b fc1 sc0 ls0 ws0">Practice<span class="_"> </span>Problem<span class="_"> </span>2.39<span class="_ _1f"> </span><span class="fs16">(solution<span class="_"> </span>page<span class="_"> </span>192)</span></div><div class="t m5 x17 h26 y15ae ff7 fs19 fc1 sc0 ls0 ws0">How<span class="_"> </span>could<span class="_ _13"> </span>we<span class="_"> </span>modify<span class="_"> </span>the<span class="_"> </span>expression<span class="_ _13"> </span>for<span class="_"> </span>form<span class="_"> </span>B<span class="_ _13"> </span>for<span class="_"> </span>the<span class="_"> </span>case<span class="_ _13"> </span>where<span class="_"> </span>bit<span class="_"> </span>position<span class="_"> </span><span class="ff11">n</span></div><div class="t m5 x17 h26 y15af ff7 fs19 fc1 sc0 ls0 ws0">is<span class="_"> </span>the<span class="_"> </span>most<span class="_"> </span>signiﬁcant<span class="_"> </span>bit?</div><div class="t m5 x17 h47 y15b0 ffe fs2b fc1 sc0 ls0 ws0">Practice<span class="_"> </span>Problem<span class="_"> </span>2.40<span class="_ _1f"> </span><span class="fs16">(solution<span class="_"> </span>page<span class="_"> </span>192)</span></div><div class="t m5 x17 h26 y15b1 ff7 fs19 fc1 sc0 ls0 ws0">F<span class="_ _1"></span>or<span class="_ _11"> </span>each<span class="_ _11"> </span>of<span class="_ _16"> </span>the<span class="_"> </span>following<span class="_ _16"> </span>values<span class="_"> </span>of<span class="_ _16"> </span><span class="ff11">K<span class="_ _5"></span></span>,<span class="_ _16"> </span>ﬁnd<span class="_"> </span>ways<span class="_ _16"> </span>to<span class="_"> </span>express<span class="_ _16"> </span><span class="ffd ls4b">x*</span><span class="ff11">K<span class="_ _14"> </span></span>using<span class="_ _11"> </span>only<span class="_ _16"> </span>the</div><div class="t m5 x17 h26 y15b2 ff7 fs19 fc1 sc0 ls0 ws0">speciﬁed<span class="_ _16"> </span>number<span class="_ _16"> </span>of<span class="_ _14"> </span>operations<span class="_ _1"></span>,<span class="_ _14"> </span>where<span class="_ _16"> </span>we<span class="_ _16"> </span>consider<span class="_ _16"> </span>both<span class="_ _14"> </span>additions<span class="_ _16"> </span>and<span class="_ _16"> </span>subtrac-</div><div class="t m5 x17 h26 y15b3 ff7 fs19 fc1 sc0 ls0 ws0">tions<span class="_ _13"> </span>to<span class="_ _6"> </span>have<span class="_ _13"> </span>comparable<span class="_ _6"> </span>cost.<span class="_ _13"> </span>Y<span class="_ _7"></span>ou<span class="_ _13"> </span>may<span class="_ _6"> </span>need<span class="_ _13"> </span>to<span class="_ _6"> </span>use<span class="_ _13"> </span>some<span class="_ _6"> </span>tricks<span class="_ _13"> </span>beyond<span class="_ _6"> </span>the<span class="_ _13"> </span>simple</div><div class="t m5 x17 h26 y15b4 ff7 fs19 fc1 sc0 ls0 ws0">form<span class="_"> </span>A<span class="_"> </span>and<span class="_"> </span>B<span class="_"> </span>rules<span class="_"> </span>we<span class="_"> </span>have<span class="_"> </span>considered<span class="_"> </span>so<span class="_"> </span>far.</div><div class="t m5 x52 h31 y15b5 ff11 fs21 fc2 sc0 ls0 ws0">K<span class="_ _74"> </span><span class="ff7">Shifts<span class="_ _26"> </span>Add/Subs<span class="_ _26"> </span>Expression</span></div><div class="t m5 xc h31 y15b6 ff7 fs21 fc2 sc0 lscb ws0">71<span class="_ _19"> </span>1</div><div class="t m5 xee h31 y15b7 ff7 fs21 fc1 sc0 ls0 ws0">30<span class="_ _d3"> </span>4<span class="_ _82"> </span>3</div><div class="t m5 xee h31 y15b8 ff7 fs21 fc1 sc0 ls0 ws0">28<span class="_ _d3"> </span>2<span class="_ _82"> </span>1</div><div class="t m5 xee h31 y15b9 ff7 fs21 fc1 sc0 ls0 ws0">55<span class="_ _d3"> </span>2<span class="_ _82"> </span>2</div><div class="t m5 x17 h47 y15ba ffe fs2b fc1 sc0 ls0 ws0">Practice<span class="_"> </span>Problem<span class="_"> </span>2.41<span class="_ _1f"> </span><span class="fs16">(solution<span class="_"> </span>page<span class="_"> </span>192)</span></div><div class="t m5 x17 h46 y15bb ff7 fs19 fc1 sc0 ls0 ws0">F<span class="_ _1"></span>or<span class="_"> </span>a<span class="_ _13"> </span>run<span class="_"> </span>of<span class="_"> </span>ones<span class="_ _13"> </span>starting<span class="_"> </span>at<span class="_"> </span>bit<span class="_"> </span>position<span class="_ _13"> </span><span class="ff11">n<span class="_ _10"> </span></span>down<span class="_"> </span>to<span class="_ _13"> </span>bit<span class="_"> </span>position<span class="_"> </span><span class="ff11">m<span class="_ _13"> </span></span>(<span class="ff11">n<span class="_ _10"> </span><span class="ff12">≥<span class="_ _13"></span></span>m</span>),<span class="_"> </span>we<span class="_"> </span>saw</div><div class="t m5 x17 h26 y15bc ff7 fs19 fc1 sc0 ls0 ws0">that<span class="_ _13"> </span>we<span class="_ _13"> </span>can<span class="_ _13"> </span>generate<span class="_ _6"> </span>two<span class="_ _13"> </span>forms<span class="_ _13"> </span>of<span class="_ _13"> </span>code<span class="_ _1"></span>,<span class="_"> </span>A<span class="_ _6"> </span>and<span class="_ _13"> </span>B<span class="_ _3"></span>.<span class="_ _13"> </span>How<span class="_ _13"> </span>should<span class="_ _13"> </span>the<span class="_ _13"> </span>compiler<span class="_ _13"> </span>decide</div><div class="t m5 x17 h26 y15bd ff7 fs19 fc1 sc0 ls0 ws0">which<span class="_"> </span>form<span class="_"> </span>to<span class="_"> </span>use?</div><div class="t m5 x17 h41 y15be ffe fs29 fc1 sc0 ls0 ws0">2.3.7<span class="_ _48"> </span><span class="fs19">Dividing<span class="_"> </span>by<span class="_"> </span>Powers<span class="_"> </span>of<span class="_"> </span>2</span></div><div class="t m5 x17 h26 y15bf ff7 fs19 fc1 sc0 ls0 ws0">Integer<span class="_ _16"> </span>division<span class="_ _14"> </span>on<span class="_ _14"> </span>most<span class="_ _16"> </span>machines<span class="_ _14"> </span>is<span class="_ _14"> </span>even<span class="_ _16"> </span>slower<span class="_ _14"> </span>than<span class="_ _14"> </span>integer<span class="_ _16"> </span>multiplication—</div><div class="t m5 x17 h26 y15c0 ff7 fs19 fc1 sc0 ls0 ws0">requiring<span class="_ _13"> </span>30<span class="_"> </span>or<span class="_ _13"> </span>more<span class="_ _13"> </span>clock<span class="_"> </span>c<span class="_ _1"></span>ycles<span class="_ _1"></span>.<span class="_"> </span>Dividing<span class="_ _13"> </span>by<span class="_ _13"> </span>a<span class="_"> </span>power<span class="_ _13"> </span>of<span class="_ _13"> </span>2<span class="_ _13"> </span>can<span class="_"> </span>also<span class="_ _13"> </span>be<span class="_ _13"> </span>performed</div></div><div class="pi" data-data='{"ctm":[2.000000,0.000000,0.000000,2.000000,0.000000,0.000000]}'></div></div>
