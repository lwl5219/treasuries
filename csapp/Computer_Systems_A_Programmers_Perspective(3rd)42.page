<div id="pf2a" class="pf w2 h11" data-page-no="2a"><div class="pc pc2a w2 h11"><img class="bi x0 y0 w1 h1" alt="" src="csapp/bg2a.png"/><div class="t m5 x59 h28 y9b ff6 fs1f fc2 sc0 ls0 ws0">Section<span class="_ _10"> </span>1.2<span class="_ _3d"> </span>Programs<span class="_ _13"> </span>Are<span class="_ _10"> </span>T<span class="_ _1"></span>ranslated<span class="_ _10"> </span>by<span class="_ _10"> </span>Other<span class="_ _10"> </span>Programs<span class="_ _10"> </span>into<span class="_ _10"> </span>Different<span class="_ _10"> </span>Forms<span class="_ _3e"> </span><span class="ffe fs1e">41</span></div><div class="t m5 x5a h3f y506 ff15 fs27 fc1 sc0 ls0 ws0">Pre-</div><div class="t m5 x5b h3f y507 ff15 fs27 fc1 sc0 ls0 ws0">processor</div><div class="t m5 x5c h40 y508 ff16 fs28 fc1 sc0 ls0 ws0">(cpp)</div><div class="t m5 xd h3f y509 ff15 fs27 fc1 sc0 ls0 ws0">Compiler</div><div class="t m5 x5d h40 y50a ff16 fs28 fc1 sc0 ls0 ws0">(cc1)</div><div class="t m5 x39 h3f y50b ff15 fs27 fc1 sc0 ls0 ws0">Assembler</div><div class="t m5 x5e h40 y50c ff16 fs28 fc1 sc0 ls0 ws0">(as)</div><div class="t m5 x5f h3f y50d ff15 fs27 fc1 sc0 ls0 ws0">Linker</div><div class="t m5 x44 h40 y50e ff16 fs28 fc1 sc0 ls0 ws0">(ld)</div><div class="t m5 x31 h40 y50f ff16 fs28 fc1 sc0 ls0 ws0">hello.c<span class="_ _2f"> </span>hello.i<span class="_ _43"> </span>hello.s<span class="_ _44"> </span>hello.o</div><div class="t m5 x60 h40 y510 ff16 fs28 fc1 sc0 ls0 ws0">printf.o</div><div class="t m5 x61 h40 y50f ff16 fs28 fc1 sc0 ls0 ws0">hello</div><div class="t m5 x62 h3f y511 ff15 fs27 fc1 sc0 ls0 ws0">Source</div><div class="t m5 x34 h3f y512 ff15 fs27 fc1 sc0 ls0 ws0">program</div><div class="t m5 x63 h3f y513 ff15 fs27 fc1 sc0 ls0 ws0">(text)</div><div class="t m5 x64 h3f y514 ff15 fs27 fc1 sc0 ls0 ws0">Modified</div><div class="t m5 x65 h3f y515 ff15 fs27 fc1 sc0 ls0 ws0">source</div><div class="t m5 x64 h3f y516 ff15 fs27 fc1 sc0 ls0 ws0">program</div><div class="t m5 x66 h3f y517 ff15 fs27 fc1 sc0 ls0 ws0">(text)</div><div class="t m5 x67 h3f y518 ff15 fs27 fc1 sc0 ls0 ws0">Assembly</div><div class="t m5 x68 h3f y519 ff15 fs27 fc1 sc0 ls0 ws0">program</div><div class="t m5 x69 h3f y51a ff15 fs27 fc1 sc0 ls0 ws0">(text)</div><div class="t m5 x6a h3f y51b ff15 fs27 fc1 sc0 ls0 ws0">Relocatable</div><div class="t m5 x6b h3f y51c ff15 fs27 fc1 sc0 ls0 ws0">object</div><div class="t m5 x6c h3f y51d ff15 fs27 fc1 sc0 ls0 ws0">programs</div><div class="t m5 x6d h3f y51e ff15 fs27 fc1 sc0 ls0 ws0">(binary)</div><div class="t m5 x6e h3f y51f ff15 fs27 fc1 sc0 ls0 ws0">Executable</div><div class="t m5 x6f h3f y520 ff15 fs27 fc1 sc0 ls0 ws0">object</div><div class="t m5 x70 h3f y521 ff15 fs27 fc1 sc0 ls0 ws0">program</div><div class="t m5 x71 h3f y522 ff15 fs27 fc1 sc0 ls0 ws0">(binary)</div><div class="t m5 x17 h2f y523 ffe fs16 fc6 sc0 ls0 ws0">Figure<span class="_"> </span>1.3<span class="_ _c"> </span><span class="fc1">The<span class="_"> </span>compilation<span class="_"> </span>system.</span></div><div class="t m5 x17 h2d y524 ffd fs1e fc2 sc0 ls0 ws0">linux&gt;<span class="_ _e"> </span><span class="ff13">gcc<span class="_ _1f"> </span>-o<span class="_ _1f"> </span>hello<span class="_ _e"> </span>hello.c</span></div><div class="t m5 x17 h26 y525 ff7 fs19 fc2 sc0 ls0 ws0">Here<span class="_ _1"></span>,<span class="_"> </span>the<span class="_ _11"> </span><span class="ff9">gcc<span class="_ _10"> </span></span>compiler<span class="_"> </span>driver<span class="_"> </span>reads<span class="_"> </span>the<span class="_"> </span>source<span class="_ _11"> </span>ﬁle<span class="_"> </span><span class="ffd">hello.c<span class="_ _10"> </span></span>and<span class="_"> </span>translates<span class="_"> </span>it<span class="_"> </span>into</div><div class="t m5 x17 h26 y526 ff7 fs19 fc2 sc0 ls0 ws0">an<span class="_ _15"> </span>executable<span class="_ _21"> </span>object<span class="_ _21"> </span>ﬁle<span class="_ _21"> </span><span class="ffd">hello</span>.<span class="_ _21"> </span>T<span class="_ _1"></span>he<span class="_ _21"> </span>translation<span class="_ _21"> </span>is<span class="_ _21"> </span>performed<span class="_ _21"> </span>in<span class="_ _15"> </span>the<span class="_ _21"> </span>sequence</div><div class="t m5 x17 h26 y527 ff7 fs19 fc2 sc0 ls0 ws0">of<span class="_ _16"> </span>four<span class="_ _16"> </span>phases<span class="_ _16"> </span>shown<span class="_ _16"> </span>in<span class="_ _16"> </span>F<span class="_ _1"></span>igure<span class="_ _16"> </span>1.3.<span class="_ _16"> </span>The<span class="_ _11"> </span>programs<span class="_ _16"> </span>that<span class="_ _16"> </span>perform<span class="_ _16"> </span>the<span class="_ _16"> </span>four<span class="_ _16"> </span>phases</div><div class="t m5 x17 h26 y528 ff7 fs19 fc2 sc0 ls0 ws0">(<span class="ffa">preprocessor<span class="_ _2"></span></span>,<span class="_ _e"> </span><span class="ffa">compiler<span class="_ _2"></span></span>,<span class="_ _e"> </span><span class="ffa">assembler<span class="_ _2"></span></span>,<span class="_ _e"> </span>and<span class="_ _f"> </span><span class="ffa">linker<span class="_ _2"></span></span>)<span class="_ _f"> </span>are<span class="_ _f"> </span>known<span class="_ _f"> </span>collectively<span class="_ _f"> </span>as<span class="_ _e"> </span>the</div><div class="t m5 x17 h26 y529 ffa fs19 fc2 sc0 ls0 ws0">compilation<span class="_"> </span>system<span class="ff7">.</span></div><div class="t m5 x72 h3d y52a ff14 fs26 fc6 sc0 ls0 ws0">.</div><div class="t m5 x26 h26 y52b ffa fs19 fc1 sc0 ls0 ws0">Preprocessing<span class="_ _13"> </span>phase.<span class="_ _a"></span><span class="ff7">T<span class="_ _1"></span>he<span class="_ _13"> </span>preprocessor<span class="_"> </span>(<span class="ffd">cpp</span>)<span class="_ _13"> </span>modiﬁes<span class="_ _13"> </span>the<span class="_"> </span>original<span class="_ _13"> </span>C<span class="_ _13"> </span>program</span></div><div class="t m5 x26 h26 y52c ff7 fs19 fc1 sc0 ls0 ws0">according<span class="_ _15"> </span>to<span class="_ _15"> </span>directives<span class="_ _15"> </span>that<span class="_ _15"> </span>begin<span class="_ _15"> </span>with<span class="_ _15"> </span>the<span class="_ _15"> </span>‘<span class="ffd">#</span>’<span class="_ _21"> </span>character.<span class="_ _14"> </span>F<span class="_ _1"></span>or<span class="_ _15"> </span>example,<span class="_ _15"> </span>the</div><div class="t m5 x26 h26 y52d ffd fs19 fc1 sc0 ls0 ws0">#include<span class="_ _11"> </span>&lt;stdio.h&gt;<span class="_ _15"> </span><span class="ff7">command<span class="_ _14"> </span>in<span class="_ _15"> </span>line<span class="_ _14"> </span>1<span class="_ _14"> </span>of<span class="_ _15"> </span></span>hello.c<span class="_ _14"> </span><span class="ff7">tells<span class="_ _15"> </span>the<span class="_ _14"> </span>preprocessor</span></div><div class="t m5 x26 h26 y52e ff7 fs19 fc1 sc0 ls0 ws0">to<span class="_ _16"> </span>read<span class="_ _11"> </span>the<span class="_ _16"> </span>contents<span class="_ _16"> </span>of<span class="_ _11"> </span>the<span class="_ _16"> </span>system<span class="_ _11"> </span>header<span class="_ _16"> </span>ﬁle<span class="_ _16"> </span><span class="ffd">stdio.h<span class="_ _16"> </span></span>and<span class="_ _11"> </span>insert<span class="_ _16"> </span>it<span class="_ _16"> </span>directly</div><div class="t m5 x26 h26 y52f ff7 fs19 fc1 sc0 ls0 ws0">into<span class="_"> </span>the<span class="_"> </span>program<span class="_ _11"> </span>text.<span class="_"> </span>T<span class="_ _0"></span>he<span class="_"> </span>result<span class="_"> </span>is<span class="_ _11"> </span>another<span class="_"> </span>C<span class="_"> </span>program,<span class="_ _11"> </span>typically<span class="_"> </span>with<span class="_"> </span>the<span class="_ _11"> </span><span class="ffd">.i</span></div><div class="t m5 x26 h26 y530 ff7 fs19 fc1 sc0 ls0 ws0">sufﬁx.</div><div class="t m5 x72 h3d y531 ff14 fs26 fc6 sc0 ls0 ws0">.</div><div class="t m5 x26 h26 y532 ffa fs19 fc1 sc0 ls0 ws0">Compilation<span class="_ _16"> </span>phase.<span class="_ _13"> </span><span class="ff7">T<span class="_ _0"></span>he<span class="_ _16"> </span>compiler<span class="_ _16"> </span>(<span class="ffd">cc1</span>)<span class="_ _16"> </span>translates<span class="_ _16"> </span>the<span class="_ _14"> </span>text<span class="_ _16"> </span>ﬁle<span class="_ _16"> </span><span class="ffd">hello.i<span class="_ _16"> </span></span>into</span></div><div class="t m5 x26 h26 y533 ff7 fs19 fc1 sc0 ls0 ws0">the<span class="_ _15"> </span>text<span class="_ _21"> </span>ﬁle<span class="_ _21"> </span><span class="ffd">hello.s</span>,<span class="_ _f"> </span>which<span class="_ _21"> </span>contains<span class="_ _21"> </span>an<span class="_ _21"> </span><span class="ffa">assembly-language<span class="_ _15"> </span>program</span>.<span class="_ _21"> </span>T<span class="_ _0"></span>his</div><div class="t m5 x26 h26 y534 ff7 fs19 fc1 sc0 ls0 ws0">program<span class="_"> </span>includes<span class="_"> </span>the<span class="_"> </span>following<span class="_"> </span>deﬁnition<span class="_"> </span>of<span class="_"> </span>function<span class="_"> </span><span class="ffd">main</span>:</div><div class="t m5 x73 h2d y535 ff6 fs20 fc6 sc0 ls0 ws0">1<span class="_ _1c"> </span><span class="ffd fs1e fc2">main:</span></div><div class="t m5 x73 h2d y536 ff6 fs20 fc6 sc0 ls0 ws0">2<span class="_ _45"> </span><span class="ffd fs1e fc2">subq<span class="_ _46"> </span>$8,<span class="_ _e"> </span>%rsp</span></div><div class="t m5 x73 h2d y537 ff6 fs20 fc6 sc0 ls0 ws0">3<span class="_ _45"> </span><span class="ffd fs1e fc2">movl<span class="_ _46"> </span>$.LC0,<span class="_ _e"> </span>%edi</span></div><div class="t m5 x73 h2d y538 ff6 fs20 fc6 sc0 ls0 ws0">4<span class="_ _45"> </span><span class="ffd fs1e fc2">call<span class="_ _46"> </span>puts</span></div><div class="t m5 x73 h2d y539 ff6 fs20 fc6 sc0 ls0 ws0">5<span class="_ _45"> </span><span class="ffd fs1e fc2">movl<span class="_ _46"> </span>$0,<span class="_ _e"> </span>%eax</span></div><div class="t m5 x73 h2e y53a ff6 fs20 fc6 sc0 ls0 ws0">6</div><div class="t m5 x74 h2d y53b ffd fs1e fc2 sc0 ls0 ws0">addq<span class="_ _46"> </span>$8,<span class="_ _e"> </span>%rsp</div><div class="t m5 x73 h2d y53c ff6 fs20 fc6 sc0 ls0 ws0">7<span class="_ _45"> </span><span class="ffd fs1e fc2">ret</span></div><div class="t m5 x30 h26 y53d ff7 fs19 fc2 sc0 ls0 ws0">Each<span class="_ _f"> </span>of<span class="_ _e"> </span>lines<span class="_ _f"> </span>2–7<span class="_ _e"> </span>in<span class="_ _f"> </span>this<span class="_ _e"> </span>deﬁnition<span class="_ _f"> </span>describes<span class="_ _e"> </span>one<span class="_ _21"> </span>low-level<span class="_ _e"> </span>machine-</div><div class="t m5 x26 h26 y53e ff7 fs19 fc2 sc0 ls0 ws0">language<span class="_ _11"> </span>instruction<span class="_ _11"> </span>in<span class="_ _16"> </span>a<span class="_"> </span>textual<span class="_ _16"> </span>form.<span class="_ _11"> </span>Assembly<span class="_ _11"> </span>language<span class="_ _11"> </span>is<span class="_ _16"> </span>useful<span class="_"> </span>because</div><div class="t m5 x26 h26 y53f ff7 fs19 fc2 sc0 ls0 ws0">it<span class="_ _16"> </span>provides<span class="_ _16"> </span>a<span class="_ _14"> </span>common<span class="_ _16"> </span>output<span class="_ _14"> </span>language<span class="_ _16"> </span>for<span class="_ _16"> </span>different<span class="_ _14"> </span>compilers<span class="_ _16"> </span>for<span class="_ _14"> </span>different</div><div class="t m5 x26 h26 y540 ff7 fs19 fc2 sc0 ls0 ws0">high-level<span class="_ _16"> </span>languages<span class="_ _1"></span>.<span class="_ _16"> </span>F<span class="_ _3"></span>or<span class="_ _16"> </span>example,<span class="_ _16"> </span>C<span class="_ _16"> </span>compilers<span class="_ _11"> </span>and<span class="_ _16"> </span>F<span class="_ _1"></span>ortran<span class="_ _16"> </span>compilers<span class="_ _16"> </span>both</div><div class="t m5 x26 h26 y541 ff7 fs19 fc2 sc0 ls0 ws0">generate<span class="_"> </span>output<span class="_"> </span>ﬁles<span class="_"> </span>in<span class="_"> </span>the<span class="_"> </span>same<span class="_"> </span>assembly<span class="_"> </span>language<span class="_ _1"></span>.</div><div class="t m5 x72 h3d y542 ff14 fs26 fc6 sc0 ls0 ws0">.</div><div class="t m5 x26 h26 y543 ffa fs19 fc1 sc0 ls0 ws0">Assembly<span class="_ _16"> </span>phase<span class="_ _1"></span>.<span class="_"> </span><span class="ff7">Next,<span class="_ _16"> </span>the<span class="_ _16"> </span>assembler<span class="_ _11"> </span>(<span class="ffd">as</span>)<span class="_ _16"> </span>translates<span class="_ _16"> </span><span class="ffd">hello.s<span class="_ _16"> </span></span>into<span class="_ _16"> </span>machine-</span></div><div class="t m5 x26 h26 y544 ff7 fs19 fc1 sc0 ls0 ws0">language<span class="_"> </span>instructions<span class="_ _1"></span>,<span class="_"> </span>packages<span class="_"> </span>them<span class="_"> </span>in<span class="_ _13"> </span>a<span class="_"> </span>form<span class="_"> </span>known<span class="_"> </span>as<span class="_"> </span>a<span class="_"> </span><span class="ffa">relocatable<span class="_"> </span>object</span></div><div class="t m5 x26 h26 y545 ffa fs19 fc1 sc0 ls0 ws0">program<span class="ff7">,<span class="_"> </span>and<span class="_ _11"> </span>stores<span class="_"> </span>the<span class="_ _11"> </span>result<span class="_ _11"> </span>in<span class="_"> </span>the<span class="_ _11"> </span>object<span class="_ _11"> </span>ﬁle<span class="_"> </span><span class="ffd">hello.o</span>.<span class="_ _11"> </span>This<span class="_"> </span>ﬁle<span class="_"> </span>is<span class="_ _11"> </span>a<span class="_"> </span>binary</span></div><div class="t m5 x26 h26 y546 ff7 fs19 fc1 sc0 ls0 ws0">ﬁle<span class="_ _14"> </span>containing<span class="_ _14"> </span>17<span class="_ _14"> </span>bytes<span class="_ _14"> </span>to<span class="_ _15"> </span>encode<span class="_ _14"> </span>the<span class="_ _14"> </span>instructions<span class="_ _14"> </span>for<span class="_ _14"> </span>function<span class="_ _14"> </span><span class="ffd">main</span><span class="lse">.I<span class="_ _42"></span>fw<span class="_ _42"></span>e</span></div><div class="t m5 x26 h26 y547 ff7 fs19 fc1 sc0 ls0 ws0">were<span class="_"> </span>to<span class="_"> </span>view<span class="_"> </span><span class="ffd">hello.o<span class="_ _10"> </span></span>with<span class="_"> </span>a<span class="_"> </span>text<span class="_"> </span>editor,<span class="_"> </span>it<span class="_"> </span>would<span class="_"> </span>appear<span class="_"> </span>to<span class="_"> </span>be<span class="_"> </span>gibberish.</div></div><div class="pi" data-data='{"ctm":[2.000000,0.000000,0.000000,2.000000,0.000000,0.000000]}'></div></div>
