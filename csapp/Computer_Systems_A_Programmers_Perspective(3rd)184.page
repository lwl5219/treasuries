<div id="pfb8" class="pf w2 h11" data-page-no="b8"><div class="pc pcb8 w2 h11"><img class="bi x0 y0 w1 h1" alt="" src="csapp/bgb8.png"/><div class="t m5 x107 h28 y9b ff6 fs1f fc2 sc0 ls0 ws0">Solutions<span class="_ _10"> </span>to<span class="_ _10"> </span>Practice<span class="_ _10"> </span>Problems<span class="_ _1b"> </span><span class="ffe fs1e">183</span></div><div class="t m5 x34 h26 y9c ff7 fs19 fc2 sc0 ls0 ws0">A.<span class="_ _1f"> </span><span class="ffd">x<span class="_ _11"> </span>&amp;<span class="_ _16"> </span>0xFF</span></div><div class="t m5 x34 h26 y12a4 ff7 fs19 fc2 sc0 ls2a ws0">B.<span class="_ _66"> </span><span class="ffd ls0">x<span class="_ _11"> </span>^<span class="_ _16"> </span>~0xFF</span></div><div class="t m5 x34 h26 y328 ff7 fs19 fc2 sc0 ls22 ws0">C.<span class="_ _24"> </span><span class="ffd ls0">x<span class="_ _16"> </span>|<span class="_ _11"> </span>0xFF</span></div><div class="t m5 x17 h26 y1d3e ff7 fs19 fc2 sc0 ls0 ws0">T<span class="_ _1"></span>hese<span class="_ _13"> </span>expressions<span class="_ _6"> </span>are<span class="_ _13"> </span>typical<span class="_ _6"> </span>of<span class="_ _13"> </span>the<span class="_ _13"> </span>kind<span class="_ _6"> </span>commonly<span class="_ _13"> </span>found<span class="_ _6"> </span>in<span class="_ _13"> </span>performing<span class="_ _6"> </span>low-level</div><div class="t m5 x17 h26 y11bb ff7 fs19 fc2 sc0 ls0 ws0">bit<span class="_"> </span>operations<span class="_ _1"></span>.<span class="_"> </span>T<span class="_ _0"></span>he<span class="_"> </span>expression<span class="_"> </span><span class="ffd">~0xFF<span class="_ _10"> </span></span>creates<span class="_"> </span>a<span class="_"> </span>mask<span class="_ _11"> </span>where<span class="_"> </span>the<span class="_"> </span>8<span class="_"> </span>least-signiﬁcant</div><div class="t m5 x17 h26 y1d3f ff7 fs19 fc2 sc0 ls0 ws0">bits<span class="_ _14"> </span>equal<span class="_ _15"> </span>0<span class="_ _15"> </span>and<span class="_ _15"> </span>the<span class="_ _15"> </span>rest<span class="_ _15"> </span>equal<span class="_ _15"> </span>1.<span class="_ _14"> </span>Observe<span class="_ _15"> </span>that<span class="_ _15"> </span>such<span class="_ _15"> </span>a<span class="_ _15"> </span>mask<span class="_ _15"> </span>will<span class="_ _15"> </span>be<span class="_ _14"> </span>generated</div><div class="t m5 x17 h26 y1d40 ff7 fs19 fc2 sc0 ls0 ws0">regardless<span class="_ _11"> </span>of<span class="_ _16"> </span>the<span class="_ _16"> </span>word<span class="_ _11"> </span>size.<span class="_ _11"> </span>By<span class="_ _11"> </span>contrast,<span class="_ _16"> </span>the<span class="_ _16"> </span>expression<span class="_ _16"> </span><span class="ffd">0xFFFFFF00<span class="_ _11"> </span></span>would<span class="_ _16"> </span>only</div><div class="t m5 x17 h26 y1d41 ff7 fs19 fc2 sc0 ls0 ws0">work<span class="_"> </span>when<span class="_"> </span>data<span class="_"> </span>type<span class="_"> </span><span class="ffd">int<span class="_ _10"> </span></span>is<span class="_"> </span>32<span class="_"> </span>bits<span class="_ _1"></span>.</div><div class="t m5 x17 h28 y1d42 ffe fs1e fc6 sc0 ls0 ws0">Solution<span class="_"> </span>to<span class="_"> </span>Problem<span class="_"> </span>2.13<span class="_ _e"> </span><span class="fs16">(page<span class="_"> </span>92)</span></div><div class="t m5 x17 h26 y1d43 ff7 fs19 fc1 sc0 ls0 ws0">T<span class="_ _1"></span>hese<span class="_ _16"> </span>problems<span class="_ _16"> </span>help<span class="_ _16"> </span>you<span class="_ _16"> </span>think<span class="_ _16"> </span>about<span class="_ _16"> </span>the<span class="_ _16"> </span>relation<span class="_ _14"> </span>between<span class="_ _16"> </span>Boolean<span class="_ _16"> </span>operations</div><div class="t m5 x17 h26 y1d44 ff7 fs19 fc1 sc0 ls0 ws0">and<span class="_"> </span>typical<span class="_"> </span>ways<span class="_"> </span>that<span class="_"> </span>programmers<span class="_"> </span>apply<span class="_"> </span>masking<span class="_"> </span>operations<span class="_ _1"></span>.<span class="_"> </span>Here<span class="_"> </span>is<span class="_"> </span>the<span class="_"> </span>code:</div><div class="t m5 x17 h2d y1d45 ffd fs1e fc2 sc0 ls0 ws0">/*<span class="_ _e"> </span>Declarations<span class="_ _1f"> </span>of<span class="_ _1f"> </span>functions<span class="_ _e"> </span>implementing<span class="_ _1f"> </span>operations<span class="_ _e"> </span>bis<span class="_ _1f"> </span>and<span class="_ _1f"> </span>bic<span class="_ _e"> </span>*/</div><div class="t m5 x17 h2d y1d46 ffd fs1e fc2 sc0 ls0 ws0">int<span class="_ _e"> </span>bis(int<span class="_ _1f"> </span>x,<span class="_ _1f"> </span>int<span class="_ _e"> </span>m);</div><div class="t m5 x17 h2d y1d47 ffd fs1e fc2 sc0 ls0 ws0">int<span class="_ _e"> </span>bic(int<span class="_ _1f"> </span>x,<span class="_ _1f"> </span>int<span class="_ _e"> </span>m);</div><div class="t m5 x17 h2d y1d48 ffd fs1e fc2 sc0 ls0 ws0">/*<span class="_ _e"> </span>Compute<span class="_ _1f"> </span>x|y<span class="_ _1f"> </span>using<span class="_ _e"> </span>only<span class="_ _1f"> </span>calls<span class="_ _e"> </span>to<span class="_ _1f"> </span>functions<span class="_ _1f"> </span>bis<span class="_ _e"> </span>and<span class="_ _1f"> </span>bic<span class="_ _e"> </span>*/</div><div class="t m5 x17 h2d y1d49 ffd fs1e fc2 sc0 ls0 ws0">int<span class="_ _e"> </span>bool_or(int<span class="_ _1f"> </span>x,<span class="_ _1f"> </span>int<span class="_ _e"> </span>y)<span class="_ _1f"> </span>{</div><div class="t m5 x72 h2d y1d4a ffd fs1e fc2 sc0 ls0 ws0">int<span class="_ _e"> </span>result<span class="_ _1f"> </span>=<span class="_ _1f"> </span>bis(x,y);</div><div class="t m5 x72 h2d y1d4b ffd fs1e fc2 sc0 ls0 ws0">return<span class="_ _e"> </span>result;</div><div class="t m5 x17 h2d y1d4c ffd fs1e fc2 sc0 ls0 ws0">}</div><div class="t m5 x17 h2d y1d4d ffd fs1e fc2 sc0 ls0 ws0">/*<span class="_ _e"> </span>Compute<span class="_ _1f"> </span>x^y<span class="_ _1f"> </span>using<span class="_ _e"> </span>only<span class="_ _1f"> </span>calls<span class="_ _e"> </span>to<span class="_ _1f"> </span>functions<span class="_ _1f"> </span>bis<span class="_ _e"> </span>and<span class="_ _1f"> </span>bic<span class="_ _e"> </span>*/</div><div class="t m5 x17 h2d y1d4e ffd fs1e fc2 sc0 ls0 ws0">int<span class="_ _e"> </span>bool_xor(int<span class="_ _1f"> </span>x,<span class="_ _1f"> </span>int<span class="_ _e"> </span>y)<span class="_ _1f"> </span>{</div><div class="t m5 x72 h2d y1d4f ffd fs1e fc2 sc0 ls0 ws0">int<span class="_ _e"> </span>result<span class="_ _1f"> </span>=<span class="_ _1f"> </span>bis(bic(x,y),<span class="_ _e"> </span>bic(y,x));</div><div class="t m5 x72 h2d y1d50 ffd fs1e fc2 sc0 ls0 ws0">return<span class="_ _e"> </span>result;</div><div class="t m5 x17 h2d y1d51 ffd fs1e fc2 sc0 ls0 ws0">}</div><div class="t m5 x26 h26 y1d52 ff7 fs19 fc2 sc0 lsd ws0">Th<span class="_ _2"></span>e<span class="_ _16"> </span><span class="ffd ls0">bis<span class="_ _10"> </span><span class="ff7">operation<span class="_ _11"> </span>is<span class="_ _11"> </span>equivalent<span class="_ _11"> </span>to<span class="_"> </span>Boolean<span class="_ _11"> </span><span class="ff9">or</span>—a<span class="_ _11"> </span>bit<span class="_ _11"> </span>is<span class="_"> </span>set<span class="_ _11"> </span>in<span class="_ _11"> </span></span>z<span class="_ _11"> </span><span class="ff7">if<span class="_"> </span>either<span class="_ _11"> </span>this</span></span></div><div class="t m5 x17 h26 y1d53 ff7 fs19 fc2 sc0 ls0 ws0">bit<span class="_ _13"> </span>is<span class="_"> </span>set<span class="_ _13"> </span>in<span class="_"> </span><span class="ffd">x<span class="_ _13"> </span></span>or<span class="_"> </span>it<span class="_ _13"> </span>is<span class="_"> </span>set<span class="_ _13"> </span>in<span class="_"> </span><span class="ffd">m</span>.<span class="_ _13"> </span>On<span class="_ _13"> </span>the<span class="_"> </span>other<span class="_ _13"> </span>hand,<span class="_"> </span><span class="ffd">bic(x,<span class="_ _11"> </span>m)<span class="_ _10"> </span></span>is<span class="_ _13"> </span>equivalent<span class="_"> </span>to<span class="_ _13"> </span><span class="ffd ls4b">x&amp;~<span class="_ _49"></span>m<span class="_ _49"></span><span class="ff7 ls0">;</span></span></div><div class="t m5 x17 h26 y1d54 ff7 fs19 fc2 sc0 ls0 ws0">we<span class="_"> </span>want<span class="_"> </span>the<span class="_ _13"> </span>result<span class="_"> </span>to<span class="_"> </span>equal<span class="_"> </span>1<span class="_"> </span>only<span class="_"> </span>when<span class="_ _13"> </span>the<span class="_"> </span>corresponding<span class="_"> </span>bit<span class="_"> </span>of<span class="_"> </span><span class="ffd">x<span class="_ _13"> </span></span>is<span class="_"> </span>1<span class="_"> </span>and<span class="_"> </span>of<span class="_"> </span><span class="ffd">m<span class="_ _10"> </span></span>is</div><div class="t m5 x17 h26 y1d55 ff7 fs19 fc2 sc0 ls0 ws0">0.</div><div class="t m5 x26 h26 y1d56 ff7 fs19 fc2 sc0 ls0 ws0">Given<span class="_"> </span>that,<span class="_"> </span>we<span class="_ _13"> </span>can<span class="_"> </span>implement<span class="_"> </span><span class="ffd">|<span class="_ _13"> </span></span>with<span class="_"> </span>a<span class="_"> </span>single<span class="_"> </span>call<span class="_ _13"> </span>to<span class="_"> </span><span class="ffd">bis</span>.<span class="_"> </span>T<span class="_ _7"></span>o<span class="_"> </span>implement<span class="_"> </span><span class="ffd">^</span><span class="lsda">,w<span class="_ _4a"></span>e</span></div><div class="t m5 x17 h26 y1d57 ff7 fs19 fc2 sc0 ls0 ws0">take<span class="_"> </span>advantage<span class="_"> </span>of<span class="_"> </span>the<span class="_"> </span>property</div><div class="t m5 x1a h46 y1d58 ff11 fs19 fc2 sc0 ls0 ws0">x<span class="_ _11"> </span><span class="ffd">^<span class="_ _10"> </span></span>y<span class="_ _10"> </span><span class="ff12">=<span class="_ _10"> </span></span>(x<span class="_ _11"> </span><span class="ffd ls42">&amp;~<span class="_ _80"></span><span class="ff11 ls57">y)<span class="_ _6"> </span><span class="ffd ls0">|<span class="_ _10"> </span><span class="ff11">(</span>~<span class="ff11">x<span class="_ _11"> </span></span>&amp;<span class="_ _13"> </span></span>y)</span></span></div><div class="t m5 x17 h28 y1d59 ffe fs1e fc6 sc0 ls0 ws0">Solution<span class="_"> </span>to<span class="_"> </span>Problem<span class="_"> </span>2.14<span class="_ _e"> </span><span class="fs16">(page<span class="_"> </span>93)</span></div><div class="t m5 x17 h26 y587 ff7 fs19 fc1 sc0 ls0 ws0">T<span class="_ _1"></span>his<span class="_ _14"> </span>problem<span class="_ _15"> </span>highlights<span class="_ _14"> </span>the<span class="_ _14"> </span>relation<span class="_ _14"> </span>between<span class="_ _14"> </span>bit-level<span class="_ _15"> </span>Boolean<span class="_ _14"> </span>operations<span class="_ _14"> </span>and</div><div class="t m5 x17 h26 y588 ff7 fs19 fc1 sc0 ls0 ws0">logical<span class="_"> </span>operations<span class="_ _11"> </span>in<span class="_ _11"> </span>C.<span class="_"> </span>A<span class="_ _11"> </span>common<span class="_ _11"> </span>programming<span class="_"> </span>error<span class="_ _11"> </span>is<span class="_ _11"> </span>to<span class="_"> </span>use<span class="_ _11"> </span>a<span class="_ _11"> </span>bit-level<span class="_"> </span>oper<span class="_ _0"></span>-</div><div class="t m5 x17 h26 y589 ff7 fs19 fc1 sc0 ls0 ws0">ation<span class="_"> </span>when<span class="_"> </span>a<span class="_"> </span>logical<span class="_"> </span>one<span class="_"> </span>is<span class="_"> </span>intended,<span class="_"> </span>or<span class="_"> </span>vice<span class="_"> </span>versa.</div></div><div class="pi" data-data='{"ctm":[2.000000,0.000000,0.000000,2.000000,0.000000,0.000000]}'></div></div>
