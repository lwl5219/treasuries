<div id="pfde" class="pf w2 h11" data-page-no="de"><div class="pc pcde w2 h11"><img class="bi x0 y0 w1 h1" alt="" src="csapp/bgde.png"/><div class="t m5 x6a h28 y9b ff6 fs1f fc2 sc0 ls0 ws0">Section<span class="_ _10"> </span>3.4<span class="_ _60"> </span>Accessing<span class="_ _10"> </span>Information<span class="_ _3e"> </span><span class="ffe fs1e">221</span></div><div class="t m5 x17 h31 y1398 ff7 fs21 fc2 sc0 ls0 ws0">Instruction<span class="_ _7b"> </span>Effect<span class="_ _13f"> </span>Description</div><div class="t m5 x17 h32 yc94 ff9 fs21 fc2 sc0 ls0 ws0">mo<span class="_ _0"></span>vs<span class="_ _13d"> </span><span class="ff11">S<span class="_ _2"></span><span class="ff7">,<span class="_"> </span></span><span class="ls149">RR<span class="_ _106"></span><span class="ff12 ls0">←<span class="_ _23"> </span><span class="ff6">SignExtend<span class="_ _0"></span><span class="ff11">(S<span class="_ _2"></span>)<span class="_ _9a"> </span><span class="ff7">Move<span class="_"> </span>with<span class="_"> </span>sign<span class="_"> </span>extension</span></span></span></span></span></span></div><div class="t m5 xee h31 yc98 ffd fs1e fc2 sc0 ls0 ws0">movsbw<span class="_ _140"> </span><span class="ff7 fs21">Move<span class="_"> </span>sign-extended<span class="_"> </span>byte<span class="_"> </span>to<span class="_"> </span>word</span></div><div class="t m5 xee h2d yc9b ffd fs1e fc2 sc0 ls0 ws0">movsbl</div><div class="t m5 x1b1 h31 y2253 ff7 fs21 fc2 sc0 ls0 ws0">Move<span class="_"> </span>sign-extended<span class="_"> </span>byte<span class="_"> </span>to<span class="_"> </span>double<span class="_"> </span>word</div><div class="t m5 xee h31 yc9e ffd fs1e fc2 sc0 ls0 ws0">movswl<span class="_ _140"> </span><span class="ff7 fs21">Move<span class="_"> </span>sign-extended<span class="_"> </span>word<span class="_"> </span>to<span class="_"> </span>double<span class="_"> </span>word</span></div><div class="t m5 xee h31 y2254 ffd fs1e fc2 sc0 ls0 ws0">movsbq<span class="_ _140"> </span><span class="ff7 fs21">Move<span class="_"> </span>sign-extended<span class="_"> </span>byte<span class="_"> </span>to<span class="_"> </span>quad<span class="_"> </span>word</span></div><div class="t m5 xee h31 yca4 ffd fs1e fc2 sc0 ls0 ws0">movswq<span class="_ _140"> </span><span class="ff7 fs21">Move<span class="_"> </span>sign-extended<span class="_"> </span>word<span class="_"> </span>to<span class="_"> </span>quad<span class="_"> </span>word</span></div><div class="t m5 xee h31 y1034 ffd fs1e fc2 sc0 ls0 ws0">movslq<span class="_ _140"> </span><span class="ff7 fs21">Move<span class="_"> </span>sign-extended<span class="_"> </span>double<span class="_"> </span>word<span class="_"> </span>to<span class="_"> </span>quad<span class="_"> </span>word</span></div><div class="t m5 x17 h32 ycaa ffd fs1e fc2 sc0 ls0 ws0">cltq<span class="_ _11c"> </span>%rax<span class="_ _25"> </span><span class="ff12 fs21">←<span class="_ _60"> </span><span class="ff6">SignExtend<span class="ff7">(</span></span></span>%eax<span class="ff7 fs21">)<span class="_ _26"> </span>Sign-extend<span class="_"> </span></span>%eax<span class="_ _10"> </span><span class="ff7 fs21">to<span class="_"> </span></span>%rax</div><div class="t m5 x17 h34 y2255 ffe fs16 fc6 sc0 ls0 ws0">Figure<span class="_ _10"> </span>3.6<span class="_ _66"> </span><span class="fc1">Sign-extending<span class="_"> </span>data<span class="_ _13"> </span>movement<span class="_ _10"> </span>instructions.<span class="_ _13"> </span><span class="ff6">The<span class="_ _10"> </span><span class="ff1b lsc6">movs<span class="_ _10"> </span></span>instructions<span class="_ _10"> </span>have</span></span></div><div class="t m5 x17 h34 y2256 ff6 fs16 fc1 sc0 ls0 ws0">a<span class="_ _10"> </span>register<span class="_ _11"> </span>or<span class="_ _11"> </span>memory<span class="_ _11"> </span>location<span class="_ _11"> </span>as<span class="_ _11"> </span>the<span class="_ _10"> </span>source<span class="_ _11"> </span>and<span class="_ _10"> </span>a<span class="_ _11"> </span>register<span class="_ _11"> </span>as<span class="_ _11"> </span>the<span class="_ _11"> </span>destination.<span class="_ _10"> </span>The</div><div class="t m5 x1e0 h3a y2257 ffd fs19 fc1 sc0 ls0 ws0">cltq</div><div class="t m5 x17 h3a ycde ff6 fs16 fc1 sc0 ls0 ws0">instruction<span class="_ _10"> </span>is<span class="_ _11"> </span>speciﬁc<span class="_ _10"> </span>to<span class="_ _10"> </span>registers<span class="_ _11"> </span><span class="ffd fs19">%eax<span class="_ _10"> </span></span>and<span class="_ _11"> </span><span class="ffd fs19">%rax</span>.</div><div class="t m5 x26 h26 y2258 ff7 fs19 fc1 sc0 ls0 ws0">Note<span class="_ _15"> </span>the<span class="_ _15"> </span>absence<span class="_ _15"> </span>of<span class="_ _14"> </span>an<span class="_ _15"> </span>explicit<span class="_ _15"> </span>instruction<span class="_ _15"> </span>to<span class="_ _15"> </span>zero-extend<span class="_ _15"> </span>a<span class="_ _15"> </span>4-byte<span class="_ _15"> </span>source</div><div class="t m5 x17 h26 y2259 ff7 fs19 fc1 sc0 ls0 ws0">value<span class="_ _16"> </span>to<span class="_ _16"> </span>an<span class="_ _11"> </span>8-byte<span class="_ _16"> </span>destination<span class="_ _16"> </span>in<span class="_ _16"> </span>F<span class="_ _0"></span>igure<span class="_ _16"> </span>3.5.<span class="_ _16"> </span>Such<span class="_ _11"> </span>an<span class="_ _16"> </span>instruction<span class="_ _16"> </span>would<span class="_ _16"> </span>logically</div><div class="t m5 x17 h26 y225a ff7 fs19 fc1 sc0 ls0 ws0">be<span class="_ _16"> </span>named<span class="_ _14"> </span><span class="ffd">movzlq</span>,<span class="_ _14"> </span>but<span class="_ _16"> </span>this<span class="_ _14"> </span>instruction<span class="_ _16"> </span>does<span class="_ _14"> </span>not<span class="_ _14"> </span>exist.<span class="_ _16"> </span>Instead,<span class="_ _14"> </span>this<span class="_ _14"> </span>type<span class="_ _16"> </span>of<span class="_ _14"> </span>data</div><div class="t m5 x17 h26 y225b ff7 fs19 fc1 sc0 ls0 ws0">movement<span class="_ _11"> </span>can<span class="_ _11"> </span>be<span class="_ _16"> </span>implemented<span class="_"> </span>using<span class="_ _16"> </span>a<span class="_ _11"> </span><span class="ffd">movl<span class="_ _11"> </span></span>instruction<span class="_ _11"> </span>having<span class="_ _16"> </span>a<span class="_"> </span>register<span class="_ _16"> </span>as<span class="_ _11"> </span>the</div><div class="t m5 x17 h26 y225c ff7 fs19 fc1 sc0 ls0 ws0">destination.<span class="_ _16"> </span>This<span class="_ _16"> </span>technique<span class="_ _16"> </span>takes<span class="_ _14"> </span>advantage<span class="_ _14"> </span>of<span class="_ _14"> </span>the<span class="_ _16"> </span>property<span class="_ _14"> </span>that<span class="_ _14"> </span>an<span class="_ _16"> </span>instruction</div><div class="t m5 x17 h26 y225d ff7 fs19 fc1 sc0 ls0 ws0">generating<span class="_ _16"> </span>a<span class="_ _14"> </span>4-byte<span class="_ _14"> </span>value<span class="_ _14"> </span>with<span class="_ _16"> </span>a<span class="_ _14"> </span>register<span class="_ _14"> </span>as<span class="_ _14"> </span>the<span class="_ _14"> </span>destination<span class="_ _16"> </span>will<span class="_ _14"> </span>ﬁll<span class="_ _14"> </span>the<span class="_ _14"> </span>upper<span class="_ _16"> </span>4</div><div class="t m5 x17 h26 y225e ff7 fs19 fc1 sc0 ls0 ws0">bytes<span class="_"> </span>with<span class="_ _13"> </span>zeros<span class="_ _1"></span>.<span class="_"> </span>Otherwise<span class="_ _0"></span>,<span class="_"> </span>for<span class="_ _13"> </span>64-bit<span class="_"> </span>destinations<span class="_ _1"></span>,<span class="_"> </span>moving<span class="_"> </span>with<span class="_ _13"> </span>sign<span class="_"> </span>extension<span class="_"> </span>is</div><div class="t m5 x17 h26 y225f ff7 fs19 fc1 sc0 ls0 ws0">supported<span class="_ _13"> </span>for<span class="_"> </span>all<span class="_ _13"> </span>three<span class="_"> </span>source<span class="_ _13"> </span>types<span class="_ _1"></span>,<span class="_"> </span>and<span class="_ _13"> </span>moving<span class="_ _13"> </span>with<span class="_"> </span>zero<span class="_ _13"> </span>extension<span class="_"> </span>is<span class="_ _13"> </span>supported</div><div class="t m5 x17 h26 y2260 ff7 fs19 fc1 sc0 ls0 ws0">for<span class="_"> </span>the<span class="_"> </span>two<span class="_"> </span>smaller<span class="_"> </span>source<span class="_"> </span>types<span class="_ _1"></span>.</div><div class="t m5 x26 h26 y2261 ff7 fs19 fc1 sc0 ls0 ws0">F<span class="_ _1"></span>igure<span class="_ _1f"> </span>3.6<span class="_ _1f"> </span>also<span class="_ _e"> </span>documents<span class="_ _1f"> </span>the<span class="_ _1f"> </span><span class="ffd">cltq<span class="_ _1f"> </span></span>instruction.<span class="_ _e"> </span>This<span class="_ _e"> </span>instruction<span class="_ _1f"> </span>has<span class="_ _e"> </span>no</div><div class="t m5 x17 h26 y2262 ff7 fs19 fc1 sc0 ls0 ws0">operands—it<span class="_ _6"> </span>always<span class="_ _13"> </span>uses<span class="_ _6"> </span>register<span class="_ _13"> </span><span class="ffd">%eax<span class="_ _6"> </span></span>as<span class="_ _13"> </span>its<span class="_ _6"> </span>source<span class="_ _13"> </span>and<span class="_ _6"> </span><span class="ffd">%rax<span class="_ _13"> </span></span>as<span class="_ _6"> </span>the<span class="_ _13"> </span>destination<span class="_ _6"> </span>for</div><div class="t m5 x17 h26 y2263 ff7 fs19 fc1 sc0 ls0 ws0">the<span class="_"> </span>sign-extended<span class="_ _11"> </span>result.<span class="_"> </span>It<span class="_ _11"> </span>therefore<span class="_"> </span>has<span class="_ _11"> </span>the<span class="_"> </span>exact<span class="_"> </span>same<span class="_ _11"> </span>effect<span class="_"> </span>as<span class="_ _11"> </span>the<span class="_"> </span>instruction</div><div class="t m5 x17 h26 y2264 ffd fs19 fc1 sc0 ls0 ws0">movslq<span class="_ _11"> </span>%eax,<span class="_ _16"> </span>%rax<span class="ff7">,<span class="_"> </span>but<span class="_"> </span>it<span class="_"> </span>has<span class="_"> </span>a<span class="_"> </span>more<span class="_"> </span>compact<span class="_"> </span>encoding.</span></div><div class="t m5 x17 h47 y2265 ffe fs2b fc1 sc0 ls0 ws0">Practice<span class="_"> </span>Problem<span class="_"> </span>3.2<span class="_ _1f"> </span><span class="fs16">(solution<span class="_"> </span>page<span class="_"> </span>361)</span></div><div class="t m5 x17 h26 y2266 ff7 fs19 fc1 sc0 ls0 ws0">F<span class="_ _1"></span>or<span class="_ _11"> </span>each<span class="_ _11"> </span>of<span class="_ _11"> </span>the<span class="_ _11"> </span>following<span class="_ _11"> </span>lines<span class="_ _11"> </span>of<span class="_ _11"> </span>assembly<span class="_ _11"> </span>language,<span class="_"> </span>determine<span class="_ _16"> </span>the<span class="_"> </span>appropriate</div><div class="t m5 x17 h26 y2267 ff7 fs19 fc1 sc0 ls0 ws0">instruction<span class="_ _16"> </span>sufﬁx<span class="_ _16"> </span>based<span class="_ _16"> </span>on<span class="_ _16"> </span>the<span class="_ _16"> </span>operands<span class="_ _1"></span>.<span class="_ _16"> </span>(F<span class="_ _1"></span>or<span class="_ _16"> </span>example,<span class="_ _16"> </span><span class="ffd">mov<span class="_ _16"> </span></span>can<span class="_ _16"> </span>be<span class="_ _16"> </span>rewritten<span class="_ _16"> </span>as</div><div class="t m5 x17 h26 y2268 ffd fs19 fc1 sc0 ls0 ws0">movb<span class="ff7">,<span class="_"> </span></span>movw<span class="ff7">,<span class="_"> </span></span>movl<span class="ff7 ls140">,o<span class="_ _4a"></span>r<span class="ffd ls0">movq<span class="ff7">.)</span></span></span></div><div class="t m5 x72 h2d y2269 ffd fs1e fc2 sc0 ls0 ws0">mov<span class="_ _8c"> </span>%eax,<span class="_ _e"> </span>(%rsp)</div><div class="t m5 x72 h2d y226a ffd fs1e fc2 sc0 ls0 ws0">mov</div><div class="t m5 x242 h2d y226b ffd fs1e fc2 sc0 ls0 ws0">(%rax),<span class="_ _e"> </span>%dx</div><div class="t m5 x72 h2d y226c ffd fs1e fc2 sc0 ls0 ws0">mov</div><div class="t m5 x242 h2d y226d ffd fs1e fc2 sc0 ls0 ws0">$0xFF,<span class="_ _e"> </span>%bl</div><div class="t m5 x72 h2d y226e ffd fs1e fc2 sc0 ls0 ws0">mov</div><div class="t m5 x242 h2d y8d5 ffd fs1e fc2 sc0 ls0 ws0">(%rsp,%rdx,4),<span class="_ _e"> </span>%dl</div><div class="t m5 x72 h2d y226f ffd fs1e fc2 sc0 ls0 ws0">mov</div><div class="t m5 x242 h2d y2270 ffd fs1e fc2 sc0 ls0 ws0">(%rdx),<span class="_ _e"> </span>%rax</div><div class="t m5 x72 h2d y2271 ffd fs1e fc2 sc0 ls0 ws0">mov</div><div class="t m5 x242 h2d y144c ffd fs1e fc2 sc0 ls0 ws0">%dx,<span class="_ _e"> </span>(%rax)</div></div><div class="pi" data-data='{"ctm":[2.000000,0.000000,0.000000,2.000000,0.000000,0.000000]}'></div></div>
