<div id="pffa" class="pf w2 h11" data-page-no="fa"><div class="pc pcfa w2 h11"><img class="bi x0 y0 w1 h1" alt="" src="csapp/bgfa.png"/><div class="t m5 x1dc h28 y9b ff6 fs1f fc2 sc0 ls0 ws0">Section<span class="_ _10"> </span>3.6<span class="_ _60"> </span>Control<span class="_ _3e"> </span><span class="ffe fs1e">249</span></div><div class="t m5 x34 h26 ye7 ff7 fs19 fc2 sc0 ls0 ws0">A.<span class="_ _1f"> </span>Rewrite<span class="_"> </span>the<span class="_"> </span>goto<span class="_"> </span>version<span class="_"> </span>of<span class="_"> </span><span class="ffd">absdiff_se<span class="_ _10"> </span></span>based<span class="_"> </span>on<span class="_"> </span>this<span class="_"> </span>alternate<span class="_"> </span>rule<span class="_ _1"></span>.</div><div class="t m5 x34 h26 y10aa ff7 fs19 fc2 sc0 ls0 ws0">B<span class="_ _3"></span>.<span class="_ _1d"> </span>Can<span class="_"> </span>you<span class="_"> </span>think<span class="_"> </span>of<span class="_"> </span>any<span class="_"> </span>reasons<span class="_"> </span>for<span class="_"> </span>choosing<span class="_"> </span>one<span class="_"> </span>rule<span class="_"> </span>over<span class="_"> </span>the<span class="_"> </span>other?</div><div class="t m5 x17 h47 y25be ffe fs2b fc1 sc0 ls0 ws0">Practice<span class="_"> </span>Problem<span class="_"> </span>3.18<span class="_ _1f"> </span><span class="fs16">(solution<span class="_"> </span>page<span class="_"> </span>368)</span></div><div class="t m5 x17 h26 y25bf ff7 fs19 fc1 sc0 ls0 ws0">Starting<span class="_"> </span>with<span class="_"> </span>C<span class="_"> </span>code<span class="_"> </span>of<span class="_"> </span>the<span class="_"> </span>form</div><div class="t m5 x17 h2d y25c0 ffd fs1e fc2 sc0 ls0 ws0">short<span class="_ _e"> </span>test(short<span class="_ _1f"> </span>x,<span class="_ _1f"> </span>short<span class="_ _e"> </span>y,<span class="_ _1f"> </span>short<span class="_ _e"> </span>z)<span class="_ _1f"> </span>{</div><div class="t m5 x1b6 h2d y25c1 ffd fs1e fc2 sc0 ls0 ws0">short<span class="_ _e"> </span>val<span class="_ _1f"> </span>=</div><div class="t m5 x15c h2d y25c2 ffd fs1e fc2 sc0 ls0 ws0">;</div><div class="t m5 x1b6 h2d y25c3 ffd fs1e fc2 sc0 ls0 ws0">if<span class="_ _e"> </span>(</div><div class="t m5 x32 h2d y25c4 ffd fs1e fc2 sc0 ls33 ws0">){</div><div class="t m5 x21e h2d y25c5 ffd fs1e fc2 sc0 ls0 ws0">if<span class="_ _e"> </span>(</div><div class="t m5 x154 h2d y25c6 ffd fs1e fc2 sc0 ls0 ws0">)</div><div class="t m5 x155 h2d y25c7 ffd fs1e fc2 sc0 ls0 ws0">val<span class="_ _e"> </span>=</div><div class="t m5 x21d h2d y25c8 ffd fs1e fc2 sc0 ls0 ws0">;</div><div class="t m5 x21e h2d y25c9 ffd fs1e fc2 sc0 ls0 ws0">else</div><div class="t m5 x155 h2d y25ca ffd fs1e fc2 sc0 ls0 ws0">val<span class="_ _e"> </span>=</div><div class="t m5 x21d h2d y25cb ffd fs1e fc2 sc0 ls0 ws0">;</div><div class="t m5 x1b6 h2d y25cc ffd fs1e fc2 sc0 ls0 ws0">}<span class="_ _e"> </span>else<span class="_ _1f"> </span>if<span class="_ _1f"> </span>(</div><div class="t m5 x25 h2d y25cd ffd fs1e fc2 sc0 ls0 ws0">)</div><div class="t m5 x21e h2d y25ce ffd fs1e fc2 sc0 ls0 ws0">val<span class="_ _e"> </span>=</div><div class="t m5 x59 h2d y25cf ffd fs1e fc2 sc0 ls0 ws0">;</div><div class="t m5 x1b6 h2d y25d0 ffd fs1e fc2 sc0 ls0 ws0">return<span class="_ _e"> </span>val;</div><div class="t m5 x17 h2d y25d1 ffd fs1e fc2 sc0 ls0 ws0">}</div><div class="t m5 x17 h26 y25d2 ff9 fs19 fc2 sc0 ls0 ws0">gcc<span class="_ _10"> </span><span class="ff7">generates<span class="_"> </span>the<span class="_"> </span>following<span class="_"> </span>assembly<span class="_"> </span>code:</span></div><div class="t m5 xee h61 y25d3 ff13 fs35 fc6 sc0 ls0 ws0">short<span class="_ _f"> </span>test(short<span class="_ _f"> </span>x,<span class="_ _f"> </span>short<span class="_ _e"> </span>y,<span class="_ _21"> </span>short<span class="_ _f"> </span>z)</div><div class="t m5 xee h61 y25d4 ff13 fs35 fc6 sc0 ls0 ws0">x<span class="_ _f"> </span>in<span class="_ _f"> </span>%rdi,<span class="_ _f"> </span>y<span class="_ _e"> </span>in<span class="_ _21"> </span>%rsi,<span class="_ _f"> </span>z<span class="_ _e"> </span>in<span class="_ _21"> </span>%rdx</div><div class="t m5 x17 h2d y25d5 ffd fs1e fc2 sc0 ls0 ws0">test:</div><div class="t m5 x72 h2d y25d6 ffd fs1e fc2 sc0 ls0 ws0">leaq<span class="_ _46"> </span>(%rdx,%rsi),<span class="_ _e"> </span>%rax</div><div class="t m5 x72 h2d y25d7 ffd fs1e fc2 sc0 ls0 ws0">subq<span class="_ _46"> </span>%rdi,<span class="_ _e"> </span>%rax</div><div class="t m5 x72 h2d y25d8 ffd fs1e fc2 sc0 ls0 ws0">cmpq<span class="_ _46"> </span>$5,<span class="_ _e"> </span>%rdx</div><div class="t m5 x72 h2d y25d9 ffd fs1e fc2 sc0 ls0 ws0">jle<span class="_ _8c"> </span>.L2</div><div class="t m5 x72 h2d y25da ffd fs1e fc2 sc0 ls0 ws0">cmpq<span class="_ _46"> </span>$2,<span class="_ _e"> </span>%rsi</div><div class="t m5 x72 h2d y25db ffd fs1e fc2 sc0 ls0 ws0">jle<span class="_ _8c"> </span>.L3</div><div class="t m5 x72 h2d y25dc ffd fs1e fc2 sc0 ls0 ws0">movq<span class="_ _46"> </span>%rdi,<span class="_ _e"> </span>%rax</div><div class="t m5 x72 h2d y25dd ffd fs1e fc2 sc0 ls0 ws0">idivq<span class="_ _3f"> </span>%rdx,<span class="_ _e"> </span>%rax</div><div class="t m5 x72 h2d y25de ffd fs1e fc2 sc0 ls0 ws0">ret</div><div class="t m5 x17 h2d y25df ffd fs1e fc2 sc0 ls0 ws0">.L3:</div><div class="t m5 x72 h2d y25e0 ffd fs1e fc2 sc0 ls0 ws0">movq<span class="_ _46"> </span>%rdi,<span class="_ _e"> </span>%rax</div><div class="t m5 x72 h2d y25e1 ffd fs1e fc2 sc0 ls0 ws0">idivq<span class="_ _3f"> </span>%rsi,<span class="_ _e"> </span>%rax</div><div class="t m5 x72 h2d y25e2 ffd fs1e fc2 sc0 ls0 ws0">ret</div><div class="t m5 x17 h2d y25e3 ffd fs1e fc2 sc0 ls0 ws0">.L2:</div><div class="t m5 x72 h2d y25e4 ffd fs1e fc2 sc0 ls0 ws0">cmpq<span class="_ _46"> </span>$3,<span class="_ _e"> </span>%rdx</div><div class="t m5 x72 h2d y25e5 ffd fs1e fc2 sc0 ls0 ws0">jge<span class="_ _8c"> </span>.L4</div><div class="t m5 x72 h2d y25e6 ffd fs1e fc2 sc0 ls0 ws0">movq<span class="_ _46"> </span>%rdx,<span class="_ _e"> </span>%rax</div><div class="t m5 x72 h2d y25e7 ffd fs1e fc2 sc0 ls0 ws0">idivq<span class="_ _3f"> </span>%rsi,<span class="_ _e"> </span>%rax</div><div class="t m5 x17 h2d y25e8 ffd fs1e fc2 sc0 ls0 ws0">.L4:</div><div class="t m5 x72 h2d y25e9 ffd fs1e fc2 sc0 ls0 ws0">rep;<span class="_ _e"> </span>ret</div><div class="t m5 x26 h26 ybe2 ff7 fs19 fc2 sc0 ls0 ws0">F<span class="_ _1"></span>ill<span class="_"> </span>in<span class="_"> </span>the<span class="_"> </span>missing<span class="_"> </span>expressions<span class="_"> </span>in<span class="_"> </span>the<span class="_"> </span>C<span class="_"> </span>code.</div></div><div class="pi" data-data='{"ctm":[2.000000,0.000000,0.000000,2.000000,0.000000,0.000000]}'></div></div>
