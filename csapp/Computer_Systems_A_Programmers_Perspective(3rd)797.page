<div id="pf31d" class="pf w2 h11" data-page-no="31d"><div class="pc pc31d w2 h11"><img class="bi x0 y0 w1 h1" alt="" src="csapp/bg31d.png"/><div class="t m5 x14 h28 y9b ffe fs1e fc2 sc0 ls0 ws0">796<span class="_ _1b"> </span><span class="ff6 fs1f">Chapter<span class="_ _10"> </span>8<span class="_ _3d"> </span>Exceptional<span class="_ _10"> </span>Control<span class="_ _10"> </span>Flow</span></div><div class="t m5 x1d h42 ye7 ff6 fs29 fc6 sc0 ls0 ws0">Sending<span class="_ _11"> </span>Signals<span class="_ _16"> </span>with<span class="_ _16"> </span>the<span class="_ _11"> </span><span class="ffd fs2b">/bin/kill<span class="_ _16"> </span></span>Program</div><div class="t m5 x1d h26 y5bd ff7 fs19 fc1 sc0 lsd ws0">Th<span class="_ _2"></span>e<span class="_"> </span><span class="ffd ls0">/bin/kill<span class="_ _6"> </span><span class="ff7">program<span class="_ _6"> </span>sends<span class="_ _13"> </span>an<span class="_ _6"> </span>arbitrary<span class="_ _6"> </span>signal<span class="_ _13"> </span>to<span class="_ _a"> </span>another<span class="_ _13"> </span>process<span class="_ _3"></span>.<span class="_ _13"> </span>F<span class="_ _3"></span>or<span class="_ _13"> </span>example<span class="_ _1"></span>,</span></span></div><div class="t m5 x1d h26 y5be ff7 fs19 fc1 sc0 ls0 ws0">the<span class="_"> </span>command</div><div class="t m5 x1d h2d y6808 ffd fs1e fc2 sc0 ls0 ws0">linux&gt;<span class="_ _e"> </span><span class="ff13">/bin/kill<span class="_ _1f"> </span>-9<span class="_ _1f"> </span>15213</span></div><div class="t m5 x1d h26 y6809 ff7 fs19 fc2 sc0 ls0 ws0">sends<span class="_ _11"> </span>signal<span class="_ _11"> </span>9<span class="_ _11"> </span>(SIGKILL)<span class="_"> </span>to<span class="_ _11"> </span>process<span class="_ _11"> </span>15213.<span class="_ _11"> </span>A<span class="_ _11"> </span>negative<span class="_ _11"> </span>PID<span class="_ _11"> </span>causes<span class="_ _11"> </span>the<span class="_ _11"> </span>signal<span class="_ _11"> </span>to</div><div class="t m5 x1d h26 y680a ff7 fs19 fc2 sc0 ls0 ws0">be<span class="_"> </span>sent<span class="_"> </span>to<span class="_"> </span>every<span class="_"> </span>process<span class="_"> </span>in<span class="_"> </span>process<span class="_"> </span>group<span class="_"> </span>PID<span class="_ _3"></span>.<span class="_"> </span>F<span class="_ _1"></span>or<span class="_"> </span>example,<span class="_"> </span>the<span class="_"> </span>command</div><div class="t m5 x1d h2d y680b ffd fs1e fc2 sc0 ls0 ws0">linux&gt;<span class="_ _e"> </span><span class="ff13">/bin/kill<span class="_ _1f"> </span>-9<span class="_ _1f"> </span>-15213</span></div><div class="t m5 x1d h26 y680c ff7 fs19 fc2 sc0 ls0 ws0">sends<span class="_ _16"> </span>a<span class="_ _16"> </span>SIGKILL<span class="_ _16"> </span>signal<span class="_ _16"> </span>to<span class="_ _16"> </span>every<span class="_ _16"> </span>process<span class="_ _14"> </span>in<span class="_ _16"> </span>process<span class="_ _16"> </span>group<span class="_ _16"> </span>15213.<span class="_ _16"> </span>Note<span class="_ _16"> </span>that<span class="_ _16"> </span>we</div><div class="t m5 x1d h26 y680d ff7 fs19 fc2 sc0 ls0 ws0">use<span class="_"> </span>the<span class="_"> </span>complete<span class="_ _11"> </span>path<span class="_"> </span><span class="ffd">/bin/kill<span class="_ _11"> </span></span>here<span class="_"> </span>because<span class="_"> </span>some<span class="_ _11"> </span>Unix<span class="_"> </span>shells<span class="_"> </span>have<span class="_ _11"> </span>their<span class="_"> </span>own</div><div class="t m5 x1d h26 y680e ff7 fs19 fc2 sc0 ls0 ws0">built-in<span class="_"> </span><span class="ffd">kill<span class="_ _10"> </span></span>command.</div><div class="t m5 x1d h42 y680f ff6 fs29 fc6 sc0 ls0 ws0">Sending<span class="_ _11"> </span>Signals<span class="_ _16"> </span>from<span class="_ _16"> </span>the<span class="_ _11"> </span>Keyboard</div><div class="t m5 x1d h26 y6810 ff7 fs19 fc1 sc0 ls0 ws0">Unix<span class="_ _13"> </span>shells<span class="_"> </span>use<span class="_ _13"> </span>the<span class="_ _13"> </span>abstraction<span class="_ _13"> </span>of<span class="_"> </span>a<span class="_ _13"> </span><span class="ffa">job<span class="_ _13"> </span></span>to<span class="_ _13"> </span>represent<span class="_ _13"> </span>the<span class="_ _13"> </span>processes<span class="_"> </span>that<span class="_ _13"> </span>are<span class="_ _13"> </span>created</div><div class="t m5 x1d h26 y6811 ff7 fs19 fc1 sc0 ls0 ws0">as<span class="_ _11"> </span>a<span class="_ _16"> </span>result<span class="_ _11"> </span>of<span class="_ _16"> </span>evaluating<span class="_ _11"> </span>a<span class="_ _11"> </span>single<span class="_ _16"> </span>command<span class="_ _11"> </span>line.<span class="_"> </span>At<span class="_ _16"> </span>any<span class="_ _11"> </span>point<span class="_ _16"> </span>in<span class="_ _11"> </span>time,<span class="_ _11"> </span>there<span class="_ _11"> </span>is<span class="_ _16"> </span>at</div><div class="t m5 x1d h26 y6812 ff7 fs19 fc1 sc0 ls0 ws0">most<span class="_"> </span>one<span class="_ _13"> </span>foreground<span class="_"> </span>job<span class="_"> </span>and<span class="_"> </span>zero<span class="_ _13"> </span>or<span class="_"> </span>more<span class="_"> </span>background<span class="_ _13"> </span>jobs<span class="_ _1"></span>.<span class="_"> </span>F<span class="_ _1"></span>or<span class="_"> </span>example<span class="_ _1"></span>,<span class="_"> </span>typing</div><div class="t m5 x1d h2d y6813 ffd fs1e fc2 sc0 ls0 ws0">linux&gt;<span class="_ _e"> </span><span class="ff13">ls<span class="_ _1f"> </span>|<span class="_ _1f"> </span>sort</span></div><div class="t m5 x1d h26 y6814 ff7 fs19 fc2 sc0 ls0 ws0">creates<span class="_ _6"> </span>a<span class="_ _13"> </span>foreground<span class="_ _a"> </span>job<span class="_ _13"> </span>consisting<span class="_ _6"> </span>of<span class="_ _6"> </span>two<span class="_ _13"> </span>processes<span class="_ _6"> </span>connected<span class="_ _6"> </span>by<span class="_ _13"> </span>a<span class="_ _6"> </span>Unix<span class="_ _6"> </span>pipe:<span class="_ _13"> </span>one</div><div class="t m5 x1d h26 y6815 ff7 fs19 fc2 sc0 ls0 ws0">running<span class="_ _16"> </span>the<span class="_ _11"> </span><span class="ffd">ls<span class="_ _16"> </span></span>program,<span class="_ _16"> </span>the<span class="_ _16"> </span>other<span class="_ _16"> </span>running<span class="_ _16"> </span>the<span class="_ _11"> </span><span class="ffd">sort<span class="_ _16"> </span></span>program.<span class="_ _16"> </span>T<span class="_ _1"></span>he<span class="_ _16"> </span>shell<span class="_ _16"> </span>creates</div><div class="t m5 x1d h26 y6816 ff7 fs19 fc2 sc0 ls0 ws0">a<span class="_ _16"> </span>separate<span class="_ _14"> </span>process<span class="_ _14"> </span>group<span class="_ _14"> </span>for<span class="_ _16"> </span>each<span class="_ _14"> </span>job.<span class="_ _16"> </span>T<span class="_ _7"></span>ypically<span class="_ _3"></span>,<span class="_ _14"> </span>the<span class="_ _14"> </span>process<span class="_ _14"> </span>group<span class="_ _14"> </span>ID<span class="_ _14"> </span>is<span class="_ _16"> </span>taken</div><div class="t m5 x1d h26 y6817 ff7 fs19 fc2 sc0 ls0 ws0">from<span class="_ _14"> </span>one<span class="_ _14"> </span>of<span class="_ _15"> </span>the<span class="_ _14"> </span>parent<span class="_ _14"> </span>processes<span class="_ _14"> </span>in<span class="_ _15"> </span>the<span class="_ _14"> </span>job.<span class="_ _16"> </span>F<span class="_ _1"></span>or<span class="_ _15"> </span>example<span class="_ _1"></span>,<span class="_ _15"> </span>Figure<span class="_ _14"> </span>8.28<span class="_ _14"> </span>shows<span class="_ _14"> </span>a</div><div class="t m5 x1d h26 y6818 ff7 fs19 fc2 sc0 ls0 ws0">shell<span class="_ _13"> </span>with<span class="_ _13"> </span>one<span class="_ _13"> </span>foreground<span class="_"> </span>job<span class="_ _13"> </span>and<span class="_ _13"> </span>two<span class="_ _13"> </span>background<span class="_ _13"> </span>jobs<span class="_ _1"></span>.<span class="_ _13"> </span>The<span class="_ _13"> </span>parent<span class="_ _13"> </span>process<span class="_ _13"> </span>in<span class="_ _13"> </span>the</div><div class="t m5 x1d h26 y6819 ff7 fs19 fc2 sc0 ls0 ws0">foreground<span class="_"> </span>job<span class="_"> </span>has<span class="_ _13"> </span>a<span class="_"> </span>PID<span class="_"> </span>of<span class="_"> </span>20<span class="_"> </span>and<span class="_"> </span>a<span class="_ _13"> </span>process<span class="_"> </span>group<span class="_"> </span>ID<span class="_"> </span>of<span class="_"> </span>20.<span class="_ _13"> </span>The<span class="_"> </span>parent<span class="_ _13"> </span>process</div><div class="t m5 x1d h26 y681a ff7 fs19 fc2 sc0 ls0 ws0">has<span class="_"> </span>created<span class="_"> </span>two<span class="_"> </span>children,<span class="_"> </span>each<span class="_"> </span>of<span class="_"> </span>which<span class="_"> </span>are<span class="_"> </span>also<span class="_"> </span>members<span class="_"> </span>of<span class="_"> </span>process<span class="_"> </span>group<span class="_"> </span>20.</div><div class="t m5 x14 h2f y681b ffe fs16 fc6 sc0 ls0 ws0">Figure<span class="_"> </span>8.28</div><div class="t m5 x14 h2f y681c ffe fs16 fc1 sc0 ls0 ws0">Foreground<span class="_ _f"> </span>and</div><div class="t m5 x14 h2f y681d ffe fs16 fc1 sc0 ls0 ws0">background<span class="_ _14"> </span>process</div><div class="t m5 x14 h2f y681e ffe fs16 fc1 sc0 ls0 ws0">groups.</div><div class="t m5 x36 h3f y681f ff9f fs27 fc1 sc0 ls0 ws0">Back-</div><div class="t m5 x13c h3f y6820 ff9f fs27 fc1 sc0 ls0 ws0">ground</div><div class="t m5 x1e7 h3f y6821 ff9f fs27 fc1 sc0 ls0 ws0">job #1</div><div class="t m5 x1b2 h3f y681f ff9f fs27 fc1 sc0 ls0 ws0">Fore-</div><div class="t m5 x10f h3f y6820 ff9f fs27 fc1 sc0 ls0 ws0">ground</div><div class="t m5 x157 h3f y6821 ff9f fs27 fc1 sc0 ls0 ws0">job</div><div class="t m5 x40 h3f y6822 ffa0 fs27 fc1 sc0 ls0 ws0">Background</div><div class="t m5 x1ab h3f y6823 ffa0 fs27 fc1 sc0 ls0 ws0">process group 32</div><div class="t m5 x238 h3f y6824 ffa0 fs27 fc1 sc0 ls0 ws0">Foreg<span class="_ _0"></span>round</div><div class="t m5 x1af h3f y6825 ffa0 fs27 fc1 sc0 ls0 ws0">process group 20</div><div class="t m5 x19b h3f y6826 ff9f fs27 fc1 sc0 ls0 ws0">Shell</div><div class="t m5 x241 h3f y6827 ff9f fs27 fc1 sc0 ls0 ws0">Child</div><div class="t m5 xb3 h3f y6828 ff9f fs27 fc1 sc0 ls0 ws0">Child</div><div class="t m5 x43 h3f y681f ff9f fs27 fc1 sc0 ls0 ws0">Back-</div><div class="t m5 x1e0 h3f y6820 ff9f fs27 fc1 sc0 ls0 ws0">ground</div><div class="t m5 x111 h3f y6821 ff9f fs27 fc1 sc0 ls0 ws0">job #2</div><div class="t m5 x1f3 h3f y6822 ffa0 fs27 fc1 sc0 ls0 ws0">Background</div><div class="t m5 x3c h3f y6823 ffa0 fs27 fc1 sc0 ls0 ws0">process group 40</div><div class="t m5 x15e h70 y6829 ffa1 fs27 fc1 sc0 ls0 ws0">pid<span class="ff24"></span>20</div><div class="t m5 x1ec h70 y682a ffa1 fs27 fc1 sc0 ls0 ws0">pgid<span class="ff24"></span>20</div><div class="t m5 xd4 h70 y682b ffa1 fs27 fc1 sc0 ls0 ws0">pid<span class="ff24"></span>10</div><div class="t m5 xb8 h70 y682c ffa1 fs27 fc1 sc0 ls0 ws0">pgid<span class="ff24"></span>10</div><div class="t m5 x15c h70 y682d ffa1 fs27 fc1 sc0 ls0 ws0">pid<span class="ff24"></span>21</div><div class="t m5 x20 h70 y682e ffa1 fs27 fc1 sc0 ls0 ws0">pgid<span class="ff24"></span>20</div><div class="t m5 x49 h70 y682d ffa1 fs27 fc1 sc0 ls0 ws0">pid<span class="ff24"></span>22</div><div class="t m5 xbe h70 y682e ffa1 fs27 fc1 sc0 ls0 ws0">pgid<span class="ff24"></span>20</div><div class="t m5 xda h70 y682f ffa1 fs27 fc1 sc0 ls0 ws0">pid<span class="ff24"></span>32</div><div class="t m5 xda h70 y6830 ffa1 fs27 fc1 sc0 ls0 ws0">pgid<span class="ff24"></span>32</div><div class="t m5 x273 h70 y682f ffa1 fs27 fc1 sc0 ls0 ws0">pid<span class="ff24"></span>40</div><div class="t m5 x273 h70 y6830 ffa1 fs27 fc1 sc0 ls0 ws0">pgid<span class="ff24"></span>40</div></div><div class="pi" data-data='{"ctm":[2.000000,0.000000,0.000000,2.000000,0.000000,0.000000]}'></div></div>
