<div id="pf43a" class="pf w2 h11" data-page-no="43a"><div class="pc pc43a w2 h11"><img class="bi x0 y0 w1 h1" alt="" src="csapp/bg43a.png"/><div class="t m5 x1fc h28 y9b ff6 fs1f fc2 sc0 ls0 ws0">Section<span class="_ _10"> </span>A.2<span class="_ _60"> </span>Error-Handling<span class="_ _10"> </span>Wrappers<span class="_ _1b"> </span><span class="ffe fs1e">1081</span></div><div class="t m5 x144 h2c y27f ffa fs16 fc2 sc0 ls0 ws0">code/src/csapp<span class="_ _1"></span>.c</div><div class="t m5 x2c h2d y280 ff6 fs20 fc6 sc0 ls0 ws0">1<span class="_ _1c"> </span><span class="ffd fs1e fc2">void<span class="_ _1f"> </span>Kill(pid_t<span class="_ _e"> </span>pid,<span class="_ _1f"> </span>int<span class="_ _1f"> </span>signum)</span></div><div class="t m5 x2c h2d y281 ff6 fs20 fc6 sc0 ls0 ws0">2<span class="_ _1c"> </span><span class="ffd fs1e fc2">{</span></div><div class="t m5 x2c h2d y283 ff6 fs20 fc6 sc0 ls0 ws0">3<span class="_ _20"> </span><span class="ffd fs1e fc2">int<span class="_ _e"> </span>rc;</span></div><div class="t m5 x2c h2e y284 ff6 fs20 fc6 sc0 ls0 ws0">4</div><div class="t m5 x2c h2e y69c3 ff6 fs20 fc6 sc0 ls0 ws0">5</div><div class="t m5 x142 h2d y285 ffd fs1e fc2 sc0 ls0 ws0">if<span class="_ _e"> </span>((rc<span class="_ _1f"> </span>=<span class="_ _1f"> </span>kill(pid,<span class="_ _e"> </span>signum))<span class="_ _1f"> </span>&lt;<span class="_ _e"> </span>0)</div><div class="t m5 x2c h2d y286 ff6 fs20 fc6 sc0 ls0 ws0">6<span class="_ _70"> </span><span class="ffd fs1e fc2">unix_error(&quot;Kill<span class="_ _e"> </span>error&quot;);</span></div><div class="t m5 x2c h2d y287 ff6 fs20 fc6 sc0 ls0 ws0">7<span class="_ _1c"> </span><span class="ffd fs1e fc2">}</span></div><div class="t m5 x144 h2c y288 ffa fs16 fc2 sc0 ls0 ws0">code/src/csapp<span class="_ _1"></span>.c</div><div class="t m5 x17 h2f y289 ffe fs16 fc6 sc0 ls0 ws0">Figure<span class="_"> </span>A.3<span class="_ _66"> </span><span class="fc1">Wrapper<span class="_"> </span>for<span class="_"> </span>Unix-style</span></div><div class="t m5 xe7 h3a y60de ffd fs19 fc1 sc0 ls0 ws0">kill<span class="_ _10"> </span><span class="ffe fs16">function.</span></div><div class="t m5 x144 h2c y8654 ffa fs16 fc1 sc0 ls0 ws0">code/src/csapp<span class="_ _1"></span>.c</div><div class="t m5 x2c h2d y8655 ff6 fs20 fc6 sc0 ls0 ws0">1<span class="_ _1c"> </span><span class="ffd fs1e fc2">void<span class="_ _1f"> </span>Pthread_detach(pthread_t<span class="_ _e"> </span>tid)<span class="_ _1f"> </span>{</span></div><div class="t m5 x2c h2d y8656 ff6 fs20 fc6 sc0 ls0 ws0">2<span class="_ _20"> </span><span class="ffd fs1e fc2">int<span class="_ _e"> </span>rc;</span></div><div class="t m5 x2c h2e y8657 ff6 fs20 fc6 sc0 ls0 ws0">3</div><div class="t m5 x2c h2e y8658 ff6 fs20 fc6 sc0 ls0 ws0">4</div><div class="t m5 x142 h2d y8659 ffd fs1e fc2 sc0 ls0 ws0">if<span class="_ _e"> </span>((rc<span class="_ _1f"> </span>=<span class="_ _1f"> </span>pthread_detach(tid))<span class="_ _e"> </span>!=<span class="_ _1f"> </span>0)</div><div class="t m5 x2c h2d y865a ff6 fs20 fc6 sc0 ls0 ws0">5<span class="_ _70"> </span><span class="ffd fs1e fc2">posix_error(rc,<span class="_ _e"> </span>&quot;Pthread_detach<span class="_ _1f"> </span>error&quot;);</span></div><div class="t m5 x2c h2d y865b ff6 fs20 fc6 sc0 ls0 ws0">6<span class="_ _1c"> </span><span class="ffd fs1e fc2">}</span></div><div class="t m5 x144 h2c y865c ffa fs16 fc2 sc0 ls0 ws0">code/src/csapp<span class="_ _1"></span>.c</div><div class="t m5 x17 h2f y865d ffe fs16 fc6 sc0 ls0 ws0">Figure<span class="_"> </span>A.4<span class="_ _66"> </span><span class="fc1">Wrapper<span class="_"> </span>for<span class="_"> </span>Posix-style</span></div><div class="t m5 x1d7 h3a y865e ffd fs19 fc1 sc0 ls0 ws0">pthread_detach<span class="_ _10"> </span><span class="ffe fs16">function.</span></div><div class="t m5 x61 h2c y865f ffa fs16 fc1 sc0 ls0 ws0">code/src/csapp<span class="_ _1"></span>.c</div><div class="t m5 x2c h2d y8660 ff6 fs20 fc6 sc0 ls0 ws0">1<span class="_ _1c"> </span><span class="ffd fs1e fc2">void<span class="_ _1f"> </span>Getaddrinfo(const<span class="_ _e"> </span>char<span class="_ _1f"> </span>*node,<span class="_ _1f"> </span>const<span class="_ _e"> </span>char<span class="_ _1f"> </span>*service,</span></div><div class="t m5 x2c h2d y8661 ff6 fs20 fc6 sc0 ls0 ws0">2<span class="_ _17b"> </span><span class="ffd fs1e fc2">const<span class="_ _1f"> </span>struct<span class="_ _1f"> </span>addrinfo<span class="_ _e"> </span>*hints,<span class="_ _1f"> </span>struct<span class="_ _e"> </span>addrinfo<span class="_ _1f"> </span>**res)</span></div><div class="t m5 x2c h2d y8662 ff6 fs20 fc6 sc0 ls0 ws0">3<span class="_ _1c"> </span><span class="ffd fs1e fc2">{</span></div><div class="t m5 x2c h2e y8663 ff6 fs20 fc6 sc0 ls0 ws0">4</div><div class="t m5 x142 h2d y5187 ffd fs1e fc2 sc0 ls0 ws0">int<span class="_ _e"> </span>rc;</div><div class="t m5 x2c h2e y8664 ff6 fs20 fc6 sc0 ls0 ws0">5</div><div class="t m5 x2c h2e y8665 ff6 fs20 fc6 sc0 ls0 ws0">6</div><div class="t m5 x142 h2d y8666 ffd fs1e fc2 sc0 ls0 ws0">if<span class="_ _e"> </span>((rc<span class="_ _1f"> </span>=<span class="_ _1f"> </span>getaddrinfo(node,<span class="_ _e"> </span>service,<span class="_ _1f"> </span>hints,<span class="_ _e"> </span>res))<span class="_ _1f"> </span>!=<span class="_ _1f"> </span>0)</div><div class="t m5 x2c h2d y8667 ff6 fs20 fc6 sc0 ls0 ws0">7<span class="_ _70"> </span><span class="ffd fs1e fc2">gai_error(rc,<span class="_ _e"> </span>&quot;Getaddrinfo<span class="_ _1f"> </span>error&quot;);</span></div><div class="t m5 x2c h2d yceb ff6 fs20 fc6 sc0 ls0 ws0">8<span class="_ _1c"> </span><span class="ffd fs1e fc2">}</span></div><div class="t m5 x61 h2c y8668 ffa fs16 fc2 sc0 ls0 ws0">code/src/csapp<span class="_ _1"></span>.c</div><div class="t m5 x17 h2f y8669 ffe fs16 fc6 sc0 ls0 ws0">Figure<span class="_"> </span>A.5<span class="_ _66"> </span><span class="fc1">Wrapper<span class="_"> </span>for<span class="_"> </span>GAI-style</span></div><div class="t m5 xac h3a y866a ffd fs19 fc1 sc0 ls0 ws0">getaddrinfo<span class="_ _10"> </span><span class="ffe fs16">function.</span></div></div><div class="pi" data-data='{"ctm":[2.000000,0.000000,0.000000,2.000000,0.000000,0.000000]}'></div></div>
