<div id="pfa2" class="pf w2 h11" data-page-no="a2"><div class="pc pca2 w2 h11"><img class="bi x0 y0 w1 h1" alt="" src="csapp/bga2.png"/><div class="t m5 x18c h28 y9b ff6 fs1f fc2 sc0 ls0 ws0">Section<span class="_ _10"> </span>2.4<span class="_ _60"> </span>Floating<span class="_ _10"> </span>Point<span class="_ _3e"> </span><span class="ffe fs1e">161</span></div><div class="t m5 x17 h47 yb1f ffe fs2b fc1 sc0 ls0 ws0">Practice<span class="_"> </span>Problem<span class="_"> </span>2.53<span class="_ _1f"> </span><span class="fs16">(solution<span class="_"> </span>page<span class="_"> </span>196)</span></div><div class="t m5 x17 h46 yb20 ff7 fs19 fc1 sc0 ls0 ws0">F<span class="_ _1"></span>ill<span class="_ _13"> </span>in<span class="_ _a"> </span>the<span class="_ _6"> </span>following<span class="_ _6"> </span>macro<span class="_ _13"> </span>deﬁnitions<span class="_ _a"> </span>to<span class="_ _6"> </span>generate<span class="_ _6"> </span>the<span class="_ _6"> </span>double-precision<span class="_ _13"> </span>values<span class="_ _a"> </span><span class="ff12">+∞</span>,</div><div class="t m5 x17 h46 yb21 ff12 fs19 fc1 sc0 ls0 ws0">−∞<span class="ff7">,<span class="_"> </span>and<span class="_"> </span></span>−<span class="ff7 ls93">0:</span></div><div class="t m5 x17 h2d y19e8 ffd fs1e fc2 sc0 ls0 ws0">#define<span class="_ _e"> </span>POS_INFINITY</div><div class="t m5 x17 h2d y19e9 ffd fs1e fc2 sc0 ls0 ws0">#define<span class="_ _e"> </span>NEG_INFINITY</div><div class="t m5 x17 h2d y19ea ffd fs1e fc2 sc0 ls0 ws0">#define<span class="_ _e"> </span>NEG_ZERO</div><div class="t m5 x26 h26 y19eb ff7 fs19 fc2 sc0 ls0 ws0">Y<span class="_ _3"></span>ou<span class="_ _6"> </span>cannot<span class="_ _13"> </span>use<span class="_ _13"> </span>any<span class="_ _6"> </span>include<span class="_ _13"> </span>ﬁles<span class="_ _6"> </span>(such<span class="_ _13"> </span>as<span class="_ _6"> </span><span class="ffd">math.h</span>),<span class="_ _13"> </span>but<span class="_ _13"> </span>you<span class="_ _6"> </span>can<span class="_ _13"> </span>make<span class="_ _6"> </span>use<span class="_ _13"> </span>of<span class="_ _6"> </span>the</div><div class="t m5 x17 h26 y19ec ff7 fs19 fc2 sc0 ls0 ws0">fact<span class="_"> </span>that<span class="_ _11"> </span>the<span class="_ _11"> </span>largest<span class="_ _11"> </span>ﬁnite<span class="_ _11"> </span>number<span class="_ _11"> </span>that<span class="_ _11"> </span>can<span class="_ _11"> </span>be<span class="_ _11"> </span>represented<span class="_ _11"> </span>with<span class="_ _11"> </span>double<span class="_"> </span>precision</div><div class="t m5 x17 h46 y19ed ff7 fs19 fc2 sc0 ls0 ws0">is<span class="_"> </span>around<span class="_"> </span>1<span class="_ _1"></span><span class="ff11">.<span class="ff7">8<span class="_"> </span><span class="ff12">×<span class="_ _13"></span></span>10</span></span></div><div class="t m5 x178 h3c y19ee ff7 fs25 fc2 sc0 ls0 ws0">308</div><div class="t m5 x1c h26 y19ef ff7 fs19 fc2 sc0 ls0 ws0">.</div><div class="t m5 x26 h26 y19f0 ff7 fs19 fc1 sc0 ls0 ws0">When<span class="_"> </span>casting<span class="_ _16"> </span>values<span class="_ _11"> </span>between<span class="_ _11"> </span><span class="ffd">int</span>,<span class="_ _16"> </span><span class="ffd">float</span>,<span class="_ _11"> </span>and<span class="_ _16"> </span><span class="ffd">double<span class="_ _11"> </span></span>formats<span class="_ _1"></span>,<span class="_ _16"> </span>the<span class="_ _11"> </span>program</div><div class="t m5 x17 h26 y19f1 ff7 fs19 fc1 sc0 ls0 ws0">changes<span class="_"> </span>the<span class="_ _13"> </span>numeric<span class="_"> </span>values<span class="_ _13"> </span>and<span class="_"> </span>the<span class="_ _13"> </span>bit<span class="_"> </span>representations<span class="_"> </span>as<span class="_ _13"> </span>follows<span class="_"> </span>(assuming<span class="_ _13"> </span>data</div><div class="t m5 x17 h26 y19f2 ff7 fs19 fc1 sc0 ls0 ws0">type<span class="_"> </span><span class="ffd">int<span class="_ _10"> </span></span>is<span class="_"> </span>32<span class="_"> </span>bits):</div><div class="t m5 x72 h3d y19f3 ff14 fs26 fc6 sc0 ls0 ws0">.</div><div class="t m5 x26 h26 y19f4 ff7 fs19 fc1 sc0 ls0 ws0">F<span class="_ _1"></span>rom<span class="_"> </span><span class="ffd">int<span class="_ _11"> </span></span>to<span class="_"> </span><span class="ffd">float</span>,<span class="_"> </span>the<span class="_"> </span>number<span class="_"> </span>cannot<span class="_"> </span>overﬂow<span class="_ _7"></span>,<span class="_"> </span>but<span class="_"> </span>it<span class="_"> </span>may<span class="_"> </span>be<span class="_"> </span>rounded.</div><div class="t m5 x72 h3d y19f5 ff14 fs26 fc6 sc0 ls0 ws0">.</div><div class="t m5 x26 h26 y19f6 ff7 fs19 fc1 sc0 ls0 ws0">F<span class="_ _1"></span>rom<span class="_ _11"> </span><span class="ffd">int<span class="_ _11"> </span></span>or<span class="_"> </span><span class="ffd">float<span class="_ _11"> </span></span>to<span class="_"> </span><span class="ffd">double</span>,<span class="_ _11"> </span>the<span class="_"> </span>exact<span class="_ _11"> </span>numeric<span class="_"> </span>value<span class="_ _11"> </span>can<span class="_"> </span>be<span class="_ _11"> </span>preserved<span class="_"> </span>be-</div><div class="t m5 x26 h26 y19f7 ff7 fs19 fc1 sc0 ls0 ws0">cause<span class="_"> </span><span class="ffd">double<span class="_ _13"> </span></span>has<span class="_"> </span>both<span class="_ _13"> </span>greater<span class="_"> </span>range<span class="_"> </span>(i.e<span class="_ _1"></span>.,<span class="_"> </span>the<span class="_ _13"> </span>range<span class="_"> </span>of<span class="_"> </span>representable<span class="_ _13"> </span>values),</div><div class="t m5 x26 h26 y19f8 ff7 fs19 fc1 sc0 ls0 ws0">as<span class="_"> </span>well<span class="_"> </span>as<span class="_"> </span>greater<span class="_"> </span>precision<span class="_"> </span>(i.e<span class="_ _1"></span>.,<span class="_"> </span>the<span class="_"> </span>number<span class="_"> </span>of<span class="_"> </span>signiﬁcant<span class="_"> </span>bits).</div><div class="t m5 x72 h3d y19f9 ff14 fs26 fc6 sc0 ls0 ws0">.</div><div class="t m5 x26 h46 y19fa ff7 fs19 fc1 sc0 ls0 ws0">F<span class="_ _1"></span>rom<span class="_"> </span><span class="ffd">double<span class="_ _13"> </span></span>to<span class="_ _13"> </span><span class="ffd">float</span>,<span class="_"> </span>the<span class="_ _13"> </span>value<span class="_"> </span>can<span class="_ _13"> </span>overﬂow<span class="_ _13"> </span>to<span class="_"> </span><span class="ff12">+∞<span class="_ _13"></span></span>or<span class="_ _13"> </span><span class="ff12">−∞</span>,<span class="_"> </span>since<span class="_ _13"> </span>the<span class="_ _13"> </span>range</div><div class="t m5 x26 h26 y19fb ff7 fs19 fc1 sc0 ls0 ws0">is<span class="_"> </span>smaller.<span class="_"> </span>Otherwise<span class="_ _1"></span>,<span class="_"> </span>it<span class="_"> </span>may<span class="_"> </span>be<span class="_"> </span>rounded,<span class="_"> </span>because<span class="_"> </span>the<span class="_"> </span>precision<span class="_"> </span>is<span class="_"> </span>smaller.</div><div class="t m5 x72 h3d y19fc ff14 fs26 fc6 sc0 ls0 ws0">.</div><div class="t m5 x26 h26 y19fd ff7 fs19 fc1 sc0 ls0 ws0">F<span class="_ _1"></span>rom<span class="_ _14"> </span><span class="ffd">float<span class="_ _15"> </span></span>or<span class="_ _14"> </span><span class="ffd">double<span class="_ _14"> </span></span>to<span class="_ _14"> </span><span class="ffd">int</span>,<span class="_ _15"> </span>the<span class="_ _14"> </span>value<span class="_ _14"> </span>will<span class="_ _14"> </span>be<span class="_ _14"> </span>rounded<span class="_ _14"> </span>toward<span class="_ _15"> </span>zero<span class="_ _1"></span>.<span class="_ _14"> </span>F<span class="_ _1"></span>or</div><div class="t m5 x26 h46 y19fe ff7 fs19 fc1 sc0 ls0 ws0">example<span class="_ _1"></span>,<span class="_ _e"> </span>1<span class="_ _1"></span><span class="ff11">.<span class="ff7">999<span class="_ _f"> </span>will<span class="_ _f"> </span>be<span class="_ _f"> </span>converted<span class="_ _f"> </span>to<span class="_ _f"> </span>1<span class="_ _0"></span>,<span class="_ _e"> </span>while<span class="_ _21"> </span><span class="ff12">−</span>1<span class="_ _0"></span><span class="ff11">.<span class="ff7">999<span class="_ _21"> </span>will<span class="_ _f"> </span>be<span class="_ _f"> </span>converted<span class="_ _f"> </span>to</span></span></span></span></div><div class="t m5 x26 h46 y19ff ff12 fs19 fc1 sc0 ls0 ws0">−<span class="ff7">1<span class="_ _1"></span>.<span class="_ _15"> </span>Furthermore<span class="_ _1"></span>,<span class="_ _21"> </span>the<span class="_ _15"> </span>value<span class="_ _15"> </span>may<span class="_ _14"> </span>overﬂow<span class="_ _1"></span>.<span class="_ _15"> </span>T<span class="_ _1"></span>he<span class="_ _15"> </span>C<span class="_ _15"> </span>standards<span class="_ _14"> </span>do<span class="_ _15"> </span>not<span class="_ _15"> </span>specify</span></div><div class="t m5 x26 h26 y1a00 ff7 fs19 fc1 sc0 ls0 ws0">a<span class="_ _14"> </span>ﬁxed<span class="_ _15"> </span>result<span class="_ _15"> </span>for<span class="_ _14"> </span>this<span class="_ _15"> </span>case<span class="_ _0"></span>.<span class="_ _14"> </span>Intel-compatible<span class="_ _15"> </span>microprocessors<span class="_ _15"> </span>designate<span class="_ _14"> </span>the</div><div class="t m5 x26 h26 y1a01 ff7 fs19 fc1 sc0 ls0 ws0">bit<span class="_ _11"> </span>pattern<span class="_ _11"> </span>[10</div><div class="t m5 x4f h45 y1a02 ff11 fs19 fc1 sc0 ls42 ws0">...</div><div class="t m5 x1c4 h26 y1a01 ff7 fs19 fc1 sc0 ls0 ws0">00]<span class="_ _13"> </span>(<span class="ffa">TMin</span></div><div class="t m5 x238 h50 y1a03 ff11 fs25 fc1 sc0 ls0 ws0">w</div><div class="t m5 x18d h26 y1a04 ff7 fs19 fc1 sc0 ls0 ws0">for<span class="_ _11"> </span>word<span class="_ _11"> </span>size<span class="_ _11"> </span><span class="ff11">w<span class="_ _2"></span></span><span class="ls116">)a<span class="_ _49"></span>sa<span class="_ _49"></span>n<span class="ffa ls0">integer<span class="_ _11"> </span>indeﬁnite<span class="_ _11"> </span><span class="ff7">value.</span></span></span></div><div class="t m5 x26 h26 y1a05 ff7 fs19 fc1 sc0 ls0 ws0">Any<span class="_ _13"> </span>conversion<span class="_ _13"> </span>from<span class="_ _13"> </span>ﬂoating<span class="_ _13"> </span>point<span class="_"> </span>to<span class="_ _13"> </span>integer<span class="_ _13"> </span>that<span class="_ _13"> </span>cannot<span class="_ _13"> </span>assign<span class="_ _13"> </span>a<span class="_ _13"> </span>reasonable</div><div class="t m5 x26 h26 y1a06 ff7 fs19 fc1 sc0 ls0 ws0">integer<span class="_ _15"> </span>approximation<span class="_ _15"> </span>yields<span class="_ _15"> </span>this<span class="_ _15"> </span>value.<span class="_ _14"> </span>Thus<span class="_ _3"></span>,<span class="_ _f"> </span>the<span class="_ _15"> </span>expression<span class="_ _15"> </span><span class="ffd">(int)<span class="_ _16"> </span>+1e10</span></div><div class="t m5 x26 h26 y1a07 ff7 fs19 fc1 sc0 ls0 ws0">yields<span class="_"> </span><span class="ffd">-21483648</span>,<span class="_"> </span>generating<span class="_"> </span>a<span class="_"> </span>negative<span class="_"> </span>value<span class="_"> </span>from<span class="_"> </span>a<span class="_"> </span>positive<span class="_"> </span>one<span class="_ _1"></span>.</div><div class="t m5 x17 h47 y22b ffe fs2b fc1 sc0 ls0 ws0">Practice<span class="_"> </span>Problem<span class="_"> </span>2.54<span class="_ _1f"> </span><span class="fs16">(solution<span class="_"> </span>page<span class="_"> </span>196)</span></div><div class="t m5 x17 h26 y1a08 ff7 fs19 fc1 sc0 ls0 ws0">Assume<span class="_ _16"> </span>variables<span class="_ _14"> </span><span class="ffd">x</span>,<span class="_ _15"> </span><span class="ffd">f</span>,<span class="_ _14"> </span>and<span class="_ _14"> </span><span class="ffd">d<span class="_ _14"> </span></span>are<span class="_ _14"> </span>of<span class="_ _14"> </span>type<span class="_ _16"> </span><span class="ffd">int</span>,<span class="_ _15"> </span><span class="ffd">float</span>,<span class="_ _14"> </span>and<span class="_ _14"> </span><span class="ffd">double</span>,<span class="_ _15"> </span>respectively<span class="_ _3"></span>.</div><div class="t m5 x17 h46 y1a09 ff7 fs19 fc1 sc0 ls0 ws0">T<span class="_ _1"></span>heir<span class="_ _11"> </span>values<span class="_ _11"> </span>are<span class="_ _11"> </span>arbitrary<span class="_ _3"></span>,<span class="_ _16"> </span>except<span class="_"> </span>that<span class="_ _11"> </span>neither<span class="_ _11"> </span><span class="ffd">f<span class="_ _11"> </span></span>nor<span class="_ _11"> </span><span class="ffd">d<span class="_ _16"> </span></span>equals<span class="_"> </span><span class="ff12">+∞</span>,<span class="_ _11"> </span><span class="ff12">−∞</span><span class="ls117">,o<span class="_ _4a"></span>r<span class="ffa ls0">NaN<span class="_ _2"></span><span class="ff7">.</span></span></span></div><div class="t m5 x17 h26 y1a0a ff7 fs19 fc1 sc0 ls0 ws0">F<span class="_ _1"></span>or<span class="_ _16"> </span>each<span class="_ _16"> </span>of<span class="_ _16"> </span>the<span class="_ _16"> </span>following<span class="_ _16"> </span>C<span class="_ _16"> </span>expressions<span class="_ _1"></span>,<span class="_ _16"> </span>either<span class="_ _16"> </span>argue<span class="_ _16"> </span>that<span class="_ _16"> </span>it<span class="_ _16"> </span>will<span class="_ _16"> </span>always<span class="_ _16"> </span>be<span class="_ _16"> </span>true</div><div class="t m5 x17 h26 y1a0b ff7 fs19 fc1 sc0 ls0 ws0">(i.e<span class="_ _1"></span>.,<span class="_ _14"> </span>evaluate<span class="_ _16"> </span>to<span class="_ _16"> </span>1)<span class="_ _16"> </span>or<span class="_ _16"> </span>give<span class="_ _16"> </span>a<span class="_ _11"> </span>value<span class="_ _16"> </span>for<span class="_ _16"> </span>the<span class="_ _16"> </span>variables<span class="_ _16"> </span>such<span class="_ _16"> </span>that<span class="_ _16"> </span>it<span class="_ _16"> </span>is<span class="_ _16"> </span>not<span class="_ _16"> </span>true<span class="_ _16"> </span>(i.e<span class="_ _1"></span>.,</div><div class="t m5 x17 h26 y1a0c ff7 fs19 fc1 sc0 ls0 ws0">evaluates<span class="_"> </span>to<span class="_"> </span>0).</div><div class="t m5 x34 h26 y1a0d ff7 fs19 fc1 sc0 ls0 ws0">A.<span class="_ _1f"> </span><span class="ffd">x<span class="_ _11"> </span>==<span class="_ _16"> </span>(int)(double)<span class="_ _16"> </span>x</span></div><div class="t m5 x34 h26 y900 ff7 fs19 fc1 sc0 ls2a ws0">B.<span class="_ _66"> </span><span class="ffd ls0">x<span class="_ _11"> </span>==<span class="_ _16"> </span>(int)(float)<span class="_ _16"> </span>x</span></div><div class="t m5 x34 h26 y1a0e ff7 fs19 fc1 sc0 ls22 ws0">C.<span class="_ _24"> </span><span class="ffd ls0">d<span class="_ _16"> </span>==<span class="_ _11"> </span>(double)(float)<span class="_ _16"> </span>d</span></div><div class="t m5 x34 h26 y1a0f ff7 fs19 fc1 sc0 ls2a ws0">D.<span class="_ _24"> </span><span class="ffd ls0">f<span class="_ _11"> </span>==<span class="_ _16"> </span>(float)(double)<span class="_ _16"> </span>f</span></div><div class="t m5 x34 h26 y904 ff7 fs19 fc1 sc0 ls0 ws0">E.<span class="_ _25"> </span><span class="ffd">f<span class="_ _11"> </span>==<span class="_ _16"> </span>-(-f)</span></div></div><div class="pi" data-data='{"ctm":[2.000000,0.000000,0.000000,2.000000,0.000000,0.000000]}'></div></div>
