<div id="pf16f" class="pf w2 h11" data-page-no="16f"><div class="pc pc16f w2 h11"><img class="bi x0 y0 w1 h1" alt="" src="csapp/bg16f.png"/><div class="t m5 x14 h28 y9b ffe fs1e fc2 sc0 ls0 ws0">366<span class="_ _1b"> </span><span class="ff6 fs1f">Chapter<span class="_ _10"> </span>3<span class="_ _3d"> </span>Machine-Level<span class="_ _10"> </span>Representation<span class="_ _10"> </span>of<span class="_ _10"> </span>Programs</span></div><div class="t m5 x1d h28 ye7 ffe fs1e fc6 sc0 ls0 ws0">Solution<span class="_"> </span>to<span class="_"> </span>Problem<span class="_"> </span>3.13<span class="_ _e"> </span><span class="fs16">(page<span class="_"> </span>240)</span></div><div class="t m5 x1d h26 y1d16 ff7 fs19 fc1 sc0 ls0 ws0">It<span class="_"> </span>is<span class="_"> </span>important<span class="_ _11"> </span>to<span class="_"> </span>understand<span class="_"> </span>that<span class="_ _11"> </span>assembly<span class="_"> </span>code<span class="_"> </span>does<span class="_ _11"> </span>not<span class="_"> </span>keep<span class="_"> </span>track<span class="_ _11"> </span>of<span class="_"> </span>the<span class="_"> </span>type</div><div class="t m5 x1d h26 y1d17 ff7 fs19 fc1 sc0 ls0 ws0">of<span class="_ _15"> </span>a<span class="_ _21"> </span>program<span class="_ _21"> </span>value.<span class="_ _15"> </span>Instead,<span class="_ _f"> </span>the<span class="_ _21"> </span>different<span class="_ _15"> </span>instructions<span class="_ _21"> </span>determine<span class="_ _21"> </span>the<span class="_ _21"> </span>operand</div><div class="t m5 x1d h26 y1d18 ff7 fs19 fc1 sc0 ls0 ws0">sizes<span class="_ _16"> </span>and<span class="_ _11"> </span>whether<span class="_ _16"> </span>they<span class="_ _16"> </span>are<span class="_ _11"> </span>signed<span class="_ _16"> </span>or<span class="_ _16"> </span>unsigned.<span class="_ _11"> </span>When<span class="_ _16"> </span>mapping<span class="_ _11"> </span>from<span class="_ _16"> </span>instruction</div><div class="t m5 x1d h26 y1d88 ff7 fs19 fc1 sc0 ls0 ws0">sequences<span class="_ _16"> </span>back<span class="_ _16"> </span>to<span class="_ _16"> </span>C<span class="_ _16"> </span>code<span class="_ _0"></span>,<span class="_ _16"> </span>we<span class="_ _16"> </span>must<span class="_ _16"> </span>do<span class="_ _16"> </span>a<span class="_ _14"> </span>bit<span class="_ _16"> </span>of<span class="_ _16"> </span>detective<span class="_ _16"> </span>work<span class="_ _16"> </span>to<span class="_ _16"> </span>infer<span class="_ _16"> </span>the<span class="_ _16"> </span>data</div><div class="t m5 x1d h26 y1d89 ff7 fs19 fc1 sc0 ls0 ws0">types<span class="_"> </span>of<span class="_"> </span>the<span class="_"> </span>program<span class="_"> </span>values<span class="_ _1"></span>.</div><div class="t m5 x124 h26 y1d1b ff7 fs19 fc1 sc0 ls0 ws0">A.<span class="_ _1f"> </span>T<span class="_ _1"></span>he<span class="_"> </span>sufﬁx<span class="_ _11"> </span>‘<span class="ffd">l</span>’<span class="_"> </span>and<span class="_"> </span>the<span class="_"> </span>register<span class="_"> </span>identiﬁers<span class="_ _11"> </span>indicate<span class="_"> </span>32-bit<span class="_"> </span>operands<span class="_ _1"></span>,<span class="_ _11"> </span>while<span class="_"> </span>the</div><div class="t m5 x4f h26 y1d1c ff7 fs19 fc1 sc0 ls0 ws0">comparison<span class="_"> </span>is<span class="_"> </span>for<span class="_ _11"> </span>a<span class="_"> </span>two’s-complement<span class="_"> </span><span class="ffd">&lt;</span>.<span class="_"> </span>W<span class="_ _1"></span>e<span class="_"> </span>can<span class="_"> </span>infer<span class="_ _11"> </span>that<span class="_"> </span><span class="ffd">data_t<span class="_ _11"> </span></span>must<span class="_"> </span>be</div><div class="t m5 x4f h26 y337f ffd fs19 fc1 sc0 ls0 ws0">int<span class="ff7">.</span></div><div class="t m5 x124 h26 y1d1e ff7 fs19 fc1 sc0 ls0 ws0">B<span class="_ _3"></span>.<span class="_ _1d"> </span>The<span class="_"> </span>sufﬁx<span class="_"> </span>‘<span class="ffd">w</span>’<span class="_"> </span>and<span class="_"> </span>the<span class="_"> </span>register<span class="_"> </span>identiﬁers<span class="_"> </span>indicate<span class="_"> </span>16-bit<span class="_ _11"> </span>operands<span class="_ _1"></span>,<span class="_"> </span>while<span class="_"> </span>the</div><div class="t m5 x4f h26 y3380 ff7 fs19 fc1 sc0 ls0 ws0">comparison<span class="_ _13"> </span>is<span class="_"> </span>for<span class="_ _13"> </span>a<span class="_ _13"> </span>two’s-complement<span class="_ _13"> </span><span class="ffd">&gt;=</span>.<span class="_"> </span>W<span class="_ _3"></span>e<span class="_ _13"> </span>can<span class="_ _13"> </span>infer<span class="_"> </span>that<span class="_ _13"> </span><span class="ffd">data_t<span class="_ _13"> </span></span>must<span class="_"> </span>be</div><div class="t m5 x4f h26 y3381 ffd fs19 fc1 sc0 ls0 ws0">short<span class="ff7">.</span></div><div class="t m5 x124 h26 y3382 ff7 fs19 fc1 sc0 ls0 ws0">C.<span class="_ _25"> </span>T<span class="_ _1"></span>he<span class="_ _e"> </span>sufﬁx<span class="_ _e"> </span>‘<span class="ffd">b</span>’<span class="_ _e"> </span>and<span class="_ _e"> </span>the<span class="_ _f"> </span>register<span class="_ _e"> </span>identiﬁers<span class="_ _e"> </span>indicate<span class="_ _e"> </span>8-bit<span class="_ _e"> </span>operands<span class="_ _3"></span>,<span class="_ _1f"> </span>while</div><div class="t m5 x4f h26 y3383 ff7 fs19 fc1 sc0 ls0 ws0">the<span class="_ _14"> </span>comparison<span class="_ _15"> </span>is<span class="_ _15"> </span>for<span class="_ _14"> </span>an<span class="_ _15"> </span>unsigned<span class="_ _15"> </span><span class="ffd">&lt;=</span>.<span class="_ _14"> </span>W<span class="_ _1"></span>e<span class="_ _14"> </span>can<span class="_ _15"> </span>infer<span class="_ _15"> </span>that<span class="_ _14"> </span><span class="ffd">data_t<span class="_ _15"> </span></span>must<span class="_ _15"> </span>be</div><div class="t m5 x4f h26 y3384 ffd fs19 fc1 sc0 ls0 ws0">unsigned<span class="_ _11"> </span>char<span class="ff7">.</span></div><div class="t m5 x124 h26 y3385 ff7 fs19 fc1 sc0 ls0 ws0">D<span class="_ _3"></span>.<span class="_ _23"> </span>The<span class="_ _15"> </span>sufﬁx<span class="_ _f"> </span>‘<span class="ffd">q</span>’<span class="_ _f"> </span>and<span class="_ _21"> </span>the<span class="_ _f"> </span>register<span class="_ _f"> </span>identiﬁers<span class="_ _21"> </span>indicate<span class="_ _f"> </span>64-bit<span class="_ _f"> </span>operands<span class="_ _1"></span>,<span class="_ _e"> </span>while</div><div class="t m5 x4f h26 y3386 ff7 fs19 fc1 sc0 ls0 ws0">the<span class="_ _21"> </span>comparison<span class="_ _21"> </span>is<span class="_ _f"> </span>for<span class="_ _21"> </span><span class="ffd">!=</span>,<span class="_ _e"> </span>which<span class="_ _21"> </span>is<span class="_ _f"> </span>the<span class="_ _21"> </span>same<span class="_ _21"> </span>whether<span class="_ _f"> </span>the<span class="_ _21"> </span>arguments<span class="_ _f"> </span>are</div><div class="t m5 x4f h26 y3387 ff7 fs19 fc1 sc0 ls0 ws0">signed,<span class="_ _13"> </span>unsigned,<span class="_ _13"> </span>or<span class="_ _13"> </span>pointers<span class="_ _1"></span>.<span class="_ _13"> </span>W<span class="_ _3"></span>e<span class="_ _13"> </span>can<span class="_ _13"> </span>infer<span class="_ _13"> </span>that<span class="_ _6"> </span><span class="ffd">data_t<span class="_ _13"> </span></span>could<span class="_ _13"> </span>be<span class="_ _13"> </span>either<span class="_ _13"> </span><span class="ffd">long</span>,</div><div class="t m5 x4f h26 y3388 ffd fs19 fc1 sc0 ls0 ws0">unsigned<span class="_ _11"> </span>long<span class="ff7">,<span class="_"> </span>or<span class="_"> </span>some<span class="_"> </span>form<span class="_"> </span>of<span class="_"> </span>pointer.</span></div><div class="t m5 x1d h28 y3389 ffe fs1e fc6 sc0 ls0 ws0">Solution<span class="_"> </span>to<span class="_"> </span>Problem<span class="_"> </span>3.14<span class="_ _e"> </span><span class="fs16">(page<span class="_"> </span>241)</span></div><div class="t m5 x1d h26 y338a ff7 fs19 fc1 sc0 ls0 ws0">T<span class="_ _1"></span>his<span class="_ _16"> </span>problem<span class="_"> </span>is<span class="_ _16"> </span>similar<span class="_ _11"> </span>to<span class="_ _11"> </span>Problem<span class="_ _11"> </span>3.13,<span class="_ _16"> </span>except<span class="_ _11"> </span>that<span class="_ _11"> </span>it<span class="_ _16"> </span>involves<span class="_ _11"> </span><span class="ff9">test<span class="_ _11"> </span></span>instructions</div><div class="t m5 x1d h26 y338b ff7 fs19 fc1 sc0 ls0 ws0">rather<span class="_"> </span>than<span class="_"> </span><span class="ff9">cmp<span class="_ _10"> </span></span>instructions<span class="_ _1"></span>.</div><div class="t m5 x124 h26 y338c ff7 fs19 fc1 sc0 ls0 ws0">A.<span class="_ _1f"> </span>T<span class="_ _1"></span>he<span class="_"> </span>sufﬁx<span class="_ _13"> </span>‘<span class="ffd">q</span>’<span class="_"> </span>and<span class="_ _13"> </span>the<span class="_ _13"> </span>register<span class="_"> </span>identiﬁers<span class="_ _13"> </span>indicate<span class="_"> </span>a<span class="_ _13"> </span>64-bit<span class="_"> </span>operand,<span class="_ _13"> </span>while<span class="_ _13"> </span>the</div><div class="t m5 x4f h26 y338d ff7 fs19 fc1 sc0 ls0 ws0">comparison<span class="_"> </span>is<span class="_"> </span>for<span class="_ _11"> </span><span class="ffd">&gt;=</span>,<span class="_"> </span>which<span class="_ _11"> </span>must<span class="_"> </span>be<span class="_"> </span>signed.<span class="_ _11"> </span>W<span class="_ _3"></span>e<span class="_ _11"> </span>can<span class="_"> </span>infer<span class="_"> </span>that<span class="_ _11"> </span><span class="ffd">data_t<span class="_ _10"> </span></span>must</div><div class="t m5 x4f h26 y338e ff7 fs19 fc1 sc0 ls0 ws0">be<span class="_"> </span><span class="ffd">long</span>.</div><div class="t m5 x124 h26 y338f ff7 fs19 fc1 sc0 ls0 ws0">B<span class="_ _3"></span>.<span class="_ _1d"> </span>The<span class="_"> </span>sufﬁx<span class="_"> </span>‘<span class="ffd">w</span>’<span class="_"> </span>and<span class="_"> </span>the<span class="_"> </span>register<span class="_"> </span>identiﬁer<span class="_"> </span>indicate<span class="_"> </span>a<span class="_"> </span>16-bit<span class="_"> </span>operand,<span class="_"> </span>while<span class="_"> </span>the</div><div class="t m5 x4f h26 y3390 ff7 fs19 fc1 sc0 ls0 ws0">comparison<span class="_ _13"> </span>is<span class="_"> </span>for<span class="_ _13"> </span><span class="ffd">==</span>,<span class="_"> </span>which<span class="_"> </span>is<span class="_ _13"> </span>the<span class="_ _13"> </span>same<span class="_"> </span>for<span class="_ _13"> </span>signed<span class="_"> </span>or<span class="_ _13"> </span>unsigned.<span class="_"> </span>W<span class="_ _3"></span>e<span class="_"> </span>can<span class="_ _13"> </span>infer</div><div class="t m5 x4f h26 y3391 ff7 fs19 fc1 sc0 ls0 ws0">that<span class="_"> </span><span class="ffd">data_t<span class="_ _10"> </span></span>must<span class="_"> </span>be<span class="_"> </span>either<span class="_"> </span><span class="ffd">short<span class="_ _10"> </span></span>or<span class="_"> </span><span class="ffd">unsigned<span class="_ _16"> </span>short</span>.</div><div class="t m5 x124 h26 y3392 ff7 fs19 fc1 sc0 ls0 ws0">C.<span class="_ _25"> </span>T<span class="_ _1"></span>he<span class="_"> </span>sufﬁx<span class="_"> </span>‘<span class="ffd">b</span>’<span class="_"> </span>and<span class="_"> </span>the<span class="_"> </span>register<span class="_"> </span>identiﬁer<span class="_"> </span>indicate<span class="_"> </span>an<span class="_"> </span>8-bit<span class="_"> </span>operand,<span class="_"> </span>while<span class="_"> </span>the</div><div class="t m5 x4f h26 y3393 ff7 fs19 fc1 sc0 ls0 ws0">comparison<span class="_ _11"> </span>is<span class="_ _16"> </span>for<span class="_ _11"> </span>unsigned<span class="_ _16"> </span><span class="ffd">&gt;</span>.<span class="_ _11"> </span>W<span class="_ _3"></span>e<span class="_ _16"> </span>can<span class="_ _11"> </span>infer<span class="_ _16"> </span>that<span class="_ _11"> </span><span class="ffd">data_t<span class="_ _11"> </span></span>must<span class="_ _16"> </span>be<span class="_ _11"> </span><span class="ffd">unsigned</span></div><div class="t m5 x4f h26 y3394 ffd fs19 fc1 sc0 ls0 ws0">char<span class="ff7">.</span></div><div class="t m5 x124 h26 y3395 ff7 fs19 fc1 sc0 ls0 ws0">D<span class="_ _3"></span>.<span class="_ _23"> </span>The<span class="_"> </span>sufﬁx<span class="_ _16"> </span>‘<span class="ffd">l</span>’<span class="_ _11"> </span>and<span class="_ _11"> </span>the<span class="_ _16"> </span>register<span class="_ _11"> </span>identiﬁer<span class="_ _16"> </span>indicate<span class="_ _11"> </span>32-bit<span class="_ _11"> </span>operands<span class="_ _1"></span>,<span class="_ _16"> </span>while<span class="_ _11"> </span>the</div><div class="t m5 x4f h26 y3396 ff7 fs19 fc1 sc0 ls0 ws0">comparison<span class="_"> </span>is<span class="_"> </span>for<span class="_"> </span><span class="ffd">&lt;</span>.<span class="_"> </span>W<span class="_ _3"></span>e<span class="_"> </span>can<span class="_"> </span>infer<span class="_"> </span>that<span class="_"> </span><span class="ffd">data_t<span class="_ _10"> </span></span>must<span class="_"> </span>be<span class="_"> </span><span class="ffd">int</span>.</div><div class="t m5 x1d h28 y277 ffe fs1e fc6 sc0 ls0 ws0">Solution<span class="_"> </span>to<span class="_"> </span>Problem<span class="_"> </span>3.15<span class="_ _e"> </span><span class="fs16">(page<span class="_"> </span>245)</span></div><div class="t m5 x1d h26 y3397 ff7 fs19 fc1 sc0 ls0 ws0">T<span class="_ _1"></span>his<span class="_ _15"> </span>exercise<span class="_ _21"> </span>requires<span class="_ _15"> </span>you<span class="_ _15"> </span>to<span class="_ _15"> </span>examine<span class="_ _15"> </span>disassembled<span class="_ _15"> </span>code<span class="_ _21"> </span>in<span class="_ _15"> </span>detail<span class="_ _15"> </span>and<span class="_ _15"> </span>reason</div><div class="t m5 x1d h26 y3398 ff7 fs19 fc1 sc0 ls0 ws0">about<span class="_ _16"> </span>the<span class="_ _14"> </span>encodings<span class="_ _16"> </span>for<span class="_ _14"> </span>jump<span class="_ _16"> </span>targets<span class="_ _0"></span>.<span class="_ _16"> </span>It<span class="_ _14"> </span>also<span class="_ _16"> </span>gives<span class="_ _14"> </span>you<span class="_ _16"> </span>practice<span class="_ _14"> </span>in<span class="_ _14"> </span>hexadecimal</div><div class="t m5 x1d h26 y3399 ff7 fs19 fc1 sc0 ls0 ws0">arithmetic.</div><div class="t m5 x124 h46 y339a ff7 fs19 fc1 sc0 ls0 ws0">A.<span class="_ _1f"> </span>T<span class="_ _1"></span>he<span class="_ _11"> </span><span class="ffd">je<span class="_ _11"> </span></span>instruction<span class="_ _11"> </span>has<span class="_"> </span>as<span class="_ _11"> </span>its<span class="_ _11"> </span>target<span class="_ _11"> </span><span class="ffd">0x4003fc<span class="_ _13"> </span><span class="ff12">+<span class="_ _10"> </span></span>0x02<span class="_ _1"></span><span class="ff7">.<span class="_ _11"> </span>As<span class="_ _11"> </span>the<span class="_ _11"> </span>original<span class="_"> </span>disas-</span></span></div><div class="t m5 x4f h26 y339b ff7 fs19 fc1 sc0 ls0 ws0">sembled<span class="_"> </span>code<span class="_"> </span>shows<span class="_ _1"></span>,<span class="_"> </span>this<span class="_"> </span>is<span class="_"> </span><span class="ffd">0x4003fe</span>:</div><div class="t m5 x10d h2d y339c ffd fs1e fc2 sc0 ls0 ws0">4003fa:<span class="_ _e"> </span>74<span class="_ _1f"> </span>02<span class="_ _15a"> </span>je<span class="_ _8c"> </span>4003fe</div><div class="t m5 x10d h2d y339d ffd fs1e fc2 sc0 ls0 ws0">4003fc:<span class="_ _e"> </span>ff<span class="_ _1f"> </span>d0<span class="_ _15a"> </span>callq<span class="_ _1a"> </span>*%rax</div></div><div class="pi" data-data='{"ctm":[2.000000,0.000000,0.000000,2.000000,0.000000,0.000000]}'></div></div>
