<div id="pf10b" class="pf w2 h11" data-page-no="10b"><div class="pc pc10b w2 h11"><img class="bi x0 y0 w1 h1" alt="" src="csapp/bg10b.png"/><div class="t m5 x14 h28 y9b ffe fs1e fc2 sc0 ls0 ws0">266<span class="_ _1b"> </span><span class="ff6 fs1f">Chapter<span class="_ _10"> </span>3<span class="_ _3d"> </span>Machine-Level<span class="_ _10"> </span>Representation<span class="_ _10"> </span>of<span class="_ _10"> </span>Programs</span></div><div class="t m5 x10c h2d ye7 ffd fs1e fc2 sc0 ls0 ws0">for<span class="_ _e"> </span>(i<span class="_ _1f"> </span>=<span class="_ _1f"> </span>2;<span class="_ _e"> </span>i<span class="_ _1f"> </span>&lt;=<span class="_ _e"> </span>n;<span class="_ _1f"> </span>i++)</div><div class="t m5 x22b h2d y2682 ffd fs1e fc2 sc0 ls0 ws0">result<span class="_ _e"> </span>*=<span class="_ _1f"> </span>i;</div><div class="t m5 x10c h2d y2683 ffd fs1e fc2 sc0 ls0 ws0">return<span class="_ _e"> </span>result;</div><div class="t m5 x1d h2d y2684 ffd fs1e fc2 sc0 ls0 ws0">}</div><div class="t m5 x29 h26 y27e1 ff7 fs19 fc2 sc0 ls0 ws0">As<span class="_ _16"> </span>shown,<span class="_ _16"> </span>the<span class="_ _11"> </span>natural<span class="_ _16"> </span>way<span class="_ _16"> </span>of<span class="_ _16"> </span>writing<span class="_ _11"> </span>a<span class="_ _16"> </span>factorial<span class="_ _16"> </span>function<span class="_ _11"> </span>with<span class="_ _16"> </span>a<span class="_ _16"> </span><span class="ffd">for<span class="_ _16"> </span></span>loop<span class="_ _11"> </span>is</div><div class="t m5 x1d h26 y27e2 ff7 fs19 fc2 sc0 ls0 ws0">to<span class="_"> </span>multiply<span class="_"> </span>factors<span class="_"> </span>from<span class="_"> </span>2<span class="_"> </span>up<span class="_"> </span>to<span class="_"> </span><span class="ff11">n</span>,<span class="_ _11"> </span>and<span class="_"> </span>so<span class="_"> </span>this<span class="_"> </span>function<span class="_"> </span>is<span class="_"> </span>quite<span class="_"> </span>different<span class="_"> </span>from<span class="_ _11"> </span>the</div><div class="t m5 x1d h26 y27e3 ff7 fs19 fc2 sc0 ls0 ws0">code<span class="_"> </span>we<span class="_"> </span>showed<span class="_"> </span>using<span class="_"> </span>either<span class="_"> </span>a<span class="_"> </span><span class="ffd">while<span class="_ _10"> </span></span>or<span class="_"> </span>a<span class="_"> </span><span class="ffd">do</span>-<span class="ffd">while<span class="_ _10"> </span></span>loop<span class="_ _0"></span>.</div><div class="t m5 x29 h26 y27e4 ff7 fs19 fc2 sc0 ls0 ws0">W<span class="_ _3"></span>e<span class="_ _21"> </span>can<span class="_ _21"> </span>identify<span class="_ _21"> </span>the<span class="_ _21"> </span>different<span class="_ _15"> </span>components<span class="_ _21"> </span>of<span class="_ _21"> </span>the<span class="_ _21"> </span><span class="ffd">for<span class="_ _21"> </span></span>loop<span class="_ _21"> </span>in<span class="_ _21"> </span>this<span class="_ _21"> </span>code<span class="_ _21"> </span>as</div><div class="t m5 x1d h26 y27e5 ff7 fs19 fc2 sc0 ls0 ws0">follows:</div><div class="t m5 x1d h56 y27e6 ffa fs21 fc2 sc0 ls0 ws0">init-expr<span class="_ _87"> </span><span class="ffd fs1e ls4c">i=2</span></div><div class="t m5 x1d h56 y26dd ffa fs21 fc2 sc0 ls0 ws0">test-expr<span class="_ _87"> </span><span class="ffd fs1e ls4c">i&lt;<span class="_ _49"></span>=n</span></div><div class="t m5 x1d h56 y27e7 ffa fs21 fc2 sc0 ls0 ws0">update-expr<span class="_ _128"> </span><span class="ffd fs1e">i++</span></div><div class="t m5 x1d h56 y27e8 ffa fs21 fc2 sc0 ls0 ws0">body-statement<span class="_ _5e"> </span><span class="ffd fs1e">result<span class="_ _11"> </span>*=<span class="_ _11"> </span>i;</span></div><div class="t m5 x1d h26 y27e9 ff7 fs19 fc2 sc0 ls0 ws0">Substituting<span class="_ _16"> </span>these<span class="_ _11"> </span>components<span class="_ _16"> </span>into<span class="_ _16"> </span>the<span class="_ _16"> </span>template<span class="_ _11"> </span>we<span class="_ _16"> </span>have<span class="_ _16"> </span>shown<span class="_ _16"> </span>to<span class="_ _11"> </span>transform<span class="_ _16"> </span>a</div><div class="t m5 x1d h26 y27ea ffd fs19 fc2 sc0 ls0 ws0">for<span class="_ _10"> </span><span class="ff7">loop<span class="_"> </span>into<span class="_"> </span>a<span class="_"> </span></span>while<span class="_ _10"> </span><span class="ff7">loop<span class="_"> </span>yields<span class="_"> </span>the<span class="_"> </span>following:</span></div><div class="t m5 x1d h2d y26b4 ffd fs1e fc2 sc0 ls0 ws0">long<span class="_ _e"> </span>fact_for_while(long<span class="_ _1f"> </span>n)</div><div class="t m5 x1d h2d y27eb ffd fs1e fc2 sc0 ls0 ws0">{</div><div class="t m5 x10c h2d y27ec ffd fs1e fc2 sc0 ls33 ws0">l<span class="_ _41"></span>o<span class="_ _41"></span>n<span class="_ _41"></span>gi=2<span class="_ _41"></span>;</div><div class="t m5 x10c h2d y27ed ffd fs1e fc2 sc0 ls0 ws0">long<span class="_ _e"> </span>result<span class="_ _1f"> </span>=<span class="_ _1f"> </span>1;</div><div class="t m5 x10c h2d y27ee ffd fs1e fc2 sc0 ls0 ws0">while<span class="_ _e"> </span>(i<span class="_ _1f"> </span>&lt;=<span class="_ _1f"> </span>n)<span class="_ _e"> </span>{</div><div class="t m5 x22b h2d y27ef ffd fs1e fc2 sc0 ls0 ws0">result<span class="_ _e"> </span>*=<span class="_ _1f"> </span>i;</div><div class="t m5 x22b h2d y27f0 ffd fs1e fc2 sc0 ls0 ws0">i++;</div><div class="t m5 x10c h2d y27f1 ffd fs1e fc2 sc0 ls0 ws0">}</div><div class="t m5 x10c h2d y27f2 ffd fs1e fc2 sc0 ls0 ws0">return<span class="_ _e"> </span>result;</div><div class="t m5 x1d h2d y27f3 ffd fs1e fc2 sc0 ls0 ws0">}</div><div class="t m5 x1d h26 y27f4 ff7 fs19 fc2 sc0 ls0 ws0">Applying<span class="_ _16"> </span>the<span class="_ _14"> </span>jump-to-middle<span class="_ _14"> </span>transformation<span class="_ _14"> </span>to<span class="_ _16"> </span>the<span class="_ _14"> </span><span class="ffd">while<span class="_ _14"> </span></span>loop<span class="_ _14"> </span>then<span class="_ _14"> </span>yields<span class="_ _16"> </span>the</div><div class="t m5 x1d h26 y27f5 ff7 fs19 fc2 sc0 ls0 ws0">following<span class="_"> </span>version<span class="_"> </span>in<span class="_"> </span>goto<span class="_"> </span>code:</div><div class="t m5 x1d h2d y6fe ffd fs1e fc2 sc0 ls0 ws0">long<span class="_ _e"> </span>fact_for_jm_goto(long<span class="_ _1f"> </span>n)</div><div class="t m5 x1d h2d y27f6 ffd fs1e fc2 sc0 ls0 ws0">{</div><div class="t m5 x10c h2d y27f7 ffd fs1e fc2 sc0 ls33 ws0">l<span class="_ _41"></span>o<span class="_ _41"></span>n<span class="_ _41"></span>gi=2<span class="_ _41"></span>;</div><div class="t m5 x10c h2d y27f8 ffd fs1e fc2 sc0 ls0 ws0">long<span class="_ _e"> </span>result<span class="_ _1f"> </span>=<span class="_ _1f"> </span>1;</div><div class="t m5 x10c h2d y27f9 ffd fs1e fc2 sc0 ls0 ws0">goto<span class="_ _e"> </span>test;</div><div class="t m5 xc5 h2d y27fa ffd fs1e fc2 sc0 ls0 ws0">loop:</div><div class="t m5 x10c h2d y27fb ffd fs1e fc2 sc0 ls0 ws0">result<span class="_ _e"> </span>*=<span class="_ _1f"> </span>i;</div><div class="t m5 x10c h2d y27fc ffd fs1e fc2 sc0 ls0 ws0">i++;</div><div class="t m5 xc5 h2d y27fd ffd fs1e fc2 sc0 ls0 ws0">test:</div><div class="t m5 x10c h2d y27fe ffd fs1e fc2 sc0 ls0 ws0">if<span class="_ _e"> </span>(i<span class="_ _1f"> </span>&lt;=<span class="_ _1f"> </span>n)</div><div class="t m5 x22b h2d y27ff ffd fs1e fc2 sc0 ls0 ws0">goto<span class="_ _e"> </span>loop;</div><div class="t m5 x10c h2d y2800 ffd fs1e fc2 sc0 ls0 ws0">return<span class="_ _e"> </span>result;</div><div class="t m5 x1d h2d y2801 ffd fs1e fc2 sc0 ls0 ws0">}</div></div><div class="pi" data-data='{"ctm":[2.000000,0.000000,0.000000,2.000000,0.000000,0.000000]}'></div></div>
