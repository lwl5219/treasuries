<div id="pf88" class="pf w2 h11" data-page-no="88"><div class="pc pc88 w2 h11"><img class="bi x0 y0 w1 h1" alt="" src="csapp/bg88.png"/><div class="t m5 xa9 h28 y9b ff6 fs1f fc2 sc0 ls0 ws0">Section<span class="_ _10"> </span>2.3<span class="_ _60"> </span>Integer<span class="_ _10"> </span>Arithmetic<span class="_ _3e"> </span><span class="ffe fs1e">135</span></div><div class="t m5 x17 h31 ye7 ff7 fs21 fc2 sc0 ls0 ws0">Mode<span class="_ _d8"> </span><span class="ff11 lsc8">xy<span class="_ _8"></span>x</span></div><div class="t m5 x11a h55 y1504 ff11 fs21 fc2 sc0 ls0 ws0">.</div><div class="t m5 x98 h31 ye7 ff11 fs21 fc2 sc0 ls0 ws0">y<span class="_ _c2"> </span><span class="ff7">T<span class="_ _7"></span>runcated<span class="_"> </span><span class="ff11">x</span></span></div><div class="t m5 x21a h55 y1504 ff11 fs21 fc2 sc0 ls0 ws0">.</div><div class="t m5 x21b h55 ye7 ff11 fs21 fc2 sc0 ls0 ws0">y</div><div class="t m5 x17 h31 yb20 ff7 fs21 fc2 sc0 ls0 ws0">Unsigned<span class="_ _eb"> </span><span class="fc1">[110]<span class="_ _ec"> </span>[110]</span></div><div class="t m5 x17 h31 y9bb ff7 fs21 fc1 sc0 ls0 ws0">T<span class="_ _7"></span>wo’s<span class="_"> </span>complement<span class="_ _9b"> </span>[110]<span class="_ _ec"> </span>[110]</div><div class="t m5 x17 h47 y1505 ffe fs2b fc1 sc0 ls0 ws0">Practice<span class="_"> </span>Problem<span class="_"> </span>2.35<span class="_ _1f"> </span><span class="fs16">(solution<span class="_"> </span>page<span class="_"> </span>190)</span></div><div class="t m5 x17 h26 y1506 ff7 fs19 fc1 sc0 ls0 ws0">Y<span class="_ _3"></span>ou<span class="_ _11"> </span>are<span class="_ _16"> </span>given<span class="_ _11"> </span>the<span class="_ _11"> </span>assignment<span class="_ _16"> </span>to<span class="_ _11"> </span>develop<span class="_ _16"> </span>code<span class="_ _11"> </span>for<span class="_ _11"> </span>a<span class="_ _16"> </span>function<span class="_ _11"> </span><span class="ffd">tmult_ok<span class="_ _16"> </span></span>that<span class="_ _11"> </span>will</div><div class="t m5 x17 h26 y1507 ff7 fs19 fc1 sc0 ls0 ws0">determine<span class="_ _14"> </span>whether<span class="_ _14"> </span>two<span class="_ _14"> </span>arguments<span class="_ _14"> </span>can<span class="_ _14"> </span>be<span class="_ _14"> </span>multiplied<span class="_ _14"> </span>without<span class="_ _14"> </span>causing<span class="_ _14"> </span>overﬂow<span class="_ _3"></span>.</div><div class="t m5 x17 h26 y1508 ff7 fs19 fc1 sc0 ls0 ws0">Here<span class="_"> </span>is<span class="_"> </span>your<span class="_"> </span>solution:</div><div class="t m5 x17 h2d y1509 ffd fs1e fc2 sc0 ls0 ws0">/*<span class="_ _e"> </span>Determine<span class="_ _1f"> </span>whether<span class="_ _1f"> </span>arguments<span class="_ _e"> </span>can<span class="_ _1f"> </span>be<span class="_ _e"> </span>multiplied<span class="_ _1f"> </span>without<span class="_ _1f"> </span>overflow<span class="_ _e"> </span>*/</div><div class="t m5 x17 h2d y150a ffd fs1e fc2 sc0 ls0 ws0">int<span class="_ _e"> </span>tmult_ok(int<span class="_ _1f"> </span>x,<span class="_ _1f"> </span>int<span class="_ _e"> </span>y)<span class="_ _1f"> </span>{</div><div class="t m5 x1b6 h2d y150b ffd fs1e fc2 sc0 ls0 ws0">int<span class="_ _e"> </span>p<span class="_ _1f"> </span>=<span class="_ _1f"> </span>x*y;</div><div class="t m5 x1b6 h2d y150c ffd fs1e fc2 sc0 ls0 ws0">/*<span class="_ _e"> </span>Either<span class="_ _1f"> </span>x<span class="_ _1f"> </span>is<span class="_ _e"> </span>zero,<span class="_ _1f"> </span>or<span class="_ _e"> </span>dividing<span class="_ _1f"> </span>p<span class="_ _1f"> </span>by<span class="_ _e"> </span>x<span class="_ _1f"> </span>gives<span class="_ _e"> </span>y<span class="_ _1f"> </span>*/</div><div class="t m5 x1b6 h2d y150d ffd fs1e fc2 sc0 ls0 ws0">return<span class="_ _e"> </span>!x<span class="_ _1f"> </span>||<span class="_ _1f"> </span>p/x<span class="_ _e"> </span>==<span class="_ _1f"> </span>y;</div><div class="t m5 x17 h2d y150e ffd fs1e fc2 sc0 ls0 ws0">}</div><div class="t m5 x26 h26 y150f ff7 fs19 fc2 sc0 ls0 ws0">Y<span class="_ _3"></span>ou<span class="_ _16"> </span>test<span class="_ _16"> </span>this<span class="_ _16"> </span>code<span class="_ _14"> </span>for<span class="_ _16"> </span>a<span class="_ _16"> </span>number<span class="_ _16"> </span>of<span class="_ _14"> </span>values<span class="_ _16"> </span>of<span class="_ _16"> </span><span class="ffd">x<span class="_ _16"> </span></span>and<span class="_ _14"> </span><span class="ffd">y</span>,<span class="_ _14"> </span>and<span class="_ _16"> </span>it<span class="_ _16"> </span>seems<span class="_ _16"> </span>to<span class="_ _14"> </span>work</div><div class="t m5 x17 h26 y1510 ff7 fs19 fc2 sc0 ls0 ws0">properly<span class="_ _3"></span>.<span class="_ _15"> </span>Y<span class="_ _3"></span>our<span class="_ _15"> </span>coworker<span class="_ _21"> </span>challenges<span class="_ _21"> </span>you,<span class="_ _f"> </span>saying,<span class="_ _21"> </span>“If<span class="_ _21"> </span>I<span class="_ _15"> </span>can’t<span class="_ _15"> </span>use<span class="_ _21"> </span>subtraction<span class="_ _21"> </span>to</div><div class="t m5 x17 h26 y1511 ff7 fs19 fc2 sc0 ls0 ws0">test<span class="_ _11"> </span>whether<span class="_ _16"> </span>addition<span class="_ _11"> </span>has<span class="_ _16"> </span>overﬂowed<span class="_ _11"> </span>(see<span class="_ _16"> </span>Problem<span class="_ _11"> </span>2.31),<span class="_ _16"> </span>then<span class="_ _16"> </span>how<span class="_ _11"> </span>can<span class="_ _16"> </span>you<span class="_ _11"> </span>use</div><div class="t m5 x17 h26 y1512 ff7 fs19 fc2 sc0 ls0 ws0">division<span class="_"> </span>to<span class="_"> </span>test<span class="_"> </span>whether<span class="_"> </span>multiplication<span class="_"> </span>has<span class="_"> </span>overﬂowed?”</div><div class="t m5 x26 h26 y1513 ff7 fs19 fc2 sc0 ls0 ws0">Devise<span class="_ _15"> </span>a<span class="_ _21"> </span>mathematical<span class="_ _15"> </span>justiﬁcation<span class="_ _15"> </span>of<span class="_ _21"> </span>your<span class="_ _15"> </span>approach,<span class="_ _f"> </span>along<span class="_ _21"> </span>the<span class="_ _15"> </span>following</div><div class="t m5 x17 h46 y1514 ff7 fs19 fc2 sc0 ls0 ws0">lines<span class="_ _1"></span>.<span class="_ _15"> </span>F<span class="_ _1"></span>irst,<span class="_ _21"> </span>argue<span class="_ _15"> </span>that<span class="_ _15"> </span>the<span class="_ _15"> </span>case<span class="_ _15"> </span><span class="ff11">x<span class="_ _16"> </span><span class="ff12">=<span class="_ _10"> </span></span></span>0<span class="_ _14"> </span>is<span class="_ _15"> </span>handled<span class="_ _15"> </span>correctly<span class="_ _3"></span>.<span class="_ _15"> </span>Otherwise<span class="_ _1"></span>,<span class="_ _21"> </span>consider</div><div class="t m5 x17 h46 y1515 ff11 fs19 fc2 sc0 ls0 ws0">w<span class="_ _2"></span><span class="ff7">-bit<span class="_ _11"> </span>numbers<span class="_ _16"> </span></span>x<span class="_"> </span><span class="ff7">(</span>x<span class="_"> </span><span class="ff12">=<span class="_ _10"> </span><span class="ff7 ls24">0),<span class="_ _11"> </span></span></span>y<span class="_ _5"></span><span class="ff7">,<span class="_ _16"> </span></span>p<span class="_ _2"></span><span class="ff7">,<span class="_ _16"> </span>and<span class="_ _11"> </span></span>q<span class="_ _5"></span><span class="ff7">,<span class="_ _16"> </span>where<span class="_ _16"> </span></span>p<span class="_"> </span><span class="ff7">is<span class="_ _11"> </span>the<span class="_ _16"> </span>result<span class="_ _11"> </span>of<span class="_ _16"> </span>performing<span class="_ _11"> </span>two’s-</span></div><div class="t m5 x17 h26 y1516 ff7 fs19 fc2 sc0 ls0 ws0">complement<span class="_"> </span>multiplication<span class="_"> </span>on<span class="_"> </span><span class="ff11">x<span class="_"> </span></span>and<span class="_"> </span><span class="ff11">y<span class="_ _2"></span></span>,<span class="_"> </span>and<span class="_"> </span><span class="ff11">q<span class="_"> </span></span>is<span class="_"> </span>the<span class="_"> </span>result<span class="_"> </span>of<span class="_"> </span>dividing<span class="_"> </span><span class="ff11">p<span class="_ _10"> </span></span>by<span class="_"> </span><span class="ff11">x<span class="_ _5"></span></span>.</div><div class="t m5 x1cd h26 y1517 ffc fs19 fc2 sc0 ls0 ws0">1.<span class="_ _e"> </span><span class="ff7">Show<span class="_ _14"> </span>that<span class="_ _14"> </span><span class="ff11">x</span></span></div><div class="t m5 xa4 h45 y1518 ff11 fs19 fc2 sc0 ls0 ws0">.</div><div class="t m5 x10c h26 y1517 ff11 fs19 fc2 sc0 ls0 ws0">y<span class="_ _2"></span><span class="ff7">,<span class="_ _15"> </span>the<span class="_ _16"> </span>integer<span class="_ _14"> </span>product<span class="_ _14"> </span>of<span class="_ _16"> </span></span>x<span class="_ _21"> </span><span class="ff7">and<span class="_ _14"> </span></span>y<span class="_ _5"></span><span class="ff7">,<span class="_ _14"> </span>can<span class="_ _14"> </span>be<span class="_ _14"> </span>written<span class="_ _16"> </span>in<span class="_ _14"> </span>the<span class="_ _14"> </span>form</span></div><div class="t m5 x26 h45 y1519 ff11 fs19 fc2 sc0 ls0 ws0">x</div><div class="t m5 x35 h45 y151a ff11 fs19 fc2 sc0 ls0 ws0">.</div><div class="t m5 x1d2 h46 y1519 ff11 fs19 fc2 sc0 ls0 ws0">y<span class="_ _11"> </span><span class="ff12">=<span class="_ _10"> </span></span>p<span class="_ _10"> </span><span class="ff12">+<span class="_ _13"></span></span>t<span class="_ _be"></span><span class="ff7">2</span></div><div class="t m5 xa6 h50 y151b ff11 fs25 fc2 sc0 ls0 ws0">w</div><div class="t m5 xad h46 y151c ff7 fs19 fc2 sc0 ls0 ws0">,<span class="_"> </span>where<span class="_"> </span><span class="ff11">t<span class="_"> </span><span class="ff12">=<span class="_ _10"> </span></span></span>0<span class="_"> </span>if<span class="_"> </span>and<span class="_"> </span>only<span class="_"> </span>if<span class="_"> </span>the<span class="_"> </span>computation<span class="_"> </span>of<span class="_"> </span><span class="ff11">p<span class="_ _11"> </span></span>overﬂows<span class="_ _1"></span>.</div><div class="t m5 x1cd h46 y151d ffc fs19 fc2 sc0 ls0 ws0">2.<span class="_ _e"> </span><span class="ff7">Show<span class="_"> </span>that<span class="_"> </span><span class="ff11">p<span class="_ _16"> </span></span>can<span class="_"> </span>be<span class="_"> </span>written<span class="_"> </span>in<span class="_"> </span>the<span class="_"> </span>form<span class="_"> </span><span class="ff11">p<span class="_ _10"> </span><span class="ff12">=<span class="_ _13"> </span></span>x</span></span></div><div class="t m5 xfd h45 y151e ff11 fs19 fc2 sc0 ls0 ws0">.</div><div class="t m5 x7f h46 y151d ff11 fs19 fc2 sc0 ls0 ws0">q<span class="_ _11"> </span><span class="ff12">+<span class="_ _10"> </span></span>r<span class="_ _5"></span><span class="ff7">,<span class="_"> </span>where<span class="_"> </span><span class="ff12">|</span></span>r<span class="_ _5"></span><span class="ff12">|<span class="_ _10"> </span></span>&lt;<span class="_ _13"> </span><span class="ff12">|</span>x<span class="_ _5"></span><span class="ff12">|<span class="ff7">.</span></span></div><div class="t m5 x52 h46 y151f ffc fs19 fc2 sc0 ls0 ws0">3.<span class="_ _e"> </span><span class="ff7">Show<span class="_"> </span>that<span class="_"> </span><span class="ff11">q<span class="_"> </span><span class="ff12">=<span class="_ _13"></span></span>y<span class="_"> </span></span>if<span class="_"> </span>and<span class="_"> </span>only<span class="_"> </span>if<span class="_"> </span><span class="ff11">r<span class="_ _11"> </span><span class="ff12">=<span class="_ _10"> </span></span>t<span class="_ _11"> </span><span class="ff12">=<span class="_ _10"> </span></span></span><span class="ls93">0.</span></span></div><div class="t m5 x17 h47 y1520 ffe fs2b fc1 sc0 ls0 ws0">Practice<span class="_"> </span>Problem<span class="_"> </span>2.36<span class="_ _1f"> </span><span class="fs16">(solution<span class="_"> </span>page<span class="_"> </span>190)</span></div><div class="t m5 x17 h26 y1521 ff7 fs19 fc1 sc0 ls0 ws0">F<span class="_ _1"></span>or<span class="_"> </span>the<span class="_"> </span>case<span class="_ _13"> </span>where<span class="_"> </span>data<span class="_"> </span>type<span class="_ _13"> </span><span class="ffd">int<span class="_ _10"> </span></span>has<span class="_"> </span>32<span class="_"> </span>bits<span class="_ _3"></span>,<span class="_"> </span>devise<span class="_"> </span>a<span class="_"> </span>version<span class="_ _13"> </span>of<span class="_"> </span><span class="ffd">tmult_ok<span class="_ _10"> </span></span>(Prob-</div><div class="t m5 x17 h26 y1522 ff7 fs19 fc1 sc0 ls0 ws0">lem<span class="_ _f"> </span>2.35)<span class="_ _e"> </span>that<span class="_ _f"> </span>uses<span class="_ _e"> </span>the<span class="_ _f"> </span>64-bit<span class="_ _e"> </span>precision<span class="_ _f"> </span>of<span class="_ _e"> </span>data<span class="_ _f"> </span>type<span class="_ _e"> </span><span class="ffd">int64_t</span>,<span class="_ _1f"> </span>without<span class="_ _f"> </span>using</div><div class="t m5 x17 h26 y1523 ff7 fs19 fc1 sc0 ls0 ws0">division.</div><div class="t m5 x17 h47 ye13 ffe fs2b fc1 sc0 ls0 ws0">Practice<span class="_"> </span>Problem<span class="_"> </span>2.37<span class="_ _1f"> </span><span class="fs16">(solution<span class="_"> </span>page<span class="_"> </span>191)</span></div><div class="t m5 x17 h26 ye14 ff7 fs19 fc1 sc0 ls0 ws0">Y<span class="_ _3"></span>ou<span class="_ _16"> </span>are<span class="_ _11"> </span>given<span class="_ _16"> </span>the<span class="_ _16"> </span>task<span class="_ _16"> </span>of<span class="_ _16"> </span>patching<span class="_ _16"> </span>the<span class="_ _11"> </span>vulnerability<span class="_ _16"> </span>in<span class="_ _16"> </span>the<span class="_ _16"> </span>XDR<span class="_ _16"> </span>code<span class="_ _16"> </span>shown<span class="_ _16"> </span>in</div><div class="t m5 x17 h26 ye15 ff7 fs19 fc1 sc0 ls0 ws0">the<span class="_ _11"> </span>aside<span class="_ _11"> </span>on<span class="_ _11"> </span>page<span class="_ _11"> </span>136<span class="_ _11"> </span>for<span class="_ _11"> </span>the<span class="_ _11"> </span>case<span class="_ _11"> </span>where<span class="_ _11"> </span>both<span class="_ _16"> </span>data<span class="_"> </span>types<span class="_ _11"> </span><span class="ffd">int<span class="_ _11"> </span></span>and<span class="_ _11"> </span><span class="ffd">size_t<span class="_ _11"> </span></span>are<span class="_ _16"> </span>32</div><div class="t m5 x17 h26 ye16 ff7 fs19 fc1 sc0 ls0 ws0">bits<span class="_ _1"></span>.<span class="_ _11"> </span>Y<span class="_ _3"></span>ou<span class="_ _16"> </span>decide<span class="_ _11"> </span>to<span class="_ _11"> </span>eliminate<span class="_ _16"> </span>the<span class="_ _11"> </span>possibility<span class="_ _11"> </span>of<span class="_ _16"> </span>the<span class="_ _11"> </span>multiplication<span class="_ _11"> </span>overﬂowing<span class="_ _16"> </span>by</div><div class="t m5 x17 h26 ye17 ff7 fs19 fc1 sc0 ls0 ws0">computing<span class="_ _13"> </span>the<span class="_ _13"> </span>number<span class="_ _13"> </span>of<span class="_"> </span>bytes<span class="_ _13"> </span>to<span class="_ _13"> </span>allocate<span class="_ _13"> </span>using<span class="_ _13"> </span>data<span class="_ _13"> </span>type<span class="_"> </span><span class="ffd">uint64_t</span>.<span class="_ _13"> </span>Y<span class="_ _7"></span>ou<span class="_ _13"> </span>replace</div></div><div class="pi" data-data='{"ctm":[2.000000,0.000000,0.000000,2.000000,0.000000,0.000000]}'></div></div>
