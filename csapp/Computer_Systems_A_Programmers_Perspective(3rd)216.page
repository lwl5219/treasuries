<div id="pfd8" class="pf w2 h11" data-page-no="d8"><div class="pc pcd8 w2 h11"><img class="bi x0 y0 w1 h1" alt="" src="csapp/bgd8.png"/><div class="t m5 x6a h28 y9b ff6 fs1f fc2 sc0 ls0 ws0">Section<span class="_ _10"> </span>3.4<span class="_ _60"> </span>Accessing<span class="_ _10"> </span>Information<span class="_ _3e"> </span><span class="ffe fs1e">215</span></div><div class="t m5 x17 h26 y9c ff7 fs19 fc2 sc0 ls0 ws0">not<span class="_ _15"> </span>implemented<span class="_ _15"> </span>with<span class="_ _15"> </span>the<span class="_ _15"> </span>same<span class="_ _21"> </span>high-performance<span class="_ _15"> </span>hardware<span class="_ _15"> </span>as<span class="_ _15"> </span>is<span class="_ _15"> </span>the<span class="_ _21"> </span>case<span class="_ _15"> </span>for</div><div class="t m5 x17 h26 y409 ff7 fs19 fc2 sc0 ls0 ws0">single-<span class="_"> </span>and<span class="_"> </span>double-precision<span class="_"> </span>arithmetic.</div><div class="t m5 x26 h26 y40a ff7 fs19 fc2 sc0 ls0 ws0">As<span class="_ _11"> </span>the<span class="_ _16"> </span>table<span class="_ _16"> </span>of<span class="_ _11"> </span>Figure<span class="_ _11"> </span>3.1<span class="_ _16"> </span>indicates<span class="_ _1"></span>,<span class="_ _16"> </span>most<span class="_ _11"> </span>assembly-code<span class="_ _16"> </span>instructions<span class="_ _16"> </span>gener<span class="_ _1"></span>-</div><div class="t m5 x17 h26 y40b ff7 fs19 fc2 sc0 ls0 ws0">ated<span class="_ _16"> </span>by<span class="_ _16"> </span><span class="ff9">gcc<span class="_ _16"> </span></span>have<span class="_ _11"> </span>a<span class="_ _16"> </span>single-character<span class="_ _16"> </span>sufﬁx<span class="_ _16"> </span>denoting<span class="_ _16"> </span>the<span class="_ _16"> </span>size<span class="_ _16"> </span>of<span class="_ _16"> </span>the<span class="_ _16"> </span>operand.<span class="_ _16"> </span>F<span class="_ _3"></span>or</div><div class="t m5 x17 h26 y40c ff7 fs19 fc2 sc0 ls0 ws0">example<span class="_ _1"></span>,<span class="_ _e"> </span>the<span class="_ _15"> </span>data<span class="_ _15"> </span>movement<span class="_ _21"> </span>instruction<span class="_ _21"> </span>has<span class="_ _21"> </span>four<span class="_ _15"> </span>variants:<span class="_ _21"> </span><span class="ffd">movb<span class="_ _21"> </span></span>(move<span class="_ _21"> </span>byte),</div><div class="t m5 x17 h26 y40d ffd fs19 fc2 sc0 ls0 ws0">movw<span class="_ _10"> </span><span class="ff7">(move<span class="_"> </span>word),<span class="_ _11"> </span></span>movl<span class="_ _10"> </span><span class="ff7">(move<span class="_ _11"> </span>double<span class="_"> </span>word),<span class="_ _11"> </span>and<span class="_"> </span></span>movq<span class="_ _10"> </span><span class="ff7">(move<span class="_ _11"> </span>quad<span class="_"> </span>word).<span class="_"> </span>The</span></div><div class="t m5 x17 h26 y40e ff7 fs19 fc2 sc0 ls0 ws0">sufﬁx<span class="_ _14"> </span>‘<span class="ffd">l</span>’<span class="_ _14"> </span>is<span class="_ _15"> </span>used<span class="_ _14"> </span>for<span class="_ _14"> </span>double<span class="_ _14"> </span>words<span class="_ _0"></span>,<span class="_ _15"> </span>since<span class="_ _14"> </span>32-bit<span class="_ _14"> </span>quantities<span class="_ _15"> </span>are<span class="_ _14"> </span>considered<span class="_ _14"> </span>to<span class="_ _15"> </span>be</div><div class="t m5 x17 h26 y40f ff7 fs19 fc2 sc0 ls0 ws0">“long<span class="_"> </span>words<span class="_ _1"></span>.<span class="_ _0"></span>”<span class="_"> </span>The<span class="_"> </span>assembly<span class="_"> </span>code<span class="_ _11"> </span>uses<span class="_ _11"> </span>the<span class="_"> </span>sufﬁx<span class="_ _11"> </span>‘<span class="ffd">l</span>’<span class="_ _11"> </span>to<span class="_ _11"> </span>denote<span class="_ _11"> </span>a<span class="_"> </span>4-byte<span class="_ _11"> </span>integer<span class="_ _11"> </span>as</div><div class="t m5 x17 h26 y410 ff7 fs19 fc2 sc0 ls0 ws0">well<span class="_"> </span>as<span class="_ _13"> </span>an<span class="_"> </span>8-byte<span class="_ _13"> </span>double-precision<span class="_"> </span>ﬂoating-point<span class="_ _13"> </span>number.<span class="_ _13"> </span>T<span class="_ _0"></span>his<span class="_"> </span>causes<span class="_ _13"> </span>no<span class="_"> </span>ambigu-</div><div class="t m5 x17 h26 y411 ff7 fs19 fc2 sc0 ls0 ws0">ity<span class="_ _3"></span>,<span class="_"> </span>since<span class="_ _11"> </span>ﬂoating-point<span class="_"> </span>code<span class="_ _11"> </span>involves<span class="_"> </span>an<span class="_ _11"> </span>entirely<span class="_"> </span>different<span class="_ _11"> </span>set<span class="_"> </span>of<span class="_ _11"> </span>instructions<span class="_"> </span>and</div><div class="t m5 x17 h26 y412 ff7 fs19 fc2 sc0 ls0 ws0">registers<span class="_ _1"></span>.</div><div class="t m5 x17 h3b y2181 fff fs24 fc6 sc0 ls0 ws0">3.4<span class="_ _17"> </span><span class="ffe fs18">Accessing<span class="_"> </span>Information</span></div><div class="t m5 x17 h26 y19a5 ff7 fs19 fc1 sc0 ls0 ws0">An<span class="_ _15"> </span>x86-64<span class="_ _15"> </span>central<span class="_ _21"> </span>processing<span class="_ _15"> </span>unit<span class="_ _21"> </span>(CPU)<span class="_ _15"> </span>contains<span class="_ _15"> </span>a<span class="_ _21"> </span>set<span class="_ _15"> </span>of<span class="_ _21"> </span>16<span class="_ _15"> </span><span class="ffa">general-purpose</span></div><div class="t m5 x17 h26 y19a6 ffa fs19 fc1 sc0 ls0 ws0">registers<span class="_ _13"> </span><span class="ff7">storing<span class="_ _13"> </span>64-bit<span class="_ _13"> </span>values<span class="_ _1"></span>.<span class="_ _13"> </span>T<span class="_ _1"></span>hese<span class="_ _13"> </span>registers<span class="_ _13"> </span>are<span class="_ _13"> </span>used<span class="_ _13"> </span>to<span class="_ _13"> </span>store<span class="_ _13"> </span>integer<span class="_ _13"> </span>data<span class="_ _13"> </span>as<span class="_ _13"> </span>well</span></div><div class="t m5 x17 h26 y19a7 ff7 fs19 fc1 sc0 ls0 ws0">as<span class="_ _13"> </span>pointers<span class="_ _3"></span>.<span class="_ _13"> </span>Figure<span class="_ _6"> </span>3.2<span class="_ _13"> </span>diagrams<span class="_ _13"> </span>the<span class="_ _13"> </span>16<span class="_ _13"> </span>registers<span class="_ _1"></span>.<span class="_ _13"> </span>T<span class="_ _1"></span>heir<span class="_ _13"> </span>names<span class="_ _13"> </span>all<span class="_ _13"> </span>begin<span class="_ _13"> </span>with<span class="_ _6"> </span><span class="ffd">%r</span>,<span class="_ _13"> </span>but</div><div class="t m5 x17 h26 y2182 ff7 fs19 fc1 sc0 ls0 ws0">otherwise<span class="_ _16"> </span>follow<span class="_ _16"> </span>multiple<span class="_ _14"> </span>different<span class="_ _16"> </span>naming<span class="_ _16"> </span>conventions<span class="_ _1"></span>,<span class="_ _14"> </span>owing<span class="_ _16"> </span>to<span class="_ _14"> </span>the<span class="_ _16"> </span>historical</div><div class="t m5 x17 h26 y2183 ff7 fs19 fc1 sc0 ls0 ws0">evolution<span class="_ _13"> </span>of<span class="_ _13"> </span>the<span class="_ _13"> </span>instruction<span class="_ _6"> </span>set.<span class="_ _13"> </span>T<span class="_ _0"></span>he<span class="_ _13"> </span>original<span class="_ _13"> </span>8086<span class="_ _13"> </span>had<span class="_ _6"> </span>eight<span class="_ _13"> </span>16-bit<span class="_ _13"> </span>registers<span class="_ _1"></span>,<span class="_ _13"> </span>shown</div><div class="t m5 x17 h26 y2184 ff7 fs19 fc1 sc0 ls0 ws0">in<span class="_ _13"> </span>Figure<span class="_ _13"> </span>3.2<span class="_"> </span>as<span class="_ _13"> </span>registers<span class="_"> </span><span class="ffd">%ax<span class="_ _13"> </span></span>through<span class="_"> </span><span class="ffd">%bp</span>.<span class="_ _13"> </span>Each<span class="_ _13"> </span>had<span class="_"> </span>a<span class="_ _13"> </span>speciﬁc<span class="_"> </span>purpose<span class="_ _1"></span>,<span class="_"> </span>and<span class="_ _13"> </span>hence</div><div class="t m5 x17 h26 y2185 ff7 fs19 fc1 sc0 ls0 ws0">they<span class="_ _13"> </span>were<span class="_ _6"> </span>given<span class="_ _13"> </span>names<span class="_ _6"> </span>that<span class="_ _13"> </span>reﬂected<span class="_ _6"> </span>how<span class="_ _13"> </span>they<span class="_ _6"> </span>were<span class="_ _13"> </span>to<span class="_ _6"> </span>be<span class="_ _13"> </span>used.<span class="_ _6"> </span>W<span class="_ _0"></span>ith<span class="_ _6"> </span>the<span class="_ _13"> </span>extension</div><div class="t m5 x17 h26 y2186 ff7 fs19 fc1 sc0 ls0 ws0">to<span class="_ _11"> </span>IA32,<span class="_ _16"> </span>these<span class="_ _11"> </span>registers<span class="_ _11"> </span>were<span class="_ _16"> </span>expanded<span class="_ _11"> </span>to<span class="_ _11"> </span>32-bit<span class="_ _16"> </span>registers<span class="_ _3"></span>,<span class="_ _16"> </span>labeled<span class="_ _11"> </span><span class="ffd">%eax<span class="_ _16"> </span></span>through</div><div class="t m5 x17 h26 y2187 ffd fs19 fc1 sc0 ls0 ws0">%ebp<span class="ff7">.<span class="_"> </span>In<span class="_"> </span>the<span class="_"> </span>extension<span class="_"> </span>to<span class="_"> </span>x86-64,<span class="_"> </span>the<span class="_ _13"> </span>original<span class="_"> </span>eight<span class="_"> </span>registers<span class="_"> </span>were<span class="_"> </span>expanded<span class="_"> </span>to<span class="_"> </span>64</span></div><div class="t m5 x17 h26 y2188 ff7 fs19 fc1 sc0 ls0 ws0">bits<span class="_ _1"></span>,<span class="_"> </span>labeled<span class="_"> </span><span class="ffd">%rax<span class="_ _10"> </span></span>through<span class="_"> </span><span class="ffd">%rbp</span>.<span class="_"> </span>In<span class="_ _13"> </span>addition,<span class="_"> </span>eight<span class="_"> </span>new<span class="_"> </span>registers<span class="_"> </span>were<span class="_"> </span>added,<span class="_"> </span>and</div><div class="t m5 x17 h26 y2189 ff7 fs19 fc1 sc0 ls0 ws0">these<span class="_ _13"> </span>were<span class="_ _13"> </span>given<span class="_"> </span>labels<span class="_ _13"> </span>according<span class="_ _13"> </span>to<span class="_ _13"> </span>a<span class="_ _13"> </span>new<span class="_ _13"> </span>naming<span class="_"> </span>convention:<span class="_ _13"> </span><span class="ffd">%r8<span class="_ _13"> </span></span>through<span class="_ _13"> </span><span class="ffd">%r15</span>.</div><div class="t m5 x26 h26 y218a ff7 fs19 fc1 sc0 ls0 ws0">As<span class="_ _11"> </span>the<span class="_ _16"> </span>nested<span class="_ _16"> </span>boxes<span class="_ _11"> </span>in<span class="_ _16"> </span>F<span class="_ _1"></span>igure<span class="_ _16"> </span>3.2<span class="_ _16"> </span>indicate<span class="_ _1"></span>,<span class="_ _16"> </span>instructions<span class="_ _16"> </span>can<span class="_ _11"> </span>operate<span class="_ _16"> </span>on<span class="_ _16"> </span>data</div><div class="t m5 x17 h26 y218b ff7 fs19 fc1 sc0 ls0 ws0">of<span class="_ _21"> </span>different<span class="_ _f"> </span>sizes<span class="_ _f"> </span>stored<span class="_ _f"> </span>in<span class="_ _f"> </span>the<span class="_ _21"> </span>low-order<span class="_ _f"> </span>bytes<span class="_ _f"> </span>of<span class="_ _f"> </span>the<span class="_ _f"> </span>16<span class="_ _21"> </span>registers<span class="_ _1"></span>.<span class="_ _f"> </span>Byte-level</div><div class="t m5 x17 h26 y218c ff7 fs19 fc1 sc0 ls0 ws0">operations<span class="_ _16"> </span>can<span class="_ _16"> </span>access<span class="_ _16"> </span>the<span class="_ _16"> </span>least<span class="_ _16"> </span>signiﬁcant<span class="_ _16"> </span>byte<span class="_ _1"></span>,<span class="_ _14"> </span>16-bit<span class="_ _16"> </span>operations<span class="_ _16"> </span>can<span class="_ _16"> </span>access<span class="_ _16"> </span>the</div><div class="t m5 x17 h26 y218d ff7 fs19 fc1 sc0 ls0 ws0">least<span class="_ _11"> </span>signiﬁcant<span class="_ _11"> </span>2<span class="_ _11"> </span>bytes<span class="_ _1"></span>,<span class="_ _16"> </span>32-bit<span class="_ _11"> </span>operations<span class="_ _11"> </span>can<span class="_ _11"> </span>access<span class="_ _16"> </span>the<span class="_"> </span>least<span class="_ _16"> </span>signiﬁcant<span class="_"> </span>4<span class="_ _16"> </span>bytes<span class="_ _3"></span>,</div><div class="t m5 x17 h26 y218e ff7 fs19 fc1 sc0 ls0 ws0">and<span class="_"> </span>64-bit<span class="_"> </span>operations<span class="_"> </span>can<span class="_"> </span>access<span class="_"> </span>entire<span class="_"> </span>registers<span class="_ _1"></span>.</div><div class="t m5 x26 h26 y218f ff7 fs19 fc1 sc0 ls0 ws0">In<span class="_ _14"> </span>later<span class="_ _14"> </span>sections<span class="_ _1"></span>,<span class="_ _21"> </span>we<span class="_ _14"> </span>will<span class="_ _15"> </span>present<span class="_ _14"> </span>a<span class="_ _14"> </span>number<span class="_ _15"> </span>of<span class="_ _14"> </span>instructions<span class="_ _15"> </span>for<span class="_ _14"> </span>copying<span class="_ _14"> </span>and</div><div class="t m5 x17 h26 y2190 ff7 fs19 fc1 sc0 ls0 ws0">generating<span class="_"> </span>1-,<span class="_"> </span>2-,<span class="_ _11"> </span>4-,<span class="_ _11"> </span>and<span class="_"> </span>8-byte<span class="_"> </span>values<span class="_ _0"></span>.<span class="_"> </span>When<span class="_"> </span>these<span class="_"> </span>instructions<span class="_"> </span>have<span class="_ _11"> </span>registers<span class="_"> </span>as</div><div class="t m5 x17 h26 y2191 ff7 fs19 fc1 sc0 ls0 ws0">destinations<span class="_ _1"></span>,<span class="_ _14"> </span>two<span class="_ _14"> </span>conventions<span class="_ _16"> </span>arise<span class="_ _14"> </span>for<span class="_ _14"> </span>what<span class="_ _16"> </span>happens<span class="_ _14"> </span>to<span class="_ _14"> </span>the<span class="_ _16"> </span>remaining<span class="_ _14"> </span>bytes<span class="_ _14"> </span>in</div><div class="t m5 x17 h26 y2192 ff7 fs19 fc1 sc0 ls0 ws0">the<span class="_ _13"> </span>register<span class="_"> </span>for<span class="_ _13"> </span>instructions<span class="_ _13"> </span>that<span class="_"> </span>generate<span class="_ _13"> </span>less<span class="_ _13"> </span>than<span class="_"> </span>8<span class="_ _13"> </span>bytes:<span class="_ _13"> </span>T<span class="_ _0"></span>hose<span class="_ _13"> </span>that<span class="_"> </span>generate<span class="_ _13"> </span>1-</div><div class="t m5 x17 h26 y2193 ff7 fs19 fc1 sc0 ls0 ws0">or<span class="_"> </span>2-byte<span class="_ _13"> </span>quantities<span class="_"> </span>leave<span class="_"> </span>the<span class="_"> </span>remaining<span class="_ _13"> </span>bytes<span class="_"> </span>unchanged.<span class="_"> </span>T<span class="_ _1"></span>hose<span class="_"> </span>that<span class="_ _13"> </span>generate<span class="_"> </span>4-</div><div class="t m5 x17 h26 y2194 ff7 fs19 fc1 sc0 ls0 ws0">byte<span class="_"> </span>quantities<span class="_ _13"> </span>set<span class="_"> </span>the<span class="_"> </span>upper<span class="_"> </span>4<span class="_ _13"> </span>bytes<span class="_"> </span>of<span class="_"> </span>the<span class="_ _13"> </span>register<span class="_"> </span>to<span class="_"> </span>zero<span class="_ _1"></span>.<span class="_"> </span>T<span class="_ _1"></span>he<span class="_"> </span>latter<span class="_"> </span>convention</div><div class="t m5 x17 h26 y2195 ff7 fs19 fc1 sc0 ls0 ws0">was<span class="_"> </span>adopted<span class="_"> </span>as<span class="_"> </span>part<span class="_"> </span>of<span class="_"> </span>the<span class="_"> </span>expansion<span class="_"> </span>from<span class="_"> </span>IA32<span class="_"> </span>to<span class="_"> </span>x86-64.</div><div class="t m5 x26 h26 y2196 ff7 fs19 fc1 sc0 ls0 ws0">As<span class="_"> </span>the<span class="_"> </span>annotations<span class="_"> </span>along<span class="_ _11"> </span>the<span class="_"> </span>right-hand<span class="_"> </span>side<span class="_ _11"> </span>of<span class="_"> </span>F<span class="_ _0"></span>igure<span class="_"> </span>3.2<span class="_"> </span>indicate,<span class="_"> </span>different</div><div class="t m5 x17 h26 y2197 ff7 fs19 fc1 sc0 ls0 ws0">registers<span class="_ _13"> </span>serve<span class="_ _13"> </span>different<span class="_ _13"> </span>roles<span class="_"> </span>in<span class="_ _13"> </span>typical<span class="_ _13"> </span>programs<span class="_ _3"></span>.<span class="_"> </span>Most<span class="_ _13"> </span>unique<span class="_ _13"> </span>among<span class="_ _13"> </span>them<span class="_ _13"> </span>is<span class="_ _13"> </span>the</div><div class="t m5 x17 h26 y2198 ff7 fs19 fc1 sc0 ls0 ws0">stack<span class="_"> </span>pointer<span class="_ _0"></span>,<span class="_"> </span><span class="ffd">%rsp</span>,<span class="_"> </span>used<span class="_ _13"> </span>to<span class="_"> </span>indicate<span class="_"> </span>the<span class="_ _13"> </span>end<span class="_"> </span>position<span class="_"> </span>in<span class="_"> </span>the<span class="_ _13"> </span>run-time<span class="_"> </span>stack.<span class="_"> </span>Some</div><div class="t m5 x17 h26 y2199 ff7 fs19 fc1 sc0 ls0 ws0">instructions<span class="_ _16"> </span>speciﬁcally<span class="_ _16"> </span>read<span class="_ _16"> </span>and<span class="_ _16"> </span>write<span class="_ _11"> </span>this<span class="_ _16"> </span>register.<span class="_ _16"> </span>T<span class="_ _1"></span>he<span class="_ _16"> </span>other<span class="_ _16"> </span>15<span class="_ _16"> </span>registers<span class="_ _16"> </span>have</div><div class="t m5 x17 h26 y219a ff7 fs19 fc1 sc0 ls0 ws0">more<span class="_"> </span>ﬂexibility<span class="_"> </span>in<span class="_"> </span>their<span class="_"> </span>uses<span class="_ _3"></span>.<span class="_"> </span>A<span class="_"> </span>small<span class="_"> </span>number<span class="_"> </span>of<span class="_"> </span>instructions<span class="_"> </span>make<span class="_"> </span>speciﬁc<span class="_"> </span>use<span class="_"> </span>of</div><div class="t m5 x17 h26 y219b ff7 fs19 fc1 sc0 ls0 ws0">certain<span class="_ _16"> </span>registers<span class="_ _3"></span>.<span class="_ _16"> </span>More<span class="_ _16"> </span>importantly<span class="_ _3"></span>,<span class="_ _16"> </span>a<span class="_ _16"> </span>set<span class="_ _16"> </span>of<span class="_ _11"> </span>standard<span class="_ _16"> </span>programming<span class="_ _16"> </span>conventions</div><div class="t m5 x17 h26 y219c ff7 fs19 fc1 sc0 ls0 ws0">governs<span class="_"> </span>how<span class="_ _13"> </span>the<span class="_"> </span>registers<span class="_"> </span>are<span class="_ _13"> </span>to<span class="_"> </span>be<span class="_"> </span>used<span class="_ _13"> </span>for<span class="_"> </span>managing<span class="_"> </span>the<span class="_ _13"> </span>stack,<span class="_"> </span>passing<span class="_"> </span>function</div></div><div class="pi" data-data='{"ctm":[2.000000,0.000000,0.000000,2.000000,0.000000,0.000000]}'></div></div>
