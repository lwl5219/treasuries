<div id="pf35d" class="pf w2 h11" data-page-no="35d"><div class="pc pc35d w2 h11"><img class="bi x0 y0 w1 h1" alt="" src="csapp/bg35d.png"/><div class="t m5 x14 h28 y9b ffe fs1e fc2 sc0 ls0 ws0">860<span class="_ _1b"> </span><span class="ff6 fs1f">Chapter<span class="_ _10"> </span>9<span class="_ _3d"> </span>Virtual<span class="_ _10"> </span>Memory</span></div><div class="t m5 x129 h3f y6fa3 ffb4 fs27 fc1 sc0 ls56 ws0">11<span class="_ _16e"></span><span class="ls0">Bit position</span></div><div class="t m5 x1f6 h3f y6fa4 ffb4 fs27 fc1 sc0 ls0 ws0">P<span class="_ _1"></span>A<span class="_ _1"></span> = <span class="ffb5">0x354</span></div><div class="t m5 x1af h3f y6fa3 ffb4 fs27 fc1 sc0 ls0 ws0">10<span class="_ _d"> </span>9<span class="_ _b3"> </span>8</div><div class="t m5 x255 h70 y6fa5 ffb5 fs27 fc1 sc0 ls0 ws0">0x0d<span class="_ _1c2"> </span>0x05<span class="_ _148"> </span>0x0</div><div class="t m5 x176 h3f y6fa3 ffb4 fs27 fc1 sc0 ls2a5 ws0">76543210</div><div class="t m5 x1bd h3f y6fa4 ffb4 fs27 fc1 sc0 ls0 ws0">0<span class="_ _1cc"></span>0<span class="_ _1cc"></span>1<span class="_ _1cc"></span>0<span class="_ _167"></span>1<span class="_ _1cc"></span>0<span class="_ _1cc"></span>1<span class="_ _1cc"></span>0<span class="_ _1cc"></span>1<span class="_ _1cc"></span>1<span class="_ _1cc"></span>0<span class="_ _1cc"></span>0</div><div class="t m5 x255 h70 y6fa6 ffb5 fs27 fc1 sc0 ls0 ws0">0x0d<span class="_ _98"> </span>0x14</div><div class="t m5 x115 h3f y6fa7 ffb4 fs27 fc1 sc0 ls0 ws0">CT<span class="_ _cf"> </span>CI<span class="_ _11c"> </span>CO</div><div class="t m5 x255 h3f y6fa8 ffb4 fs27 fc1 sc0 ls0 ws0">PPN<span class="_ _127"> </span>PPO</div><div class="t m5 x29 h26 y6fa9 ff7 fs19 fc2 sc0 ls0 ws0">Since<span class="_ _13"> </span>the<span class="_ _13"> </span>tag<span class="_ _13"> </span>in<span class="_"> </span>set<span class="_ _13"> </span><span class="ffd">0x5<span class="_ _13"> </span></span>matches<span class="_ _13"> </span>CT<span class="_ _3"></span>,<span class="_ _13"> </span>the<span class="_"> </span>cache<span class="_ _13"> </span>detects<span class="_ _13"> </span>a<span class="_ _13"> </span>hit,<span class="_ _13"> </span>reads<span class="_"> </span>out<span class="_ _13"> </span>the<span class="_ _13"> </span>data</div><div class="t m5 x1d h26 y6faa ff7 fs19 fc2 sc0 ls0 ws0">byte<span class="_"> </span>(<span class="ffd">0x36</span>)<span class="_ _13"> </span>at<span class="_"> </span>offset<span class="_"> </span>CO<span class="_ _3"></span>,<span class="_"> </span>and<span class="_ _13"> </span>returns<span class="_"> </span>it<span class="_"> </span>to<span class="_ _13"> </span>the<span class="_"> </span>MMU<span class="_ _3"></span>,<span class="_"> </span>which<span class="_ _13"> </span>then<span class="_"> </span>passes<span class="_"> </span>it<span class="_ _13"> </span>back<span class="_"> </span>to</div><div class="t m5 x1d h26 y6fab ff7 fs19 fc2 sc0 ls0 ws0">the<span class="_"> </span>CPU<span class="_ _3"></span>.</div><div class="t m5 x29 h26 y6fac ff7 fs19 fc2 sc0 ls0 ws0">Other<span class="_"> </span>paths<span class="_ _13"> </span>through<span class="_"> </span>the<span class="_ _13"> </span>translation<span class="_"> </span>process<span class="_ _13"> </span>are<span class="_"> </span>also<span class="_ _13"> </span>possible.<span class="_ _13"> </span>F<span class="_ _1"></span>or<span class="_"> </span>example<span class="_ _1"></span>,<span class="_"> </span>if</div><div class="t m5 x1d h26 y6fad ff7 fs19 fc2 sc0 ls0 ws0">the<span class="_ _13"> </span>TLB<span class="_ _13"> </span>misses<span class="_ _1"></span>,<span class="_"> </span>then<span class="_ _13"> </span>the<span class="_ _13"> </span>MMU<span class="_"> </span>must<span class="_ _13"> </span>fetch<span class="_ _13"> </span>the<span class="_ _13"> </span>PPN<span class="_ _13"> </span>from<span class="_"> </span>a<span class="_ _13"> </span>PTE<span class="_ _13"> </span>in<span class="_ _13"> </span>the<span class="_"> </span>page<span class="_ _13"> </span>table<span class="_ _1"></span>.</div><div class="t m5 x1d h26 y6fae ff7 fs19 fc2 sc0 ls0 ws0">If<span class="_"> </span>the<span class="_ _13"> </span>resulting<span class="_"> </span>PTE<span class="_ _13"> </span>is<span class="_"> </span>invalid,<span class="_ _13"> </span>then<span class="_"> </span>there<span class="_"> </span>is<span class="_ _13"> </span>a<span class="_"> </span>page<span class="_ _13"> </span>fault<span class="_"> </span>and<span class="_ _13"> </span>the<span class="_"> </span>kernel<span class="_ _13"> </span>must<span class="_"> </span>page</div><div class="t m5 x1d h26 y6faf ff7 fs19 fc2 sc0 ls0 ws0">in<span class="_"> </span>the<span class="_ _13"> </span>appropriate<span class="_"> </span>page<span class="_ _13"> </span>and<span class="_"> </span>rerun<span class="_ _13"> </span>the<span class="_"> </span>load<span class="_ _13"> </span>instruction.<span class="_"> </span>Another<span class="_ _13"> </span>possibility<span class="_"> </span>is<span class="_ _13"> </span>that</div><div class="t m5 x1d h26 y6fb0 ff7 fs19 fc2 sc0 ls0 ws0">the<span class="_"> </span>PTE<span class="_"> </span>is<span class="_"> </span>valid,<span class="_"> </span>but<span class="_"> </span>the<span class="_"> </span>necessary<span class="_"> </span>memory<span class="_"> </span>block<span class="_"> </span>misses<span class="_"> </span>in<span class="_"> </span>the<span class="_"> </span>cache<span class="_ _1"></span>.</div><div class="t m5 x1d h47 y6fb1 ffe fs2b fc1 sc0 ls0 ws0">Practice<span class="_"> </span>Problem<span class="_"> </span>9.4<span class="_ _1f"> </span><span class="fs16">(solution<span class="_"> </span>page<span class="_"> </span>917)</span></div><div class="t m5 x1d h26 y6fb2 ff7 fs19 fc1 sc0 ls0 ws0">Show<span class="_ _13"> </span>how<span class="_ _6"> </span>the<span class="_ _13"> </span>example<span class="_ _6"> </span>memory<span class="_ _13"> </span>system<span class="_ _6"> </span>in<span class="_ _13"> </span>Section<span class="_ _6"> </span>9.6.4<span class="_ _13"> </span>translates<span class="_ _6"> </span>a<span class="_ _13"> </span>virtual<span class="_ _6"> </span>address</div><div class="t m5 x1d h26 y6fb3 ff7 fs19 fc1 sc0 ls0 ws0">into<span class="_ _21"> </span>a<span class="_ _f"> </span>physical<span class="_ _f"> </span>address<span class="_ _f"> </span>and<span class="_ _f"> </span>accesses<span class="_ _f"> </span>the<span class="_ _21"> </span>cache.<span class="_ _21"> </span>F<span class="_ _1"></span>or<span class="_ _f"> </span>the<span class="_ _f"> </span>given<span class="_ _21"> </span>virtual<span class="_ _f"> </span>address<span class="_ _1"></span>,</div><div class="t m5 x1d h26 y6fb4 ff7 fs19 fc1 sc0 ls0 ws0">indicate<span class="_ _13"> </span>the<span class="_"> </span>TLB<span class="_ _13"> </span>entry<span class="_ _13"> </span>accessed,<span class="_"> </span>physical<span class="_ _13"> </span>address<span class="_ _1"></span>,<span class="_ _13"> </span>and<span class="_"> </span>cache<span class="_ _13"> </span>byte<span class="_ _13"> </span>value<span class="_"> </span>returned.</div><div class="t m5 x1d h26 y6fb5 ff7 fs19 fc1 sc0 ls0 ws0">Indicate<span class="_ _6"> </span>whether<span class="_ _6"> </span>the<span class="_ _6"> </span>TLB<span class="_ _6"> </span>misses<span class="_ _0"></span>,<span class="_ _6"> </span>whether<span class="_ _13"> </span>a<span class="_ _a"> </span>page<span class="_ _6"> </span>fault<span class="_ _13"> </span>occurs<span class="_ _3"></span>,<span class="_ _13"> </span>and<span class="_ _a"> </span>whether<span class="_ _6"> </span>a<span class="_ _13"> </span>cache</div><div class="t m5 x1d h26 y6fb6 ff7 fs19 fc1 sc0 ls0 ws0">miss<span class="_ _13"> </span>occurs<span class="_ _1"></span>.<span class="_ _13"> </span>If<span class="_ _13"> </span>there<span class="_"> </span>is<span class="_ _13"> </span>a<span class="_ _13"> </span>cache<span class="_ _13"> </span>miss<span class="_ _1"></span>,<span class="_ _13"> </span>enter<span class="_ _13"> </span>“—”<span class="_"> </span>for<span class="_ _13"> </span>“Cache<span class="_ _13"> </span>byte<span class="_ _13"> </span>returned.<span class="_ _3"></span>”<span class="_"> </span>If<span class="_ _13"> </span>there</div><div class="t m5 x1d h26 y6fb7 ff7 fs19 fc1 sc0 ls0 ws0">is<span class="_"> </span>a<span class="_"> </span>page<span class="_"> </span>fault,<span class="_"> </span>enter<span class="_"> </span>“—”<span class="_"> </span>for<span class="_"> </span>“PPN”<span class="_"> </span>and<span class="_"> </span>leave<span class="_"> </span>parts<span class="_"> </span>C<span class="_"> </span>and<span class="_"> </span>D<span class="_"> </span>blank.</div><div class="t m5 x1d h26 y6fb8 ff7 fs19 fc1 sc0 ls0 ws0">V<span class="_ _1"></span>irtual<span class="_"> </span>address:<span class="_"> </span><span class="ffd">0x03d7</span></div><div class="t m5 x124 h26 y6fb9 ff7 fs19 fc1 sc0 ls0 ws0">A.<span class="_ _1f"> </span>V<span class="_ _1"></span>irtual<span class="_"> </span>address<span class="_"> </span>format</div><div class="t m5 x1a8 h3f y6fba ffb4 fs27 fc1 sc0 ls0 ws0">12<span class="_ _13d"> </span><span class="ls56">11<span class="_ _176"></span><span class="ls0">13<span class="_ _87"> </span>10<span class="_ _d"> </span>9<span class="_ _b3"> </span>8<span class="_ _b2"> </span>7<span class="_ _b3"> </span>6<span class="_ _b2"> </span>5<span class="_ _b3"> </span>4<span class="_ _b2"> </span>3<span class="_ _b3"> </span>2<span class="_ _b2"> </span>1<span class="_ _b3"> </span>0</span></span></div><div class="t m5 x124 h26 y6fbb ff7 fs19 fc1 sc0 ls0 ws0">B<span class="_ _3"></span>.<span class="_ _1d"> </span>Address<span class="_"> </span>translation</div><div class="t m5 x4f h31 y6fbc ff7 fs21 fc2 sc0 ls0 ws0">Parameter<span class="_ _1d5"> </span>V<span class="_ _7"></span>alue</div><div class="t m5 x4f h31 y6fbd ff7 fs21 fc2 sc0 ls0 ws0">VPN</div><div class="t m5 x4f h31 y6fbe ff7 fs21 fc1 sc0 ls0 ws0">TLB<span class="_"> </span>index</div><div class="t m5 x4f h31 y6fbf ff7 fs21 fc1 sc0 ls0 ws0">TLB<span class="_"> </span>tag</div><div class="t m5 x4f h31 y6fc0 ff7 fs21 fc1 sc0 ls0 ws0">TLB<span class="_"> </span>hit?<span class="_"> </span>(Y/N)</div><div class="t m5 x4f h31 y6fc1 ff7 fs21 fc1 sc0 ls0 ws0">Page<span class="_"> </span>fault?<span class="_"> </span>(Y/N)</div><div class="t m5 x4f h31 y6fc2 ff7 fs21 fc1 sc0 ls0 ws0">PPN</div><div class="t m5 x124 h26 y6fc3 ff7 fs19 fc1 sc0 ls0 ws0">C.<span class="_ _25"> </span>Physical<span class="_"> </span>address<span class="_"> </span>format</div><div class="t m5 xc2 h3f y6fc4 ffb4 fs27 fc1 sc0 ls56 ws0">11<span class="_ _1a"> </span>1<span class="_ _2"></span>0<span class="_ _17"> </span><span class="ls0">9<span class="_ _b2"> </span>8<span class="_ _b3"> </span>7<span class="_ _b2"> </span>6<span class="_ _b3"> </span>5<span class="_ _b2"> </span>4<span class="_ _b3"> </span>3<span class="_ _b2"> </span>2<span class="_ _b3"> </span>1<span class="_ _b2"> </span>0</span></div></div><div class="pi" data-data='{"ctm":[2.000000,0.000000,0.000000,2.000000,0.000000,0.000000]}'></div></div>
