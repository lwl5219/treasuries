<div id="pf35e" class="pf w2 h11" data-page-no="35e"><div class="pc pc35e w2 h11"><img class="bi x0 y0 w1 h1" alt="" src="csapp/bg35e.png"/><div class="t m5 xed h28 y9b ff6 fs1f fc2 sc0 ls0 ws0">Section<span class="_ _10"> </span>9.7<span class="_ _60"> </span>Case<span class="_ _10"> </span>Study:<span class="_ _10"> </span>The<span class="_ _10"> </span>Intel<span class="_ _10"> </span>Core<span class="_ _10"> </span>i7/Linux<span class="_ _10"> </span>Memory<span class="_ _10"> </span>System<span class="_ _3e"> </span><span class="ffe fs1e">861</span></div><div class="t m5 x34 h26 ye7 ff7 fs19 fc2 sc0 ls0 ws0">D<span class="_ _3"></span>.<span class="_ _23"> </span>Physical<span class="_"> </span>memory<span class="_"> </span>reference</div><div class="t m5 x2d h31 y6fc5 ff7 fs21 fc2 sc0 ls0 ws0">Parameter<span class="_ _da"> </span>V<span class="_ _7"></span>alue</div><div class="t m5 x2d h31 y6fc6 ff7 fs21 fc2 sc0 ls0 ws0">Byte<span class="_"> </span>offset</div><div class="t m5 x2d h31 y6fc7 ff7 fs21 fc1 sc0 ls0 ws0">Cache<span class="_"> </span>index</div><div class="t m5 x2d h31 y6fc8 ff7 fs21 fc1 sc0 ls0 ws0">Cache<span class="_"> </span>tag</div><div class="t m5 x2d h31 y6fc9 ff7 fs21 fc1 sc0 ls0 ws0">Cache<span class="_"> </span>hit?<span class="_"> </span>(Y/N)</div><div class="t m5 x2d h31 y6fca ff7 fs21 fc1 sc0 ls0 ws0">Cache<span class="_"> </span>byte<span class="_"> </span>returned</div><div class="t m5 x17 h3b y6fcb fff fs24 fc6 sc0 ls0 ws0">9.7<span class="_ _17"> </span><span class="ffe fs18">Case<span class="_"> </span>Study:<span class="_"> </span>The<span class="_"> </span>Intel<span class="_"> </span>Core<span class="_"> </span>i7/Linux<span class="_"> </span>Memor<span class="_ _2"></span>y<span class="_"> </span>System</span></div><div class="t m5 x17 h26 y6fcc ff7 fs19 fc1 sc0 ls0 ws0">W<span class="_ _3"></span>e<span class="_ _16"> </span>conclude<span class="_ _11"> </span>our<span class="_ _16"> </span>discussion<span class="_ _11"> </span>of<span class="_ _16"> </span>virtual<span class="_ _11"> </span>memory<span class="_ _16"> </span>mechanisms<span class="_ _11"> </span>with<span class="_ _16"> </span>a<span class="_ _11"> </span>case<span class="_ _11"> </span>study<span class="_ _16"> </span>of</div><div class="t m5 x17 h26 y6fcd ff7 fs19 fc1 sc0 ls0 ws0">a<span class="_ _11"> </span>real<span class="_ _11"> </span>system:<span class="_ _16"> </span>an<span class="_ _11"> </span>Intel<span class="_ _11"> </span>Core<span class="_ _16"> </span>i7<span class="_ _11"> </span>running<span class="_ _11"> </span>Linux.<span class="_ _16"> </span>Although<span class="_ _11"> </span>the<span class="_ _11"> </span>underlying<span class="_ _11"> </span>Haswell</div><div class="t m5 x17 h26 y6fce ff7 fs19 fc1 sc0 ls0 ws0">microarchitecture<span class="_ _14"> </span>allows<span class="_ _14"> </span>for<span class="_ _14"> </span>full<span class="_ _15"> </span>64-bit<span class="_ _14"> </span>virtual<span class="_ _14"> </span>and<span class="_ _14"> </span>physical<span class="_ _15"> </span>address<span class="_ _14"> </span>spaces<span class="_ _1"></span>,<span class="_ _15"> </span>the</div><div class="t m5 x17 h26 y6fcf ff7 fs19 fc1 sc0 ls0 ws0">current<span class="_"> </span>Core<span class="_ _13"> </span>i7<span class="_"> </span>implementations<span class="_ _13"> </span>(and<span class="_"> </span>those<span class="_ _13"> </span>for<span class="_"> </span>the<span class="_"> </span>foreseeable<span class="_ _13"> </span>future)<span class="_"> </span>support<span class="_ _13"> </span>a</div><div class="t m5 x17 h26 y6fd0 ff7 fs19 fc1 sc0 ls0 ws0">48-bit<span class="_"> </span>(256<span class="_ _11"> </span>TB)<span class="_ _11"> </span>virtual<span class="_ _11"> </span>address<span class="_ _11"> </span>space<span class="_"> </span>and<span class="_ _11"> </span>a<span class="_ _11"> </span>52-bit<span class="_ _11"> </span>(4<span class="_ _11"> </span>PB)<span class="_"> </span>physical<span class="_ _11"> </span>address<span class="_ _11"> </span>space<span class="_ _0"></span>,</div><div class="t m5 x17 h26 y6fd1 ff7 fs19 fc1 sc0 ls0 ws0">along<span class="_"> </span>with<span class="_"> </span>a<span class="_ _11"> </span>compatibility<span class="_"> </span>mode<span class="_ _11"> </span>that<span class="_"> </span>supports<span class="_"> </span>32-bit<span class="_ _11"> </span>(4<span class="_"> </span>GB)<span class="_ _11"> </span>virtual<span class="_"> </span>and<span class="_ _11"> </span>physical</div><div class="t m5 x17 h26 y6fd2 ff7 fs19 fc1 sc0 ls0 ws0">address<span class="_"> </span>spaces<span class="_ _1"></span>.</div><div class="t m5 x26 h26 y6fd3 ff7 fs19 fc1 sc0 ls0 ws0">F<span class="_ _1"></span>igure<span class="_"> </span>9.21<span class="_"> </span>gives<span class="_"> </span>the<span class="_ _13"> </span>highlights<span class="_"> </span>of<span class="_"> </span>the<span class="_"> </span>Core<span class="_ _13"> </span>i7<span class="_"> </span>memory<span class="_"> </span>system.<span class="_"> </span>T<span class="_ _3"></span>he<span class="_"> </span><span class="ffa">processor</span></div><div class="t m5 x17 h26 y6fd4 ffa fs19 fc1 sc0 ls0 ws0">package<span class="_ _13"> </span><span class="ff7">(chip)<span class="_ _13"> </span>includes<span class="_"> </span>four<span class="_ _13"> </span>cores<span class="_ _3"></span>,<span class="_"> </span>a<span class="_ _13"> </span>large<span class="_ _13"> </span>L3<span class="_ _13"> </span>cache<span class="_"> </span>shared<span class="_ _13"> </span>by<span class="_ _13"> </span>all<span class="_ _13"> </span>of<span class="_"> </span>the<span class="_ _13"> </span>cores<span class="_ _3"></span>,<span class="_"> </span>and</span></div><div class="t m5 x176 h4c y6fd5 ffb4 fs2d fc1 sc0 ls0 ws0">DDR3 memory controller</div><div class="t m5 x87 h4c y6fd6 ffb4 fs2d fc1 sc0 ls0 ws0">(shared by all cores)</div><div class="t m5 x151 h4c y6fd7 ffb4 fs2d fc1 sc0 ls0 ws0">L2 unified TLB</div><div class="t m5 x16 h4c y6fd8 ffb4 fs2d fc1 sc0 ls0 ws0">512 entries, 4-way</div><div class="t m5 x121 h4c y6fd9 ffb4 fs2d fc1 sc0 ls0 ws0">Main memory</div><div class="t m5 x7f h4c y6fda ffb4 fs2d fc1 sc0 ls0 ws0">MMU</div><div class="t m5 x180 h4c y6fdb ffb4 fs2d fc1 sc0 ls0 ws0">(addr translation)</div><div class="t m5 x1fd h4c y6fdc ffb4 fs2d fc1 sc0 ls0 ws0">T<span class="_ _3"></span>o other</div><div class="t m5 x1fd h4c y6fdd ffb4 fs2d fc1 sc0 ls0 ws0">cores</div><div class="t m5 x1fd h4c y6fde ffb4 fs2d fc1 sc0 ls0 ws0">T<span class="_ _3"></span>o I/O</div><div class="t m5 x1fd h4c y6fdf ffb4 fs2d fc1 sc0 ls0 ws0">bridge</div><div class="t m5 x1e7 h4c y6fe0 ffb4 fs2d fc1 sc0 ls0 ws0">L1 i-TLB</div><div class="t m5 x1ae h4c y6fe1 ffb4 fs2d fc1 sc0 ls0 ws0">128 entries, 4-way</div><div class="t m5 x1ed h4c y6fe0 ffb4 fs2d fc1 sc0 ls0 ws0">L1 d-TLB</div><div class="t m5 x1eb h4c y6fe1 ffb4 fs2d fc1 sc0 ls0 ws0">64 entries, 4-way</div><div class="t m5 x5b h4c y6fd7 ffb4 fs2d fc1 sc0 ls0 ws0">L2 unified cache</div><div class="t m5 x1b9 h4c y6fd8 ffb4 fs2d fc1 sc0 ls0 ws0">256 KB, 8-way</div><div class="t m5 x5b h4c y6fe2 ffb4 fs2d fc1 sc0 ls0 ws0">L3 unified cache</div><div class="t m5 x156 h4c y6fe3 ffb4 fs2d fc1 sc0 ls0 ws0">8 MB, 16-way</div><div class="t m5 x142 h4c y6fe4 ffb4 fs2d fc1 sc0 ls0 ws0">(shared by all cores)</div><div class="t m5 x10d h4c y6fe0 ffb4 fs2d fc1 sc0 ls0 ws0">L1 i-cache</div><div class="t m5 x134 h4c y6fe1 ffb4 fs2d fc1 sc0 ls0 ws0">32 KB, 8-way</div><div class="t m5 x239 h4c y6fe0 ffb4 fs2d fc1 sc0 ls0 ws0">L1 d-cache</div><div class="t m5 x153 h4c y6fe1 ffb4 fs2d fc1 sc0 ls0 ws0">32 KB, 8-way</div><div class="t m5 x8c h4c y6fe5 ffb4 fs2d fc1 sc0 ls0 ws0">Instruction</div><div class="t m5 x66 h4c y6fe6 ffb4 fs2d fc1 sc0 ls0 ws0">fetch</div><div class="t m5 x77 h4c y6fe7 ffb4 fs2d fc1 sc0 ls0 ws0">Registers</div><div class="t m5 xd5 h4c y6fe8 ffb4 fs2d fc1 sc0 ls0 ws0">QuickPath interconnect</div><div class="t m5 x17 h4c y6fe9 ffb4 fs2d fc1 sc0 ls0 ws0">Processor package</div><div class="t m5 x1cd h4c y6fea ffb4 fs2d fc1 sc0 ls0 ws0">Core Ã—4</div><div class="t m5 x17 h2f y4b9 ffe fs16 fc6 sc0 ls0 ws0">Figure<span class="_"> </span>9.21<span class="_ _66"> </span><span class="fc1">The<span class="_"> </span>Core<span class="_"> </span>i7<span class="_"> </span>memor<span class="_ _2"></span>y<span class="_"> </span>system.</span></div></div><div class="pi" data-data='{"ctm":[2.000000,0.000000,0.000000,2.000000,0.000000,0.000000]}'></div></div>
