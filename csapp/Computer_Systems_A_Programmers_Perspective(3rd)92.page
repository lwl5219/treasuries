<div id="pf5c" class="pf w2 h11" data-page-no="5c"><div class="pc pc5c w2 h11"><img class="bi x0 y0 w1 h1" alt="" src="csapp/bg5c.png"/><div class="t m5 x2b h28 y9b ff6 fs1f fc2 sc0 ls0 ws0">Section<span class="_ _10"> </span>2.1<span class="_ _60"> </span>Information<span class="_ _10"> </span>Storage<span class="_ _3e"> </span><span class="ffe fs1e">91</span></div><div class="t m5 x17 h47 yb1f ffe fs2b fc1 sc0 ls0 ws0">Practice<span class="_"> </span>Problem<span class="_"> </span>2.11<span class="_ _1f"> </span><span class="fs16">(solution<span class="_"> </span>page<span class="_"> </span>182)</span></div><div class="t m5 x17 h26 yb20 ff7 fs19 fc1 sc0 ls0 ws0">Armed<span class="_ _11"> </span>with<span class="_ _11"> </span>the<span class="_ _11"> </span>function<span class="_ _11"> </span><span class="ffd">inplace_swap<span class="_ _16"> </span></span>from<span class="_"> </span>Problem<span class="_ _11"> </span>2.10,<span class="_ _16"> </span>you<span class="_ _11"> </span>decide<span class="_ _11"> </span>to<span class="_ _11"> </span>write</div><div class="t m5 x17 h26 yb21 ff7 fs19 fc1 sc0 ls0 ws0">code<span class="_ _6"> </span>that<span class="_ _6"> </span>will<span class="_ _6"> </span>reverse<span class="_ _6"> </span>the<span class="_ _6"> </span>elements<span class="_ _6"> </span>of<span class="_ _6"> </span>an<span class="_ _6"> </span>array<span class="_ _6"> </span>by<span class="_ _6"> </span>swapping<span class="_ _6"> </span>elements<span class="_ _6"> </span>from<span class="_ _6"> </span>opposite</div><div class="t m5 x17 h26 yb22 ff7 fs19 fc1 sc0 ls0 ws0">ends<span class="_"> </span>of<span class="_"> </span>the<span class="_"> </span>array<span class="_ _3"></span>,<span class="_"> </span>working<span class="_"> </span>toward<span class="_"> </span>the<span class="_"> </span>middle<span class="_ _1"></span>.</div><div class="t m5 x26 h26 yba3 ff7 fs19 fc1 sc0 ls0 ws0">Y<span class="_ _3"></span>ou<span class="_"> </span>arrive<span class="_"> </span>at<span class="_"> </span>the<span class="_"> </span>following<span class="_"> </span>function:</div><div class="t m5 x2c h2d ybe3 ff6 fs20 fc6 sc0 ls0 ws0">1<span class="_ _1c"> </span><span class="ffd fs1e fc2">void<span class="_ _1f"> </span>reverse_array(int<span class="_ _e"> </span>a[],<span class="_ _1f"> </span>int<span class="_ _1f"> </span>cnt)<span class="_ _e"> </span>{</span></div><div class="t m5 x2c h2d ybe4 ff6 fs20 fc6 sc0 ls0 ws0">2<span class="_ _20"> </span><span class="ffd fs1e fc2">int<span class="_ _e"> </span>first,<span class="_ _1f"> </span>last;</span></div><div class="t m5 x2c h2d ybe5 ff6 fs20 fc6 sc0 ls0 ws0">3<span class="_ _20"> </span><span class="ffd fs1e fc2">for<span class="_ _e"> </span>(first<span class="_ _1f"> </span>=<span class="_ _1f"> </span>0,<span class="_ _e"> </span>last<span class="_ _1f"> </span>=<span class="_ _e"> </span>cnt-1;</span></div><div class="t m5 x2c h2d ybe6 ff6 fs20 fc6 sc0 ls0 ws0">4<span class="_ _89"> </span><span class="ffd fs1e fc2">first<span class="_ _e"> </span>&lt;=<span class="_ _1f"> </span>last;</span></div><div class="t m5 x2c h2d ybe7 ff6 fs20 fc6 sc0 ls0 ws0">5<span class="_ _89"> </span><span class="ffd fs1e fc2">first++,last--)</span></div><div class="t m5 x2c h2d ybe8 ff6 fs20 fc6 sc0 ls0 ws0">6<span class="_ _89"> </span><span class="ffd fs1e fc2">inplace_swap(&amp;a[first],<span class="_ _e"> </span>&amp;a[last]);</span></div><div class="t m5 x2c h2d ybe9 ff6 fs20 fc6 sc0 ls0 ws0">7<span class="_ _1c"> </span><span class="ffd fs1e fc2">}</span></div><div class="t m5 x26 h26 ybea ff7 fs19 fc2 sc0 ls0 ws0">When<span class="_"> </span>you<span class="_"> </span>apply<span class="_"> </span>your<span class="_"> </span>function<span class="_"> </span>to<span class="_"> </span>an<span class="_"> </span>array<span class="_"> </span>containing<span class="_"> </span>elements<span class="_"> </span>1,<span class="_"> </span>2,<span class="_"> </span>3,<span class="_"> </span>and<span class="_"> </span>4,</div><div class="t m5 x17 h26 ybeb ff7 fs19 fc2 sc0 ls0 ws0">you<span class="_ _11"> </span>ﬁnd<span class="_ _11"> </span>the<span class="_ _11"> </span>array<span class="_ _11"> </span>now<span class="_ _11"> </span>has<span class="_ _0"></span>,<span class="_ _11"> </span>as<span class="_ _11"> </span>expected,<span class="_ _11"> </span>elements<span class="_ _16"> </span>4,<span class="_ _11"> </span>3,<span class="_ _11"> </span>2,<span class="_ _16"> </span>and<span class="_"> </span>1.<span class="_ _11"> </span>When<span class="_ _11"> </span>you<span class="_ _11"> </span>try<span class="_ _11"> </span>it</div><div class="t m5 x17 h26 ybec ff7 fs19 fc2 sc0 ls0 ws0">on<span class="_"> </span>an<span class="_"> </span>array<span class="_"> </span>with<span class="_"> </span>elements<span class="_"> </span>1,<span class="_"> </span>2,<span class="_"> </span>3,<span class="_"> </span>4,<span class="_"> </span>and<span class="_"> </span>5,<span class="_"> </span>however,<span class="_"> </span>you<span class="_"> </span>are<span class="_"> </span>surprised<span class="_"> </span>to<span class="_"> </span>see<span class="_"> </span>that</div><div class="t m5 x17 h26 ybed ff7 fs19 fc2 sc0 ls0 ws0">the<span class="_ _16"> </span>array<span class="_ _16"> </span>now<span class="_ _16"> </span>has<span class="_ _16"> </span>elements<span class="_ _16"> </span>5,<span class="_ _16"> </span>4,<span class="_ _16"> </span>0,<span class="_ _14"> </span>2,<span class="_ _16"> </span>and<span class="_ _16"> </span>1.<span class="_ _16"> </span>In<span class="_ _16"> </span>fact,<span class="_ _16"> </span>you<span class="_ _16"> </span>discover<span class="_ _16"> </span>that<span class="_ _16"> </span>the<span class="_ _16"> </span>code</div><div class="t m5 x17 h26 ybee ff7 fs19 fc2 sc0 ls0 ws0">always<span class="_"> </span>works<span class="_ _13"> </span>correctly<span class="_"> </span>on<span class="_"> </span>arrays<span class="_"> </span>of<span class="_ _13"> </span>even<span class="_"> </span>length,<span class="_"> </span>but<span class="_"> </span>it<span class="_ _13"> </span>sets<span class="_"> </span>the<span class="_"> </span>middle<span class="_"> </span>element<span class="_ _13"> </span>to</div><div class="t m5 x17 h26 ybef ff7 fs19 fc2 sc0 ls0 ws0">0<span class="_"> </span>whenever<span class="_"> </span>the<span class="_"> </span>array<span class="_"> </span>has<span class="_"> </span>odd<span class="_"> </span>length.</div><div class="t m5 x34 h46 ybf0 ff7 fs19 fc2 sc0 ls0 ws0">A.<span class="_ _1f"> </span>F<span class="_ _1"></span>or<span class="_ _14"> </span>an<span class="_ _14"> </span>array<span class="_ _14"> </span>of<span class="_ _14"> </span>odd<span class="_ _14"> </span>length<span class="_ _14"> </span><span class="ffd">cnt<span class="_ _13"> </span><span class="ff12">=<span class="_ _13"> </span></span></span>2<span class="_ _2"></span><span class="ff11">k<span class="_ _10"> </span><span class="ff12">+<span class="_ _10"> </span></span></span>1<span class="_ _1"></span>,<span class="_ _15"> </span>what<span class="_ _14"> </span>are<span class="_ _14"> </span>the<span class="_ _14"> </span>values<span class="_ _14"> </span>of<span class="_ _14"> </span>variables</div><div class="t m5 x2d h26 ybf1 ffd fs19 fc2 sc0 ls0 ws0">first<span class="_ _10"> </span><span class="ff7">and<span class="_"> </span></span>last<span class="_ _10"> </span><span class="ff7">in<span class="_"> </span>the<span class="_"> </span>ﬁnal<span class="_"> </span>iteration<span class="_"> </span>of<span class="_"> </span>function<span class="_"> </span></span>reverse_array<span class="ff7">?</span></div><div class="t m5 x34 h26 ybf2 ff7 fs19 fc2 sc0 ls0 ws0">B<span class="_ _3"></span>.<span class="_ _1d"> </span>Why<span class="_"> </span>does<span class="_"> </span>this<span class="_"> </span>call<span class="_"> </span>to<span class="_"> </span>function<span class="_"> </span><span class="ffd">inplace_swap<span class="_ _10"> </span></span>set<span class="_"> </span>the<span class="_"> </span>array<span class="_"> </span>element<span class="_"> </span>to<span class="_"> </span>0?</div><div class="t m5 x34 h26 ybf3 ff7 fs19 fc2 sc0 ls0 ws0">C.<span class="_ _25"> </span>What<span class="_"> </span>simple<span class="_ _16"> </span>modiﬁcation<span class="_ _11"> </span>to<span class="_ _11"> </span>the<span class="_ _11"> </span>code<span class="_ _16"> </span>for<span class="_ _11"> </span><span class="ffd">reverse_array<span class="_ _11"> </span></span>would<span class="_ _16"> </span>eliminate</div><div class="t m5 x2d h26 ybf4 ff7 fs19 fc2 sc0 ls0 ws0">this<span class="_"> </span>problem?</div><div class="t m5 x26 h26 ybf5 ff7 fs19 fc1 sc0 ls0 ws0">One<span class="_ _13"> </span>common<span class="_"> </span>use<span class="_ _13"> </span>of<span class="_ _13"> </span>bit-level<span class="_"> </span>operations<span class="_ _13"> </span>is<span class="_ _13"> </span>to<span class="_ _13"> </span>implement<span class="_"> </span><span class="ffa">masking<span class="_"> </span></span>operations<span class="_ _3"></span>,</div><div class="t m5 x17 h26 ybf6 ff7 fs19 fc1 sc0 ls0 ws0">where<span class="_ _13"> </span>a<span class="_"> </span>mask<span class="_ _13"> </span>is<span class="_ _13"> </span>a<span class="_"> </span>bit<span class="_ _13"> </span>pattern<span class="_"> </span>that<span class="_ _13"> </span>indicates<span class="_ _13"> </span>a<span class="_"> </span>selected<span class="_ _13"> </span>set<span class="_ _13"> </span>of<span class="_"> </span>bits<span class="_ _13"> </span>within<span class="_ _13"> </span>a<span class="_"> </span>word.<span class="_ _13"> </span>As</div><div class="t m5 x17 h26 ybf7 ff7 fs19 fc1 sc0 ls0 ws0">an<span class="_"> </span>example,<span class="_"> </span>the<span class="_"> </span>mask<span class="_ _11"> </span><span class="ffd">0xFF<span class="_ _11"> </span></span>(having<span class="_"> </span>ones<span class="_ _11"> </span>for<span class="_ _11"> </span>the<span class="_"> </span>least<span class="_ _11"> </span>signiﬁcant<span class="_ _11"> </span>8<span class="_"> </span>bits)<span class="_ _11"> </span>indicates</div><div class="t m5 x17 h26 ybf8 ff7 fs19 fc1 sc0 ls0 ws0">the<span class="_ _21"> </span>low-order<span class="_ _21"> </span>byte<span class="_ _21"> </span>of<span class="_ _21"> </span>a<span class="_ _21"> </span>word.<span class="_ _21"> </span>The<span class="_ _15"> </span>bit-level<span class="_ _21"> </span>operation<span class="_ _21"> </span><span class="ffd">x<span class="_ _16"> </span>&amp;<span class="_ _11"> </span>0xFF<span class="_ _21"> </span></span>yields<span class="_ _f"> </span>a<span class="_ _21"> </span>value</div><div class="t m5 x17 h26 ybf9 ff7 fs19 fc1 sc0 ls0 ws0">consisting<span class="_ _16"> </span>of<span class="_ _11"> </span>the<span class="_ _16"> </span>least<span class="_ _16"> </span>signiﬁcant<span class="_ _16"> </span>byte<span class="_ _16"> </span>of<span class="_ _16"> </span><span class="ffd">x</span>,<span class="_ _16"> </span>but<span class="_ _16"> </span>with<span class="_ _11"> </span>all<span class="_ _16"> </span>other<span class="_ _16"> </span>bytes<span class="_ _16"> </span>set<span class="_ _16"> </span>to<span class="_ _11"> </span>0.<span class="_ _16"> </span>F<span class="_ _1"></span>or</div><div class="t m5 x17 h46 ybfa ff7 fs19 fc1 sc0 ls0 ws0">example<span class="_ _1"></span>,<span class="_ _e"> </span>with<span class="_ _21"> </span><span class="ffd">x<span class="_ _f"> </span><span class="ff12">=<span class="_ _f"> </span></span>0x89ABCDEF</span>,<span class="_ _e"> </span>the<span class="_ _21"> </span>expression<span class="_ _f"> </span>would<span class="_ _21"> </span>yield<span class="_ _f"> </span><span class="ffd">0x000000EF</span><span class="ls4a">.T<span class="_ _8a"></span>h<span class="_ _8a"></span>e</span></div><div class="t m5 x17 h26 ybfb ff7 fs19 fc1 sc0 ls0 ws0">expression<span class="_ _21"> </span><span class="ffd">~0<span class="_ _21"> </span></span>will<span class="_ _21"> </span>yield<span class="_ _21"> </span>a<span class="_ _21"> </span>mask<span class="_ _21"> </span>of<span class="_ _f"> </span>all<span class="_ _21"> </span>ones<span class="_ _1"></span>,<span class="_ _e"> </span>regardless<span class="_ _15"> </span>of<span class="_ _21"> </span>the<span class="_ _21"> </span>size<span class="_ _21"> </span>of<span class="_ _f"> </span>the<span class="_ _21"> </span>data</div><div class="t m5 x17 h26 ybfc ff7 fs19 fc1 sc0 ls0 ws0">representation.<span class="_"> </span>T<span class="_ _1"></span>he<span class="_"> </span>same<span class="_ _13"> </span>mask<span class="_"> </span>can<span class="_ _13"> </span>be<span class="_"> </span>written<span class="_"> </span><span class="ffd">0xFFFFFFFF<span class="_ _13"> </span></span>when<span class="_"> </span>data<span class="_ _13"> </span>type<span class="_"> </span><span class="ffd">int<span class="_ _10"> </span></span>is</div><div class="t m5 x17 h26 ybfd ff7 fs19 fc1 sc0 ls0 ws0">32<span class="_"> </span>bits<span class="_ _1"></span>,<span class="_"> </span>but<span class="_"> </span>it<span class="_"> </span>would<span class="_"> </span>not<span class="_"> </span>be<span class="_"> </span>as<span class="_"> </span>portable<span class="_ _1"></span>.</div><div class="t m5 x17 h47 ybfe ffe fs2b fc1 sc0 ls0 ws0">Practice<span class="_"> </span>Problem<span class="_"> </span>2.12<span class="_ _1f"> </span><span class="fs16">(solution<span class="_"> </span>page<span class="_"> </span>182)</span></div><div class="t m5 x17 h26 ybff ff7 fs19 fc1 sc0 ls0 ws0">Write<span class="_ _16"> </span>C<span class="_ _16"> </span>expressions<span class="_ _3"></span>,<span class="_ _14"> </span>in<span class="_ _16"> </span>terms<span class="_ _16"> </span>of<span class="_ _11"> </span>variable<span class="_ _16"> </span><span class="ffd">x</span>,<span class="_ _14"> </span>for<span class="_ _16"> </span>the<span class="_ _11"> </span>following<span class="_ _16"> </span>values<span class="_ _1"></span>.<span class="_ _16"> </span>Y<span class="_ _3"></span>our<span class="_ _16"> </span>code</div><div class="t m5 x17 h46 yc00 ff7 fs19 fc1 sc0 ls0 ws0">should<span class="_"> </span>work<span class="_"> </span>for<span class="_ _11"> </span>any<span class="_"> </span>word<span class="_"> </span>size<span class="_ _11"> </span><span class="ff11">w<span class="_ _10"> </span><span class="ff12">≥<span class="_ _10"> </span></span></span><span class="ls13">8.<span class="_"> </span>F<span class="_ _1"></span>or<span class="_"> </span>reference,<span class="_"> </span>we<span class="_"> </span>show<span class="_"> </span>the<span class="_ _11"> </span>result<span class="_"> </span>of<span class="_"> </span>evalu-</span></div><div class="t m5 x17 h46 yc01 ff7 fs19 fc1 sc0 ls0 ws0">ating<span class="_"> </span>the<span class="_"> </span>expressions<span class="_"> </span>for<span class="_"> </span><span class="ffd">x<span class="_ _10"> </span><span class="ff12">=<span class="_ _10"> </span></span>0x87654321</span>,<span class="_"> </span>with<span class="_"> </span><span class="ff11">w<span class="_ _10"> </span><span class="ff12">=<span class="_ _10"> </span></span></span>32.</div><div class="t m5 x34 h26 yc02 ff7 fs19 fc1 sc0 ls0 ws0">A.<span class="_ _1f"> </span>T<span class="_ _1"></span>he<span class="_"> </span>least<span class="_"> </span>signiﬁcant<span class="_"> </span>byte<span class="_"> </span>of<span class="_"> </span><span class="ffd">x</span>,<span class="_"> </span>with<span class="_"> </span>all<span class="_"> </span>other<span class="_"> </span>bits<span class="_"> </span>set<span class="_"> </span>to<span class="_"> </span>0.<span class="_"> </span>[<span class="ffd">0x00000021</span>]</div><div class="t m5 x34 h26 yc03 ff7 fs19 fc1 sc0 ls0 ws0">B<span class="_ _3"></span>.<span class="_ _1d"> </span>All<span class="_ _13"> </span>but<span class="_ _6"> </span>the<span class="_ _13"> </span>least<span class="_ _6"> </span>signiﬁcant<span class="_ _13"> </span>byte<span class="_ _6"> </span>of<span class="_ _13"> </span><span class="ffd">x<span class="_ _6"> </span></span>complemented,<span class="_ _13"> </span>with<span class="_ _13"> </span>the<span class="_ _6"> </span>least<span class="_ _13"> </span>signiﬁcant</div><div class="t m5 x2d h26 yc04 ff7 fs19 fc1 sc0 ls0 ws0">byte<span class="_"> </span>left<span class="_"> </span>unchanged.<span class="_"> </span>[<span class="ffd">0x789ABC21</span>]</div></div><div class="pi" data-data='{"ctm":[2.000000,0.000000,0.000000,2.000000,0.000000,0.000000]}'></div></div>
