<div id="pf37" class="pf w2 h11" data-page-no="37"><div class="pc pc37 w2 h11"><img class="bi x0 y0 w1 h1" alt="" src="csapp/bg37.png"/><div class="t m5 x14 h28 y9b ffe fs1e fc2 sc0 ls0 ws0">54<span class="_ _1b"> </span><span class="ff6 fs1f">Chapter<span class="_ _10"> </span>1<span class="_ _3d"> </span>A<span class="_ _10"> </span>T<span class="_ _3"></span>our<span class="_ _10"> </span>of<span class="_ _10"> </span>Computer<span class="_ _10"> </span>Systems</span></div><div class="t m5 x14 h2f ye7 ffe fs16 fc6 sc0 ls0 ws0">Figure<span class="_"> </span>1.13</div><div class="t m5 x14 h2f y58a ffe fs16 fc1 sc0 ls0 ws0">Process<span class="_ _16"> </span>virtual<span class="_ _16"> </span>address</div><div class="t m5 x14 h34 y58b ffe fs16 fc1 sc0 ls0 ws0">space.<span class="_ _10"> </span><span class="ff6">(The<span class="_ _13"> </span>regions<span class="_ _10"> </span>are<span class="_ _13"> </span>not</span></div><div class="t m5 x14 h34 y58c ff6 fs16 fc1 sc0 ls0 ws0">drawn<span class="_ _10"> </span>to<span class="_ _11"> </span>scale.)</div><div class="t m5 x5d h40 y756 ff18 fs28 fc1 sc0 ls0 ws0">0</div><div class="t m5 xde h3f y757 ff15 fs27 fc1 sc0 ls0 ws0">Memory</div><div class="t m5 xde h3f y758 ff15 fs27 fc1 sc0 ls0 ws0">invi<span class="ff19">s</span>i<span class="ff19">b</span>le to</div><div class="t m5 xde h3f y759 ff19 fs27 fc1 sc0 ls0 ws0">us<span class="ff15">er code</span></div><div class="t m5 xdf h40 y75a ff18 fs28 fc1 sc0 ls0 ws0">printf<span class="ff15 fs27"> f<span class="ff19">u</span>nction</span></div><div class="t m5 xde h3f y75b ff15 fs27 fc1 sc0 ls0 ws0">Lo<span class="ff19">a</span>ded from the</div><div class="t m5 xde h40 y75c ff18 fs28 fc1 sc0 ls0 ws0">hello<span class="ff15 fs27"> exec<span class="ff19">u</span>t<span class="ff19">ab</span>le file</span></div><div class="t m5 xe0 h3f y75d ff15 fs27 fc1 sc0 ls0 ws0">Progr<span class="ff19">a</span>m</div><div class="t m5 x7a h3f y75e ff19 fs27 fc1 sc0 ls0 ws0">s<span class="ff15">t</span>a<span class="ff15">rt</span></div><div class="t m5 x86 h3f y75f ff15 fs27 fc1 sc0 ls0 ws0">U<span class="ff19">s</span>er <span class="ff19">s</span>t<span class="ff19">a</span>ck</div><div class="t m5 xe1 h3f y760 ff15 fs27 fc1 sc0 ls0 ws0">(cre<span class="ff19">a</span>ted <span class="ff19">a</span>t r<span class="ff19">u</span>n time)</div><div class="t m5 xe2 h3f y761 ff15 fs27 fc1 sc0 ls0 ws0">Memory-m<span class="ff19">a</span>pped region for</div><div class="t m5 x68 h3f y762 ff19 fs27 fc1 sc0 ls0 ws0">s<span class="ff15">h</span>a<span class="ff15">red li</span>b<span class="ff15">r</span>a<span class="ff15">rie</span>s</div><div class="t m5 xe3 h3f y763 ff15 fs27 fc1 sc0 ls0 ws0">R<span class="ff19">u</span>n-time he<span class="ff19">a</span>p</div><div class="t m5 xdd h3f y764 ff15 fs27 fc1 sc0 ls0 ws0">(cre<span class="ff19">a</span>ted <span class="ff19">b</span>y <span class="ff18">malloc</span>)</div><div class="t m5 xe4 h3f y765 ff15 fs27 fc1 sc0 ls0 ws0">Re<span class="ff19">a</span>d/write d<span class="ff19">a</span>t<span class="ff19">a</span></div><div class="t m5 xe5 h3f y766 ff15 fs27 fc1 sc0 ls0 ws0">Re<span class="ff19">a</span>d-only code <span class="ff19">a</span>nd d<span class="ff19">a</span>t<span class="ff19">a</span></div><div class="t m5 xa8 h3f y767 ff15 fs27 fc1 sc0 ls0 ws0">Kernel virt<span class="ff19">ua</span>l memory</div><div class="t m5 x1d h26 y768 ff7 fs19 fc1 sc0 ls0 ws0">Section<span class="_ _11"> </span>1.9.2.<span class="_ _11"> </span>Y<span class="_ _3"></span>ou<span class="_"> </span>will<span class="_ _11"> </span>learn<span class="_ _11"> </span>the<span class="_ _11"> </span>basic<span class="_ _16"> </span>concepts<span class="_"> </span>of<span class="_ _11"> </span>concurrency<span class="_ _3"></span>,<span class="_"> </span>including<span class="_ _16"> </span>how<span class="_"> </span>to</div><div class="t m5 x1d h26 y769 ff7 fs19 fc1 sc0 ls0 ws0">write<span class="_"> </span>threaded<span class="_"> </span>programs<span class="_ _1"></span>,<span class="_"> </span>in<span class="_"> </span>Chapter<span class="_"> </span>12.</div><div class="t m5 x1d h41 y76a ffe fs29 fc1 sc0 ls0 ws0">1.7.3<span class="_ _48"> </span><span class="fs19">Virtual<span class="_"> </span>Memory</span></div><div class="t m5 x1d h26 y76b ffa fs19 fc1 sc0 ls0 ws0">V<span class="_ _1"></span>irtual<span class="_ _13"> </span>memory<span class="_ _a"> </span><span class="ff7">is<span class="_ _13"> </span>an<span class="_ _13"> </span>abstraction<span class="_ _6"> </span>that<span class="_ _13"> </span>provides<span class="_ _6"> </span>each<span class="_ _13"> </span>process<span class="_ _6"> </span>with<span class="_ _13"> </span>the<span class="_ _6"> </span>illusion<span class="_ _13"> </span>that<span class="_ _6"> </span>it</span></div><div class="t m5 x1d h26 y76c ff7 fs19 fc1 sc0 ls0 ws0">has<span class="_ _13"> </span>exclusive<span class="_ _13"> </span>use<span class="_ _13"> </span>of<span class="_ _13"> </span>the<span class="_ _13"> </span>main<span class="_ _13"> </span>memory<span class="_ _3"></span>.<span class="_ _13"> </span>Each<span class="_"> </span>process<span class="_ _13"> </span>has<span class="_ _13"> </span>the<span class="_ _13"> </span>same<span class="_ _13"> </span>uniform<span class="_ _13"> </span>view<span class="_ _13"> </span>of</div><div class="t m5 x1d h26 y76d ff7 fs19 fc1 sc0 ls0 ws0">memory<span class="_ _3"></span>,<span class="_ _13"> </span>which<span class="_"> </span>is<span class="_ _13"> </span>known<span class="_"> </span>as<span class="_ _13"> </span>its<span class="_"> </span><span class="ffa">virtual<span class="_ _13"> </span>address<span class="_"> </span>space</span>.<span class="_ _13"> </span>The<span class="_ _13"> </span>virtual<span class="_"> </span>address<span class="_ _13"> </span>space<span class="_"> </span>for</div><div class="t m5 x1d h26 y76e ff7 fs19 fc1 sc0 ls0 ws0">Linux<span class="_ _13"> </span>processes<span class="_ _6"> </span>is<span class="_ _13"> </span>shown<span class="_ _6"> </span>in<span class="_ _13"> </span>F<span class="_ _1"></span>igure<span class="_ _13"> </span>1.13.<span class="_ _6"> </span>(Other<span class="_ _13"> </span>Unix<span class="_ _6"> </span>systems<span class="_ _13"> </span>use<span class="_ _6"> </span>a<span class="_ _13"> </span>similar<span class="_ _6"> </span>layout.)</div><div class="t m5 x1d h26 y76f ff7 fs19 fc1 sc0 ls0 ws0">In<span class="_ _11"> </span>Linux,<span class="_ _16"> </span>the<span class="_ _16"> </span>topmost<span class="_ _11"> </span>region<span class="_ _16"> </span>of<span class="_ _11"> </span>the<span class="_ _16"> </span>address<span class="_ _11"> </span>space<span class="_ _16"> </span>is<span class="_ _11"> </span>reserved<span class="_ _16"> </span>for<span class="_ _11"> </span>code<span class="_ _16"> </span>and<span class="_ _11"> </span>data</div><div class="t m5 x1d h26 y770 ff7 fs19 fc1 sc0 ls0 ws0">in<span class="_ _11"> </span>the<span class="_ _11"> </span>operating<span class="_ _11"> </span>system<span class="_"> </span>that<span class="_ _11"> </span>is<span class="_ _11"> </span>common<span class="_ _11"> </span>to<span class="_ _11"> </span>all<span class="_ _11"> </span>processes<span class="_ _0"></span>.<span class="_"> </span>The<span class="_"> </span>lower<span class="_ _11"> </span>region<span class="_ _11"> </span>of<span class="_ _11"> </span>the</div><div class="t m5 x1d h26 y771 ff7 fs19 fc1 sc0 ls0 ws0">address<span class="_ _16"> </span>space<span class="_ _14"> </span>holds<span class="_ _14"> </span>the<span class="_ _14"> </span>code<span class="_ _16"> </span>and<span class="_ _14"> </span>data<span class="_ _14"> </span>deﬁned<span class="_ _14"> </span>by<span class="_ _14"> </span>the<span class="_ _16"> </span>user’s<span class="_ _14"> </span>process<span class="_ _1"></span>.<span class="_ _16"> </span>Note<span class="_ _14"> </span>that</div><div class="t m5 x1d h26 y772 ff7 fs19 fc1 sc0 ls0 ws0">addresses<span class="_"> </span>in<span class="_"> </span>the<span class="_"> </span>ﬁgure<span class="_"> </span>increase<span class="_"> </span>from<span class="_"> </span>the<span class="_"> </span>bottom<span class="_"> </span>to<span class="_"> </span>the<span class="_"> </span>top<span class="_ _1"></span>.</div><div class="t m5 x29 h26 y773 ff7 fs19 fc1 sc0 ls0 ws0">T<span class="_ _1"></span>he<span class="_ _11"> </span>virtual<span class="_ _11"> </span>address<span class="_"> </span>space<span class="_ _11"> </span>seen<span class="_"> </span>by<span class="_ _11"> </span>each<span class="_ _11"> </span>process<span class="_"> </span>consists<span class="_ _11"> </span>of<span class="_ _11"> </span>a<span class="_"> </span>number<span class="_ _11"> </span>of<span class="_ _11"> </span>well-</div><div class="t m5 x1d h26 y774 ff7 fs19 fc1 sc0 ls0 ws0">deﬁned<span class="_ _13"> </span>areas<span class="_ _0"></span>,<span class="_"> </span>each<span class="_ _13"> </span>with<span class="_"> </span>a<span class="_ _13"> </span>speciﬁc<span class="_ _13"> </span>purpose.<span class="_ _13"> </span>Y<span class="_ _3"></span>ou<span class="_"> </span>will<span class="_ _13"> </span>learn<span class="_"> </span>more<span class="_ _13"> </span>about<span class="_"> </span>these<span class="_ _13"> </span>areas</div><div class="t m5 x1d h26 y775 ff7 fs19 fc1 sc0 ls0 ws0">later<span class="_ _16"> </span>in<span class="_ _16"> </span>the<span class="_ _16"> </span>book,<span class="_ _14"> </span>but<span class="_ _16"> </span>it<span class="_ _16"> </span>will<span class="_ _16"> </span>be<span class="_ _16"> </span>helpful<span class="_ _16"> </span>to<span class="_ _16"> </span>look<span class="_ _16"> </span>brieﬂy<span class="_ _16"> </span>at<span class="_ _14"> </span>each,<span class="_ _16"> </span>starting<span class="_ _16"> </span>with<span class="_ _16"> </span>the</div><div class="t m5 x1d h26 y776 ff7 fs19 fc1 sc0 ls0 ws0">lowest<span class="_"> </span>addresses<span class="_"> </span>and<span class="_"> </span>working<span class="_"> </span>our<span class="_"> </span>way<span class="_"> </span>up:</div><div class="t m5 x75 h3d y777 ff14 fs26 fc6 sc0 ls0 ws0">.</div><div class="t m5 x29 h26 y778 ffa fs19 fc1 sc0 ls0 ws0">Program<span class="_ _6"> </span>code<span class="_ _6"> </span>and<span class="_ _6"> </span>data.<span class="_ _2"></span><span class="ff7">Code<span class="_ _13"> </span>begins<span class="_ _a"> </span>at<span class="_ _6"> </span>the<span class="_ _6"> </span>same<span class="_ _6"> </span>ﬁxed<span class="_ _6"> </span>address<span class="_ _6"> </span>for<span class="_ _6"> </span>all<span class="_ _6"> </span>processes<span class="_ _1"></span>,</span></div><div class="t m5 x29 h26 y779 ff7 fs19 fc1 sc0 ls0 ws0">followed<span class="_ _6"> </span>by<span class="_ _13"> </span>data<span class="_ _6"> </span>locations<span class="_ _13"> </span>that<span class="_ _6"> </span>correspond<span class="_ _6"> </span>to<span class="_ _13"> </span>global<span class="_ _6"> </span>C<span class="_ _13"> </span>variables<span class="_ _3"></span>.<span class="_ _13"> </span>T<span class="_ _1"></span>he<span class="_ _13"> </span>code<span class="_ _a"> </span>and</div><div class="t m5 x29 h26 y77a ff7 fs19 fc1 sc0 ls0 ws0">data<span class="_ _16"> </span>areas<span class="_ _16"> </span>are<span class="_ _16"> </span>initialized<span class="_ _16"> </span>directly<span class="_ _16"> </span>from<span class="_ _16"> </span>the<span class="_ _11"> </span>contents<span class="_ _16"> </span>of<span class="_ _16"> </span>an<span class="_ _16"> </span>executable<span class="_ _16"> </span>object</div><div class="t m5 x29 h26 y77b ff7 fs19 fc1 sc0 ls0 ws0">ﬁle—in<span class="_ _13"> </span>our<span class="_"> </span>case<span class="_ _1"></span>,<span class="_"> </span>the<span class="_ _13"> </span><span class="ffd">hello<span class="_ _13"> </span></span>executable<span class="_ _0"></span>.<span class="_ _13"> </span>Y<span class="_ _3"></span>ou<span class="_"> </span>will<span class="_ _13"> </span>learn<span class="_ _13"> </span>more<span class="_ _13"> </span>about<span class="_"> </span>this<span class="_ _13"> </span>part<span class="_ _13"> </span>of</div><div class="t m5 x29 h26 y77c ff7 fs19 fc1 sc0 ls0 ws0">the<span class="_"> </span>address<span class="_"> </span>space<span class="_"> </span>when<span class="_"> </span>we<span class="_"> </span>study<span class="_"> </span>linking<span class="_"> </span>and<span class="_"> </span>loading<span class="_"> </span>in<span class="_"> </span>Chapter<span class="_"> </span>7.</div><div class="t m5 x75 h3d y77d ff14 fs26 fc6 sc0 ls0 ws0">.</div><div class="t m5 x29 h26 y77e ffa fs19 fc1 sc0 ls0 ws0">Heap<span class="_ _1"></span>.<span class="_ _5"></span><span class="ff7">T<span class="_ _0"></span>he<span class="_ _6"> </span>code<span class="_ _13"> </span>and<span class="_ _a"> </span>data<span class="_ _13"> </span>areas<span class="_ _6"> </span>are<span class="_ _6"> </span>followed<span class="_ _13"> </span>immediately<span class="_ _6"> </span>by<span class="_ _6"> </span>the<span class="_ _13"> </span>run-time<span class="_ _a"> </span><span class="ffa">heap</span>.</span></div><div class="t m5 x29 h26 y77f ff7 fs19 fc1 sc0 ls0 ws0">Unlike<span class="_ _13"> </span>the<span class="_ _6"> </span>code<span class="_ _13"> </span>and<span class="_ _13"> </span>data<span class="_ _13"> </span>areas<span class="_ _3"></span>,<span class="_ _13"> </span>which<span class="_ _13"> </span>are<span class="_ _13"> </span>ﬁxed<span class="_ _13"> </span>in<span class="_ _6"> </span>size<span class="_ _13"> </span>once<span class="_ _13"> </span>the<span class="_ _6"> </span>process<span class="_ _13"> </span>begins</div></div><div class="pi" data-data='{"ctm":[2.000000,0.000000,0.000000,2.000000,0.000000,0.000000]}'></div></div>
