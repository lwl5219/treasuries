<div id="pf187" class="pf w2 h11" data-page-no="187"><div class="pc pc187 w2 h11"><img class="bi x0 y0 w1 h1" alt="" src="csapp/bg187.png"/><div class="t m5 x14 h28 y9b ffe fs1e fc2 sc0 ls0 ws0">390<span class="_ _1b"> </span><span class="ff6 fs1f">Chapter<span class="_ _10"> </span>4<span class="_ _3d"> </span>Processor<span class="_ _10"> </span>Architecture</span></div><div class="t m5 x1d h26 ye7 ff7 fs19 fc2 sc0 ls0 ws0">instruction<span class="_ _16"> </span>set,<span class="_ _16"> </span>because<span class="_ _16"> </span>it<span class="_ _16"> </span>was<span class="_ _16"> </span>inspired<span class="_ _16"> </span>by<span class="_ _16"> </span>the<span class="_ _16"> </span>x86-64<span class="_ _16"> </span>instruction<span class="_ _16"> </span>set.<span class="_ _16"> </span>Compared</div><div class="t m5 x1d h26 y2a7 ff7 fs19 fc2 sc0 ls0 ws0">with<span class="_ _15"> </span>x86-64,<span class="_ _f"> </span>the<span class="_ _15"> </span>Y86-64<span class="_ _15"> </span>instruction<span class="_ _21"> </span>set<span class="_ _15"> </span>has<span class="_ _15"> </span>fewer<span class="_ _21"> </span>data<span class="_ _15"> </span>types<span class="_ _1"></span>,<span class="_ _f"> </span>instructions<span class="_ _1"></span>,<span class="_ _f"> </span>and</div><div class="t m5 x1d h26 y2a8 ff7 fs19 fc2 sc0 ls0 ws0">addressing<span class="_ _11"> </span>modes<span class="_ _1"></span>.<span class="_ _16"> </span>It<span class="_ _11"> </span>also<span class="_ _11"> </span>has<span class="_ _16"> </span>a<span class="_ _11"> </span>simple<span class="_ _11"> </span>byte-level<span class="_ _16"> </span>encoding,<span class="_ _11"> </span>making<span class="_ _11"> </span>the<span class="_ _16"> </span>machine</div><div class="t m5 x1d h26 y2f7 ff7 fs19 fc2 sc0 ls0 ws0">code<span class="_ _6"> </span>less<span class="_ _13"> </span>compact<span class="_ _6"> </span>than<span class="_ _6"> </span>the<span class="_ _13"> </span>comparable<span class="_ _6"> </span>x86-64<span class="_ _6"> </span>code,<span class="_ _6"> </span>but<span class="_ _13"> </span>also<span class="_ _a"> </span>much<span class="_ _13"> </span>easier<span class="_ _6"> </span>to<span class="_ _6"> </span>design</div><div class="t m5 x1d h26 y2f8 ff7 fs19 fc2 sc0 ls0 ws0">the<span class="_"> </span>CPU’s<span class="_"> </span>decoding<span class="_"> </span>logic<span class="_ _0"></span>.<span class="_"> </span>Even<span class="_"> </span>though<span class="_"> </span>the<span class="_"> </span>Y86-64<span class="_"> </span>instruction<span class="_"> </span>set<span class="_"> </span>is<span class="_ _11"> </span>very<span class="_"> </span>simple<span class="_ _1"></span>,</div><div class="t m5 x1d h26 y2f9 ff7 fs19 fc2 sc0 ls0 ws0">it<span class="_ _13"> </span>is<span class="_ _13"> </span>sufﬁciently<span class="_ _13"> </span>complete<span class="_"> </span>to<span class="_ _13"> </span>allow<span class="_ _13"> </span>us<span class="_ _13"> </span>to<span class="_ _13"> </span>write<span class="_ _13"> </span>programs<span class="_ _13"> </span>manipulating<span class="_"> </span>integer<span class="_ _13"> </span>data.</div><div class="t m5 x1d h26 y2fa ff7 fs19 fc2 sc0 ls0 ws0">Designing<span class="_"> </span>a<span class="_"> </span>processor<span class="_"> </span>to<span class="_"> </span>implement<span class="_"> </span>Y86-64<span class="_"> </span>requires<span class="_"> </span>us<span class="_"> </span>to<span class="_ _11"> </span>deal<span class="_"> </span>with<span class="_"> </span>many<span class="_"> </span>of<span class="_"> </span>the</div><div class="t m5 x1d h26 y2fb ff7 fs19 fc2 sc0 ls0 ws0">challenges<span class="_"> </span>faced<span class="_"> </span>by<span class="_"> </span>processor<span class="_"> </span>designers<span class="_ _1"></span>.</div><div class="t m5 x29 h26 y2fc ff7 fs19 fc2 sc0 ls0 ws0">W<span class="_ _3"></span>e<span class="_ _11"> </span>then<span class="_ _16"> </span>provide<span class="_"> </span>some<span class="_ _16"> </span>background<span class="_"> </span>on<span class="_ _16"> </span>digital<span class="_"> </span>hardware<span class="_ _16"> </span>design.<span class="_"> </span>W<span class="_ _1"></span>e<span class="_ _11"> </span>describe</div><div class="t m5 x1d h26 y2fd ff7 fs19 fc2 sc0 ls0 ws0">the<span class="_ _13"> </span>basic<span class="_ _13"> </span>building<span class="_ _13"> </span>blocks<span class="_ _13"> </span>used<span class="_ _13"> </span>in<span class="_ _13"> </span>a<span class="_ _13"> </span>processor<span class="_ _13"> </span>and<span class="_ _6"> </span>how<span class="_ _13"> </span>they<span class="_ _13"> </span>are<span class="_ _13"> </span>connected<span class="_ _13"> </span>together</div><div class="t m5 x1d h26 y2fe ff7 fs19 fc2 sc0 ls0 ws0">and<span class="_"> </span>operated.<span class="_"> </span>T<span class="_ _1"></span>his<span class="_"> </span>presentation<span class="_"> </span>builds<span class="_"> </span>on<span class="_"> </span>our<span class="_"> </span>discussion<span class="_"> </span>of<span class="_"> </span>Boolean<span class="_"> </span>algebra<span class="_"> </span>and</div><div class="t m5 x1d h26 y2ff ff7 fs19 fc2 sc0 ls0 ws0">bit-level<span class="_ _11"> </span>operations<span class="_ _16"> </span>from<span class="_ _11"> </span>Chapter<span class="_ _16"> </span>2.<span class="_ _11"> </span>W<span class="_ _3"></span>e<span class="_ _16"> </span>also<span class="_ _11"> </span>introduce<span class="_ _16"> </span>a<span class="_ _11"> </span>simple<span class="_ _11"> </span>language,<span class="_ _11"> </span>HCL</div><div class="t m5 x1d h26 y300 ff7 fs19 fc2 sc0 ls0 ws0">(for<span class="_ _11"> </span>“hardware<span class="_ _11"> </span>control<span class="_ _11"> </span>language”),<span class="_ _11"> </span>to<span class="_ _11"> </span>describe<span class="_ _11"> </span>the<span class="_ _11"> </span>control<span class="_ _11"> </span>portions<span class="_ _11"> </span>of<span class="_ _11"> </span>hardware</div><div class="t m5 x1d h26 y21a ff7 fs19 fc2 sc0 ls0 ws0">systems<span class="_ _1"></span>.<span class="_"> </span>W<span class="_ _3"></span>e<span class="_ _13"> </span>will<span class="_"> </span>later<span class="_"> </span>use<span class="_ _13"> </span>this<span class="_"> </span>language<span class="_ _13"> </span>to<span class="_"> </span>describe<span class="_"> </span>our<span class="_ _13"> </span>processor<span class="_"> </span>designs<span class="_ _3"></span>.<span class="_"> </span>Even<span class="_"> </span>if</div><div class="t m5 x1d h26 y450 ff7 fs19 fc2 sc0 ls0 ws0">you<span class="_ _13"> </span>already<span class="_ _6"> </span>have<span class="_ _13"> </span>some<span class="_ _13"> </span>background<span class="_ _6"> </span>in<span class="_ _13"> </span>logic<span class="_ _13"> </span>design,<span class="_ _6"> </span>read<span class="_ _13"> </span>this<span class="_ _13"> </span>section<span class="_ _6"> </span>to<span class="_ _13"> </span>understand</div><div class="t m5 x1d h26 y451 ff7 fs19 fc2 sc0 ls0 ws0">our<span class="_"> </span>particular<span class="_"> </span>notation.</div><div class="t m5 x29 h26 y452 ff7 fs19 fc2 sc0 ls0 ws0">As<span class="_ _15"> </span>a<span class="_ _15"> </span>ﬁrst<span class="_ _15"> </span>step<span class="_ _15"> </span>in<span class="_ _15"> </span>designing<span class="_ _15"> </span>a<span class="_ _15"> </span>processor,<span class="_ _21"> </span>we<span class="_ _15"> </span>present<span class="_ _15"> </span>a<span class="_ _21"> </span>functionally<span class="_ _15"> </span>correct,</div><div class="t m5 x1d h26 y453 ff7 fs19 fc2 sc0 ls0 ws0">but<span class="_"> </span>somewhat<span class="_"> </span>impractical,<span class="_ _11"> </span>Y86-64<span class="_"> </span>processor<span class="_ _11"> </span>based<span class="_"> </span>on<span class="_"> </span><span class="ffa">sequential<span class="_ _16"> </span></span>operation.<span class="_"> </span>This</div><div class="t m5 x1d h26 y454 ff7 fs19 fc2 sc0 ls0 ws0">processor<span class="_"> </span>executes<span class="_ _13"> </span>a<span class="_"> </span>complete<span class="_ _13"> </span>Y86-64<span class="_"> </span>instruction<span class="_"> </span>on<span class="_ _13"> </span>every<span class="_"> </span>clock<span class="_ _13"> </span>cycle<span class="_ _1"></span>.<span class="_"> </span>T<span class="_ _1"></span>he<span class="_"> </span>clock</div><div class="t m5 x1d h26 y455 ff7 fs19 fc2 sc0 ls0 ws0">must<span class="_ _13"> </span>run<span class="_ _13"> </span>slowly<span class="_ _13"> </span>enough<span class="_ _13"> </span>to<span class="_ _13"> </span>allow<span class="_ _13"> </span>an<span class="_ _13"> </span>entire<span class="_ _13"> </span>series<span class="_ _13"> </span>of<span class="_ _13"> </span>actions<span class="_ _13"> </span>to<span class="_ _13"> </span>complete<span class="_ _13"> </span>within<span class="_ _13"> </span>one</div><div class="t m5 x1d h26 y456 ff7 fs19 fc2 sc0 ls0 ws0">cycle<span class="_ _1"></span>.<span class="_"> </span>Such<span class="_ _13"> </span>a<span class="_"> </span>processor<span class="_ _13"> </span>could<span class="_"> </span>be<span class="_ _13"> </span>implemented,<span class="_"> </span>but<span class="_"> </span>its<span class="_ _13"> </span>performance<span class="_"> </span>would<span class="_ _13"> </span>be<span class="_"> </span>well</div><div class="t m5 x1d h26 y457 ff7 fs19 fc2 sc0 ls0 ws0">below<span class="_"> </span>what<span class="_"> </span>could<span class="_"> </span>be<span class="_"> </span>achieved<span class="_"> </span>for<span class="_"> </span>this<span class="_"> </span>much<span class="_"> </span>hardware<span class="_ _1"></span>.</div><div class="t m5 x29 h26 y458 ff7 fs19 fc2 sc0 ls0 ws0">W<span class="_ _1"></span>ith<span class="_ _16"> </span>the<span class="_ _16"> </span>sequential<span class="_ _16"> </span>design<span class="_ _16"> </span>as<span class="_ _16"> </span>a<span class="_ _16"> </span>basis<span class="_ _1"></span>,<span class="_ _16"> </span>we<span class="_ _16"> </span>then<span class="_ _16"> </span>apply<span class="_ _16"> </span>a<span class="_ _16"> </span>series<span class="_ _16"> </span>of<span class="_ _16"> </span>transforma-</div><div class="t m5 x1d h26 y459 ff7 fs19 fc2 sc0 ls0 ws0">tions<span class="_"> </span>to<span class="_"> </span>create<span class="_ _13"> </span>a<span class="_"> </span><span class="ffa">pipelined<span class="_"> </span></span>processor.<span class="_"> </span>T<span class="_ _1"></span>his<span class="_"> </span>processor<span class="_"> </span>breaks<span class="_ _13"> </span>the<span class="_"> </span>execution<span class="_"> </span>of<span class="_"> </span>each</div><div class="t m5 x1d h26 y45a ff7 fs19 fc2 sc0 ls0 ws0">instruction<span class="_ _6"> </span>into<span class="_ _13"> </span>ﬁve<span class="_ _6"> </span>steps<span class="_ _0"></span>,<span class="_ _13"> </span>each<span class="_ _6"> </span>of<span class="_ _13"> </span>which<span class="_ _6"> </span>is<span class="_ _13"> </span>handled<span class="_ _6"> </span>by<span class="_ _13"> </span>a<span class="_ _6"> </span>separate<span class="_ _13"> </span>section<span class="_ _6"> </span>or<span class="_ _13"> </span><span class="ffa">stage<span class="_ _6"> </span></span>of</div><div class="t m5 x1d h26 y45b ff7 fs19 fc2 sc0 ls0 ws0">the<span class="_ _13"> </span>hardware<span class="_ _1"></span>.<span class="_ _6"> </span>Instructions<span class="_ _13"> </span>progress<span class="_ _13"> </span>through<span class="_ _6"> </span>the<span class="_ _13"> </span>stages<span class="_ _6"> </span>of<span class="_ _13"> </span>the<span class="_ _6"> </span>pipeline<span class="_ _0"></span>,<span class="_ _13"> </span>with<span class="_ _6"> </span>one<span class="_ _13"> </span>in-</div><div class="t m5 x1d h26 y45c ff7 fs19 fc2 sc0 ls0 ws0">struction<span class="_"> </span>entering<span class="_"> </span>the<span class="_"> </span>pipeline<span class="_"> </span>on<span class="_"> </span>each<span class="_"> </span>clock<span class="_"> </span>cycle<span class="_ _3"></span>.<span class="_"> </span>As<span class="_"> </span>a<span class="_"> </span>result,<span class="_"> </span>the<span class="_"> </span>processor<span class="_"> </span>can</div><div class="t m5 x1d h26 y227 ff7 fs19 fc2 sc0 ls0 ws0">be<span class="_ _14"> </span>executing<span class="_ _16"> </span>the<span class="_ _14"> </span>different<span class="_ _14"> </span>steps<span class="_ _14"> </span>of<span class="_ _14"> </span>up<span class="_ _14"> </span>to<span class="_ _14"> </span>ﬁve<span class="_ _16"> </span>instructions<span class="_ _14"> </span>simultaneously<span class="_ _3"></span>.<span class="_ _14"> </span>Mak-</div><div class="t m5 x1d h26 y45d ff7 fs19 fc2 sc0 ls0 ws0">ing<span class="_ _16"> </span>this<span class="_ _14"> </span>processor<span class="_ _16"> </span>preserve<span class="_ _14"> </span>the<span class="_ _16"> </span>sequential<span class="_ _16"> </span>behavior<span class="_ _14"> </span>of<span class="_ _16"> </span>the<span class="_ _14"> </span>Y86-64<span class="_ _16"> </span>ISA<span class="_ _14"> </span>requires</div><div class="t m5 x1d h26 y45e ff7 fs19 fc2 sc0 ls0 ws0">handling<span class="_ _16"> </span>a<span class="_ _16"> </span>variety<span class="_ _14"> </span>of<span class="_ _16"> </span><span class="ffa">hazard<span class="_ _14"> </span></span>conditions<span class="_ _1"></span>,<span class="_ _14"> </span>where<span class="_ _16"> </span>the<span class="_ _16"> </span>location<span class="_ _14"> </span>or<span class="_ _16"> </span>operands<span class="_ _16"> </span>of<span class="_ _14"> </span>one</div><div class="t m5 x1d h26 y4ad ff7 fs19 fc2 sc0 ls0 ws0">instruction<span class="_"> </span>depend<span class="_"> </span>on<span class="_"> </span>those<span class="_"> </span>of<span class="_"> </span>other<span class="_"> </span>instructions<span class="_"> </span>that<span class="_"> </span>are<span class="_"> </span>still<span class="_"> </span>in<span class="_"> </span>the<span class="_"> </span>pipeline<span class="_ _1"></span>.</div><div class="t m5 x29 h26 y45f ff7 fs19 fc2 sc0 ls0 ws0">W<span class="_ _3"></span>e<span class="_ _16"> </span>have<span class="_ _11"> </span>devised<span class="_ _11"> </span>a<span class="_ _16"> </span>variety<span class="_ _11"> </span>of<span class="_ _16"> </span>tools<span class="_ _11"> </span>for<span class="_ _16"> </span>studying<span class="_ _11"> </span>and<span class="_ _11"> </span>experimenting<span class="_ _16"> </span>with<span class="_ _11"> </span>our</div><div class="t m5 x1d h26 y460 ff7 fs19 fc2 sc0 ls0 ws0">processor<span class="_ _13"> </span>designs<span class="_ _1"></span>.<span class="_ _13"> </span>T<span class="_ _1"></span>hese<span class="_ _13"> </span>include<span class="_"> </span>an<span class="_ _13"> </span>assembler<span class="_ _13"> </span>for<span class="_ _13"> </span>Y86-64,<span class="_ _13"> </span>a<span class="_ _13"> </span>simulator<span class="_ _13"> </span>for<span class="_ _13"> </span>running</div><div class="t m5 x1d h26 y461 ff7 fs19 fc2 sc0 ls0 ws0">Y86-64<span class="_ _14"> </span>programs<span class="_ _14"> </span>on<span class="_ _14"> </span>your<span class="_ _15"> </span>machine<span class="_ _1"></span>,<span class="_ _21"> </span>and<span class="_ _14"> </span>simulators<span class="_ _14"> </span>for<span class="_ _15"> </span>two<span class="_ _14"> </span>sequential<span class="_ _14"> </span>and<span class="_ _14"> </span>one</div><div class="t m5 x1d h26 y322 ff7 fs19 fc2 sc0 ls0 ws0">pipelined<span class="_ _15"> </span>processor<span class="_ _14"> </span>design.<span class="_ _15"> </span>The<span class="_ _14"> </span>control<span class="_ _15"> </span>logic<span class="_ _15"> </span>for<span class="_ _14"> </span>these<span class="_ _15"> </span>designs<span class="_ _15"> </span>is<span class="_ _15"> </span>described<span class="_ _15"> </span>by</div><div class="t m5 x1d h26 y323 ff7 fs19 fc2 sc0 ls0 ws0">ﬁles<span class="_ _6"> </span>in<span class="_ _13"> </span>HCL<span class="_ _6"> </span>notation.<span class="_ _13"> </span>By<span class="_ _6"> </span>editing<span class="_ _13"> </span>these<span class="_ _6"> </span>ﬁles<span class="_ _6"> </span>and<span class="_ _13"> </span>recompiling<span class="_ _6"> </span>the<span class="_ _13"> </span>simulator<span class="_ _0"></span>,<span class="_ _13"> </span>you<span class="_ _6"> </span>can</div><div class="t m5 x1d h26 y324 ff7 fs19 fc2 sc0 ls0 ws0">alter<span class="_ _6"> </span>and<span class="_ _13"> </span>extend<span class="_ _6"> </span>the<span class="_ _6"> </span>simulator’s<span class="_ _6"> </span>behavior.<span class="_ _6"> </span>A<span class="_ _13"> </span>number<span class="_ _6"> </span>of<span class="_ _6"> </span>exercises<span class="_ _13"> </span>are<span class="_ _6"> </span>provided<span class="_ _6"> </span>that</div><div class="t m5 x1d h26 y325 ff7 fs19 fc2 sc0 ls0 ws0">involve<span class="_ _13"> </span>implementing<span class="_ _13"> </span>new<span class="_ _13"> </span>instructions<span class="_ _13"> </span>and<span class="_ _13"> </span>modifying<span class="_ _13"> </span>how<span class="_ _13"> </span>the<span class="_ _13"> </span>machine<span class="_ _13"> </span>processes</div><div class="t m5 x1d h26 y326 ff7 fs19 fc2 sc0 ls0 ws0">instructions<span class="_ _1"></span>.<span class="_ _13"> </span>T<span class="_ _3"></span>esting<span class="_ _13"> </span>code<span class="_"> </span>is<span class="_ _13"> </span>provided<span class="_ _13"> </span>to<span class="_"> </span>help<span class="_ _13"> </span>you<span class="_ _13"> </span>evaluate<span class="_ _13"> </span>the<span class="_"> </span>correctness<span class="_ _13"> </span>of<span class="_ _13"> </span>your</div><div class="t m5 x1d h26 y319 ff7 fs19 fc2 sc0 ls0 ws0">modiﬁcations<span class="_ _1"></span>.<span class="_"> </span>T<span class="_ _1"></span>hese<span class="_"> </span>exercises<span class="_ _13"> </span>will<span class="_"> </span>greatly<span class="_ _13"> </span>aid<span class="_"> </span>your<span class="_"> </span>understanding<span class="_ _13"> </span>of<span class="_"> </span>the<span class="_ _13"> </span>material</div><div class="t m5 x1d h26 y31a ff7 fs19 fc2 sc0 ls0 ws0">and<span class="_"> </span>will<span class="_ _13"> </span>give<span class="_"> </span>you<span class="_ _13"> </span>an<span class="_"> </span>appreciation<span class="_ _13"> </span>for<span class="_"> </span>the<span class="_ _13"> </span>many<span class="_"> </span>different<span class="_"> </span>design<span class="_ _13"> </span>alternatives<span class="_"> </span>faced</div><div class="t m5 x1d h26 y31b ff7 fs19 fc2 sc0 ls0 ws0">by<span class="_"> </span>processor<span class="_"> </span>designers<span class="_ _1"></span>.</div><div class="t m5 x29 h26 y31c ff7 fs19 fc2 sc0 ls0 ws0">W<span class="_ _3"></span>eb<span class="_"> </span>Aside<span class="_ _13"> </span><span class="ff9">arch:vlog<span class="_ _13"> </span></span>on<span class="_ _13"> </span>page<span class="_"> </span>503<span class="_ _13"> </span>presents<span class="_ _13"> </span>a<span class="_"> </span>representation<span class="_ _13"> </span>of<span class="_ _13"> </span>our<span class="_"> </span>pipelined</div><div class="t m5 x1d h26 y31d ff7 fs19 fc2 sc0 ls0 ws0">Y86-64<span class="_ _21"> </span>processor<span class="_ _21"> </span>in<span class="_ _21"> </span>the<span class="_ _21"> </span>V<span class="_ _3"></span>erilog<span class="_ _f"> </span>hardware<span class="_ _21"> </span>description<span class="_ _21"> </span>language.<span class="_ _15"> </span>T<span class="_ _0"></span>his<span class="_ _21"> </span>involves</div><div class="t m5 x1d h26 y31e ff7 fs19 fc2 sc0 ls0 ws0">creating<span class="_"> </span>modules<span class="_ _11"> </span>for<span class="_ _11"> </span>the<span class="_ _11"> </span>basic<span class="_"> </span>hardware<span class="_ _11"> </span>building<span class="_ _11"> </span>blocks<span class="_ _11"> </span>and<span class="_"> </span>for<span class="_ _11"> </span>the<span class="_ _11"> </span>overall<span class="_ _11"> </span>pro-</div><div class="t m5 x1d h26 y31f ff7 fs19 fc2 sc0 ls0 ws0">cessor<span class="_ _16"> </span>structure<span class="_ _1"></span>.<span class="_ _16"> </span>W<span class="_ _3"></span>e<span class="_ _16"> </span>automatically<span class="_ _16"> </span>translate<span class="_ _16"> </span>the<span class="_ _16"> </span>HCL<span class="_ _16"> </span>description<span class="_ _16"> </span>of<span class="_ _16"> </span>the<span class="_ _11"> </span>control</div></div><div class="pi" data-data='{"ctm":[2.000000,0.000000,0.000000,2.000000,0.000000,0.000000]}'></div></div>
