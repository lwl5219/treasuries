<div id="pf430" class="pf w2 h11" data-page-no="430"><div class="pc pc430 w2 h11"><img class="bi x0 y0 w1 h1" alt="" src="csapp/bg430.png"/><div class="t m5 x23c h28 y9b ff6 fs1f fc2 sc0 ls0 ws0">Homework<span class="_ _10"> </span>Problems<span class="_ _1b"> </span><span class="ffe fs1e">1071</span></div><div class="t m5 x17 h28 y140c ffe fs1e fc6 sc0 ls0 ws0">12.32</div><div class="t m5 x1d2 h73 ye7 ff10 fs19 fc6 sc0 ls0 ws0">◆◆◆</div><div class="t m5 x17 h26 y2a7 ff7 fs19 fc1 sc0 ls0 ws0">Implement<span class="_ _14"> </span>a<span class="_ _14"> </span>version<span class="_ _15"> </span>of<span class="_ _14"> </span>the<span class="_ _15"> </span><span class="ffd">tfgets<span class="_ _14"> </span></span>function<span class="_ _15"> </span>from<span class="_ _14"> </span>Problem<span class="_ _14"> </span>12.31<span class="_ _15"> </span>that<span class="_ _14"> </span>uses<span class="_ _15"> </span>the</div><div class="t m5 x17 h26 y2a8 ffd fs19 fc1 sc0 ls0 ws0">select<span class="_ _e"> </span><span class="ff7">function.<span class="_ _e"> </span>Y<span class="_ _3"></span>our<span class="_ _1f"> </span>function<span class="_ _e"> </span>should<span class="_ _e"> </span>be<span class="_ _1f"> </span>implemented<span class="_ _e"> </span>in<span class="_ _e"> </span>a<span class="_ _e"> </span>package<span class="_ _1f"> </span>called</span></div><div class="t m5 x17 h26 y2f7 ffd fs19 fc1 sc0 ls0 ws0">tfgets-select.c<span class="ff7">.<span class="_ _15"> </span>T<span class="_ _3"></span>est<span class="_ _15"> </span>your<span class="_ _21"> </span>solution<span class="_ _21"> </span>using<span class="_ _21"> </span>the<span class="_ _15"> </span>driver<span class="_ _21"> </span>program<span class="_ _21"> </span>from<span class="_ _21"> </span>Problem</span></div><div class="t m5 x17 h26 y2f8 ff7 fs19 fc1 sc0 ls0 ws0">12.31.<span class="_"> </span>Y<span class="_ _3"></span>ou<span class="_"> </span>may<span class="_"> </span>assume<span class="_"> </span>that<span class="_"> </span>standard<span class="_"> </span>input<span class="_"> </span>is<span class="_"> </span>assigned<span class="_"> </span>to<span class="_"> </span>descriptor<span class="_"> </span>0.</div><div class="t m5 x17 h73 y8524 ffe fs1e fc6 sc0 ls0 ws0">12.33<span class="_ _23"> </span><span class="ff10 fs19">◆◆◆</span></div><div class="t m5 x17 h26 y8525 ff7 fs19 fc1 sc0 ls0 ws0">Implement<span class="_"> </span>a<span class="_ _11"> </span>threaded<span class="_"> </span>version<span class="_ _11"> </span>of<span class="_"> </span>the<span class="_ _11"> </span><span class="ffd">tfgets<span class="_ _10"> </span></span>function<span class="_ _11"> </span>from<span class="_ _11"> </span>Problem<span class="_"> </span>12.31.<span class="_ _11"> </span>Y<span class="_ _3"></span>our</div><div class="t m5 x17 h26 y8526 ff7 fs19 fc1 sc0 ls0 ws0">function<span class="_ _13"> </span>should<span class="_"> </span>be<span class="_ _13"> </span>implemented<span class="_ _13"> </span>in<span class="_"> </span>a<span class="_ _13"> </span>package<span class="_ _13"> </span>called<span class="_"> </span><span class="ffd">tfgets-thread.c</span>.<span class="_ _13"> </span>T<span class="_ _7"></span>est<span class="_"> </span>your</div><div class="t m5 x17 h26 y8527 ff7 fs19 fc1 sc0 ls0 ws0">solution<span class="_"> </span>using<span class="_"> </span>the<span class="_"> </span>driver<span class="_"> </span>program<span class="_"> </span>from<span class="_"> </span>Problem<span class="_"> </span>12.31.</div><div class="t m5 x17 h73 y5f3d ffe fs1e fc6 sc0 ls0 ws0">12.34<span class="_ _23"> </span><span class="ff10 fs19">◆◆◆</span></div><div class="t m5 x17 h46 y8528 ff7 fs19 fc1 sc0 ls0 ws0">Write<span class="_ _13"> </span>a<span class="_ _13"> </span>parallel<span class="_ _13"> </span>threaded<span class="_ _6"> </span>version<span class="_ _13"> </span>of<span class="_ _13"> </span>an<span class="_ _13"> </span><span class="ff11">N<span class="_ _16"> </span><span class="ff12">×<span class="_ _13"></span></span>M<span class="_ _11"> </span></span>matrix<span class="_ _13"> </span>multiplication<span class="_ _13"> </span>kernel.<span class="_ _6"> </span>Com-</div><div class="t m5 x17 h26 y8529 ff7 fs19 fc1 sc0 ls0 ws0">pare<span class="_"> </span>the<span class="_"> </span>performance<span class="_"> </span>to<span class="_"> </span>the<span class="_"> </span>sequential<span class="_"> </span>case<span class="_ _1"></span>.</div><div class="t m5 x17 h73 y852a ffe fs1e fc6 sc0 ls0 ws0">12.35<span class="_ _23"> </span><span class="ff10 fs19">◆◆◆</span></div><div class="t m5 x17 h26 y852b ff7 fs19 fc1 sc0 ls0 ws0">Implement<span class="_ _13"> </span>a<span class="_"> </span>concurrent<span class="_ _13"> </span>version<span class="_ _13"> </span>of<span class="_"> </span>the<span class="_ _13"> </span><span class="ff9">T<span class="_ _3"></span>iny<span class="_ _10"> </span><span class="ff7">W<span class="_ _3"></span>eb<span class="_"> </span>server<span class="_ _13"> </span>based<span class="_ _13"> </span>on<span class="_"> </span>processes<span class="_ _3"></span>.<span class="_"> </span>Y<span class="_ _7"></span>our</span></span></div><div class="t m5 x17 h26 y852c ff7 fs19 fc1 sc0 ls0 ws0">solution<span class="_"> </span>should<span class="_"> </span>create<span class="_"> </span>a<span class="_"> </span>new<span class="_"> </span>child<span class="_"> </span>process<span class="_"> </span>for<span class="_"> </span>each<span class="_ _11"> </span>new<span class="_"> </span>connection<span class="_"> </span>request.<span class="_"> </span>T<span class="_ _7"></span>est</div><div class="t m5 x17 h26 y852d ff7 fs19 fc1 sc0 ls0 ws0">your<span class="_"> </span>solution<span class="_"> </span>using<span class="_"> </span>a<span class="_"> </span>real<span class="_"> </span>W<span class="_ _3"></span>eb<span class="_"> </span>browser.</div><div class="t m5 x17 h73 y852e ffe fs1e fc6 sc0 ls0 ws0">12.36<span class="_ _23"> </span><span class="ff10 fs19">◆◆◆</span></div><div class="t m5 x17 h26 y852f ff7 fs19 fc1 sc0 ls0 ws0">Implement<span class="_ _6"> </span>a<span class="_ _6"> </span>concurrent<span class="_ _13"> </span>version<span class="_ _a"> </span>of<span class="_ _13"> </span>the<span class="_ _a"> </span><span class="ff9">T<span class="_ _1"></span>iny<span class="_ _6"> </span><span class="ff7">W<span class="_ _1"></span>eb<span class="_ _6"> </span>server<span class="_ _6"> </span>based<span class="_ _13"> </span>on<span class="_ _a"> </span>I/O<span class="_ _13"> </span>multiplexing<span class="_ _1"></span>.</span></span></div><div class="t m5 x17 h26 y8530 ff7 fs19 fc1 sc0 ls0 ws0">T<span class="_ _7"></span>est<span class="_"> </span>your<span class="_"> </span>solution<span class="_"> </span>using<span class="_"> </span>a<span class="_"> </span>real<span class="_"> </span>W<span class="_ _3"></span>eb<span class="_"> </span>browser.</div><div class="t m5 x17 h73 y8531 ffe fs1e fc6 sc0 ls0 ws0">12.37<span class="_ _23"> </span><span class="ff10 fs19">◆◆◆</span></div><div class="t m5 x17 h26 y8532 ff7 fs19 fc1 sc0 ls0 ws0">Implement<span class="_ _11"> </span>a<span class="_ _16"> </span>concurrent<span class="_ _11"> </span>version<span class="_ _11"> </span>of<span class="_ _16"> </span>the<span class="_ _11"> </span><span class="ff9">T<span class="_ _1"></span>iny<span class="_ _11"> </span><span class="ff7">W<span class="_ _1"></span>eb<span class="_ _11"> </span>server<span class="_ _16"> </span>based<span class="_ _11"> </span>on<span class="_ _11"> </span>threads<span class="_ _0"></span>.<span class="_ _11"> </span>Y<span class="_ _3"></span>our</span></span></div><div class="t m5 x17 h26 y8533 ff7 fs19 fc1 sc0 ls0 ws0">solution<span class="_ _11"> </span>should<span class="_ _16"> </span>create<span class="_ _11"> </span>a<span class="_ _16"> </span>new<span class="_ _11"> </span>thread<span class="_ _16"> </span>for<span class="_ _11"> </span>each<span class="_ _16"> </span>new<span class="_ _11"> </span>connection<span class="_ _16"> </span>request.<span class="_ _11"> </span>T<span class="_ _7"></span>est<span class="_ _16"> </span>your</div><div class="t m5 x17 h26 y8534 ff7 fs19 fc1 sc0 ls0 ws0">solution<span class="_"> </span>using<span class="_"> </span>a<span class="_"> </span>real<span class="_"> </span>W<span class="_ _3"></span>eb<span class="_"> </span>browser.</div><div class="t m5 x17 h73 y8535 ffe fs1e fc6 sc0 ls0 ws0">12.38<span class="_ _23"> </span><span class="ff10 fs19">◆◆◆◆</span></div><div class="t m5 x17 h26 y8536 ff7 fs19 fc1 sc0 ls0 ws0">Implement<span class="_"> </span>a<span class="_"> </span>concurrent<span class="_ _11"> </span>prethreaded<span class="_"> </span>version<span class="_"> </span>of<span class="_ _11"> </span>the<span class="_"> </span><span class="ff9">T<span class="_ _1"></span>iny<span class="_ _10"> </span><span class="ff7">W<span class="_ _1"></span>eb<span class="_"> </span>server.<span class="_"> </span>Y<span class="_ _3"></span>our<span class="_"> </span>solu-</span></span></div><div class="t m5 x17 h26 y8537 ff7 fs19 fc1 sc0 ls0 ws0">tion<span class="_ _13"> </span>should<span class="_ _6"> </span>dynamically<span class="_ _13"> </span>increase<span class="_ _13"> </span>or<span class="_ _13"> </span>decrease<span class="_ _6"> </span>the<span class="_ _13"> </span>number<span class="_ _13"> </span>of<span class="_ _6"> </span>threads<span class="_ _13"> </span>in<span class="_ _13"> </span>response<span class="_ _13"> </span>to</div><div class="t m5 x17 h26 y8538 ff7 fs19 fc1 sc0 ls0 ws0">the<span class="_ _13"> </span>current<span class="_ _13"> </span>load.<span class="_"> </span>One<span class="_ _13"> </span>strategy<span class="_ _13"> </span>is<span class="_ _13"> </span>to<span class="_ _13"> </span>double<span class="_ _13"> </span>the<span class="_"> </span>number<span class="_ _13"> </span>of<span class="_ _13"> </span>threads<span class="_ _13"> </span>when<span class="_ _13"> </span>the<span class="_"> </span>buffer</div><div class="t m5 x17 h26 y8539 ff7 fs19 fc1 sc0 ls0 ws0">becomes<span class="_ _11"> </span>full,<span class="_ _16"> </span>and<span class="_ _11"> </span>halve<span class="_ _11"> </span>the<span class="_ _11"> </span>number<span class="_ _16"> </span>of<span class="_ _11"> </span>threads<span class="_ _11"> </span>when<span class="_ _11"> </span>the<span class="_ _16"> </span>buffer<span class="_ _11"> </span>becomes<span class="_ _11"> </span>empty<span class="_ _3"></span>.</div><div class="t m5 x17 h26 y853a ff7 fs19 fc1 sc0 ls0 ws0">T<span class="_ _7"></span>est<span class="_"> </span>your<span class="_"> </span>solution<span class="_"> </span>using<span class="_"> </span>a<span class="_"> </span>real<span class="_"> </span>W<span class="_ _3"></span>eb<span class="_"> </span>browser.</div><div class="t m5 x17 h73 y4490 ffe fs1e fc6 sc0 ls0 ws0">12.39<span class="_ _23"> </span><span class="ff10 fs19">◆◆◆◆</span></div><div class="t m5 x17 h26 y853b ff7 fs19 fc1 sc0 ls0 ws0">A<span class="_ _11"> </span>W<span class="_ _1"></span>eb<span class="_ _16"> </span>proxy<span class="_ _11"> </span>is<span class="_ _16"> </span>a<span class="_ _11"> </span>program<span class="_ _16"> </span>that<span class="_ _16"> </span>acts<span class="_ _11"> </span>as<span class="_ _16"> </span>a<span class="_ _16"> </span>middleman<span class="_ _11"> </span>between<span class="_ _16"> </span>a<span class="_ _11"> </span>W<span class="_ _1"></span>eb<span class="_ _16"> </span>server<span class="_ _11"> </span>and</div><div class="t m5 x17 h26 y853c ff7 fs19 fc1 sc0 ls0 ws0">browser.<span class="_"> </span>Instead<span class="_"> </span>of<span class="_"> </span>contacting<span class="_"> </span>the<span class="_"> </span>server<span class="_"> </span>directly<span class="_"> </span>to<span class="_"> </span>get<span class="_"> </span>a<span class="_"> </span>W<span class="_ _3"></span>eb<span class="_"> </span>page<span class="_ _0"></span>,<span class="_"> </span>the<span class="_"> </span>browser</div><div class="t m5 x17 h26 y853d ff7 fs19 fc1 sc0 ls0 ws0">contacts<span class="_ _14"> </span>the<span class="_ _15"> </span>proxy<span class="_ _3"></span>,<span class="_ _15"> </span>which<span class="_ _15"> </span>forwards<span class="_ _14"> </span>the<span class="_ _15"> </span>request<span class="_ _14"> </span>to<span class="_ _15"> </span>the<span class="_ _15"> </span>server.<span class="_ _14"> </span>When<span class="_ _14"> </span>the<span class="_ _14"> </span>server</div><div class="t m5 x17 h26 y853e ff7 fs19 fc1 sc0 ls0 ws0">replies<span class="_ _13"> </span>to<span class="_ _13"> </span>the<span class="_ _13"> </span>proxy<span class="_ _3"></span>,<span class="_ _13"> </span>the<span class="_"> </span>proxy<span class="_ _13"> </span>sends<span class="_ _13"> </span>the<span class="_ _13"> </span>reply<span class="_ _13"> </span>to<span class="_ _13"> </span>the<span class="_ _13"> </span>browser.<span class="_ _13"> </span>F<span class="_ _1"></span>or<span class="_ _13"> </span>this<span class="_ _13"> </span>lab<span class="_ _0"></span>,<span class="_ _13"> </span>you<span class="_ _13"> </span>will</div><div class="t m5 x17 h26 y853f ff7 fs19 fc1 sc0 ls0 ws0">write<span class="_"> </span>a<span class="_"> </span>simple<span class="_"> </span>W<span class="_ _3"></span>eb<span class="_"> </span>proxy<span class="_"> </span>that<span class="_"> </span>ﬁlters<span class="_"> </span>and<span class="_"> </span>logs<span class="_"> </span>requests:</div><div class="t m5 x34 h26 yec6 ff7 fs19 fc1 sc0 ls0 ws0">A.<span class="_ _1f"> </span>In<span class="_ _13"> </span>the<span class="_"> </span>ﬁrst<span class="_ _13"> </span>part<span class="_"> </span>of<span class="_ _13"> </span>the<span class="_"> </span>lab<span class="_ _1"></span>,<span class="_"> </span>you<span class="_ _13"> </span>will<span class="_"> </span>set<span class="_ _13"> </span>up<span class="_"> </span>the<span class="_ _13"> </span>proxy<span class="_"> </span>to<span class="_ _13"> </span>accept<span class="_"> </span>requests<span class="_ _3"></span>,<span class="_"> </span>parse</div><div class="t m5 x2d h26 yec7 ff7 fs19 fc1 sc0 ls0 ws0">the<span class="_ _11"> </span>HTTP<span class="_ _4"></span>,<span class="_ _11"> </span>forward<span class="_ _16"> </span>the<span class="_"> </span>requests<span class="_ _16"> </span>to<span class="_"> </span>the<span class="_ _11"> </span>server,<span class="_ _11"> </span>and<span class="_ _11"> </span>return<span class="_ _16"> </span>the<span class="_"> </span>results<span class="_ _11"> </span>to<span class="_ _16"> </span>the</div><div class="t m5 x2d h26 yec8 ff7 fs19 fc1 sc0 ls0 ws0">browser.<span class="_ _13"> </span>Y<span class="_ _7"></span>our<span class="_ _13"> </span>proxy<span class="_ _13"> </span>should<span class="_ _13"> </span>log<span class="_ _13"> </span>the<span class="_ _13"> </span>URLs<span class="_ _13"> </span>of<span class="_ _13"> </span>all<span class="_ _13"> </span>requests<span class="_ _13"> </span>in<span class="_ _13"> </span>a<span class="_ _13"> </span>log<span class="_ _13"> </span>ﬁle<span class="_ _13"> </span>on<span class="_ _13"> </span>disk,</div><div class="t m5 x2d h26 yec9 ff7 fs19 fc1 sc0 ls0 ws0">and<span class="_ _16"> </span>it<span class="_ _14"> </span>should<span class="_ _14"> </span>also<span class="_ _14"> </span>block<span class="_ _16"> </span>requests<span class="_ _14"> </span>to<span class="_ _14"> </span>any<span class="_ _14"> </span>URL<span class="_ _16"> </span>contained<span class="_ _14"> </span>in<span class="_ _14"> </span>a<span class="_ _16"> </span>ﬁlter<span class="_ _14"> </span>ﬁle<span class="_ _14"> </span>on</div><div class="t m5 x2d h26 yeca ff7 fs19 fc1 sc0 ls0 ws0">disk.</div></div><div class="pi" data-data='{"ctm":[2.000000,0.000000,0.000000,2.000000,0.000000,0.000000]}'></div></div>
