<div id="pf1eb" class="pf w2 h11" data-page-no="1eb"><div class="pc pc1eb w2 h11"><img class="bi x0 y0 w1 h1" alt="" src="csapp/bg1eb.png"/><div class="t m5 x14 h28 y9b ffe fs1e fc2 sc0 ls0 ws0">490<span class="_ _1b"> </span><span class="ff6 fs1f">Chapter<span class="_ _10"> </span>4<span class="_ _3d"> </span>Processor<span class="_ _10"> </span>Architecture</span></div><div class="t m5 x214 hc4 y4466 ff50 fs7a fc1 sc0 ls0 ws0">Stat</div><div class="t m5 x64 hc5 y4467 ff50 fs7b fc1 sc0 ls0 ws0">Stat</div><div class="t m5 xa2 hc6 y4468 ff50 fs7c fc1 sc0 ls0 ws0">M_icode</div><div class="t m5 x1f hc6 y4469 ff50 fs7c fc1 sc0 ls0 ws0">M_Cnd</div><div class="t m5 x1d hc6 y446a ff50 fs7c fc1 sc0 ls0 ws0">W_icode<span class="_ _1d2"> </span>W_dstM</div><div class="t m5 x165 hc6 y446b ff50 fs7c fc1 sc0 ls0 ws0">m_valM</div><div class="t m5 x165 hc6 y446c ff50 fs7c fc1 sc0 ls0 ws0">M_dstE</div><div class="t m5 x165 hc6 y446d ff50 fs7c fc1 sc0 ls0 ws0">M_dstM</div><div class="t m5 x165 hc6 y446e ff50 fs7c fc1 sc0 ls0 ws0">M_valA</div><div class="t m5 x165 hc6 y446f ff50 fs7c fc1 sc0 ls0 ws0">M_valE</div><div class="t m5 x165 hc6 y4470 ff50 fs7c fc1 sc0 ls0 ws0">W_dstE</div><div class="t m5 x165 hc6 y4471 ff50 fs7c fc1 sc0 ls0 ws0">W_valM</div><div class="t m5 x165 hc6 y4472 ff50 fs7c fc1 sc0 ls0 ws0">W_valE</div><div class="t m5 xa6 hc7 y4473 ff50 fs7d fc0 sc0 ls0 ws0">W<span class="_ _2c"> </span><span class="fc1">icode<span class="_ _19b"> </span>valE<span class="_ _58"> </span>valM<span class="_ _2b"> </span>dstE<span class="_ _1f"> </span>dstM</span></div><div class="t m5 xa6 hc7 y4474 ff50 fs7d fc0 sc0 ls0 ws0">M<span class="_ _57"> </span><span class="fc1">icode</span></div><div class="t m5 x4b hc7 y4473 ff50 fs7d fc1 sc0 ls0 ws0">stat</div><div class="t m5 x64 hc7 y4474 ff50 fs7d fc1 sc0 ls0 ws0">stat<span class="_ _86"> </span>Cnd<span class="_ _d0"> </span>valE<span class="_ _45"> </span>valA</div><div class="t m5 x18c hc7 y4475 ff50 fs7d fc1 sc0 ls0 ws0">dstE<span class="_ _e"> </span>dstM</div><div class="t m5 x1ad hc6 y4476 ff50 fs7c fc1 sc0 ls0 ws0">data out</div><div class="t m5 x1ad hc6 y4477 ff50 fs7c fc1 sc0 ls0 ws0">data in</div><div class="t m5 x13d hc6 y4478 ff50 fs7c fc1 sc0 ls0 ws0">read</div><div class="t m5 xad hc6 y4479 ff50 fs7c fc1 sc0 ls0 ws0">m_stat</div><div class="t m5 xdc hc6 y447a ff50 fs7c fc1 sc0 ls0 ws0">dmem_error</div><div class="t m5 x1ab hc6 y447b ff50 fs7c fc1 sc0 ls0 ws0">write</div><div class="t m5 x51 hc7 y447c ff50 fs7d fc1 sc0 ls0 ws0">Data</div><div class="t m5 xf5 hc7 y447d ff50 fs7d fc1 sc0 ls0 ws0">memory</div><div class="t m5 x5e hc5 y447e ff50 fs7b fc1 sc0 ls0 ws0">Addr</div><div class="t m5 x64 hc5 y447f ff50 fs7b fc1 sc0 ls0 ws0">Stat</div><div class="t m5 x67 hc5 y4480 ff50 fs7b fc1 sc0 ls0 ws0">Mem.</div><div class="t m5 xe4 hc5 y4481 ff50 fs7b fc1 sc0 ls0 ws0">read</div><div class="t m5 x67 hc5 y4482 ff50 fs7b fc1 sc0 ls0 ws0">Mem.</div><div class="t m5 xd9 hc5 y4483 ff50 fs7b fc1 sc0 ls0 ws0">write</div><div class="t m5 x1d h34 y4484 ffe fs16 fc6 sc0 ls0 ws0">Figure<span class="_ _16"> </span>4.61<span class="_ _c"> </span><span class="fc1">PIPE<span class="_ _14"> </span>memory<span class="_ _14"> </span>stage<span class="_ _14"> </span>logic.<span class="_ _14"> </span><span class="ff6">Many<span class="_ _16"> </span>of<span class="_ _14"> </span>the<span class="_ _14"> </span>signals<span class="_ _16"> </span>from<span class="_ _14"> </span>pipeline<span class="_ _14"> </span>registers</span></span></div><div class="t m5 x1d h34 y4485 ff6 fs16 fc1 sc0 ls0 ws0">M<span class="_ _16"> </span>and<span class="_ _16"> </span>W<span class="_ _14"> </span>are<span class="_ _16"> </span>passed<span class="_ _16"> </span>down<span class="_ _14"> </span>to<span class="_ _16"> </span>earlier<span class="_ _14"> </span>stages<span class="_ _16"> </span>to<span class="_ _16"> </span>provide<span class="_ _14"> </span>write-back<span class="_ _16"> </span>results,<span class="_ _14"> </span>instruction</div><div class="t m5 x1d h34 y4486 ff6 fs16 fc1 sc0 ls0 ws0">addresses,<span class="_ _10"> </span>and<span class="_ _11"> </span>forwarded<span class="_ _10"> </span>results.</div><div class="t m5 x1d h26 y4487 ff7 fs19 fc1 sc0 ls0 ws0">causing<span class="_ _16"> </span>an<span class="_ _16"> </span>exception<span class="_ _16"> </span>is<span class="_ _16"> </span>passing<span class="_ _16"> </span>through<span class="_ _16"> </span>later<span class="_ _16"> </span>pipeline<span class="_ _16"> </span>stages<span class="_ _1"></span>,<span class="_ _16"> </span>and<span class="_ _16"> </span>therefore<span class="_ _16"> </span>any</div><div class="t m5 x1d h26 y4488 ff7 fs19 fc1 sc0 ls0 ws0">updating<span class="_ _13"> </span>of<span class="_"> </span>the<span class="_ _13"> </span>condition<span class="_"> </span>codes<span class="_ _13"> </span>should<span class="_ _13"> </span>be<span class="_"> </span>suppressed.<span class="_ _13"> </span>T<span class="_ _0"></span>his<span class="_ _13"> </span>aspect<span class="_"> </span>of<span class="_ _13"> </span>the<span class="_"> </span>design<span class="_ _13"> </span>is</div><div class="t m5 x1d h26 y4489 ff7 fs19 fc1 sc0 ls0 ws0">discussed<span class="_"> </span>in<span class="_"> </span>Section<span class="_"> </span>4.5.8.</div><div class="t m5 x1d h47 y448a ffe fs2b fc1 sc0 ls0 ws0">Practice<span class="_"> </span>Problem<span class="_"> </span>4.35<span class="_ _1f"> </span><span class="fs16">(solution<span class="_"> </span>page<span class="_"> </span>527)</span></div><div class="t m5 x1d h26 y448b ff7 fs19 fc1 sc0 ls0 ws0">Our<span class="_ _16"> </span>second<span class="_ _16"> </span>case<span class="_ _16"> </span>in<span class="_ _16"> </span>the<span class="_ _16"> </span>HCL<span class="_ _16"> </span>code<span class="_ _14"> </span>for<span class="_ _16"> </span><span class="ff6">d_valA<span class="_ _16"> </span></span>uses<span class="_ _16"> </span>signal<span class="_ _16"> </span><span class="ff6">e_dstE<span class="_ _16"> </span></span>to<span class="_ _14"> </span>see<span class="_ _16"> </span>whether</div><div class="t m5 x1d h26 y448c ff7 fs19 fc1 sc0 ls0 ws0">to<span class="_ _11"> </span>select<span class="_ _16"> </span>the<span class="_ _11"> </span>ALU<span class="_ _16"> </span>output<span class="_ _11"> </span><span class="ff6">e_valE<span class="_ _11"> </span></span>as<span class="_ _16"> </span>the<span class="_ _11"> </span>forwarding<span class="_ _16"> </span>source<span class="_ _1"></span>.<span class="_ _16"> </span>Suppose<span class="_ _11"> </span>instead<span class="_ _16"> </span>that</div><div class="t m5 x1d h26 y448d ff7 fs19 fc1 sc0 ls0 ws0">we<span class="_ _14"> </span>use<span class="_ _14"> </span>signal<span class="_ _15"> </span><span class="ff6">E_dstE</span>,<span class="_ _15"> </span>the<span class="_ _15"> </span>destination<span class="_ _14"> </span>register<span class="_ _14"> </span>ID<span class="_ _15"> </span>in<span class="_ _14"> </span>pipeline<span class="_ _15"> </span>register<span class="_ _14"> </span>E<span class="_ _14"> </span>for<span class="_ _15"> </span>this</div><div class="t m5 x1d h26 y448e ff7 fs19 fc1 sc0 ls0 ws0">selection.<span class="_ _16"> </span>Write<span class="_ _16"> </span>a<span class="_ _16"> </span>Y86-64<span class="_ _14"> </span>program<span class="_ _16"> </span>that<span class="_ _16"> </span>would<span class="_ _14"> </span>give<span class="_ _16"> </span>an<span class="_ _16"> </span>incorrect<span class="_ _16"> </span>result<span class="_ _14"> </span>with<span class="_ _16"> </span>this</div><div class="t m5 x1d h26 y448f ff7 fs19 fc1 sc0 ls0 ws0">modiﬁed<span class="_"> </span>forwarding<span class="_"> </span>logic.</div><div class="t m5 x1d h42 y4490 ff6 fs29 fc6 sc0 ls0 ws0">Memory<span class="_ _16"> </span>Stage</div><div class="t m5 x1d h26 y5fe ff7 fs19 fc1 sc0 ls0 ws0">F<span class="_ _1"></span>igure<span class="_ _13"> </span>4.61<span class="_ _6"> </span>shows<span class="_ _6"> </span>the<span class="_ _13"> </span>memory<span class="_ _6"> </span>stage<span class="_ _6"> </span>logic<span class="_ _13"> </span>for<span class="_ _6"> </span>PIPE.<span class="_ _6"> </span>Comparing<span class="_ _13"> </span>this<span class="_ _6"> </span>to<span class="_ _6"> </span>the<span class="_ _13"> </span>memory</div><div class="t m5 x1d h26 y5ff ff7 fs19 fc1 sc0 ls0 ws0">stage<span class="_ _13"> </span>for<span class="_ _6"> </span>SEQ<span class="_ _13"> </span>(F<span class="_ _1"></span>igure<span class="_ _13"> </span>4.30),<span class="_ _13"> </span>we<span class="_ _13"> </span>see<span class="_ _6"> </span>that,<span class="_ _13"> </span>as<span class="_ _13"> </span>noted<span class="_ _13"> </span>before<span class="_ _1"></span>,<span class="_ _13"> </span>the<span class="_ _13"> </span>block<span class="_ _6"> </span>labeled<span class="_ _13"> </span>“Mem.</div><div class="t m5 x1d h26 y600 ff7 fs19 fc1 sc0 ls0 ws0">data”<span class="_ _16"> </span>in<span class="_ _14"> </span>SEQ<span class="_ _14"> </span>is<span class="_ _14"> </span>not<span class="_ _14"> </span>present<span class="_ _16"> </span>in<span class="_ _14"> </span>PIPE.<span class="_ _14"> </span>T<span class="_ _0"></span>his<span class="_ _14"> </span>block<span class="_ _16"> </span>served<span class="_ _14"> </span>to<span class="_ _14"> </span>select<span class="_ _14"> </span>between<span class="_ _14"> </span>data</div><div class="t m5 x1d h26 y601 ff7 fs19 fc1 sc0 ls0 ws0">sources<span class="_"> </span><span class="ff6">valP<span class="_ _10"> </span></span>(for<span class="_"> </span><span class="ffd">call<span class="_ _10"> </span></span>instructions)<span class="_"> </span>and<span class="_"> </span><span class="ff6">valA</span>,<span class="_"> </span>but<span class="_"> </span>this<span class="_ _13"> </span>selection<span class="_"> </span>is<span class="_"> </span>now<span class="_"> </span>performed</div><div class="t m5 x1d h26 y602 ff7 fs19 fc1 sc0 ls0 ws0">by<span class="_"> </span>the<span class="_ _11"> </span>block<span class="_ _11"> </span>labeled<span class="_"> </span>“Sel+Fwd<span class="_ _11"> </span>A<span class="_ _7"></span>”<span class="_ _11"> </span>in<span class="_ _11"> </span>the<span class="_"> </span>decode<span class="_ _11"> </span>stage.<span class="_"> </span>Most<span class="_"> </span>other<span class="_ _11"> </span>blocks<span class="_"> </span>in<span class="_ _11"> </span>this</div><div class="t m5 x1d h26 y603 ff7 fs19 fc1 sc0 ls0 ws0">stage<span class="_ _16"> </span>are<span class="_ _14"> </span>identical<span class="_ _16"> </span>to<span class="_ _14"> </span>their<span class="_ _16"> </span>counterparts<span class="_ _14"> </span>in<span class="_ _16"> </span>SEQ,<span class="_ _14"> </span>with<span class="_ _14"> </span>an<span class="_ _16"> </span>appropriate<span class="_ _14"> </span>renaming</div><div class="t m5 x1d h26 y604 ff7 fs19 fc1 sc0 ls0 ws0">of<span class="_ _11"> </span>the<span class="_ _11"> </span>signals<span class="_ _1"></span>.<span class="_ _16"> </span>In<span class="_"> </span>this<span class="_ _16"> </span>ﬁgure<span class="_ _1"></span>,<span class="_ _16"> </span>you<span class="_"> </span>can<span class="_ _16"> </span>also<span class="_ _11"> </span>see<span class="_ _11"> </span>that<span class="_ _11"> </span>many<span class="_ _11"> </span>of<span class="_ _16"> </span>the<span class="_"> </span>values<span class="_ _16"> </span>in<span class="_ _11"> </span>pipeline</div><div class="t m5 x1d h26 y605 ff7 fs19 fc1 sc0 ls0 ws0">registers<span class="_ _14"> </span>and<span class="_ _14"> </span>M<span class="_ _14"> </span>and<span class="_ _14"> </span>W<span class="_ _14"> </span>are<span class="_ _14"> </span>supplied<span class="_ _14"> </span>to<span class="_ _14"> </span>other<span class="_ _15"> </span>parts<span class="_ _14"> </span>of<span class="_ _14"> </span>the<span class="_ _14"> </span>circuit<span class="_ _14"> </span>as<span class="_ _14"> </span>part<span class="_ _14"> </span>of<span class="_ _14"> </span>the</div><div class="t m5 x1d h26 y606 ff7 fs19 fc1 sc0 ls0 ws0">forwarding<span class="_"> </span>and<span class="_"> </span>pipeline<span class="_"> </span>control<span class="_"> </span>logic.</div></div><div class="pi" data-data='{"ctm":[2.000000,0.000000,0.000000,2.000000,0.000000,0.000000]}'></div></div>
