<div id="pf3eb" class="pf w2 h11" data-page-no="3eb"><div class="pc pc3eb w2 h11"><img class="bi x0 y0 w1 h1" alt="" src="csapp/bg3eb.png"/><div class="t m5 x14 h28 y9b ffe fs1e fc2 sc0 ls0 ws0">1002<span class="_ _1b"> </span><span class="ff6 fs1f">Chapter<span class="_ _10"> </span>11<span class="_ _3d"> </span>Network<span class="_ _10"> </span>Programming</span></div><div class="t m5 x124 h26 ye7 ff7 fs19 fc2 sc0 ls0 ws0">D<span class="_ _3"></span>.<span class="_ _23"> </span>Consult<span class="_ _16"> </span>the<span class="_ _11"> </span>HTTP/1.1<span class="_ _16"> </span>standard<span class="_ _11"> </span>in<span class="_ _16"> </span>RFC<span class="_ _11"> </span>2616<span class="_ _16"> </span>to<span class="_ _11"> </span>determine<span class="_ _16"> </span>the<span class="_ _11"> </span>meaning<span class="_ _16"> </span>of</div><div class="t m5 x4f h26 y2a7 ff7 fs19 fc2 sc0 ls0 ws0">each<span class="_"> </span>header<span class="_"> </span>in<span class="_ _11"> </span>the<span class="_"> </span>HTTP<span class="_ _11"> </span>request<span class="_"> </span>from<span class="_ _11"> </span>your<span class="_"> </span>browser.<span class="_"> </span>Y<span class="_ _3"></span>ou<span class="_"> </span>can<span class="_ _11"> </span>obtain<span class="_"> </span>RFC</div><div class="t m5 x4f h26 y2a8 ff7 fs19 fc2 sc0 ls0 ws0">2616<span class="_"> </span>from<span class="_"> </span>www.rfc-editor.org/rfc.html.</div><div class="t m5 x1d h73 y7e53 ffe fs1e fc6 sc0 ls0 ws0">11.7<span class="_ _23"> </span><span class="ff10 fs19">◆◆</span></div><div class="t m5 x1d h26 y7e54 ff7 fs19 fc1 sc0 ls0 ws0">Extend<span class="_ _15"> </span><span class="ff9">T<span class="_ _1"></span>iny<span class="_ _21"> </span><span class="ff7">so<span class="_ _21"> </span>that<span class="_ _15"> </span>it<span class="_ _21"> </span>serves<span class="_ _21"> </span>MPG<span class="_ _21"> </span>video<span class="_ _21"> </span>ﬁles<span class="_ _1"></span>.<span class="_ _21"> </span>Check<span class="_ _21"> </span>your<span class="_ _21"> </span>work<span class="_ _21"> </span>using<span class="_ _21"> </span>a<span class="_ _15"> </span>real</span></span></div><div class="t m5 x1d h26 y7e55 ff7 fs19 fc1 sc0 ls0 ws0">browser.</div><div class="t m5 x1d h73 y7e56 ffe fs1e fc6 sc0 ls0 ws0">11.8<span class="_ _23"> </span><span class="ff10 fs19">◆◆</span></div><div class="t m5 x1d h26 y7e57 ff7 fs19 fc1 sc0 ls0 ws0">Modify<span class="_"> </span><span class="ff9">T<span class="_ _3"></span>iny<span class="_ _11"> </span><span class="ff7">so<span class="_"> </span>that<span class="_"> </span>it<span class="_"> </span>reaps<span class="_"> </span>CGI<span class="_"> </span>children<span class="_ _11"> </span>inside<span class="_"> </span>a<span class="_"> </span>SIGCHLD<span class="_"> </span>handler<span class="_"> </span>instead<span class="_ _11"> </span>of</span></span></div><div class="t m5 x1d h26 y7e58 ff7 fs19 fc1 sc0 ls0 ws0">explicitly<span class="_"> </span>waiting<span class="_"> </span>for<span class="_"> </span>them<span class="_"> </span>to<span class="_"> </span>terminate<span class="_ _1"></span>.</div><div class="t m5 x1d h73 y7e59 ffe fs1e fc6 sc0 ls0 ws0">11.9<span class="_ _23"> </span><span class="ff10 fs19">◆◆</span></div><div class="t m5 x1d h26 y7e5a ff7 fs19 fc1 sc0 ls0 ws0">Modify<span class="_ _13"> </span><span class="ff9">T<span class="_ _3"></span>iny<span class="_ _13"> </span><span class="ff7">so<span class="_ _13"> </span>that<span class="_ _13"> </span>when<span class="_ _13"> </span>it<span class="_ _13"> </span>serves<span class="_ _13"> </span>static<span class="_ _13"> </span>content,<span class="_ _13"> </span>it<span class="_ _13"> </span>copies<span class="_ _13"> </span>the<span class="_ _13"> </span>requested<span class="_ _6"> </span>ﬁle<span class="_ _13"> </span>to<span class="_ _13"> </span>the</span></span></div><div class="t m5 x1d h26 y7e5b ff7 fs19 fc1 sc0 ls0 ws0">connected<span class="_"> </span>descriptor<span class="_ _13"> </span>using<span class="_"> </span><span class="ffd">malloc</span>,<span class="_"> </span><span class="ffd">rio_readn</span>,<span class="_ _13"> </span>and<span class="_"> </span><span class="ffd">rio_writen</span>,<span class="_"> </span>instead<span class="_ _13"> </span>of<span class="_"> </span><span class="ffd">mmap</span></div><div class="t m5 x1d h26 y7e5c ff7 fs19 fc1 sc0 ls0 ws0">and<span class="_"> </span><span class="ffd">rio_writen</span>.</div><div class="t m5 x1d h73 y7e5d ffe fs1e fc6 sc0 ls0 ws0">11.10<span class="_ _23"> </span><span class="ff10 fs19">◆◆</span></div><div class="t m5 x124 h26 y7e5e ff7 fs19 fc1 sc0 ls0 ws0">A.<span class="_ _1f"> </span>Write<span class="_ _13"> </span>an<span class="_ _6"> </span>HTML<span class="_ _13"> </span>form<span class="_ _6"> </span>for<span class="_ _13"> </span>the<span class="_ _13"> </span>CGI<span class="_ _6"> </span><span class="ffd">adder<span class="_ _13"> </span></span>function<span class="_ _6"> </span>in<span class="_ _13"> </span>F<span class="_ _1"></span>igure<span class="_ _13"> </span>11.27.<span class="_ _13"> </span>Y<span class="_ _7"></span>our<span class="_ _13"> </span>form</div><div class="t m5 x4f h26 y7e5f ff7 fs19 fc1 sc0 ls0 ws0">should<span class="_ _11"> </span>include<span class="_ _16"> </span>two<span class="_ _11"> </span>text<span class="_ _11"> </span>boxes<span class="_ _16"> </span>that<span class="_ _11"> </span>users<span class="_ _11"> </span>ﬁll<span class="_ _16"> </span>in<span class="_ _11"> </span>with<span class="_ _11"> </span>the<span class="_ _16"> </span>two<span class="_ _11"> </span>numbers<span class="_ _11"> </span>to<span class="_ _16"> </span>be</div><div class="t m5 x4f h26 y7e60 ff7 fs19 fc1 sc0 ls0 ws0">added<span class="_"> </span>together.<span class="_"> </span>Y<span class="_ _7"></span>our<span class="_"> </span>form<span class="_"> </span>should<span class="_"> </span>request<span class="_"> </span>content<span class="_"> </span>using<span class="_"> </span>the<span class="_"> </span>GET<span class="_"> </span>method.</div><div class="t m5 x124 h26 y7e61 ff7 fs19 fc1 sc0 ls0 ws0">B<span class="_ _3"></span>.<span class="_ _1d"> </span>Check<span class="_ _14"> </span>your<span class="_ _14"> </span>work<span class="_ _14"> </span>by<span class="_ _14"> </span>using<span class="_ _16"> </span>a<span class="_ _14"> </span>real<span class="_ _14"> </span>browser<span class="_ _14"> </span>to<span class="_ _14"> </span>request<span class="_ _14"> </span>the<span class="_ _14"> </span>form<span class="_ _14"> </span>from<span class="_ _14"> </span><span class="ff9">T<span class="_ _3"></span>iny<span class="ff7">,</span></span></div><div class="t m5 x4f h26 y7e62 ff7 fs19 fc1 sc0 ls0 ws0">submit<span class="_ _21"> </span>the<span class="_ _21"> </span>ﬁlled-in<span class="_ _f"> </span>form<span class="_ _21"> </span>to<span class="_ _f"> </span><span class="ff9">T<span class="_ _3"></span>iny<span class="ff7">,<span class="_ _e"> </span>and<span class="_ _15"> </span>then<span class="_ _f"> </span>display<span class="_ _21"> </span>the<span class="_ _f"> </span>dynamic<span class="_ _21"> </span>content</span></span></div><div class="t m5 x4f h26 y7e63 ff7 fs19 fc1 sc0 ls0 ws0">generated<span class="_"> </span>by<span class="_"> </span><span class="ffd">adder</span>.</div><div class="t m5 x1d h73 y7e64 ffe fs1e fc6 sc0 ls0 ws0">11.11<span class="_ _23"> </span><span class="ff10 fs19">◆◆</span></div><div class="t m5 x1d h26 y7e65 ff7 fs19 fc1 sc0 ls0 ws0">Extend<span class="_ _13"> </span><span class="ff9">T<span class="_ _3"></span>iny<span class="_ _6"> </span><span class="ff7">to<span class="_ _13"> </span>support<span class="_ _13"> </span>the<span class="_ _6"> </span>HTTP<span class="_ _13"> </span>HEAD<span class="_ _13"> </span>method.<span class="_ _6"> </span>Check<span class="_ _13"> </span>your<span class="_ _6"> </span>work<span class="_ _13"> </span>using<span class="_ _13"> </span></span>telnet</span></div><div class="t m5 x1d h26 y7e66 ff7 fs19 fc1 sc0 ls0 ws0">as<span class="_"> </span>a<span class="_"> </span>W<span class="_ _3"></span>eb<span class="_"> </span>client.</div><div class="t m5 x1d h73 y7e67 ffe fs1e fc6 sc0 ls0 ws0">11.12<span class="_ _23"> </span><span class="ff10 fs19">◆◆◆</span></div><div class="t m5 x1d h26 y7e68 ff7 fs19 fc1 sc0 ls0 ws0">Extend<span class="_ _15"> </span><span class="ff9">T<span class="_ _3"></span>iny<span class="_ _21"> </span><span class="ff7">so<span class="_ _15"> </span>that<span class="_ _15"> </span>it<span class="_ _21"> </span>serves<span class="_ _15"> </span>dynamic<span class="_ _15"> </span>content<span class="_ _21"> </span>requested<span class="_ _15"> </span>by<span class="_ _15"> </span>the<span class="_ _21"> </span>HTTP<span class="_ _15"> </span>POST</span></span></div><div class="t m5 x1d h26 y7e69 ff7 fs19 fc1 sc0 ls0 ws0">method.<span class="_"> </span>Check<span class="_"> </span>your<span class="_"> </span>work<span class="_"> </span>using<span class="_"> </span>your<span class="_"> </span>favorite<span class="_"> </span>W<span class="_ _3"></span>eb<span class="_"> </span>browser.</div><div class="t m5 x1d h73 y7e6a ffe fs1e fc6 sc0 ls0 ws0">11.13<span class="_ _23"> </span><span class="ff10 fs19">◆◆◆</span></div><div class="t m5 x1d h26 y7e6b ff7 fs19 fc1 sc0 ls0 ws0">Modify<span class="_ _21"> </span><span class="ff9">T<span class="_ _1"></span>iny<span class="_ _21"> </span><span class="ff7">so<span class="_ _21"> </span>that<span class="_ _f"> </span>it<span class="_ _21"> </span>deals<span class="_ _f"> </span>cleanly<span class="_ _21"> </span>(without<span class="_ _f"> </span>terminating)<span class="_ _21"> </span>with<span class="_ _f"> </span>the<span class="_ _21"> </span>SIGPIPE</span></span></div><div class="t m5 x1d h26 y7e6c ff7 fs19 fc1 sc0 ls0 ws0">signals<span class="_ _13"> </span>and<span class="_"> </span>EPIPE<span class="_ _13"> </span>errors<span class="_ _13"> </span>that<span class="_ _13"> </span>occur<span class="_"> </span>when<span class="_ _13"> </span>the<span class="_ _13"> </span><span class="ffd">write<span class="_ _10"> </span></span>function<span class="_ _13"> </span>attempts<span class="_ _13"> </span>to<span class="_ _13"> </span>write<span class="_"> </span>to</div><div class="t m5 x1d h26 y7e6d ff7 fs19 fc1 sc0 ls0 ws0">a<span class="_"> </span>prematurely<span class="_"> </span>closed<span class="_"> </span>connection.</div><div class="t m5 x1d h29 y7e6e ffe fs14 fc1 sc0 ls0 ws0">Solutions<span class="_"> </span>to<span class="_"> </span>Practice<span class="_"> </span>Problems</div><div class="t m5 x1d h28 y7e6f ffe fs1e fc6 sc0 ls0 ws0">Solution<span class="_"> </span>to<span class="_"> </span>Problem<span class="_"> </span>11.1<span class="_ _e"> </span><span class="fs16">(page<span class="_"> </span>963)</span></div><div class="t m5 x1d h31 y7e70 ff7 fs21 fc2 sc0 ls0 ws0">Dotted-decimal<span class="_"> </span>address<span class="_ _26"> </span>Hex<span class="_"> </span>address</div><div class="t m5 x1d h2d y7e71 ffd fs1e fc2 sc0 ls0 ws0">107.212.122.205<span class="_ _1b3"> </span>0x6BD47ACD</div><div class="t m5 x1d h2d y7e72 ffd fs1e fc2 sc0 ls0 ws0">64.12.149.13<span class="_ _31"> </span>0x400C950D</div><div class="t m5 x1d h2d y7e73 ffd fs1e fc2 sc0 ls0 ws0">107.212.96.29<span class="_ _2d"> </span>0x6BD4601D</div><div class="t m5 x1d h2d y7e74 ffd fs1e fc2 sc0 ls0 ws0">[0.0].[0.128]<span class="_ _2d"> </span>0x00000080</div></div><div class="pi" data-data='{"ctm":[2.000000,0.000000,0.000000,2.000000,0.000000,0.000000]}'></div></div>
