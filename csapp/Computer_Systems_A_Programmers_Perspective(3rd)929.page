<div id="pf3a1" class="pf w2 h11" data-page-no="3a1"><div class="pc pc3a1 w2 h11"><img class="bi x0 y0 w1 h1" alt="" src="csapp/bg3a1.png"/><div class="t m5 x14 h28 y9b ffe fs1e fc2 sc0 ls0 ws0">928<span class="_ _1b"> </span><span class="ff6 fs1f">Chapter<span class="_ _10"> </span>10<span class="_ _3d"> </span>System-Level<span class="_ _10"> </span>I/O</span></div><div class="t m5 x28 h2a y257 fff fs1c fc2 sc0 ls0 ws0">Aside<span class="_ _1b"> </span><span class="ff6 fs19">End<span class="_ _11"> </span>of<span class="_ _11"> </span>line<span class="_ _11"> </span>(EOL)<span class="_ _16"> </span>indicators</span></div><div class="t m5 x28 h2b y2d0 ff7 fs1e fc2 sc0 ls0 ws0">One<span class="_ _13"> </span>of<span class="_"> </span>the<span class="_ _13"> </span>clumsy<span class="_ _13"> </span>aspects<span class="_ _13"> </span>of<span class="_ _13"> </span>working<span class="_"> </span>with<span class="_ _13"> </span>text<span class="_ _13"> </span>ﬁles<span class="_ _13"> </span>is<span class="_"> </span>that<span class="_ _13"> </span>different<span class="_ _13"> </span>systems<span class="_ _13"> </span>use<span class="_ _13"> </span>different<span class="_"> </span>characters<span class="_ _13"> </span>to</div><div class="t m5 x28 h2b y2d1 ff7 fs1e fc2 sc0 ls0 ws0">mark<span class="_ _13"> </span>the<span class="_ _6"> </span>end<span class="_ _13"> </span>of<span class="_ _13"> </span>a<span class="_ _6"> </span>line.<span class="_ _6"> </span>Linux<span class="_ _13"> </span>and<span class="_ _13"> </span>Mac<span class="_ _6"> </span>OS<span class="_ _13"> </span>X<span class="_ _13"> </span>use<span class="_ _6"> </span>’<span class="ffd">\n</span><span class="ls2d0">’(<span class="_ _8"></span><span class="ffd ls0">0xa<span class="ff7">),<span class="_ _13"> </span>which<span class="_ _13"> </span>is<span class="_ _6"> </span>the<span class="_ _13"> </span>ASCII<span class="_ _13"> </span>line<span class="_ _6"> </span>feed<span class="_ _13"> </span>(LF)<span class="_ _13"> </span>character<span class="_ _0"></span>.</span></span></span></div><div class="t m5 x28 h2b y2d2 ff7 fs1e fc2 sc0 ls0 ws0">However,<span class="_ _6"> </span>MS<span class="_ _13"> </span>W<span class="_ _0"></span>indows<span class="_ _13"> </span>and<span class="_ _6"> </span>Internet<span class="_ _13"> </span>protocols<span class="_ _6"> </span>such<span class="_ _13"> </span>as<span class="_ _6"> </span>HTTP<span class="_ _13"> </span>use<span class="_ _13"> </span>the<span class="_ _6"> </span>sequence<span class="_ _13"> </span>‘<span class="ffd">\r\n</span><span class="ls2d1">’(<span class="_ _8"></span><span class="ffd ls0">0xd<span class="_ _11"> </span>0xa<span class="ff7">),<span class="_ _13"> </span>which</span></span></span></div><div class="t m5 x28 h2b y2d3 ff7 fs1e fc2 sc0 ls0 ws0">is<span class="_"> </span>the<span class="_"> </span>ASCII<span class="_"> </span>carriage<span class="_ _10"> </span>return<span class="_ _10"> </span>(CR)<span class="_"> </span>character<span class="_ _10"> </span>followed<span class="_ _10"> </span>by<span class="_ _10"> </span>a<span class="_ _10"> </span>line<span class="_ _10"> </span>feed<span class="_ _10"> </span>(LF).<span class="_ _10"> </span>If<span class="_ _10"> </span>you<span class="_"> </span>create<span class="_ _10"> </span>a<span class="_ _10"> </span>ﬁle<span class="_ _11"> </span><span class="ffd">foo.txt</span></div><div class="t m5 x28 h2b y2d4 ff7 fs1e fc2 sc0 ls0 ws0">in<span class="_ _10"> </span>Windows<span class="_"> </span>and<span class="_ _11"> </span>then<span class="_ _10"> </span>view<span class="_ _11"> </span>it<span class="_ _11"> </span>in<span class="_ _11"> </span>a<span class="_"> </span>Linux<span class="_ _11"> </span>text<span class="_ _11"> </span>editor,<span class="_"> </span>you’ll<span class="_ _10"> </span>see<span class="_ _11"> </span>an<span class="_ _11"> </span>annoying<span class="_ _11"> </span><span class="ffd">^M<span class="_ _10"> </span></span>at<span class="_ _11"> </span>the<span class="_ _11"> </span>end<span class="_ _10"> </span>of<span class="_ _11"> </span>each<span class="_ _11"> </span>line<span class="_ _1"></span>,</div><div class="t m5 x28 h2b y2d5 ff7 fs1e fc2 sc0 ls0 ws0">which<span class="_ _11"> </span>is<span class="_ _16"> </span>how<span class="_ _16"> </span>Linux<span class="_ _11"> </span>tools<span class="_ _16"> </span>display<span class="_ _16"> </span>the<span class="_ _11"> </span>CR<span class="_ _16"> </span>character.<span class="_ _11"> </span>Y<span class="_ _3"></span>ou<span class="_ _16"> </span>can<span class="_ _11"> </span>remove<span class="_ _16"> </span>these<span class="_ _16"> </span>unwanted<span class="_ _11"> </span>CR<span class="_ _16"> </span>characters</div><div class="t m5 x28 h2b y2d6 ff7 fs1e fc2 sc0 ls0 ws0">from<span class="_"> </span><span class="ffd">foo.txt<span class="_ _10"> </span></span>in<span class="_"> </span>place<span class="_"> </span>by<span class="_"> </span>running<span class="_"> </span>the<span class="_"> </span>following<span class="_"> </span>command:</div><div class="t m5 x28 h2d yaec ffd fs1e fc2 sc0 ls0 ws0">linux&gt;<span class="_ _e"> </span><span class="ff13">perl<span class="_ _1f"> </span>-pi<span class="_ _1f"> </span>-e<span class="_ _e"> </span>&quot;s/\r\n/\n/g&quot;<span class="_ _1f"> </span>foo.txt</span></div><div class="t m5 x29 h26 y7723 ff7 fs19 fc2 sc0 ls0 ws0">least<span class="_ _16"> </span>two<span class="_ _16"> </span>entries:<span class="_ _16"> </span><span class="ffd">.<span class="_ _16"> </span></span>(dot)<span class="_ _16"> </span>is<span class="_ _16"> </span>a<span class="_ _16"> </span>link<span class="_ _16"> </span>to<span class="_ _16"> </span>the<span class="_ _16"> </span>directory<span class="_ _16"> </span>itself<span class="_ _1"></span>,<span class="_ _14"> </span>and<span class="_ _16"> </span><span class="ffd">..<span class="_ _16"> </span></span>(dot-dot)<span class="_ _16"> </span>is</div><div class="t m5 x29 h26 y7724 ff7 fs19 fc2 sc0 ls0 ws0">a<span class="_"> </span>link<span class="_"> </span>to<span class="_ _11"> </span>the<span class="_"> </span><span class="ffa">parent<span class="_ _11"> </span>directory<span class="_"> </span></span>in<span class="_"> </span>the<span class="_ _11"> </span>directory<span class="_"> </span>hierarchy<span class="_"> </span>(see<span class="_ _11"> </span>below).<span class="_"> </span>Y<span class="_ _3"></span>ou<span class="_ _11"> </span>can</div><div class="t m5 x29 h26 y7725 ff7 fs19 fc2 sc0 ls0 ws0">create<span class="_ _16"> </span>a<span class="_ _14"> </span>directory<span class="_ _16"> </span>with<span class="_ _14"> </span>the<span class="_ _16"> </span><span class="ffd">mkdir<span class="_ _16"> </span></span>command,<span class="_ _15"> </span>view<span class="_ _16"> </span>its<span class="_ _14"> </span>contents<span class="_ _16"> </span>with<span class="_ _14"> </span><span class="ffd">ls</span>,<span class="_ _14"> </span>and</div><div class="t m5 x29 h26 y7726 ff7 fs19 fc2 sc0 ls0 ws0">delete<span class="_"> </span>it<span class="_"> </span>with<span class="_"> </span><span class="ffd">rmdir</span>.</div><div class="t m5 x75 h3d y7727 ff14 fs26 fc6 sc0 ls0 ws0">.</div><div class="t m5 x29 h26 y7728 ff7 fs19 fc1 sc0 ls0 ws0">A<span class="_ _11"> </span><span class="ffa">socket<span class="_ _14"> </span></span>is<span class="_ _16"> </span>a<span class="_ _11"> </span>ﬁle<span class="_ _16"> </span>that<span class="_ _11"> </span>is<span class="_ _16"> </span>used<span class="_ _16"> </span>to<span class="_ _11"> </span>communicate<span class="_ _16"> </span>with<span class="_ _11"> </span>another<span class="_ _16"> </span>process<span class="_ _11"> </span>across<span class="_ _16"> </span>a</div><div class="t m5 x29 h26 y7729 ff7 fs19 fc1 sc0 ls0 ws0">network<span class="_"> </span>(Section<span class="_"> </span>11.4).</div><div class="t m5 x1d h26 y772a ff7 fs19 fc1 sc0 ls0 ws0">Other<span class="_ _15"> </span>ﬁle<span class="_ _21"> </span>types<span class="_ _15"> </span>include<span class="_ _21"> </span><span class="ffa">named<span class="_ _15"> </span>pipes</span>,<span class="_ _f"> </span><span class="ffa">symbolic<span class="_ _21"> </span>links</span>,<span class="_ _21"> </span>and<span class="_ _21"> </span><span class="ffa">character<span class="_ _21"> </span></span>and<span class="_ _21"> </span><span class="ffa">block</span></div><div class="t m5 x1d h26 y772b ffa fs19 fc1 sc0 ls0 ws0">devices<span class="ff7">,<span class="_"> </span>which<span class="_"> </span>are<span class="_"> </span>beyond<span class="_"> </span>our<span class="_"> </span>scope<span class="_ _1"></span>.</span></div><div class="t m5 x29 h26 y772c ff7 fs19 fc1 sc0 ls0 ws0">T<span class="_ _1"></span>he<span class="_ _16"> </span>Linux<span class="_ _16"> </span>kernel<span class="_ _11"> </span>organizes<span class="_ _16"> </span>all<span class="_ _16"> </span>ﬁles<span class="_ _11"> </span>in<span class="_ _16"> </span>a<span class="_ _16"> </span>single<span class="_ _11"> </span><span class="ffa">directory<span class="_ _16"> </span>hierarchy<span class="_ _11"> </span></span>anchored</div><div class="t m5 x1d h26 y772d ff7 fs19 fc1 sc0 ls0 ws0">by<span class="_ _13"> </span>the<span class="_"> </span><span class="ffa">root<span class="_ _13"> </span>directory<span class="_ _13"> </span></span>named<span class="_"> </span><span class="ffd">/<span class="_ _13"> </span></span>(slash).<span class="_ _13"> </span>Each<span class="_"> </span>ﬁle<span class="_ _13"> </span>in<span class="_ _13"> </span>the<span class="_"> </span>system<span class="_ _13"> </span>is<span class="_ _13"> </span>a<span class="_"> </span>direct<span class="_ _13"> </span>or<span class="_ _13"> </span>indirect</div><div class="t m5 x1d h26 y772e ff7 fs19 fc1 sc0 ls0 ws0">descendant<span class="_ _15"> </span>of<span class="_ _15"> </span>the<span class="_ _15"> </span>root<span class="_ _21"> </span>directory<span class="_ _3"></span>.<span class="_ _15"> </span>F<span class="_ _0"></span>igure<span class="_ _15"> </span>10.1<span class="_ _15"> </span>shows<span class="_ _15"> </span>a<span class="_ _21"> </span>portion<span class="_ _15"> </span>of<span class="_ _15"> </span>the<span class="_ _21"> </span>directory</div><div class="t m5 x1d h26 y772f ff7 fs19 fc1 sc0 ls0 ws0">hierarchy<span class="_"> </span>on<span class="_"> </span>our<span class="_"> </span>Linux<span class="_"> </span>system.</div><div class="t m5 x29 h26 y7730 ff7 fs19 fc1 sc0 ls0 ws0">As<span class="_ _f"> </span>part<span class="_ _e"> </span>of<span class="_ _21"> </span>its<span class="_ _e"> </span>context,<span class="_ _e"> </span>each<span class="_ _f"> </span>process<span class="_ _f"> </span>has<span class="_ _e"> </span>a<span class="_ _21"> </span><span class="ffa">current<span class="_ _e"> </span>working<span class="_ _21"> </span>directory<span class="_ _f"> </span></span>that</div><div class="t m5 x1d h26 y7731 ff7 fs19 fc1 sc0 ls0 ws0">identiﬁes<span class="_ _13"> </span>its<span class="_ _13"> </span>current<span class="_ _13"> </span>location<span class="_ _13"> </span>in<span class="_ _13"> </span>the<span class="_ _13"> </span>directory<span class="_ _6"> </span>hierarchy<span class="_ _3"></span>.<span class="_ _13"> </span>Y<span class="_ _3"></span>ou<span class="_ _13"> </span>can<span class="_ _13"> </span>change<span class="_ _13"> </span>the<span class="_ _13"> </span>shell’<span class="_ _0"></span>s</div><div class="t m5 x1d h26 y7732 ff7 fs19 fc1 sc0 ls0 ws0">current<span class="_"> </span>working<span class="_"> </span>directory<span class="_"> </span>with<span class="_"> </span>the<span class="_"> </span><span class="ffd">cd<span class="_ _10"> </span></span>command.</div><div class="t m5 x1d h70 y7733 ffcf fs27 fc1 sc0 ls0 ws0">bash</div><div class="t m5 x1d h70 y7734 ffcf fs27 fc1 sc0 ls0 ws0">bin/</div><div class="t m5 x66 h70 y7733 ffcf fs27 fc1 sc0 ls0 ws0">tty1<span class="_ _4f"> </span>group<span class="_ _46"> </span>passwd<span class="_ _46"> </span>droh/<span class="_ _26"> </span>bryant/</div><div class="t m5 x18a h70 y7735 ffcf fs27 fc1 sc0 ls0 ws0">stdio.h</div><div class="t m5 x8a h70 y7733 ffcf fs27 fc1 sc0 ls0 ws0">include/<span class="_ _26"> </span>bin/</div><div class="t m5 x66 h70 y7734 ffcf fs27 fc1 sc0 ls0 ws0">dev/<span class="_ _121"> </span>etc/</div><div class="t m5 xaa h70 y7736 ffcf fs27 fc1 sc0 ls0 ws0">/</div><div class="t m5 x1de h70 y7734 ffcf fs27 fc1 sc0 ls0 ws0">home/<span class="_ _29"> </span>usr/</div><div class="t m5 x1ae h70 y7735 ffcf fs27 fc1 sc0 ls0 ws0">hello.c<span class="_ _138"> </span>sys/<span class="_ _1b"> </span>vim</div><div class="t m5 x283 h70 y7737 ffcf fs27 fc1 sc0 ls0 ws0">unistd.h</div><div class="t m5 x1d h34 y4464 ffe fs16 fc6 sc0 ls0 ws0">Figure<span class="_ _15"> </span>10.1<span class="_ _c"> </span><span class="fc1">Portion<span class="_ _15"> </span>of<span class="_ _15"> </span>the<span class="_ _15"> </span>Linux<span class="_ _15"> </span>director<span class="_ _2"></span>y<span class="_ _14"> </span>hierarchy<span class="_ _1"></span>.<span class="_ _15"> </span><span class="ff6">A<span class="_ _15"> </span>trailing<span class="_ _15"> </span>slash<span class="_ _15"> </span>denotes<span class="_ _21"> </span>a</span></span></div><div class="t m5 x1d h34 y4465 ff6 fs16 fc1 sc0 ls0 ws0">directory<span class="_ _1"></span>.</div></div><div class="pi" data-data='{"ctm":[2.000000,0.000000,0.000000,2.000000,0.000000,0.000000]}'></div></div>
