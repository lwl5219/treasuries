<div id="pf2b8" class="pf w2 h11" data-page-no="2b8"><div class="pc pc2b8 w2 h11"><img class="bi x0 y0 w1 h1" alt="" src="csapp/bg2b8.png"/><div class="t m5 x5f h28 y9b ff6 fs1f fc2 sc0 ls0 ws0">Homework<span class="_ _10"> </span>Problems<span class="_ _1b"> </span><span class="ffe fs1e">695</span></div><div class="t m5 x72 h3d y2d1a ff14 fs26 fc6 sc0 ls0 ws0">.</div><div class="t m5 x26 h26 ye7 ffd fs19 fc1 sc0 ls0 ws0">buffer<span class="_ _10"> </span><span class="ff7">begins<span class="_"> </span>at<span class="_"> </span>memory<span class="_"> </span>address<span class="_"> </span>0.</span></div><div class="t m5 x72 h3d y2f35 ff14 fs26 fc6 sc0 ls0 ws0">.</div><div class="t m5 x26 h26 ye18 ff7 fs19 fc1 sc0 ls0 ws0">T<span class="_ _1"></span>he<span class="_"> </span>cache<span class="_"> </span>is<span class="_"> </span>initially<span class="_"> </span>empty<span class="_ _3"></span>.</div><div class="t m5 x72 h3d y5c85 ff14 fs26 fc6 sc0 ls0 ws0">.</div><div class="t m5 x26 h26 y11b9 ff7 fs19 fc1 sc0 ls0 ws0">T<span class="_ _1"></span>he<span class="_"> </span>only<span class="_ _13"> </span>memory<span class="_"> </span>accesses<span class="_ _13"> </span>are<span class="_ _13"> </span>to<span class="_"> </span>the<span class="_ _13"> </span>entries<span class="_"> </span>of<span class="_ _13"> </span>the<span class="_ _13"> </span>array<span class="_"> </span><span class="ffd">buffer</span>.<span class="_ _13"> </span>V<span class="_ _7"></span>ariables<span class="_"> </span><span class="ffd">i</span>,</div><div class="t m5 x26 h26 y5c86 ffd fs19 fc1 sc0 ls0 ws0">j<span class="ff7">,<span class="_"> </span></span>cptr<span class="ff7">,<span class="_"> </span>and<span class="_"> </span></span>iptr<span class="_ _10"> </span><span class="ff7">are<span class="_"> </span>stored<span class="_"> </span>in<span class="_"> </span>registers<span class="_ _1"></span>.</span></div><div class="t m5 x26 h26 y5c87 ff7 fs19 fc1 sc0 ls0 ws0">What<span class="_"> </span>percentage<span class="_"> </span>of<span class="_"> </span>writes<span class="_"> </span>in<span class="_"> </span>the<span class="_"> </span>following<span class="_"> </span>code<span class="_"> </span>will<span class="_"> </span>hit<span class="_"> </span>in<span class="_"> </span>the<span class="_"> </span>cache?</div><div class="t m5 x2c h2d y5c88 ff6 fs20 fc6 sc0 ls0 ws0">1<span class="_ _20"> </span><span class="ffd fs1e fc2">for<span class="_ _e"> </span>(j<span class="_ _1f"> </span>=<span class="_ _1f"> </span>639;<span class="_ _e"> </span>j<span class="_ _1f"> </span>&gt;=<span class="_ _e"> </span>0;<span class="_ _1f"> </span>j--)<span class="_ _1f"> </span>{</span></div><div class="t m5 x2c h2d y5c89 ff6 fs20 fc6 sc0 ls0 ws0">2<span class="_ _70"> </span><span class="ffd fs1e fc2">for<span class="_ _e"> </span>(i<span class="_ _1f"> </span>=<span class="_ _1f"> </span>479;<span class="_ _e"> </span>i<span class="_ _1f"> </span>&gt;=<span class="_ _e"> </span>0;<span class="_ _1f"> </span>i--){</span></div><div class="t m5 x2c h2d y5c8a ff6 fs20 fc6 sc0 ls0 ws0">3<span class="_ _d1"> </span><span class="ffd fs1e fc2">buffer[i][j].r<span class="_ _1f"> </span>=<span class="_ _e"> </span>0;</span></div><div class="t m5 x2c h2d y5c8b ff6 fs20 fc6 sc0 ls0 ws0">4<span class="_ _d1"> </span><span class="ffd fs1e fc2">buffer[i][j].g<span class="_ _1f"> </span>=<span class="_ _e"> </span>0;</span></div><div class="t m5 x2c h2d y5c8c ff6 fs20 fc6 sc0 ls0 ws0">5<span class="_ _d1"> </span><span class="ffd fs1e fc2">buffer[i][j].b<span class="_ _1f"> </span>=<span class="_ _e"> </span>0;</span></div><div class="t m5 x2c h2d y5c8d ff6 fs20 fc6 sc0 ls0 ws0">6<span class="_ _d1"> </span><span class="ffd fs1e fc2">buffer[i][j].a<span class="_ _1f"> </span>=<span class="_ _e"> </span>0;</span></div><div class="t m5 x2c h2d y5c8e ff6 fs20 fc6 sc0 ls0 ws0">7<span class="_ _70"> </span><span class="ffd fs1e fc2">}</span></div><div class="t m5 x2c h2d y5c8f ff6 fs20 fc6 sc0 ls0 ws0">8<span class="_ _20"> </span><span class="ffd fs1e fc2">}</span></div><div class="t m5 x17 h28 y5c90 ffe fs1e fc6 sc0 ls0 ws0">6.42</div><div class="t m5 x153 h73 y5c91 ff10 fs19 fc6 sc0 ls0 ws0">◆◆</div><div class="t m5 x17 h26 y5c92 ff7 fs19 fc1 sc0 ls0 ws0">Given<span class="_ _13"> </span>the<span class="_ _6"> </span>assumptions<span class="_ _13"> </span>in<span class="_ _6"> </span>Problem<span class="_ _13"> </span>6.41,<span class="_ _13"> </span>what<span class="_ _13"> </span>percentage<span class="_ _6"> </span>of<span class="_ _13"> </span>writes<span class="_ _6"> </span>in<span class="_ _13"> </span>the<span class="_ _13"> </span>following</div><div class="t m5 x17 h26 y5c93 ff7 fs19 fc1 sc0 ls0 ws0">code<span class="_"> </span>will<span class="_"> </span>hit<span class="_"> </span>in<span class="_"> </span>the<span class="_"> </span>cache?</div><div class="t m5 x2c h2d y5c94 ff6 fs20 fc6 sc0 ls0 ws0">1<span class="_ _20"> </span><span class="ffd fs1e fc2">char<span class="_ _e"> </span>*cptr<span class="_ _1f"> </span>=<span class="_ _1f"> </span>(char<span class="_ _e"> </span>*)<span class="_ _1f"> </span>buffer;</span></div><div class="t m5 x2c h2d y5c95 ff6 fs20 fc6 sc0 ls0 ws0">2<span class="_ _20"> </span><span class="ffd fs1e fc2">for<span class="_ _e"> </span>(;<span class="_ _1f"> </span>cptr<span class="_ _1f"> </span>&lt;<span class="_ _e"> </span>(((char<span class="_ _1f"> </span>*)<span class="_ _e"> </span>buffer)<span class="_ _1f"> </span>+<span class="_ _1f"> </span>640<span class="_ _e"> </span>*<span class="_ _1f"> </span>480<span class="_ _e"> </span>*<span class="_ _1f"> </span>4);<span class="_ _1f"> </span>cptr++)</span></div><div class="t m5 x2c h2d y5c96 ff6 fs20 fc6 sc0 ls0 ws0">3<span class="_ _70"> </span><span class="ffd fs1e fc2">*cptr<span class="_ _e"> </span>=<span class="_ _1f"> </span>0;</span></div><div class="t m5 x17 h28 y5c97 ffe fs1e fc6 sc0 ls0 ws0">6.43</div><div class="t m5 x153 h73 y5c98 ff10 fs19 fc6 sc0 ls0 ws0">◆◆</div><div class="t m5 x17 h26 y5c99 ff7 fs19 fc1 sc0 ls0 ws0">Given<span class="_ _13"> </span>the<span class="_ _6"> </span>assumptions<span class="_ _13"> </span>in<span class="_ _6"> </span>Problem<span class="_ _13"> </span>6.41,<span class="_ _13"> </span>what<span class="_ _13"> </span>percentage<span class="_ _6"> </span>of<span class="_ _13"> </span>writes<span class="_ _6"> </span>in<span class="_ _13"> </span>the<span class="_ _13"> </span>following</div><div class="t m5 x17 h26 y5c9a ff7 fs19 fc1 sc0 ls0 ws0">code<span class="_"> </span>will<span class="_"> </span>hit<span class="_"> </span>in<span class="_"> </span>the<span class="_"> </span>cache?</div><div class="t m5 x2c h2d y5b5e ff6 fs20 fc6 sc0 ls0 ws0">1<span class="_ _20"> </span><span class="ffd fs1e fc2">int<span class="_ _e"> </span>*iptr<span class="_ _1f"> </span>=<span class="_ _1f"> </span>(int<span class="_ _e"> </span>*)buffer;</span></div><div class="t m5 x2c h2d y5c9b ff6 fs20 fc6 sc0 ls0 ws0">2<span class="_ _20"> </span><span class="ffd fs1e fc2">for<span class="_ _e"> </span>(;<span class="_ _1f"> </span>iptr<span class="_ _1f"> </span>&lt;<span class="_ _e"> </span>((int<span class="_ _1f"> </span>*)buffer<span class="_ _e"> </span>+<span class="_ _1f"> </span>640*480);<span class="_ _1f"> </span>iptr++)</span></div><div class="t m5 x2c h2d y5c9c ff6 fs20 fc6 sc0 ls0 ws0">3<span class="_ _70"> </span><span class="ffd fs1e fc2">*iptr<span class="_ _e"> </span>=<span class="_ _1f"> </span>0;</span></div><div class="t m5 x17 h28 y5c9d ffe fs1e fc6 sc0 ls0 ws0">6.44</div><div class="t m5 x153 h73 y5c9e ff10 fs19 fc6 sc0 ls0 ws0">◆◆◆</div><div class="t m5 x17 h26 y5c9f ff7 fs19 fc1 sc0 ls0 ws0">Download<span class="_"> </span>the<span class="_ _11"> </span><span class="ffd">mountain<span class="_ _11"> </span></span>program<span class="_ _11"> </span>from<span class="_ _11"> </span>the<span class="_"> </span>CS:APP<span class="_ _11"> </span>W<span class="_ _1"></span>eb<span class="_"> </span>site<span class="_ _11"> </span>and<span class="_ _11"> </span>run<span class="_ _11"> </span>it<span class="_"> </span>on<span class="_ _11"> </span>your</div><div class="t m5 x17 h26 y5ca0 ff7 fs19 fc1 sc0 ls0 ws0">favorite<span class="_ _16"> </span>PC/Linux<span class="_ _11"> </span>system.<span class="_ _16"> </span>Use<span class="_ _16"> </span>the<span class="_ _11"> </span>results<span class="_ _16"> </span>to<span class="_ _16"> </span>estimate<span class="_ _11"> </span>the<span class="_ _16"> </span>sizes<span class="_ _16"> </span>of<span class="_ _11"> </span>the<span class="_ _16"> </span>caches<span class="_ _16"> </span>on</div><div class="t m5 x17 h26 y5ca1 ff7 fs19 fc1 sc0 ls0 ws0">your<span class="_"> </span>system.</div><div class="t m5 x17 h73 y5ca2 ffe fs1e fc6 sc0 ls0 ws0">6.45<span class="_ _23"> </span><span class="ff10 fs19">◆◆◆◆</span></div><div class="t m5 x17 h26 y5ca3 ff7 fs19 fc1 sc0 ls0 ws0">In<span class="_ _11"> </span>this<span class="_ _16"> </span>assignment,<span class="_ _16"> </span>you<span class="_ _16"> </span>will<span class="_ _11"> </span>apply<span class="_ _16"> </span>the<span class="_ _11"> </span>concepts<span class="_ _16"> </span>you<span class="_ _16"> </span>learned<span class="_ _11"> </span>in<span class="_ _16"> </span>Chapters<span class="_ _16"> </span>5<span class="_ _11"> </span>and<span class="_ _16"> </span>6</div><div class="t m5 x17 h26 y5ca4 ff7 fs19 fc1 sc0 ls0 ws0">to<span class="_"> </span>the<span class="_ _11"> </span>problem<span class="_"> </span>of<span class="_ _11"> </span>optimizing<span class="_"> </span>code<span class="_ _11"> </span>for<span class="_ _11"> </span>a<span class="_"> </span>memory-intensive<span class="_ _11"> </span>application.<span class="_"> </span>Consider</div><div class="t m5 x17 h46 y5ca5 ff7 fs19 fc1 sc0 ls0 ws0">a<span class="_"> </span>procedure<span class="_"> </span>to<span class="_"> </span>copy<span class="_"> </span>and<span class="_"> </span>transpose<span class="_"> </span>the<span class="_"> </span>elements<span class="_"> </span>of<span class="_ _11"> </span>an<span class="_"> </span><span class="ff11">N<span class="_"> </span><span class="ff12">×<span class="_ _13"></span></span>N<span class="_ _14"> </span></span>matrix<span class="_"> </span>of<span class="_ _11"> </span>type<span class="_"> </span><span class="ffd">int</span>.</div><div class="t m5 x17 h26 y5ca6 ff7 fs19 fc1 sc0 ls0 ws0">T<span class="_ _1"></span>hat<span class="_ _21"> </span>is<span class="_ _0"></span>,<span class="_ _f"> </span>for<span class="_ _21"> </span>source<span class="_ _21"> </span>matrix<span class="_ _f"> </span><span class="ff11">S<span class="_ _e"> </span></span>and<span class="_ _15"> </span>destination<span class="_ _21"> </span>matrix<span class="_ _f"> </span><span class="ff11">D<span class="_ _2"></span></span>,<span class="_ _f"> </span>we<span class="_ _f"> </span>want<span class="_ _21"> </span>to<span class="_ _21"> </span>copy<span class="_ _21"> </span>each</div><div class="t m5 x17 h26 y5ca7 ff7 fs19 fc1 sc0 ls0 ws0">element<span class="_"> </span><span class="ff11">s</span></div><div class="t m5 x1d4 h50 y5ca8 ff11 fs25 fc1 sc0 ls176 ws0">i,j</div><div class="t m5 x1a7 h26 y3515 ff7 fs19 fc1 sc0 ls0 ws0">to<span class="_"> </span><span class="ff11">d</span></div><div class="t m5 x1d5 h50 y5ca8 ff11 fs25 fc1 sc0 ls177 ws0">j,<span class="_ _1"></span>i</div><div class="t m5 x10c h26 y3515 ff7 fs19 fc1 sc0 ls0 ws0">.<span class="_"> </span>T<span class="_ _1"></span>his<span class="_"> </span>code<span class="_"> </span>can<span class="_"> </span>be<span class="_"> </span>written<span class="_"> </span>with<span class="_"> </span>a<span class="_"> </span>simple<span class="_"> </span>loop,</div><div class="t m5 x2c h2d y587 ff6 fs20 fc6 sc0 ls0 ws0">1<span class="_ _1c"> </span><span class="ffd fs1e fc2">void<span class="_ _1f"> </span>transpose(int<span class="_ _e"> </span>*dst,<span class="_ _1f"> </span>int<span class="_ _1f"> </span>*src,<span class="_ _e"> </span>int<span class="_ _1f"> </span>dim)</span></div><div class="t m5 x2c h2d y7a6 ff6 fs20 fc6 sc0 ls0 ws0">2<span class="_ _1c"> </span><span class="ffd fs1e fc2">{</span></div><div class="t m5 x2c h2d y15bf ff6 fs20 fc6 sc0 ls0 ws0">3<span class="_ _20"> </span><span class="ffd fs1e fc2">int<span class="_ _e"> </span>i,<span class="_ _1f"> </span>j;</span></div><div class="t m5 x2c h2e y1db4 ff6 fs20 fc6 sc0 ls0 ws0">4</div></div><div class="pi" data-data='{"ctm":[2.000000,0.000000,0.000000,2.000000,0.000000,0.000000]}'></div></div>
