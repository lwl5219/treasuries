<div id="pf31c" class="pf w2 h11" data-page-no="31c"><div class="pc pc31c w2 h11"><img class="bi x0 y0 w1 h1" alt="" src="csapp/bg31c.png"/><div class="t m5 x1e0 h28 y9b ff6 fs1f fc2 sc0 ls0 ws0">Section<span class="_ _10"> </span>8.5<span class="_ _60"> </span>Signals<span class="_ _3e"> </span><span class="ffe fs1e">795</span></div><div class="t m5 x17 h26 y9c ff7 fs19 fc2 sc0 ls0 ws0">delivered,<span class="_ _16"> </span>but<span class="_ _11"> </span>the<span class="_ _16"> </span>resulting<span class="_ _11"> </span>pending<span class="_ _11"> </span>signal<span class="_ _16"> </span>will<span class="_ _11"> </span>not<span class="_ _16"> </span>be<span class="_ _11"> </span>received<span class="_ _16"> </span>until<span class="_ _11"> </span>the<span class="_ _16"> </span>process</div><div class="t m5 x17 h26 y409 ff7 fs19 fc2 sc0 ls0 ws0">unblocks<span class="_"> </span>the<span class="_"> </span>signal.</div><div class="t m5 x26 h26 y40a ff7 fs19 fc2 sc0 ls0 ws0">A<span class="_"> </span>pending<span class="_ _13"> </span>signal<span class="_"> </span>is<span class="_"> </span>received<span class="_ _13"> </span>at<span class="_"> </span>most<span class="_ _13"> </span>once.<span class="_ _13"> </span>F<span class="_ _1"></span>or<span class="_"> </span>each<span class="_"> </span>process<span class="_ _3"></span>,<span class="_"> </span>the<span class="_"> </span>kernel<span class="_ _13"> </span>main-</div><div class="t m5 x17 h26 y40b ff7 fs19 fc2 sc0 ls0 ws0">tains<span class="_ _11"> </span>the<span class="_ _11"> </span>set<span class="_ _11"> </span>of<span class="_ _16"> </span>pending<span class="_ _11"> </span>signals<span class="_ _11"> </span>in<span class="_ _11"> </span>the<span class="_ _16"> </span><span class="ffd">pending<span class="_ _11"> </span></span>bit<span class="_ _11"> </span>vector,<span class="_ _11"> </span>and<span class="_ _11"> </span>the<span class="_ _11"> </span>set<span class="_ _11"> </span>of<span class="_ _16"> </span>blocked</div><div class="t m5 x17 h26 y67ec ff7 fs19 fc2 sc0 ls0 ws0">signals<span class="_ _16"> </span>in<span class="_ _14"> </span>the<span class="_ _16"> </span><span class="ffd">blocked<span class="_ _16"> </span></span>bit<span class="_ _14"> </span>vector.</div><div class="t m5 x10e h3c y67ed ff7 fs25 fc2 sc0 ls0 ws0">1</div><div class="t m5 x1d7 h26 y67ee ff7 fs19 fc2 sc0 ls0 ws0">T<span class="_ _1"></span>he<span class="_ _14"> </span>kernel<span class="_ _16"> </span>sets<span class="_ _14"> </span>bit<span class="_ _16"> </span><span class="ff11">k<span class="_ _15"> </span></span>in<span class="_ _16"> </span><span class="ffd">pending<span class="_ _14"> </span></span>whenever<span class="_ _16"> </span>a</div><div class="t m5 x17 h26 y67ef ff7 fs19 fc2 sc0 ls0 ws0">signal<span class="_"> </span>of<span class="_"> </span>type<span class="_"> </span><span class="ff11">k<span class="_ _11"> </span></span>is<span class="_"> </span>delivered<span class="_"> </span>and<span class="_"> </span>clears<span class="_"> </span>bit<span class="_"> </span><span class="ff11">k<span class="_ _16"> </span></span>in<span class="_"> </span><span class="ffd">pending<span class="_ _10"> </span></span>whenever<span class="_"> </span>a<span class="_"> </span>signal<span class="_"> </span>of<span class="_"> </span>type</div><div class="t m5 x17 h26 y67f0 ff11 fs19 fc2 sc0 ls0 ws0">k<span class="_ _11"> </span><span class="ff7">is<span class="_"> </span>received.</span></div><div class="t m5 x17 h41 y67f1 ffe fs29 fc2 sc0 ls0 ws0">8.5.2<span class="_ _48"> </span><span class="fs19">Sending<span class="_"> </span>Signals</span></div><div class="t m5 x17 h26 y67f2 ff7 fs19 fc2 sc0 ls0 ws0">Unix<span class="_ _11"> </span>systems<span class="_ _16"> </span>provide<span class="_ _11"> </span>a<span class="_ _11"> </span>number<span class="_ _16"> </span>of<span class="_ _11"> </span>mechanisms<span class="_ _16"> </span>for<span class="_ _11"> </span>sending<span class="_ _11"> </span>signals<span class="_ _16"> </span>to<span class="_ _11"> </span>processes<span class="_ _1"></span>.</div><div class="t m5 x17 h26 y67f3 ff7 fs19 fc2 sc0 ls0 ws0">All<span class="_"> </span>of<span class="_"> </span>the<span class="_"> </span>mechanisms<span class="_"> </span>rely<span class="_"> </span>on<span class="_"> </span>the<span class="_"> </span>notion<span class="_"> </span>of<span class="_"> </span>a<span class="_"> </span><span class="ffa">process<span class="_"> </span>group<span class="_ _0"></span><span class="ff7">.</span></span></div><div class="t m5 x17 h42 y67f4 ff6 fs29 fc6 sc0 ls0 ws0">Process<span class="_ _11"> </span>Groups</div><div class="t m5 x17 h26 y67f5 ff7 fs19 fc1 sc0 ls0 ws0">Every<span class="_ _f"> </span>process<span class="_ _f"> </span>belongs<span class="_ _f"> </span>to<span class="_ _e"> </span>exactly<span class="_ _21"> </span>one<span class="_ _f"> </span><span class="ffa">process<span class="_ _e"> </span>group<span class="_ _1"></span><span class="ff7">,<span class="_ _e"> </span>which<span class="_ _f"> </span>is<span class="_ _e"> </span>identiﬁed<span class="_ _21"> </span>by<span class="_ _f"> </span>a</span></span></div><div class="t m5 x17 h26 y67f6 ff7 fs19 fc1 sc0 ls0 ws0">positive<span class="_ _13"> </span>integer<span class="_ _6"> </span><span class="ffa">process<span class="_ _13"> </span>group<span class="_ _6"> </span>ID<span class="_ _0"></span><span class="ff7 ls283">.T<span class="_ _80"></span>h<span class="_ _8"></span>e<span class="ffd ls0">getpgrp<span class="_ _13"> </span><span class="ff7">function<span class="_ _6"> </span>returns<span class="_ _13"> </span>the<span class="_ _6"> </span>process<span class="_ _13"> </span>group</span></span></span></span></div><div class="t m5 x17 h26 y67f7 ff7 fs19 fc1 sc0 ls0 ws0">ID<span class="_"> </span>of<span class="_"> </span>the<span class="_"> </span>current<span class="_"> </span>process<span class="_ _1"></span>.</div><div class="t m5 x31 h2d y67f8 ffd fs1e fc2 sc0 ls0 ws0">#include<span class="_ _e"> </span>&lt;unistd.h&gt;</div><div class="t m5 x31 h2d y67f9 ffd fs1e fc2 sc0 ls0 ws0">pid_t<span class="_ _e"> </span>getpgrp(void);</div><div class="t m5 x228 hf1 y67fa ff7 fs1f fc2 sc0 ls0 ws0">Returns:<span class="_"> </span>process<span class="_"> </span>group<span class="_"> </span>ID<span class="_"> </span>of<span class="_"> </span>calling<span class="_"> </span>process</div><div class="t m5 x17 h26 y67fb ff7 fs19 fc2 sc0 ls0 ws0">By<span class="_ _14"> </span>default,<span class="_ _15"> </span>a<span class="_ _15"> </span>child<span class="_ _14"> </span>process<span class="_ _14"> </span>belongs<span class="_ _15"> </span>to<span class="_ _14"> </span>the<span class="_ _15"> </span>same<span class="_ _14"> </span>process<span class="_ _14"> </span>group<span class="_ _15"> </span>as<span class="_ _14"> </span>its<span class="_ _14"> </span>parent.<span class="_ _15"> </span>A</div><div class="t m5 x17 h26 y67fc ff7 fs19 fc2 sc0 ls0 ws0">process<span class="_ _14"> </span>can<span class="_ _14"> </span>change<span class="_ _14"> </span>the<span class="_ _14"> </span>process<span class="_ _15"> </span>group<span class="_ _14"> </span>of<span class="_ _14"> </span>itself<span class="_ _14"> </span>or<span class="_ _14"> </span>another<span class="_ _15"> </span>process<span class="_ _14"> </span>by<span class="_ _14"> </span>using<span class="_ _14"> </span>the</div><div class="t m5 x17 h26 y67fd ffd fs19 fc2 sc0 ls0 ws0">setpgid<span class="_ _10"> </span><span class="ff7">function:</span></div><div class="t m5 x31 h2d y67fe ffd fs1e fc2 sc0 ls0 ws0">#include<span class="_ _e"> </span>&lt;unistd.h&gt;</div><div class="t m5 x31 h2d y67ff ffd fs1e fc2 sc0 ls0 ws0">int<span class="_ _e"> </span>setpgid(pid_t<span class="_ _1f"> </span>pid,<span class="_ _1f"> </span>pid_t<span class="_ _e"> </span>pgid);</div><div class="t m5 xd2 hf2 y6800 ff7 fs1f fc2 sc0 ls0 ws0">Returns:<span class="_"> </span>0<span class="_"> </span>on<span class="_"> </span>success<span class="_ _1"></span>,<span class="_"> </span><span class="ff12">−</span>1<span class="_"> </span>on<span class="_"> </span>error</div><div class="t m5 x17 h26 y6801 ff7 fs19 fc2 sc0 lsd ws0">Th<span class="_ _2"></span>e<span class="_ _11"> </span><span class="ffd ls0">setpgid<span class="_ _10"> </span><span class="ff7">function<span class="_"> </span>changes<span class="_ _13"> </span>the<span class="_"> </span>process<span class="_"> </span>group<span class="_"> </span>of<span class="_ _13"> </span>process<span class="_"> </span></span>pid<span class="_ _10"> </span><span class="ff7">to<span class="_"> </span></span>pgid</span><span class="ls284">.I<span class="_ _4a"></span>f<span class="ffd ls0">pid<span class="_ _10"> </span><span class="ff7">is</span></span></span></div><div class="t m5 x17 h26 y6802 ff7 fs19 fc2 sc0 ls0 ws0">zero<span class="_ _1"></span>,<span class="_"> </span>the<span class="_ _13"> </span>PID<span class="_ _13"> </span>of<span class="_ _13"> </span>the<span class="_"> </span>current<span class="_ _13"> </span>process<span class="_ _13"> </span>is<span class="_ _13"> </span>used.<span class="_ _13"> </span>If<span class="_ _13"> </span><span class="ffd">pgid<span class="_ _10"> </span></span>is<span class="_ _13"> </span>zero<span class="_ _1"></span>,<span class="_"> </span>the<span class="_ _13"> </span>PID<span class="_ _13"> </span>of<span class="_ _13"> </span>the<span class="_"> </span>process</div><div class="t m5 x17 h26 y6803 ff7 fs19 fc2 sc0 ls0 ws0">speciﬁed<span class="_"> </span>by<span class="_ _13"> </span><span class="ffd">pid<span class="_ _10"> </span></span>is<span class="_"> </span>used<span class="_ _13"> </span>for<span class="_"> </span>the<span class="_"> </span>process<span class="_ _13"> </span>group<span class="_"> </span>ID<span class="_ _3"></span>.<span class="_"> </span>F<span class="_ _1"></span>or<span class="_"> </span>example<span class="_ _1"></span>,<span class="_"> </span>if<span class="_ _13"> </span>process<span class="_"> </span>15213<span class="_"> </span>is</div><div class="t m5 x17 h26 y6804 ff7 fs19 fc2 sc0 ls0 ws0">the<span class="_"> </span>calling<span class="_"> </span>process<span class="_ _1"></span>,<span class="_"> </span>then</div><div class="t m5 x1b6 h2d y6805 ffd fs1e fc2 sc0 ls0 ws0">setpgid(0,<span class="_ _e"> </span>0);</div><div class="t m5 x17 h26 y6806 ff7 fs19 fc2 sc0 ls0 ws0">creates<span class="_ _11"> </span>a<span class="_ _11"> </span>new<span class="_ _16"> </span>process<span class="_"> </span>group<span class="_ _16"> </span>whose<span class="_ _11"> </span>process<span class="_ _11"> </span>group<span class="_ _11"> </span>ID<span class="_ _16"> </span>is<span class="_"> </span>15213,<span class="_ _16"> </span>and<span class="_ _11"> </span>adds<span class="_ _11"> </span>process</div><div class="t m5 x17 h26 y6807 ff7 fs19 fc2 sc0 ls0 ws0">15213<span class="_"> </span>to<span class="_"> </span>this<span class="_"> </span>new<span class="_"> </span>group<span class="_ _1"></span>.</div><div class="t m5 x17 h1d y77e ff7 fs17 fc2 sc0 ls0 ws0">1.<span class="_"> </span>Also<span class="_"> </span>known<span class="_"> </span>as<span class="_"> </span>the<span class="_"> </span><span class="ffa">signal<span class="_"> </span>mask</span>.</div></div><div class="pi" data-data='{"ctm":[2.000000,0.000000,0.000000,2.000000,0.000000,0.000000]}'></div></div>
