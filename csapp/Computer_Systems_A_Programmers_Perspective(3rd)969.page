<div id="pf3c9" class="pf w2 h11" data-page-no="3c9"><div class="pc pc3c9 w2 h11"><img class="bi x0 y0 w1 h1" alt="" src="csapp/bg3c9.png"/><div class="t m5 x14 h28 y9b ffe fs1e fc2 sc0 ls0 ws0">968<span class="_ _1b"> </span><span class="ff6 fs1f">Chapter<span class="_ _10"> </span>11<span class="_ _3d"> </span>Network<span class="_ _10"> </span>Programming</span></div><div class="t m5 x28 h2a y257 fff fs1c fc2 sc0 ls0 ws0">Aside<span class="_ _1b"> </span><span class="ff6 fs19">Origins<span class="_ _11"> </span>of<span class="_ _11"> </span>the<span class="_ _11"> </span>sockets<span class="_ _16"> </span>interface</span></div><div class="t m5 x28 h2b y2d0 ff7 fs1e fc2 sc0 ls0 ws0">T<span class="_ _1"></span>he<span class="_ _11"> </span>original<span class="_ _11"> </span>sockets<span class="_ _11"> </span>interface<span class="_ _11"> </span>was<span class="_ _11"> </span>developed<span class="_ _11"> </span>by<span class="_ _11"> </span>researchers<span class="_ _11"> </span>at<span class="_ _11"> </span>University<span class="_ _11"> </span>of<span class="_ _11"> </span>California,<span class="_ _16"> </span>Berkeley<span class="_ _3"></span>,<span class="_ _11"> </span>in</div><div class="t m5 x28 h2b y2d1 ff7 fs1e fc2 sc0 ls0 ws0">the<span class="_ _11"> </span>early<span class="_ _16"> </span>1980s<span class="_ _3"></span>.<span class="_ _16"> </span>F<span class="_ _1"></span>or<span class="_ _11"> </span>this<span class="_ _16"> </span>reason,<span class="_ _11"> </span>it<span class="_ _16"> </span>is<span class="_ _11"> </span>often<span class="_ _16"> </span>referred<span class="_ _11"> </span>to<span class="_ _11"> </span>as<span class="_ _16"> </span><span class="ffa">Berkeley<span class="_ _11"> </span>sockets</span>.<span class="_ _11"> </span>The<span class="_ _11"> </span>Berkeley<span class="_ _11"> </span>researchers</div><div class="t m5 x28 h2b y2d2 ff7 fs1e fc2 sc0 ls0 ws0">developed<span class="_ _11"> </span>the<span class="_ _11"> </span>sockets<span class="_ _16"> </span>interface<span class="_ _11"> </span>to<span class="_ _11"> </span>work<span class="_ _11"> </span>with<span class="_ _11"> </span>any<span class="_ _16"> </span>underlying<span class="_ _11"> </span>protocol.<span class="_ _11"> </span>T<span class="_ _0"></span>he<span class="_ _11"> </span>ﬁrst<span class="_ _11"> </span>implementation<span class="_ _16"> </span>was</div><div class="t m5 x28 h2b y2d3 ff7 fs1e fc2 sc0 ls0 ws0">for<span class="_ _10"> </span>TCP/IP<span class="_ _7"></span>,<span class="_ _11"> </span>which<span class="_"> </span>they<span class="_ _11"> </span>included<span class="_ _11"> </span>in<span class="_ _11"> </span>the<span class="_"> </span>Unix<span class="_ _11"> </span>4.2BSD<span class="_ _11"> </span>kernel<span class="_ _10"> </span>and<span class="_ _11"> </span>distributed<span class="_ _11"> </span>to<span class="_ _10"> </span>numerous<span class="_ _11"> </span>universities</div><div class="t m5 x28 h2b y2d4 ff7 fs1e fc2 sc0 ls0 ws0">and<span class="_"> </span>labs<span class="_ _1"></span>.<span class="_ _11"> </span>T<span class="_ _1"></span>his<span class="_ _10"> </span>was<span class="_ _11"> </span>an<span class="_"> </span>important<span class="_ _10"> </span>event<span class="_ _11"> </span>in<span class="_"> </span>Internet<span class="_ _10"> </span>history<span class="_ _3"></span>.<span class="_ _11"> </span>Almost<span class="_"> </span>overnight,<span class="_ _10"> </span>thousands<span class="_ _11"> </span>of<span class="_"> </span>people<span class="_ _10"> </span>had</div><div class="t m5 x28 h2b y2d5 ff7 fs1e fc2 sc0 ls0 ws0">access<span class="_ _13"> </span>to<span class="_ _13"> </span>TCP/IP<span class="_ _13"> </span>and<span class="_ _6"> </span>its<span class="_"> </span>source<span class="_ _6"> </span>codes<span class="_ _1"></span>.<span class="_"> </span>It<span class="_ _6"> </span>generated<span class="_"> </span>tremendous<span class="_ _6"> </span>excitement<span class="_ _13"> </span>and<span class="_ _13"> </span>sparked<span class="_ _13"> </span>a<span class="_ _13"> </span>ﬂurry<span class="_ _13"> </span>of<span class="_ _6"> </span>new</div><div class="t m5 x28 h2b y2d6 ff7 fs1e fc2 sc0 ls0 ws0">research<span class="_"> </span>in<span class="_"> </span>networking<span class="_"> </span>and<span class="_"> </span>internetworking.</div><div class="t m5 x1d h3b y7b6a fff fs24 fc6 sc0 ls0 ws0">11.4<span class="_ _17"> </span><span class="ffe fs18">The<span class="_"> </span>Sockets<span class="_"> </span>Inter<span class="_ _2"></span>face</span></div><div class="t m5 x1d h26 y7b6b ff7 fs19 fc1 sc0 lsd ws0">Th<span class="_ _2"></span>e<span class="_"> </span><span class="ffa ls0">sockets<span class="_ _6"> </span>interface<span class="_ _13"> </span><span class="ff7">is<span class="_ _6"> </span>a<span class="_ _13"> </span>set<span class="_ _6"> </span>of<span class="_ _13"> </span>functions<span class="_ _6"> </span>that<span class="_ _13"> </span>are<span class="_ _6"> </span>used<span class="_ _13"> </span>in<span class="_ _6"> </span>conjunction<span class="_ _13"> </span>with<span class="_ _6"> </span>the<span class="_ _13"> </span>Unix</span></span></div><div class="t m5 x1d h26 y7b6c ff7 fs19 fc1 sc0 ls0 ws0">I/O<span class="_ _14"> </span>functions<span class="_ _14"> </span>to<span class="_ _15"> </span>build<span class="_ _14"> </span>network<span class="_ _15"> </span>applications<span class="_ _1"></span>.<span class="_ _14"> </span>It<span class="_ _15"> </span>has<span class="_ _14"> </span>been<span class="_ _14"> </span>implemented<span class="_ _15"> </span>on<span class="_ _14"> </span>most</div><div class="t m5 x1d h26 y7b6d ff7 fs19 fc1 sc0 ls0 ws0">modern<span class="_ _16"> </span>systems<span class="_ _1"></span>,<span class="_ _16"> </span>including<span class="_ _16"> </span>all<span class="_ _16"> </span>Unix<span class="_ _16"> </span>variants<span class="_ _16"> </span>as<span class="_ _16"> </span>well<span class="_ _16"> </span>as<span class="_ _16"> </span>W<span class="_ _0"></span>indows<span class="_ _16"> </span>and<span class="_ _16"> </span>Macintosh</div><div class="t m5 x1d h26 y7b6e ff7 fs19 fc1 sc0 ls0 ws0">systems<span class="_ _1"></span>.<span class="_ _13"> </span>Figure<span class="_ _13"> </span>11.12<span class="_ _13"> </span>gives<span class="_ _13"> </span>an<span class="_ _13"> </span>overview<span class="_"> </span>of<span class="_ _13"> </span>the<span class="_ _13"> </span>sockets<span class="_ _13"> </span>interface<span class="_ _13"> </span>in<span class="_"> </span>the<span class="_ _13"> </span>context<span class="_ _13"> </span>of<span class="_ _13"> </span>a</div><div class="t m5 x1d h26 y7b6f ff7 fs19 fc1 sc0 ls0 ws0">typical<span class="_"> </span>client-server<span class="_"> </span>transaction.<span class="_"> </span>Y<span class="_ _3"></span>ou<span class="_"> </span>should<span class="_ _11"> </span>use<span class="_"> </span>this<span class="_"> </span>picture<span class="_"> </span>as<span class="_ _11"> </span>a<span class="_"> </span>road<span class="_"> </span>map<span class="_ _11"> </span>when</div><div class="t m5 x1d h26 y7b70 ff7 fs19 fc1 sc0 ls0 ws0">we<span class="_"> </span>discuss<span class="_"> </span>the<span class="_"> </span>individual<span class="_"> </span>functions<span class="_ _1"></span>.</div><div class="t m5 x1d7 h3f y7b71 ffdf fs27 fc1 sc0 ls0 ws0">Client</div><div class="t m5 xe7 h40 y7b72 ffd3 fs28 fc1 sc0 ls0 ws0">socket</div><div class="t m5 x1d h40 y7b73 ffd3 fs28 fc1 sc0 ls0 ws0">open_clientfd</div><div class="t m5 x172 h40 y7b74 ffd3 fs28 fc1 sc0 ls0 ws0">open_listenfd</div><div class="t m5 x27e h40 y7b75 ffd3 fs28 fc1 sc0 ls0 ws0">connect</div><div class="t m5 xb7 h40 y7b76 ffd3 fs28 fc1 sc0 ls0 ws0">rio_writen</div><div class="t m5 xbd h40 y7b77 ffd3 fs28 fc1 sc0 ls0 ws0">rio_readlineb</div><div class="t m5 xf8 h40 y7b78 ffd3 fs28 fc1 sc0 ls0 ws0">rio_readlineb</div><div class="t m5 x1d7 h40 y7b79 ffd3 fs28 fc1 sc0 ls0 ws0">close</div><div class="t m5 x3a h3f y7b71 ffdf fs27 fc1 sc0 ls0 ws0">Server</div><div class="t m5 xd4 h3f y7b7a ffe0 fs27 fc1 sc0 ls0 ws0">Connection</div><div class="t m5 xd5 h3f y7b7b ffe0 fs27 fc1 sc0 ls0 ws0">request</div><div class="t m5 x159 h3f y7b7c ffe0 fs27 fc1 sc0 ls0 ws0">Await connection</div><div class="t m5 x159 h3f y7b7d ffe0 fs27 fc1 sc0 ls0 ws0">request from </div><div class="t m5 x159 h3f y7b7e ffe0 fs27 fc1 sc0 ls0 ws0">next client</div><div class="t m5 xd2 h3f y7b7f ffe0 fs27 fc1 sc0 ls0 ws0">EOF</div><div class="t m5 x60 h40 y7b80 ffd3 fs28 fc1 sc0 ls0 ws0">socket</div><div class="t m5 x1bc h40 y7b81 ffd3 fs28 fc1 sc0 ls0 ws0">getaddrinfo<span class="_ _231"></span>getaddrinfo</div><div class="t m5 x85 h40 y7b82 ffd3 fs28 fc1 sc0 ls0 ws0">bind</div><div class="t m5 x60 h40 y7b83 ffd3 fs28 fc1 sc0 ls0 ws0">listen</div><div class="t m5 x60 h40 y7b84 ffd3 fs28 fc1 sc0 ls0 ws0">accept</div><div class="t m5 xf9 h40 y7b85 ffd3 fs28 fc1 sc0 ls0 ws0">rio_writen</div><div class="t m5 x42 h40 y7b86 ffd3 fs28 fc1 sc0 ls0 ws0">rio_readlineb</div><div class="t m5 x195 h40 y7b87 ffd3 fs28 fc1 sc0 ls0 ws0">close</div><div class="t m5 x1d h2f y7b88 ffe fs16 fc6 sc0 ls0 ws0">Figure<span class="_"> </span>11.12<span class="_ _66"> </span><span class="fc1">Over<span class="_ _2"></span>view<span class="_"> </span>of<span class="_"> </span>network<span class="_"> </span>applications<span class="_"> </span>based<span class="_"> </span>on<span class="_"> </span>the<span class="_"> </span>sockets<span class="_"> </span>interface.</span></div></div><div class="pi" data-data='{"ctm":[2.000000,0.000000,0.000000,2.000000,0.000000,0.000000]}'></div></div>
