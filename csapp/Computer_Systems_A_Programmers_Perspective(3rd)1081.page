<div id="pf439" class="pf w2 h11" data-page-no="439"><div class="pc pc439 w2 h11"><img class="bi x0 y0 w1 h1" alt="" src="csapp/bg439.png"/><div class="t m5 x14 h28 y9b ffe fs1e fc2 sc0 ls0 ws0">1080<span class="_ _1b"> </span><span class="ff6 fs1f">Appendix<span class="_ _10"> </span>A<span class="_ _3d"> </span>Error<span class="_ _10"> </span>Handling</span></div><div class="t m5 x16b h2c y27f ffa fs16 fc2 sc0 ls0 ws0">code/src/csapp<span class="_ _1"></span>.c</div><div class="t m5 x1f h2d y280 ff6 fs20 fc6 sc0 ls0 ws0">1<span class="_ _1c"> </span><span class="ffd fs1e fc2">void<span class="_ _1f"> </span>unix_error(char<span class="_ _e"> </span>*msg)<span class="_ _1f"> </span>/*<span class="_ _1f"> </span>Unix-style<span class="_ _e"> </span>error<span class="_ _1f"> </span>*/</span></div><div class="t m5 x1f h2d y281 ff6 fs20 fc6 sc0 ls0 ws0">2<span class="_ _1c"> </span><span class="ffd fs1e fc2">{</span></div><div class="t m5 x1f h2d y283 ff6 fs20 fc6 sc0 ls0 ws0">3<span class="_ _20"> </span><span class="ffd fs1e fc2">fprintf(stderr,<span class="_ _e"> </span>&quot;%s:<span class="_ _1f"> </span>%s\n&quot;,<span class="_ _1f"> </span>msg,<span class="_ _e"> </span>strerror(errno));</span></div><div class="t m5 x1f h2d y284 ff6 fs20 fc6 sc0 ls0 ws0">4<span class="_ _20"> </span><span class="ffd fs1e fc2">exit(0);</span></div><div class="t m5 x1f h2d y285 ff6 fs20 fc6 sc0 ls0 ws0">5<span class="_ _1c"> </span><span class="ffd fs1e fc2">}</span></div><div class="t m5 x1f h2e y286 ff6 fs20 fc6 sc0 ls0 ws0">6</div><div class="t m5 x1f h2e y6298 ff6 fs20 fc6 sc0 ls0 ws0">7</div><div class="t m5 x4f h2d y287 ffd fs1e fc2 sc0 ls0 ws0">void<span class="_ _e"> </span>posix_error(int<span class="_ _1f"> </span>code,<span class="_ _1f"> </span>char<span class="_ _e"> </span>*msg)<span class="_ _1f"> </span>/*<span class="_ _e"> </span>Posix-style<span class="_ _1f"> </span>error<span class="_ _1f"> </span>*/</div><div class="t m5 x1f h2d y4493 ff6 fs20 fc6 sc0 ls0 ws0">8<span class="_ _1c"> </span><span class="ffd fs1e fc2">{</span></div><div class="t m5 x1f h2d y4a9a ff6 fs20 fc6 sc0 ls0 ws0">9<span class="_ _20"> </span><span class="ffd fs1e fc2">fprintf(stderr,<span class="_ _e"> </span>&quot;%s:<span class="_ _1f"> </span>%s\n&quot;,<span class="_ _1f"> </span>msg,<span class="_ _e"> </span>strerror(code));</span></div><div class="t m5 x1b0 h2d y4a9b ff6 fs20 fc6 sc0 ls0 ws0">10<span class="_ _20"> </span><span class="ffd fs1e fc2">exit(0);</span></div><div class="t m5 x1b0 h2d y4a9c ff6 fs20 fc6 sc0 ls0 ws0">11<span class="_ _1c"> </span><span class="ffd fs1e fc2">}</span></div><div class="t m5 x1b0 h2e y906 ff6 fs20 fc6 sc0 ls0 ws0">12</div><div class="t m5 x1b0 h2e y62c1 ff6 fs20 fc6 sc0 ls0 ws0">13</div><div class="t m5 x4f h2d y4a9d ffd fs1e fc2 sc0 ls0 ws0">void<span class="_ _e"> </span>gai_error(int<span class="_ _1f"> </span>code,<span class="_ _1f"> </span>char<span class="_ _e"> </span>*msg)<span class="_ _1f"> </span>/*<span class="_ _e"> </span>Getaddrinfo-style<span class="_ _1f"> </span>error<span class="_ _1f"> </span>*/</div><div class="t m5 x1b0 h2d y4a9e ff6 fs20 fc6 sc0 ls0 ws0">14<span class="_ _1c"> </span><span class="ffd fs1e fc2">{</span></div><div class="t m5 x1b0 h2d y4a9f ff6 fs20 fc6 sc0 ls0 ws0">15<span class="_ _20"> </span><span class="ffd fs1e fc2">fprintf(stderr,<span class="_ _e"> </span>&quot;%s:<span class="_ _1f"> </span>%s\n&quot;,<span class="_ _1f"> </span>msg,<span class="_ _e"> </span>gai_strerror(code));</span></div><div class="t m5 x1b0 h2d y417 ff6 fs20 fc6 sc0 ls0 ws0">16<span class="_ _20"> </span><span class="ffd fs1e fc2">exit(0);</span></div><div class="t m5 x1b0 h2d y4aa0 ff6 fs20 fc6 sc0 ls0 ws0">17<span class="_ _1c"> </span><span class="ffd fs1e fc2">}</span></div><div class="t m5 x1b0 h2e yeb4 ff6 fs20 fc6 sc0 ls0 ws0">18</div><div class="t m5 x1b0 h2e y6997 ff6 fs20 fc6 sc0 ls0 ws0">19</div><div class="t m5 x4f h2d y2a2b ffd fs1e fc2 sc0 ls0 ws0">void<span class="_ _e"> </span>app_error(char<span class="_ _1f"> </span>*msg)<span class="_ _1f"> </span>/*<span class="_ _e"> </span>Application<span class="_ _1f"> </span>error<span class="_ _e"> </span>*/</div><div class="t m5 x1b0 h2d y1ab8 ff6 fs20 fc6 sc0 ls0 ws0">20<span class="_ _1c"> </span><span class="ffd fs1e fc2">{</span></div><div class="t m5 x1b0 h2e y94f ff6 fs20 fc6 sc0 ls0 ws0">21</div><div class="t m5 x33 h2d y1ada ffd fs1e fc2 sc0 ls0 ws0">fprintf(stderr,<span class="_ _e"> </span>&quot;%s\n&quot;,<span class="_ _1f"> </span>msg);</div><div class="t m5 x1b0 h2d y4aa1 ff6 fs20 fc6 sc0 ls0 ws0">22<span class="_ _20"> </span><span class="ffd fs1e fc2">exit(0);</span></div><div class="t m5 x1b0 h2d y3228 ff6 fs20 fc6 sc0 ls0 ws0">23<span class="_ _1c"> </span><span class="ffd fs1e fc2">}</span></div><div class="t m5 x16b h2c y677a ffa fs16 fc2 sc0 ls0 ws0">code/src/csapp<span class="_ _1"></span>.c</div><div class="t m5 x1d h2f y677b ffe fs16 fc6 sc0 ls0 ws0">Figure<span class="_"> </span>A.1<span class="_ _66"> </span><span class="fc1">Error-reporting<span class="_"> </span>functions.</span></div><div class="t m5 x16b h2c y864d ffa fs16 fc1 sc0 ls0 ws0">code/src/csapp<span class="_ _1"></span>.c</div><div class="t m5 x1f h2d y73fb ff6 fs20 fc6 sc0 ls0 ws0">1<span class="_ _1c"> </span><span class="ffd fs1e fc2">pid_t<span class="_ _1f"> </span>Wait(int<span class="_ _e"> </span>*status)</span></div><div class="t m5 x1f h2d y73fc ff6 fs20 fc6 sc0 ls0 ws0">2<span class="_ _1c"> </span><span class="ffd fs1e fc2">{</span></div><div class="t m5 x1f h2d y864e ff6 fs20 fc6 sc0 ls0 ws0">3<span class="_ _20"> </span><span class="ffd fs1e fc2">pid_t<span class="_ _e"> </span>pid;</span></div><div class="t m5 x1f h2e y864f ff6 fs20 fc6 sc0 ls0 ws0">4</div><div class="t m5 x1f h2e y8650 ff6 fs20 fc6 sc0 ls0 ws0">5</div><div class="t m5 x33 h2d y7400 ffd fs1e fc2 sc0 ls0 ws0">if<span class="_ _e"> </span>((pid<span class="_ _1a"> </span>=<span class="_ _1f"> </span>wait(status))<span class="_ _1f"> </span>&lt;<span class="_ _e"> </span>0)</div><div class="t m5 x1f h2d y8651 ff6 fs20 fc6 sc0 ls0 ws0">6<span class="_ _70"> </span><span class="ffd fs1e fc2">unix_error(&quot;Wait<span class="_ _e"> </span>error&quot;);</span></div><div class="t m5 x1f h2d y7402 ff6 fs20 fc6 sc0 ls0 ws0">7<span class="_ _20"> </span><span class="ffd fs1e fc2">return<span class="_ _e"> </span>pid;</span></div><div class="t m5 x1f h2d y29c6 ff6 fs20 fc6 sc0 ls0 ws0">8<span class="_ _1c"> </span><span class="ffd fs1e fc2">}</span></div><div class="t m5 x16b h2c y8652 ffa fs16 fc2 sc0 ls0 ws0">code/src/csapp<span class="_ _1"></span>.c</div><div class="t m5 x1d h2f y8653 ffe fs16 fc6 sc0 ls0 ws0">Figure<span class="_"> </span>A.2<span class="_ _66"> </span><span class="fc1">Wrapper<span class="_"> </span>for<span class="_"> </span>Unix-style</span></div><div class="t m5 x184 h3a y2b8a ffd fs19 fc1 sc0 ls0 ws0">wait<span class="_ _10"> </span><span class="ffe fs16">function.</span></div></div><div class="pi" data-data='{"ctm":[2.000000,0.000000,0.000000,2.000000,0.000000,0.000000]}'></div></div>
