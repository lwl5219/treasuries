<div id="pf296" class="pf w2 h11" data-page-no="296"><div class="pc pc296 w2 h11"><img class="bi x0 y0 w1 h1" alt="" src="csapp/bg296.png"/><div class="t m5 xf2 h28 y9b ff6 fs1f fc2 sc0 ls0 ws0">Section<span class="_ _10"> </span>6.4<span class="_ _60"> </span>Cache<span class="_ _10"> </span>Memories<span class="_ _3e"> </span><span class="ffe fs1e">661</span></div><div class="t m5 x17 h2f ye7 ffe fs16 fc6 sc0 ls0 ws0">Figure<span class="_"> </span>6.32</div><div class="t m5 x17 h2f y58a ffe fs16 fc1 sc0 ls0 ws0">Set<span class="_ _14"> </span>associative<span class="_ _14"> </span>cache</div><div class="t m5 x17 h1c y58b ffe fs16 fc1 sc0 ls0 ws0">(<span class="ff7">1<span class="_ _6"> </span><span class="ff11 ls24a">&lt;E<span class="_ _2"></span>&lt;C<span class="_ _4"></span>/<span class="_ _8"></span>B<span class="_ _4"></span><span class="ffe ls0">).<span class="_ _16"> </span><span class="ff6">In<span class="_ _16"> </span>a<span class="_ _14"> </span>set</span></span></span></span></div><div class="t m5 x17 h34 y58c ff6 fs16 fc1 sc0 ls0 ws0">associative<span class="_ _16"> </span>cache,<span class="_ _14"> </span>each</div><div class="t m5 x17 h34 y58d ff6 fs16 fc1 sc0 ls0 ws0">set<span class="_ _16"> </span>contains<span class="_ _16"> </span>more<span class="_ _14"> </span>than</div><div class="t m5 x17 h34 y58e ff6 fs16 fc1 sc0 ls0 ws0">one<span class="_ _16"> </span>line.<span class="_ _16"> </span>This<span class="_ _16"> </span>particular</div><div class="t m5 x17 h34 y58f ff6 fs16 fc1 sc0 ls0 ws0">example<span class="_ _11"> </span>shows<span class="_ _10"> </span>a<span class="_ _11"> </span>two-way</div><div class="t m5 x17 h34 y8d9 ff6 fs16 fc1 sc0 ls0 ws0">set<span class="_ _10"> </span>associative<span class="_ _11"> </span>cache.</div><div class="t m5 xe1 h3f y580f ff84 fs27 fc1 sc0 ls0 ws0">V<span class="_ _1"></span>alid<span class="_ _7b"> </span>T<span class="_ _7"></span>ag<span class="_ _2c"> </span>Cache block</div><div class="t m5 x5d h3f y5810 ff84 fs27 fc1 sc0 ls0 ws0">Set 0:</div><div class="t m5 xe1 h3f y5811 ff84 fs27 fc1 sc0 ls0 ws0">V<span class="_ _1"></span>alid<span class="_ _7b"> </span>T<span class="_ _7"></span>ag<span class="_ _2c"> </span>Cache block</div><div class="t m5 xb3 h3f y5812 ff84 fs27 fc1 sc0 ls0 ws0">Set <span class="ff80">S</span></div><div class="t m5 x1d7 h3f y5813 ff80 fs93 fc1 sc0 ls0 ws0"> <span class="ff84 fs27">–</span> <span class="ff84 fs27">1:</span></div><div class="t m7 x1c7 h3f y5814 ff84 fs27 fc1 sc0 ls0 ws0">. . .</div><div class="t m5 x11d h3f y5815 ff80 fs27 fc1 sc0 ls0 ws0">E<span class="fs93"> </span><span class="ff84">=</span><span class="fs93"> </span><span class="ff84">2</span> <span class="ff84">lines per set</span></div><div class="t m5 xe1 h3f y5816 ff84 fs27 fc1 sc0 ls0 ws0">V<span class="_ _1"></span>alid<span class="_ _7b"> </span>T<span class="_ _7"></span>ag<span class="_ _2c"> </span>Cache block</div><div class="t m5 xe1 h3f y5817 ff84 fs27 fc1 sc0 ls0 ws0">V<span class="_ _1"></span>alid<span class="_ _7b"> </span>T<span class="_ _7"></span>ag<span class="_ _2c"> </span>Cache block</div><div class="t m5 xe1 h3f y5818 ff84 fs27 fc1 sc0 ls0 ws0">V<span class="_ _1"></span>alid<span class="_ _7b"> </span>T<span class="_ _7"></span>ag<span class="_ _2c"> </span>Cache block</div><div class="t m5 xe1 h3f y5819 ff84 fs27 fc1 sc0 ls0 ws0">V<span class="_ _1"></span>alid<span class="_ _7b"> </span>T<span class="_ _7"></span>ag<span class="_ _2c"> </span>Cache block</div><div class="t m5 x5d h3f y581a ff84 fs27 fc1 sc0 ls0 ws0">Set 1:</div><div class="t m5 x17 h2f y581b ffe fs16 fc6 sc0 ls0 ws0">Figure<span class="_"> </span>6.33</div><div class="t m5 x17 h2f y581c ffe fs16 fc1 sc0 ls0 ws0">Set<span class="_ _14"> </span>selection<span class="_ _14"> </span>in<span class="_ _16"> </span>a<span class="_ _14"> </span>set</div><div class="t m5 x17 h2f y581d ffe fs16 fc1 sc0 ls0 ws0">associative<span class="_"> </span>cache.</div><div class="t m5 x144 h91 y581e ff84 fs57 fc1 sc0 ls0 ws0">V<span class="_ _1"></span>alid<span class="_ _f1"> </span>T<span class="_ _7"></span>ag<span class="_ _b9"> </span>Cache block</div><div class="t m5 x12e h91 y581f ff84 fs57 fc1 sc0 ls0 ws0">Set 0:</div><div class="t m5 x144 h91 y5820 ff84 fs57 fc1 sc0 ls0 ws0">V<span class="_ _1"></span>alid<span class="_ _f1"> </span>T<span class="_ _7"></span>ag<span class="_ _b9"> </span>Cache block</div><div class="t m5 xfb h91 y5821 ff84 fs57 fc1 sc0 ls0 ws0">Set <span class="ff80">S<span class="_ _2"></span></span>–1:</div><div class="t m7 x212 h91 y5822 ff84 fs57 fc1 sc0 ls0 ws0">. . .</div><div class="t m5 x144 h91 y5823 ff84 fs57 fc1 sc0 ls0 ws0">V<span class="_ _1"></span>alid<span class="_ _f1"> </span>T<span class="_ _7"></span>ag<span class="_ _b9"> </span>Cache block</div><div class="t m5 x144 h91 y5824 ff84 fs57 fc1 sc0 ls0 ws0">V<span class="_ _1"></span>alid<span class="_ _f1"> </span>T<span class="_ _7"></span>ag<span class="_ _b9"> </span>Cache block</div><div class="t m5 x144 h91 y5825 ff84 fs57 fc1 sc0 ls0 ws0">V<span class="_ _1"></span>alid<span class="_ _f1"> </span>T<span class="_ _7"></span>ag<span class="_ _b9"> </span>Cache block</div><div class="t m5 x144 h91 y5826 ff84 fs57 fc1 sc0 ls0 ws0">V<span class="_ _1"></span>alid<span class="_ _f1"> </span>T<span class="_ _7"></span>ag<span class="_ _b9"> </span>Cache block</div><div class="t m5 x12e h91 y5827 ff84 fs57 fc1 sc0 ls0 ws0">Set 1:</div><div class="t m5 x4d he3 y5828 ff80 fs94 fc1 sc0 ls0 ws0">m<span class="ff84">–1<span class="_ _129"> </span>0</span></div><div class="t m5 x1d0 h91 y5829 ff80 fs57 fc1 sc0 ls0 ws0">t<span class="ff84"> bits</span></div><div class="t m5 xf7 h91 y582a ff84 fs57 fc1 sc0 ls23f ws0">Ta<span class="_ _5"></span>g<span class="_ _7b"> </span><span class="ls0">Set index</span></div><div class="t m5 x15 h91 y582b ff84 fs57 fc1 sc0 ls0 ws0">Block offset</div><div class="t m5 x125 h91 y5829 ff80 fs57 fc1 sc0 ls0 ws0">s<span class="ff84"> bits<span class="_ _4c"> </span></span>b<span class="ff84"> bits</span></div><div class="t m5 x69 h91 y582c ff84 fs57 fc1 sc0 ls0 ws0">Selected set</div><div class="t m5 x9c h91 y582d ff84 fs57 fc1 sc0 ls0 ws0">0 0 0 0 1</div><div class="t m5 x17 h46 y582e ff7 fs19 fc1 sc0 ls0 ws0">will<span class="_ _13"> </span>discuss<span class="_ _6"> </span>the<span class="_ _13"> </span>special<span class="_ _13"> </span>case<span class="_ _1"></span>,<span class="_ _13"> </span>where<span class="_ _13"> </span><span class="ff11">E<span class="_ _10"> </span><span class="ff12">=<span class="_ _13"></span></span><span class="ls211">C/<span class="_ _0"></span>B<span class="ff7 ls0">,<span class="_ _13"> </span>in<span class="_ _13"> </span>the<span class="_ _13"> </span>next<span class="_ _13"> </span>section.<span class="_ _6"> </span>Figure<span class="_ _6"> </span>6.32<span class="_ _13"> </span>shows</span></span></span></div><div class="t m5 x17 h26 y582f ff7 fs19 fc1 sc0 ls0 ws0">the<span class="_"> </span>organization<span class="_"> </span>of<span class="_"> </span>a<span class="_"> </span>two-way<span class="_"> </span>set<span class="_"> </span>associative<span class="_"> </span>cache<span class="_ _1"></span>.</div><div class="t m5 x17 h42 y5830 ff6 fs29 fc6 sc0 ls0 ws0">Set<span class="_ _11"> </span>Selection<span class="_ _16"> </span>in<span class="_ _16"> </span>Set<span class="_ _11"> </span>Associative<span class="_ _16"> </span>Caches</div><div class="t m5 x17 h26 y5831 ff7 fs19 fc1 sc0 ls0 ws0">Set<span class="_"> </span>selection<span class="_ _11"> </span>is<span class="_ _11"> </span>identical<span class="_ _11"> </span>to<span class="_ _11"> </span>a<span class="_"> </span>direct-mapped<span class="_ _11"> </span>cache,<span class="_"> </span>with<span class="_ _11"> </span>the<span class="_"> </span>set<span class="_ _11"> </span>index<span class="_ _11"> </span>bits<span class="_ _11"> </span>identi-</div><div class="t m5 x17 h26 y5832 ff7 fs19 fc1 sc0 ls0 ws0">fying<span class="_"> </span>the<span class="_"> </span>set.<span class="_"> </span>F<span class="_ _1"></span>igure<span class="_"> </span>6.33<span class="_"> </span>summarizes<span class="_"> </span>this<span class="_"> </span>principle.</div><div class="t m5 x17 h42 y5833 ff6 fs29 fc6 sc0 ls0 ws0">Line<span class="_ _11"> </span>Matching<span class="_ _16"> </span>and<span class="_ _16"> </span>W<span class="_ _1"></span>ord<span class="_ _16"> </span>Selection<span class="_ _11"> </span>in<span class="_ _16"> </span>Set<span class="_ _16"> </span>Associative<span class="_ _11"> </span>Caches</div><div class="t m5 x17 h26 y4174 ff7 fs19 fc1 sc0 ls0 ws0">Line<span class="_ _13"> </span>matching<span class="_"> </span>is<span class="_ _13"> </span>more<span class="_"> </span>involved<span class="_ _13"> </span>in<span class="_ _13"> </span>a<span class="_"> </span>set<span class="_ _13"> </span>associative<span class="_ _13"> </span>cache<span class="_"> </span>than<span class="_ _13"> </span>in<span class="_"> </span>a<span class="_ _13"> </span>direct-mapped</div><div class="t m5 x17 h26 y4175 ff7 fs19 fc1 sc0 ls0 ws0">cache<span class="_ _16"> </span>because<span class="_ _16"> </span>it<span class="_ _16"> </span>must<span class="_ _16"> </span>check<span class="_ _11"> </span>the<span class="_ _16"> </span>tags<span class="_ _16"> </span>and<span class="_ _16"> </span>valid<span class="_ _16"> </span>bits<span class="_ _16"> </span>of<span class="_ _16"> </span>multiple<span class="_ _16"> </span>lines<span class="_ _16"> </span>in<span class="_ _16"> </span>order<span class="_ _16"> </span>to</div><div class="t m5 x17 h26 y4176 ff7 fs19 fc1 sc0 ls0 ws0">determine<span class="_ _6"> </span>if<span class="_ _13"> </span>the<span class="_ _6"> </span>requested<span class="_ _6"> </span>word<span class="_ _13"> </span>is<span class="_ _6"> </span>in<span class="_ _13"> </span>the<span class="_ _6"> </span>set.<span class="_ _6"> </span>A<span class="_ _13"> </span>conventional<span class="_ _6"> </span>memory<span class="_ _6"> </span>is<span class="_ _13"> </span>an<span class="_ _6"> </span>array<span class="_ _13"> </span>of</div><div class="t m5 x17 h26 y4177 ff7 fs19 fc1 sc0 ls0 ws0">values<span class="_"> </span>that<span class="_"> </span>takes<span class="_ _13"> </span>an<span class="_"> </span>address<span class="_"> </span>as<span class="_"> </span>input<span class="_"> </span>and<span class="_"> </span>returns<span class="_ _13"> </span>the<span class="_"> </span>value<span class="_"> </span>stored<span class="_"> </span>at<span class="_"> </span>that<span class="_ _13"> </span>address<span class="_ _0"></span>.</div><div class="t m5 x17 h26 y4178 ff7 fs19 fc1 sc0 ls0 ws0">An<span class="_ _11"> </span><span class="ffa">associative<span class="_ _16"> </span>memory</span>,<span class="_ _16"> </span>on<span class="_ _11"> </span>the<span class="_ _16"> </span>other<span class="_ _16"> </span>hand,<span class="_ _16"> </span>is<span class="_ _11"> </span>an<span class="_ _16"> </span>array<span class="_ _16"> </span>of<span class="_ _11"> </span>(key<span class="_ _3"></span>,<span class="_ _16"> </span>value)<span class="_ _16"> </span>pairs<span class="_ _11"> </span>that</div><div class="t m5 x17 h26 y4179 ff7 fs19 fc1 sc0 ls0 ws0">takes<span class="_"> </span>as<span class="_"> </span>input<span class="_ _11"> </span>the<span class="_"> </span>key<span class="_ _11"> </span>and<span class="_"> </span>returns<span class="_ _11"> </span>a<span class="_"> </span>value<span class="_ _11"> </span>from<span class="_"> </span>one<span class="_ _11"> </span>of<span class="_"> </span>the<span class="_"> </span>(key<span class="_ _3"></span>,<span class="_ _11"> </span>value)<span class="_"> </span>pairs<span class="_ _11"> </span>that</div><div class="t m5 x17 h26 y417a ff7 fs19 fc1 sc0 ls0 ws0">matches<span class="_"> </span>the<span class="_"> </span>input<span class="_"> </span>key<span class="_ _7"></span>.<span class="_"> </span>T<span class="_ _1"></span>hus<span class="_ _1"></span>,<span class="_"> </span>we<span class="_"> </span>can<span class="_"> </span>think<span class="_"> </span>of<span class="_"> </span>each<span class="_ _13"> </span>set<span class="_"> </span>in<span class="_"> </span>a<span class="_"> </span>set<span class="_"> </span>associative<span class="_"> </span>cache<span class="_ _13"> </span>as</div><div class="t m5 x17 h26 y417b ff7 fs19 fc1 sc0 ls0 ws0">a<span class="_ _11"> </span>small<span class="_ _11"> </span>associative<span class="_ _11"> </span>memory<span class="_ _11"> </span>where<span class="_ _11"> </span>the<span class="_ _11"> </span>keys<span class="_ _11"> </span>are<span class="_ _11"> </span>the<span class="_ _11"> </span>concatenation<span class="_ _16"> </span>of<span class="_"> </span>the<span class="_ _11"> </span>tag<span class="_ _11"> </span>and</div><div class="t m5 x17 h26 y417c ff7 fs19 fc1 sc0 ls0 ws0">valid<span class="_"> </span>bits<span class="_ _1"></span>,<span class="_"> </span>and<span class="_"> </span>the<span class="_"> </span>values<span class="_"> </span>are<span class="_"> </span>the<span class="_"> </span>contents<span class="_"> </span>of<span class="_"> </span>a<span class="_"> </span>block.</div></div><div class="pi" data-data='{"ctm":[2.000000,0.000000,0.000000,2.000000,0.000000,0.000000]}'></div></div>
