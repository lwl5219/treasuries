<div id="pfee" class="pf w2 h11" data-page-no="ee"><div class="pc pcee w2 h11"><img class="bi x0 y0 w1 h1" alt="" src="csapp/bgee.png"/><div class="t m5 x1dc h28 y9b ff6 fs1f fc2 sc0 ls0 ws0">Section<span class="_ _10"> </span>3.6<span class="_ _60"> </span>Control<span class="_ _3e"> </span><span class="ffe fs1e">237</span></div><div class="t m5 x17 h26 ye7 ff7 fs19 fc2 sc0 ls0 ws0">both<span class="_"> </span>statements<span class="_"> </span>in<span class="_"> </span>C<span class="_"> </span>and<span class="_"> </span>instructions<span class="_"> </span>in<span class="_"> </span>machine<span class="_"> </span>code<span class="_"> </span>are<span class="_"> </span>executed<span class="_ _11"> </span><span class="ffa">sequentially</span>,</div><div class="t m5 x17 h26 y2a7 ff7 fs19 fc2 sc0 ls0 ws0">in<span class="_ _13"> </span>the<span class="_"> </span>order<span class="_ _13"> </span>they<span class="_"> </span>appear<span class="_ _13"> </span>in<span class="_ _13"> </span>the<span class="_"> </span>program.<span class="_ _13"> </span>T<span class="_ _0"></span>he<span class="_ _13"> </span>execution<span class="_"> </span>order<span class="_ _13"> </span>of<span class="_"> </span>a<span class="_ _13"> </span>set<span class="_ _13"> </span>of<span class="_"> </span>machine-</div><div class="t m5 x17 h26 y2a8 ff7 fs19 fc2 sc0 ls0 ws0">code<span class="_ _16"> </span>instructions<span class="_ _16"> </span>can<span class="_ _16"> </span>be<span class="_ _16"> </span>altered<span class="_ _16"> </span>with<span class="_ _16"> </span>a<span class="_ _11"> </span><span class="ffa">jump<span class="_ _16"> </span></span>instruction,<span class="_ _16"> </span>indicating<span class="_ _16"> </span>that<span class="_ _16"> </span>control</div><div class="t m5 x17 h26 y2f7 ff7 fs19 fc2 sc0 ls0 ws0">should<span class="_"> </span>pass<span class="_ _11"> </span>to<span class="_ _11"> </span>some<span class="_"> </span>other<span class="_ _11"> </span>part<span class="_ _11"> </span>of<span class="_"> </span>the<span class="_ _11"> </span>program,<span class="_ _11"> </span>possibly<span class="_ _11"> </span>contingent<span class="_"> </span>on<span class="_ _11"> </span>the<span class="_ _11"> </span>result</div><div class="t m5 x17 h26 y2f8 ff7 fs19 fc2 sc0 ls0 ws0">of<span class="_ _11"> </span>some<span class="_ _16"> </span>test.<span class="_ _11"> </span>T<span class="_ _1"></span>he<span class="_ _16"> </span>compiler<span class="_ _11"> </span>must<span class="_ _11"> </span>generate<span class="_ _16"> </span>instruction<span class="_ _11"> </span>sequences<span class="_ _11"> </span>that<span class="_ _16"> </span>build<span class="_ _11"> </span>upon</div><div class="t m5 x17 h26 y2f9 ff7 fs19 fc2 sc0 ls0 ws0">this<span class="_"> </span>low-level<span class="_"> </span>mechanism<span class="_"> </span>to<span class="_"> </span>implement<span class="_"> </span>the<span class="_"> </span>control<span class="_"> </span>constructs<span class="_"> </span>of<span class="_"> </span>C.</div><div class="t m5 x26 h26 y2fa ff7 fs19 fc2 sc0 ls0 ws0">In<span class="_"> </span>our<span class="_"> </span>presentation,<span class="_"> </span>we<span class="_"> </span>ﬁrst<span class="_ _13"> </span>cover<span class="_"> </span>the<span class="_"> </span>two<span class="_"> </span>ways<span class="_"> </span>of<span class="_"> </span>implementing<span class="_"> </span>conditional</div><div class="t m5 x17 h26 y2fb ff7 fs19 fc2 sc0 ls0 ws0">operations<span class="_ _1"></span>.<span class="_ _21"> </span>W<span class="_ _3"></span>e<span class="_ _21"> </span>then<span class="_ _21"> </span>describe<span class="_ _21"> </span>methods<span class="_ _21"> </span>for<span class="_ _15"> </span>presenting<span class="_ _21"> </span>loops<span class="_ _21"> </span>and<span class="_ _21"> </span><span class="ffd">switch<span class="_ _21"> </span></span>state-</div><div class="t m5 x17 h26 y2fc ff7 fs19 fc2 sc0 ls0 ws0">ments<span class="_ _1"></span>.</div><div class="t m5 x17 h41 y2442 ffe fs29 fc2 sc0 ls0 ws0">3.6.1<span class="_ _48"> </span><span class="fs19">Condition<span class="_"> </span>Codes</span></div><div class="t m5 x17 h26 y2443 ff7 fs19 fc2 sc0 ls0 ws0">In<span class="_ _13"> </span>addition<span class="_ _13"> </span>to<span class="_ _13"> </span>the<span class="_ _13"> </span>integer<span class="_ _13"> </span>registers<span class="_ _1"></span>,<span class="_ _13"> </span>the<span class="_ _13"> </span>CPU<span class="_ _13"> </span>maintains<span class="_ _13"> </span>a<span class="_ _13"> </span>set<span class="_ _13"> </span>of<span class="_ _13"> </span>single-bit<span class="_ _13"> </span><span class="ffa">condition</span></div><div class="t m5 x17 h26 y2444 ffa fs19 fc2 sc0 ls0 ws0">code<span class="_"> </span><span class="ff7">registers<span class="_ _11"> </span>describing<span class="_"> </span>attributes<span class="_ _11"> </span>of<span class="_"> </span>the<span class="_ _11"> </span>most<span class="_"> </span>recent<span class="_ _11"> </span>arithmetic<span class="_ _11"> </span>or<span class="_"> </span>logical<span class="_ _11"> </span>oper<span class="_ _1"></span>-</span></div><div class="t m5 x17 h26 y2445 ff7 fs19 fc2 sc0 ls0 ws0">ation.<span class="_"> </span>These<span class="_"> </span>registers<span class="_"> </span>can<span class="_ _11"> </span>then<span class="_ _11"> </span>be<span class="_ _11"> </span>tested<span class="_ _11"> </span>to<span class="_"> </span>perform<span class="_ _11"> </span>conditional<span class="_ _11"> </span>branches<span class="_ _1"></span>.<span class="_ _11"> </span>T<span class="_ _0"></span>hese</div><div class="t m5 x17 h26 y2446 ff7 fs19 fc2 sc0 ls0 ws0">condition<span class="_"> </span>codes<span class="_"> </span>are<span class="_"> </span>the<span class="_"> </span>most<span class="_"> </span>useful:</div><div class="t m5 x72 h26 y2447 ffd fs19 fc2 sc0 ls0 ws0">CF<span class="ff7">:<span class="_ _16"> </span>Carry<span class="_ _14"> </span>ﬂag.<span class="_ _1f"> </span>T<span class="_ _1"></span>he<span class="_ _14"> </span>most<span class="_ _14"> </span>recent<span class="_ _16"> </span>operation<span class="_ _14"> </span>generated<span class="_ _14"> </span>a<span class="_ _14"> </span>carry<span class="_ _14"> </span>out<span class="_ _14"> </span>of<span class="_ _16"> </span>the<span class="_ _14"> </span>most</span></div><div class="t m5 x30 h26 y2448 ff7 fs19 fc2 sc0 ls0 ws0">signiﬁcant<span class="_"> </span>bit.<span class="_"> </span>Used<span class="_"> </span>to<span class="_"> </span>detect<span class="_"> </span>overﬂow<span class="_"> </span>for<span class="_"> </span>unsigned<span class="_"> </span>operations<span class="_ _1"></span>.</div><div class="t m5 x72 h26 y2449 ffd fs19 fc2 sc0 ls0 ws0">ZF<span class="ff7">:<span class="_"> </span>Zero<span class="_"> </span>ﬂag.<span class="_ _e"> </span>T<span class="_ _1"></span>he<span class="_"> </span>most<span class="_"> </span>recent<span class="_"> </span>operation<span class="_"> </span>yielded<span class="_"> </span>zero.</span></div><div class="t m5 x72 h26 y244a ffd fs19 fc2 sc0 ls0 ws0">SF<span class="ff7">:<span class="_"> </span>Sign<span class="_"> </span>ﬂag.<span class="_ _e"> </span>T<span class="_ _1"></span>he<span class="_"> </span>most<span class="_"> </span>recent<span class="_"> </span>operation<span class="_"> </span>yielded<span class="_"> </span>a<span class="_"> </span>negative<span class="_"> </span>value.</span></div><div class="t m5 x72 h26 y244b ffd fs19 fc2 sc0 ls0 ws0">OF<span class="ff7">:<span class="_ _e"> </span>Overﬂow<span class="_ _1f"> </span>ﬂag.<span class="_ _e"> </span>The<span class="_ _e"> </span>most<span class="_ _e"> </span>recent<span class="_ _1f"> </span>operation<span class="_ _1f"> </span>caused<span class="_ _e"> </span>a<span class="_ _1f"> </span>two’s-complement</span></div><div class="t m5 x30 h26 y244c ff7 fs19 fc2 sc0 ls0 ws0">overﬂow—either<span class="_"> </span>negative<span class="_"> </span>or<span class="_"> </span>positive<span class="_ _1"></span>.</div><div class="t m5 x26 h26 y244d ff7 fs19 fc2 sc0 ls0 ws0">F<span class="_ _1"></span>or<span class="_ _14"> </span>example,<span class="_ _14"> </span>suppose<span class="_ _15"> </span>we<span class="_ _14"> </span>used<span class="_ _15"> </span>one<span class="_ _14"> </span>of<span class="_ _15"> </span>the<span class="_ _14"> </span><span class="ff9">add<span class="_ _15"> </span></span>instructions<span class="_ _14"> </span>to<span class="_ _15"> </span>perform<span class="_ _14"> </span>the</div><div class="t m5 x17 h26 y244e ff7 fs19 fc2 sc0 ls0 ws0">equivalent<span class="_ _11"> </span>of<span class="_ _11"> </span>the<span class="_ _11"> </span>C<span class="_ _11"> </span>assignment<span class="_ _11"> </span><span class="ffd">t<span class="_ _16"> </span>=<span class="_ _16"> </span>a+b</span>,<span class="_ _11"> </span>where<span class="_ _11"> </span>variables<span class="_ _11"> </span><span class="ffd">a</span>,<span class="_ _11"> </span><span class="ffd">b</span>,<span class="_ _16"> </span>and<span class="_"> </span><span class="ffd">t<span class="_ _11"> </span></span>are<span class="_ _16"> </span>integers<span class="_ _3"></span>.</div><div class="t m5 x17 h26 y244f ff7 fs19 fc2 sc0 ls0 ws0">T<span class="_ _1"></span>hen<span class="_"> </span>the<span class="_"> </span>condition<span class="_"> </span>codes<span class="_"> </span>would<span class="_"> </span>be<span class="_"> </span>set<span class="_"> </span>according<span class="_"> </span>to<span class="_"> </span>the<span class="_"> </span>following<span class="_"> </span>C<span class="_"> </span>expressions:</div><div class="t m5 x17 h31 y2450 ffd fs1e fc2 sc0 ls0 ws0">CF<span class="_ _26"> </span>(unsigned)<span class="_ _11"> </span>t<span class="_ _11"> </span>&lt;<span class="_ _11"> </span>(unsigned)<span class="_ _11"> </span>a<span class="_ _ed"> </span><span class="ff7 fs21">Unsigned<span class="_"> </span>overﬂow</span></div><div class="t m5 x17 h31 y2451 ffd fs1e fc2 sc0 ls0 ws0">ZF<span class="_ _26"> </span>(t<span class="_ _11"> </span>==<span class="_ _11"> </span>0)<span class="_ _150"> </span><span class="ff7 fs21">Zero</span></div><div class="t m5 x17 h2d y2452 ffd fs1e fc2 sc0 ls0 ws0">SF<span class="_ _26"> </span>(t<span class="_ _11"> </span>&lt;<span class="_ _11"> </span>0)</div><div class="t m5 x87 h31 y2453 ff7 fs21 fc2 sc0 ls0 ws0">Negative</div><div class="t m5 x17 h31 y2454 ffd fs1e fc2 sc0 ls4c ws0">O<span class="_ _49"></span>F<span class="_ _ff"> </span>(<span class="_ _49"></span>a&lt;0=<span class="_ _49"></span>=b&lt;0<span class="_ _4a"></span>)&amp;<span class="_ _49"></span>&amp;(<span class="_ _49"></span>t&lt;0!<span class="_ _49"></span>=a&lt;0<span class="_ _4a"></span>)<span class="_ _3f"> </span><span class="ff7 fs21 ls0">Signed<span class="_"> </span>overﬂow</span></div><div class="t m5 x26 h26 y2455 ff7 fs19 fc2 sc0 lsd ws0">Th<span class="_ _2"></span>e<span class="_ _16"> </span><span class="ffd ls0">leaq<span class="_ _16"> </span><span class="ff7">instruction<span class="_ _11"> </span>does<span class="_ _16"> </span>not<span class="_ _11"> </span>alter<span class="_ _11"> </span>any<span class="_ _16"> </span>condition<span class="_ _11"> </span>codes<span class="_ _1"></span>,<span class="_ _16"> </span>since<span class="_ _11"> </span>it<span class="_ _16"> </span>is<span class="_ _11"> </span>intended</span></span></div><div class="t m5 x17 h26 y2456 ff7 fs19 fc2 sc0 ls0 ws0">to<span class="_ _14"> </span>be<span class="_ _15"> </span>used<span class="_ _14"> </span>in<span class="_ _15"> </span>address<span class="_ _15"> </span>computations<span class="_ _1"></span>.<span class="_ _14"> </span>Otherwise,<span class="_ _15"> </span>all<span class="_ _14"> </span>of<span class="_ _15"> </span>the<span class="_ _15"> </span>instructions<span class="_ _14"> </span>listed<span class="_ _15"> </span>in</div><div class="t m5 x17 h26 y2457 ff7 fs19 fc2 sc0 ls0 ws0">F<span class="_ _1"></span>igure<span class="_ _16"> </span>3.10<span class="_ _16"> </span>cause<span class="_ _16"> </span>the<span class="_ _16"> </span>condition<span class="_ _11"> </span>codes<span class="_ _16"> </span>to<span class="_ _16"> </span>be<span class="_ _16"> </span>set.<span class="_ _16"> </span>F<span class="_ _1"></span>or<span class="_ _16"> </span>the<span class="_ _11"> </span>logical<span class="_ _16"> </span>operations<span class="_ _1"></span>,<span class="_ _14"> </span>such</div><div class="t m5 x17 h26 y2458 ff7 fs19 fc2 sc0 ls0 ws0">as<span class="_ _11"> </span><span class="ff9">xor</span>,<span class="_ _16"> </span>the<span class="_ _16"> </span>carry<span class="_ _16"> </span>and<span class="_ _11"> </span>overﬂow<span class="_ _16"> </span>ﬂags<span class="_ _11"> </span>are<span class="_ _16"> </span>set<span class="_ _16"> </span>to<span class="_ _11"> </span>zero.<span class="_ _11"> </span>F<span class="_ _1"></span>or<span class="_ _16"> </span>the<span class="_ _11"> </span>shift<span class="_ _16"> </span>operations<span class="_ _1"></span>,<span class="_ _16"> </span>the</div><div class="t m5 x17 h26 y2459 ff7 fs19 fc2 sc0 ls0 ws0">carry<span class="_"> </span>ﬂag<span class="_ _13"> </span>is<span class="_"> </span>set<span class="_ _13"> </span>to<span class="_"> </span>the<span class="_ _13"> </span>last<span class="_"> </span>bit<span class="_ _13"> </span>shifted<span class="_"> </span>out,<span class="_"> </span>while<span class="_ _13"> </span>the<span class="_"> </span>overﬂow<span class="_ _13"> </span>ﬂag<span class="_"> </span>is<span class="_"> </span>set<span class="_ _13"> </span>to<span class="_"> </span>zero<span class="_ _1"></span>.<span class="_"> </span>F<span class="_ _3"></span>or</div><div class="t m5 x17 h26 y4fe ff7 fs19 fc2 sc0 ls0 ws0">reasons<span class="_"> </span>that<span class="_ _11"> </span>we<span class="_ _11"> </span>will<span class="_ _11"> </span>not<span class="_ _11"> </span>delve<span class="_ _11"> </span>into,<span class="_"> </span>the<span class="_ _11"> </span><span class="ff9">inc<span class="_ _11"> </span></span>and<span class="_ _11"> </span><span class="ff9">dec<span class="_ _11"> </span></span>instructions<span class="_ _11"> </span>set<span class="_ _11"> </span>the<span class="_ _11"> </span>overﬂow</div><div class="t m5 x17 h26 y4ff ff7 fs19 fc2 sc0 ls0 ws0">and<span class="_"> </span>zero<span class="_"> </span>ﬂags<span class="_ _1"></span>,<span class="_"> </span>but<span class="_"> </span>they<span class="_"> </span>leave<span class="_"> </span>the<span class="_"> </span>carry<span class="_"> </span>ﬂag<span class="_"> </span>unchanged.</div><div class="t m5 x26 h26 y500 ff7 fs19 fc2 sc0 ls0 ws0">In<span class="_ _13"> </span>addition<span class="_ _13"> </span>to<span class="_ _13"> </span>the<span class="_ _13"> </span>setting<span class="_ _13"> </span>of<span class="_ _13"> </span>condition<span class="_ _13"> </span>codes<span class="_ _13"> </span>by<span class="_"> </span>the<span class="_ _13"> </span>instructions<span class="_ _13"> </span>of<span class="_ _13"> </span>F<span class="_ _1"></span>igure<span class="_ _13"> </span>3.10,</div><div class="t m5 x17 h26 y501 ff7 fs19 fc2 sc0 ls0 ws0">there<span class="_ _16"> </span>are<span class="_ _14"> </span>two<span class="_ _14"> </span>instruction<span class="_ _14"> </span>classes<span class="_ _14"> </span>(having<span class="_ _14"> </span>8-,<span class="_ _14"> </span>16-,<span class="_ _15"> </span>32-,<span class="_ _14"> </span>and<span class="_ _14"> </span>64-bit<span class="_ _14"> </span>forms)<span class="_ _14"> </span>that<span class="_ _14"> </span>set</div><div class="t m5 x17 h26 y502 ff7 fs19 fc2 sc0 ls0 ws0">condition<span class="_ _13"> </span>codes<span class="_ _6"> </span>without<span class="_ _13"> </span>altering<span class="_ _6"> </span>any<span class="_ _13"> </span>other<span class="_ _6"> </span>registers;<span class="_ _13"> </span>these<span class="_ _13"> </span>are<span class="_ _6"> </span>listed<span class="_ _13"> </span>in<span class="_ _6"> </span>F<span class="_ _0"></span>igure<span class="_ _6"> </span>3.13.</div><div class="t m5 x17 h26 y503 ff7 fs19 fc2 sc0 lsd ws0">Th<span class="_ _2"></span>e<span class="_ _11"> </span><span class="ff9 ls0">cmp<span class="_ _11"> </span><span class="ff7">instructions<span class="_"> </span>set<span class="_"> </span>the<span class="_"> </span>condition<span class="_"> </span>codes<span class="_"> </span>according<span class="_ _11"> </span>to<span class="_"> </span>the<span class="_"> </span>differences<span class="_"> </span>of<span class="_"> </span>their</span></span></div><div class="t m5 x17 h26 y504 ff7 fs19 fc2 sc0 ls0 ws0">two<span class="_ _11"> </span>operands<span class="_ _1"></span>.<span class="_ _16"> </span>T<span class="_ _0"></span>hey<span class="_ _11"> </span>behave<span class="_ _16"> </span>in<span class="_ _11"> </span>the<span class="_ _16"> </span>same<span class="_ _16"> </span>way<span class="_ _11"> </span>as<span class="_ _16"> </span>the<span class="_ _11"> </span><span class="ff9">sub<span class="_ _16"> </span></span>instructions<span class="_ _1"></span>,<span class="_ _16"> </span>except<span class="_ _11"> </span>that</div><div class="t m5 x17 h26 y505 ff7 fs19 fc2 sc0 ls0 ws0">they<span class="_ _6"> </span>set<span class="_ _6"> </span>the<span class="_ _6"> </span>condition<span class="_ _6"> </span>codes<span class="_ _6"> </span>without<span class="_ _6"> </span>updating<span class="_ _6"> </span>their<span class="_ _6"> </span>destinations<span class="_ _1"></span>.<span class="_ _6"> </span>With<span class="_ _a"> </span>A<span class="_ _3"></span>TT<span class="_ _6"> </span>format,</div></div><div class="pi" data-data='{"ctm":[2.000000,0.000000,0.000000,2.000000,0.000000,0.000000]}'></div></div>
