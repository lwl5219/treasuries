<div id="pf164" class="pf w2 h11" data-page-no="164"><div class="pc pc164 w2 h11"><img class="bi x0 y0 w1 h1" alt="" src="csapp/bg164.png"/><div class="t m5 x5f h28 y9b ff6 fs1f fc2 sc0 ls0 ws0">Homework<span class="_ _10"> </span>Problems<span class="_ _1b"> </span><span class="ffe fs1e">355</span></div><div class="t m5 x2c h2d ye7 ff6 fs20 fc6 sc0 ls0 ws0">6<span class="_ _1c"> </span><span class="ffd fs1e fc2">typedef<span class="_ _1f"> </span>struct<span class="_ _e"> </span>{</span></div><div class="t m5 x2c h2d yc4d ff6 fs20 fc6 sc0 ls0 ws0">7<span class="_ _20"> </span><span class="ffd fs1e fc2">long<span class="_ _e"> </span>u[2];</span></div><div class="t m5 x2c h2d yecb ff6 fs20 fc6 sc0 ls0 ws0">8<span class="_ _20"> </span><span class="ffd fs1e fc2">long<span class="_ _e"> </span>q;</span></div><div class="t m5 x2c h2d yecc ff6 fs20 fc6 sc0 ls0 ws0">9<span class="_ _1c"> </span><span class="ffd fs1e fc2">}<span class="_ _1f"> </span>strB;</span></div><div class="t m5 x17 h2e yecd ff6 fs20 fc6 sc0 ls0 ws0">10</div><div class="t m5 x17 h2e y3227 ff6 fs20 fc6 sc0 ls0 ws0">11</div><div class="t m5 x2d h2d yece ffd fs1e fc2 sc0 ls0 ws0">strB<span class="_ _e"> </span>process(strA<span class="_ _1f"> </span>s)<span class="_ _1f"> </span>{</div><div class="t m5 x17 h2d yecf ff6 fs20 fc6 sc0 ls0 ws0">12<span class="_ _20"> </span><span class="ffd fs1e fc2">strB<span class="_ _e"> </span>r;</span></div><div class="t m5 x17 h2d yed0 ff6 fs20 fc6 sc0 ls0 ws0">13<span class="_ _20"> </span><span class="ffd fs1e fc2">r.u[0]<span class="_ _e"> </span>=<span class="_ _1f"> </span>s.a[1];</span></div><div class="t m5 x17 h2e y20fe ff6 fs20 fc6 sc0 ls0 ws0">14</div><div class="t m5 x142 h2d y1a10 ffd fs1e fc2 sc0 ls0 ws0">r.u[1]<span class="_ _e"> </span>=<span class="_ _1f"> </span>s.a[0];</div><div class="t m5 x17 h2d yed3 ff6 fs20 fc6 sc0 ls0 ws0">15<span class="_ _20"> </span><span class="ffd fs1e fc2">r.q<span class="_ _e"> </span>=<span class="_ _46"> </span>*s.p;</span></div><div class="t m5 x17 h2d yed4 ff6 fs20 fc6 sc0 ls0 ws0">16<span class="_ _20"> </span><span class="ffd fs1e fc2">return<span class="_ _e"> </span>r;</span></div><div class="t m5 x17 h2d y462 ff6 fs20 fc6 sc0 ls0 ws0">17<span class="_ _1c"> </span><span class="ffd fs1e fc2">}</span></div><div class="t m5 x17 h2e y26dd ff6 fs20 fc6 sc0 ls0 ws0">18</div><div class="t m5 x17 h2e y31af ff6 fs20 fc6 sc0 ls0 ws0">19</div><div class="t m5 x2d h2d y2651 ffd fs1e fc2 sc0 ls0 ws0">long<span class="_ _e"> </span>eval(long<span class="_ _1f"> </span>x,<span class="_ _1f"> </span>long<span class="_ _e"> </span>y,<span class="_ _1f"> </span>long<span class="_ _e"> </span>z)<span class="_ _1f"> </span>{</div><div class="t m5 x17 h2d yeab ff6 fs20 fc6 sc0 ls0 ws0">20<span class="_ _20"> </span><span class="ffd fs1e fc2">strA<span class="_ _e"> </span>s;</span></div><div class="t m5 x17 h2e y2a37 ff6 fs20 fc6 sc0 ls0 ws0">21</div><div class="t m5 x142 h2d y19a5 ffd fs1e fc2 sc0 ls0 ws0">s.a[0]<span class="_ _e"> </span>=<span class="_ _1f"> </span>x;</div><div class="t m5 x17 h2d y682 ff6 fs20 fc6 sc0 ls0 ws0">22<span class="_ _20"> </span><span class="ffd fs1e fc2">s.a[1]<span class="_ _e"> </span>=<span class="_ _1f"> </span>y;</span></div><div class="t m5 x17 h2d y19a9 ff6 fs20 fc6 sc0 ls0 ws0">23<span class="_ _20"> </span><span class="ffd fs1e fc2">s.p<span class="_ _e"> </span>=<span class="_ _1f"> </span>&amp;z;</span></div><div class="t m5 x17 h2d y418 ff6 fs20 fc6 sc0 ls0 ws0">24<span class="_ _20"> </span><span class="ffd fs1e fc2">strB<span class="_ _e"> </span>r<span class="_ _1f"> </span>=<span class="_ _1f"> </span>process(s);</span></div><div class="t m5 x17 h2d y2a38 ff6 fs20 fc6 sc0 ls0 ws0">25<span class="_ _20"> </span><span class="ffd fs1e fc2">return<span class="_ _e"> </span>r.u[0]<span class="_ _1f"> </span>+<span class="_ _1f"> </span>r.u[1]<span class="_ _e"> </span>+<span class="_ _1f"> </span>r.q;</span></div><div class="t m5 x17 h2d y3ed ff6 fs20 fc6 sc0 ls0 ws0">26<span class="_ _1c"> </span><span class="ffd fs1e fc2">}</span></div><div class="t m5 x17 h26 y30b4 ff9 fs19 fc2 sc0 ls0 ws0">Gcc<span class="_ _10"> </span><span class="ff7">generates<span class="_"> </span>the<span class="_"> </span>following<span class="_"> </span>code<span class="_"> </span>for<span class="_"> </span>these<span class="_"> </span>two<span class="_"> </span>functions:</span></div><div class="t m5 x2e h61 y3228 ff13 fs35 fc6 sc0 ls0 ws0">strB<span class="_ _f"> </span>process(strA<span class="_ _f"> </span>s)</div><div class="t m5 x2c h2d y35d ff6 fs20 fc6 sc0 ls0 ws0">1<span class="_ _1c"> </span><span class="ffd fs1e fc2">process:</span></div><div class="t m5 x2c h2d y3229 ff6 fs20 fc6 sc0 ls0 ws0">2<span class="_ _45"> </span><span class="ffd fs1e fc2">movq<span class="_ _46"> </span>%rdi,<span class="_ _e"> </span>%rax</span></div><div class="t m5 x2c h2d y322a ff6 fs20 fc6 sc0 ls0 ws0">3<span class="_ _45"> </span><span class="ffd fs1e fc2">movq<span class="_ _46"> </span>24(%rsp),<span class="_ _e"> </span>%rdx</span></div><div class="t m5 x2c h2d y322b ff6 fs20 fc6 sc0 ls0 ws0">4<span class="_ _45"> </span><span class="ffd fs1e fc2">movq<span class="_ _46"> </span>(%rdx),<span class="_ _e"> </span>%rdx</span></div><div class="t m5 x2c h2d y322c ff6 fs20 fc6 sc0 ls0 ws0">5<span class="_ _45"> </span><span class="ffd fs1e fc2">movq<span class="_ _46"> </span>16(%rsp),<span class="_ _e"> </span>%rcx</span></div><div class="t m5 x2c h2d y441 ff6 fs20 fc6 sc0 ls0 ws0">6<span class="_ _45"> </span><span class="ffd fs1e fc2">movq<span class="_ _46"> </span>%rcx,<span class="_ _e"> </span>(%rdi)</span></div><div class="t m5 x2c h2d y2c5c ff6 fs20 fc6 sc0 ls0 ws0">7<span class="_ _45"> </span><span class="ffd fs1e fc2">movq<span class="_ _46"> </span>8(%rsp),<span class="_ _e"> </span>%rcx</span></div><div class="t m5 x2c h2d y322d ff6 fs20 fc6 sc0 ls0 ws0">8<span class="_ _45"> </span><span class="ffd fs1e fc2">movq<span class="_ _46"> </span>%rcx,<span class="_ _e"> </span>8(%rdi)</span></div><div class="t m5 x2c h2d y24a ff6 fs20 fc6 sc0 ls0 ws0">9<span class="_ _45"> </span><span class="ffd fs1e fc2">movq<span class="_ _46"> </span>%rdx,<span class="_ _e"> </span>16(%rdi)</span></div><div class="t m5 x17 h2d y8f9 ff6 fs20 fc6 sc0 ls0 ws0">10<span class="_ _45"> </span><span class="ffd fs1e fc2">ret</span></div><div class="t m5 x2e h61 y8fa ff13 fs35 fc6 sc0 ls0 ws0">long<span class="_ _f"> </span>eval(long<span class="_ _f"> </span>x,<span class="_ _f"> </span>long<span class="_ _e"> </span>y,<span class="_ _21"> </span>long<span class="_ _f"> </span>z)</div><div class="t m5 x2e h61 y322e ff13 fs35 fc6 sc0 ls0 ws0">x<span class="_ _f"> </span>in<span class="_ _f"> </span>%rdi,<span class="_ _f"> </span>y<span class="_ _e"> </span>in<span class="_ _21"> </span>%rsi,<span class="_ _f"> </span>z<span class="_ _e"> </span>in<span class="_ _21"> </span>%rdx</div><div class="t m5 x2c h2e y2594 ff6 fs20 fc6 sc0 ls0 ws0">1</div><div class="t m5 x2d h2d y211a ffd fs1e fc2 sc0 ls0 ws0">eval:</div><div class="t m5 x2c h2d y74e ff6 fs20 fc6 sc0 ls0 ws0">2<span class="_ _45"> </span><span class="ffd fs1e fc2">subq<span class="_ _46"> </span>$104,<span class="_ _e"> </span>%rsp</span></div><div class="t m5 x2c h2d y278 ff6 fs20 fc6 sc0 ls0 ws0">3<span class="_ _45"> </span><span class="ffd fs1e fc2">movq<span class="_ _46"> </span>%rdx,<span class="_ _e"> </span>24(%rsp)</span></div><div class="t m5 x2c h2d y24e1 ff6 fs20 fc6 sc0 ls0 ws0">4<span class="_ _45"> </span><span class="ffd fs1e fc2">leaq<span class="_ _46"> </span>24(%rsp),<span class="_ _e"> </span>%rax</span></div><div class="t m5 x2c h2e y13c0 ff6 fs20 fc6 sc0 ls0 ws0">5</div><div class="t m5 xd1 h2d y543 ffd fs1e fc2 sc0 ls0 ws0">movq<span class="_ _46"> </span>%rdi,<span class="_ _e"> </span>(%rsp)</div><div class="t m5 x2c h2e y587 ff6 fs20 fc6 sc0 ls0 ws0">6</div><div class="t m5 xd1 h2d ye14 ffd fs1e fc2 sc0 ls0 ws0">movq<span class="_ _46"> </span>%rsi,<span class="_ _e"> </span>8(%rsp)</div><div class="t m5 x2c h2d yeef ff6 fs20 fc6 sc0 ls0 ws0">7<span class="_ _45"> </span><span class="ffd fs1e fc2">movq<span class="_ _46"> </span>%rax,<span class="_ _e"> </span>16(%rsp)</span></div><div class="t m5 x2c h2d yd7a ff6 fs20 fc6 sc0 ls0 ws0">8<span class="_ _45"> </span><span class="ffd fs1e fc2">leaq<span class="_ _46"> </span>64(%rsp),<span class="_ _e"> </span>%rdi</span></div><div class="t m5 x2c h2d y1db4 ff6 fs20 fc6 sc0 ls0 ws0">9<span class="_ _45"> </span><span class="ffd fs1e fc2">call<span class="_ _46"> </span>process</span></div></div><div class="pi" data-data='{"ctm":[2.000000,0.000000,0.000000,2.000000,0.000000,0.000000]}'></div></div>
