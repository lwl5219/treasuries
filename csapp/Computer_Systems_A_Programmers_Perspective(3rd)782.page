<div id="pf30e" class="pf w2 h11" data-page-no="30e"><div class="pc pc30e w2 h11"><img class="bi x0 y0 w1 h1" alt="" src="csapp/bg30e.png"/><div class="t m5 x100 h28 y9b ff6 fs1f fc2 sc0 ls0 ws0">Section<span class="_ _10"> </span>8.4<span class="_ _60"> </span>Process<span class="_ _10"> </span>Control<span class="_ _3e"> </span><span class="ffe fs1e">781</span></div><div class="t m5 x72 h3d y2d1a ff14 fs26 fc6 sc0 ls0 ws0">.</div><div class="t m5 x26 h26 ye7 ff7 fs19 fc1 sc0 ls0 ws0">WNOHANG<span class="_"> </span><span class="ffd">|<span class="_ _10"> </span></span>WUNTRA<span class="_ _1"></span>CED:<span class="_"> </span>Return<span class="_"> </span>immediately<span class="_ _7"></span>,<span class="_"> </span>with<span class="_"> </span>a<span class="_"> </span>return<span class="_"> </span>value<span class="_"> </span>of</div><div class="t m5 x26 h26 y2a7 ff7 fs19 fc1 sc0 ls0 ws0">0,<span class="_"> </span>if<span class="_"> </span>none<span class="_ _11"> </span>of<span class="_"> </span>the<span class="_ _11"> </span>children<span class="_"> </span>in<span class="_"> </span>the<span class="_ _11"> </span>wait<span class="_"> </span>set<span class="_"> </span>has<span class="_ _11"> </span>stopped<span class="_"> </span>or<span class="_ _11"> </span>terminated,<span class="_"> </span>or<span class="_"> </span>with<span class="_ _11"> </span>a</div><div class="t m5 x26 h26 y2a8 ff7 fs19 fc1 sc0 ls0 ws0">return<span class="_"> </span>value<span class="_"> </span>equal<span class="_"> </span>to<span class="_"> </span>the<span class="_"> </span>PID<span class="_"> </span>of<span class="_"> </span>one<span class="_"> </span>of<span class="_"> </span>the<span class="_"> </span>stopped<span class="_"> </span>or<span class="_"> </span>terminated<span class="_"> </span>children.</div><div class="t m5 x17 h42 y667f ff6 fs29 fc6 sc0 ls0 ws0">Checking<span class="_ _11"> </span>the<span class="_ _16"> </span>Exit<span class="_ _16"> </span>Status<span class="_ _11"> </span>of<span class="_ _16"> </span>a<span class="_ _16"> </span>Reaped<span class="_ _11"> </span>Child</div><div class="t m5 x17 h26 y6680 ff7 fs19 fc1 sc0 ls0 ws0">If<span class="_ _13"> </span>the<span class="_"> </span><span class="ffd">statusp<span class="_ _13"> </span></span>argument<span class="_"> </span>is<span class="_ _13"> </span>non-NULL,<span class="_ _13"> </span>then<span class="_"> </span><span class="ffd">waitpid<span class="_ _13"> </span></span>encodes<span class="_"> </span>status<span class="_ _13"> </span>information</div><div class="t m5 x17 h26 y6681 ff7 fs19 fc1 sc0 ls0 ws0">about<span class="_ _16"> </span>the<span class="_ _14"> </span>child<span class="_ _16"> </span>that<span class="_ _16"> </span>caused<span class="_ _14"> </span>the<span class="_ _16"> </span>return<span class="_ _14"> </span>in<span class="_ _16"> </span><span class="ffd">status</span>,<span class="_ _14"> </span>which<span class="_ _14"> </span>is<span class="_ _16"> </span>the<span class="_ _14"> </span>value<span class="_ _16"> </span>pointed<span class="_ _16"> </span>to</div><div class="t m5 x17 h26 y6682 ff7 fs19 fc1 sc0 ls0 ws0">by<span class="_ _16"> </span><span class="ffd">statusp</span><span class="ls280">.T<span class="_ _9"></span>h<span class="_ _49"></span>e<span class="ffd ls0">wait.h<span class="_ _16"> </span><span class="ff7">include<span class="_ _16"> </span>ﬁle<span class="_ _11"> </span>deﬁnes<span class="_ _16"> </span>several<span class="_ _16"> </span>macros<span class="_ _16"> </span>for<span class="_ _16"> </span>interpreting<span class="_ _16"> </span>the</span></span></span></div><div class="t m5 x17 h26 y6683 ffd fs19 fc1 sc0 ls0 ws0">status<span class="_ _10"> </span><span class="ff7">argument:</span></div><div class="t m5 x72 h26 y6684 ff7 fs19 fc1 sc0 ls0 ws0">WIFEXITED(<span class="ffd">status</span>).<span class="_ _e"> </span>Returns<span class="_ _13"> </span>true<span class="_ _6"> </span>if<span class="_ _6"> </span>the<span class="_ _13"> </span>child<span class="_ _6"> </span>terminated<span class="_ _6"> </span>normally<span class="_ _3"></span>,<span class="_ _13"> </span>via<span class="_ _6"> </span>a<span class="_ _13"> </span>call</div><div class="t m5 x30 h26 y6685 ff7 fs19 fc1 sc0 ls0 ws0">to<span class="_"> </span><span class="ffd">exit<span class="_ _10"> </span></span>or<span class="_"> </span>a<span class="_"> </span>return.</div><div class="t m5 x72 h26 y6686 ff7 fs19 fc1 sc0 ls0 ws0">WEXITST<span class="_ _3"></span>A<span class="_ _1"></span>TUS(<span class="ffd">status</span>).<span class="_ _e"> </span>Returns<span class="_ _15"> </span>the<span class="_ _15"> </span>exit<span class="_ _14"> </span>status<span class="_ _15"> </span>of<span class="_ _14"> </span>a<span class="_ _15"> </span>normally<span class="_ _15"> </span>terminated</div><div class="t m5 x30 h26 y6687 ff7 fs19 fc1 sc0 ls0 ws0">child.<span class="_"> </span>T<span class="_ _1"></span>his<span class="_"> </span>status<span class="_"> </span>is<span class="_"> </span>only<span class="_"> </span>deﬁned<span class="_"> </span>if<span class="_"> </span>WIFEXITED()<span class="_"> </span>returned<span class="_"> </span>true.</div><div class="t m5 x72 h26 y6688 ff7 fs19 fc1 sc0 ls0 ws0">WIFSIGN<span class="_ _1"></span>ALED(<span class="ffd">status</span>).<span class="_ _1f"> </span>Returns<span class="_ _21"> </span>true<span class="_ _15"> </span>if<span class="_ _21"> </span>the<span class="_ _21"> </span>child<span class="_ _21"> </span>process<span class="_ _21"> </span>terminated<span class="_ _15"> </span>be-</div><div class="t m5 x30 h26 y6689 ff7 fs19 fc1 sc0 ls0 ws0">cause<span class="_"> </span>of<span class="_"> </span>a<span class="_"> </span>signal<span class="_"> </span>that<span class="_"> </span>was<span class="_"> </span>not<span class="_"> </span>caught.</div><div class="t m5 x72 h26 y668a ff7 fs19 fc1 sc0 ls0 ws0">WTERMSIG(<span class="ffd">status</span>).<span class="_ _e"> </span>Returns<span class="_"> </span>the<span class="_ _13"> </span>number<span class="_"> </span>of<span class="_ _13"> </span>the<span class="_"> </span>signal<span class="_ _13"> </span>that<span class="_"> </span>caused<span class="_ _13"> </span>the<span class="_"> </span>child</div><div class="t m5 x30 h26 y668b ff7 fs19 fc1 sc0 ls0 ws0">process<span class="_ _15"> </span>to<span class="_ _21"> </span>terminate.<span class="_ _15"> </span>T<span class="_ _1"></span>his<span class="_ _21"> </span>status<span class="_ _21"> </span>is<span class="_ _21"> </span>only<span class="_ _15"> </span>deﬁned<span class="_ _21"> </span>if<span class="_ _21"> </span>WIFSIGNALED()</div><div class="t m5 x30 h26 y668c ff7 fs19 fc1 sc0 ls0 ws0">returned<span class="_"> </span>true<span class="_ _1"></span>.</div><div class="t m5 x72 h26 y668d ff7 fs19 fc1 sc0 ls0 ws0">WIFSTOPPED(<span class="ffd">status</span>).<span class="_ _e"> </span>Returns<span class="_ _15"> </span>true<span class="_ _21"> </span>if<span class="_ _15"> </span>the<span class="_ _21"> </span>child<span class="_ _15"> </span>that<span class="_ _15"> </span>caused<span class="_ _21"> </span>the<span class="_ _15"> </span>return<span class="_ _21"> </span>is</div><div class="t m5 x30 h26 y668e ff7 fs19 fc1 sc0 ls0 ws0">currently<span class="_"> </span>stopped.</div><div class="t m5 x72 h26 y668f ff7 fs19 fc1 sc0 ls0 ws0">WSTOPSIG(<span class="ffd">status</span>).<span class="_ _e"> </span>Returns<span class="_ _11"> </span>the<span class="_ _11"> </span>number<span class="_"> </span>of<span class="_ _11"> </span>the<span class="_ _11"> </span>signal<span class="_ _11"> </span>that<span class="_ _11"> </span>caused<span class="_ _11"> </span>the<span class="_ _11"> </span>child</div><div class="t m5 x30 h26 y6690 ff7 fs19 fc1 sc0 ls0 ws0">to<span class="_"> </span>stop<span class="_ _1"></span>.<span class="_"> </span>This<span class="_"> </span>status<span class="_"> </span>is<span class="_"> </span>only<span class="_"> </span>deﬁned<span class="_"> </span>if<span class="_"> </span>WIFST<span class="_ _1"></span>OPPED()<span class="_"> </span>returned<span class="_"> </span>true.</div><div class="t m5 x72 h26 y6691 ff7 fs19 fc1 sc0 ls0 ws0">WIFCONTINUED(<span class="ffd">status</span>).<span class="_ _e"> </span>Returns<span class="_ _13"> </span>true<span class="_ _6"> </span>if<span class="_ _13"> </span>the<span class="_ _6"> </span>child<span class="_ _13"> </span>process<span class="_ _6"> </span>was<span class="_ _13"> </span>restarted<span class="_ _6"> </span>by</div><div class="t m5 x30 h26 y6692 ff7 fs19 fc1 sc0 ls0 ws0">receipt<span class="_"> </span>of<span class="_"> </span>a<span class="_"> </span>SIGCONT<span class="_"> </span>signal.</div><div class="t m5 x17 h42 y6693 ff6 fs29 fc6 sc0 ls0 ws0">Error<span class="_ _11"> </span>Conditions</div><div class="t m5 x17 h46 y6694 ff7 fs19 fc1 sc0 ls0 ws0">If<span class="_"> </span>the<span class="_"> </span>calling<span class="_"> </span>process<span class="_"> </span>has<span class="_"> </span>no<span class="_ _11"> </span>children,<span class="_"> </span>then<span class="_"> </span><span class="ffd">waitpid<span class="_ _10"> </span></span>returns<span class="_ _11"> </span><span class="ff12">−</span>1<span class="_ _13"> </span>and<span class="_"> </span>sets<span class="_"> </span><span class="ffd">errno<span class="_ _11"> </span></span>to</div><div class="t m5 x17 h46 y6695 ff7 fs19 fc1 sc0 ls0 ws0">ECHILD<span class="_ _3"></span>.<span class="_"> </span>If<span class="_"> </span>the<span class="_"> </span><span class="ffd">waitpid<span class="_ _11"> </span></span>function<span class="_"> </span>was<span class="_"> </span>interrupted<span class="_"> </span>by<span class="_"> </span>a<span class="_"> </span>signal,<span class="_"> </span>then<span class="_"> </span>it<span class="_ _11"> </span>returns<span class="_"> </span><span class="ff12">−</span>1</div><div class="t m5 x17 h26 y6696 ff7 fs19 fc1 sc0 ls0 ws0">and<span class="_"> </span>sets<span class="_"> </span><span class="ffd">errno<span class="_ _10"> </span></span>to<span class="_"> </span>EINTR.</div><div class="t m5 x17 h47 y6697 ffe fs2b fc1 sc0 ls0 ws0">Practice<span class="_"> </span>Problem<span class="_"> </span>8.3<span class="_ _1f"> </span><span class="fs16">(solution<span class="_"> </span>page<span class="_"> </span>833)</span></div><div class="t m5 x17 h26 y6698 ff7 fs19 fc1 sc0 ls0 ws0">List<span class="_"> </span>all<span class="_"> </span>of<span class="_"> </span>the<span class="_"> </span>possible<span class="_"> </span>output<span class="_"> </span>sequences<span class="_"> </span>for<span class="_"> </span>the<span class="_"> </span>following<span class="_"> </span>program:</div><div class="t m5 x1e7 h2c y6699 ffa fs16 fc1 sc0 ls0 ws0">code/ecf/global-waitprob0.c</div><div class="t m5 x2c h2d y107b ff6 fs20 fc6 sc0 ls0 ws0">1<span class="_ _1c"> </span><span class="ffd fs1e fc2">int<span class="_ _1f"> </span>main()</span></div><div class="t m5 x2c h2d y13c0 ff6 fs20 fc6 sc0 ls0 ws0">2<span class="_ _1c"> </span><span class="ffd fs1e fc2">{</span></div><div class="t m5 x2c h2e y587 ff6 fs20 fc6 sc0 ls0 ws0">3</div><div class="t m5 x142 h2d y832 ffd fs1e fc2 sc0 ls0 ws0">if<span class="_ _e"> </span>(Fork()<span class="_ _1f"> </span>==<span class="_ _1f"> </span>0)<span class="_ _e"> </span>{</div><div class="t m5 x2c h2d y8d6 ff6 fs20 fc6 sc0 ls0 ws0">4<span class="_ _70"> </span><span class="ffd fs1e fc2">printf(&quot;9&quot;);<span class="_ _e"> </span>fflush(stdout);</span></div><div class="t m5 x2c h2d y77e ff6 fs20 fc6 sc0 ls0 ws0">5<span class="_ _20"> </span><span class="ffd fs1e fc2">}</span></div><div class="t m5 x2c h2d ye95 ff6 fs20 fc6 sc0 ls0 ws0">6<span class="_ _20"> </span><span class="ffd fs1e fc2">else<span class="_ _e"> </span>{</span></div></div><div class="pi" data-data='{"ctm":[2.000000,0.000000,0.000000,2.000000,0.000000,0.000000]}'></div></div>
