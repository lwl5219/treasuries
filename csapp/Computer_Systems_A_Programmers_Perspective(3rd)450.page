<div id="pf1c2" class="pf w2 h11" data-page-no="1c2"><div class="pc pc1c2 w2 h11"><img class="bi x0 y0 w1 h1" alt="" src="csapp/bg1c2.png"/><div class="t m5 x1d9 h28 y9b ff6 fs1f fc2 sc0 ls0 ws0">Section<span class="_ _10"> </span>4.4<span class="_ _60"> </span>General<span class="_ _10"> </span>Principles<span class="_ _10"> </span>of<span class="_ _10"> </span>Pipelining<span class="_ _3e"> </span><span class="ffe fs1e">449</span></div><div class="t m5 x17 h2f ye7 ffe fs16 fc6 sc0 ls0 ws0">Figure<span class="_"> </span>4.32</div><div class="t m5 x17 h2f y58a ffe fs16 fc1 sc0 ls0 ws0">Unpipelined<span class="_ _13"> </span>computation</div><div class="t m5 x17 h34 y58b ffe fs16 fc1 sc0 ls0 ws0">hardware.<span class="_ _16"> </span><span class="ff6">On<span class="_ _11"> </span>each<span class="_ _16"> </span>320</span></div><div class="t m5 x17 h34 y58c ff6 fs16 fc1 sc0 ls0 ws0">ps<span class="_ _15"> </span>cycle,<span class="_ _21"> </span>the<span class="_ _15"> </span>system</div><div class="t m5 x17 h34 y58d ff6 fs16 fc1 sc0 ls0 ws0">spends<span class="_ _11"> </span>300<span class="_ _11"> </span>ps<span class="_ _16"> </span>evaluating</div><div class="t m5 x17 h34 y58e ff6 fs16 fc1 sc0 ls0 ws0">a<span class="_ _14"> </span>combinational<span class="_ _14"> </span>logic</div><div class="t m5 x17 h34 y58f ff6 fs16 fc1 sc0 ls0 ws0">function<span class="_ _10"> </span>and<span class="_ _11"> </span>20<span class="_ _11"> </span>ps<span class="_ _11"> </span>storing</div><div class="t m5 x17 h34 y8d9 ff6 fs16 fc1 sc0 ls0 ws0">the<span class="_ _16"> </span>results<span class="_ _16"> </span>in<span class="_ _16"> </span>an<span class="_ _16"> </span>output</div><div class="t m5 x17 h34 y8da ff6 fs16 fc1 sc0 ls0 ws0">register<span class="_ _3"></span>.</div><div class="t m5 x8f h3f y3e01 ff43 fs27 fc1 sc0 ls0 ws0">(a) Hardware: Unpipelined</div><div class="t m5 x8f h3f y3e02 ff43 fs27 fc1 sc0 ls0 ws0">(b) Pipeline diagram</div><div class="t m5 x200 h3f y3e03 ff43 fs27 fc1 sc0 ls0 ws0">300 ps</div><div class="t m5 x19a h3f y3e04 ff43 fs27 fc1 sc0 ls0 ws0">20 ps</div><div class="t m5 xa9 h3f y3e05 ff43 fs27 fc1 sc0 ls0 ws0">Delay <span class="ff24"></span> 320 ps</div><div class="t m5 xa9 h3f y3e06 ff43 fs27 fc1 sc0 ls0 ws0">Throughput <span class="ff24"> </span>3.12 GIPS</div><div class="t m5 xe1 h3f y3e05 ff43 fs27 fc1 sc0 ls0 ws0">Combinational</div><div class="t m5 x86 h3f y3e06 ff43 fs27 fc1 sc0 ls0 ws0">logic</div><div class="t m5 x1df h3f y3e07 ff43 fs27 fc1 sc0 ls0 ws0">R</div><div class="t m5 x1aa h3f y3e08 ff43 fs27 fc1 sc0 ls0 ws0">e</div><div class="t m5 x1aa h3f y3e09 ff43 fs27 fc1 sc0 ls0 ws0">g</div><div class="t m5 x194 h3f y3e0a ff43 fs27 fc1 sc0 ls0 ws0">Clock</div><div class="t m5 xb3 h40 y3e0b ff44 fs28 fc1 sc0 ls0 ws0">I1</div><div class="t m5 xb3 h40 y3e0c ff44 fs28 fc1 sc0 ls0 ws0">I2</div><div class="t m5 xb3 h40 y3e0d ff44 fs28 fc1 sc0 ls0 ws0">I3</div><div class="t m5 x1e6 h3f y3e0e ff43 fs27 fc1 sc0 ls0 ws0">T<span class="_ _0"></span>ime</div><div class="t m5 x17 h26 y3e0f ff7 fs19 fc1 sc0 ls0 ws0">the<span class="_"> </span>logic<span class="_ _13"> </span>decodes<span class="_"> </span>these<span class="_"> </span>to<span class="_ _13"> </span>generate<span class="_"> </span>audio<span class="_"> </span>signals<span class="_ _3"></span>.<span class="_"> </span>T<span class="_ _1"></span>he<span class="_"> </span>computational<span class="_"> </span>block<span class="_ _13"> </span>in<span class="_"> </span>the</div><div class="t m5 x17 h26 y3e10 ff7 fs19 fc1 sc0 ls0 ws0">ﬁgure<span class="_ _16"> </span>is<span class="_ _11"> </span>implemented<span class="_ _16"> </span>as<span class="_ _16"> </span>combinational<span class="_ _16"> </span>logic,<span class="_ _16"> </span>meaning<span class="_ _11"> </span>that<span class="_ _16"> </span>the<span class="_ _16"> </span>signals<span class="_ _16"> </span>will<span class="_ _11"> </span>pass</div><div class="t m5 x17 h26 y3e11 ff7 fs19 fc1 sc0 ls0 ws0">through<span class="_ _16"> </span>a<span class="_ _16"> </span>series<span class="_ _16"> </span>of<span class="_ _16"> </span>logic<span class="_ _16"> </span>gates<span class="_ _1"></span>,<span class="_ _16"> </span>with<span class="_ _16"> </span>the<span class="_ _16"> </span>outputs<span class="_ _16"> </span>becoming<span class="_ _16"> </span>some<span class="_ _16"> </span>function<span class="_ _16"> </span>of<span class="_ _16"> </span>the</div><div class="t m5 x17 h26 y3e12 ff7 fs19 fc1 sc0 ls0 ws0">inputs<span class="_"> </span>after<span class="_"> </span>some<span class="_"> </span>time<span class="_"> </span>delay<span class="_ _3"></span>.</div><div class="t m5 x26 h26 y3e13 ff7 fs19 fc1 sc0 ls0 ws0">In<span class="_ _11"> </span>contemporary<span class="_ _16"> </span>logic<span class="_ _11"> </span>design,<span class="_ _16"> </span>we<span class="_ _11"> </span>measure<span class="_ _16"> </span>circuit<span class="_ _11"> </span>delays<span class="_ _16"> </span>in<span class="_ _11"> </span>units<span class="_ _16"> </span>of<span class="_ _11"> </span><span class="ffa">picosec-</span></div><div class="t m5 x17 h26 y3e14 ffa fs19 fc1 sc0 ls0 ws0">onds<span class="_ _11"> </span><span class="ff7">(abbreviated<span class="_ _11"> </span>“ps”),<span class="_ _11"> </span>or<span class="_ _11"> </span>10</span></div><div class="t m5 x8f h4b y3e15 ff12 fs25 fc1 sc0 ls0 ws0">−<span class="ff7">12</span></div><div class="t m5 xe7 h26 y3e16 ff7 fs19 fc1 sc0 ls0 ws0">seconds<span class="_ _1"></span>.<span class="_ _11"> </span>In<span class="_ _11"> </span>this<span class="_ _11"> </span>example,<span class="_"> </span>we<span class="_ _11"> </span>assume<span class="_ _11"> </span>the<span class="_ _11"> </span>com-</div><div class="t m5 x17 h26 y3e17 ff7 fs19 fc1 sc0 ls0 ws0">binational<span class="_ _16"> </span>logic<span class="_ _11"> </span>requires<span class="_ _16"> </span>300<span class="_ _16"> </span>ps<span class="_ _3"></span>,<span class="_ _16"> </span>while<span class="_ _16"> </span>the<span class="_ _16"> </span>loading<span class="_ _16"> </span>of<span class="_ _11"> </span>the<span class="_ _16"> </span>register<span class="_ _16"> </span>requires<span class="_ _11"> </span>20<span class="_ _16"> </span>ps<span class="_ _1"></span>.</div><div class="t m5 x17 h26 y3e18 ff7 fs19 fc1 sc0 ls0 ws0">F<span class="_ _1"></span>igure<span class="_ _11"> </span>4.32<span class="_ _11"> </span>shows<span class="_ _11"> </span>a<span class="_"> </span>form<span class="_ _11"> </span>of<span class="_ _11"> </span>timing<span class="_ _11"> </span>diagram<span class="_"> </span>known<span class="_ _11"> </span>as<span class="_ _11"> </span>a<span class="_ _11"> </span><span class="ffa">pipeline<span class="_ _11"> </span>diagram</span>.<span class="_"> </span>In<span class="_ _11"> </span>this</div><div class="t m5 x17 h26 y3e19 ff7 fs19 fc1 sc0 ls0 ws0">diagram,<span class="_ _13"> </span>time<span class="_"> </span>ﬂows<span class="_ _13"> </span>from<span class="_ _13"> </span>left<span class="_ _13"> </span>to<span class="_ _13"> </span>right.<span class="_"> </span>A<span class="_ _13"> </span>series<span class="_ _13"> </span>of<span class="_ _13"> </span>instructions<span class="_"> </span>(here<span class="_ _13"> </span>named<span class="_ _13"> </span><span class="ffd">I1</span>,<span class="_ _13"> </span><span class="ffd">I2</span>,</div><div class="t m5 x17 h26 y3e1a ff7 fs19 fc1 sc0 ls0 ws0">and<span class="_ _16"> </span><span class="ffd">I3</span>)<span class="_ _16"> </span>are<span class="_ _16"> </span>written<span class="_ _16"> </span>from<span class="_ _16"> </span>top<span class="_ _16"> </span>to<span class="_ _16"> </span>bottom.<span class="_ _16"> </span>T<span class="_ _1"></span>he<span class="_ _16"> </span>solid<span class="_ _16"> </span>rectangles<span class="_ _16"> </span>indicate<span class="_ _16"> </span>the<span class="_ _16"> </span>times</div><div class="t m5 x17 h26 y3e1b ff7 fs19 fc1 sc0 ls0 ws0">during<span class="_ _14"> </span>which<span class="_ _14"> </span>these<span class="_ _15"> </span>instructions<span class="_ _14"> </span>are<span class="_ _14"> </span>executed.<span class="_ _15"> </span>In<span class="_ _14"> </span>this<span class="_ _14"> </span>implementation,<span class="_ _21"> </span>we<span class="_ _14"> </span>must</div><div class="t m5 x17 h26 y3e1c ff7 fs19 fc1 sc0 ls0 ws0">complete<span class="_ _13"> </span>one<span class="_ _6"> </span>instruction<span class="_ _13"> </span>before<span class="_ _6"> </span>beginning<span class="_ _13"> </span>the<span class="_ _6"> </span>next.<span class="_ _13"> </span>Hence<span class="_ _1"></span>,<span class="_ _13"> </span>the<span class="_ _13"> </span>boxes<span class="_ _6"> </span>do<span class="_ _13"> </span>not<span class="_ _13"> </span>over<span class="_ _3"></span>-</div><div class="t m5 x17 h26 y3e1d ff7 fs19 fc1 sc0 ls0 ws0">lap<span class="_ _13"> </span>one<span class="_ _6"> </span>another<span class="_ _13"> </span>vertically<span class="_ _7"></span>.<span class="_ _13"> </span>T<span class="_ _1"></span>he<span class="_ _13"> </span>following<span class="_ _6"> </span>formula<span class="_ _13"> </span>gives<span class="_ _6"> </span>the<span class="_ _13"> </span>maximum<span class="_ _6"> </span>rate<span class="_ _13"> </span>at<span class="_ _6"> </span>which</div><div class="t m5 x17 h26 y3e1e ff7 fs19 fc1 sc0 ls0 ws0">we<span class="_"> </span>could<span class="_"> </span>operate<span class="_"> </span>the<span class="_"> </span>system:</div><div class="t m5 x1b6 h46 y3e1f ffa fs19 fc1 sc0 ls0 ws0">Throughput<span class="_"> </span><span class="ff12">=</span></div><div class="t m5 x4d h26 y3e20 ff7 fs19 fc1 sc0 ls0 ws0">1<span class="_ _6"> </span>instruction</div><div class="t m5 x127 h46 y3e21 ff11 fs19 fc1 sc0 ls0 ws0">(<span class="ff7">20<span class="_"> </span><span class="ff12">+<span class="_ _13"></span></span>300</span>)<span class="_ _10"> </span><span class="ff7">picoseconds</span></div><div class="t m5 x1c8 h45 y3e22 ff11 fs19 fc1 sc0 ls0 ws0">.</div><div class="t m5 x88 h26 y3e23 ff7 fs19 fc1 sc0 ls0 ws0">1<span class="_ _1"></span><span class="ff11">,<span class="ff7">000<span class="_"> </span>picoseconds</span></span></div><div class="t m5 x17c h26 y3e21 ff7 fs19 fc1 sc0 ls0 ws0">1<span class="_ _6"> </span>nanosecond</div><div class="t m5 x1f8 h46 y3e24 ff12 fs19 fc1 sc0 ls0 ws0">≈<span class="_ _13"> </span><span class="ff7">3<span class="ff11">.</span>12<span class="_"> </span>GIPS</span></div><div class="t m5 x17 h26 y3e25 ff7 fs19 fc1 sc0 ls0 ws0">W<span class="_ _3"></span>e<span class="_ _e"> </span>express<span class="_ _e"> </span>throughput<span class="_ _e"> </span>in<span class="_ _e"> </span>units<span class="_ _e"> </span>of<span class="_ _e"> </span>giga-instructions<span class="_ _e"> </span>per<span class="_ _e"> </span>second<span class="_ _e"> </span>(abbreviated</div><div class="t m5 x17 h26 y3e26 ff7 fs19 fc1 sc0 ls0 ws0">GIPS),<span class="_"> </span>or<span class="_ _11"> </span>billions<span class="_ _11"> </span>of<span class="_"> </span>instructions<span class="_ _11"> </span>per<span class="_ _11"> </span>second.<span class="_"> </span>The<span class="_"> </span>total<span class="_"> </span>time<span class="_ _11"> </span>required<span class="_ _11"> </span>to<span class="_"> </span>perform</div><div class="t m5 x17 h26 y3e27 ff7 fs19 fc1 sc0 ls0 ws0">a<span class="_"> </span>single<span class="_"> </span>instruction<span class="_"> </span>from<span class="_"> </span>beginning<span class="_ _13"> </span>to<span class="_"> </span>end<span class="_"> </span>is<span class="_"> </span>known<span class="_"> </span>as<span class="_"> </span>the<span class="_"> </span><span class="ffa">latency<span class="_ _0"></span><span class="ff7">.<span class="_"> </span>In<span class="_"> </span>this<span class="_"> </span>system,</span></span></div><div class="t m5 x17 h26 y3e28 ff7 fs19 fc1 sc0 ls0 ws0">the<span class="_"> </span>latency<span class="_"> </span>is<span class="_"> </span>320<span class="_ _13"> </span>ps<span class="_ _3"></span>,<span class="_"> </span>the<span class="_"> </span>reciprocal<span class="_"> </span>of<span class="_"> </span>the<span class="_"> </span>throughput.</div><div class="t m5 x26 h26 y3e29 ff7 fs19 fc1 sc0 ls0 ws0">Suppose<span class="_ _13"> </span>we<span class="_ _6"> </span>could<span class="_ _13"> </span>divide<span class="_ _13"> </span>the<span class="_ _13"> </span>computation<span class="_ _6"> </span>performed<span class="_ _13"> </span>by<span class="_ _13"> </span>our<span class="_ _6"> </span>system<span class="_ _13"> </span>into<span class="_ _13"> </span>three</div><div class="t m5 x17 h26 y3e2a ff7 fs19 fc1 sc0 ls0 ws0">stages<span class="_ _1"></span>,<span class="_"> </span>A,<span class="_ _13"> </span>B<span class="_ _1"></span>,<span class="_"> </span>and<span class="_ _13"> </span>C,<span class="_"> </span>where<span class="_ _13"> </span>each<span class="_"> </span>requires<span class="_ _13"> </span>100<span class="_ _13"> </span>ps<span class="_ _1"></span>,<span class="_"> </span>as<span class="_"> </span>illustrated<span class="_ _13"> </span>in<span class="_"> </span>F<span class="_ _1"></span>igure<span class="_"> </span>4.33.<span class="_"> </span>T<span class="_ _3"></span>hen</div><div class="t m5 x17 h26 y3e2b ff7 fs19 fc1 sc0 ls0 ws0">we<span class="_"> </span>could<span class="_"> </span>put<span class="_"> </span><span class="ffa">pipeline<span class="_"> </span>registers<span class="_ _11"> </span></span>between<span class="_"> </span>the<span class="_"> </span>stages<span class="_"> </span>so<span class="_ _11"> </span>that<span class="_"> </span>each<span class="_"> </span>instruction<span class="_"> </span>moves</div><div class="t m5 x17 h26 y3e2c ff7 fs19 fc1 sc0 ls0 ws0">through<span class="_ _15"> </span>the<span class="_ _21"> </span>system<span class="_ _15"> </span>in<span class="_ _21"> </span>three<span class="_ _21"> </span>steps<span class="_ _1"></span>,<span class="_ _f"> </span>requiring<span class="_ _21"> </span>three<span class="_ _15"> </span>complete<span class="_ _21"> </span>clock<span class="_ _21"> </span>cycles<span class="_ _15"> </span>from</div><div class="t m5 x17 h26 y3e2d ff7 fs19 fc1 sc0 ls0 ws0">beginning<span class="_ _13"> </span>to<span class="_ _6"> </span>end.<span class="_ _13"> </span>As<span class="_ _6"> </span>the<span class="_ _13"> </span>pipeline<span class="_ _13"> </span>diagram<span class="_ _6"> </span>in<span class="_ _13"> </span>F<span class="_ _1"></span>igure<span class="_ _13"> </span>4.33<span class="_ _6"> </span>illustrates<span class="_ _1"></span>,<span class="_ _13"> </span>we<span class="_ _13"> </span>could<span class="_ _6"> </span>allow</div><div class="t m5 x17 h26 y3e2e ffd fs19 fc1 sc0 ls0 ws0">I2<span class="_ _13"> </span><span class="ff7">to<span class="_ _13"> </span>enter<span class="_ _13"> </span>stage<span class="_"> </span>A<span class="_ _13"> </span>as<span class="_ _13"> </span>soon<span class="_ _13"> </span>as<span class="_ _13"> </span></span>I1<span class="_ _13"> </span><span class="ff7">moves<span class="_ _13"> </span>from<span class="_"> </span>A<span class="_ _13"> </span>to<span class="_ _13"> </span>B<span class="_ _3"></span>,<span class="_ _13"> </span>and<span class="_"> </span>so<span class="_ _13"> </span>on.<span class="_ _13"> </span>In<span class="_ _13"> </span>steady<span class="_ _13"> </span>state<span class="_ _0"></span>,<span class="_ _13"> </span>all</span></div><div class="t m5 x17 h26 y3e2f ff7 fs19 fc1 sc0 ls0 ws0">three<span class="_"> </span>stages<span class="_ _13"> </span>would<span class="_"> </span>be<span class="_"> </span>active<span class="_ _1"></span>,<span class="_"> </span>with<span class="_ _13"> </span>one<span class="_"> </span>instruction<span class="_"> </span>leaving<span class="_ _13"> </span>and<span class="_"> </span>a<span class="_"> </span>new<span class="_ _13"> </span>one<span class="_"> </span>entering</div><div class="t m5 x17 h26 y3e30 ff7 fs19 fc1 sc0 ls0 ws0">the<span class="_ _16"> </span>system<span class="_ _11"> </span>every<span class="_ _16"> </span>clock<span class="_ _16"> </span>cycle<span class="_ _1"></span>.<span class="_ _16"> </span>W<span class="_ _3"></span>e<span class="_ _16"> </span>can<span class="_ _11"> </span>see<span class="_ _16"> </span>this<span class="_ _16"> </span>during<span class="_ _16"> </span>the<span class="_ _11"> </span>third<span class="_ _16"> </span>clock<span class="_ _16"> </span>cycle<span class="_ _11"> </span>in<span class="_ _16"> </span>the</div><div class="t m5 x17 h26 y3e31 ff7 fs19 fc1 sc0 ls0 ws0">pipeline<span class="_ _11"> </span>diagram<span class="_ _11"> </span>where<span class="_ _11"> </span><span class="ffd">I1<span class="_ _11"> </span></span>is<span class="_ _11"> </span>in<span class="_ _11"> </span>stage<span class="_ _11"> </span>C<span class="_ _0"></span>,<span class="_ _11"> </span><span class="ffd">I2<span class="_ _11"> </span></span>is<span class="_ _11"> </span>in<span class="_ _11"> </span>stage<span class="_ _11"> </span>B<span class="_ _3"></span>,<span class="_ _16"> </span>and<span class="_"> </span><span class="ffd">I3<span class="_ _11"> </span></span>is<span class="_ _11"> </span>in<span class="_ _11"> </span>stage<span class="_ _11"> </span>A.<span class="_ _11"> </span>In</div></div><div class="pi" data-data='{"ctm":[2.000000,0.000000,0.000000,2.000000,0.000000,0.000000]}'></div></div>
