<div id="pf394" class="pf w2 h11" data-page-no="394"><div class="pc pc394 w2 h11"><img class="bi x0 y0 w1 h1" alt="" src="csapp/bg394.png"/><div class="t m5 x283 h28 y9b ff6 fs1f fc2 sc0 ls0 ws0">Homework<span class="_ _10"> </span>Problems<span class="_ _1b"> </span><span class="ffe fs1e">915</span></div><div class="t m5 x34 h26 ye7 ff7 fs19 fc2 sc0 ls0 ws0">C.<span class="_ _25"> </span>Physical<span class="_"> </span>memory<span class="_"> </span>reference</div><div class="t m5 x2d h31 y761f ff7 fs21 fc2 sc0 ls0 ws0">Parameter<span class="_ _da"> </span>V<span class="_ _7"></span>alue</div><div class="t m5 x2d h31 y7620 ff7 fs21 fc2 sc0 ls0 ws0">Byte<span class="_"> </span>offset</div><div class="t m5 x2d h31 y7621 ff7 fs21 fc1 sc0 ls0 ws0">Cache<span class="_"> </span>index</div><div class="t m5 x2d h31 y7622 ff7 fs21 fc1 sc0 ls0 ws0">Cache<span class="_"> </span>tag</div><div class="t m5 x2d h31 y7623 ff7 fs21 fc1 sc0 ls0 ws0">Cache<span class="_"> </span>hit?<span class="_"> </span>(Y/N)</div><div class="t m5 x2d h31 y7624 ff7 fs21 fc1 sc0 ls0 ws0">Cache<span class="_"> </span>byte<span class="_"> </span>returned</div><div class="t m5 x17 h73 y7625 ffe fs1e fc6 sc0 ls0 ws0">9.14<span class="_ _23"> </span><span class="ff10 fs19">◆◆</span></div><div class="t m5 x17 h26 y7626 ff7 fs19 fc1 sc0 ls0 ws0">Given<span class="_"> </span>an<span class="_"> </span>input<span class="_"> </span>ﬁle<span class="_ _11"> </span><span class="ffd">hello.txt<span class="_ _10"> </span></span>that<span class="_ _11"> </span>consists<span class="_"> </span>of<span class="_"> </span>the<span class="_"> </span>string<span class="_ _11"> </span><span class="ffd">Hello,<span class="_ _16"> </span>world!\n</span>,<span class="_"> </span>write</div><div class="t m5 x17 h26 y7627 ff7 fs19 fc1 sc0 ls0 ws0">a<span class="_ _f"> </span>C<span class="_ _f"> </span>program<span class="_ _f"> </span>that<span class="_ _f"> </span>uses<span class="_ _f"> </span><span class="ffd">mmap<span class="_ _f"> </span></span>to<span class="_ _f"> </span>change<span class="_ _f"> </span>the<span class="_ _f"> </span>contents<span class="_ _f"> </span>of<span class="_ _f"> </span><span class="ffd">hello.txt<span class="_ _f"> </span></span>to<span class="_ _f"> </span><span class="ffd">Jello,</span></div><div class="t m5 x17 h26 y7628 ffd fs19 fc1 sc0 ls0 ws0">world!\n<span class="ff7">.</span></div><div class="t m5 x17 h73 y7629 ffe fs1e fc6 sc0 ls0 ws0">9.15<span class="_ _23"> </span><span class="ff10 fs19">◆</span></div><div class="t m5 x17 h26 y762a ff7 fs19 fc1 sc0 ls0 ws0">Determine<span class="_ _f"> </span>the<span class="_ _f"> </span>block<span class="_ _f"> </span>sizes<span class="_ _f"> </span>and<span class="_ _f"> </span>header<span class="_ _f"> </span>values<span class="_ _f"> </span>that<span class="_ _f"> </span>would<span class="_ _f"> </span>result<span class="_ _f"> </span>from<span class="_ _f"> </span>the<span class="_ _f"> </span>fol-</div><div class="t m5 x17 h26 y762b ff7 fs19 fc1 sc0 ls0 ws0">lowing<span class="_ _14"> </span>sequence<span class="_ _14"> </span>of<span class="_ _14"> </span><span class="ffd">malloc<span class="_ _14"> </span></span>requests<span class="_ _1"></span>.<span class="_ _14"> </span>Assumptions:<span class="_ _14"> </span>(1)<span class="_ _14"> </span>The<span class="_ _16"> </span>allocator<span class="_ _14"> </span>maintains</div><div class="t m5 x17 h26 y762c ff7 fs19 fc1 sc0 ls0 ws0">double-word<span class="_ _11"> </span>alignment<span class="_ _11"> </span>and<span class="_ _11"> </span>uses<span class="_ _16"> </span>an<span class="_ _11"> </span>implicit<span class="_ _11"> </span>free<span class="_ _11"> </span>list<span class="_ _11"> </span>with<span class="_ _16"> </span>the<span class="_ _11"> </span>block<span class="_ _11"> </span>format<span class="_ _11"> </span>from</div><div class="t m5 x17 h26 y762d ff7 fs19 fc1 sc0 ls0 ws0">F<span class="_ _1"></span>igure<span class="_"> </span>9.35.<span class="_"> </span>(2)<span class="_"> </span>Block<span class="_"> </span>sizes<span class="_"> </span>are<span class="_"> </span>rounded<span class="_"> </span>up<span class="_"> </span>to<span class="_"> </span>the<span class="_"> </span>nearest<span class="_"> </span>multiple<span class="_"> </span>of<span class="_"> </span>8<span class="_"> </span>bytes<span class="_ _1"></span>.</div><div class="t m5 x17 h31 y762e ff7 fs21 fc2 sc0 ls0 ws0">Request<span class="_ _e2"> </span>Block<span class="_"> </span>size<span class="_"> </span>(decimal<span class="_"> </span>bytes)<span class="_ _26"> </span>Block<span class="_"> </span>header<span class="_"> </span>(hex)</div><div class="t m5 x17 h2d y762f ffd fs1e fc2 sc0 ls0 ws0">malloc(4)</div><div class="t m5 x17 h2d y7630 ffd fs1e fc1 sc0 ls0 ws0">malloc(7)</div><div class="t m5 x17 h2d y7631 ffd fs1e fc1 sc0 ls0 ws0">malloc(19)</div><div class="t m5 x17 h2d y7632 ffd fs1e fc1 sc0 ls0 ws0">malloc(22)</div><div class="t m5 x17 h73 y7633 ffe fs1e fc6 sc0 ls0 ws0">9.16<span class="_ _23"> </span><span class="ff10 fs19">◆</span></div><div class="t m5 x17 h26 y7634 ff7 fs19 fc1 sc0 ls0 ws0">Determine<span class="_ _15"> </span>the<span class="_ _15"> </span>minimum<span class="_ _15"> </span>block<span class="_ _15"> </span>size<span class="_ _21"> </span>for<span class="_ _15"> </span>each<span class="_ _15"> </span>of<span class="_ _15"> </span>the<span class="_ _15"> </span>following<span class="_ _21"> </span>combinations<span class="_ _15"> </span>of</div><div class="t m5 x17 h26 y7635 ff7 fs19 fc1 sc0 ls0 ws0">alignment<span class="_ _13"> </span>requirements<span class="_ _13"> </span>and<span class="_ _13"> </span>block<span class="_"> </span>formats<span class="_ _3"></span>.<span class="_ _13"> </span>Assumptions:<span class="_ _13"> </span>Explicit<span class="_"> </span>free<span class="_ _13"> </span>list,<span class="_ _13"> </span>4-byte</div><div class="t m5 x17 h26 y7636 ffd fs19 fc1 sc0 ls0 ws0">pred<span class="_ _13"> </span><span class="ff7">and<span class="_ _13"> </span></span>succ<span class="_ _6"> </span><span class="ff7">pointers<span class="_ _13"> </span>in<span class="_ _13"> </span>each<span class="_ _13"> </span>free<span class="_ _6"> </span>block,<span class="_ _13"> </span>zero-size<span class="_ _13"> </span>payloads<span class="_ _13"> </span>are<span class="_ _13"> </span>not<span class="_ _13"> </span>allowed,<span class="_ _13"> </span>and</span></div><div class="t m5 x17 h26 y7637 ff7 fs19 fc1 sc0 ls0 ws0">headers<span class="_"> </span>and<span class="_"> </span>footers<span class="_"> </span>are<span class="_"> </span>stored<span class="_"> </span>in<span class="_"> </span>4-byte<span class="_"> </span>words<span class="_ _1"></span>.</div><div class="t m5 x6a h31 y7638 ff7 fs21 fc2 sc0 ls0 ws0">Minimum<span class="_"> </span>block</div><div class="t m5 x17 h31 y7639 ff7 fs21 fc2 sc0 ls0 ws0">Alignment<span class="_ _2e"> </span>Allocated<span class="_"> </span>block<span class="_ _147"> </span>Free<span class="_"> </span>block<span class="_ _8f"> </span>size<span class="_"> </span>(bytes)</div><div class="t m5 x17 h31 y763a ff7 fs21 fc2 sc0 ls0 ws0">Single<span class="_"> </span>word<span class="_ _74"> </span>Header<span class="_"> </span>and<span class="_"> </span>footer<span class="_ _128"> </span>Header<span class="_"> </span>and<span class="_"> </span>footer</div><div class="t m5 x17 h31 y763b ff7 fs21 fc1 sc0 ls0 ws0">Single<span class="_"> </span>word<span class="_ _74"> </span>Header,<span class="_"> </span>but<span class="_"> </span>no<span class="_"> </span>footer<span class="_ _26"> </span>Header<span class="_"> </span>and<span class="_"> </span>footer</div><div class="t m5 x17 h31 y763c ff7 fs21 fc1 sc0 ls0 ws0">Double<span class="_"> </span>word<span class="_ _26"> </span>Header<span class="_"> </span>and<span class="_"> </span>footer<span class="_ _128"> </span>Header<span class="_"> </span>and<span class="_"> </span>footer</div><div class="t m5 x17 h31 y763d ff7 fs21 fc1 sc0 ls0 ws0">Double<span class="_"> </span>word<span class="_ _26"> </span>Header,<span class="_"> </span>but<span class="_"> </span>no<span class="_"> </span>footer<span class="_ _26"> </span>Header<span class="_"> </span>and<span class="_"> </span>footer</div><div class="t m5 x17 h73 y763e ffe fs1e fc6 sc0 ls0 ws0">9.17<span class="_ _23"> </span><span class="ff10 fs19">◆◆◆</span></div><div class="t m5 x17 h26 y763f ff7 fs19 fc1 sc0 ls0 ws0">Develop<span class="_ _13"> </span>a<span class="_ _13"> </span>version<span class="_ _13"> </span>of<span class="_ _13"> </span>the<span class="_"> </span>allocator<span class="_ _13"> </span>in<span class="_ _13"> </span>Section<span class="_ _13"> </span>9.9.12<span class="_ _13"> </span>that<span class="_ _13"> </span>performs<span class="_ _13"> </span>a<span class="_ _13"> </span>next-ﬁt<span class="_"> </span>search</div><div class="t m5 x17 h26 y7640 ff7 fs19 fc1 sc0 ls0 ws0">instead<span class="_"> </span>of<span class="_"> </span>a<span class="_"> </span>ﬁrst-ﬁt<span class="_"> </span>search.</div><div class="t m5 x17 h73 y7641 ffe fs1e fc6 sc0 ls0 ws0">9.18<span class="_ _23"> </span><span class="ff10 fs19">◆◆◆</span></div><div class="t m5 x17 h26 y7642 ff7 fs19 fc1 sc0 ls0 ws0">T<span class="_ _1"></span>he<span class="_"> </span>allocator<span class="_"> </span>in<span class="_ _13"> </span>Section<span class="_"> </span>9.9.12<span class="_ _13"> </span>requires<span class="_"> </span>both<span class="_"> </span>a<span class="_ _13"> </span>header<span class="_"> </span>and<span class="_ _13"> </span>a<span class="_"> </span>footer<span class="_"> </span>for<span class="_ _13"> </span>each<span class="_"> </span>block</div><div class="t m5 x17 h26 y7643 ff7 fs19 fc1 sc0 ls0 ws0">in<span class="_ _16"> </span>order<span class="_ _14"> </span>to<span class="_ _14"> </span>perform<span class="_ _14"> </span>constant-time<span class="_ _14"> </span>coalescing.<span class="_ _16"> </span>Modify<span class="_ _14"> </span>the<span class="_ _16"> </span>allocator<span class="_ _14"> </span>so<span class="_ _14"> </span>that<span class="_ _14"> </span>free</div><div class="t m5 x17 h26 y7644 ff7 fs19 fc1 sc0 ls0 ws0">blocks<span class="_"> </span>require<span class="_"> </span>a<span class="_"> </span>header<span class="_"> </span>and<span class="_"> </span>a<span class="_"> </span>footer,<span class="_"> </span>but<span class="_"> </span>allocated<span class="_"> </span>blocks<span class="_"> </span>require<span class="_"> </span>only<span class="_"> </span>a<span class="_"> </span>header<span class="_ _1"></span>.</div></div><div class="pi" data-data='{"ctm":[2.000000,0.000000,0.000000,2.000000,0.000000,0.000000]}'></div></div>
