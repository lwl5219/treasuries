<div id="pf28d" class="pf w2 h11" data-page-no="28d"><div class="pc pc28d w2 h11"><img class="bi x0 y0 w1 h1" alt="" src="csapp/bg28d.png"/><div class="t m5 x14 h28 y9b ffe fs1e fc2 sc0 ls0 ws0">652<span class="_ _1b"> </span><span class="ff6 fs1f">Chapter<span class="_ _10"> </span>6<span class="_ _3d"> </span>The<span class="_ _10"> </span>Memory<span class="_ _10"> </span>Hierarchy</span></div><div class="t m5 x14 h2f ye7 ffe fs16 fc6 sc0 ls0 ws0">Figure<span class="_"> </span>6.25</div><div class="t m5 x14 h2f y58a ffe fs16 fc1 sc0 ls0 ws0">General<span class="_ _16"> </span>organization</div><div class="t m5 x14 h2f y58b ffe fs16 fc1 sc0 ls0 ws0">of<span class="_ _14"> </span>cache<span class="_ _16"> </span><span class="ff11 ls23b">(<span class="_ _8"></span>S<span class="_ _4"></span>,E<span class="_ _8"></span>,B<span class="_ _7"></span>,m<span class="_ _80"></span>)<span class="_ _80"></span><span class="ffe ls0">.</span></span></div><div class="t m5 x14 h34 y58c ff6 fs16 fc1 sc0 ls0 ws0">(a)<span class="_ _16"> </span>A<span class="_ _14"> </span>cache<span class="_ _14"> </span>is<span class="_ _16"> </span>an<span class="_ _14"> </span>array</div><div class="t m5 x14 h34 y58d ff6 fs16 fc1 sc0 ls0 ws0">of<span class="_ _11"> </span>sets.<span class="_ _16"> </span>Each<span class="_ _11"> </span>set<span class="_ _16"> </span>contains</div><div class="t m5 x14 h34 y58e ff6 fs16 fc1 sc0 ls0 ws0">one<span class="_ _16"> </span>or<span class="_ _16"> </span>more<span class="_ _16"> </span>lines.<span class="_ _16"> </span>Each</div><div class="t m5 x14 h34 y58f ff6 fs16 fc1 sc0 ls0 ws0">line<span class="_ _16"> </span>contains<span class="_ _16"> </span>a<span class="_ _16"> </span>valid<span class="_ _16"> </span>bit,</div><div class="t m5 x14 h34 y8d9 ff6 fs16 fc1 sc0 ls0 ws0">some<span class="_ _10"> </span>tag<span class="_ _11"> </span>bits,<span class="_ _11"> </span>and<span class="_ _11"> </span>a<span class="_ _11"> </span>block</div><div class="t m5 x14 h34 y8da ff6 fs16 fc1 sc0 ls0 ws0">of<span class="_ _16"> </span>data.<span class="_ _14"> </span>(b)<span class="_ _14"> </span>The<span class="_ _14"> </span>cache</div><div class="t m5 x14 h34 y8db ff6 fs16 fc1 sc0 ls0 ws0">organization<span class="_ _16"> </span>induces<span class="_ _14"> </span>a</div><div class="t m5 x14 h34 y3d33 ff6 fs16 fc1 sc0 ls0 ws0">partition<span class="_ _11"> </span>of<span class="_ _11"> </span>the<span class="_ _11"> </span><span class="ff11">m<span class="_"> </span></span>address</div><div class="t m5 x14 h34 y56bc ff6 fs16 fc1 sc0 ls0 ws0">bits<span class="_ _16"> </span>into<span class="_ _16"> </span><span class="ff11">t<span class="_ _15"> </span></span>tag<span class="_ _16"> </span>bits,<span class="_ _16"> </span><span class="ff11">s<span class="_ _15"> </span></span>set</div><div class="t m5 x14 h34 y56bd ff6 fs16 fc1 sc0 ls0 ws0">index<span class="_ _16"> </span>bits,<span class="_ _14"> </span>and<span class="_ _16"> </span><span class="ff11">b<span class="_ _14"> </span></span>block</div><div class="t m5 x14 h34 y56be ff6 fs16 fc1 sc0 ls0 ws0">offset<span class="_ _10"> </span>bits.</div><div class="t m5 xd3 h91 y56bf ff82 fs57 fc1 sc0 ls0 ws0">V<span class="_ _1"></span>alid<span class="_ _f1"> </span>T<span class="_ _7"></span>ag<span class="_ _61"> </span>0<span class="_ _17"> </span>1<span class="_ _128"> </span><span class="ff80">B<span class="_ _2"></span></span>–1</div><div class="t m5 x1fa h91 y56c0 ff82 fs57 fc1 sc0 ls0 ws0">. . .</div><div class="t m7 x1a3 h91 y56c1 ff82 fs57 fc1 sc0 ls0 ws0">. . .</div><div class="t m5 xd3 h91 ydcf ff82 fs57 fc1 sc0 ls0 ws0">V<span class="_ _1"></span>alid<span class="_ _f1"> </span>T<span class="_ _7"></span>ag<span class="_ _61"> </span>0<span class="_ _17"> </span>1<span class="_ _128"> </span><span class="ff80">B<span class="_ _2"></span></span>–1</div><div class="t m5 x1fa h91 y56c2 ff82 fs57 fc1 sc0 ls0 ws0">. . .</div><div class="t m5 xe5 h91 y56c3 ff82 fs57 fc1 sc0 ls0 ws0">Set 0:</div><div class="t m5 xd3 h91 y56c4 ff82 fs57 fc1 sc0 ls0 ws0">V<span class="_ _1"></span>alid<span class="_ _f1"> </span>T<span class="_ _7"></span>ag<span class="_ _61"> </span>0<span class="_ _17"> </span>1<span class="_ _128"> </span><span class="ff80">B<span class="_ _2"></span></span>–1</div><div class="t m5 x1fa h91 y56c5 ff82 fs57 fc1 sc0 ls0 ws0">. . .</div><div class="t m7 x1a3 h91 y56c6 ff82 fs57 fc1 sc0 ls0 ws0">. . .</div><div class="t m5 xd3 h91 y56c7 ff82 fs57 fc1 sc0 ls0 ws0">V<span class="_ _1"></span>alid<span class="_ _f1"> </span>T<span class="_ _7"></span>ag<span class="_ _61"> </span>0<span class="_ _17"> </span>1<span class="_ _128"> </span><span class="ff80">B<span class="_ _2"></span></span>–1</div><div class="t m5 x1fa h91 y56c8 ff82 fs57 fc1 sc0 ls0 ws0">. . .</div><div class="t m5 xe5 h91 y56c9 ff82 fs57 fc1 sc0 ls0 ws0">Set 1:</div><div class="t m5 xd3 h91 y56ca ff82 fs57 fc1 sc0 ls0 ws0">V<span class="_ _1"></span>alid<span class="_ _f1"> </span>T<span class="_ _7"></span>ag</div><div class="t m5 x16 h91 y56cb ff82 fs57 fc1 sc0 ls0 ws0">Cache size:   <span class="ff80">C</span> = <span class="ff80">B</span> × <span class="ff80">E</span> × <span class="ff80">S </span>data bytes</div><div class="t m5 x18b h91 y56ca ff82 fs57 fc1 sc0 ls23c ws0">01<span class="_ _f1"> </span><span class="ff80 ls0">B<span class="_ _2"></span><span class="ff82">–1</span></span></div><div class="t m5 x1fa h91 y56cc ff82 fs57 fc1 sc0 ls0 ws0">. . .</div><div class="t m7 x1a3 h91 y56cd ff82 fs57 fc1 sc0 ls0 ws0">. . .<span class="_ _f1"> </span>. . .</div><div class="t m5 xd3 h91 y56ce ff82 fs57 fc1 sc0 ls0 ws0">V<span class="_ _1"></span>alid<span class="_ _f1"> </span>T<span class="_ _7"></span>ag<span class="_ _61"> </span>0<span class="_ _17"> </span>1<span class="_ _128"> </span><span class="ff80">B<span class="_ _2"></span></span>–1</div><div class="t m5 x1fa h91 y56cf ff82 fs57 fc1 sc0 ls0 ws0">. . .</div><div class="t m5 x1eb h91 y56d0 ff82 fs57 fc1 sc0 ls0 ws0">Set <span class="ff80">S<span class="_ _2"></span></span>–1:</div><div class="t m5 x176 h91 y56d1 ff82 fs57 fc1 sc0 ls0 ws0">1 valid bit</div><div class="t m5 xaa h91 y56d2 ff82 fs57 fc1 sc0 ls0 ws0">per line</div><div class="t m5 x23b h91 y56d1 ff80 fs57 fc1 sc0 ls0 ws0">t<span class="ff82"> tag bits</span></div><div class="t m5 x1ae h91 y56d2 ff82 fs57 fc1 sc0 ls0 ws0">per line</div><div class="t m5 x3a h91 y56d3 ff80 fs57 fc1 sc0 ls0 ws0">B<span class="ff82"> = 2</span></div><div class="t m5 xa he3 y56d4 ff80 fs94 fc1 sc0 ls0 ws0">b</div><div class="t m5 x100 h91 y56d5 ff82 fs57 fc1 sc0 ls0 ws0"> bytes</div><div class="t m5 xe8 h91 y56d6 ff82 fs57 fc1 sc0 ls0 ws0">per cache block</div><div class="t m5 xe0 h91 y56d7 ff80 fs57 fc1 sc0 ls0 ws0">S<span class="ff82"> = 2</span></div><div class="t m5 x1a5 he3 y56d8 ff80 fs94 fc1 sc0 ls0 ws0">s</div><div class="t m5 x235 h91 y56d9 ff82 fs57 fc1 sc0 ls0 ws0"> sets</div><div class="t m5 x272 h91 y56da ff80 fs57 fc1 sc0 ls0 ws0">E <span class="ff82">lines per set</span></div><div class="t m5 x1c9 h91 y56db ff82 fs57 fc1 sc0 ls0 ws0">(a)</div><div class="t m5 x10e h65 y56dc ff80 fs38 fc1 sc0 ls0 ws0">m<span class="ff82">–1<span class="_ _34"> </span>0</span></div><div class="t m5 x116 h3f y56dd ff80 fs27 fc1 sc0 ls0 ws0">t<span class="ff82"> bits</span></div><div class="t m5 xe0 h3f y56de ff80 fs27 fc1 sc0 ls0 ws0">Address:</div><div class="t m5 x110 h3f y56df ff80 fs27 fc1 sc0 ls23d ws0">Ta<span class="_ _be"> </span>g<span class="_ _61"> </span><span class="ls0">Set inde<span class="_ _0"></span>x</span></div><div class="t m5 x40 h3f y56e0 ff80 fs27 fc1 sc0 ls0 ws0">Block offset</div><div class="t m5 x1b1 h3f y56dd ff80 fs27 fc1 sc0 ls0 ws0">s<span class="ff82"> bits</span></div><div class="t m5 x16e h3f y56e1 ff82 fs27 fc1 sc0 ls0 ws0">(b)</div><div class="t m5 x1b4 h3f y56dd ff80 fs27 fc1 sc0 ls0 ws0">b<span class="ff82"> bits</span></div><div class="t m5 x1d h26 y56e2 ff7 fs19 fc1 sc0 ls0 ws0">the<span class="_ _11"> </span>array<span class="_ _16"> </span>of<span class="_ _11"> </span><span class="ff11">S<span class="_ _14"> </span></span>sets<span class="_ _1"></span>.<span class="_ _16"> </span>T<span class="_ _1"></span>he<span class="_ _16"> </span>ﬁrst<span class="_ _11"> </span>set<span class="_ _11"> </span>is<span class="_ _16"> </span>set<span class="_ _11"> </span>0,<span class="_ _16"> </span>the<span class="_ _11"> </span>second<span class="_ _16"> </span>set<span class="_ _11"> </span>is<span class="_ _16"> </span>set<span class="_ _11"> </span>1,<span class="_ _16"> </span>and<span class="_ _11"> </span>so<span class="_ _11"> </span>on.<span class="_ _16"> </span>When</div><div class="t m5 x1d h26 y56e3 ff7 fs19 fc1 sc0 ls0 ws0">interpreted<span class="_ _16"> </span>as<span class="_ _16"> </span>an<span class="_ _16"> </span>unsigned<span class="_ _16"> </span>integer,<span class="_ _16"> </span>the<span class="_ _14"> </span>set<span class="_ _16"> </span>index<span class="_ _16"> </span>bits<span class="_ _16"> </span>tell<span class="_ _16"> </span>us<span class="_ _16"> </span>which<span class="_ _14"> </span>set<span class="_ _16"> </span>the<span class="_ _16"> </span>word</div><div class="t m5 x1d h26 y56e4 ff7 fs19 fc1 sc0 ls0 ws0">must<span class="_"> </span>be<span class="_ _11"> </span>stored<span class="_"> </span>in.<span class="_ _11"> </span>Once<span class="_"> </span>we<span class="_ _11"> </span>know<span class="_"> </span>which<span class="_"> </span>set<span class="_ _11"> </span>the<span class="_"> </span>word<span class="_ _11"> </span>must<span class="_"> </span>be<span class="_ _11"> </span>contained<span class="_"> </span>in,<span class="_ _11"> </span>the<span class="_"> </span><span class="ff11">t</span></div><div class="t m5 x1d h26 y56e5 ff7 fs19 fc1 sc0 ls0 ws0">tag<span class="_ _11"> </span>bits<span class="_ _11"> </span>in<span class="_ _11"> </span><span class="ff11">A<span class="_ _11"> </span></span>tell<span class="_ _11"> </span>us<span class="_ _11"> </span>which<span class="_ _11"> </span>line<span class="_ _11"> </span>(if<span class="_ _11"> </span>any)<span class="_ _16"> </span>in<span class="_"> </span>the<span class="_ _11"> </span>set<span class="_ _11"> </span>contains<span class="_ _16"> </span>the<span class="_"> </span>word.<span class="_ _11"> </span>A<span class="_ _11"> </span>line<span class="_ _11"> </span>in<span class="_ _16"> </span>the</div><div class="t m5 x1d h26 y56e6 ff7 fs19 fc1 sc0 ls0 ws0">set<span class="_ _11"> </span>contains<span class="_ _11"> </span>the<span class="_ _11"> </span>word<span class="_ _11"> </span>if<span class="_ _11"> </span>and<span class="_ _16"> </span>only<span class="_"> </span>if<span class="_ _11"> </span>the<span class="_ _16"> </span>valid<span class="_"> </span>bit<span class="_ _16"> </span>is<span class="_"> </span>set<span class="_ _11"> </span>and<span class="_ _16"> </span>the<span class="_"> </span>tag<span class="_ _11"> </span>bits<span class="_ _16"> </span>in<span class="_"> </span>the<span class="_ _16"> </span>line</div><div class="t m5 x1d h26 y56e7 ff7 fs19 fc1 sc0 ls0 ws0">match<span class="_ _11"> </span>the<span class="_ _16"> </span>tag<span class="_ _11"> </span>bits<span class="_ _16"> </span>in<span class="_ _11"> </span>the<span class="_ _16"> </span>address<span class="_ _11"> </span><span class="ff11">A</span>.<span class="_ _16"> </span>Once<span class="_ _11"> </span>we<span class="_ _16"> </span>have<span class="_ _11"> </span>located<span class="_ _16"> </span>the<span class="_ _11"> </span>line<span class="_ _16"> </span>identiﬁed<span class="_ _11"> </span>by</div><div class="t m5 x1d h26 y56e8 ff7 fs19 fc1 sc0 ls0 ws0">the<span class="_ _13"> </span>tag<span class="_"> </span>in<span class="_ _13"> </span>the<span class="_"> </span>set<span class="_ _13"> </span>identiﬁed<span class="_"> </span>by<span class="_ _13"> </span>the<span class="_"> </span>set<span class="_ _13"> </span>index,<span class="_"> </span>then<span class="_ _13"> </span>the<span class="_"> </span><span class="ff11">b<span class="_ _10"> </span><span class="ffa">block<span class="_ _13"> </span>offset<span class="_"> </span>bits<span class="_ _13"> </span></span></span>give<span class="_"> </span>us<span class="_ _13"> </span>the</div><div class="t m5 x1d h26 y56e9 ff7 fs19 fc1 sc0 ls0 ws0">offset<span class="_"> </span>of<span class="_"> </span>the<span class="_"> </span>word<span class="_"> </span>in<span class="_"> </span>the<span class="_"> </span><span class="ff11">B<span class="_ _5"></span></span>-byte<span class="_"> </span>data<span class="_"> </span>block.</div><div class="t m5 x29 h26 y56ea ff7 fs19 fc1 sc0 ls0 ws0">As<span class="_ _14"> </span>you<span class="_ _16"> </span>may<span class="_ _14"> </span>have<span class="_ _14"> </span>noticed,<span class="_ _15"> </span>descriptions<span class="_ _14"> </span>of<span class="_ _14"> </span>caches<span class="_ _14"> </span>use<span class="_ _14"> </span>a<span class="_ _16"> </span>lot<span class="_ _14"> </span>of<span class="_ _14"> </span>symbols<span class="_ _1"></span>.<span class="_ _14"> </span>Fig-</div><div class="t m5 x1d h26 y56eb ff7 fs19 fc1 sc0 ls0 ws0">ure<span class="_"> </span>6.26<span class="_"> </span>summarizes<span class="_"> </span>these<span class="_"> </span>symbols<span class="_"> </span>for<span class="_"> </span>your<span class="_"> </span>reference<span class="_ _1"></span>.</div><div class="t m5 x1d h47 y56ec ffe fs2b fc1 sc0 ls0 ws0">Practice<span class="_"> </span>Problem<span class="_"> </span>6.9<span class="_ _1f"> </span><span class="fs16">(solution<span class="_"> </span>page<span class="_"> </span>699)</span></div><div class="t m5 x1d h26 y56ed ff7 fs19 fc1 sc0 ls0 ws0">T<span class="_ _1"></span>he<span class="_ _14"> </span>following<span class="_ _14"> </span>table<span class="_ _14"> </span>gives<span class="_ _14"> </span>the<span class="_ _16"> </span>parameters<span class="_ _14"> </span>for<span class="_ _14"> </span>a<span class="_ _14"> </span>number<span class="_ _14"> </span>of<span class="_ _14"> </span>different<span class="_ _16"> </span>caches<span class="_ _0"></span>.<span class="_ _16"> </span>F<span class="_ _0"></span>or</div><div class="t m5 x1d h26 y56ee ff7 fs19 fc1 sc0 ls0 ws0">each<span class="_"> </span>cache<span class="_ _1"></span>,<span class="_"> </span>determine<span class="_ _13"> </span>the<span class="_"> </span>number<span class="_ _13"> </span>of<span class="_"> </span>cache<span class="_ _13"> </span>sets<span class="_"> </span>(<span class="ff11">S<span class="_ _2"></span></span>),<span class="_"> </span>tag<span class="_ _13"> </span>bits<span class="_"> </span>(<span class="ff11">t<span class="_ _5"></span></span>),<span class="_"> </span>set<span class="_"> </span>index<span class="_ _13"> </span>bits<span class="_"> </span>(<span class="ff11">s<span class="_ _2"></span></span>),</div><div class="t m5 x1d h26 y56ef ff7 fs19 fc1 sc0 ls0 ws0">and<span class="_"> </span>block<span class="_"> </span>offset<span class="_"> </span>bits<span class="_"> </span>(<span class="ff11">b</span>).</div><div class="t m5 x1d h31 y56f0 ff7 fs21 fc2 sc0 ls0 ws0">Cache<span class="_ _f1"> </span><span class="ff11 ls23e">mC<span class="_ _be"> </span>B<span class="_ _12"></span>E<span class="_ _b0"> </span>S<span class="_ _1c"> </span>t<span class="_ _3c"> </span>s<span class="_ _1c"> </span>b</span></div><div class="t m5 x17e h31 y56f1 ff7 fs21 fc2 sc0 ls0 ws0">1.<span class="_ _d3"> </span>32<span class="_ _26"> </span>1,024<span class="_ _74"> </span>4<span class="_ _74"> </span>1</div><div class="t m5 x17e h31 y56f2 ff7 fs21 fc1 sc0 ls0 ws0">2.<span class="_ _d3"> </span>32<span class="_ _26"> </span>1,024<span class="_ _74"> </span>8<span class="_ _74"> </span>4</div><div class="t m5 x17e h31 y56f3 ff7 fs21 fc1 sc0 ls0 ws0">3.<span class="_ _d3"> </span>32<span class="_ _26"> </span>1,024<span class="_ _f1"> </span>32<span class="_ _95"> </span>32</div></div><div class="pi" data-data='{"ctm":[2.000000,0.000000,0.000000,2.000000,0.000000,0.000000]}'></div></div>
