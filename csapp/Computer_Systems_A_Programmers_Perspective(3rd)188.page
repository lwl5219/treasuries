<div id="pfbc" class="pf w2 h11" data-page-no="bc"><div class="pc pcbc w2 h11"><img class="bi x0 y0 w1 h1" alt="" src="csapp/bgbc.png"/><div class="t m5 x107 h28 y9b ff6 fs1f fc2 sc0 ls0 ws0">Solutions<span class="_ _10"> </span>to<span class="_ _10"> </span>Practice<span class="_ _10"> </span>Problems<span class="_ _1b"> </span><span class="ffe fs1e">187</span></div><div class="t m5 x1a9 h31 y9c ff7 fs21 fc2 sc0 ls0 ws0">Hex<span class="_ _eb"> </span>Unsigned<span class="_ _a7"> </span>T<span class="_ _7"></span>wo’s<span class="_"> </span>complement</div><div class="t m5 x17 h31 ye18 ff7 fs21 fc2 sc0 ls0 ws0">Original<span class="_ _26"> </span>T<span class="_ _7"></span>runcated<span class="_ _20"> </span>Original<span class="_ _26"> </span>T<span class="_ _3"></span>runcated<span class="_ _20"> </span>Original<span class="_ _26"> </span>T<span class="_ _3"></span>runcated</div><div class="t m5 x63 h31 y1bec ffd fs1e fc2 sc0 ls92 ws0">11<span class="_ _73"> </span><span class="ff7 fs21 ls130">11<span class="_ _58"> </span>1<span class="_ _11"> </span>1</span></div><div class="t m5 x63 h31 y1bef ffd fs1e fc2 sc0 ls92 ws0">33<span class="_ _73"> </span><span class="ff7 fs21 ls130">33<span class="_ _58"> </span>3<span class="_ _11"> </span>3</span></div><div class="t m5 x63 h31 yd1d ffd fs1e fc2 sc0 ls92 ws0">55<span class="_ _73"> </span><span class="ff7 fs21 ls130">55<span class="_ _58"> </span>5<span class="_ _11"> </span>5</span></div><div class="t m5 x63 h32 y1bf0 ffd fs1e fc2 sc0 ls92 ws0">C4<span class="_ _103"> </span><span class="ff7 fs21 ls0">12<span class="_ _122"> </span>4<span class="_ _da"> </span><span class="ff12">−</span><span class="ls131">44</span></span></div><div class="t m5 x63 h32 y1bf1 ffd fs1e fc2 sc0 ls92 ws0">E6<span class="_ _103"> </span><span class="ff7 fs21 ls0">14<span class="_ _122"> </span>6<span class="_ _da"> </span><span class="ff12">−</span><span class="ls131">26</span></span></div><div class="t m5 x26 h26 y1ddd ff7 fs19 fc2 sc0 ls0 ws0">As<span class="_ _11"> </span>Equation<span class="_ _16"> </span>2.9<span class="_ _11"> </span>states<span class="_ _1"></span>,<span class="_ _11"> </span>the<span class="_ _16"> </span>effect<span class="_ _11"> </span>of<span class="_ _11"> </span>this<span class="_ _16"> </span>truncation<span class="_ _11"> </span>on<span class="_ _11"> </span>unsigned<span class="_ _16"> </span>values<span class="_ _11"> </span>is<span class="_ _11"> </span>to</div><div class="t m5 x17 h26 y1dde ff7 fs19 fc2 sc0 ls0 ws0">simply<span class="_"> </span>ﬁnd<span class="_"> </span>their<span class="_"> </span>residue<span class="_ _1"></span>,<span class="_"> </span>modulo<span class="_"> </span>8.<span class="_"> </span>The<span class="_"> </span>effect<span class="_"> </span>of<span class="_"> </span>the<span class="_"> </span>truncation<span class="_"> </span>on<span class="_"> </span>signed<span class="_"> </span>values</div><div class="t m5 x17 h26 y1ddf ff7 fs19 fc2 sc0 ls0 ws0">is<span class="_ _13"> </span>a<span class="_ _13"> </span>bit<span class="_ _13"> </span>more<span class="_ _13"> </span>complex.<span class="_"> </span>According<span class="_ _13"> </span>to<span class="_ _13"> </span>Equation<span class="_ _13"> </span>2.10,<span class="_ _13"> </span>we<span class="_ _13"> </span>ﬁrst<span class="_ _13"> </span>compute<span class="_ _13"> </span>the<span class="_ _13"> </span>modulo<span class="_"> </span>8</div><div class="t m5 x17 h26 y1de0 ff7 fs19 fc2 sc0 ls0 ws0">residue<span class="_ _13"> </span>of<span class="_ _13"> </span>the<span class="_ _13"> </span>argument.<span class="_ _13"> </span>T<span class="_ _1"></span>his<span class="_ _13"> </span>will<span class="_ _13"> </span>give<span class="_ _13"> </span>values<span class="_ _13"> </span>0<span class="_ _13"> </span>through<span class="_ _13"> </span>7<span class="_ _13"> </span>for<span class="_ _13"> </span>arguments<span class="_ _13"> </span>0<span class="_ _13"> </span>through</div><div class="t m5 x17 h46 y1de1 ff7 fs19 fc2 sc0 ls132 ws0">7,<span class="_"> </span>and<span class="_"> </span>also<span class="_ _11"> </span>for<span class="_"> </span>arguments<span class="_ _11"> </span><span class="ff12 ls0">−<span class="ff7">8<span class="_"> </span>through<span class="_"> </span></span>−<span class="ff7">1<span class="_ _0"></span>.<span class="_"> </span>T<span class="_ _0"></span>hen<span class="_"> </span>we<span class="_"> </span>apply<span class="_"> </span>function<span class="_ _11"> </span><span class="ffa">U2T</span></span></span></div><div class="t m5 x1fd h3c y1de2 ff7 fs25 fc2 sc0 ls0 ws0">3</div><div class="t m5 x1bd h26 y1de3 ff7 fs19 fc2 sc0 ls0 ws0">to<span class="_"> </span>these</div><div class="t m5 x17 h46 y1de4 ff7 fs19 fc2 sc0 ls0 ws0">residues<span class="_ _1"></span>,<span class="_"> </span>giving<span class="_"> </span>two<span class="_"> </span>repetitions<span class="_"> </span>of<span class="_"> </span>the<span class="_"> </span>sequences<span class="_"> </span>0<span class="_"> </span>through<span class="_"> </span>3<span class="_ _13"> </span>and<span class="_ _11"> </span><span class="ff12">−</span>4<span class="_"> </span>through<span class="_"> </span><span class="ff12">−</span><span class="ls25">1.</span></div><div class="t m5 x17 h28 y1de5 ffe fs1e fc6 sc0 ls0 ws0">Solution<span class="_"> </span>to<span class="_"> </span>Problem<span class="_"> </span>2.25<span class="_ _e"> </span><span class="fs16">(page<span class="_"> </span>119)</span></div><div class="t m5 x17 h26 y1de6 ff7 fs19 fc1 sc0 ls0 ws0">T<span class="_ _1"></span>his<span class="_ _15"> </span>problem<span class="_ _14"> </span>is<span class="_ _15"> </span>designed<span class="_ _15"> </span>to<span class="_ _14"> </span>demonstrate<span class="_ _15"> </span>how<span class="_ _15"> </span>easily<span class="_ _14"> </span>bugs<span class="_ _15"> </span>can<span class="_ _14"> </span>arise<span class="_ _15"> </span>due<span class="_ _15"> </span>to<span class="_ _14"> </span>the</div><div class="t m5 x17 h26 y1de7 ff7 fs19 fc1 sc0 ls0 ws0">implicit<span class="_"> </span>casting<span class="_ _13"> </span>from<span class="_"> </span>signed<span class="_ _13"> </span>to<span class="_"> </span>unsigned.<span class="_ _13"> </span>It<span class="_"> </span>seems<span class="_ _13"> </span>quite<span class="_"> </span>natural<span class="_ _13"> </span>to<span class="_"> </span>pass<span class="_ _13"> </span>parameter</div><div class="t m5 x17 h26 y1de8 ffd fs19 fc1 sc0 ls0 ws0">length<span class="_ _10"> </span><span class="ff7">as<span class="_"> </span>an<span class="_"> </span>unsigned,<span class="_"> </span>since<span class="_ _13"> </span>one<span class="_"> </span>would<span class="_"> </span>never<span class="_"> </span>want<span class="_"> </span>to<span class="_"> </span>use<span class="_"> </span>a<span class="_ _13"> </span>negative<span class="_"> </span>length.<span class="_"> </span>T<span class="_ _0"></span>he</span></div><div class="t m5 x17 h26 y1de9 ff7 fs19 fc1 sc0 ls0 ws0">stopping<span class="_ _11"> </span>criterion<span class="_ _16"> </span><span class="ffd">i<span class="_ _11"> </span>&lt;=<span class="_ _16"> </span>length-1<span class="_ _11"> </span></span>also<span class="_ _16"> </span>seems<span class="_ _11"> </span>quite<span class="_ _11"> </span>natural.<span class="_ _16"> </span>But<span class="_ _11"> </span>combining<span class="_ _11"> </span>these</div><div class="t m5 x17 h26 y1dea ff7 fs19 fc1 sc0 ls0 ws0">two<span class="_"> </span>yields<span class="_"> </span>an<span class="_"> </span>unexpected<span class="_"> </span>outcome!</div><div class="t m5 x26 h46 y1deb ff7 fs19 fc1 sc0 ls0 ws0">Since<span class="_ _6"> </span>parameter<span class="_ _6"> </span><span class="ffd">length<span class="_ _13"> </span></span>is<span class="_ _a"> </span>unsigned,<span class="_ _13"> </span>the<span class="_ _6"> </span>computation<span class="_ _6"> </span>0<span class="_ _13"> </span><span class="ff12">−<span class="_ _13"></span></span>1<span class="_ _a"> </span>is<span class="_ _6"> </span>performed<span class="_ _13"> </span>using</div><div class="t m5 x17 h26 y1dec ff7 fs19 fc1 sc0 ls0 ws0">unsigned<span class="_ _11"> </span>arithmetic,<span class="_ _16"> </span>which<span class="_ _11"> </span>is<span class="_ _16"> </span>equivalent<span class="_ _11"> </span>to<span class="_ _16"> </span>modular<span class="_ _16"> </span>addition.<span class="_ _11"> </span>T<span class="_ _0"></span>he<span class="_ _11"> </span>result<span class="_ _16"> </span>is<span class="_ _16"> </span>then</div><div class="t m5 x17 h46 y1ded ffa fs19 fc1 sc0 ls0 ws0">UMax<span class="ff7 ls133">.T<span class="_ _42"></span>h<span class="_ _49"></span>e<span class="ff12 ls0">≤<span class="_ _16"> </span><span class="ff7">comparison<span class="_ _11"> </span>is<span class="_ _11"> </span>also<span class="_ _11"> </span>performed<span class="_ _16"> </span>using<span class="_ _11"> </span>an<span class="_ _11"> </span>unsigned<span class="_ _16"> </span>comparison,<span class="_ _11"> </span>and</span></span></span></div><div class="t m5 x17 h26 y1dee ff7 fs19 fc1 sc0 ls0 ws0">since<span class="_ _16"> </span>any<span class="_ _14"> </span>number<span class="_ _16"> </span>is<span class="_ _14"> </span>less<span class="_ _16"> </span>than<span class="_ _14"> </span>or<span class="_ _16"> </span>equal<span class="_ _14"> </span>to<span class="_ _16"> </span><span class="ffa">UMax</span>,<span class="_ _15"> </span>the<span class="_ _16"> </span>comparison<span class="_ _14"> </span>always<span class="_ _16"> </span>holds!</div><div class="t m5 x17 h26 y1def ff7 fs19 fc1 sc0 ls0 ws0">T<span class="_ _1"></span>hus<span class="_ _1"></span>,<span class="_"> </span>the<span class="_"> </span>code<span class="_"> </span>attempts<span class="_"> </span>to<span class="_"> </span>access<span class="_"> </span>invalid<span class="_"> </span>elements<span class="_"> </span>of<span class="_"> </span>array<span class="_"> </span><span class="ffd">a</span>.</div><div class="t m5 x26 h26 y1df0 ff7 fs19 fc1 sc0 ls0 ws0">T<span class="_ _1"></span>he<span class="_"> </span>code<span class="_ _13"> </span>can<span class="_"> </span>be<span class="_ _13"> </span>ﬁxed<span class="_"> </span>either<span class="_ _13"> </span>by<span class="_"> </span>declaring<span class="_ _13"> </span><span class="ffd">length<span class="_ _10"> </span></span>to<span class="_ _13"> </span>be<span class="_"> </span>an<span class="_ _13"> </span><span class="ffd">int<span class="_ _10"> </span></span>or<span class="_ _13"> </span>by<span class="_"> </span>changing</div><div class="t m5 x17 h26 y1df1 ff7 fs19 fc1 sc0 ls0 ws0">the<span class="_"> </span>test<span class="_"> </span>of<span class="_"> </span>the<span class="_"> </span><span class="ffd">for<span class="_ _10"> </span></span>loop<span class="_"> </span>to<span class="_"> </span>be<span class="_"> </span><span class="ffd">i<span class="_ _16"> </span>&lt;<span class="_ _11"> </span>length</span>.</div><div class="t m5 x17 h28 y1df2 ffe fs1e fc6 sc0 ls0 ws0">Solution<span class="_"> </span>to<span class="_"> </span>Problem<span class="_"> </span>2.26<span class="_ _e"> </span><span class="fs16">(page<span class="_"> </span>119)</span></div><div class="t m5 x17 h26 y1df3 ff7 fs19 fc1 sc0 ls0 ws0">T<span class="_ _1"></span>his<span class="_ _11"> </span>example<span class="_ _11"> </span>demonstrates<span class="_ _11"> </span>a<span class="_ _11"> </span>subtle<span class="_ _11"> </span>feature<span class="_ _11"> </span>of<span class="_ _11"> </span>unsigned<span class="_ _11"> </span>arithmetic,<span class="_ _11"> </span>and<span class="_ _11"> </span>also<span class="_ _11"> </span>the</div><div class="t m5 x17 h26 y1df4 ff7 fs19 fc1 sc0 ls0 ws0">property<span class="_ _13"> </span>that<span class="_ _6"> </span>we<span class="_ _13"> </span>sometimes<span class="_ _6"> </span>perform<span class="_ _13"> </span>unsigned<span class="_ _13"> </span>arithmetic<span class="_ _6"> </span>without<span class="_ _13"> </span>realizing<span class="_ _13"> </span>it.<span class="_ _6"> </span>T<span class="_ _1"></span>his</div><div class="t m5 x17 h26 y1df5 ff7 fs19 fc1 sc0 ls0 ws0">can<span class="_"> </span>lead<span class="_"> </span>to<span class="_"> </span>very<span class="_"> </span>tricky<span class="_"> </span>bugs<span class="_ _1"></span>.</div><div class="t m5 x34 h26 y1df6 ff7 fs19 fc1 sc0 ls0 ws0">A.<span class="_ _1f"> </span><span class="ffa">F<span class="_ _1"></span>or<span class="_ _16"> </span>what<span class="_ _14"> </span>cases<span class="_ _16"> </span>will<span class="_ _14"> </span>this<span class="_ _16"> </span>function<span class="_ _16"> </span>produce<span class="_ _14"> </span>an<span class="_ _16"> </span>incorrect<span class="_ _14"> </span>result?<span class="_ _16"> </span><span class="ff7">T<span class="_ _1"></span>he<span class="_ _14"> </span>function</span></span></div><div class="t m5 x2d h26 y1df7 ff7 fs19 fc1 sc0 ls0 ws0">will<span class="_"> </span>incorrectly<span class="_"> </span>return<span class="_"> </span>1<span class="_"> </span>when<span class="_"> </span><span class="ffd">s<span class="_ _10"> </span></span>is<span class="_"> </span>shorter<span class="_"> </span>than<span class="_"> </span><span class="ffd">t</span>.</div><div class="t m5 x34 h26 y1df8 ff7 fs19 fc1 sc0 ls2a ws0">B.<span class="_ _66"> </span><span class="ffa ls0">Explain<span class="_ _14"> </span>how<span class="_ _15"> </span>this<span class="_ _14"> </span>incorrect<span class="_ _15"> </span>result<span class="_ _15"> </span>comes<span class="_ _15"> </span>about.<span class="_ _11"> </span><span class="ff7">Since<span class="_ _14"> </span><span class="ffd">strlen<span class="_ _15"> </span></span>is<span class="_ _15"> </span>deﬁned<span class="_ _15"> </span>to</span></span></div><div class="t m5 x2d h26 y1df9 ff7 fs19 fc1 sc0 ls0 ws0">yield<span class="_ _11"> </span>an<span class="_ _16"> </span>unsigned<span class="_ _11"> </span>result,<span class="_ _16"> </span>the<span class="_ _16"> </span>difference<span class="_ _11"> </span>and<span class="_ _16"> </span>the<span class="_ _11"> </span>comparison<span class="_ _11"> </span>are<span class="_ _16"> </span>both<span class="_ _11"> </span>com-</div><div class="t m5 x2d h26 y1dfa ff7 fs19 fc1 sc0 ls0 ws0">puted<span class="_ _16"> </span>using<span class="_ _14"> </span>unsigned<span class="_ _16"> </span>arithmetic.<span class="_ _16"> </span>When<span class="_ _16"> </span><span class="ffd">s<span class="_ _14"> </span></span>is<span class="_ _16"> </span>shorter<span class="_ _14"> </span>than<span class="_ _16"> </span><span class="ffd">t</span>,<span class="_ _14"> </span>the<span class="_ _14"> </span>difference</div><div class="t m5 x2d h26 y1dfb ffd fs19 fc1 sc0 ls0 ws0">strlen(s)<span class="_ _11"> </span>-<span class="_ _16"> </span>strlen(t)<span class="_ _14"> </span><span class="ff7">should<span class="_ _14"> </span>be<span class="_ _14"> </span>negative<span class="_ _0"></span>,<span class="_ _14"> </span>but<span class="_ _14"> </span>instead<span class="_ _14"> </span>becomes<span class="_ _14"> </span>a<span class="_ _14"> </span>large,</span></div><div class="t m5 x2d h26 y1dfc ff7 fs19 fc1 sc0 ls0 ws0">unsigned<span class="_"> </span>number,<span class="_"> </span>which<span class="_"> </span>is<span class="_"> </span>greater<span class="_"> </span>than<span class="_"> </span>0.</div><div class="t m5 x34 h26 y1dfd ff7 fs19 fc1 sc0 ls22 ws0">C.<span class="_ _24"> </span><span class="ffa ls0">Show<span class="_ _11"> </span>how<span class="_ _11"> </span>to<span class="_ _16"> </span>ﬁx<span class="_ _11"> </span>the<span class="_ _16"> </span>code<span class="_ _11"> </span>so<span class="_ _16"> </span>that<span class="_ _11"> </span>it<span class="_ _16"> </span>will<span class="_ _11"> </span>work<span class="_ _16"> </span>reliably<span class="_ _1"></span>.<span class="_ _13"> </span><span class="ff7">Replace<span class="_ _11"> </span>the<span class="_ _16"> </span>test<span class="_ _11"> </span>with</span></span></div><div class="t m5 x2d h26 y1dfe ff7 fs19 fc1 sc0 ls0 ws0">the<span class="_"> </span>following:</div><div class="t m5 x142 h2d yd7a ffd fs1e fc2 sc0 ls0 ws0">return<span class="_ _e"> </span>strlen(s)<span class="_ _1f"> </span>&gt;<span class="_ _1f"> </span>strlen(t);</div></div><div class="pi" data-data='{"ctm":[2.000000,0.000000,0.000000,2.000000,0.000000,0.000000]}'></div></div>
