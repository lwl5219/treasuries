<div id="pf1bf" class="pf w2 h11" data-page-no="1bf"><div class="pc pc1bf w2 h11"><img class="bi x0 y0 w1 h1" alt="" src="csapp/bg1bf.png"/><div class="t m5 x14 h28 y9b ffe fs1e fc2 sc0 ls0 ws0">446<span class="_ _1b"> </span><span class="ff6 fs1f">Chapter<span class="_ _10"> </span>4<span class="_ _3d"> </span>Processor<span class="_ _10"> </span>Architecture</span></div><div class="t m5 x14 h2f ye7 ffe fs16 fc6 sc0 ls0 ws0">Figure<span class="_"> </span>4.30</div><div class="t m5 x14 h34 y58a ffe fs16 fc1 sc0 ls0 ws0">SEQ<span class="_ _11"> </span>memor<span class="_ _2"></span>y<span class="_"> </span>stage.<span class="_ _16"> </span><span class="ff6">The</span></div><div class="t m5 x14 h34 y58b ff6 fs16 fc1 sc0 ls0 ws0">data<span class="_ _16"> </span>memory<span class="_ _16"> </span>can<span class="_ _16"> </span>either</div><div class="t m5 x14 h34 y58c ff6 fs16 fc1 sc0 ls0 ws0">write<span class="_ _14"> </span>or<span class="_ _14"> </span>read<span class="_ _16"> </span>memor<span class="_ _2"></span>y</div><div class="t m5 x14 h34 y58d ff6 fs16 fc1 sc0 ls0 ws0">values.<span class="_ _10"> </span>The<span class="_ _13"> </span>value<span class="_ _10"> </span>read<span class="_ _13"> </span>from</div><div class="t m5 x14 h34 y58e ff6 fs16 fc1 sc0 ls0 ws0">memory<span class="_ _16"> </span>forms<span class="_ _11"> </span>the<span class="_ _11"> </span>signal</div><div class="t m5 x14 h34 y58f ff6 fs16 fc1 sc0 ls0 ws0">valM.</div><div class="t m5 xb3 h3f y3da4 ff42 fs27 fc1 sc0 ls0 ws0">Stat</div><div class="t m5 x8f h44 y3da5 ff42 fs2a fc1 sc0 ls0 ws0">Stat</div><div class="t m5 xfd h3f y3da6 ff42 fs27 fc1 sc0 ls0 ws0">valM</div><div class="t m5 x1ae h65 y3da7 ff42 fs38 fc1 sc0 ls0 ws0">data out</div><div class="t m5 xed h3f y3da8 ff42 fs27 fc1 sc0 ls0 ws0">Mem.</div><div class="t m5 x157 h3f y3da9 ff42 fs27 fc1 sc0 ls0 ws0">read</div><div class="t m5 xed h3f y3daa ff42 fs27 fc1 sc0 ls0 ws0">Mem.</div><div class="t m5 x115 h3f y3dab ff42 fs27 fc1 sc0 ls0 ws0">write</div><div class="t m5 x68 h65 y3dac ff42 fs38 fc1 sc0 ls0 ws0">write</div><div class="t m5 xe3 h65 y3dad ff42 fs38 fc1 sc0 ls0 ws0">read</div><div class="t m5 x1ed h65 y3dae ff42 fs38 fc1 sc0 ls0 ws0">dmem_error</div><div class="t m5 x4d h65 y3daf ff42 fs38 fc1 sc0 ls0 ws0">imem_error</div><div class="t m5 xe0 h65 y3db0 ff42 fs38 fc1 sc0 ls0 ws0">instr_valid</div><div class="t m5 x113 h3f y3db1 ff42 fs27 fc1 sc0 ls0 ws0">Mem.</div><div class="t m5 x16 h3f y3db2 ff42 fs27 fc1 sc0 ls0 ws0">addr</div><div class="t m5 x1db h3f y3db3 ff42 fs27 fc1 sc0 ls0 ws0">Mem.</div><div class="t m5 x3f h3f y3db4 ff42 fs27 fc1 sc0 ls0 ws0">data</div><div class="t m5 xf8 h3f y3db5 ff42 fs27 fc1 sc0 ls0 ws0">icode<span class="_ _55"> </span>valE<span class="_ _d"> </span>valA<span class="_ _11"> </span>valP</div><div class="t m5 x13c h65 y3db6 ff42 fs38 fc1 sc0 ls0 ws0">data in</div><div class="t m5 xd2 h3f y3db7 ff42 fs27 fc1 sc0 ls0 ws0">Data</div><div class="t m5 x184 h3f y3db8 ff42 fs27 fc1 sc0 ls0 ws0">memory</div><div class="t m5 x1d h26 y3db9 ff7 fs19 fc1 sc0 ls0 ws0">address<span class="_ _21"> </span>and<span class="_ _f"> </span>the<span class="_ _f"> </span>memory<span class="_ _f"> </span>input<span class="_ _f"> </span>data<span class="_ _f"> </span>(for<span class="_ _f"> </span>write<span class="_ _f"> </span>operations).<span class="_ _f"> </span>T<span class="_ _7"></span>wo<span class="_ _f"> </span>other<span class="_ _f"> </span>blocks</div><div class="t m5 x1d h26 y3dba ff7 fs19 fc1 sc0 ls0 ws0">generate<span class="_ _f"> </span>the<span class="_ _f"> </span>control<span class="_ _e"> </span>signals<span class="_ _21"> </span>indicating<span class="_ _e"> </span>whether<span class="_ _21"> </span>to<span class="_ _e"> </span>perform<span class="_ _21"> </span>a<span class="_ _e"> </span>read<span class="_ _21"> </span>or<span class="_ _e"> </span>a<span class="_ _21"> </span>write</div><div class="t m5 x1d h26 y3dbb ff7 fs19 fc1 sc0 ls0 ws0">operation.<span class="_ _11"> </span>When<span class="_"> </span>a<span class="_ _11"> </span>read<span class="_ _11"> </span>operation<span class="_ _16"> </span>is<span class="_"> </span>performed,<span class="_ _16"> </span>the<span class="_"> </span>data<span class="_ _11"> </span>memory<span class="_ _16"> </span>generates<span class="_"> </span>the</div><div class="t m5 x1d h26 y3dbc ff7 fs19 fc1 sc0 ls0 ws0">value<span class="_"> </span><span class="ff6">valM</span>.</div><div class="t m5 x29 h26 y3dbd ff7 fs19 fc1 sc0 ls0 ws0">T<span class="_ _1"></span>he<span class="_ _e"> </span>desired<span class="_ _21"> </span>memory<span class="_ _e"> </span>operation<span class="_ _21"> </span>for<span class="_ _e"> </span>each<span class="_ _21"> </span>instruction<span class="_ _e"> </span>type<span class="_ _21"> </span>is<span class="_ _e"> </span>shown<span class="_ _21"> </span>in<span class="_ _e"> </span>the</div><div class="t m5 x1d h26 y3dbe ff7 fs19 fc1 sc0 ls0 ws0">memory<span class="_"> </span>stage<span class="_ _13"> </span>of<span class="_"> </span>F<span class="_ _1"></span>igures<span class="_"> </span>4.18<span class="_ _13"> </span>to<span class="_"> </span>4.21.<span class="_ _13"> </span>Observe<span class="_"> </span>that<span class="_"> </span>the<span class="_ _13"> </span>address<span class="_"> </span>for<span class="_ _13"> </span>memory<span class="_"> </span>reads</div><div class="t m5 x1d h26 y3dbf ff7 fs19 fc1 sc0 ls0 ws0">and<span class="_"> </span>writes<span class="_"> </span>is<span class="_"> </span>always<span class="_"> </span><span class="ff6">valE<span class="_ _10"> </span></span>or<span class="_"> </span><span class="ff6">valA</span>.<span class="_"> </span>W<span class="_ _3"></span>e<span class="_"> </span>can<span class="_"> </span>describe<span class="_"> </span>this<span class="_"> </span>block<span class="_"> </span>in<span class="_"> </span>HCL<span class="_"> </span>as<span class="_"> </span>follows:</div><div class="t m5 x1d h2d y3dc0 ffd fs1e fc2 sc0 ls0 ws0">word<span class="_ _e"> </span>mem_addr<span class="_ _1f"> </span>=<span class="_ _1f"> </span>[</div><div class="t m5 x22b h2d y3dc1 ffd fs1e fc2 sc0 ls0 ws0">icode<span class="_ _e"> </span>in<span class="_ _1f"> </span>{<span class="_ _1f"> </span>IRMMOVQ,<span class="_ _e"> </span>IPUSHQ,<span class="_ _1f"> </span>ICALL,<span class="_ _e"> </span>IMRMOVQ<span class="_ _1f"> </span>}<span class="_ _1f"> </span>:<span class="_ _e"> </span>valE;</div><div class="t m5 x22b h2d y3dc2 ffd fs1e fc2 sc0 ls0 ws0">icode<span class="_ _e"> </span>in<span class="_ _1f"> </span>{<span class="_ _1f"> </span>IPOPQ,<span class="_ _e"> </span>IRET<span class="_ _1f"> </span>}<span class="_ _e"> </span>:<span class="_ _1f"> </span>valA;</div><div class="t m5 x22b h2d y3dc3 ffd fs1e fc2 sc0 ls0 ws0">#<span class="_ _e"> </span>Other<span class="_ _1f"> </span>instructions<span class="_ _1f"> </span>donâ€™t<span class="_ _e"> </span>need<span class="_ _1f"> </span>address</div><div class="t m5 x1d h2d y3dc4 ffd fs1e fc2 sc0 ls0 ws0">];</div><div class="t m5 x1d h47 y3dc5 ffe fs2b fc1 sc0 ls0 ws0">Practice<span class="_"> </span>Problem<span class="_"> </span>4.25<span class="_ _1f"> </span><span class="fs16">(solution<span class="_"> </span>page<span class="_"> </span>524)</span></div><div class="t m5 x1d h26 y3dc6 ff7 fs19 fc1 sc0 ls0 ws0">Looking<span class="_ _14"> </span>at<span class="_ _14"> </span>the<span class="_ _14"> </span>memory<span class="_ _15"> </span>operations<span class="_ _14"> </span>for<span class="_ _14"> </span>the<span class="_ _15"> </span>different<span class="_ _14"> </span>instructions<span class="_ _14"> </span>shown<span class="_ _14"> </span>in<span class="_ _15"> </span>F<span class="_ _1"></span>ig-</div><div class="t m5 x1d h26 y3dc7 ff7 fs19 fc1 sc0 ls0 ws0">ures<span class="_ _16"> </span>4.18<span class="_ _16"> </span>to<span class="_ _14"> </span>4.21,<span class="_ _16"> </span>we<span class="_ _14"> </span>can<span class="_ _16"> </span>see<span class="_ _16"> </span>that<span class="_ _14"> </span>the<span class="_ _16"> </span>data<span class="_ _16"> </span>for<span class="_ _14"> </span>memory<span class="_ _16"> </span>writes<span class="_ _16"> </span>are<span class="_ _16"> </span>always<span class="_ _14"> </span>either</div><div class="t m5 x1d h26 y3dc8 ff6 fs19 fc1 sc0 ls0 ws0">valA<span class="_ _10"> </span><span class="ff7">or<span class="_"> </span></span>valP<span class="ff7">.<span class="_"> </span>Write<span class="_"> </span>HCL<span class="_"> </span>code<span class="_"> </span>for<span class="_"> </span>the<span class="_"> </span>signal<span class="_"> </span></span>mem_data<span class="_ _10"> </span><span class="ff7">in<span class="_"> </span>SEQ.</span></div><div class="t m5 x29 h26 y3dc9 ff7 fs19 fc1 sc0 ls0 ws0">W<span class="_ _3"></span>e<span class="_ _16"> </span>want<span class="_ _16"> </span>to<span class="_ _16"> </span>set<span class="_ _16"> </span>the<span class="_ _11"> </span>control<span class="_ _16"> </span>signal<span class="_ _16"> </span><span class="ff6">mem_read<span class="_ _16"> </span></span>only<span class="_ _16"> </span>for<span class="_ _16"> </span>instructions<span class="_ _16"> </span>that<span class="_ _11"> </span>read</div><div class="t m5 x1d h26 y3dca ff7 fs19 fc1 sc0 ls0 ws0">data<span class="_"> </span>from<span class="_"> </span>memory<span class="_ _3"></span>,<span class="_"> </span>as<span class="_"> </span>expressed<span class="_"> </span>by<span class="_"> </span>the<span class="_"> </span>following<span class="_"> </span>HCL<span class="_"> </span>code:</div><div class="t m5 x1d h2d y3dcb ffd fs1e fc2 sc0 ls0 ws0">bool<span class="_ _e"> </span>mem_read<span class="_ _1f"> </span>=<span class="_ _1f"> </span>icode<span class="_ _e"> </span>in<span class="_ _1f"> </span>{<span class="_ _e"> </span>IMRMOVQ,<span class="_ _1f"> </span>IPOPQ,<span class="_ _1f"> </span>IRET<span class="_ _e"> </span>};</div><div class="t m5 x1d h47 y3dcc ffe fs2b fc1 sc0 ls0 ws0">Practice<span class="_"> </span>Problem<span class="_"> </span>4.26<span class="_ _1f"> </span><span class="fs16">(solution<span class="_"> </span>page<span class="_"> </span>525)</span></div><div class="t m5 x1d h26 y28e1 ff7 fs19 fc1 sc0 ls0 ws0">W<span class="_ _3"></span>e<span class="_"> </span>want<span class="_"> </span>to<span class="_ _13"> </span>set<span class="_"> </span>the<span class="_"> </span>control<span class="_"> </span>signal<span class="_ _13"> </span><span class="ff6">mem_write<span class="_ _10"> </span></span>only<span class="_"> </span>for<span class="_"> </span>instructions<span class="_"> </span>that<span class="_ _13"> </span>write<span class="_"> </span>data</div><div class="t m5 x1d h26 y28e2 ff7 fs19 fc1 sc0 ls0 ws0">to<span class="_"> </span>memory<span class="_ _3"></span>.<span class="_"> </span>Write<span class="_"> </span>HCL<span class="_"> </span>code<span class="_"> </span>for<span class="_"> </span>the<span class="_"> </span>signal<span class="_"> </span><span class="ff6">mem_write<span class="_ _10"> </span></span>in<span class="_"> </span>SEQ.</div></div><div class="pi" data-data='{"ctm":[2.000000,0.000000,0.000000,2.000000,0.000000,0.000000]}'></div></div>
