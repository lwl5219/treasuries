<div id="pf1ce" class="pf w2 h11" data-page-no="1ce"><div class="pc pc1ce w2 h11"><img class="bi x0 y0 w1 h1" alt="" src="csapp/bg1ce.png"/><div class="t m5 x13d h28 y9b ff6 fs1f fc2 sc0 ls0 ws0">Section<span class="_ _10"> </span>4.5<span class="_ _60"> </span>Pipelined<span class="_ _10"> </span>Y86-64<span class="_ _10"> </span>Implementations<span class="_ _3e"> </span><span class="ffe fs1e">461</span></div><div class="t m5 x72 h26 ye7 ff7 fs19 fc2 sc0 ls0 ws0">E<span class="_ _e"> </span>sits<span class="_ _16"> </span>between<span class="_ _11"> </span>the<span class="_ _11"> </span>decode<span class="_ _16"> </span>and<span class="_ _11"> </span>execute<span class="_ _11"> </span>stages<span class="_ _1"></span>.<span class="_ _16"> </span>It<span class="_"> </span>holds<span class="_ _16"> </span>information<span class="_ _11"> </span>about<span class="_ _11"> </span>the</div><div class="t m5 x30 h26 y2a7 ff7 fs19 fc2 sc0 ls0 ws0">most<span class="_ _11"> </span>recently<span class="_ _11"> </span>decoded<span class="_ _11"> </span>instruction<span class="_ _11"> </span>and<span class="_ _11"> </span>the<span class="_ _16"> </span>values<span class="_"> </span>read<span class="_ _11"> </span>from<span class="_ _16"> </span>the<span class="_"> </span>register</div><div class="t m5 x30 h26 y2a8 ff7 fs19 fc2 sc0 ls0 ws0">ﬁle<span class="_"> </span>for<span class="_"> </span>processing<span class="_"> </span>by<span class="_"> </span>the<span class="_"> </span>execute<span class="_"> </span>stage<span class="_ _1"></span>.</div><div class="t m5 x72 h26 y3a97 ff7 fs19 fc2 sc0 ls0 ws0">M<span class="_ _e"> </span>sits<span class="_ _f"> </span>between<span class="_ _f"> </span>the<span class="_ _21"> </span>execute<span class="_ _f"> </span>and<span class="_ _f"> </span>memory<span class="_ _21"> </span>stages<span class="_ _1"></span>.<span class="_ _f"> </span>It<span class="_ _f"> </span>holds<span class="_ _21"> </span>the<span class="_ _f"> </span>results<span class="_ _f"> </span>of<span class="_ _21"> </span>the</div><div class="t m5 x30 h26 y3a98 ff7 fs19 fc2 sc0 ls0 ws0">most<span class="_ _11"> </span>recently<span class="_ _16"> </span>executed<span class="_ _16"> </span>instruction<span class="_ _11"> </span>for<span class="_ _16"> </span>processing<span class="_ _16"> </span>by<span class="_ _11"> </span>the<span class="_ _16"> </span>memory<span class="_ _16"> </span>stage<span class="_ _1"></span>.</div><div class="t m5 x30 h26 y1a3 ff7 fs19 fc2 sc0 ls0 ws0">It<span class="_"> </span>also<span class="_"> </span>holds<span class="_ _13"> </span>information<span class="_"> </span>about<span class="_"> </span>branch<span class="_"> </span>conditions<span class="_"> </span>and<span class="_"> </span>branch<span class="_ _13"> </span>targets<span class="_"> </span>for</div><div class="t m5 x30 h26 y3a99 ff7 fs19 fc2 sc0 ls0 ws0">processing<span class="_"> </span>conditional<span class="_"> </span>jumps<span class="_ _1"></span>.</div><div class="t m5 x72 h26 y3c00 ff7 fs19 fc2 sc0 ls0 ws0">W<span class="_ _e"> </span>sits<span class="_ _e"> </span>between<span class="_ _21"> </span>the<span class="_ _e"> </span>memory<span class="_ _21"> </span>stage<span class="_ _e"> </span>and<span class="_ _21"> </span>the<span class="_ _e"> </span>feedback<span class="_ _21"> </span>paths<span class="_ _f"> </span>that<span class="_ _e"> </span>supply<span class="_ _21"> </span>the</div><div class="t m5 x30 h26 y3c01 ff7 fs19 fc2 sc0 ls0 ws0">computed<span class="_ _14"> </span>results<span class="_ _14"> </span>to<span class="_ _14"> </span>the<span class="_ _14"> </span>register<span class="_ _14"> </span>ﬁle<span class="_ _14"> </span>for<span class="_ _14"> </span>writing<span class="_ _14"> </span>and<span class="_ _14"> </span>the<span class="_ _14"> </span>return<span class="_ _14"> </span>address</div><div class="t m5 x30 h26 y4001 ff7 fs19 fc2 sc0 ls0 ws0">to<span class="_"> </span>the<span class="_"> </span>PC<span class="_"> </span>selection<span class="_"> </span>logic<span class="_"> </span>when<span class="_"> </span>completing<span class="_"> </span>a<span class="_"> </span><span class="ffd">ret<span class="_ _10"> </span></span>instruction.</div><div class="t m5 x26 h26 y4002 ff7 fs19 fc2 sc0 ls0 ws0">F<span class="_ _1"></span>igure<span class="_ _11"> </span>4.42<span class="_ _11"> </span>shows<span class="_ _16"> </span>how<span class="_"> </span>the<span class="_ _11"> </span>following<span class="_ _11"> </span>code<span class="_ _11"> </span>sequence<span class="_ _11"> </span>would<span class="_ _11"> </span>ﬂow<span class="_ _11"> </span>through<span class="_ _16"> </span>our</div><div class="t m5 x17 h26 y4003 ff7 fs19 fc2 sc0 ls0 ws0">ﬁve-stage<span class="_ _11"> </span>pipeline,<span class="_ _11"> </span>where<span class="_ _16"> </span>the<span class="_ _11"> </span>comments<span class="_ _11"> </span>identify<span class="_ _16"> </span>the<span class="_ _11"> </span>instructions<span class="_ _16"> </span>as<span class="_ _11"> </span><span class="ffd">I1<span class="_ _16"> </span></span>to<span class="_ _11"> </span><span class="ffd">I5<span class="_ _16"> </span></span>for</div><div class="t m5 x17 h26 y4004 ff7 fs19 fc2 sc0 ls0 ws0">reference:</div><div class="t m5 x2c h2d y4005 ff6 fs20 fc6 sc0 ls0 ws0">1<span class="_ _45"> </span><span class="ffd fs1e fc2">irmovq<span class="_ _1a"> </span>$1,%rax<span class="_ _1a"> </span>#<span class="_ _e"> </span>I1</span></div><div class="t m5 x2c h2d y4006 ff6 fs20 fc6 sc0 ls0 ws0">2<span class="_ _45"> </span><span class="ffd fs1e fc2">irmovq<span class="_ _1a"> </span>$2,%rbx<span class="_ _1a"> </span>#<span class="_ _e"> </span>I2</span></div><div class="t m5 x2c h2d y4007 ff6 fs20 fc6 sc0 ls0 ws0">3<span class="_ _45"> </span><span class="ffd fs1e fc2">irmovq<span class="_ _1a"> </span>$3,%rcx<span class="_ _1a"> </span>#<span class="_ _e"> </span>I3</span></div><div class="t m5 x2c h2d y4008 ff6 fs20 fc6 sc0 ls0 ws0">4<span class="_ _45"> </span><span class="ffd fs1e fc2">irmovq<span class="_ _1a"> </span>$4,%rdx<span class="_ _1a"> </span>#<span class="_ _e"> </span>I4</span></div><div class="t m5 x2c h2e y4009 ff6 fs20 fc6 sc0 ls0 ws0">5</div><div class="t m5 xd1 h2d y400a ffd fs1e fc2 sc0 ls0 ws0">halt<span class="_ _35"> </span>#<span class="_ _1f"> </span>I5</div><div class="t m5 x17 h40 y400b ff4a fs28 fc1 sc0 ls0 ws0">irmovq     $1,%rax    <span class="fc6">#Il</span></div><div class="t m5 x17 h40 y400c ff4a fs28 fc1 sc0 ls0 ws0">irmovq     $2,%rbx    <span class="fc6">#I2</span></div><div class="t m5 x17 h40 y400d ff4a fs28 fc1 sc0 ls0 ws0">irmovq     $3,%rcx    <span class="fc6">#I3</span></div><div class="t m5 x17 h40 y400e ff4a fs28 fc1 sc0 ls0 ws0">irmovq     $4,%rdx    <span class="fc6">#I4</span></div><div class="t m5 x17 h40 y400f ff4a fs28 fc1 sc0 ls0 ws0">halt                  <span class="fc6">#I5</span></div><div class="t m5 x183 h3f y4010 ff49 fs27 fc1 sc0 ls1c8 ws0">FDE<span class="_ _3"></span>M<span class="_ _8"></span>W</div><div class="t m5 x48 h65 y4011 ff49 fs38 fc6 sc0 ls1c9 ws0">12345</div><div class="t m5 x90 h3f y4012 ff49 fs27 fc1 sc0 ls1c8 ws0">FDE<span class="_ _3"></span>M<span class="_ _8"></span>W</div><div class="t m5 x15f h65 y4013 ff49 fs38 fc6 sc0 ls0 ws0">6</div><div class="t m5 x197 h3f y4014 ff49 fs27 fc1 sc0 ls1ca ws0">FDE<span class="_ _3"></span>M<span class="_ _8"></span>W</div><div class="t m5 x80 h65 y4015 ff49 fs38 fc6 sc0 ls0 ws0">7</div><div class="t m5 x121 h3f y4016 ff49 fs27 fc1 sc0 ls1ca ws0">FDE<span class="_ _3"></span>M<span class="_ _8"></span>W</div><div class="t m5 x108 h65 y4017 ff49 fs38 fc6 sc0 ls0 ws0">8</div><div class="t m5 x254 h3f y4018 ff49 fs27 fc1 sc0 ls1ca ws0">FDE<span class="_ _3"></span>M<span class="_ _8"></span>W</div><div class="t m5 x1e1 h65 y4019 ff49 fs38 fc6 sc0 ls0 ws0">9</div><div class="t m5 x215 h3f y401a ff49 fs27 fc1 sc0 ls0 ws0">Cycle 5</div><div class="t m5 x17a h3f y401b ff49 fs27 fc1 sc0 ls0 ws0">W</div><div class="t m5 xb1 h40 y401c ff4a fs28 fc1 sc0 ls0 ws0">Il</div><div class="t m5 x114 h3f y401d ff49 fs27 fc1 sc0 ls0 ws0">M</div><div class="t m5 xb1 h40 y401e ff4a fs28 fc1 sc0 ls0 ws0">I2</div><div class="t m5 x254 h3f y401f ff49 fs27 fc1 sc0 ls0 ws0">E</div><div class="t m5 xb1 h40 y4020 ff4a fs28 fc1 sc0 ls0 ws0">I3</div><div class="t m5 x254 h3f y4021 ff49 fs27 fc1 sc0 ls0 ws0">D</div><div class="t m5 xb1 h40 y4022 ff4a fs28 fc1 sc0 ls0 ws0">I4</div><div class="t m5 x254 h3f y4023 ff49 fs27 fc1 sc0 ls0 ws0">F</div><div class="t m5 xb1 h40 y4024 ff4a fs28 fc1 sc0 ls0 ws0">I5</div><div class="t m5 x17 h2f y4025 ffe fs16 fc6 sc0 ls0 ws0">Figure<span class="_"> </span>4.42<span class="_ _66"> </span><span class="fc1">Example<span class="_"> </span>of<span class="_"> </span>instruction<span class="_"> </span>ﬂow<span class="_"> </span>through<span class="_"> </span>pipeline.</span></div></div><div class="pi" data-data='{"ctm":[2.000000,0.000000,0.000000,2.000000,0.000000,0.000000]}'></div></div>
