<div id="pf70" class="pf w2 h11" data-page-no="70"><div class="pc pc70 w2 h11"><img class="bi x0 y0 w1 h1" alt="" src="csapp/bg70.png"/><div class="t m5 x94 h28 y9b ff6 fs1f fc2 sc0 ls0 ws0">Section<span class="_ _10"> </span>2.2<span class="_ _60"> </span>Integer<span class="_ _10"> </span>Representations<span class="_ _3e"> </span><span class="ffe fs1e">111</span></div><div class="t m5 x26 h26 ye7 ff7 fs19 fc2 sc0 ls0 ws0">C<span class="_"> </span>allows<span class="_"> </span>conversion<span class="_"> </span>between<span class="_ _11"> </span>unsigned<span class="_"> </span>and<span class="_"> </span>signed.<span class="_"> </span>Although<span class="_ _11"> </span>the<span class="_"> </span>C<span class="_"> </span>standard</div><div class="t m5 x17 h26 y2a7 ff7 fs19 fc2 sc0 ls0 ws0">does<span class="_ _15"> </span>not<span class="_ _21"> </span>specify<span class="_ _21"> </span>precisely<span class="_ _21"> </span>how<span class="_ _21"> </span>this<span class="_ _21"> </span>conversion<span class="_ _21"> </span>should<span class="_ _21"> </span>be<span class="_ _21"> </span>made<span class="_ _0"></span>,<span class="_ _f"> </span>most<span class="_ _21"> </span>systems</div><div class="t m5 x17 h26 y2a8 ff7 fs19 fc2 sc0 ls0 ws0">follow<span class="_ _6"> </span>the<span class="_ _6"> </span>rule<span class="_ _6"> </span>that<span class="_ _a"> </span>the<span class="_ _6"> </span>underlying<span class="_ _6"> </span>bit<span class="_ _6"> </span>representation<span class="_ _6"> </span>does<span class="_ _6"> </span>not<span class="_ _6"> </span>change.<span class="_ _a"> </span>T<span class="_ _0"></span>his<span class="_ _6"> </span>rule<span class="_ _a"> </span>has</div><div class="t m5 x17 h26 y2f7 ff7 fs19 fc2 sc0 ls0 ws0">the<span class="_ _6"> </span>effect<span class="_ _6"> </span>of<span class="_ _6"> </span>applying<span class="_ _6"> </span>the<span class="_ _6"> </span>function<span class="_ _6"> </span><span class="ffa">U2T</span></div><div class="t m5 xec h50 yfff ff11 fs25 fc2 sc0 ls0 ws0">w</div><div class="t m5 xa8 h26 yecc ff7 fs19 fc2 sc0 ls0 ws0">when<span class="_ _6"> </span>converting<span class="_ _6"> </span>from<span class="_ _6"> </span>unsigned<span class="_ _6"> </span>to<span class="_ _6"> </span>signed,</div><div class="t m5 x17 h26 y1000 ff7 fs19 fc2 sc0 ls0 ws0">and<span class="_ _11"> </span><span class="ffa">T2U</span></div><div class="t m5 x123 h50 y1001 ff11 fs25 fc2 sc0 ls0 ws0">w</div><div class="t m5 xd0 h26 yecd ff7 fs19 fc2 sc0 ls0 ws0">when<span class="_ _11"> </span>converting<span class="_ _16"> </span>from<span class="_ _16"> </span>signed<span class="_ _11"> </span>to<span class="_ _16"> </span>unsigned,<span class="_ _16"> </span>where<span class="_ _16"> </span><span class="ff11">w<span class="_"> </span></span>is<span class="_ _11"> </span>the<span class="_ _16"> </span>number<span class="_ _11"> </span>of</div><div class="t m5 x17 h26 y1002 ff7 fs19 fc2 sc0 ls0 ws0">bits<span class="_"> </span>for<span class="_"> </span>the<span class="_"> </span>data<span class="_"> </span>type<span class="_ _1"></span>.</div><div class="t m5 x26 h26 y1003 ff7 fs19 fc2 sc0 ls0 ws0">Conversions<span class="_ _13"> </span>can<span class="_"> </span>happen<span class="_ _13"> </span>due<span class="_ _13"> </span>to<span class="_ _13"> </span>explicit<span class="_"> </span>casting<span class="_ _1"></span>,<span class="_"> </span>such<span class="_ _13"> </span>as<span class="_ _13"> </span>in<span class="_"> </span>the<span class="_ _13"> </span>following<span class="_ _13"> </span>code:</div><div class="t m5 x2c h2d y1004 ff6 fs20 fc6 sc0 ls0 ws0">1<span class="_ _20"> </span><span class="ffd fs1e fc2">int<span class="_ _e"> </span>tx,<span class="_ _1f"> </span>ty;</span></div><div class="t m5 x2c h2d y1005 ff6 fs20 fc6 sc0 ls0 ws0">2<span class="_ _20"> </span><span class="ffd fs1e fc2">unsigned<span class="_ _e"> </span>ux,<span class="_ _1f"> </span>uy;</span></div><div class="t m5 x2c h2e y1006 ff6 fs20 fc6 sc0 ls0 ws0">3</div><div class="t m5 x2c h2e y1007 ff6 fs20 fc6 sc0 ls0 ws0">4</div><div class="t m5 x142 h2d y1008 ffd fs1e fc2 sc0 ls0 ws0">tx<span class="_ _e"> </span>=<span class="_ _1f"> </span>(int)<span class="_ _1f"> </span>ux;</div><div class="t m5 x2c h2d y1009 ff6 fs20 fc6 sc0 ls0 ws0">5<span class="_ _20"> </span><span class="ffd fs1e fc2">uy<span class="_ _e"> </span>=<span class="_ _1f"> </span>(unsigned)<span class="_ _1f"> </span>ty;</span></div><div class="t m5 x17 h26 y100a ff7 fs19 fc2 sc0 ls0 ws0">Alternatively<span class="_ _3"></span>,<span class="_ _16"> </span>they<span class="_ _14"> </span>can<span class="_ _16"> </span>happen<span class="_ _16"> </span>implicitly<span class="_ _14"> </span>when<span class="_ _16"> </span>an<span class="_ _16"> </span>expression<span class="_ _14"> </span>of<span class="_ _16"> </span>one<span class="_ _16"> </span>type<span class="_ _16"> </span>is<span class="_ _14"> </span>as-</div><div class="t m5 x17 h26 y100b ff7 fs19 fc2 sc0 ls0 ws0">signed<span class="_"> </span>to<span class="_"> </span>a<span class="_"> </span>variable<span class="_"> </span>of<span class="_"> </span>another,<span class="_"> </span>as<span class="_"> </span>in<span class="_"> </span>the<span class="_"> </span>following<span class="_"> </span>code:</div><div class="t m5 x2c h2d y100c ff6 fs20 fc6 sc0 ls0 ws0">1<span class="_ _20"> </span><span class="ffd fs1e fc2">int<span class="_ _e"> </span>tx,<span class="_ _1f"> </span>ty;</span></div><div class="t m5 x2c h2d y100d ff6 fs20 fc6 sc0 ls0 ws0">2<span class="_ _20"> </span><span class="ffd fs1e fc2">unsigned<span class="_ _e"> </span>ux,<span class="_ _1f"> </span>uy;</span></div><div class="t m5 x2c h2e y100e ff6 fs20 fc6 sc0 ls0 ws0">3</div><div class="t m5 x2c h2e y100f ff6 fs20 fc6 sc0 ls0 ws0">4</div><div class="t m5 x142 h2d y1010 ffd fs1e fc2 sc0 ls0 ws0">tx<span class="_ _e"> </span>=<span class="_ _1f"> </span>ux;<span class="_ _1f"> </span>/*<span class="_ _e"> </span>Cast<span class="_ _1f"> </span>to<span class="_ _e"> </span>signed<span class="_ _1f"> </span>*/</div><div class="t m5 x2c h2d y1011 ff6 fs20 fc6 sc0 ls0 ws0">5<span class="_ _20"> </span><span class="ffd fs1e fc2">uy<span class="_ _e"> </span>=<span class="_ _1f"> </span>ty;<span class="_ _1f"> </span>/*<span class="_ _e"> </span>Cast<span class="_ _1f"> </span>to<span class="_ _e"> </span>unsigned<span class="_ _1f"> </span>*/</span></div><div class="t m5 x26 h26 y1012 ff7 fs19 fc2 sc0 ls0 ws0">When<span class="_ _15"> </span>printing<span class="_ _21"> </span>numeric<span class="_ _21"> </span>values<span class="_ _f"> </span>with<span class="_ _21"> </span><span class="ffd">printf</span>,<span class="_ _e"> </span>the<span class="_ _15"> </span>directives<span class="_ _21"> </span><span class="ffd">%d</span>,<span class="_ _e"> </span><span class="ffd">%u</span>,<span class="_ _f"> </span>and<span class="_ _21"> </span><span class="ffd">%x</span></div><div class="t m5 x17 h26 y1013 ff7 fs19 fc2 sc0 ls0 ws0">are<span class="_ _21"> </span>used<span class="_ _21"> </span>to<span class="_ _21"> </span>print<span class="_ _21"> </span>a<span class="_ _21"> </span>number<span class="_ _21"> </span>as<span class="_ _21"> </span>a<span class="_ _21"> </span>signed<span class="_ _21"> </span>decimal,<span class="_ _f"> </span>an<span class="_ _21"> </span>unsigned<span class="_ _21"> </span>decimal,<span class="_ _e"> </span>and<span class="_ _15"> </span>in</div><div class="t m5 x17 h26 y1014 ff7 fs19 fc2 sc0 ls0 ws0">hexadecimal<span class="_ _14"> </span>format,<span class="_ _21"> </span>respectively<span class="_ _3"></span>.<span class="_ _15"> </span>Note<span class="_ _15"> </span>that<span class="_ _14"> </span><span class="ffd">printf<span class="_ _15"> </span></span>does<span class="_ _15"> </span>not<span class="_ _15"> </span>make<span class="_ _14"> </span>use<span class="_ _15"> </span>of<span class="_ _15"> </span>any</div><div class="t m5 x17 h26 y1015 ff7 fs19 fc2 sc0 ls0 ws0">type<span class="_ _11"> </span>information,<span class="_ _16"> </span>and<span class="_ _11"> </span>so<span class="_ _11"> </span>it<span class="_ _11"> </span>is<span class="_ _16"> </span>possible<span class="_ _11"> </span>to<span class="_ _11"> </span>print<span class="_ _11"> </span>a<span class="_ _16"> </span>value<span class="_ _11"> </span>of<span class="_ _11"> </span>type<span class="_ _11"> </span><span class="ffd">int<span class="_ _16"> </span></span>with<span class="_ _11"> </span>directive</div><div class="t m5 x17 h26 y1016 ffd fs19 fc2 sc0 ls0 ws0">%u<span class="_ _15"> </span><span class="ff7">and<span class="_ _15"> </span>a<span class="_ _15"> </span>value<span class="_ _15"> </span>of<span class="_ _15"> </span>type<span class="_ _15"> </span></span>unsigned<span class="_ _15"> </span><span class="ff7">with<span class="_ _15"> </span>directive<span class="_ _15"> </span></span>%d<span class="ff7">.<span class="_ _15"> </span>F<span class="_ _1"></span>or<span class="_ _15"> </span>example,<span class="_ _15"> </span>consider<span class="_ _15"> </span>the</span></div><div class="t m5 x17 h26 y1017 ff7 fs19 fc2 sc0 ls0 ws0">following<span class="_"> </span>code:</div><div class="t m5 x2c h2d y1018 ff6 fs20 fc6 sc0 ls0 ws0">1<span class="_ _20"> </span><span class="ffd fs1e fc2">int<span class="_ _e"> </span>x<span class="_ _1f"> </span>=<span class="_ _1f"> </span>-1;</span></div><div class="t m5 x2c h2d y1019 ff6 fs20 fc6 sc0 ls0 ws0">2<span class="_ _20"> </span><span class="ffd fs1e fc2">unsigned<span class="_ _e"> </span>u<span class="_ _1f"> </span>=<span class="_ _1f"> </span>2147483648;<span class="_ _e"> </span>/*<span class="_ _1f"> </span>2<span class="_ _e"> </span>to<span class="_ _1f"> </span>the<span class="_ _1f"> </span>31st<span class="_ _e"> </span>*/</span></div><div class="t m5 x2c h2e y101a ff6 fs20 fc6 sc0 ls0 ws0">3</div><div class="t m5 x2c h2e y101b ff6 fs20 fc6 sc0 ls0 ws0">4</div><div class="t m5 x142 h2d y101c ffd fs1e fc2 sc0 ls0 ws0">printf(&quot;x<span class="_ _e"> </span>=<span class="_ _1f"> </span>%u<span class="_ _1f"> </span>=<span class="_ _e"> </span>%d\n&quot;,<span class="_ _1f"> </span>x,<span class="_ _e"> </span>x);</div><div class="t m5 x2c h2d y101d ff6 fs20 fc6 sc0 ls0 ws0">5<span class="_ _20"> </span><span class="ffd fs1e fc2">printf(&quot;u<span class="_ _e"> </span>=<span class="_ _1f"> </span>%u<span class="_ _1f"> </span>=<span class="_ _e"> </span>%d\n&quot;,<span class="_ _1f"> </span>u,<span class="_ _e"> </span>u);</span></div><div class="t m5 x17 h26 y101e ff7 fs19 fc2 sc0 ls0 ws0">When<span class="_"> </span>compiled<span class="_"> </span>as<span class="_"> </span>a<span class="_"> </span>32-bit<span class="_"> </span>program,<span class="_"> </span>it<span class="_"> </span>prints<span class="_"> </span>the<span class="_"> </span>following:</div><div class="t m5 x17 h2d y101f ffd fs1e fc2 sc0 ls0 ws0">x<span class="_ _e"> </span>=<span class="_ _1f"> </span>4294967295<span class="_ _1f"> </span>=<span class="_ _e"> </span>-1</div><div class="t m5 x17 h2d y1020 ffd fs1e fc2 sc0 ls0 ws0">u<span class="_ _e"> </span>=<span class="_ _1f"> </span>2147483648<span class="_ _1f"> </span>=<span class="_ _e"> </span>-2147483648</div><div class="t m5 x17 h26 y1021 ff7 fs19 fc2 sc0 ls0 ws0">In<span class="_ _13"> </span>both<span class="_ _13"> </span>cases<span class="_ _1"></span>,<span class="_"> </span><span class="ffd">printf<span class="_ _13"> </span></span>prints<span class="_ _13"> </span>the<span class="_ _13"> </span>word<span class="_ _13"> </span>ﬁrst<span class="_ _13"> </span>as<span class="_ _13"> </span>if<span class="_ _13"> </span>it<span class="_"> </span>represented<span class="_ _13"> </span>an<span class="_ _13"> </span>unsigned<span class="_ _13"> </span>number</div><div class="t m5 x17 h26 y1022 ff7 fs19 fc2 sc0 ls0 ws0">and<span class="_ _f"> </span>second<span class="_ _f"> </span>as<span class="_ _f"> </span>if<span class="_ _f"> </span>it<span class="_ _f"> </span>represented<span class="_ _f"> </span>a<span class="_ _e"> </span>signed<span class="_ _21"> </span>number.<span class="_ _21"> </span>W<span class="_ _1"></span>e<span class="_ _f"> </span>can<span class="_ _f"> </span>see<span class="_ _f"> </span>the<span class="_ _f"> </span>conversion</div><div class="t m5 x17 h26 y1023 ff7 fs19 fc2 sc0 ls0 ws0">routines<span class="_"> </span>in<span class="_ _11"> </span>action:<span class="_ _11"> </span><span class="ffa">T2U</span></div><div class="t m5 x66 h3c y1024 ff7 fs25 fc2 sc0 ls0 ws0">32</div><div class="t m5 xcc h46 y1025 ff11 fs19 fc2 sc0 ls0 ws0">(<span class="ff12">−<span class="ff7">1<span class="_ _1"></span><span class="ff11">)<span class="_ _10"> </span><span class="ff12">=<span class="_ _13"></span><span class="ffa">UMax</span></span></span></span></span></div><div class="t m5 xbe h3c y1026 ff7 fs25 fc2 sc0 ls0 ws0">32</div><div class="t m5 x9f h46 y1027 ff12 fs19 fc2 sc0 ls0 ws0">=<span class="_ _13"> </span><span class="ff7">2</span></div><div class="t m5 x88 h3c y1028 ff7 fs25 fc2 sc0 ls0 ws0">32</div><div class="t m5 x17c h46 y1027 ff12 fs19 fc2 sc0 ls0 ws0">−<span class="_ _13"> </span><span class="ff7">1<span class="_"> </span>and<span class="_"> </span><span class="ffa">U2T</span></span></div><div class="t m5 x19a h3c y1026 ff7 fs25 fc2 sc0 ls0 ws0">32</div><div class="t m5 x1aa h26 y1027 ff11 fs19 fc2 sc0 ls0 ws0">(<span class="ff7">2</span></div><div class="t m5 x6d h3c y1028 ff7 fs25 fc2 sc0 ls0 ws0">31</div><div class="t m5 x1a1 h46 y1027 ff11 fs19 fc2 sc0 ls0 ws0">)<span class="_ _13"> </span><span class="ff12">=<span class="_ _10"> </span><span class="ff7">2</span></span></div><div class="t m5 x1ca h3c y1028 ff7 fs25 fc2 sc0 ls0 ws0">31</div><div class="t m5 x8b h46 y1027 ff12 fs19 fc2 sc0 ls0 ws0">−<span class="_ _13"> </span><span class="ff7">2</span></div><div class="t m5 x172 h3c y1028 ff7 fs25 fc2 sc0 ls0 ws0">32</div><div class="t m5 x4e h46 y1027 ff12 fs19 fc2 sc0 ls0 ws0">=</div><div class="t m5 x17 h46 y1029 ff12 fs19 fc2 sc0 ls0 ws0">−<span class="ff7">2</span></div><div class="t m5 xc h3c y102a ff7 fs25 fc2 sc0 ls0 ws0">31</div><div class="t m5 x73 h46 y102b ff12 fs19 fc2 sc0 ls0 ws0">=<span class="_ _13"> </span><span class="ffa">TMin</span></div><div class="t m5 x5c h3c y102c ff7 fs25 fc2 sc0 ls0 ws0">32</div><div class="t m5 xcf h26 y102b ff7 fs19 fc2 sc0 ls0 ws0">.</div><div class="t m5 x26 h26 y102d ff7 fs19 fc2 sc0 ls0 ws0">Some<span class="_ _15"> </span>possibly<span class="_ _15"> </span>nonintuitive<span class="_ _15"> </span>behavior<span class="_ _15"> </span>arises<span class="_ _15"> </span>due<span class="_ _15"> </span>to<span class="_ _15"> </span>C’s<span class="_ _15"> </span>handling<span class="_ _15"> </span>of<span class="_ _15"> </span>expres-</div><div class="t m5 x17 h26 y102e ff7 fs19 fc2 sc0 ls0 ws0">sions<span class="_ _14"> </span>containing<span class="_ _14"> </span>combinations<span class="_ _14"> </span>of<span class="_ _14"> </span>signed<span class="_ _15"> </span>and<span class="_ _14"> </span>unsigned<span class="_ _14"> </span>quantities<span class="_ _1"></span>.<span class="_ _14"> </span>When<span class="_ _14"> </span>an<span class="_ _14"> </span>op-</div><div class="t m5 x17 h26 y102f ff7 fs19 fc2 sc0 ls0 ws0">eration<span class="_ _16"> </span>is<span class="_ _16"> </span>performed<span class="_ _16"> </span>where<span class="_ _14"> </span>one<span class="_ _16"> </span>operand<span class="_ _16"> </span>is<span class="_ _16"> </span>signed<span class="_ _14"> </span>and<span class="_ _16"> </span>the<span class="_ _16"> </span>other<span class="_ _16"> </span>is<span class="_ _16"> </span>unsigned,<span class="_ _14"> </span>C</div><div class="t m5 x17 h26 y1030 ff7 fs19 fc2 sc0 ls0 ws0">implicitly<span class="_ _21"> </span>casts<span class="_ _21"> </span>the<span class="_ _21"> </span>signed<span class="_ _21"> </span>argument<span class="_ _21"> </span>to<span class="_ _21"> </span>unsigned<span class="_ _21"> </span>and<span class="_ _21"> </span>performs<span class="_ _21"> </span>the<span class="_ _21"> </span>operations</div></div><div class="pi" data-data='{"ctm":[2.000000,0.000000,0.000000,2.000000,0.000000,0.000000]}'></div></div>
