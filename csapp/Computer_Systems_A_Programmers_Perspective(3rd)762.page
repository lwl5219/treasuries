<div id="pf2fa" class="pf w2 h11" data-page-no="2fa"><div class="pc pc2fa w2 h11"><img class="bi x0 y0 w1 h1" alt="" src="csapp/bg2fa.png"/><div class="t m5 x147 h28 y9b ff6 fs1f fc2 sc0 ls0 ws0">Section<span class="_ _10"> </span>8.1<span class="_ _60"> </span>Exceptions<span class="_ _3e"> </span><span class="ffe fs1e">761</span></div><div class="t m5 x17 h2f ye7 ffe fs16 fc6 sc0 ls0 ws0">Figure<span class="_"> </span>8.2</div><div class="t m5 x17 h34 y58a ffe fs16 fc1 sc0 ls0 ws0">Exception<span class="_ _14"> </span>table.<span class="_ _14"> </span><span class="ff6">The</span></div><div class="t m5 x17 h34 y58b ff6 fs16 fc1 sc0 ls0 ws0">exception<span class="_ _15"> </span>table<span class="_ _15"> </span>is<span class="_ _21"> </span>a</div><div class="t m5 x17 h34 y58c ff6 fs16 fc1 sc0 ls0 ws0">jump<span class="_ _16"> </span>table<span class="_ _16"> </span>where<span class="_ _16"> </span>entry</div><div class="t m5 x17 h34 y58d ff11 fs16 fc1 sc0 ls0 ws0">k<span class="_ _15"> </span><span class="ff6">contains<span class="_ _16"> </span>the<span class="_ _14"> </span>address</span></div><div class="t m5 x17 h34 y58e ff6 fs16 fc1 sc0 ls0 ws0">of<span class="_ _16"> </span>the<span class="_ _16"> </span>handler<span class="_ _16"> </span>code<span class="_ _14"> </span>for</div><div class="t m5 x17 h34 y58f ff6 fs16 fc1 sc0 ls0 ws0">exception<span class="_ _10"> </span><span class="ff11">k<span class="_ _2"></span></span>.</div><div class="t m5 x12e h3f y63e9 ff91 fs27 fc1 sc0 ls0 ws0">Code for</div><div class="t m5 x19d h3f y63ea ff91 fs27 fc1 sc0 ls0 ws0">exception handler 0</div><div class="t m5 x12e h3f y63eb ff91 fs27 fc1 sc0 ls0 ws0">Code for</div><div class="t m5 x19d h3f y63ec ff91 fs27 fc1 sc0 ls0 ws0">exception handler 1</div><div class="t m5 x12e h3f y63ed ff91 fs27 fc1 sc0 ls0 ws0">Code for</div><div class="t m5 x19d h3f y63ee ff91 fs27 fc1 sc0 ls0 ws0">exception handler 2</div><div class="t m5 x12e h3f y63ef ff91 fs27 fc1 sc0 ls0 ws0">Code for</div><div class="t m5 xbf h3f y63f0 ff91 fs27 fc1 sc0 ls0 ws0">exception handler <span class="ff92">n</span> <span class="ff24"> </span>1</div><div class="t m8 x195 h3f y63f1 ff91 fs27 fc1 sc0 ls0 ws0">. . .</div><div class="t m8 xe1 h3f y63f2 ff91 fs27 fc1 sc0 ls0 ws0">. . .</div><div class="t m5 x47 h65 y63f3 ff91 fs38 fc1 sc0 ls0 ws0">0</div><div class="t m5 x47 h65 y63f4 ff91 fs38 fc1 sc0 ls0 ws0">1</div><div class="t m5 x47 h65 y63f5 ff91 fs38 fc1 sc0 ls0 ws0">2</div><div class="t m5 xb3 h65 y63f6 ff92 fs38 fc1 sc0 ls0 ws0">n<span class="ff91"> <span class="ff24"> </span>1</span></div><div class="t m5 x115 h3f y63f7 ff91 fs27 fc1 sc0 ls0 ws0">Exception</div><div class="t m5 xe5 h3f y63f8 ff91 fs27 fc1 sc0 ls0 ws0">table</div><div class="t m5 x17 h2f y63f9 ffe fs16 fc6 sc0 ls0 ws0">Figure<span class="_"> </span>8.3</div><div class="t m5 x17 h2f y63fa ffe fs16 fc1 sc0 ls0 ws0">Generating<span class="_ _11"> </span>the<span class="_ _16"> </span>address</div><div class="t m5 x17 h2f y63fb ffe fs16 fc1 sc0 ls0 ws0">of<span class="_"> </span>an<span class="_ _16"> </span>exception<span class="_"> </span>handler<span class="_ _1"></span>.</div><div class="t m5 x17 h34 y63fc ff6 fs16 fc1 sc0 ls0 ws0">The<span class="_ _11"> </span>exception<span class="_ _16"> </span>number<span class="_ _11"> </span>is</div><div class="t m5 x17 h34 y63fd ff6 fs16 fc1 sc0 ls0 ws0">an<span class="_ _13"> </span>index<span class="_ _13"> </span>into<span class="_ _10"> </span>the<span class="_ _13"> </span>exception</div><div class="t m5 x17 h34 y63fe ff6 fs16 fc1 sc0 ls0 ws0">table.</div><div class="t m8 x61 h3f y63ff ff93 fs27 fc1 sc0 ls0 ws0">. . .</div><div class="t m5 x158 h65 y6400 ff93 fs38 fc1 sc0 ls0 ws0">0</div><div class="t m5 x158 h65 y6401 ff93 fs38 fc1 sc0 ls0 ws0">1</div><div class="t m5 x158 h65 y6402 ff93 fs38 fc1 sc0 ls0 ws0">2</div><div class="t m5 x172 h65 y6403 ff94 fs38 fc1 sc0 ls0 ws0">n<span class="ff93"> –<span class="ff4c"> </span>1</span></div><div class="t m5 x159 h3f y6404 ff93 fs27 fc1 sc0 ls0 ws0">Exception table</div><div class="t m5 x7d h3f y6405 ff93 fs27 fc1 sc0 ls0 ws0">Address of entry</div><div class="t m5 x7d h3f y6406 ff93 fs27 fc1 sc0 ls0 ws0">for exception # <span class="ff94">k</span></div><div class="t m5 x151 h3f y6407 ff93 fs27 fc1 sc0 ls0 ws0">Exception number</div><div class="t m5 xd8 h3f y6408 ff93 fs27 fc1 sc0 ls0 ws0">(x 8)</div><div class="t m5 xe6 h3f y6409 ff93 fs27 fc1 sc0 ls0 ws0">Exception table</div><div class="t m5 x89 h3f y640a ff93 fs27 fc1 sc0 ls0 ws0">base register</div><div class="t m5 x5e h6f y640b ff93 fs3e fc1 sc0 ls0 ws0">+</div><div class="t m5 x17 h26 y640c ff7 fs19 fc1 sc0 ls0 ws0">which<span class="_ _13"> </span>component<span class="_ _13"> </span>performs<span class="_ _6"> </span>which<span class="_ _13"> </span>task.<span class="_ _13"> </span>Let’s<span class="_ _6"> </span>look<span class="_ _13"> </span>at<span class="_ _13"> </span>the<span class="_ _13"> </span>division<span class="_ _13"> </span>of<span class="_ _6"> </span>labor<span class="_ _13"> </span>between</div><div class="t m5 x17 h26 y640d ff7 fs19 fc1 sc0 ls0 ws0">hardware<span class="_"> </span>and<span class="_"> </span>software<span class="_"> </span>in<span class="_"> </span>more<span class="_"> </span>detail.</div><div class="t m5 x26 h26 y640e ff7 fs19 fc1 sc0 ls0 ws0">Each<span class="_"> </span>type<span class="_ _13"> </span>of<span class="_"> </span>possible<span class="_"> </span>exception<span class="_"> </span>in<span class="_ _13"> </span>a<span class="_"> </span>system<span class="_"> </span>is<span class="_ _13"> </span>assigned<span class="_"> </span>a<span class="_"> </span>unique<span class="_ _13"> </span>nonnegative</div><div class="t m5 x17 h26 y640f ff7 fs19 fc1 sc0 ls0 ws0">integer<span class="_ _11"> </span><span class="ffa">exception<span class="_ _11"> </span>number<span class="_ _2"></span></span>.<span class="_ _11"> </span>Some<span class="_ _16"> </span>of<span class="_"> </span>these<span class="_ _16"> </span>numbers<span class="_"> </span>are<span class="_ _16"> </span>assigned<span class="_"> </span>by<span class="_ _16"> </span>the<span class="_"> </span>designers</div><div class="t m5 x17 h26 y6410 ff7 fs19 fc1 sc0 ls0 ws0">of<span class="_ _16"> </span>the<span class="_ _16"> </span>processor<span class="_ _0"></span>.<span class="_ _16"> </span>Other<span class="_ _16"> </span>numbers<span class="_ _16"> </span>are<span class="_ _16"> </span>assigned<span class="_ _11"> </span>by<span class="_ _16"> </span>the<span class="_ _16"> </span>designers<span class="_ _16"> </span>of<span class="_ _16"> </span>the<span class="_ _16"> </span>operating</div><div class="t m5 x17 h26 y6411 ff7 fs19 fc1 sc0 ls0 ws0">system<span class="_ _11"> </span><span class="ffa">kernel<span class="_ _14"> </span></span>(the<span class="_ _16"> </span>memory-resident<span class="_ _11"> </span>part<span class="_ _16"> </span>of<span class="_ _11"> </span>the<span class="_ _16"> </span>operating<span class="_ _11"> </span>system).<span class="_ _16"> </span>Examples<span class="_ _11"> </span>of</div><div class="t m5 x17 h26 y6412 ff7 fs19 fc1 sc0 ls0 ws0">the<span class="_ _11"> </span>former<span class="_ _16"> </span>include<span class="_ _11"> </span>divide<span class="_ _16"> </span>by<span class="_ _11"> </span>zero<span class="_ _1"></span>,<span class="_ _16"> </span>page<span class="_ _16"> </span>faults<span class="_ _3"></span>,<span class="_ _16"> </span>memory<span class="_ _16"> </span>access<span class="_ _11"> </span>violations<span class="_ _1"></span>,<span class="_ _16"> </span>break-</div><div class="t m5 x17 h26 y6413 ff7 fs19 fc1 sc0 ls0 ws0">points<span class="_ _1"></span>,<span class="_ _11"> </span>and<span class="_ _11"> </span>arithmetic<span class="_ _11"> </span>overﬂows<span class="_ _1"></span>.<span class="_ _11"> </span>Examples<span class="_ _11"> </span>of<span class="_"> </span>the<span class="_ _11"> </span>latter<span class="_ _11"> </span>include<span class="_ _11"> </span>system<span class="_ _11"> </span>calls<span class="_ _11"> </span>and</div><div class="t m5 x17 h26 y6414 ff7 fs19 fc1 sc0 ls0 ws0">signals<span class="_"> </span>from<span class="_"> </span>external<span class="_"> </span>I/O<span class="_"> </span>devices<span class="_ _1"></span>.</div><div class="t m5 x26 h26 y6415 ff7 fs19 fc1 sc0 ls0 ws0">At<span class="_ _13"> </span>system<span class="_"> </span>boot<span class="_ _13"> </span>time<span class="_"> </span>(when<span class="_ _13"> </span>the<span class="_ _13"> </span>computer<span class="_"> </span>is<span class="_ _13"> </span>reset<span class="_ _13"> </span>or<span class="_"> </span>powered<span class="_ _13"> </span>on),<span class="_"> </span>the<span class="_ _13"> </span>operat-</div><div class="t m5 x17 h26 y6416 ff7 fs19 fc1 sc0 ls0 ws0">ing<span class="_"> </span>system<span class="_ _11"> </span>allocates<span class="_ _11"> </span>and<span class="_"> </span>initializes<span class="_ _11"> </span>a<span class="_ _11"> </span>jump<span class="_"> </span>table<span class="_ _11"> </span>called<span class="_ _11"> </span>an<span class="_"> </span><span class="ffa">exception<span class="_ _11"> </span>table</span>,<span class="_ _11"> </span>so<span class="_ _11"> </span>that</div><div class="t m5 x17 h26 y6417 ff7 fs19 fc1 sc0 ls0 ws0">entry<span class="_"> </span><span class="ff11">k<span class="_"> </span></span>contains<span class="_ _11"> </span>the<span class="_"> </span>address<span class="_ _11"> </span>of<span class="_ _11"> </span>the<span class="_ _11"> </span>handler<span class="_ _11"> </span>for<span class="_ _11"> </span>exception<span class="_ _11"> </span><span class="ff11">k<span class="_ _2"></span></span>.<span class="_ _11"> </span>F<span class="_ _1"></span>igure<span class="_ _11"> </span>8.2<span class="_ _11"> </span>shows<span class="_ _11"> </span>the</div><div class="t m5 x17 h26 y6418 ff7 fs19 fc1 sc0 ls0 ws0">format<span class="_"> </span>of<span class="_"> </span>an<span class="_"> </span>exception<span class="_"> </span>table<span class="_ _1"></span>.</div><div class="t m5 x26 h26 y6419 ff7 fs19 fc1 sc0 ls0 ws0">At<span class="_ _15"> </span>run<span class="_ _21"> </span>time<span class="_ _15"> </span>(when<span class="_ _15"> </span>the<span class="_ _21"> </span>system<span class="_ _15"> </span>is<span class="_ _21"> </span>executing<span class="_ _15"> </span>some<span class="_ _21"> </span>program),<span class="_ _f"> </span>the<span class="_ _15"> </span>processor</div><div class="t m5 x17 h26 y641a ff7 fs19 fc1 sc0 ls0 ws0">detects<span class="_ _16"> </span>that<span class="_ _11"> </span>an<span class="_ _16"> </span>event<span class="_ _16"> </span>has<span class="_ _11"> </span>occurred<span class="_ _16"> </span>and<span class="_ _11"> </span>determines<span class="_ _16"> </span>the<span class="_ _16"> </span>corresponding<span class="_ _11"> </span>exception</div><div class="t m5 x17 h26 y641b ff7 fs19 fc1 sc0 ls0 ws0">number<span class="_ _11"> </span><span class="ff11">k<span class="_ _2"></span></span>.<span class="_ _16"> </span>T<span class="_ _1"></span>he<span class="_ _11"> </span>processor<span class="_ _16"> </span>then<span class="_ _11"> </span>triggers<span class="_ _11"> </span>the<span class="_ _16"> </span>exception<span class="_ _11"> </span>by<span class="_ _11"> </span>making<span class="_ _16"> </span>an<span class="_ _11"> </span>indirect<span class="_ _11"> </span>pro-</div><div class="t m5 x17 h26 y641c ff7 fs19 fc1 sc0 ls0 ws0">cedure<span class="_"> </span>call,<span class="_"> </span>through<span class="_"> </span>entry<span class="_"> </span><span class="ff11">k<span class="_ _10"> </span></span>of<span class="_"> </span>the<span class="_"> </span>exception<span class="_"> </span>table<span class="_ _1"></span>,<span class="_"> </span>to<span class="_"> </span>the<span class="_"> </span>corresponding<span class="_"> </span>handler.</div><div class="t m5 x17 h26 y641d ff7 fs19 fc1 sc0 ls0 ws0">F<span class="_ _1"></span>igure<span class="_ _13"> </span>8.3<span class="_ _13"> </span>shows<span class="_ _6"> </span>how<span class="_ _13"> </span>the<span class="_ _13"> </span>processor<span class="_ _6"> </span>uses<span class="_ _13"> </span>the<span class="_ _13"> </span>exception<span class="_ _6"> </span>table<span class="_ _13"> </span>to<span class="_ _13"> </span>form<span class="_ _13"> </span>the<span class="_ _6"> </span>address<span class="_ _13"> </span>of</div><div class="t m5 x17 h26 y641e ff7 fs19 fc1 sc0 ls0 ws0">the<span class="_ _13"> </span>appropriate<span class="_"> </span>exception<span class="_ _13"> </span>handler.<span class="_ _13"> </span>The<span class="_ _13"> </span>exception<span class="_ _13"> </span>number<span class="_"> </span>is<span class="_ _13"> </span>an<span class="_"> </span>index<span class="_ _13"> </span>into<span class="_ _13"> </span>the<span class="_"> </span>ex-</div><div class="t m5 x17 h26 y641f ff7 fs19 fc1 sc0 ls0 ws0">ception<span class="_ _13"> </span>table,<span class="_ _13"> </span>whose<span class="_"> </span>starting<span class="_ _13"> </span>address<span class="_"> </span>is<span class="_ _13"> </span>contained<span class="_"> </span>in<span class="_ _13"> </span>a<span class="_"> </span>special<span class="_ _13"> </span>CPU<span class="_"> </span>register<span class="_ _13"> </span>called</div><div class="t m5 x17 h26 y6420 ff7 fs19 fc1 sc0 ls0 ws0">the<span class="_"> </span><span class="ffa">exception<span class="_"> </span>table<span class="_"> </span>base<span class="_"> </span>register<span class="_ _2"></span></span>.</div><div class="t m5 x26 h26 y6421 ff7 fs19 fc1 sc0 ls0 ws0">An<span class="_ _13"> </span>exception<span class="_ _13"> </span>is<span class="_ _6"> </span>akin<span class="_ _13"> </span>to<span class="_ _13"> </span>a<span class="_ _13"> </span>procedure<span class="_ _6"> </span>call,<span class="_ _13"> </span>but<span class="_ _13"> </span>with<span class="_ _13"> </span>some<span class="_ _13"> </span>important<span class="_ _6"> </span>differences:</div><div class="t m5 x72 h3d y5769 ff14 fs26 fc6 sc0 ls0 ws0">.</div><div class="t m5 x26 h26 y8d6 ff7 fs19 fc1 sc0 ls0 ws0">As<span class="_"> </span>with<span class="_ _11"> </span>a<span class="_"> </span>procedure<span class="_ _11"> </span>call,<span class="_ _11"> </span>the<span class="_"> </span>processor<span class="_ _11"> </span>pushes<span class="_ _11"> </span>a<span class="_"> </span>return<span class="_ _11"> </span>address<span class="_"> </span>on<span class="_ _11"> </span>the<span class="_ _11"> </span>stack</div><div class="t m5 x26 h26 y8d7 ff7 fs19 fc1 sc0 ls0 ws0">before<span class="_"> </span>branching<span class="_ _11"> </span>to<span class="_ _11"> </span>the<span class="_ _11"> </span>handler.<span class="_"> </span>However,<span class="_"> </span>depending<span class="_ _11"> </span>on<span class="_"> </span>the<span class="_ _11"> </span>class<span class="_ _11"> </span>of<span class="_ _11"> </span>excep-</div><div class="t m5 x26 h26 y8d8 ff7 fs19 fc1 sc0 ls0 ws0">tion,<span class="_ _11"> </span>the<span class="_ _11"> </span>return<span class="_ _11"> </span>address<span class="_"> </span>is<span class="_ _11"> </span>either<span class="_ _11"> </span>the<span class="_ _11"> </span>current<span class="_ _11"> </span>instruction<span class="_ _11"> </span>(the<span class="_ _11"> </span>instruction<span class="_ _11"> </span>that</div></div><div class="pi" data-data='{"ctm":[2.000000,0.000000,0.000000,2.000000,0.000000,0.000000]}'></div></div>
