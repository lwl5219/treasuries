<div id="pf33c" class="pf w2 h11" data-page-no="33c"><div class="pc pc33c w2 h11"><img class="bi x0 y0 w1 h1" alt="" src="csapp/bg33c.png"/><div class="t m5 x5f h28 y9b ff6 fs1f fc2 sc0 ls0 ws0">Homework<span class="_ _10"> </span>Problems<span class="_ _1b"> </span><span class="ffe fs1e">827</span></div><div class="t m5 x2c h2d ye7 ff6 fs20 fc6 sc0 ls0 ws0">4<span class="_ _1c"> </span><span class="ffd fs1e fc2">int<span class="_ _1f"> </span>main()</span></div><div class="t m5 x2c h2d yc4d ff6 fs20 fc6 sc0 ls0 ws0">5<span class="_ _1c"> </span><span class="ffd fs1e fc2">{</span></div><div class="t m5 x2c h2d yecb ff6 fs20 fc6 sc0 ls0 ws0">6<span class="_ _20"> </span><span class="ffd fs1e fc2">if<span class="_ _e"> </span>(fork()<span class="_ _1f"> </span>==<span class="_ _1f"> </span>0)<span class="_ _e"> </span>{</span></div><div class="t m5 x2c h2d yecc ff6 fs20 fc6 sc0 ls0 ws0">7<span class="_ _70"> </span><span class="ffd fs1e fc2">counter++;</span></div><div class="t m5 x2c h2d yecd ff6 fs20 fc6 sc0 ls0 ws0">8<span class="_ _70"> </span><span class="ffd fs1e fc2">exit(0);</span></div><div class="t m5 x2c h2d yece ff6 fs20 fc6 sc0 ls0 ws0">9<span class="_ _20"> </span><span class="ffd fs1e fc2">}</span></div><div class="t m5 x17 h2d yecf ff6 fs20 fc6 sc0 ls0 ws0">10<span class="_ _20"> </span><span class="ffd fs1e fc2">else<span class="_ _e"> </span>{</span></div><div class="t m5 x17 h2d yed0 ff6 fs20 fc6 sc0 ls0 ws0">11<span class="_ _70"> </span><span class="ffd fs1e fc2">Wait(NULL);</span></div><div class="t m5 x17 h2e y20fe ff6 fs20 fc6 sc0 ls0 ws0">12</div><div class="t m5 xc5 h2d y1a10 ffd fs1e fc2 sc0 ls0 ws0">counter++;<span class="_ _e"> </span>printf(&quot;counter<span class="_ _1f"> </span>=<span class="_ _1f"> </span>%d\n&quot;,<span class="_ _e"> </span>counter);</div><div class="t m5 x17 h2d yed3 ff6 fs20 fc6 sc0 ls0 ws0">13<span class="_ _20"> </span><span class="ffd fs1e fc2">}</span></div><div class="t m5 x17 h2d yed4 ff6 fs20 fc6 sc0 ls0 ws0">14<span class="_ _20"> </span><span class="ffd fs1e fc2">exit(0);</span></div><div class="t m5 x17 h2d y462 ff6 fs20 fc6 sc0 ls0 ws0">15<span class="_ _1c"> </span><span class="ffd fs1e fc2">}</span></div><div class="t m5 xf4 h2c y6ad7 ffa fs16 fc2 sc0 ls0 ws0">code/ecf/global-forkprob7.c</div><div class="t m5 x17 h73 y6ad8 ffe fs1e fc6 sc0 ls0 ws0">8.17<span class="_ _23"> </span><span class="ff10 fs19">◆</span></div><div class="t m5 x17 h26 y6ad9 ff7 fs19 fc1 sc0 ls0 ws0">Enumerate<span class="_"> </span>all<span class="_"> </span>of<span class="_"> </span>the<span class="_"> </span>possible<span class="_"> </span>outputs<span class="_"> </span>of<span class="_"> </span>the<span class="_"> </span>program<span class="_"> </span>in<span class="_"> </span>Practice<span class="_"> </span>Problem<span class="_"> </span>8.4.</div><div class="t m5 x17 h73 y6ada ffe fs1e fc6 sc0 ls0 ws0">8.18<span class="_ _23"> </span><span class="ff10 fs19">◆◆</span></div><div class="t m5 x17 h26 y6adb ff7 fs19 fc1 sc0 ls0 ws0">Consider<span class="_"> </span>the<span class="_"> </span>following<span class="_"> </span>program:</div><div class="t m5 x1aa h2c y6adc ffa fs16 fc1 sc0 ls0 ws0">code/ecf/forkprob2.c</div><div class="t m5 x2c h2d y6add ff6 fs20 fc6 sc0 ls0 ws0">1<span class="_ _1c"> </span><span class="ffd fs1e fc2">#include<span class="_ _1f"> </span>&quot;csapp.h&quot;</span></div><div class="t m5 x2c h2e y6ade ff6 fs20 fc6 sc0 ls0 ws0">2</div><div class="t m5 x2c h2e y6adf ff6 fs20 fc6 sc0 ls0 ws0">3</div><div class="t m5 x2d h2d y6ae0 ffd fs1e fc2 sc0 ls0 ws0">void<span class="_ _e"> </span>end(void)</div><div class="t m5 x2c h2d y6ae1 ff6 fs20 fc6 sc0 ls0 ws0">4<span class="_ _1c"> </span><span class="ffd fs1e fc2">{</span></div><div class="t m5 x2c h2d y6ae2 ff6 fs20 fc6 sc0 ls0 ws0">5<span class="_ _20"> </span><span class="ffd fs1e fc2">printf(&quot;2&quot;);<span class="_ _e"> </span>fflush(stdout);</span></div><div class="t m5 x2c h2d y6ae3 ff6 fs20 fc6 sc0 ls0 ws0">6<span class="_ _1c"> </span><span class="ffd fs1e fc2">}</span></div><div class="t m5 x2c h2e y6ae4 ff6 fs20 fc6 sc0 ls0 ws0">7</div><div class="t m5 x2c h2e y6ae5 ff6 fs20 fc6 sc0 ls0 ws0">8</div><div class="t m5 x2d h2d y6ae6 ffd fs1e fc2 sc0 ls0 ws0">int<span class="_ _e"> </span>main()</div><div class="t m5 x2c h2e y6ae7 ff6 fs20 fc6 sc0 ls0 ws0">9</div><div class="t m5 x2d h2d y6ae8 ffd fs1e fc2 sc0 ls0 ws0">{</div><div class="t m5 x17 h2d y6ae9 ff6 fs20 fc6 sc0 ls0 ws0">10<span class="_ _20"> </span><span class="ffd fs1e fc2">if<span class="_ _e"> </span>(Fork()<span class="_ _1f"> </span>==<span class="_ _1f"> </span>0)</span></div><div class="t m5 x17 h2d y6aea ff6 fs20 fc6 sc0 ls0 ws0">11<span class="_ _70"> </span><span class="ffd fs1e fc2">atexit(end);</span></div><div class="t m5 x17 h2d y6aeb ff6 fs20 fc6 sc0 ls0 ws0">12<span class="_ _20"> </span><span class="ffd fs1e fc2">if<span class="_ _e"> </span>(Fork()<span class="_ _1f"> </span>==<span class="_ _1f"> </span>0)<span class="_ _e"> </span>{</span></div><div class="t m5 x17 h2d y6aec ff6 fs20 fc6 sc0 ls0 ws0">13<span class="_ _70"> </span><span class="ffd fs1e fc2">printf(&quot;0&quot;);<span class="_ _e"> </span>fflush(stdout);</span></div><div class="t m5 x17 h2d y6aed ff6 fs20 fc6 sc0 ls0 ws0">14<span class="_ _20"> </span><span class="ffd fs1e fc2">}</span></div><div class="t m5 x17 h2d y6aee ff6 fs20 fc6 sc0 ls0 ws0">15<span class="_ _20"> </span><span class="ffd fs1e fc2">else<span class="_ _e"> </span>{</span></div><div class="t m5 x17 h2e y6aef ff6 fs20 fc6 sc0 ls0 ws0">16</div><div class="t m5 xc5 h2d y6af0 ffd fs1e fc2 sc0 ls0 ws0">printf(&quot;1&quot;);<span class="_ _e"> </span>fflush(stdout);</div><div class="t m5 x17 h2d y6af1 ff6 fs20 fc6 sc0 ls0 ws0">17<span class="_ _20"> </span><span class="ffd fs1e fc2">}</span></div><div class="t m5 x17 h2d y6af2 ff6 fs20 fc6 sc0 ls0 ws0">18<span class="_ _20"> </span><span class="ffd fs1e fc2">exit(0);</span></div><div class="t m5 x17 h2e y6af3 ff6 fs20 fc6 sc0 ls0 ws0">19</div><div class="t m5 x2d h2d y6af4 ffd fs1e fc2 sc0 ls0 ws0">}</div><div class="t m5 x1aa h2c y6af5 ffa fs16 fc2 sc0 ls0 ws0">code/ecf/forkprob2.c</div><div class="t m5 x26 h26 y7a3 ff7 fs19 fc2 sc0 ls0 ws0">Determine<span class="_ _15"> </span>which<span class="_ _15"> </span>of<span class="_ _21"> </span>the<span class="_ _15"> </span>following<span class="_ _21"> </span>outputs<span class="_ _15"> </span>are<span class="_ _21"> </span>possible<span class="_ _0"></span>.<span class="_ _15"> </span><span class="ffa">Note:<span class="_ _15"> </span></span><span class="lsd">Th<span class="_ _5"></span>e<span class="_ _f"> </span></span><span class="ffd">atexit</span></div><div class="t m5 x17 h26 y1a7d ff7 fs19 fc2 sc0 ls0 ws0">function<span class="_ _16"> </span>takes<span class="_ _16"> </span>a<span class="_ _16"> </span>pointer<span class="_ _16"> </span>to<span class="_ _16"> </span>a<span class="_ _16"> </span>function<span class="_ _14"> </span>and<span class="_ _16"> </span>adds<span class="_ _16"> </span>it<span class="_ _16"> </span>to<span class="_ _16"> </span>a<span class="_ _16"> </span>list<span class="_ _16"> </span>of<span class="_ _14"> </span>functions<span class="_ _16"> </span>(initially</div><div class="t m5 x17 h26 y1a7e ff7 fs19 fc2 sc0 ls0 ws0">empty)<span class="_"> </span>that<span class="_"> </span>will<span class="_"> </span>be<span class="_"> </span>called<span class="_"> </span>when<span class="_"> </span>the<span class="_"> </span><span class="ffd">exit<span class="_ _10"> </span></span>function<span class="_"> </span>is<span class="_"> </span>called.</div><div class="t m5 x34 h26 y1a7f ff7 fs19 fc2 sc0 ls0 ws0">A.<span class="_ _1f"> </span>112002</div><div class="t m5 x34 h26 y1a80 ff7 fs19 fc2 sc0 ls0 ws0">B<span class="_ _3"></span>.<span class="_ _1d"> </span>211020</div></div><div class="pi" data-data='{"ctm":[2.000000,0.000000,0.000000,2.000000,0.000000,0.000000]}'></div></div>
