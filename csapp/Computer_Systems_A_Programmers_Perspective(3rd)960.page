<div id="pf3c0" class="pf w2 h11" data-page-no="3c0"><div class="pc pc3c0 w2 h11"><img class="bi x0 y0 w1 h1" alt="" src="csapp/bg3c0.png"/><div class="t m5 x225 h28 y9b ff6 fs1f fc2 sc0 ls0 ws0">Section<span class="_ _10"> </span>11.2<span class="_ _60"> </span>Networks<span class="_ _3e"> </span><span class="ffe fs1e">959</span></div><div class="t m5 x127 h118 y7a50 ff17 fsa5 fc1 sc0 ls0 ws0">Ho<span class="ff38">s</span>t A</div><div class="t m5 x134 h118 y7a51 ffd7 fsa5 fc1 sc0 ls0 ws0">Client</div><div class="t m5 x4f h118 y7a52 ffd7 fsa5 fc1 sc0 ls0 ws0">Protocol</div><div class="t m5 x4f h118 y7a53 ffd9 fsa5 fc1 sc0 ls0 ws0">s<span class="ffd7">oftware</span></div><div class="t m5 x116 h118 y7a54 ffd7 fsa5 fc1 sc0 ls0 ws0">Protocol</div><div class="t m5 x117 h118 y7a55 ffd9 fsa5 fc1 sc0 ls0 ws0">s<span class="ffd7">oftware</span></div><div class="t m5 x286 h118 y7a56 ffd7 fsa5 fc1 sc0 ls0 ws0">LAN1</div><div class="t m5 x162 h118 y7a57 ffd7 fsa5 fc1 sc0 ls0 ws0">adapter</div><div class="t m5 x120 h118 y7a58 ff17 fsa5 fc1 sc0 ls0 ws0">Ho<span class="ff38">s</span>t B</div><div class="t m5 x120 h118 y7a59 ffd7 fsa5 fc1 sc0 ls0 ws0">Server</div><div class="t m5 x250 h118 y7a5a ffd7 fsa5 fc1 sc0 ls0 ws0">Protocol</div><div class="t m5 x250 h118 y7a5b ffd9 fsa5 fc1 sc0 ls0 ws0">s<span class="ffd7">oftware</span></div><div class="t m5 x26 h118 y7a5c ffd7 fsa5 fc1 sc0 ls0 ws0">Data</div><div class="t m5 x62 h118 y7a5d ffc8 fsa5 fc1 sc0 ls0 ws0">Internet p<span class="ffda">a</span><span class="ls2db">cke<span class="_ _2"></span>t</span></div><div class="t m5 x2d h118 y7a5e ffc8 fsa5 fc1 sc0 ls0 ws0">LAN1 fr<span class="ffda">a</span>me</div><div class="t m5 x2e h118 y7a5f ff17 fsa5 fc1 sc0 ls0 ws0">LAN1<span class="_ _22d"> </span>LAN2</div><div class="t m5 x17 h118 y7a5c ffd7 fsa5 fc1 sc0 ls0 ws0">(1)</div><div class="t m5 x26 h118 y7a60 ffd7 fsa5 fc1 sc0 ls0 ws0">Data<span class="_ _3b"> </span>PH<span class="_ _22"> </span>FH1<span class="_ _1a6"></span>(2)</div><div class="t m5 x12d h118 y7a61 ffc8 fsa5 fc1 sc0 ls0 ws0">LAN2 fr<span class="ffda">a</span>me</div><div class="t m5 x19b h118 y7a62 ffd7 fsa5 fc1 sc0 ls0 ws0">Data<span class="_ _3b"> </span>PH<span class="_ _22"> </span>FH2<span class="_ _25"> </span>(5)</div><div class="t m5 x26 h118 y7a63 ffd7 fsa5 fc1 sc0 ls0 ws0">Data<span class="_ _3b"> </span>PH<span class="_ _22"> </span>FH1<span class="_ _1a6"></span>(3)<span class="_ _22e"> </span>Data<span class="_ _3b"> </span>PH<span class="_ _22"> </span>FH2<span class="_ _1a6"></span>(6)</div><div class="t m5 x107 h118 y7a64 ffd7 fsa5 fc1 sc0 ls0 ws0">Data<span class="_ _3b"> </span>PH<span class="_ _22"> </span>FH2<span class="_ _1a6"></span>(7)</div><div class="t m5 x107 h118 y7a65 ffd7 fsa5 fc1 sc0 ls0 ws0">Data<span class="_ _22f"></span>(8)</div><div class="t m5 x286 h118 y7a66 ffd7 fsa5 fc1 sc0 ls0 ws0">Data<span class="_ _3b"> </span>PH<span class="_ _22"> </span>FH1<span class="_ _1a6"></span>(4)</div><div class="t m5 xb2 h118 y7a67 ffd7 fsa5 fc1 sc0 ls0 ws0">LAN1</div><div class="t m5 xd h118 y7a68 ffd7 fsa5 fc1 sc0 ls0 ws0">adapter</div><div class="t m5 x68 h118 y7a67 ffd7 fsa5 fc1 sc0 ls0 ws0">LAN2</div><div class="t m5 x9e h118 y7a68 ffd7 fsa5 fc1 sc0 ls0 ws0">adapter</div><div class="t m5 x110 h118 y7a69 ff17 fsa5 fc1 sc0 ls0 ws0">Router</div><div class="t m5 x1e2 h118 y7a56 ffd7 fsa5 fc1 sc0 ls0 ws0">LAN2</div><div class="t m5 xa1 h118 y7a57 ffd7 fsa5 fc1 sc0 ls0 ws0">adapter</div><div class="t m5 x17 h34 y7a6a ffe fs16 fc6 sc0 ls0 ws0">Figure<span class="_"> </span>11.7<span class="_ _66"> </span><span class="fc1">How<span class="_"> </span>data<span class="_"> </span>travel<span class="_"> </span>from<span class="_"> </span>one<span class="_"> </span>host<span class="_"> </span>to<span class="_"> </span>another<span class="_"> </span>on<span class="_"> </span>an<span class="_"> </span>internet.<span class="_"> </span><span class="ff6">PH:<span class="_ _10"> </span>internet</span></span></div><div class="t m5 x17 h34 y7a6b ff6 fs16 fc1 sc0 ls0 ws0">packet<span class="_ _10"> </span>header;<span class="_ _11"> </span>FH1:<span class="_ _10"> </span>frame<span class="_ _10"> </span>header<span class="_ _11"> </span>for<span class="_ _10"> </span>LAN1;<span class="_ _11"> </span>FH2:<span class="_ _10"> </span>frame<span class="_ _11"> </span>header<span class="_ _10"> </span>for<span class="_ _10"> </span>LAN2.</div><div class="t m5 x1cd h26 y7a6c ffc fs19 fc1 sc0 ls0 ws0">3.<span class="_ _e"> </span><span class="ff7">The<span class="_"> </span>LAN1<span class="_"> </span>adapter<span class="_"> </span>copies<span class="_"> </span>the<span class="_"> </span>frame<span class="_"> </span>to<span class="_"> </span>the<span class="_"> </span>network.</span></div><div class="t m5 x1cd h26 y7a6d ffc fs19 fc1 sc0 ls0 ws0">4.<span class="_ _e"> </span><span class="ff7">When<span class="_"> </span>the<span class="_"> </span>frame<span class="_"> </span>reaches<span class="_"> </span>the<span class="_ _13"> </span>router,<span class="_"> </span>the<span class="_"> </span>router’<span class="_ _1"></span>s<span class="_"> </span>LAN1<span class="_"> </span>adapter<span class="_"> </span>reads<span class="_"> </span>it<span class="_"> </span>from</span></div><div class="t m5 x26 h26 y7a6e ff7 fs19 fc1 sc0 ls0 ws0">the<span class="_"> </span>wire<span class="_"> </span>and<span class="_"> </span>passes<span class="_"> </span>it<span class="_"> </span>to<span class="_"> </span>the<span class="_"> </span>protocol<span class="_"> </span>software<span class="_ _1"></span>.</div><div class="t m5 x1cd h26 y7a6f ffc fs19 fc1 sc0 ls0 ws0">5.<span class="_ _e"> </span><span class="ff7">The<span class="_"> </span>router<span class="_ _11"> </span>fetches<span class="_ _11"> </span>the<span class="_ _11"> </span>destination<span class="_ _11"> </span>internet<span class="_ _11"> </span>address<span class="_ _11"> </span>from<span class="_ _11"> </span>the<span class="_ _11"> </span>internet<span class="_ _11"> </span>packet</span></div><div class="t m5 x26 h26 y7a70 ff7 fs19 fc1 sc0 ls0 ws0">header<span class="_ _11"> </span>and<span class="_ _16"> </span>uses<span class="_ _16"> </span>this<span class="_ _11"> </span>as<span class="_ _16"> </span>an<span class="_ _16"> </span>index<span class="_ _11"> </span>into<span class="_ _16"> </span>a<span class="_ _16"> </span>routing<span class="_ _11"> </span>table<span class="_ _16"> </span>to<span class="_ _16"> </span>determine<span class="_ _11"> </span>where<span class="_ _16"> </span>to</div><div class="t m5 x26 h26 y7a71 ff7 fs19 fc1 sc0 ls0 ws0">forward<span class="_"> </span>the<span class="_ _13"> </span>packet,<span class="_"> </span>which<span class="_"> </span>in<span class="_ _13"> </span>this<span class="_"> </span>case<span class="_"> </span>is<span class="_ _13"> </span>LAN2.<span class="_"> </span>T<span class="_ _1"></span>he<span class="_"> </span>router<span class="_ _13"> </span>then<span class="_"> </span>strips<span class="_"> </span>off<span class="_ _13"> </span>the</div><div class="t m5 x26 h26 y7a72 ff7 fs19 fc1 sc0 ls0 ws0">old<span class="_ _11"> </span>LAN1<span class="_ _16"> </span>frame<span class="_ _11"> </span>header,<span class="_ _11"> </span>prepends<span class="_ _11"> </span>a<span class="_ _16"> </span>new<span class="_ _11"> </span>LAN2<span class="_ _11"> </span>frame<span class="_ _16"> </span>header<span class="_ _11"> </span>addressed<span class="_ _16"> </span>to</div><div class="t m5 x26 h26 y7a73 ff7 fs19 fc1 sc0 ls0 ws0">host<span class="_"> </span>B<span class="_ _3"></span>,<span class="_"> </span>and<span class="_"> </span>passes<span class="_"> </span>the<span class="_"> </span>resulting<span class="_"> </span>frame<span class="_"> </span>to<span class="_"> </span>the<span class="_"> </span>adapter.</div><div class="t m5 x1cd h26 y7a74 ffc fs19 fc1 sc0 ls0 ws0">6.<span class="_ _e"> </span><span class="ff7">The<span class="_"> </span>router’<span class="_ _1"></span>s<span class="_"> </span>LAN2<span class="_"> </span>adapter<span class="_"> </span>copies<span class="_"> </span>the<span class="_"> </span>frame<span class="_"> </span>to<span class="_"> </span>the<span class="_"> </span>network.</span></div><div class="t m5 x1cd h26 y7a75 ffc fs19 fc1 sc0 ls0 ws0">7.<span class="_ _e"> </span><span class="ff7">When<span class="_ _13"> </span>the<span class="_ _13"> </span>frame<span class="_ _13"> </span>reaches<span class="_ _13"> </span>host<span class="_ _13"> </span>B<span class="_ _1"></span>,<span class="_ _13"> </span>its<span class="_ _13"> </span>adapter<span class="_ _13"> </span>reads<span class="_ _13"> </span>the<span class="_ _13"> </span>frame<span class="_ _13"> </span>from<span class="_"> </span>the<span class="_ _13"> </span>wire<span class="_ _13"> </span>and</span></div><div class="t m5 x26 h26 y7a76 ff7 fs19 fc1 sc0 ls0 ws0">passes<span class="_"> </span>it<span class="_"> </span>to<span class="_"> </span>the<span class="_"> </span>protocol<span class="_"> </span>software<span class="_ _1"></span>.</div><div class="t m5 x1cd h26 y7a77 ffc fs19 fc1 sc0 ls0 ws0">8.<span class="_ _e"> </span><span class="ff7">Finally<span class="_ _7"></span>,<span class="_ _13"> </span>the<span class="_ _13"> </span>protocol<span class="_ _13"> </span>software<span class="_ _6"> </span>on<span class="_ _13"> </span>host<span class="_ _13"> </span>B<span class="_ _13"> </span>strips<span class="_ _6"> </span>off<span class="_ _13"> </span>the<span class="_ _13"> </span>packet<span class="_ _6"> </span>header<span class="_ _13"> </span>and<span class="_ _13"> </span>frame</span></div><div class="t m5 x26 h26 y7a78 ff7 fs19 fc1 sc0 ls0 ws0">header.<span class="_ _13"> </span>T<span class="_ _1"></span>he<span class="_"> </span>protocol<span class="_ _13"> </span>software<span class="_"> </span>will<span class="_ _13"> </span>eventually<span class="_ _13"> </span>copy<span class="_"> </span>the<span class="_ _13"> </span>resulting<span class="_ _13"> </span>data<span class="_"> </span>into<span class="_ _13"> </span>the</div><div class="t m5 x26 h26 y7a79 ff7 fs19 fc1 sc0 ls0 ws0">server’s<span class="_ _13"> </span>virtual<span class="_ _13"> </span>address<span class="_ _13"> </span>space<span class="_ _13"> </span>when<span class="_ _13"> </span>the<span class="_ _13"> </span>server<span class="_ _13"> </span>invokes<span class="_ _13"> </span>a<span class="_"> </span>system<span class="_ _13"> </span>call<span class="_ _13"> </span>that<span class="_ _13"> </span>reads</div><div class="t m5 x26 h26 y7a7a ff7 fs19 fc1 sc0 ls0 ws0">the<span class="_"> </span>data.</div><div class="t m5 x26 h26 y7a7b ff7 fs19 fc1 sc0 ls0 ws0">Of<span class="_ _16"> </span>course<span class="_ _1"></span>,<span class="_ _16"> </span>we<span class="_ _16"> </span>are<span class="_ _11"> </span>glossing<span class="_ _16"> </span>over<span class="_ _16"> </span>many<span class="_ _11"> </span>difﬁcult<span class="_ _16"> </span>issues<span class="_ _16"> </span>here<span class="_ _1"></span>.<span class="_ _16"> </span>What<span class="_ _11"> </span>if<span class="_ _16"> </span>different</div><div class="t m5 x17 h26 y7a7c ff7 fs19 fc1 sc0 ls0 ws0">networks<span class="_ _11"> </span>have<span class="_ _16"> </span>different<span class="_ _16"> </span>maximum<span class="_ _11"> </span>frame<span class="_ _16"> </span>sizes?<span class="_ _16"> </span>How<span class="_ _11"> </span>do<span class="_ _16"> </span>routers<span class="_ _11"> </span>know<span class="_ _16"> </span>where<span class="_ _16"> </span>to</div><div class="t m5 x17 h26 y7a7d ff7 fs19 fc1 sc0 ls0 ws0">forward<span class="_ _13"> </span>frames?<span class="_"> </span>How<span class="_ _13"> </span>are<span class="_ _13"> </span>routers<span class="_"> </span>informed<span class="_ _13"> </span>when<span class="_"> </span>the<span class="_ _13"> </span>network<span class="_ _13"> </span>topology<span class="_"> </span>changes?</div><div class="t m5 x17 h26 y7a7e ff7 fs19 fc1 sc0 ls0 ws0">What<span class="_"> </span>if<span class="_"> </span>a<span class="_"> </span>packet<span class="_"> </span>gets<span class="_"> </span>lost?<span class="_"> </span>Nonetheless<span class="_ _0"></span>,<span class="_"> </span>our<span class="_"> </span>example<span class="_"> </span>captures<span class="_ _11"> </span>the<span class="_"> </span>essence<span class="_"> </span>of<span class="_"> </span>the</div><div class="t m5 x17 h26 y7a7f ff7 fs19 fc1 sc0 ls0 ws0">internet<span class="_"> </span>idea,<span class="_"> </span>and<span class="_"> </span>encapsulation<span class="_"> </span>is<span class="_"> </span>the<span class="_"> </span>key<span class="_ _3"></span>.</div></div><div class="pi" data-data='{"ctm":[2.000000,0.000000,0.000000,2.000000,0.000000,0.000000]}'></div></div>
