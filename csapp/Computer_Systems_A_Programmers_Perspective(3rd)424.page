<div id="pf1a8" class="pf w2 h11" data-page-no="1a8"><div class="pc pc1a8 w2 h11"><img class="bi x0 y0 w1 h1" alt="" src="csapp/bg1a8.png"/><div class="t m5 x99 h28 y9b ff6 fs1f fc2 sc0 ls0 ws0">Section<span class="_ _10"> </span>4.3<span class="_ _60"> </span>Sequential<span class="_ _10"> </span>Y86-64<span class="_ _10"> </span>Implementations<span class="_ _3e"> </span><span class="ffe fs1e">423</span></div><div class="t m5 x17 h31 y390 ff7 fs21 fc2 sc0 ls0 ws0">Stage<span class="_ _55"> </span><span class="ffd fs1e">OPq<span class="_ _11"> </span></span><span class="ff6">rA<span class="ffd fs1e">,<span class="_ _11"> </span></span>rB<span class="_ _91"> </span><span class="ffd fs1e">rrmovq<span class="_ _11"> </span></span>rA<span class="ffd fs1e">,<span class="_ _11"> </span></span>rB<span class="_ _169"> </span><span class="ffd fs1e">irmovq<span class="_ _11"> </span></span>V<span class="ffd fs1e">,<span class="_ _11"> </span></span>rB</span></div><div class="t m5 x17 h32 yc94 ff7 fs21 fc2 sc0 ls0 ws0">F<span class="_ _1"></span>etch<span class="_ _55"> </span><span class="ff6">icode<span class="_ _a"> </span></span>:<span class="_ _be"></span><span class="ff6">ifun<span class="_ _23"> </span><span class="ff12">←<span class="_ _25"> </span></span>M</span></div><div class="t m5 x183 h33 yc95 ff7 fs20 fc2 sc0 ls0 ws0">1</div><div class="t m5 x10e h32 yc94 ff7 fs21 fc2 sc0 ls0 ws0">[<span class="ff6">PC</span>]<span class="_ _74"> </span><span class="ff6">icode<span class="_ _a"> </span></span>:<span class="_ _be"></span><span class="ff6">ifun<span class="_ _23"> </span><span class="ff12">←<span class="_ _25"> </span></span>M</span></div><div class="t m5 x1ad h33 yc95 ff7 fs20 fc2 sc0 ls0 ws0">1</div><div class="t m5 xb0 h32 yc94 ff7 fs21 fc2 sc0 ls0 ws0">[<span class="ff6">PC</span>]<span class="_ _74"> </span><span class="ff6">icode<span class="_ _a"> </span></span>:<span class="_ _be"></span><span class="ff6">ifun<span class="_ _23"> </span><span class="ff12">←<span class="_ _25"> </span></span>M</span></div><div class="t m5 x216 h33 yc95 ff7 fs20 fc2 sc0 ls0 ws0">1</div><div class="t m5 x1e h31 yc94 ff7 fs21 fc2 sc0 ls0 ws0">[<span class="ff6">PC</span>]</div><div class="t m5 x75 h32 yc96 ff6 fs21 fc2 sc0 ls0 ws0">rA<span class="_ _6"> </span><span class="ff7">:<span class="_ _be"></span></span>rB<span class="_ _25"> </span><span class="ff12">←<span class="_ _23"> </span></span>M</div><div class="t m5 x7a h33 yc97 ff7 fs20 fc2 sc0 ls0 ws0">1</div><div class="t m5 x1a5 h32 yc98 ff7 fs21 fc2 sc0 ls0 ws0">[<span class="ff6">PC<span class="_ _13"> </span><span class="ff12">+<span class="_ _13"> </span></span></span>1]<span class="_ _5c"> </span><span class="ff6">rA<span class="_ _6"> </span></span>:<span class="_ _a"> </span><span class="ff6">rB<span class="_ _23"> </span><span class="ff12">←<span class="_ _25"> </span></span>M</span></div><div class="t m5 x7e h33 yc97 ff7 fs20 fc2 sc0 ls0 ws0">1</div><div class="t m5 x36 h32 yc98 ff7 fs21 fc2 sc0 ls0 ws0">[<span class="ff6">PC<span class="_ _13"> </span><span class="ff12">+<span class="_ _13"> </span></span></span>1]<span class="_ _5c"> </span><span class="ff6">rA<span class="_ _6"> </span></span>:<span class="_ _a"> </span><span class="ff6">rB<span class="_ _23"> </span><span class="ff12">←<span class="_ _25"> </span></span>M</span></div><div class="t m5 x95 h33 yc97 ff7 fs20 fc2 sc0 ls0 ws0">1</div><div class="t m5 x22e h32 yc98 ff7 fs21 fc2 sc0 ls0 ws0">[<span class="ff6">PC<span class="_ _13"> </span><span class="ff12">+<span class="_ _13"> </span></span></span>1]</div><div class="t m5 x8d h32 yc99 ff6 fs21 fc2 sc0 ls0 ws0">valC<span class="_ _25"> </span><span class="ff12">←<span class="_ _23"> </span></span>M</div><div class="t m5 x202 h33 yc9a ff7 fs20 fc2 sc0 ls0 ws0">8</div><div class="t m5 x212 h32 yc9b ff7 fs21 fc2 sc0 ls0 ws0">[<span class="ff6">PC<span class="_ _13"> </span><span class="ff12">+<span class="_ _13"> </span></span></span>2]</div><div class="t m5 x75 h32 yc9c ff6 fs21 fc2 sc0 ls0 ws0">valP<span class="_ _23"> </span><span class="ff12">←<span class="_ _25"> </span></span>PC<span class="_ _13"> </span><span class="ff12">+<span class="_ _13"> </span><span class="ff7">2<span class="_ _69"> </span></span></span>valP<span class="_ _25"> </span><span class="ff12">←<span class="_ _23"> </span></span>PC<span class="_ _13"> </span><span class="ff12">+<span class="_ _10"> </span><span class="ff7">2<span class="_ _65"> </span></span></span>valP<span class="_ _25"> </span><span class="ff12">←<span class="_ _23"> </span></span>PC<span class="_ _10"> </span><span class="ff12">+<span class="_ _13"></span><span class="ff7">10</span></span></div><div class="t m5 x17 h32 y3ab1 ff7 fs21 fc2 sc0 ls0 ws0">Decode<span class="_ _bd"> </span><span class="ff6">valA<span class="_ _25"> </span><span class="ff12">←<span class="_ _25"> </span></span>R</span>[<span class="ff6">rA<span class="_ _2"></span></span>]<span class="_ _2f"> </span><span class="ff6">valA<span class="_ _24"> </span><span class="ff12">←<span class="_ _23"> </span></span>R<span class="_ _2"></span></span>[<span class="ff6">rA<span class="_ _2"></span></span>]</div><div class="t m5 x75 h32 y3ab2 ff6 fs21 fc2 sc0 ls0 ws0">valB<span class="_ _23"> </span><span class="ff12">←<span class="_ _25"> </span></span>R<span class="ff7">[</span>rB<span class="ff7">]</span></div><div class="t m5 x17 h32 y3ab3 ff7 fs21 fc2 sc0 ls0 ws0">Execute<span class="_ _f4"> </span><span class="ff6">valE<span class="_ _25"> </span><span class="ff12">←<span class="_ _23"> </span></span>valB<span class="_ _13"> </span>OP<span class="_ _13"> </span>valA<span class="_ _11a"> </span>valE<span class="_ _25"> </span><span class="ff12">←<span class="_ _23"> </span></span></span>0<span class="_"> </span><span class="ff12">+<span class="_ _13"></span><span class="ff6">valA<span class="_ _c0"> </span>valE<span class="_ _25"> </span></span>←<span class="_ _23"> </span></span>0<span class="_"> </span><span class="ff12">+<span class="_ _13"></span><span class="ff6">valC</span></span></div><div class="t m5 x75 h31 y3ab4 ff7 fs21 fc2 sc0 ls0 ws0">Set<span class="_"> </span>CC</div><div class="t m5 x17 h31 y3ab5 ff7 fs21 fc2 sc0 ls0 ws0">Memory</div><div class="t m5 x17 h32 y3ab6 ff7 fs21 fc2 sc0 ls0 ws0">Write<span class="_"> </span>back<span class="_ _4f"> </span><span class="ff6">R</span>[<span class="ff6">rB</span>]<span class="_ _22"> </span><span class="ff12">←<span class="_ _25"> </span><span class="ff6">valE<span class="_ _169"> </span>R</span></span>[<span class="ff6">rB</span>]<span class="_ _22"> </span><span class="ff12">←<span class="_ _25"> </span><span class="ff6">valE<span class="_ _169"> </span>R<span class="_ _2"></span></span></span>[<span class="ff6">rB<span class="_ _0"></span><span class="ff7">]<span class="_ _22"> </span><span class="ff12">←<span class="_ _25"> </span><span class="ff6">valE</span></span></span></span></div><div class="t m5 x17 h32 y3ab7 ff7 fs21 fc2 sc0 ls0 ws0">PC<span class="_"> </span>update<span class="_ _45"> </span><span class="ff6">PC<span class="_ _25"> </span><span class="ff12">←<span class="_ _23"> </span></span>valP<span class="_ _158"> </span>PC<span class="_ _23"> </span><span class="ff12">←<span class="_ _25"> </span></span>valP<span class="_ _29"> </span>PC<span class="_ _23"> </span><span class="ff12">←<span class="_ _25"> </span></span>valP</span></div><div class="t m5 x17 h3a y3ab8 ffe fs16 fc6 sc0 ls0 ws0">Figure<span class="_ _14"> </span>4.18<span class="_ _c"> </span><span class="fc1">Computations<span class="_ _14"> </span>in<span class="_ _15"> </span>sequential<span class="_ _14"> </span>implementation<span class="_ _14"> </span>of<span class="_ _15"> </span>Y86-64<span class="_ _14"> </span>instructions<span class="_ _14"> </span><span class="ffd fs19">OPq</span>,<span class="_ _21"> </span><span class="ffd fs19">rrmovq</span>,<span class="_ _15"> </span>and</span></div><div class="t m5 x17 h3a y26b5 ffd fs19 fc1 sc0 ls0 ws0">irmovq<span class="ffe fs16">.<span class="_ _14"> </span><span class="ff6">These<span class="_ _14"> </span>instructions<span class="_ _15"> </span>compute<span class="_ _14"> </span>a<span class="_ _15"> </span>value<span class="_ _14"> </span>and<span class="_ _15"> </span>store<span class="_ _14"> </span>the<span class="_ _14"> </span>result<span class="_ _15"> </span>in<span class="_ _14"> </span>a<span class="_ _15"> </span>register<span class="_ _3"></span>.<span class="_ _15"> </span>The<span class="_ _14"> </span>notation<span class="_ _15"> </span>icode<span class="_ _a"> </span><span class="ffd fs19">:<span class="_ _a"> </span></span>ifun</span></span></div><div class="t m5 x17 h34 y3ab9 ff6 fs16 fc1 sc0 ls0 ws0">indicates<span class="_ _16"> </span>the<span class="_ _14"> </span>two<span class="_ _16"> </span>components<span class="_ _14"> </span>of<span class="_ _16"> </span>the<span class="_ _14"> </span>instruction<span class="_ _16"> </span>byte,<span class="_ _14"> </span>while<span class="_ _14"> </span>rA</div><div class="t m5 x12e h3a y3aba ffd fs19 fc1 sc0 ls0 ws0">:<span class="_ _a"> </span><span class="ff6 fs16">rB<span class="_ _16"> </span>indicates<span class="_ _14"> </span>the<span class="_ _16"> </span>two<span class="_ _14"> </span>components<span class="_ _16"> </span>of<span class="_ _14"> </span>the</span></div><div class="t m5 x17 h34 y3abb ff6 fs16 fc1 sc0 ls0 ws0">register<span class="_ _11"> </span>speciﬁer<span class="_ _16"> </span>byte.<span class="_ _11"> </span>The<span class="_ _16"> </span>notation<span class="_ _11"> </span>M</div><div class="t m5 x167 h5d y3abc ff7 fs32 fc1 sc0 ls0 ws0">1</div><div class="t m5 x115 h1c y19b0 ff7 fs16 fc1 sc0 ls0 ws0">[<span class="ff11">x<span class="_ _2"></span></span>]<span class="_ _10"> </span><span class="ff6">indicates<span class="_ _16"> </span>accessing<span class="_ _11"> </span>(either<span class="_ _11"> </span>reading<span class="_ _16"> </span>or<span class="_ _11"> </span>writing)<span class="_ _16"> </span>1<span class="_ _11"> </span>byte<span class="_ _16"> </span>at<span class="_ _11"> </span>memory</span></div><div class="t m5 x17 h34 y3abd ff6 fs16 fc1 sc0 ls0 ws0">location<span class="_ _10"> </span><span class="ff11">x<span class="_ _5"></span></span>,<span class="_ _10"> </span>while<span class="_ _11"> </span>M</div><div class="t m5 x29 h5d y3abe ff7 fs32 fc1 sc0 ls0 ws0">8</div><div class="t m5 x13 h1c y3abf ff7 fs16 fc1 sc0 ls0 ws0">[<span class="ff11">x<span class="_ _2"></span></span>]<span class="_"> </span><span class="ff6">indicates<span class="_ _10"> </span>accessing<span class="_ _10"> </span>8<span class="_ _11"> </span>bytes.</span></div><div class="t m5 x17 h26 y3ac0 ff7 fs19 fc1 sc0 ls0 ws0">then<span class="_"> </span>written<span class="_"> </span>to<span class="_"> </span>the<span class="_"> </span>register<span class="_"> </span>ﬁle<span class="_ _1"></span>.<span class="_"> </span>Similar<span class="_"> </span>processing<span class="_"> </span>occurs<span class="_"> </span>for<span class="_"> </span><span class="ffd">irmovq</span>,<span class="_"> </span>except<span class="_"> </span>that</div><div class="t m5 x17 h26 y3ac1 ff7 fs19 fc1 sc0 ls0 ws0">we<span class="_ _13"> </span>use<span class="_ _6"> </span>constant<span class="_ _13"> </span>value<span class="_ _6"> </span><span class="ff6">valC<span class="_ _13"> </span></span>for<span class="_ _6"> </span>the<span class="_ _13"> </span>ﬁrst<span class="_ _6"> </span>ALU<span class="_ _13"> </span>input.<span class="_ _6"> </span>In<span class="_ _13"> </span>addition,<span class="_ _13"> </span>we<span class="_ _6"> </span>must<span class="_ _13"> </span>increment</div><div class="t m5 x17 h26 y3ac2 ff7 fs19 fc1 sc0 ls0 ws0">the<span class="_ _13"> </span>program<span class="_"> </span>counter<span class="_ _13"> </span>by<span class="_"> </span>10<span class="_ _13"> </span>for<span class="_"> </span><span class="ffd">irmovq<span class="_ _13"> </span></span>due<span class="_"> </span>to<span class="_ _13"> </span>the<span class="_"> </span>long<span class="_ _13"> </span>instruction<span class="_ _13"> </span>format.<span class="_"> </span>Neither</div><div class="t m5 x17 h26 y3ac3 ff7 fs19 fc1 sc0 ls0 ws0">of<span class="_"> </span>these<span class="_"> </span>instructions<span class="_"> </span>changes<span class="_"> </span>the<span class="_"> </span>condition<span class="_"> </span>codes<span class="_ _1"></span>.</div><div class="t m5 x17 h47 y3ac4 ffe fs2b fc1 sc0 ls0 ws0">Practice<span class="_"> </span>Problem<span class="_"> </span>4.13<span class="_ _1f"> </span><span class="fs16">(solution<span class="_"> </span>page<span class="_"> </span>521)</span></div><div class="t m5 x17 h26 y3ac5 ff7 fs19 fc1 sc0 ls0 ws0">F<span class="_ _1"></span>ill<span class="_ _11"> </span>in<span class="_ _11"> </span>the<span class="_ _11"> </span>right-hand<span class="_ _11"> </span>column<span class="_ _11"> </span>of<span class="_ _11"> </span>the<span class="_"> </span>following<span class="_ _11"> </span>table<span class="_ _11"> </span>to<span class="_ _11"> </span>describe<span class="_ _11"> </span>the<span class="_ _11"> </span>processing<span class="_ _11"> </span>of</div><div class="t m5 x17 h26 y3ac6 ff7 fs19 fc1 sc0 ls0 ws0">the<span class="_"> </span><span class="ffd">irmovq<span class="_ _10"> </span></span>instruction<span class="_"> </span>on<span class="_"> </span>line<span class="_"> </span>4<span class="_"> </span>of<span class="_"> </span>the<span class="_"> </span>object<span class="_"> </span>code<span class="_"> </span>in<span class="_"> </span>F<span class="_ _0"></span>igure<span class="_"> </span>4.17:</div><div class="t m5 x75 h31 y3ac7 ff7 fs21 fc2 sc0 ls0 ws0">Generic<span class="_ _15a"> </span>Speciﬁc</div><div class="t m5 x17 h31 y3ac8 ff7 fs21 fc2 sc0 ls0 ws0">Stage</div><div class="t m5 x75 h93 y3ac9 ffd fs1e fc2 sc0 ls0 ws0">irmovq<span class="_ _11"> </span><span class="ff6 fs21">V</span>,<span class="_ _11"> </span><span class="ff6 fs21">rB<span class="_ _7a"> </span></span>irmovq<span class="_ _11"> </span>$128,<span class="_ _16"> </span>%rsp</div><div class="t m5 x17 h32 y3aca ff7 fs21 fc2 sc0 ls0 ws0">F<span class="_ _1"></span>etch<span class="_ _55"> </span><span class="ff6">icode<span class="_ _a"> </span></span>:<span class="_ _be"></span><span class="ff6">ifun<span class="_ _23"> </span><span class="ff12">←<span class="_ _25"> </span></span>M</span></div><div class="t m5 x183 h33 y3acb ff7 fs20 fc2 sc0 ls0 ws0">1</div><div class="t m5 x10e h31 y3aca ff7 fs21 fc2 sc0 ls0 ws0">[<span class="ff6">PC</span>]</div><div class="t m5 x75 h32 y3acc ff6 fs21 fc2 sc0 ls0 ws0">rA<span class="_ _6"> </span><span class="ff7">:<span class="_ _be"></span></span>rB<span class="_ _25"> </span><span class="ff12">←<span class="_ _23"> </span></span>M</div><div class="t m5 x7a h33 y3acd ff7 fs20 fc2 sc0 ls0 ws0">1</div><div class="t m5 x1a5 h32 y3ace ff7 fs21 fc2 sc0 ls0 ws0">[<span class="ff6">PC<span class="_ _13"> </span><span class="ff12">+<span class="_ _13"> </span></span></span>1]</div><div class="t m5 x75 h32 y3acf ff6 fs21 fc2 sc0 ls0 ws0">valC<span class="_ _25"> </span><span class="ff12">←<span class="_ _23"> </span></span>M</div><div class="t m5 xc1 h33 y3ad0 ff7 fs20 fc2 sc0 ls0 ws0">8</div><div class="t m5 x20 h32 y3ad1 ff7 fs21 fc2 sc0 ls0 ws0">[<span class="ff6">PC<span class="_ _13"> </span><span class="ff12">+<span class="_ _13"> </span></span></span>2]</div><div class="t m5 x75 h32 y3ad2 ff6 fs21 fc2 sc0 ls0 ws0">valP<span class="_ _23"> </span><span class="ff12">←<span class="_ _25"> </span></span>PC<span class="_ _13"> </span><span class="ff12">+<span class="_ _13"> </span><span class="ff7">10</span></span></div><div class="t m5 x17 h31 y3ad3 ff7 fs21 fc2 sc0 ls0 ws0">Decode</div><div class="t m5 x17 h32 y3ad4 ff7 fs21 fc2 sc0 ls0 ws0">Execute<span class="_ _f4"> </span><span class="ff6">valE<span class="_ _25"> </span><span class="ff12">←<span class="_ _23"> </span></span></span>0<span class="_"> </span><span class="ff12">+<span class="_ _13"> </span><span class="ff6">valC</span></span></div></div><div class="pi" data-data='{"ctm":[2.000000,0.000000,0.000000,2.000000,0.000000,0.000000]}'></div></div>
