<div id="pf1c6" class="pf w2 h11" data-page-no="1c6"><div class="pc pc1c6 w2 h11"><img class="bi x0 y0 w1 h1" alt="" src="csapp/bg1c6.png"/><div class="t m5 x1d9 h28 y9b ff6 fs1f fc2 sc0 ls0 ws0">Section<span class="_ _10"> </span>4.4<span class="_ _60"> </span>General<span class="_ _10"> </span>Principles<span class="_ _10"> </span>of<span class="_ _10"> </span>Pipelining<span class="_ _3e"> </span><span class="ffe fs1e">453</span></div><div class="t m5 x1b6 h40 y3eb5 ff44 fs28 fc1 sc0 ls0 ws0">I1</div><div class="t m5 x1b6 h40 y3eb6 ff44 fs28 fc1 sc0 ls0 ws0">I2</div><div class="t m5 x1b6 h40 y3eb7 ff44 fs28 fc1 sc0 ls0 ws0">I3</div><div class="t m5 x30 h3f y3eb8 ff43 fs27 fc1 sc0 ls1c3 ws0">AB<span class="_ _145"></span>C</div><div class="t m5 x140 h3f y3eb9 ff43 fs27 fc1 sc0 ls1c4 ws0">AB<span class="_ _145"></span>C</div><div class="t m5 x1a8 h3f y3eba ff43 fs27 fc1 sc0 ls1c3 ws0">AB<span class="_ _145"></span>C</div><div class="t m5 x20a h3f y3ebb ff43 fs27 fc1 sc0 ls0 ws0">T<span class="_ _0"></span>ime</div><div class="t m5 x254 h3f y3ebc ff43 fs27 fc1 sc0 ls0 ws0">Clock</div><div class="t m5 x2d h3f y3ebd ff43 fs27 fc1 sc0 ls0 ws0">Comb.</div><div class="t m5 x146 h3f y3ebe ff43 fs27 fc1 sc0 ls0 ws0">logic</div><div class="t m5 xd1 h3f y3ebf ff43 fs27 fc1 sc0 ls0 ws0">A</div><div class="t m5 x124 h3f y3ec0 ff43 fs27 fc1 sc0 ls0 ws0">R</div><div class="t m5 x17e h3f y3ec1 ff43 fs27 fc1 sc0 ls0 ws0">e</div><div class="t m5 x17e h3f y3ec2 ff43 fs27 fc1 sc0 ls0 ws0">g</div><div class="t m5 x17 h3f y3ec3 ff43 fs27 fc1 sc0 ls0 ws0">(a) Hardware: Three-stage pipeline, nonuniform stage delays</div><div class="t m5 x1fe h3f y3ec4 ff43 fs27 fc1 sc0 ls0 ws0">50 ps<span class="_ _18"> </span>20 ps</div><div class="t m5 x33 h3f y3ec5 ff43 fs27 fc1 sc0 ls0 ws0">Comb.</div><div class="t m5 x1a8 h3f y3ec6 ff43 fs27 fc1 sc0 ls0 ws0">logic</div><div class="t m5 x18e h3f y3ec7 ff43 fs27 fc1 sc0 ls0 ws0">B</div><div class="t m5 x157 h3f y3ec8 ff43 fs27 fc1 sc0 ls0 ws0">R</div><div class="t m5 x117 h3f y3ec9 ff43 fs27 fc1 sc0 ls0 ws0">e</div><div class="t m5 x117 h3f y3eca ff43 fs27 fc1 sc0 ls0 ws0">g</div><div class="t m5 x66 h3f y3ecb ff43 fs27 fc1 sc0 ls0 ws0">150 ps<span class="_ _72"> </span>20 ps</div><div class="t m5 x1c8 h3f y3ecc ff43 fs27 fc1 sc0 ls0 ws0">Comb.</div><div class="t m5 x200 h3f y3ecd ff43 fs27 fc1 sc0 ls0 ws0">logic</div><div class="t m5 x113 h3f y3ece ff43 fs27 fc1 sc0 ls0 ws0">C</div><div class="t m5 x19d h3f y3ecf ff43 fs27 fc1 sc0 ls0 ws0">R</div><div class="t m5 x82 h3f y3ed0 ff43 fs27 fc1 sc0 ls0 ws0">e</div><div class="t m5 x82 h3f y3ed1 ff43 fs27 fc1 sc0 ls0 ws0">g</div><div class="t m5 x1c8 h3f y3ed2 ff43 fs27 fc1 sc0 ls0 ws0">100 ps<span class="_ _f1"> </span>20 ps</div><div class="t m5 x17 h3f y3ed3 ff43 fs27 fc1 sc0 ls0 ws0">(b) Pipeline diagram</div><div class="t m5 x1c2 h3f y3ed4 ff43 fs27 fc1 sc0 ls0 ws0">Delay <span class="ff24"></span> 510 ps</div><div class="t m5 x1c2 h3f y3ed5 ff43 fs27 fc1 sc0 ls0 ws0">Throughput <span class="ff24"></span> 5.88 GIPS</div><div class="t m5 x17 h34 y3ed6 ffe fs16 fc6 sc0 ls0 ws0">Figure<span class="_"> </span>4.36<span class="_ _c"> </span><span class="fc1">Limitations<span class="_ _11"> </span>of<span class="_ _11"> </span>pipelining<span class="_ _11"> </span>due<span class="_"> </span>to<span class="_ _11"> </span>nonuniform<span class="_ _11"> </span>stage<span class="_ _11"> </span>delays.<span class="_ _11"> </span><span class="ff6">The<span class="_ _11"> </span>system</span></span></div><div class="t m5 x17 h34 y3ed7 ff6 fs16 fc1 sc0 ls0 ws0">throughput<span class="_ _10"> </span>is<span class="_ _11"> </span>limited<span class="_ _10"> </span>by<span class="_ _10"> </span>the<span class="_ _11"> </span>speed<span class="_ _10"> </span>of<span class="_ _11"> </span>the<span class="_ _10"> </span>slowest<span class="_ _11"> </span>stage.</div><div class="t m5 x17 h26 y3ed8 ff7 fs19 fc1 sc0 ls0 ws0">some<span class="_ _16"> </span>of<span class="_ _11"> </span>the<span class="_ _16"> </span>hardware<span class="_ _16"> </span>units<span class="_ _11"> </span>in<span class="_ _16"> </span>a<span class="_ _16"> </span>processor,<span class="_ _11"> </span>such<span class="_ _16"> </span>as<span class="_ _16"> </span>the<span class="_ _11"> </span>ALU<span class="_ _16"> </span>and<span class="_ _16"> </span>the<span class="_ _11"> </span>memories<span class="_ _1"></span>,</div><div class="t m5 x17 h26 y3ed9 ff7 fs19 fc1 sc0 ls0 ws0">cannot<span class="_ _13"> </span>be<span class="_"> </span>subdivided<span class="_ _13"> </span>into<span class="_ _13"> </span>multiple<span class="_ _13"> </span>units<span class="_"> </span>with<span class="_ _13"> </span>shorter<span class="_ _13"> </span>delay<span class="_ _3"></span>.<span class="_ _13"> </span>T<span class="_ _0"></span>his<span class="_ _13"> </span>makes<span class="_"> </span>it<span class="_ _13"> </span>difﬁcult</div><div class="t m5 x17 h26 y3eda ff7 fs19 fc1 sc0 ls0 ws0">to<span class="_"> </span>create<span class="_"> </span>a<span class="_ _13"> </span>set<span class="_"> </span>of<span class="_"> </span>balanced<span class="_"> </span>stages<span class="_ _1"></span>.<span class="_"> </span>W<span class="_ _3"></span>e<span class="_"> </span>will<span class="_"> </span>not<span class="_"> </span>concern<span class="_ _13"> </span>ourselves<span class="_"> </span>with<span class="_"> </span>this<span class="_"> </span>level<span class="_"> </span>of</div><div class="t m5 x17 h26 y3edb ff7 fs19 fc1 sc0 ls0 ws0">detail<span class="_ _6"> </span>in<span class="_ _6"> </span>designing<span class="_ _6"> </span>our<span class="_ _6"> </span>pipelined<span class="_ _6"> </span>Y86-64<span class="_ _6"> </span>processor,<span class="_ _6"> </span>but<span class="_ _6"> </span>it<span class="_ _6"> </span>is<span class="_ _6"> </span>important<span class="_ _6"> </span>to<span class="_ _6"> </span>appreciate</div><div class="t m5 x17 h26 y3edc ff7 fs19 fc1 sc0 ls0 ws0">the<span class="_"> </span>importance<span class="_"> </span>of<span class="_"> </span>timing<span class="_"> </span>optimization<span class="_"> </span>in<span class="_"> </span>actual<span class="_"> </span>system<span class="_"> </span>design.</div><div class="t m5 x17 h47 y3edd ffe fs2b fc1 sc0 ls0 ws0">Practice<span class="_"> </span>Problem<span class="_"> </span>4.28<span class="_ _1f"> </span><span class="fs16">(solution<span class="_"> </span>page<span class="_"> </span>525)</span></div><div class="t m5 x17 h26 y3ede ff7 fs19 fc1 sc0 ls0 ws0">Suppose<span class="_"> </span>we<span class="_"> </span>analyze<span class="_ _11"> </span>the<span class="_"> </span>combinational<span class="_ _11"> </span>logic<span class="_"> </span>of<span class="_"> </span>Figure<span class="_"> </span>4.32<span class="_"> </span>and<span class="_"> </span>determine<span class="_ _11"> </span>that<span class="_"> </span>it</div><div class="t m5 x17 h26 y3edf ff7 fs19 fc1 sc0 ls0 ws0">can<span class="_ _13"> </span>be<span class="_"> </span>separated<span class="_ _13"> </span>into<span class="_"> </span>a<span class="_ _13"> </span>sequence<span class="_"> </span>of<span class="_ _13"> </span>six<span class="_"> </span>blocks<span class="_ _3"></span>,<span class="_"> </span>named<span class="_"> </span>A<span class="_ _13"> </span>to<span class="_"> </span>F<span class="_ _4"></span>,<span class="_"> </span>having<span class="_ _13"> </span>delays<span class="_"> </span>of<span class="_ _13"> </span>80,</div><div class="t m5 x17 h26 y3ee0 ff7 fs19 fc1 sc0 ls0 ws0">30,<span class="_"> </span>60,<span class="_"> </span>50,<span class="_"> </span>70,<span class="_"> </span>and<span class="_"> </span>10<span class="_"> </span>ps<span class="_ _1"></span>,<span class="_"> </span>respectively<span class="_ _3"></span>,<span class="_"> </span>illustrated<span class="_"> </span>as<span class="_"> </span>follows:</div><div class="t m5 x1b5 h3f y3ee1 ff43 fs27 fc1 sc0 ls0 ws0">80 ps<span class="_ _78"> </span>30 ps<span class="_ _8b"> </span>60 ps<span class="_ _d3"> </span>50 ps<span class="_ _59"> </span>70 ps<span class="_ _7b"> </span>10 ps</div><div class="t m5 x188 h3f y3ee2 ff43 fs27 fc1 sc0 ls1c5 ws0">AE<span class="_ _1b8"></span>F<span class="_ _1b9"></span><span class="ls0">C</span></div><div class="t m5 x13 h3f y3ee3 ff43 fs27 fc1 sc0 ls0 ws0">B</div><div class="t m5 xfa h3f y3ee2 ff43 fs27 fc1 sc0 ls0 ws0">D</div><div class="t m5 x85 h3f y3ee1 ff43 fs27 fc1 sc0 ls0 ws0">20 ps</div><div class="t m5 x85 h3f y3ee4 ff43 fs27 fc1 sc0 ls0 ws0">Clock</div><div class="t m5 x12f h3f y3ee5 ff43 fs27 fc1 sc0 ls0 ws0">R</div><div class="t m5 x247 h3f y3ee6 ff43 fs27 fc1 sc0 ls0 ws0">e</div><div class="t m5 x247 h3f y3ee7 ff43 fs27 fc1 sc0 ls0 ws0">g</div><div class="t m5 x26 h26 yc8c ff7 fs19 fc1 sc0 ls0 ws0">W<span class="_ _3"></span>e<span class="_"> </span>can<span class="_"> </span>create<span class="_ _13"> </span>pipelined<span class="_"> </span>versions<span class="_"> </span>of<span class="_ _13"> </span>this<span class="_"> </span>design<span class="_"> </span>by<span class="_ _13"> </span>inserting<span class="_"> </span>pipeline<span class="_"> </span>registers</div><div class="t m5 x17 h26 yc8d ff7 fs19 fc1 sc0 ls0 ws0">between<span class="_ _15"> </span>pairs<span class="_ _21"> </span>of<span class="_ _15"> </span>these<span class="_ _15"> </span>blocks<span class="_ _0"></span>.<span class="_ _15"> </span>Different<span class="_ _15"> </span>combinations<span class="_ _21"> </span>of<span class="_ _15"> </span>pipeline<span class="_ _21"> </span>depth<span class="_ _15"> </span>(how</div><div class="t m5 x17 h26 yc8e ff7 fs19 fc1 sc0 ls0 ws0">many<span class="_"> </span>stages)<span class="_ _11"> </span>and<span class="_"> </span>maximum<span class="_ _11"> </span>throughput<span class="_"> </span>arise,<span class="_"> </span>depending<span class="_"> </span>on<span class="_ _11"> </span>where<span class="_"> </span>we<span class="_ _11"> </span>insert<span class="_"> </span>the</div><div class="t m5 x17 h26 yc8f ff7 fs19 fc1 sc0 ls0 ws0">pipeline<span class="_"> </span>registers<span class="_ _1"></span>.<span class="_"> </span>Assume<span class="_"> </span>that<span class="_"> </span>a<span class="_"> </span>pipeline<span class="_"> </span>register<span class="_"> </span>has<span class="_"> </span>a<span class="_"> </span>delay<span class="_"> </span>of<span class="_"> </span>20<span class="_"> </span>ps<span class="_ _1"></span>.</div><div class="t m5 x34 h26 y605 ff7 fs19 fc1 sc0 ls0 ws0">A.<span class="_ _1f"> </span>Inserting<span class="_ _f"> </span>a<span class="_ _e"> </span>single<span class="_ _f"> </span>register<span class="_ _e"> </span>gives<span class="_ _f"> </span>a<span class="_ _e"> </span>two-stage<span class="_ _f"> </span>pipeline<span class="_ _0"></span>.<span class="_ _f"> </span>Where<span class="_ _e"> </span>should<span class="_ _f"> </span>the</div><div class="t m5 x2d h26 y606 ff7 fs19 fc1 sc0 ls0 ws0">register<span class="_ _6"> </span>be<span class="_ _13"> </span>inserted<span class="_ _6"> </span>to<span class="_ _13"> </span>maximize<span class="_ _6"> </span>throughput?<span class="_ _13"> </span>W<span class="_ _0"></span>hat<span class="_ _13"> </span>would<span class="_ _6"> </span>be<span class="_ _6"> </span>the<span class="_ _13"> </span>throughput</div><div class="t m5 x2d h26 y607 ff7 fs19 fc1 sc0 ls0 ws0">and<span class="_"> </span>latency?</div></div><div class="pi" data-data='{"ctm":[2.000000,0.000000,0.000000,2.000000,0.000000,0.000000]}'></div></div>
