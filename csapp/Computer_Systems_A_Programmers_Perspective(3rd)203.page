<div id="pfcb" class="pf w2 h11" data-page-no="cb"><div class="pc pccb w2 h11"><img class="bi x0 y0 w1 h1" alt="" src="csapp/bgcb.png"/><div class="t m5 x14 h28 y9b ffe fs1e fc2 sc0 ls0 ws0">202<span class="_ _1b"> </span><span class="ff6 fs1f">Chapter<span class="_ _10"> </span>3<span class="_ _3d"> </span>Machine-Level<span class="_ _10"> </span>Representation<span class="_ _10"> </span>of<span class="_ _10"> </span>Programs</span></div><div class="t m5 x28 h2a y257 fff fs1c fc2 sc0 ls0 ws0">W<span class="_ _1"></span>eb<span class="_ _16"> </span>Aside<span class="_ _14"> </span>ASM:IA32<span class="_ _1b"> </span><span class="ff6 fs19">IA32<span class="_ _11"> </span>programming</span></div><div class="t m5 x28 h2b y2d0 ff7 fs1e fc2 sc0 ls0 ws0">IA32,<span class="_ _21"> </span>the<span class="_ _14"> </span>32-bit<span class="_ _15"> </span>predecessor<span class="_ _15"> </span>to<span class="_ _15"> </span>x86-64,<span class="_ _15"> </span>was<span class="_ _15"> </span>introduced<span class="_ _15"> </span>by<span class="_ _15"> </span>Intel<span class="_ _14"> </span>in<span class="_ _15"> </span>1985.<span class="_ _15"> </span>It<span class="_ _15"> </span>served<span class="_ _14"> </span>as<span class="_ _15"> </span>the<span class="_ _15"> </span>machine</div><div class="t m5 x28 h2b y2d1 ff7 fs1e fc2 sc0 ls0 ws0">language<span class="_ _15"> </span>of<span class="_ _15"> </span>choice<span class="_ _15"> </span>for<span class="_ _15"> </span>several<span class="_ _15"> </span>decades<span class="_ _1"></span>.<span class="_ _21"> </span>Most<span class="_ _15"> </span>x86<span class="_ _15"> </span>microprocessors<span class="_ _15"> </span>sold<span class="_ _15"> </span>today<span class="_ _3"></span>,<span class="_ _f"> </span>and<span class="_ _15"> </span>most<span class="_ _15"> </span>operating</div><div class="t m5 x28 h2b y2d2 ff7 fs1e fc2 sc0 ls0 ws0">systems<span class="_"> </span>installed<span class="_ _13"> </span>on<span class="_"> </span>these<span class="_"> </span>machines<span class="_ _3"></span>,<span class="_"> </span>are<span class="_"> </span>designed<span class="_"> </span>to<span class="_ _13"> </span>run<span class="_"> </span>x86-64.<span class="_"> </span>However<span class="_ _1"></span>,<span class="_"> </span>they<span class="_"> </span>can<span class="_"> </span>also<span class="_ _13"> </span>execute<span class="_"> </span>IA32</div><div class="t m5 x28 h2b y2d3 ff7 fs1e fc2 sc0 ls0 ws0">programs<span class="_"> </span>in<span class="_ _13"> </span>a<span class="_ _13"> </span>backward<span class="_"> </span>compatibility<span class="_ _13"> </span>mode<span class="_ _0"></span>.<span class="_"> </span>As<span class="_ _13"> </span>a<span class="_"> </span>result,<span class="_ _13"> </span>many<span class="_"> </span>application<span class="_ _13"> </span>programs<span class="_ _13"> </span>are<span class="_"> </span>still<span class="_ _13"> </span>based<span class="_"> </span>on</div><div class="t m5 x28 h2b y2d4 ff7 fs1e fc2 sc0 ls0 ws0">IA32.<span class="_ _10"> </span>In<span class="_ _11"> </span>addition,<span class="_ _11"> </span>many<span class="_ _10"> </span>existing<span class="_ _11"> </span>systems<span class="_ _11"> </span>cannot<span class="_ _10"> </span>execute<span class="_ _11"> </span>x86-64,<span class="_ _11"> </span>due<span class="_ _11"> </span>to<span class="_"> </span>limitations<span class="_ _11"> </span>of<span class="_ _11"> </span>their<span class="_ _10"> </span>hardware</div><div class="t m5 x28 h2b y2d5 ff7 fs1e fc2 sc0 ls0 ws0">or<span class="_"> </span>system<span class="_ _11"> </span>software<span class="_ _1"></span>.<span class="_ _11"> </span>IA32<span class="_"> </span>continues<span class="_ _11"> </span>to<span class="_ _10"> </span>be<span class="_ _11"> </span>an<span class="_"> </span>important<span class="_ _11"> </span>machine<span class="_"> </span>language.<span class="_"> </span>Y<span class="_ _3"></span>ou<span class="_"> </span>will<span class="_ _11"> </span>ﬁnd<span class="_ _10"> </span>that<span class="_ _11"> </span>having<span class="_"> </span>a</div><div class="t m5 x28 h2b y2d6 ff7 fs1e fc2 sc0 ls0 ws0">background<span class="_"> </span>in<span class="_"> </span>x86-64<span class="_"> </span>will<span class="_"> </span>enable<span class="_"> </span>you<span class="_"> </span>to<span class="_"> </span>learn<span class="_"> </span>the<span class="_"> </span>IA32<span class="_"> </span>machine<span class="_"> </span>language<span class="_"> </span>quite<span class="_"> </span>readily<span class="_ _3"></span>.</div><div class="t m5 x1d h26 y1fec ff7 fs19 fc2 sc0 ls0 ws0">passing<span class="_"> </span>of<span class="_"> </span>data<span class="_ _11"> </span>and<span class="_"> </span>control<span class="_"> </span>between<span class="_ _11"> </span>procedures<span class="_ _1"></span>,<span class="_"> </span>as<span class="_ _11"> </span>well<span class="_"> </span>as<span class="_"> </span>storage<span class="_ _11"> </span>for<span class="_"> </span>local<span class="_"> </span>vari-</div><div class="t m5 x1d h26 y1fed ff7 fs19 fc2 sc0 ls0 ws0">ables<span class="_ _1"></span>.<span class="_ _13"> </span>Next,<span class="_ _13"> </span>we<span class="_ _13"> </span>consider<span class="_ _13"> </span>how<span class="_ _13"> </span>data<span class="_"> </span>structures<span class="_ _13"> </span>such<span class="_ _13"> </span>as<span class="_ _13"> </span>arrays<span class="_ _3"></span>,<span class="_"> </span>structures<span class="_ _3"></span>,<span class="_ _13"> </span>and<span class="_ _13"> </span>unions</div><div class="t m5 x1d h26 y1fee ff7 fs19 fc2 sc0 ls0 ws0">are<span class="_ _6"> </span>implemented<span class="_ _13"> </span>at<span class="_ _6"> </span>the<span class="_ _13"> </span>machine<span class="_ _6"> </span>level.<span class="_ _13"> </span>W<span class="_ _1"></span>ith<span class="_ _13"> </span>this<span class="_ _6"> </span>background<span class="_ _13"> </span>in<span class="_ _6"> </span>machine-level<span class="_ _13"> </span>pro-</div><div class="t m5 x1d h26 y1fef ff7 fs19 fc2 sc0 ls0 ws0">gramming,<span class="_ _6"> </span>we<span class="_ _6"> </span>can<span class="_ _6"> </span>examine<span class="_ _6"> </span>the<span class="_ _6"> </span>problems<span class="_ _6"> </span>of<span class="_ _6"> </span>out-of-bounds<span class="_ _13"> </span>memory<span class="_ _a"> </span>references<span class="_ _6"> </span>and</div><div class="t m5 x1d h26 y1ff0 ff7 fs19 fc2 sc0 ls0 ws0">the<span class="_ _11"> </span>vulnerability<span class="_ _11"> </span>of<span class="_ _16"> </span>systems<span class="_ _11"> </span>to<span class="_ _11"> </span>buffer<span class="_ _16"> </span>overﬂow<span class="_"> </span>attacks<span class="_ _0"></span>.<span class="_ _11"> </span>W<span class="_ _3"></span>e<span class="_ _16"> </span>ﬁnish<span class="_ _11"> </span>this<span class="_ _11"> </span>part<span class="_ _11"> </span>of<span class="_ _16"> </span>the</div><div class="t m5 x1d h26 y1ff1 ff7 fs19 fc2 sc0 ls0 ws0">presentation<span class="_ _13"> </span>with<span class="_ _6"> </span>some<span class="_ _13"> </span>tips<span class="_ _13"> </span>on<span class="_ _6"> </span>using<span class="_ _13"> </span>the<span class="_ _6"> </span><span class="ff9">gdb<span class="_ _13"> </span></span>debugger<span class="_ _13"> </span>for<span class="_ _6"> </span>examining<span class="_ _13"> </span>the<span class="_ _13"> </span>run-time</div><div class="t m5 x1d h26 y1ff2 ff7 fs19 fc2 sc0 ls0 ws0">behavior<span class="_"> </span>of<span class="_"> </span>a<span class="_"> </span>machine-level<span class="_"> </span>program.<span class="_"> </span>T<span class="_ _1"></span>he<span class="_"> </span>chapter<span class="_"> </span>concludes<span class="_"> </span>with<span class="_"> </span>a<span class="_"> </span>presentation</div><div class="t m5 x1d h26 y1ff3 ff7 fs19 fc2 sc0 ls0 ws0">on<span class="_ _14"> </span>machine-program<span class="_ _15"> </span>representations<span class="_ _14"> </span>of<span class="_ _15"> </span>code<span class="_ _15"> </span>involving<span class="_ _14"> </span>ﬂoating-point<span class="_ _15"> </span>data<span class="_ _15"> </span>and</div><div class="t m5 x1d h26 y1ff4 ff7 fs19 fc2 sc0 ls0 ws0">operations<span class="_ _1"></span>.</div><div class="t m5 x29 h26 y1ff5 ff7 fs19 fc2 sc0 ls0 ws0">T<span class="_ _1"></span>he<span class="_ _14"> </span>computer<span class="_ _15"> </span>industry<span class="_ _14"> </span>has<span class="_ _14"> </span>recently<span class="_ _14"> </span>made<span class="_ _15"> </span>the<span class="_ _14"> </span>transition<span class="_ _14"> </span>from<span class="_ _14"> </span>32-bit<span class="_ _15"> </span>to<span class="_ _14"> </span>64-</div><div class="t m5 x1d h26 y1ff6 ff7 fs19 fc2 sc0 ls0 ws0">bit<span class="_ _15"> </span>machines<span class="_ _1"></span>.<span class="_ _15"> </span>A<span class="_ _15"> </span>32-bit<span class="_ _15"> </span>machine<span class="_ _15"> </span>can<span class="_ _15"> </span>only<span class="_ _21"> </span>make<span class="_ _15"> </span>use<span class="_ _15"> </span>of<span class="_ _15"> </span>around<span class="_ _15"> </span>4<span class="_ _15"> </span>gigabytes<span class="_ _15"> </span>(2</div><div class="t m5 x211 h3c y1ff7 ff7 fs25 fc2 sc0 ls0 ws0">32</div><div class="t m5 x1d h26 y1ff8 ff7 fs19 fc2 sc0 ls0 ws0">bytes)<span class="_ _f"> </span>of<span class="_ _e"> </span>random<span class="_ _f"> </span>access<span class="_ _e"> </span>memory<span class="_ _7"></span>,<span class="_ _1f"> </span>W<span class="_ _1"></span>ith<span class="_ _e"> </span>memory<span class="_ _f"> </span>prices<span class="_ _e"> </span>dropping<span class="_ _21"> </span>at<span class="_ _e"> </span>dramatic</div><div class="t m5 x1d h26 y1ff9 ff7 fs19 fc2 sc0 ls0 ws0">rates<span class="_ _1"></span>,<span class="_ _14"> </span>and<span class="_ _16"> </span>our<span class="_ _14"> </span>computational<span class="_ _16"> </span>demands<span class="_ _14"> </span>and<span class="_ _16"> </span>data<span class="_ _16"> </span>sizes<span class="_ _14"> </span>increasing,<span class="_ _16"> </span>it<span class="_ _14"> </span>has<span class="_ _16"> </span>become</div><div class="t m5 x1d h26 y1ffa ff7 fs19 fc2 sc0 ls0 ws0">both<span class="_"> </span>economically<span class="_ _13"> </span>feasible<span class="_"> </span>and<span class="_"> </span>technically<span class="_ _13"> </span>desirable<span class="_"> </span>to<span class="_ _13"> </span>go<span class="_"> </span>beyond<span class="_"> </span>this<span class="_ _13"> </span>limitation.</div><div class="t m5 x1d h26 y1ffb ff7 fs19 fc2 sc0 ls0 ws0">Current<span class="_ _11"> </span>64-bit<span class="_ _11"> </span>machines<span class="_ _16"> </span>can<span class="_ _11"> </span>use<span class="_ _11"> </span>up<span class="_ _16"> </span>to<span class="_ _11"> </span>256<span class="_ _11"> </span>terabytes<span class="_ _16"> </span>(2</div><div class="t m5 x9 h3c y1ffc ff7 fs25 fc2 sc0 ls0 ws0">48</div><div class="t m5 x23f h26 y1ffd ff7 fs19 fc2 sc0 ls0 ws0">bytes)<span class="_ _11"> </span>of<span class="_ _11"> </span>memory<span class="_ _3"></span>,<span class="_ _16"> </span>and</div><div class="t m5 x1d h26 y1ffe ff7 fs19 fc2 sc0 ls0 ws0">could<span class="_ _15"> </span>readily<span class="_ _14"> </span>be<span class="_ _15"> </span>extended<span class="_ _15"> </span>to<span class="_ _15"> </span>use<span class="_ _15"> </span>up<span class="_ _15"> </span>to<span class="_ _15"> </span>16<span class="_ _15"> </span>exabytes<span class="_ _14"> </span>(2</div><div class="t m5 x18c h3c y1fff ff7 fs25 fc2 sc0 ls0 ws0">64</div><div class="t m5 x147 h26 y2000 ff7 fs19 fc2 sc0 ls0 ws0">bytes).<span class="_ _15"> </span>Although<span class="_ _14"> </span>it<span class="_ _15"> </span>is</div><div class="t m5 x1d h26 y2001 ff7 fs19 fc2 sc0 ls0 ws0">hard<span class="_ _14"> </span>to<span class="_ _15"> </span>imagine<span class="_ _14"> </span>having<span class="_ _15"> </span>a<span class="_ _15"> </span>machine<span class="_ _14"> </span>with<span class="_ _15"> </span>that<span class="_ _15"> </span>much<span class="_ _14"> </span>memory<span class="_ _3"></span>,<span class="_ _21"> </span>keep<span class="_ _14"> </span>in<span class="_ _15"> </span>mind<span class="_ _15"> </span>that</div><div class="t m5 x1d h26 y2002 ff7 fs19 fc2 sc0 ls0 ws0">4<span class="_ _14"> </span>gigabytes<span class="_ _15"> </span>seemed<span class="_ _15"> </span>like<span class="_ _14"> </span>an<span class="_ _15"> </span>extreme<span class="_ _15"> </span>amount<span class="_ _14"> </span>of<span class="_ _15"> </span>memory<span class="_ _15"> </span>when<span class="_ _14"> </span>32-bit<span class="_ _15"> </span>machines</div><div class="t m5 x1d h26 y2003 ff7 fs19 fc2 sc0 ls0 ws0">became<span class="_"> </span>commonplace<span class="_"> </span>in<span class="_"> </span>the<span class="_"> </span>1970s<span class="_"> </span>and<span class="_"> </span>1980s<span class="_ _1"></span>.</div><div class="t m5 x29 h26 y2004 ff7 fs19 fc2 sc0 ls0 ws0">Our<span class="_"> </span>presentation<span class="_ _11"> </span>focuses<span class="_ _11"> </span>on<span class="_ _11"> </span>the<span class="_ _11"> </span>types<span class="_"> </span>of<span class="_ _11"> </span>machine-level<span class="_ _11"> </span>programs<span class="_ _11"> </span>generated</div><div class="t m5 x1d h26 y2005 ff7 fs19 fc2 sc0 ls0 ws0">when<span class="_ _14"> </span>compiling<span class="_ _14"> </span>C<span class="_ _14"> </span>and<span class="_ _15"> </span>similar<span class="_ _14"> </span>programming<span class="_ _14"> </span>languages<span class="_ _15"> </span>targeting<span class="_ _14"> </span>modern<span class="_ _14"> </span>oper<span class="_ _1"></span>-</div><div class="t m5 x1d h26 y2006 ff7 fs19 fc2 sc0 ls0 ws0">ating<span class="_ _16"> </span>systems<span class="_ _1"></span>.<span class="_ _14"> </span>As<span class="_ _16"> </span>a<span class="_ _14"> </span>consequence<span class="_ _0"></span>,<span class="_ _14"> </span>we<span class="_ _16"> </span>make<span class="_ _14"> </span>no<span class="_ _16"> </span>attempt<span class="_ _14"> </span>to<span class="_ _14"> </span>describe<span class="_ _16"> </span>many<span class="_ _14"> </span>of<span class="_ _16"> </span>the</div><div class="t m5 x1d h26 y2007 ff7 fs19 fc2 sc0 ls0 ws0">features<span class="_ _16"> </span>of<span class="_ _16"> </span>x86-64<span class="_ _16"> </span>that<span class="_ _16"> </span>arise<span class="_ _11"> </span>out<span class="_ _16"> </span>of<span class="_ _16"> </span>its<span class="_ _16"> </span>legacy<span class="_ _16"> </span>support<span class="_ _16"> </span>for<span class="_ _16"> </span>the<span class="_ _11"> </span>styles<span class="_ _16"> </span>of<span class="_ _16"> </span>programs</div><div class="t m5 x1d h26 y2008 ff7 fs19 fc2 sc0 ls0 ws0">written<span class="_ _14"> </span>in<span class="_ _14"> </span>the<span class="_ _14"> </span>early<span class="_ _14"> </span>days<span class="_ _16"> </span>of<span class="_ _14"> </span>microprocessors<span class="_ _0"></span>,<span class="_ _14"> </span>when<span class="_ _14"> </span>much<span class="_ _14"> </span>of<span class="_ _14"> </span>the<span class="_ _14"> </span>code<span class="_ _14"> </span>was<span class="_ _14"> </span>writ-</div><div class="t m5 x1d h26 y2009 ff7 fs19 fc2 sc0 ls0 ws0">ten<span class="_ _16"> </span>manually<span class="_ _11"> </span>and<span class="_ _16"> </span>where<span class="_ _16"> </span>programmers<span class="_ _16"> </span>had<span class="_ _16"> </span>to<span class="_ _11"> </span>struggle<span class="_ _16"> </span>with<span class="_ _16"> </span>the<span class="_ _16"> </span>limited<span class="_ _16"> </span>range<span class="_ _11"> </span>of</div><div class="t m5 x1d h26 y200a ff7 fs19 fc2 sc0 ls0 ws0">addresses<span class="_"> </span>allowed<span class="_"> </span>by<span class="_"> </span>16-bit<span class="_"> </span>machines<span class="_ _1"></span>.</div><div class="t m5 x1d h3b y1051 fff fs24 fc6 sc0 ls0 ws0">3.1<span class="_ _17"> </span><span class="ffe fs18">A<span class="_"> </span>Historical<span class="_"> </span>Perspective</span></div><div class="t m5 x1d h26 y587 ff7 fs19 fc1 sc0 ls0 ws0">T<span class="_ _1"></span>he<span class="_ _11"> </span>Intel<span class="_"> </span>processor<span class="_"> </span>line,<span class="_"> </span>colloquially<span class="_"> </span>referred<span class="_"> </span>to<span class="_ _11"> </span>as<span class="_"> </span><span class="ffa">x86<span class="_ _2"></span></span>,<span class="_"> </span>has<span class="_ _11"> </span>followed<span class="_"> </span>a<span class="_ _11"> </span>long<span class="_"> </span>evo-</div><div class="t m5 x1d h26 y588 ff7 fs19 fc1 sc0 ls0 ws0">lutionary<span class="_ _13"> </span>development.<span class="_ _13"> </span>It<span class="_ _13"> </span>started<span class="_ _13"> </span>with<span class="_"> </span>one<span class="_ _13"> </span>of<span class="_ _13"> </span>the<span class="_ _13"> </span>ﬁrst<span class="_ _13"> </span>single-chip<span class="_ _13"> </span>16-bit<span class="_ _13"> </span>micropro-</div><div class="t m5 x1d h26 y589 ff7 fs19 fc1 sc0 ls0 ws0">cessors<span class="_ _1"></span>,<span class="_"> </span>where<span class="_"> </span>many<span class="_"> </span>compromises<span class="_"> </span>had<span class="_"> </span>to<span class="_"> </span>be<span class="_"> </span>made<span class="_"> </span>due<span class="_"> </span>to<span class="_"> </span>the<span class="_"> </span>limited<span class="_"> </span>capabilities</div><div class="t m5 x1d h26 ya77 ff7 fs19 fc1 sc0 ls0 ws0">of<span class="_ _11"> </span>integrated<span class="_ _16"> </span>circuit<span class="_ _11"> </span>technology<span class="_ _16"> </span>at<span class="_ _11"> </span>the<span class="_ _11"> </span>time.<span class="_ _11"> </span>Since<span class="_ _11"> </span>then,<span class="_ _16"> </span>it<span class="_ _11"> </span>has<span class="_ _16"> </span>grown<span class="_ _11"> </span>to<span class="_ _16"> </span>take<span class="_ _11"> </span>ad-</div></div><div class="pi" data-data='{"ctm":[2.000000,0.000000,0.000000,2.000000,0.000000,0.000000]}'></div></div>
