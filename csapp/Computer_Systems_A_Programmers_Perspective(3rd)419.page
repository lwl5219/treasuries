<div id="pf1a3" class="pf w2 h11" data-page-no="1a3"><div class="pc pc1a3 w2 h11"><img class="bi x0 y0 w1 h1" alt="" src="csapp/bg1a3.png"/><div class="t m5 x14 h28 y9b ffe fs1e fc2 sc0 ls0 ws0">418<span class="_ _1b"> </span><span class="ff6 fs1f">Chapter<span class="_ _10"> </span>4<span class="_ _3d"> </span>Processor<span class="_ _10"> </span>Architecture</span></div><div class="t m5 xad h3f y3a4a ff3d fs27 fc1 sc0 ls0 ws0">State = x<span class="_ _1a8"> </span>State = y</div><div class="t m5 x1d h3f y3a4b ff3d fs27 fc1 sc0 ls0 ws0">Input = y</div><div class="t m5 x15e h3f y3a4c ff3d fs27 fc1 sc0 ls0 ws0">Output = x</div><div class="t m5 x159 h3f y3a4d ff3d fs27 fc1 sc0 ls0 ws0">Output =  y</div><div class="t m5 x191 h3f y3a4e ff3d fs27 fc1 sc0 ls0 ws0">Rising</div><div class="t m5 x1ae h3f y3a4f ff3d fs27 fc1 sc0 ls0 ws0">clock</div><div class="t m5 x22b h3f y3a50 ff3d fs27 fc1 sc0 ls0 ws0">x<span class="_ _1a9"> </span>y</div><div class="t m5 x1d h34 y523 ffe fs16 fc6 sc0 ls0 ws0">Figure<span class="_ _6"> </span>4.16<span class="_ _c"> </span><span class="fc1">Register<span class="_ _13"> </span>operation.<span class="_ _6"> </span><span class="ff6">The<span class="_ _6"> </span>register<span class="_ _13"> </span>outputs<span class="_ _6"> </span>remain<span class="_ _13"> </span>held<span class="_ _6"> </span>at<span class="_ _6"> </span>the<span class="_ _13"> </span>current<span class="_ _6"> </span>register</span></span></div><div class="t m5 x1d h34 y3a51 ff6 fs16 fc1 sc0 ls0 ws0">state<span class="_ _13"> </span>until<span class="_ _10"> </span>the<span class="_ _10"> </span>clock<span class="_ _13"> </span>signal<span class="_ _10"> </span>rises.<span class="_ _13"> </span>When<span class="_ _10"> </span>the<span class="_ _13"> </span>clock<span class="_ _10"> </span>rises,<span class="_ _13"> </span>the<span class="_ _10"> </span>values<span class="_ _10"> </span>at<span class="_ _13"> </span>the<span class="_ _10"> </span>register<span class="_ _13"> </span>inputs<span class="_ _10"> </span>are</div><div class="t m5 x1d h34 y3a52 ff6 fs16 fc1 sc0 ls0 ws0">captured<span class="_ _10"> </span>to<span class="_ _11"> </span>become<span class="_ _10"> </span>the<span class="_ _10"> </span>new<span class="_ _11"> </span>register<span class="_ _10"> </span>state.</div><div class="t m5 x1d h26 y3a53 ff7 fs19 fc1 sc0 ls0 ws0">avoid<span class="_"> </span>the<span class="_"> </span>delay<span class="_"> </span>of<span class="_"> </span>ﬁrst<span class="_"> </span>writing<span class="_"> </span>and<span class="_"> </span>then<span class="_"> </span>reading<span class="_"> </span>the<span class="_"> </span>register<span class="_"> </span>ﬁle<span class="_ _0"></span>.<span class="_"> </span>When<span class="_"> </span>necessary</div><div class="t m5 x1d h26 y3a54 ff7 fs19 fc1 sc0 ls0 ws0">to<span class="_ _11"> </span>avoid<span class="_ _16"> </span>ambiguity<span class="_ _7"></span>,<span class="_ _16"> </span>we<span class="_ _16"> </span>will<span class="_ _11"> </span>call<span class="_ _11"> </span>the<span class="_ _16"> </span>two<span class="_ _11"> </span>classes<span class="_ _16"> </span>of<span class="_ _11"> </span>registers<span class="_ _16"> </span>“hardware<span class="_ _11"> </span>registers”</div><div class="t m5 x1d h26 y3a55 ff7 fs19 fc1 sc0 ls0 ws0">and<span class="_"> </span>“program<span class="_"> </span>registers<span class="_ _1"></span>,<span class="_ _1"></span>”<span class="_"> </span>respectively<span class="_ _3"></span>.</div><div class="t m5 x29 h26 y3a56 ff7 fs19 fc1 sc0 ls0 ws0">F<span class="_ _1"></span>igure<span class="_ _21"> </span>4.16<span class="_ _21"> </span>gives<span class="_ _21"> </span>a<span class="_ _21"> </span>more<span class="_ _21"> </span>detailed<span class="_ _21"> </span>view<span class="_ _21"> </span>of<span class="_ _21"> </span>a<span class="_ _21"> </span>hardware<span class="_ _21"> </span>register<span class="_ _21"> </span>and<span class="_ _15"> </span>how<span class="_ _21"> </span>it</div><div class="t m5 x1d h26 y3a57 ff7 fs19 fc1 sc0 ls0 ws0">operates<span class="_ _1"></span>.<span class="_ _14"> </span>F<span class="_ _0"></span>or<span class="_ _14"> </span>most<span class="_ _15"> </span>of<span class="_ _15"> </span>the<span class="_ _15"> </span>time<span class="_ _1"></span>,<span class="_ _21"> </span>the<span class="_ _15"> </span>register<span class="_ _15"> </span>remains<span class="_ _14"> </span>in<span class="_ _15"> </span>a<span class="_ _15"> </span>ﬁxed<span class="_ _15"> </span>state<span class="_ _14"> </span>(shown<span class="_ _15"> </span>as</div><div class="t m5 x1d h26 y3a58 ff6 fs19 fc1 sc0 ls0 ws0">x<span class="ff7">),<span class="_"> </span>generating<span class="_"> </span>an<span class="_"> </span>output<span class="_ _11"> </span>equal<span class="_"> </span>to<span class="_"> </span>its<span class="_"> </span>current<span class="_ _11"> </span>state<span class="_ _0"></span>.<span class="_"> </span>Signals<span class="_"> </span>propagate<span class="_"> </span>through<span class="_ _11"> </span>the</span></div><div class="t m5 x1d h26 y3a59 ff7 fs19 fc1 sc0 ls0 ws0">combinational<span class="_ _11"> </span>logic<span class="_ _16"> </span>preceding<span class="_ _16"> </span>the<span class="_ _11"> </span>register,<span class="_ _11"> </span>creating<span class="_ _16"> </span>a<span class="_ _16"> </span>new<span class="_ _11"> </span>value<span class="_ _16"> </span>for<span class="_ _11"> </span>the<span class="_ _16"> </span>register</div><div class="t m5 x1d h26 y3a5a ff7 fs19 fc1 sc0 ls0 ws0">input<span class="_ _13"> </span>(shown<span class="_ _13"> </span>as<span class="_ _6"> </span><span class="ff6">y</span>),<span class="_ _13"> </span>but<span class="_ _13"> </span>the<span class="_ _13"> </span>register<span class="_ _13"> </span>output<span class="_ _6"> </span>remains<span class="_ _13"> </span>ﬁxed<span class="_ _13"> </span>as<span class="_ _13"> </span>long<span class="_ _13"> </span>as<span class="_ _6"> </span>the<span class="_ _13"> </span>clock<span class="_ _13"> </span>is<span class="_ _13"> </span>low<span class="_ _3"></span>.</div><div class="t m5 x1d h26 y3a5b ff7 fs19 fc1 sc0 ls0 ws0">As<span class="_ _16"> </span>the<span class="_ _16"> </span>clock<span class="_ _11"> </span>rises<span class="_ _1"></span>,<span class="_ _14"> </span>the<span class="_ _16"> </span>input<span class="_ _16"> </span>signals<span class="_ _11"> </span>are<span class="_ _16"> </span>loaded<span class="_ _16"> </span>into<span class="_ _16"> </span>the<span class="_ _16"> </span>register<span class="_ _16"> </span>as<span class="_ _16"> </span>its<span class="_ _11"> </span>next<span class="_ _16"> </span>state</div><div class="t m5 x1d h26 y3a5c ff7 fs19 fc1 sc0 ls0 ws0">(<span class="ff6">y</span>),<span class="_ _11"> </span>and<span class="_ _11"> </span>this<span class="_ _11"> </span>becomes<span class="_ _16"> </span>the<span class="_"> </span>new<span class="_ _11"> </span>register<span class="_ _16"> </span>output<span class="_"> </span>until<span class="_ _16"> </span>the<span class="_"> </span>next<span class="_ _11"> </span>rising<span class="_ _16"> </span>clock<span class="_"> </span>edge.<span class="_"> </span>A</div><div class="t m5 x1d h26 y3a5d ff7 fs19 fc1 sc0 ls0 ws0">key<span class="_ _16"> </span>point<span class="_ _11"> </span>is<span class="_ _16"> </span>that<span class="_ _16"> </span>the<span class="_ _11"> </span>registers<span class="_ _16"> </span>serve<span class="_ _11"> </span>as<span class="_ _16"> </span>barriers<span class="_ _16"> </span>between<span class="_ _11"> </span>the<span class="_ _16"> </span>combinational<span class="_ _16"> </span>logic</div><div class="t m5 x1d h26 y3a5e ff7 fs19 fc1 sc0 ls0 ws0">in<span class="_"> </span>different<span class="_"> </span>parts<span class="_"> </span>of<span class="_"> </span>the<span class="_"> </span>circuit.<span class="_"> </span>V<span class="_ _3"></span>alues<span class="_"> </span>only<span class="_"> </span>propagate<span class="_"> </span>from<span class="_"> </span>a<span class="_"> </span>register<span class="_"> </span>input<span class="_"> </span>to<span class="_"> </span>its</div><div class="t m5 x1d h26 y3a5f ff7 fs19 fc1 sc0 ls0 ws0">output<span class="_ _13"> </span>once<span class="_"> </span>every<span class="_ _13"> </span>clock<span class="_"> </span>c<span class="_ _1"></span>ycle<span class="_"> </span>at<span class="_ _13"> </span>the<span class="_"> </span>rising<span class="_ _13"> </span>clock<span class="_"> </span>edge<span class="_ _1"></span>.<span class="_ _13"> </span>Our<span class="_"> </span>Y86-64<span class="_ _13"> </span>processors<span class="_"> </span>will</div><div class="t m5 x1d h26 y3a60 ff7 fs19 fc1 sc0 ls0 ws0">use<span class="_ _13"> </span>clocked<span class="_ _13"> </span>registers<span class="_ _13"> </span>to<span class="_ _13"> </span>hold<span class="_"> </span>the<span class="_ _13"> </span>program<span class="_ _13"> </span>counter<span class="_ _13"> </span>(<span class="ff6">PC</span>),<span class="_ _13"> </span>the<span class="_ _13"> </span>condition<span class="_"> </span>codes<span class="_ _13"> </span>(<span class="ff6">CC</span>),</div><div class="t m5 x1d h26 y3a61 ff7 fs19 fc1 sc0 ls0 ws0">and<span class="_"> </span>the<span class="_"> </span>program<span class="_"> </span>status<span class="_"> </span>(<span class="ff6">Stat</span>).</div><div class="t m5 x29 h26 y3a62 ff7 fs19 fc1 sc0 ls0 ws0">T<span class="_ _1"></span>he<span class="_"> </span>following<span class="_"> </span>diagram<span class="_"> </span>shows<span class="_"> </span>a<span class="_"> </span>typical<span class="_"> </span>register<span class="_"> </span>ﬁle:</div><div class="t m5 x1f4 h3f y3a63 ff3d fs27 fc1 sc0 ls0 ws0">Register</div><div class="t m5 x117 h3f y3a64 ff3d fs27 fc1 sc0 ls0 ws0">file</div><div class="t m5 xb3 h44 y3a65 ff3d fs2a fc1 sc0 ls0 ws0">A</div><div class="t m5 x1af h44 y3a66 ff3d fs2a fc1 sc0 ls0 ws0">B</div><div class="t m5 x4d h44 y3a67 ff3d fs2a fc1 sc0 ls0 ws0">valA</div><div class="t m5 x181 h44 y3a68 ff3d fs2a fc1 sc0 ls0 ws0">valW</div><div class="t m5 x181 h44 y3a69 ff3d fs2a fc1 sc0 ls0 ws0">dstW</div><div class="t m5 x78 h44 y3a6a ff3d fs2a fc1 sc0 ls0 ws0">srcA</div><div class="t m5 x4d h44 y3a6b ff3d fs2a fc1 sc0 ls0 ws0">valB</div><div class="t m5 x4d h44 y3a6c ff3d fs2a fc1 sc0 ls0 ws0">srcB</div><div class="t m5 x241 h44 y3a6d ff3d fs2a fc1 sc0 ls0 ws0">clock</div><div class="t m5 x40 h3f y3a6e ff3d fs27 fc1 sc0 ls0 ws0">Write port</div><div class="t m5 xaa h44 y3a6f ff3d fs2a fc1 sc0 ls0 ws0">W</div><div class="t m5 x1d h3f y3a70 ff3d fs27 fc1 sc0 ls0 ws0">Read ports</div><div class="t m5 x1d h26 y5b5 ff7 fs19 fc1 sc0 ls0 ws0">T<span class="_ _1"></span>his<span class="_ _16"> </span>register<span class="_"> </span>ﬁle<span class="_ _16"> </span>has<span class="_ _11"> </span>two<span class="_ _11"> </span><span class="ffa">read<span class="_ _16"> </span>ports</span>,<span class="_ _11"> </span>named<span class="_ _11"> </span>A<span class="_ _16"> </span>and<span class="_"> </span>B<span class="_ _1"></span>,<span class="_ _16"> </span>and<span class="_"> </span>one<span class="_ _16"> </span><span class="ffa">write<span class="_ _11"> </span>port<span class="_ _2"></span></span>,<span class="_ _16"> </span>named</div><div class="t m5 x1d h26 y5b6 ff7 fs19 fc1 sc0 ls0 ws0">W<span class="_ _7"></span>.<span class="_ _15"> </span>Such<span class="_ _21"> </span>a<span class="_ _15"> </span><span class="ffa">multiported<span class="_ _f"> </span></span>random<span class="_ _15"> </span>access<span class="_ _21"> </span>memory<span class="_ _15"> </span>allows<span class="_ _15"> </span>multiple<span class="_ _21"> </span>read<span class="_ _15"> </span>and<span class="_ _21"> </span>write</div><div class="t m5 x1d h26 y5b7 ff7 fs19 fc1 sc0 ls0 ws0">operations<span class="_ _6"> </span>to<span class="_ _6"> </span>take<span class="_ _6"> </span>place<span class="_ _6"> </span>simultaneously<span class="_ _3"></span>.<span class="_ _6"> </span>In<span class="_ _6"> </span>the<span class="_ _6"> </span>register<span class="_ _6"> </span>ﬁle<span class="_ _6"> </span>diagrammed,<span class="_ _13"> </span>the<span class="_ _6"> </span>circuit</div><div class="t m5 x1d h26 y5b8 ff7 fs19 fc1 sc0 ls0 ws0">can<span class="_ _13"> </span>read<span class="_"> </span>the<span class="_ _13"> </span>values<span class="_"> </span>of<span class="_ _13"> </span>two<span class="_"> </span>program<span class="_ _13"> </span>registers<span class="_ _13"> </span>and<span class="_"> </span>update<span class="_ _13"> </span>the<span class="_"> </span>state<span class="_ _13"> </span>of<span class="_ _13"> </span>a<span class="_"> </span>third.<span class="_ _13"> </span>Each</div><div class="t m5 x1d h26 y5b9 ff7 fs19 fc1 sc0 ls0 ws0">port<span class="_ _11"> </span>has<span class="_ _11"> </span>an<span class="_ _11"> </span>address<span class="_ _16"> </span>input,<span class="_ _11"> </span>indicating<span class="_ _11"> </span>which<span class="_ _11"> </span>program<span class="_ _11"> </span>register<span class="_ _16"> </span>should<span class="_"> </span>be<span class="_ _16"> </span>selected,</div><div class="t m5 x1d h26 y5ba ff7 fs19 fc1 sc0 ls0 ws0">and<span class="_"> </span>a<span class="_ _13"> </span>data<span class="_"> </span>output<span class="_ _13"> </span>or<span class="_"> </span>input<span class="_ _13"> </span>giving<span class="_"> </span>a<span class="_ _13"> </span>value<span class="_"> </span>for<span class="_ _13"> </span>that<span class="_"> </span>program<span class="_ _13"> </span>register.<span class="_ _13"> </span>T<span class="_ _1"></span>he<span class="_"> </span>addresses</div><div class="t m5 x1d h26 y5bb ff7 fs19 fc1 sc0 ls0 ws0">are<span class="_ _13"> </span>register<span class="_ _13"> </span>identiﬁers<span class="_ _1"></span>,<span class="_ _13"> </span>using<span class="_ _13"> </span>the<span class="_ _13"> </span>encoding<span class="_ _13"> </span>shown<span class="_ _13"> </span>in<span class="_ _13"> </span>Figure<span class="_ _13"> </span>4.4.<span class="_ _13"> </span>T<span class="_ _1"></span>he<span class="_ _13"> </span>two<span class="_ _13"> </span>read<span class="_ _13"> </span>ports</div><div class="t m5 x1d h26 y5bc ff7 fs19 fc1 sc0 ls0 ws0">have<span class="_ _13"> </span>address<span class="_"> </span>inputs<span class="_ _13"> </span><span class="ff6">srcA<span class="_ _13"> </span></span>and<span class="_"> </span><span class="ff6">sr<span class="_ _0"></span>cB<span class="_ _13"> </span><span class="ff7">(short<span class="_"> </span>for<span class="_ _13"> </span>“source<span class="_"> </span>A<span class="_ _7"></span>”<span class="_ _13"> </span>and<span class="_"> </span>“source<span class="_ _13"> </span>B”)<span class="_ _13"> </span>and<span class="_"> </span>data</span></span></div></div><div class="pi" data-data='{"ctm":[2.000000,0.000000,0.000000,2.000000,0.000000,0.000000]}'></div></div>
