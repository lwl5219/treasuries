<div id="pf420" class="pf w2 h11" data-page-no="420"><div class="pc pc420 w2 h11"><img class="bi x0 y0 w1 h1" alt="" src="csapp/bg420.png"/><div class="t m5 x250 h28 y9b ff6 fs1f fc2 sc0 ls0 ws0">Section<span class="_ _10"> </span>12.6<span class="_ _60"> </span>Using<span class="_ _10"> </span>Threads<span class="_ _10"> </span>for<span class="_ _10"> </span>Parallelism<span class="_ _3e"> </span><span class="ffe fs1e">1055</span></div><div class="t m5 x17 h31 y390 ff7 fs21 fc2 sc0 ls0 ws0">T<span class="_ _1"></span>hreads<span class="_"> </span>(<span class="ff11">t<span class="_ _be"> </span></span><span class="ls1e">)<span class="_ _14a"> </span>1<span class="_ _10"> </span>248<span class="_ _4a"></span>1<span class="_ _ee"></span>6</span></div><div class="t m5 x17 h31 y5244 ff7 fs21 fc2 sc0 ls0 ws0">Cores<span class="_"> </span>(<span class="ff11">p<span class="_ _2"></span></span><span class="ls1e">)<span class="_ _131"> </span>1<span class="_ _10"> </span>2444</span></div><div class="t m5 x17 h31 ye1a ff7 fs21 fc2 sc0 ls0 ws0">Running<span class="_"> </span>time<span class="_"> </span>(<span class="ff11">T</span></div><div class="t m5 x126 h51 y836e ff11 fs20 fc2 sc0 ls0 ws0">p</div><div class="t m5 x140 h31 ye1a ff7 fs21 fc2 sc0 ls0 ws0">)<span class="_ _85"> </span>1.06<span class="_ _ab"> </span>0.54<span class="_ _1f9"> </span>0.28<span class="_ _1f9"> </span>0.29<span class="_ _61"> </span>0.30</div><div class="t m5 x17 h31 y5245 ff7 fs21 fc2 sc0 ls0 ws0">Speedup<span class="_"> </span>(<span class="ff11">S</span></div><div class="t m5 x1b8 h51 y836f ff11 fs20 fc2 sc0 ls0 ws0">p</div><div class="t m5 x5b h31 y4ab2 ff7 fs21 fc2 sc0 ls0 ws0">)<span class="_ _122"> </span>1<span class="_ _131"> </span>1.9<span class="_ _8c"> </span>3.8<span class="_ _8c"> </span>3.7<span class="_ _8c"> </span>3.5</div><div class="t m5 x17 h31 y8370 ff7 fs21 fc2 sc0 ls0 ws0">Efﬁciency<span class="_"> </span>(<span class="ff11">E</span></div><div class="t m5 x1a7 h51 y8371 ff11 fs20 fc2 sc0 ls0 ws0">p</div><div class="t m5 x5c h31 ydc7 ff7 fs21 fc2 sc0 ls0 ws0">)<span class="_ _2c"> </span>100%<span class="_ _26"> </span>98%<span class="_ _26"> </span>95%<span class="_ _26"> </span>91%<span class="_ _26"> </span>88%</div><div class="t m5 x17 h2f y2318 ffe fs16 fc6 sc0 ls0 ws0">Figure<span class="_"> </span>12.36<span class="_ _66"> </span><span class="fc1">Speedup<span class="_"> </span>and<span class="_"> </span>parallel<span class="_"> </span>efﬁciency<span class="_"> </span>for<span class="_"> </span>the<span class="_"> </span>execution<span class="_"> </span>times<span class="_"> </span>in</span></div><div class="t m5 x17 h2f y8372 ffe fs16 fc1 sc0 ls0 ws0">Figure<span class="_"> </span>12.35.</div><div class="t m5 x17 h26 y8373 ff7 fs19 fc1 sc0 ls0 ws0">time<span class="_ _13"> </span>of<span class="_ _13"> </span>a<span class="_ _13"> </span>sequential<span class="_ _6"> </span>version<span class="_ _13"> </span>of<span class="_ _13"> </span>the<span class="_ _13"> </span>program,<span class="_ _13"> </span>then<span class="_ _13"> </span><span class="ff11">S</span></div><div class="t m5 xd2 h50 y8374 ff11 fs25 fc1 sc0 ls0 ws0">p</div><div class="t m5 x118 h26 y8373 ff7 fs19 fc1 sc0 ls0 ws0">is<span class="_ _13"> </span>called<span class="_ _13"> </span>the<span class="_ _13"> </span><span class="ffa">absolute<span class="_ _6"> </span>speedup</span>.</div><div class="t m5 x17 h26 y8375 ff7 fs19 fc1 sc0 ls0 ws0">When<span class="_"> </span><span class="ff11">T</span></div><div class="t m5 xd1 h3c y8376 ff7 fs25 fc1 sc0 ls0 ws0">1</div><div class="t m5 x1da h26 y8377 ff7 fs19 fc1 sc0 ls0 ws0">is<span class="_"> </span>the<span class="_ _11"> </span>execution<span class="_ _11"> </span>time<span class="_ _11"> </span>of<span class="_ _11"> </span>the<span class="_ _11"> </span>parallel<span class="_ _11"> </span>version<span class="_ _11"> </span>of<span class="_ _11"> </span>the<span class="_ _11"> </span>program<span class="_ _11"> </span>running<span class="_ _11"> </span>on</div><div class="t m5 x17 h26 y8378 ff7 fs19 fc1 sc0 ls0 ws0">one<span class="_"> </span>core<span class="_ _1"></span>,<span class="_"> </span>then<span class="_ _11"> </span><span class="ff11">S</span></div><div class="t m5 x1d5 h50 y8379 ff11 fs25 fc1 sc0 ls0 ws0">p</div><div class="t m5 x178 h26 y837a ff7 fs19 fc1 sc0 ls0 ws0">is<span class="_"> </span>called<span class="_"> </span>the<span class="_"> </span><span class="ffa">relative<span class="_"> </span>speedup</span>.<span class="_"> </span>Absolute<span class="_"> </span>speedup<span class="_"> </span>is<span class="_"> </span>a<span class="_"> </span>truer<span class="_"> </span>mea-</div><div class="t m5 x17 h26 y837b ff7 fs19 fc1 sc0 ls0 ws0">sure<span class="_"> </span>of<span class="_"> </span>the<span class="_ _11"> </span>beneﬁts<span class="_"> </span>of<span class="_"> </span>parallelism<span class="_ _11"> </span>than<span class="_"> </span>relative<span class="_ _11"> </span>speedup<span class="_ _1"></span>.<span class="_ _11"> </span>Parallel<span class="_"> </span>programs<span class="_"> </span>often</div><div class="t m5 x17 h26 y837c ff7 fs19 fc1 sc0 ls0 ws0">suffer<span class="_ _13"> </span>from<span class="_ _13"> </span>synchronization<span class="_ _13"> </span>overheads<span class="_ _3"></span>,<span class="_ _13"> </span>even<span class="_ _13"> </span>when<span class="_ _13"> </span>they<span class="_ _13"> </span>run<span class="_ _13"> </span>on<span class="_ _13"> </span>one<span class="_ _6"> </span>processor,<span class="_ _13"> </span>and</div><div class="t m5 x17 h26 y837d ff7 fs19 fc1 sc0 ls0 ws0">these<span class="_ _13"> </span>overheads<span class="_"> </span>can<span class="_ _13"> </span>artiﬁcially<span class="_ _13"> </span>inﬂate<span class="_ _13"> </span>the<span class="_"> </span>relative<span class="_ _13"> </span>speedup<span class="_ _13"> </span>numbers<span class="_ _13"> </span>because<span class="_"> </span>they</div><div class="t m5 x17 h26 y837e ff7 fs19 fc1 sc0 ls0 ws0">increase<span class="_"> </span>the<span class="_"> </span>size<span class="_ _11"> </span>of<span class="_"> </span>the<span class="_"> </span>numerator.<span class="_"> </span>On<span class="_"> </span>the<span class="_ _11"> </span>other<span class="_"> </span>hand,<span class="_"> </span>absolute<span class="_ _11"> </span>speedup<span class="_"> </span>is<span class="_"> </span>more</div><div class="t m5 x17 h26 y837f ff7 fs19 fc1 sc0 ls0 ws0">difﬁcult<span class="_ _16"> </span>to<span class="_ _16"> </span>measure<span class="_ _16"> </span>than<span class="_ _16"> </span>relative<span class="_ _16"> </span>speedup<span class="_ _16"> </span>because<span class="_ _16"> </span>measuring<span class="_ _16"> </span>absolute<span class="_ _16"> </span>speedup</div><div class="t m5 x17 h26 y8380 ff7 fs19 fc1 sc0 ls0 ws0">requires<span class="_ _13"> </span>two<span class="_"> </span>different<span class="_ _13"> </span>versions<span class="_"> </span>of<span class="_ _13"> </span>the<span class="_"> </span>program.<span class="_ _13"> </span>F<span class="_ _1"></span>or<span class="_"> </span>complex<span class="_ _13"> </span>parallel<span class="_"> </span>codes<span class="_ _3"></span>,<span class="_"> </span>creat-</div><div class="t m5 x17 h26 y8381 ff7 fs19 fc1 sc0 ls0 ws0">ing<span class="_"> </span>a<span class="_ _13"> </span>separate<span class="_"> </span>sequential<span class="_"> </span>version<span class="_ _13"> </span>might<span class="_"> </span>not<span class="_ _13"> </span>be<span class="_"> </span>feasible<span class="_ _0"></span>,<span class="_"> </span>either<span class="_ _13"> </span>because<span class="_"> </span>the<span class="_"> </span>code<span class="_ _13"> </span>is</div><div class="t m5 x17 h26 y8382 ff7 fs19 fc1 sc0 ls0 ws0">too<span class="_"> </span>complex<span class="_"> </span>or<span class="_"> </span>because<span class="_"> </span>the<span class="_"> </span>source<span class="_"> </span>code<span class="_"> </span>is<span class="_"> </span>not<span class="_"> </span>available<span class="_ _1"></span>.</div><div class="t m5 x26 h26 y8383 ff7 fs19 fc1 sc0 ls0 ws0">A<span class="_"> </span>related<span class="_"> </span>measure<span class="_ _1"></span>,<span class="_"> </span>known<span class="_"> </span>as<span class="_"> </span><span class="ffa">efﬁciency</span>,<span class="_"> </span>is<span class="_"> </span>deﬁned<span class="_"> </span>as</div><div class="t m5 xd h45 y8384 ff11 fs19 fc1 sc0 ls0 ws0">E</div><div class="t m5 xab h50 y8385 ff11 fs25 fc1 sc0 ls0 ws0">p</div><div class="t m5 x167 h46 y8386 ff12 fs19 fc1 sc0 ls0 ws0">=</div><div class="t m5 x206 h45 y8387 ff11 fs19 fc1 sc0 ls0 ws0">S</div><div class="t m5 x16d h50 y8388 ff11 fs25 fc1 sc0 ls0 ws0">p</div><div class="t m5 xfa h45 y8389 ff11 fs19 fc1 sc0 ls0 ws0">p</div><div class="t m5 x9f h46 y838a ff12 fs19 fc1 sc0 ls0 ws0">=</div><div class="t m5 x87 h45 y838b ff11 fs19 fc1 sc0 ls0 ws0">T</div><div class="t m5 x198 h3c y838c ff7 fs25 fc1 sc0 ls0 ws0">1</div><div class="t m5 x15 h45 y8389 ff11 fs19 fc1 sc0 ls10e ws0">pT</div><div class="t m5 x185 h50 y838d ff11 fs25 fc1 sc0 ls0 ws0">p</div><div class="t m5 x17 h26 y1a25 ff7 fs19 fc1 sc0 ls0 ws0">and<span class="_ _13"> </span>is<span class="_"> </span>typically<span class="_ _13"> </span>reported<span class="_"> </span>as<span class="_ _13"> </span>a<span class="_"> </span>percentage<span class="_ _13"> </span>in<span class="_"> </span>the<span class="_ _13"> </span>range<span class="_"> </span>(0,<span class="_ _13"> </span>100].<span class="_"> </span>Efﬁciency<span class="_ _13"> </span>is<span class="_ _13"> </span>a<span class="_"> </span>mea-</div><div class="t m5 x17 h26 y1a26 ff7 fs19 fc1 sc0 ls0 ws0">sure<span class="_ _15"> </span>of<span class="_ _15"> </span>the<span class="_ _21"> </span>overhead<span class="_ _15"> </span>due<span class="_ _15"> </span>to<span class="_ _21"> </span>parallelization.<span class="_ _15"> </span>Programs<span class="_ _21"> </span>with<span class="_ _15"> </span>high<span class="_ _15"> </span>efﬁciency<span class="_ _15"> </span>are</div><div class="t m5 x17 h26 y1a27 ff7 fs19 fc1 sc0 ls0 ws0">spending<span class="_ _11"> </span>more<span class="_ _11"> </span>time<span class="_ _11"> </span>doing<span class="_ _16"> </span>useful<span class="_ _11"> </span>work<span class="_ _11"> </span>and<span class="_ _11"> </span>less<span class="_ _11"> </span>time<span class="_ _16"> </span>synchronizing<span class="_ _11"> </span>and<span class="_ _11"> </span>commu-</div><div class="t m5 x17 h26 y1a28 ff7 fs19 fc1 sc0 ls0 ws0">nicating<span class="_"> </span>than<span class="_"> </span>programs<span class="_"> </span>with<span class="_"> </span>low<span class="_"> </span>efﬁciency<span class="_ _7"></span>.</div><div class="t m5 x26 h26 y1a29 ff7 fs19 fc1 sc0 ls0 ws0">F<span class="_ _1"></span>igure<span class="_ _21"> </span>12.36<span class="_ _f"> </span>shows<span class="_ _21"> </span>the<span class="_ _21"> </span>different<span class="_ _21"> </span>speedup<span class="_ _21"> </span>and<span class="_ _21"> </span>efﬁciency<span class="_ _15"> </span>measures<span class="_ _21"> </span>for<span class="_ _21"> </span>our</div><div class="t m5 x17 h26 y719 ff7 fs19 fc1 sc0 ls0 ws0">example<span class="_ _13"> </span>parallel<span class="_ _13"> </span>sum<span class="_ _13"> </span>program.<span class="_"> </span>Efﬁciencies<span class="_ _13"> </span>over<span class="_ _13"> </span>90<span class="_ _13"> </span>percent<span class="_ _13"> </span>such<span class="_ _13"> </span>as<span class="_ _13"> </span>these<span class="_"> </span>are<span class="_ _13"> </span>very</div><div class="t m5 x17 h26 y71a ff7 fs19 fc1 sc0 ls0 ws0">good,<span class="_ _11"> </span>but<span class="_ _11"> </span>do<span class="_"> </span>not<span class="_ _11"> </span>be<span class="_ _11"> </span>fooled.<span class="_ _11"> </span>W<span class="_ _3"></span>e<span class="_ _11"> </span>were<span class="_ _11"> </span>able<span class="_ _11"> </span>to<span class="_ _11"> </span>achieve<span class="_ _11"> </span>high<span class="_ _11"> </span>efﬁciency<span class="_"> </span>because<span class="_ _11"> </span>our</div><div class="t m5 x17 h26 y71b ff7 fs19 fc1 sc0 ls0 ws0">problem<span class="_ _16"> </span>was<span class="_ _11"> </span>trivially<span class="_ _16"> </span>easy<span class="_ _16"> </span>to<span class="_ _11"> </span>parallelize.<span class="_ _11"> </span>In<span class="_ _16"> </span>practice<span class="_ _1"></span>,<span class="_ _16"> </span>this<span class="_ _16"> </span>is<span class="_ _11"> </span>not<span class="_ _16"> </span>usually<span class="_ _16"> </span>the<span class="_ _11"> </span>case.</div><div class="t m5 x17 h26 y71c ff7 fs19 fc1 sc0 ls0 ws0">Parallel<span class="_ _11"> </span>programming<span class="_ _16"> </span>has<span class="_ _11"> </span>been<span class="_ _16"> </span>an<span class="_ _11"> </span>active<span class="_ _16"> </span>area<span class="_ _11"> </span>of<span class="_ _16"> </span>research<span class="_ _11"> </span>for<span class="_ _11"> </span>decades<span class="_ _1"></span>.<span class="_ _16"> </span>W<span class="_ _1"></span>ith<span class="_ _16"> </span>the</div><div class="t m5 x17 h26 y71d ff7 fs19 fc1 sc0 ls0 ws0">advent<span class="_ _13"> </span>of<span class="_ _6"> </span>commodity<span class="_ _13"> </span>multi-core<span class="_ _13"> </span>machines<span class="_ _6"> </span>whose<span class="_ _13"> </span>core<span class="_ _13"> </span>count<span class="_ _6"> </span>is<span class="_ _13"> </span>doubling<span class="_ _13"> </span>every<span class="_ _6"> </span>few</div><div class="t m5 x17 h26 y71e ff7 fs19 fc1 sc0 ls0 ws0">years<span class="_ _1"></span>,<span class="_ _16"> </span>parallel<span class="_ _16"> </span>programming<span class="_ _11"> </span>continues<span class="_ _16"> </span>to<span class="_ _16"> </span>be<span class="_ _16"> </span>a<span class="_ _11"> </span>deep,<span class="_ _11"> </span>difﬁcult,<span class="_ _16"> </span>and<span class="_ _16"> </span>active<span class="_ _16"> </span>area<span class="_ _16"> </span>of</div><div class="t m5 x17 h26 y71f ff7 fs19 fc1 sc0 ls0 ws0">research.</div><div class="t m5 x26 h26 y720 ff7 fs19 fc1 sc0 ls0 ws0">T<span class="_ _1"></span>here<span class="_ _14"> </span>is<span class="_ _14"> </span>another<span class="_ _15"> </span>view<span class="_ _14"> </span>of<span class="_ _14"> </span>speedup<span class="_ _1"></span>,<span class="_ _15"> </span>known<span class="_ _14"> </span>as<span class="_ _14"> </span><span class="ffa">weak<span class="_ _15"> </span>scaling<span class="_ _2"></span></span>,<span class="_ _14"> </span>which<span class="_ _14"> </span>increases</div><div class="t m5 x17 h26 y721 ff7 fs19 fc1 sc0 ls0 ws0">the<span class="_ _16"> </span>problem<span class="_ _16"> </span>size<span class="_ _16"> </span>along<span class="_ _16"> </span>with<span class="_ _16"> </span>the<span class="_ _16"> </span>number<span class="_ _16"> </span>of<span class="_ _16"> </span>processors<span class="_ _0"></span>,<span class="_ _16"> </span>such<span class="_ _16"> </span>that<span class="_ _16"> </span>the<span class="_ _14"> </span>amount<span class="_ _16"> </span>of</div><div class="t m5 x17 h26 y722 ff7 fs19 fc1 sc0 ls0 ws0">work<span class="_ _11"> </span>performed<span class="_ _11"> </span>on<span class="_ _11"> </span>each<span class="_ _11"> </span>processor<span class="_ _11"> </span>is<span class="_ _11"> </span>held<span class="_ _11"> </span>constant<span class="_ _11"> </span>as<span class="_ _11"> </span>the<span class="_ _16"> </span>number<span class="_"> </span>of<span class="_ _11"> </span>processors</div><div class="t m5 x17 h26 y723 ff7 fs19 fc1 sc0 ls0 ws0">increases<span class="_ _1"></span>.<span class="_ _16"> </span>With<span class="_ _16"> </span>this<span class="_ _16"> </span>formulation,<span class="_ _14"> </span>speedup<span class="_ _16"> </span>and<span class="_ _14"> </span>efﬁciency<span class="_ _16"> </span>are<span class="_ _16"> </span>expressed<span class="_ _16"> </span>in<span class="_ _14"> </span>terms</div><div class="t m5 x17 h26 y724 ff7 fs19 fc1 sc0 ls0 ws0">of<span class="_ _11"> </span>the<span class="_ _16"> </span>total<span class="_ _11"> </span>amount<span class="_ _16"> </span>of<span class="_ _11"> </span>work<span class="_ _16"> </span>accomplished<span class="_ _11"> </span>per<span class="_ _16"> </span>unit<span class="_ _11"> </span>time.<span class="_"> </span>F<span class="_ _1"></span>or<span class="_ _16"> </span>example<span class="_ _0"></span>,<span class="_ _16"> </span>if<span class="_ _11"> </span>we<span class="_ _16"> </span>can</div><div class="t m5 x17 h26 y725 ff7 fs19 fc1 sc0 ls0 ws0">double<span class="_ _13"> </span>the<span class="_"> </span>number<span class="_ _13"> </span>of<span class="_ _13"> </span>processors<span class="_"> </span>and<span class="_ _13"> </span>do<span class="_"> </span>twice<span class="_ _13"> </span>the<span class="_ _13"> </span>amount<span class="_"> </span>of<span class="_ _13"> </span>work<span class="_ _13"> </span>per<span class="_"> </span>hour<span class="_ _1"></span>,<span class="_"> </span>then</div><div class="t m5 x17 h26 y726 ff7 fs19 fc1 sc0 ls0 ws0">we<span class="_"> </span>are<span class="_"> </span>enjoying<span class="_"> </span>linear<span class="_"> </span>speedup<span class="_"> </span>and<span class="_"> </span>100<span class="_"> </span>percent<span class="_"> </span>efﬁciency<span class="_ _7"></span>.</div></div><div class="pi" data-data='{"ctm":[2.000000,0.000000,0.000000,2.000000,0.000000,0.000000]}'></div></div>
