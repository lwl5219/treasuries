<div id="pf2bf" class="pf w2 h11" data-page-no="2bf"><div class="pc pc2bf w2 h11"><img class="bi x0 y0 w1 h1" alt="" src="csapp/bg2bf.png"/><div class="t m5 x14 h28 y9b ffe fs1e fc2 sc0 ls0 ws0">702<span class="_ _1b"> </span><span class="ff6 fs1f">Chapter<span class="_ _10"> </span>6<span class="_ _3d"> </span>The<span class="_ _10"> </span>Memory<span class="_ _10"> </span>Hierarchy</span></div><div class="t m5 x1d h28 ye7 ffe fs1e fc6 sc0 ls0 ws0">Solution<span class="_"> </span>to<span class="_"> </span>Problem<span class="_"> </span>6.18<span class="_ _e"> </span><span class="fs16">(page<span class="_"> </span>673)</span></div><div class="t m5 x1d h26 y1d16 ff7 fs19 fc1 sc0 ls0 ws0">Each<span class="_ _11"> </span>32-byte<span class="_ _11"> </span>cache<span class="_ _16"> </span>line<span class="_ _11"> </span>holds<span class="_ _11"> </span>two<span class="_ _16"> </span>contiguous<span class="_ _11"> </span><span class="ffd">algae_position<span class="_ _11"> </span></span>structures<span class="_ _1"></span>.<span class="_ _11"> </span>Each</div><div class="t m5 x1d h26 y1d17 ff7 fs19 fc1 sc0 ls0 ws0">loop<span class="_ _16"> </span>visits<span class="_ _16"> </span>these<span class="_ _14"> </span>structures<span class="_ _16"> </span>in<span class="_ _14"> </span>memory<span class="_ _16"> </span>order,<span class="_ _16"> </span>reading<span class="_ _14"> </span>one<span class="_ _16"> </span>integer<span class="_ _14"> </span>element<span class="_ _16"> </span>each</div><div class="t m5 x1d h26 y1d18 ff7 fs19 fc1 sc0 ls0 ws0">time<span class="_ _1"></span>.<span class="_"> </span>So<span class="_"> </span>the<span class="_"> </span>pattern<span class="_"> </span>for<span class="_ _11"> </span>each<span class="_"> </span>loop<span class="_"> </span>is<span class="_"> </span>miss<span class="_ _1"></span>,<span class="_"> </span>hit,<span class="_"> </span>miss<span class="_ _1"></span>,<span class="_"> </span>hit,<span class="_"> </span>and<span class="_"> </span>so<span class="_"> </span>on.<span class="_"> </span>Notice<span class="_"> </span>that<span class="_"> </span>for</div><div class="t m5 x1d h26 y1d88 ff7 fs19 fc1 sc0 ls0 ws0">this<span class="_"> </span>problem<span class="_ _13"> </span>we<span class="_"> </span>could<span class="_"> </span>have<span class="_ _13"> </span>predicted<span class="_"> </span>the<span class="_"> </span>miss<span class="_ _13"> </span>rate<span class="_"> </span>without<span class="_"> </span>actually<span class="_ _13"> </span>enumerating</div><div class="t m5 x1d h26 y1d89 ff7 fs19 fc1 sc0 ls0 ws0">the<span class="_"> </span>total<span class="_"> </span>number<span class="_"> </span>of<span class="_"> </span>reads<span class="_"> </span>and<span class="_"> </span>misses<span class="_ _1"></span>.</div><div class="t m5 x124 h26 y1d1b ff7 fs19 fc1 sc0 ls0 ws0">A.<span class="_ _1f"> </span>What<span class="_"> </span>is<span class="_"> </span>the<span class="_"> </span>total<span class="_"> </span>number<span class="_"> </span>of<span class="_"> </span>read<span class="_"> </span>accesses?<span class="_"> </span>2,048<span class="_"> </span>reads<span class="_ _3"></span>.</div><div class="t m5 x124 h26 y5da0 ff7 fs19 fc1 sc0 ls0 ws0">B<span class="_ _3"></span>.<span class="_ _1d"> </span>What<span class="_ _6"> </span>is<span class="_ _6"> </span>the<span class="_ _6"> </span>total<span class="_ _6"> </span>number<span class="_ _13"> </span>of<span class="_ _a"> </span>read<span class="_ _6"> </span>accesses<span class="_ _13"> </span>that<span class="_ _a"> </span>miss<span class="_ _6"> </span>in<span class="_ _6"> </span>the<span class="_ _13"> </span>cache?<span class="_ _a"> </span>1,024<span class="_ _6"> </span>misses<span class="_ _1"></span>.</div><div class="t m5 x124 h46 y5da1 ff7 fs19 fc1 sc0 ls0 ws0">C.<span class="_ _25"> </span>What<span class="_"> </span>is<span class="_"> </span>the<span class="_"> </span>miss<span class="_"> </span>rate?<span class="_"> </span>1024<span class="ff11">/</span>2048<span class="_ _13"> </span><span class="ff12">=<span class="_ _13"> </span></span>50%<span class="_ _1"></span>.</div><div class="t m5 x1d h28 y1ab0 ffe fs1e fc6 sc0 ls0 ws0">Solution<span class="_"> </span>to<span class="_"> </span>Problem<span class="_"> </span>6.19<span class="_ _e"> </span><span class="fs16">(page<span class="_"> </span>674)</span></div><div class="t m5 x1d h26 y5da2 ff7 fs19 fc1 sc0 ls0 ws0">T<span class="_ _1"></span>he<span class="_ _14"> </span>key<span class="_ _14"> </span>to<span class="_ _14"> </span>this<span class="_ _14"> </span>problem<span class="_ _14"> </span>is<span class="_ _14"> </span>noticing<span class="_ _14"> </span>that<span class="_ _14"> </span>the<span class="_ _14"> </span>cache<span class="_ _14"> </span>can<span class="_ _14"> </span>only<span class="_ _14"> </span>hold<span class="_ _14"> </span>1<span class="_ _1"></span><span class="ff11">/<span class="ff7">2<span class="_ _15"> </span>of<span class="_ _14"> </span>the<span class="_ _14"> </span>ar<span class="_ _1"></span>-</span></span></div><div class="t m5 x1d h26 y5da3 ff7 fs19 fc1 sc0 ls0 ws0">ray<span class="_ _3"></span>.<span class="_ _11"> </span>So<span class="_ _11"> </span>the<span class="_ _16"> </span>column-wise<span class="_ _11"> </span>scan<span class="_ _16"> </span>of<span class="_ _11"> </span>the<span class="_ _11"> </span>second<span class="_ _16"> </span>half<span class="_ _11"> </span>of<span class="_ _16"> </span>the<span class="_ _11"> </span>array<span class="_ _11"> </span>evicts<span class="_ _16"> </span>the<span class="_ _11"> </span>lines<span class="_ _11"> </span>that</div><div class="t m5 x1d h26 y5da4 ff7 fs19 fc1 sc0 ls0 ws0">were<span class="_ _16"> </span>loaded<span class="_ _16"> </span>during<span class="_ _16"> </span>the<span class="_ _16"> </span>scan<span class="_ _16"> </span>of<span class="_ _14"> </span>the<span class="_ _16"> </span>ﬁrst<span class="_ _16"> </span>half<span class="_ _1"></span>.<span class="_ _16"> </span>F<span class="_ _1"></span>or<span class="_ _14"> </span>example<span class="_ _1"></span>,<span class="_ _14"> </span>reading<span class="_ _16"> </span>the<span class="_ _16"> </span>ﬁrst<span class="_ _16"> </span>ele-</div><div class="t m5 x1d h26 y5da5 ff7 fs19 fc1 sc0 ls0 ws0">ment<span class="_"> </span>of<span class="_"> </span><span class="ffd">grid[8][0]<span class="_ _10"> </span></span>evicts<span class="_"> </span>the<span class="_"> </span>line<span class="_"> </span>that<span class="_"> </span>was<span class="_"> </span>loaded<span class="_"> </span>when<span class="_"> </span>we<span class="_ _13"> </span>read<span class="_"> </span>elements<span class="_"> </span>from</div><div class="t m5 x1d h26 y5da6 ffd fs19 fc1 sc0 ls0 ws0">grid[0][0]<span class="ff7">.<span class="_ _13"> </span>T<span class="_ _1"></span>his<span class="_ _13"> </span>line<span class="_ _13"> </span>also<span class="_ _13"> </span>contained<span class="_ _13"> </span><span class="ffd">grid[0][1]</span>.<span class="_ _6"> </span>So<span class="_ _13"> </span>when<span class="_ _13"> </span>we<span class="_ _13"> </span>begin<span class="_ _13"> </span>scanning<span class="_ _13"> </span>the</span></div><div class="t m5 x1d h26 y5da7 ff7 fs19 fc1 sc0 ls0 ws0">next<span class="_"> </span>column,<span class="_"> </span>the<span class="_"> </span>reference<span class="_"> </span>to<span class="_"> </span>the<span class="_"> </span>ﬁrst<span class="_"> </span>element<span class="_"> </span>of<span class="_"> </span><span class="ffd">grid[0][1]<span class="_ _10"> </span></span>misses<span class="_ _1"></span>.</div><div class="t m5 x124 h26 y5da8 ff7 fs19 fc1 sc0 ls0 ws0">A.<span class="_ _1f"> </span>What<span class="_"> </span>is<span class="_"> </span>the<span class="_"> </span>total<span class="_"> </span>number<span class="_"> </span>of<span class="_"> </span>read<span class="_"> </span>accesses?<span class="_"> </span>2,048<span class="_"> </span>reads<span class="_ _3"></span>.</div><div class="t m5 x124 h26 y5da9 ff7 fs19 fc1 sc0 ls0 ws0">B<span class="_ _3"></span>.<span class="_ _1d"> </span>What<span class="_ _13"> </span>is<span class="_ _13"> </span>the<span class="_ _13"> </span>total<span class="_"> </span>number<span class="_ _13"> </span>of<span class="_ _13"> </span>read<span class="_ _13"> </span>accesses<span class="_ _13"> </span>that<span class="_ _13"> </span>hit<span class="_"> </span>in<span class="_ _13"> </span>the<span class="_ _13"> </span>cache?<span class="_ _13"> </span>1,024<span class="_ _13"> </span>misses<span class="_ _1"></span>.</div><div class="t m5 x124 h46 y5daa ff7 fs19 fc1 sc0 ls0 ws0">C.<span class="_ _25"> </span>What<span class="_"> </span>is<span class="_"> </span>the<span class="_"> </span>hit<span class="_"> </span>rate?<span class="_"> </span>1024<span class="ff11">/</span>2048<span class="_ _13"> </span><span class="ff12">=<span class="_ _13"> </span></span>50%<span class="_ _1"></span>.</div><div class="t m5 x124 h26 y5dab ff7 fs19 fc1 sc0 ls0 ws0">D<span class="_ _3"></span>.<span class="_ _23"> </span>What<span class="_"> </span>would<span class="_ _13"> </span>the<span class="_"> </span>hit<span class="_"> </span>rate<span class="_"> </span>be<span class="_"> </span>if<span class="_ _13"> </span>the<span class="_"> </span>cache<span class="_"> </span>were<span class="_"> </span>twice<span class="_ _13"> </span>as<span class="_"> </span>big?<span class="_"> </span>If<span class="_"> </span>the<span class="_ _13"> </span>cache<span class="_"> </span>were</div><div class="t m5 x4f h26 y5dac ff7 fs19 fc1 sc0 ls0 ws0">twice<span class="_ _11"> </span>as<span class="_ _16"> </span>big,<span class="_ _11"> </span>it<span class="_ _16"> </span>could<span class="_ _11"> </span>hold<span class="_ _16"> </span>the<span class="_ _11"> </span>entire<span class="_ _16"> </span><span class="ffd">grid<span class="_ _11"> </span></span>array<span class="_ _3"></span>.<span class="_ _16"> </span>T<span class="_ _1"></span>he<span class="_ _16"> </span>only<span class="_ _11"> </span>misses<span class="_ _16"> </span>would<span class="_ _11"> </span>be</div><div class="t m5 x4f h46 y5dad ff7 fs19 fc1 sc0 ls0 ws0">the<span class="_"> </span>initial<span class="_"> </span>cold<span class="_"> </span>misses<span class="_ _1"></span>,<span class="_"> </span>and<span class="_"> </span>the<span class="_"> </span>hit<span class="_"> </span>rate<span class="_"> </span>would<span class="_"> </span>be<span class="_"> </span>3<span class="ff11">/</span>4<span class="_ _13"> </span><span class="ff12">=<span class="_ _13"> </span></span>75%<span class="_ _1"></span>.</div><div class="t m5 x1d h28 y322a ffe fs1e fc6 sc0 ls0 ws0">Solution<span class="_"> </span>to<span class="_"> </span>Problem<span class="_"> </span>6.20<span class="_ _e"> </span><span class="fs16">(page<span class="_"> </span>674)</span></div><div class="t m5 x1d h26 y256d ff7 fs19 fc1 sc0 ls0 ws0">T<span class="_ _1"></span>his<span class="_ _16"> </span>loop<span class="_ _11"> </span>has<span class="_ _16"> </span>a<span class="_ _16"> </span>nice<span class="_ _11"> </span>stride-1<span class="_ _16"> </span>reference<span class="_ _11"> </span>pattern,<span class="_ _16"> </span>and<span class="_ _16"> </span>thus<span class="_ _11"> </span>the<span class="_ _16"> </span>only<span class="_ _16"> </span>misses<span class="_ _11"> </span>are<span class="_ _16"> </span>the</div><div class="t m5 x1d h26 y5dae ff7 fs19 fc1 sc0 ls0 ws0">initial<span class="_"> </span>cold<span class="_"> </span>misses<span class="_ _1"></span>.</div><div class="t m5 x124 h26 y5daf ff7 fs19 fc1 sc0 ls0 ws0">A.<span class="_ _1f"> </span>What<span class="_"> </span>is<span class="_"> </span>the<span class="_"> </span>total<span class="_"> </span>number<span class="_"> </span>of<span class="_"> </span>read<span class="_"> </span>accesses?<span class="_"> </span>2,048<span class="_"> </span>reads<span class="_ _3"></span>.</div><div class="t m5 x124 h26 y5db0 ff7 fs19 fc1 sc0 ls0 ws0">B<span class="_ _3"></span>.<span class="_ _1d"> </span>What<span class="_ _13"> </span>is<span class="_ _13"> </span>the<span class="_ _13"> </span>total<span class="_"> </span>number<span class="_ _13"> </span>of<span class="_ _13"> </span>read<span class="_ _13"> </span>accesses<span class="_ _13"> </span>that<span class="_ _13"> </span>hit<span class="_"> </span>in<span class="_ _13"> </span>the<span class="_ _13"> </span>cache?<span class="_ _13"> </span>1,536<span class="_ _13"> </span>misses<span class="_ _1"></span>.</div><div class="t m5 x124 h46 y5db1 ff7 fs19 fc1 sc0 ls0 ws0">C.<span class="_ _25"> </span>What<span class="_"> </span>is<span class="_"> </span>the<span class="_"> </span>hit<span class="_"> </span>rate?<span class="_"> </span>1536<span class="ff11">/</span>2048<span class="_ _13"> </span><span class="ff12">=<span class="_ _13"></span></span>75%<span class="_ _3"></span>.</div><div class="t m5 x124 h26 y5db2 ff7 fs19 fc1 sc0 ls0 ws0">D<span class="_ _3"></span>.<span class="_ _23"> </span>What<span class="_ _16"> </span>would<span class="_ _16"> </span>the<span class="_ _14"> </span>hit<span class="_ _16"> </span>rate<span class="_ _14"> </span>be<span class="_ _16"> </span>if<span class="_ _16"> </span>the<span class="_ _14"> </span>cache<span class="_ _16"> </span>were<span class="_ _14"> </span>twice<span class="_ _16"> </span>as<span class="_ _16"> </span>big?<span class="_ _14"> </span>Increasing<span class="_ _16"> </span>the</div><div class="t m5 x4f h26 y5db3 ff7 fs19 fc1 sc0 ls0 ws0">cache<span class="_"> </span>size<span class="_"> </span>by<span class="_"> </span>any<span class="_"> </span>amount<span class="_"> </span>would<span class="_"> </span>not<span class="_"> </span>change<span class="_"> </span>the<span class="_"> </span>miss<span class="_"> </span>rate<span class="_ _1"></span>,<span class="_"> </span>since<span class="_"> </span>cold<span class="_"> </span>misses</div><div class="t m5 x4f h26 y5db4 ff7 fs19 fc1 sc0 ls0 ws0">are<span class="_"> </span>unavoidable<span class="_ _1"></span>.</div><div class="t m5 x1d h28 y4b6e ffe fs1e fc6 sc0 ls0 ws0">Solution<span class="_"> </span>to<span class="_"> </span>Problem<span class="_"> </span>6.21<span class="_ _e"> </span><span class="fs16">(page<span class="_"> </span>679)</span></div><div class="t m5 x1d h26 y5db5 ff7 fs19 fc1 sc0 ls0 ws0">T<span class="_ _1"></span>he<span class="_ _16"> </span>sustained<span class="_ _16"> </span>throughput<span class="_ _16"> </span>using<span class="_ _16"> </span>large<span class="_ _16"> </span>strides<span class="_ _16"> </span>from<span class="_ _16"> </span>L1<span class="_ _16"> </span>is<span class="_ _16"> </span>about<span class="_ _16"> </span>12,000<span class="_ _16"> </span>MB/s<span class="_ _1"></span>,<span class="_ _16"> </span>the</div><div class="t m5 x1d h26 y5db6 ff7 fs19 fc1 sc0 ls0 ws0">clock<span class="_ _e"> </span>frequenc<span class="_ _0"></span>y<span class="_ _e"> </span>is<span class="_ _e"> </span>2,100<span class="_ _f"> </span>MHz,<span class="_ _22"> </span>and<span class="_ _e"> </span>the<span class="_ _e"> </span>individual<span class="_ _f"> </span>read<span class="_ _e"> </span>accesses<span class="_ _e"> </span>are<span class="_ _e"> </span>in<span class="_ _e"> </span>units</div><div class="t m5 x1d h26 y5db7 ff7 fs19 fc1 sc0 ls0 ws0">of<span class="_ _15"> </span>16-byte<span class="_ _21"> </span><span class="ffd">long</span>s<span class="_ _1"></span>.<span class="_ _21"> </span>Thus<span class="_ _3"></span>,<span class="_ _f"> </span>from<span class="_ _21"> </span>this<span class="_ _21"> </span>graph<span class="_ _21"> </span>we<span class="_ _15"> </span>can<span class="_ _21"> </span>estimate<span class="_ _21"> </span>that<span class="_ _21"> </span>it<span class="_ _21"> </span>takes<span class="_ _21"> </span>roughly</div><div class="t m5 x1d h46 y5db8 ff7 fs19 fc1 sc0 ls0 ws0">2<span class="ff11">,</span>100<span class="ff11">/</span>12<span class="ff11">,</span>000<span class="_"> </span><span class="ff12">×<span class="_ _10"> </span></span>16<span class="_ _13"> </span><span class="ff12">=<span class="_ _10"> </span></span>2<span class="ff11">.</span>8<span class="_"> </span><span class="ff12">≈<span class="_ _13"></span></span>3<span class="ff11">.</span>0<span class="_ _16"> </span>cycles<span class="_ _16"> </span>to<span class="_ _16"> </span>access<span class="_ _16"> </span>a<span class="_ _14"> </span>word<span class="_ _16"> </span>from<span class="_ _16"> </span>L1<span class="_ _14"> </span>on<span class="_ _16"> </span>this<span class="_ _16"> </span>machine,</div><div class="t m5 x1d h26 y5db9 ff7 fs19 fc1 sc0 ls0 ws0">which<span class="_"> </span>is<span class="_"> </span>roughly<span class="_ _11"> </span>1.25<span class="_"> </span>times<span class="_"> </span>faster<span class="_ _11"> </span>than<span class="_"> </span>the<span class="_"> </span>nominal<span class="_ _11"> </span>4-cycle<span class="_"> </span>latenc<span class="_ _0"></span>y<span class="_"> </span>from<span class="_"> </span>L1.<span class="_ _11"> </span>T<span class="_ _1"></span>his</div><div class="t m5 x1d h46 y177a ff7 fs19 fc1 sc0 ls0 ws0">is<span class="_ _13"> </span>due<span class="_"> </span>to<span class="_ _13"> </span>the<span class="_"> </span>parallelism<span class="_ _13"> </span>of<span class="_ _13"> </span>the<span class="_"> </span>4<span class="_ _13"> </span><span class="ff12">×<span class="_ _13"> </span></span>4<span class="_"> </span>unrolled<span class="_ _13"> </span>loop<span class="_ _0"></span>,<span class="_"> </span>which<span class="_ _13"> </span>allows<span class="_ _13"> </span>multiple<span class="_"> </span>loads<span class="_ _13"> </span>to</div><div class="t m5 x1d h26 y177b ff7 fs19 fc1 sc0 ls0 ws0">be<span class="_"> </span>in<span class="_"> </span>ﬂight<span class="_"> </span>at<span class="_"> </span>the<span class="_"> </span>same<span class="_"> </span>time<span class="_ _1"></span>.</div></div><div class="pi" data-data='{"ctm":[2.000000,0.000000,0.000000,2.000000,0.000000,0.000000]}'></div></div>
