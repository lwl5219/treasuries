<div id="pf113" class="pf w2 h11" data-page-no="113"><div class="pc pc113 w2 h11"><img class="bi x0 y0 w1 h1" alt="" src="csapp/bg113.png"/><div class="t m5 x14 h28 y9b ffe fs1e fc2 sc0 ls0 ws0">274<span class="_ _1b"> </span><span class="ff6 fs1f">Chapter<span class="_ _10"> </span>3<span class="_ _3d"> </span>Machine-Level<span class="_ _10"> </span>Representation<span class="_ _10"> </span>of<span class="_ _10"> </span>Programs</span></div><div class="t m5 x1d h34 ye7 ff6 fs16 fc2 sc0 ls0 ws0">(a)<span class="_ _10"> </span>Code</div><div class="t m5 xad h61 y2283 ff13 fs35 fc6 sc0 ls0 ws0">void<span class="_ _f"> </span>switcher(long<span class="_ _f"> </span>a,<span class="_ _f"> </span>long<span class="_ _e"> </span>b,<span class="_ _21"> </span>long<span class="_ _f"> </span>c,<span class="_ _e"> </span>long<span class="_ _21"> </span>*dest)</div><div class="t m5 xad h61 y28e4 ff13 fs35 fc6 sc0 ls0 ws0">a<span class="_ _f"> </span>in<span class="_ _f"> </span>%rsi,<span class="_ _f"> </span>b<span class="_ _e"> </span>in<span class="_ _21"> </span>%rdi,<span class="_ _f"> </span>c<span class="_ _e"> </span>in<span class="_ _21"> </span>%rdx,<span class="_ _f"> </span>d<span class="_ _e"> </span>in<span class="_ _21"> </span>%rcx</div><div class="t m5 x1f h2d yc51 ff6 fs20 fc6 sc0 ls0 ws0">1<span class="_ _1c"> </span><span class="ffd fs1e fc2">switcher:</span></div><div class="t m5 x1f h2d y28e5 ff6 fs20 fc6 sc0 ls0 ws0">2<span class="_ _45"> </span><span class="ffd fs1e fc2">cmpq<span class="_ _46"> </span>$7,<span class="_ _e"> </span>%rdi</span></div><div class="t m5 x1f h2e y28e6 ff6 fs20 fc6 sc0 ls0 ws0">3</div><div class="t m5 x10d h2d y28e7 ffd fs1e fc2 sc0 ls0 ws0">ja<span class="_ _5a"> </span>.L2</div><div class="t m5 x1f h2d ye9d ff6 fs20 fc6 sc0 ls0 ws0">4<span class="_ _45"> </span><span class="ffd fs1e fc2">jmp<span class="_ _8c"> </span>*.L4(,%rdi,8)</span></div><div class="t m5 x1f h2d y28e8 ff6 fs20 fc6 sc0 ls0 ws0">5<span class="_ _45"> </span><span class="ffd fs1e fc2">.section<span class="_ _71"> </span>.rodata</span></div><div class="t m5 x1f h2d y28e9 ff6 fs20 fc6 sc0 ls0 ws0">6<span class="_ _1c"> </span><span class="ffd fs1e fc2">.L7:</span></div><div class="t m5 x1f h2d y1814 ff6 fs20 fc6 sc0 ls0 ws0">7<span class="_ _45"> </span><span class="ffd fs1e fc2">xorq<span class="_ _46"> </span>$15,<span class="_ _e"> </span>%rsi</span></div><div class="t m5 x1f h2d y28ea ff6 fs20 fc6 sc0 ls0 ws0">8<span class="_ _45"> </span><span class="ffd fs1e fc2">movq<span class="_ _46"> </span>%rsi,<span class="_ _e"> </span>%rdx</span></div><div class="t m5 x1f h2d y28eb ff6 fs20 fc6 sc0 ls0 ws0">9<span class="_ _1c"> </span><span class="ffd fs1e fc2">.L3:</span></div><div class="t m5 x1b0 h2d y28ec ff6 fs20 fc6 sc0 ls0 ws0">10<span class="_ _45"> </span><span class="ffd fs1e fc2">leaq<span class="_ _46"> </span>112(%rdx),<span class="_ _e"> </span>%rdi</span></div><div class="t m5 x1b0 h2d y28ed ff6 fs20 fc6 sc0 ls0 ws0">11<span class="_ _45"> </span><span class="ffd fs1e fc2">jmp<span class="_ _8c"> </span>.L6</span></div><div class="t m5 x1b0 h2d y28ee ff6 fs20 fc6 sc0 ls0 ws0">12<span class="_ _1c"> </span><span class="ffd fs1e fc2">.L5:</span></div><div class="t m5 x1b0 h2d y28ef ff6 fs20 fc6 sc0 ls0 ws0">13<span class="_ _45"> </span><span class="ffd fs1e fc2">leaq<span class="_ _46"> </span>(%rdx,%rsi),<span class="_ _e"> </span>%rdi</span></div><div class="t m5 x1b0 h2d y28f0 ff6 fs20 fc6 sc0 ls0 ws0">14<span class="_ _45"> </span><span class="ffd fs1e fc2">salq<span class="_ _46"> </span>$2,<span class="_ _e"> </span>%rdi</span></div><div class="t m5 x1b0 h2d y28f1 ff6 fs20 fc6 sc0 ls0 ws0">15<span class="_ _45"> </span><span class="ffd fs1e fc2">jmp<span class="_ _8c"> </span>.L6</span></div><div class="t m5 x1b0 h2d y28f2 ff6 fs20 fc6 sc0 ls0 ws0">16<span class="_ _1c"> </span><span class="ffd fs1e fc2">.L2:</span></div><div class="t m5 x1b0 h2d yeb6 ff6 fs20 fc6 sc0 ls0 ws0">17<span class="_ _45"> </span><span class="ffd fs1e fc2">movq<span class="_ _46"> </span>%rsi,<span class="_ _e"> </span>%rdi</span></div><div class="t m5 x1b0 h2d y28f3 ff6 fs20 fc6 sc0 ls0 ws0">18<span class="_ _1c"> </span><span class="ffd fs1e fc2">.L6:</span></div><div class="t m5 x1b0 h2d y2566 ff6 fs20 fc6 sc0 ls0 ws0">19<span class="_ _45"> </span><span class="ffd fs1e fc2">movq<span class="_ _46"> </span>%rdi,<span class="_ _e"> </span>(%rcx)</span></div><div class="t m5 x1b0 h2e y2567 ff6 fs20 fc6 sc0 ls0 ws0">20</div><div class="t m5 x10d h2d y2568 ffd fs1e fc2 sc0 ls0 ws0">ret</div><div class="t m5 x1d h34 y28f4 ff6 fs16 fc2 sc0 ls0 ws0">(b)<span class="_ _10"> </span>Jump<span class="_ _11"> </span>table</div><div class="t m5 x1f h2e y28f5 ff6 fs20 fc6 sc0 ls0 ws0">1</div><div class="t m5 x4f h2d y28f6 ffd fs1e fc2 sc0 ls0 ws0">.L4:</div><div class="t m5 x1f h2d y28f7 ff6 fs20 fc6 sc0 ls0 ws0">2<span class="_ _45"> </span><span class="ffd fs1e fc2">.quad<span class="_ _3f"> </span>.L3</span></div><div class="t m5 x1f h2d y28f8 ff6 fs20 fc6 sc0 ls0 ws0">3<span class="_ _45"> </span><span class="ffd fs1e fc2">.quad<span class="_ _3f"> </span>.L2</span></div><div class="t m5 x1f h2d y28f9 ff6 fs20 fc6 sc0 ls0 ws0">4<span class="_ _45"> </span><span class="ffd fs1e fc2">.quad<span class="_ _3f"> </span>.L5</span></div><div class="t m5 x1f h2e y28fa ff6 fs20 fc6 sc0 ls0 ws0">5</div><div class="t m5 x10d h2d y28fb ffd fs1e fc2 sc0 ls0 ws0">.quad<span class="_ _3f"> </span>.L2</div><div class="t m5 x1f h2d y28fc ff6 fs20 fc6 sc0 ls0 ws0">6<span class="_ _45"> </span><span class="ffd fs1e fc2">.quad<span class="_ _3f"> </span>.L6</span></div><div class="t m5 x1f h2d y28fd ff6 fs20 fc6 sc0 ls0 ws0">7<span class="_ _45"> </span><span class="ffd fs1e fc2">.quad<span class="_ _3f"> </span>.L7</span></div><div class="t m5 x1f h2d y28fe ff6 fs20 fc6 sc0 ls0 ws0">8<span class="_ _45"> </span><span class="ffd fs1e fc2">.quad<span class="_ _3f"> </span>.L2</span></div><div class="t m5 x1f h2e y28ff ff6 fs20 fc6 sc0 ls0 ws0">9</div><div class="t m5 x10d h2d y2900 ffd fs1e fc2 sc0 ls0 ws0">.quad<span class="_ _3f"> </span>.L5</div><div class="t m5 x1d h2f y2901 ffe fs16 fc6 sc0 ls0 ws0">Figure<span class="_"> </span>3.24<span class="_ _66"> </span><span class="fc1">Assembly<span class="_"> </span>code<span class="_"> </span>and<span class="_"> </span>jump<span class="_"> </span>table<span class="_"> </span>for<span class="_"> </span>Problem<span class="_"> </span>3.31.</span></div><div class="t m5 x1d h3b y2902 fff fs24 fc6 sc0 ls0 ws0">3.7<span class="_ _17"> </span><span class="ffe fs18">Procedures</span></div><div class="t m5 x1d h26 y250 ff7 fs19 fc1 sc0 ls0 ws0">Procedures<span class="_ _13"> </span>are<span class="_ _13"> </span>a<span class="_ _13"> </span>key<span class="_ _13"> </span>abstraction<span class="_ _13"> </span>in<span class="_ _13"> </span>software.<span class="_ _13"> </span>T<span class="_ _3"></span>hey<span class="_"> </span>provide<span class="_ _13"> </span>a<span class="_ _13"> </span>way<span class="_ _13"> </span>to<span class="_ _13"> </span>package<span class="_ _13"> </span>code</div><div class="t m5 x1d h26 y251 ff7 fs19 fc1 sc0 ls0 ws0">that<span class="_ _14"> </span>implements<span class="_ _14"> </span>some<span class="_ _14"> </span>functionality<span class="_ _14"> </span>with<span class="_ _15"> </span>a<span class="_ _14"> </span>designated<span class="_ _14"> </span>set<span class="_ _14"> </span>of<span class="_ _14"> </span>arguments<span class="_ _14"> </span>and<span class="_ _15"> </span>an</div><div class="t m5 x1d h26 y252 ff7 fs19 fc1 sc0 ls0 ws0">optional<span class="_"> </span>return<span class="_"> </span>value<span class="_ _0"></span>.<span class="_"> </span>T<span class="_ _1"></span>his<span class="_ _11"> </span>function<span class="_"> </span>can<span class="_"> </span>then<span class="_"> </span>be<span class="_"> </span>invoked<span class="_ _11"> </span>from<span class="_"> </span>different<span class="_"> </span>points<span class="_"> </span>in</div><div class="t m5 x1d h26 y253 ff7 fs19 fc1 sc0 ls0 ws0">a<span class="_ _13"> </span>program.<span class="_ _13"> </span>W<span class="_ _1"></span>ell-designed<span class="_ _13"> </span>software<span class="_ _13"> </span>uses<span class="_ _13"> </span>procedures<span class="_"> </span>as<span class="_ _13"> </span>an<span class="_ _13"> </span>abstraction<span class="_ _13"> </span>mechanism,</div><div class="t m5 x1d h26 y254 ff7 fs19 fc1 sc0 ls0 ws0">hiding<span class="_ _16"> </span>the<span class="_ _14"> </span>detailed<span class="_ _14"> </span>implementation<span class="_ _14"> </span>of<span class="_ _14"> </span>some<span class="_ _14"> </span>action<span class="_ _14"> </span>while<span class="_ _16"> </span>providing<span class="_ _14"> </span>a<span class="_ _14"> </span>clear<span class="_ _14"> </span>and</div><div class="t m5 x1d h26 y255 ff7 fs19 fc1 sc0 ls0 ws0">concise<span class="_ _21"> </span>interface<span class="_ _21"> </span>deÔ¨Ånition<span class="_ _21"> </span>of<span class="_ _21"> </span>what<span class="_ _21"> </span>values<span class="_ _21"> </span>will<span class="_ _21"> </span>be<span class="_ _21"> </span>computed<span class="_ _21"> </span>and<span class="_ _21"> </span>what<span class="_ _21"> </span>effects</div><div class="t m5 x1d h26 y256 ff7 fs19 fc1 sc0 ls0 ws0">the<span class="_ _16"> </span>procedure<span class="_ _16"> </span>will<span class="_ _16"> </span>have<span class="_ _16"> </span>on<span class="_ _16"> </span>the<span class="_ _16"> </span>program<span class="_ _16"> </span>state.<span class="_ _11"> </span>Procedures<span class="_ _16"> </span>come<span class="_ _16"> </span>in<span class="_ _16"> </span>many<span class="_ _14"> </span>guises</div></div><div class="pi" data-data='{"ctm":[2.000000,0.000000,0.000000,2.000000,0.000000,0.000000]}'></div></div>
